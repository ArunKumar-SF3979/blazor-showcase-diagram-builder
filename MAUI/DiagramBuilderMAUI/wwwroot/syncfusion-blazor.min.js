/*!
 * filename: syncfusion-blazor.min.js
 * version : 18.2.46-patch
 * Copyright Syncfusion Inc. 2001 - 2020. All rights reserved.
 * Use of this code is subject to the terms of our license.
 * A copy of the current license can be obtained at any time by e-mailing
 * licensing@syncfusion.com. Any infringement will be prosecuted under
 * applicable laws.
 */!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e){e.copy=function(t,e,i,n){var r=t||{},o=arguments.length;n&&(o-=1);for(var s=function(t){if(!a[t])return"continue";var e=a[t];Object.keys(e).forEach(function(t){var i,o=r[t],s=e[t];n&&(isObject(s)||Array.isArray(s))?isObject(s)?(i=o||{},r[t]=s({},i,s,n)):(i=o||[],r[t]=s([],i,s,n)):r[t]=s})},a=arguments,l=1;l<o;l++)s(l);return r}},function(t,e,i){i(4),i(2),t.exports=i(3)},function(module,exports){window.sfBlazor={getElementByXpath:function(t){return document.evaluate(t,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue},getElement:function(t,e,i){var n=null!=t&&null!=window[t]?window[t][e]:null;return null!=n?n:window.sfBlazor.getElementByXpath(i)},getAttribute:function(t,e,i,n){var r=window.sfBlazor.getElement(t,e,i);if(null!=r)return r.getAttribute(n)},setAttribute:function(t,e,i,n,r){window.sfBlazor.getElement(t,e,i).setAttribute(n,r)},addClass:function(t,e,i,n){sf.base.addClass([window.sfBlazor.getElement(t,e,i)],n)},removeClass:function(t,e,i,n){sf.base.removeClass([window.sfBlazor.getElement(t,e,i)],n)},getClassList:function(t,e,i){return Array.prototype.slice.call(window.sfBlazor.getElement(t,e,i).classList)},enableRipple:function(t){sf.base.enableRipple(t)},enableRtl:function(t){sf.base.enableRtl(t)},loadCldr:function(...t){for(var e=0;e<t.length;e++)sf.base.loadCldr(JSON.parse(t[e]))},setCulture:function(t,e){sf.base.setCulture(t),sfBlazor.updateCultureFormats(e)},getCulture:function(){return navigator.language},setCurrencyCode:function(t){sf.base.setCurrencyCode(t)},load:function(t){sf.base.L10n.load(JSON.parse(t))},updateCultureFormats:function(t){sf.base.extend(sf.base.blazorCultureFormats,t)},isRendered:async function(){return!0},isDevice:function(){return sf.base.Browser.isDevice},animate:function(t,e){new sf.base.Animation(e).animate(t)},callRipple:function(t,e){sf.base.rippleEffect(t,e)},createXPathFromElement:function(t){for(var e=document.getElementsByTagName("*"),i=[];t&&1===t.nodeType;t=t.parentNode)if(t.hasAttribute("id")){for(var n=0,r=0;r<e.length&&(e[r].hasAttribute("id")&&e[r].id===t.id&&n++,!(n>1));r++);if(1===n)return i.unshift('id("'+t.getAttribute("id")+'")'),i.join("/");i.unshift(t.localName.toLowerCase()+'[@id="'+t.getAttribute("id")+'"]')}else{for(var o=1,s=t.previousSibling;s;s=s.previousSibling)s.localName===t.localName&&o++;i.unshift(t.localName.toLowerCase()+"["+o+"]")}return i.length?"/"+i.join("/"):null},libs:["base"],modules:{},tempCallBacks:[],dataSourceProperties:["dataSource","dataSource_custom","shapeData"],convertOptions:function(t,e=!1){var i={};for(var n in t){for(var r=n.trim().split("."),o=i,s=0;s<r.length-1;s++){var a=r[s].match(/^(\w+)\[(\d+)\]$/);if(a){var l=o[a[1]];l||(l=o[a[1]]=[]),o=l[a[2]]=l[a[2]]||{}}else o=o[r[s]]=o[r[s]]||{}}o[r[s]]=t[n],e&&delete t[n]}return i},convertInitialOptions:function(t){return t=sfBlazor.convertOptions(JSON.parse(t),!0),JSON.stringify(t)},initialize:async function(t,e,i,n,r,o,s,a,l,h,c){try{if(null==n)return;if(c&&c.length&&sfBlazor.load(c),sfBlazor.loadModules){var d=n.split(".")[2].toLowerCase(),p=JSON.parse(h);p.length&&p.map(t=>{-1===sfBlazor.dependencyJson[d].indexOf(t)&&sfBlazor.dependencyJson[d].push(t)});var u=[];(u=u.concat(sfBlazor.dependencyJson[d])).push(d),await sfBlazor.loadModules(d,u,function(){sfBlazor.initComponent(t,e,i,n,r,o,s,a,l)})}else sfBlazor.initComponent(t,e,i,n,r,o,s,a,l)}catch(t){sfBlazor.throwError(t,n)}},initComponent:function(t,e,i,n,r,o,s,a,l){if("sf.popups.Spinner"!=n){sf.base.enableBlazorMode(),!window.BlazorAdaptor&&sf.data&&"object"==typeof sf.data&&sfBlazor.initBlazorAdaptor(),e=sfBlazor.convertInitialOptions(e);var h={dotnetInstance:r,templateRefs:a};(e=JSON.parse(e,sfBlazor.parseRevive.bind(h))).elementID="_ejs"+t;var c=sf.base.getValue(n,window);sfBlazor.bindEvents(e,i,r,n);var d=new c(e);if(d.isServerRendered=!0,d._dotnetInstance=r,d.templateDotnetInstance=a,d.interopAdaptor=l,d.bindableProps=o=JSON.parse(o),s){var p=document.getElementById(t);for(var u in s)p.setAttribute(u,s[u])}"sf.pdfviewer.PdfViewer"==n&&null==d.serviceUrl&&(sf.pdfviewer.AjaxHandler.prototype.send=sfBlazor.requestHandler.bind(d)),"sf.documenteditor.DocumentEditorContainer"!=n&&"sf.documenteditor.DocumentEditor"!=n||null!=d.serviceUrl&&""!=d.serviceUrl&&null!=d.serviceUrl||(sf.documenteditor.XmlHttpRequestHandler.prototype.send=sfBlazor.docEditRequestHandler.bind(d)),d.appendTo("#"+t)}},renderComplete:function(t,e){null!=t&&(window[t]&&(window[t.id]instanceof t||window[t.id]instanceof HTMLElement)&&delete window[t.id],t.classList.remove("e-blazor-hidden"))},isDataSourceProperty:function(t){return-1!==sfBlazor.dataSourceProperties.indexOf(t)},setModel:async function(t,e,i,n){try{var r=document.getElementById(t);if(!r)return;var o=r.ej2_instances[0],s=JSON.parse(n);s.length?await sfBlazor.loadDependencies(s,function(){sfBlazor.reInitComponent(o,e,i)}):sfBlazor.reInitComponent(o,e,i)}catch(t){window.sfBlazor.throwError(t,o)}},reInitComponent:function(t,e,i){var n;t.preventUpdate=!0,sfBlazor.updateOldProperties(t,e);var r={dotnetInstance:t._dotnetInstance};n=sfBlazor.getCompObject(t,e,r,i),t.setProperties(n),t.dataBind(),t.preventUpdate=!1},getCompObject:function(t,e,i,n){var r=sfBlazor.getModelObject(t,e,i,!1);if(r){for(var o=Object.keys(r),s=0;s<o.length;s++){var a=o[s],l=t[a],h=r[a],c=l&&l.isComplexArray,d=h&&"object"==typeof h&&Object.keys(h)[0];if((l instanceof sf.base.ChildProperty||c)&&!isNaN(d)){var p,u=h[d];if(!Array.isArray(h)&&u&&u.isNewComponent){var f=a.charAt(0).toUpperCase()+a.substr(1,a.length),g=n.split(".").splice(0,2).join(".")+"."+f,m=sf.base.getValue(g,window);m&&(p=sf.base.createInstance(m,[t,a,u,c]))}p&&(r[a][d]=p,t[a]&&Array.isArray(t[a])&&t[a].filter((t,e)=>{d!==e&&(r[a][e]=t)}))}}return r}},getModelObject:function(t,e,i,n){for(var r={},o=e.match(/"(.*?)":/g),s=0;s<o.length;s++){var a=o[s].replace(":","").replace(/"/g,""),l=sfBlazor.convertInitialOptions(e),h=n?sf.base.getValue(a,t):sf.base.getValue(a,JSON.parse(l,sfBlazor.parseRevive.bind(i)));if(void 0!==h){a=a.split(/\[(\d+)\]/).join(".").replace(/\.\./g,".");var c=sfBlazor.getNestedObject(t,a,h);sf.base.extend(r,{},c.model,!0),n||(t.deepMerge=t.deepMerge?Array.from(new Set(t.deepMerge.concat(c.deepMerge))):c.deepMerge)}}return r},updateOldProperties:function(t,e){var i=sfBlazor.getModelObject(t,e,null,!0);sf.base.extend(t.oldProperties,{},i,!0)},getNestedObject:function(t,e,i,n){var r=n||{},o=[];if(-1!==e.indexOf(".")){var s=e.split(".");-1===o.indexOf(s[0])&&o.push(s[0]);for(var a=0;a<s.length;a++){var l=a===s.length-1?i:{},h=0===a?r:h[s[a-1]];t=0===a?t:t[s[a-1]],h=sfBlazor.getNestedObject(t,s[a],l,h,s[a+1]).model}}else r[e]=i;return{model:r,deepMerge:o}},updateModel:async function(t){try{if(!t.isRendered||t.preventUpdate||!t._dotnetInstance)return;var e=sfBlazor.copyWithoutCircularReferences([t.bulkChanges],t.bulkChanges),i=sfBlazor.getUpdatedValue(t,e);await t._dotnetInstance.invokeMethodAsync("UpdateModel",i),t.preventUpdate=!1}catch(e){window.sfBlazor.throwError(e,t)}},getUpdatedValue(t,e){for(var i={},n=["query","formatter"],r=Object.keys(e),o=0;o<r.length;o++){var s=r[o],a=e[s];-1===n.indexOf(s)&&(sfBlazor.isChildProperty(t,s)?i[s]=sfBlazor.getUpdatedValue(t,a):"object"!=typeof a||null===a||a instanceof Date||Array.isArray(a)&&a[0]instanceof Date?i[s]=a:(a=JSON.stringify(a),i[s]=a))}return i},isChildProperty:(t,e)=>t.properties&&t.properties[e]&&void 0!==t.properties[e].parentObj,updateBlazorProperties:function(t,e){e._dotnetInstance.invokeMethodAsync("UpdateBlazorDiagramObjects",t)},callDiagramMethod:async function(t,e){var i=document.getElementById(e)&&document.getElementById(e).ej2_instances[0];return"updateDiagramObjects"===t.methodName&&(t.obj=JSON.parse(t.obj,sfBlazor.parseRevive)),i.callFromServer(t)},updateTemplate:function(t,e,i,n,r){void 0===n&&(n={}),r&&window.sfBlazor.tempCallBacks.push({Id:i,Promise:r});var o=[],s=[],a=[];if(sf.base.isNullOrUndefined(e)||!e.length||sf.base.isNullOrUndefined(e[0].BlazId)){if(!sf.base.isNullOrUndefined(e))for(l=0;l<e.length;l++)a.push(e[l].BlazorTemplateId),o.push(JSON.parse(window.sfBlazor.cleanStringify(e[l]))),delete o[l].BlazorTemplateId}else for(var l=0;l<e.length;l++)s.push(e[l].BlazId),a.push(e[l].BlazorTemplateId);var h=setInterval(function(){var e=n.templateDotnetInstance?n.templateDotnetInstance[t]||window.sfBlazor.templateDotnetInstance[n.guid||t]:window.sfBlazor.templateDotnetInstance?window.sfBlazor.templateDotnetInstance[n.guid||t]:null;if(!e){if(n.templateDotnetInstance&&!window.sfBlazor.templateDotnetInstance[n.guid||t])return;if(!(n.parentObj&&n.parentObj.templateDotnetInstance&&n.parentObj.templateDotnetInstance[t]))return;e=n.parentObj.templateDotnetInstance[t]}e&&(e.invokeMethodAsync("UpdateTemplate",t,JSON.stringify(o),i,a,s),clearInterval(h))},10)},setTemplateInstance:function(t,e,i){sfBlazor.templateDotnetInstance||(sfBlazor.templateDotnetInstance=[]),sfBlazor.templateDotnetInstance[i||t]=e},setTemplate:function(t,e){setTimeout(function(){if(null!=t){for(var e=document.getElementById(t).getElementsByClassName("blazor-inner-template"),i=0;i<e.length;i++){var n=e[i].getAttribute("data-templateid"),r=document.getElementById(n);if(r&&e[i].childNodes)for(var o=e[i].childNodes.length,s=0;s<o;s++)r.appendChild(e[i].childNodes[0]);else r&&(r.innerHTML=e[i].innerHTML)}if(window.sfBlazor.tempCallBacks.length)for(var a=0;a<window.sfBlazor.tempCallBacks.length;a++)window.sfBlazor.tempCallBacks[a].Id==t&&(window.sfBlazor.tempCallBacks[a].Promise(window.sfBlazor.tempCallBacks[a].Id),window.sfBlazor.tempCallBacks.splice(a,1))}},100)},invokeMethod:async function(t,e,i,n,r){try{var o=null;n=JSON.parse(n,sfBlazor.parseRevive);var s=document.getElementById(t)&&document.getElementById(t).ej2_instances&&document.getElementById(t).ej2_instances[0];if("destroy"===e&&s&&(s._dotnetInstance=null),r&&n.push(r),s)return null===i?o=s[e].apply(s,n):(s=sfBlazor.getDocEditor(s,i),o=(s=window.sfBlazor.getChildModule(s,i))[e].apply(s,n),o=await sfBlazor.promiseHandler(o)),!o||"object"!=typeof o||o instanceof Promise||(o=sfBlazor.cleanStringify(o)),"PdfViewer"==s.getModuleName()&&"saveAsBlob"==e&&o instanceof Promise&&(o=await sfBlazor.promiseHandler(o)),o}catch(t){return window.sfBlazor.throwError(t,s)}},promiseHandler:async function(t){return t instanceof Promise&&await t.then(async function(e){e instanceof Blob?await window.sfBlazor.docEditFileReader(e).then(function(e){t=JSON.stringify({data:e.substr(e.indexOf(",")+1)})}):t=e}),t},getDocEditor:function(t,e){return"DocumentEditorContainer"===t.getModuleName()&&"documentEditor"!==e?t.documentEditor:t},getChildModule:function(t,e){try{for(var i=e.split(","),n=0;n<i.length;n++)t=t[i[n]];return t}catch(e){window.sfBlazor.throwError(e,t)}},getMethodCall:function(t,e,i){try{var n=document.getElementById(t)&&document.getElementById(t).ej2_instances[0];return n=sfBlazor.getDocEditor(n),null==e||"null"==e?n[i]:(n=window.sfBlazor.getChildModule(n,e))[i]}catch(t){window.sfBlazor.throwError(t,n)}},setMethodCall:function(t,e,i,n){try{var r=document.getElementById(t)&&document.getElementById(t).ej2_instances[0];r=sfBlazor.getDocEditor(r),(r=window.sfBlazor.getChildModule(r,e))[i]=n[0]}catch(t){window.sfBlazor.throwError(t,r)}},parseRevive:function(key,value){var dateRegex=new RegExp(/(\d{4})-(\d{2})-(\d{2})T(\d{2})\:(\d{2})\:(\d{2}).*/),arrayRegex=new RegExp(/^\[.*?\]$/),objectRegex=new RegExp(/^\{.*?\}$/);if(""===key&&value&&value.dataSource_custom&&(value.dataSource_custom.key=value.dataSource.key,value.dataSource=value.dataSource_custom),!value||"string"!=typeof value||-1===value.indexOf("sf.data.Query()")&&"formatter"!==key){if(sfBlazor.isDataSourceProperty(key)){if(null===value)return;if(value="string"==typeof value?JSON.parse(value):value,!value.adaptor||value instanceof sf.data.DataManager)return value;value.adaptor=sfBlazor.getAdaptor(value.adaptor);var dataManager=new sf.data.DataManager(value);return this.dotnetInstance&&(dataManager.dotnetInstance=this.dotnetInstance,dataManager.key=value.key,dataManager.adaptor instanceof BlazorAdaptor&&(dataManager.adaptorName=value.adaptorName,dataManager.dataSource.offline=!1)),(this[value.guid]||this.templateRefs&&this.templateRefs[value.guid])&&(dataManager.baseAdaptorInstance=this[value.guid]||this.templateRefs[value.guid],dataManager.adaptorName="CustomAdaptor"),dataManager}if("string"==typeof value&&dateRegex.test(value)){if(arrayRegex.test(value)){var values=JSON.parse(value),val=[];for(i=0;i<values.length;i++)val.push(new Date(values[i]));return val}return isNaN(Date.parse(value))?value:new Date(value)}if("string"==typeof value&&(arrayRegex.test(value)||objectRegex.test(value))&&sfBlazor.isJson(value))return JSON.parse(value)}else try{return eval(value)}catch(t){var funValue=sfBlazor.getEvaluatedFunc(value);return funValue}return value},getEvaluatedFunc:function(t){var e=new RegExp(/\(+[^\)]+\)+/g),i=t.split("new sf.data.Query().")[1],n=t.trim().split("new sf.richtexteditor.MarkdownFormatter")[1];if(i){var r=i.split(e)[0],o=i.match(e)[0],s=new RegExp(/(\([a-z])+[^\)]+\)+/g),a=t.match(s);if(null!==a)var l=a[0],h=l.match(/\{+[^\)]+\}/g)[0],c=l.split(/\{+[^\)]+\}/g)[0];if(-1!==o.indexOf("sf"))var d=(b=c.match(/[^(]+/g)[0]).split("."),p=(new sf.data.Query)[r](sf[d[1]][d[2]][d[3]](JSON.parse(h)));else if(i.split(".").length>1){e=new RegExp(/([^\"]([A-Z]|[a-z])+[\"\]])/g);if(null!==i.match(e)){s=new RegExp(/([^\"]([A-Z]|[a-z])+[\"\]])|[0-9]/g);for(var u=i.match(s),f=i.split("."),g=[],m=0;m<f.length;m++){var y=f[m].match(/([A-z])+/g)[0];g.push(y)}p=(new sf.data.Query)[g[0]]()[g[1]](u[0].slice(0,-1))[g[2]](Number(u[1]))}else{var v=new RegExp(/([^\']+([A-Z]|[a-z])+[\'\)])|[0-9]/g);for(u=i.match(v),f=i.split("."),g=[],m=0;m<f.length;m++){y=f[m].match(/([A-z])+/g)[0];g.push(y)}p=(new sf.data.Query)[g[0]](u[0].slice(0,-1))[g[1]](u[1].slice(0,-1))[g[2]](Number(u[2]))}}else{var b=o.match(/([A-z]+|[0-9]+)+/g);p=(new sf.data.Query)[r](...b)}}else if(n){var w=n.trim(),S=w.substring(1,w.length-1).trim();if(S.length>0){var x=S.replace(/'/g,'"'),C=JSON.parse(x);p=new sf.richtexteditor.MarkdownFormatter(C)}else p=new sf.richtexteditor.MarkdownFormatter({})}else p=new sf.data.Query;return p},triggerEJEvents:async function(t){var e;try{t?(t.elementID=this.elementID,e=await this.dotnet.invokeMethodAsync("Trigger",this.eventName,window.sfBlazor.cleanStringify(t))):e=await this.dotnet.invokeMethodAsync("Trigger",this.eventName,"")}catch(t){window.sfBlazor.throwError(t,this)}return e},getDomObject:function(t,e,i){var n=t+sf.base.getUniqueID(t),r={class:e.className,xPath:window.sfBlazor.createXPathFromElement(e),domUUID:n};e.hasAttribute("id")&&(r.id=e.id);var o=i&&i.elementID;o&&(window[o]=sf.base.isNullOrUndefined(window[o])?{}:window[o],window[o][n]=e,r.elementID=o,r.ele=s);var s=e.cloneNode();return s&&Array.isArray(s)&&(s=window.sfBlazor.copyWithoutCircularReferences(references,s)),delete s.ej2_instances,r},copyWithoutCircularReferences:function(t,e){try{var i=e&&Array.isArray(e),n=i?[]:{};return(i?e:e instanceof Node?[e]:sfBlazor.getObjectKeys(e)).forEach(async function(r){var o=e.hasOwnProperty("parentObj")&&e.properties?e.properties:e,s=i?r:o[r];if(!i||"string"!=typeof s&&"number"!=typeof s)if(s instanceof Node){var a=sfBlazor.getDomObject(r,s,e);i?n.push(a):n[r]=a}else if(s&&Array.isArray(s))if(s.length>0)for(var l=0;l<s.length;l++)n[r]||(n[r]=[]),"ej2_instances"!==r&&(!s[l]||"object"!=typeof s[l]||s[l]instanceof Date?n[r].push(s[l]):n[r].push(window.sfBlazor.copyWithoutCircularReferences(t,s[l])));else n[r]=[];else if(s&&window.sfBlazor.isJson(s)&&new RegExp(/^\[.*?\]$/).test(s)){var h=JSON.parse(s);n[r]||(n[r]=[]);for(var c=0;c<h.length;c++)n[r].push(h[c])}else if(s&&s instanceof Event){var d={};for(var p in s){var u=s[p];u instanceof Node||u instanceof Window||"path"===p||(d[p]=u)}n[r]=d}else s&&"object"==typeof s?s instanceof File?n[r]=s:t.indexOf(s)<0?(t.push(s),s&&s instanceof Date?n[r]=s:sfBlazor.isJsonStringfy(s)&&!sfBlazor.doesHaveFileObject(s)?i?n.push(s):n[r]=s:sfBlazor.isIgnoreProperty(r.toString())?n[r]="###_Circular_###":n[r]=window.sfBlazor.copyWithoutCircularReferences(t,s),t.pop()):n[r]="###_Circular_###":"function"!=typeof s&&(n[r]=s);else n.push(s)}),n}catch(t){return console.log(t),{}}},doesHaveFileObject:function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)if(t[e[i]]instanceof File)return!0;return!1},isJsonStringfy:function(t){try{return JSON.stringify(t)&&!0}catch(t){return!1}},getObjectKeys:function(t){var e=[];if(t instanceof Event)e=Object.keys(t);else for(var i in t)e.push(i);return e},isIgnoreProperty:function(t){return["parentObj","controlParent","modelObserver","localObserver","moduleLoader"].indexOf(t)>=0},isJson:function(t){try{return JSON.parse(t)}catch(t){return!1}},cleanStringify:function(t){try{return t&&"object"==typeof t&&(t=window.sfBlazor.copyWithoutCircularReferences([t],t)),JSON.stringify(t)}catch(t){return console.log(t),""}},bindEvents:function(t,e,i,n){if(e)for(var r=0;r<e.length;r+=1){var o=e[r],s={dotnet:i,eventName:o,elementID:t.elementID,namespace:n};if(o.indexOf(".")>0){for(var a=o.split("."),l=t,h=0;h<a.length-1;h++){var c=new RegExp(/\[.*?\]/);if(c.test(a[h])){var d=a[h].match(c)[0],p=a[h].replace(d,"");d=d.match(/\[(.*?)\]/)[1],h+=1,l=l[p][d]}else l=l[a[h]]}l[a[a.length-1]]=window.sfBlazor.triggerEJEvents.bind(s)}else t[o]=window.sfBlazor.triggerEJEvents.bind(s)}},tryParseInt:function(t){return/^-?\d+\.?\d*$/.test(t)},throwError:function(t,e){console.error(t.message+"\n"+t.stack)},getAdaptor:function(t){var e;switch(t){case"ODataAdaptor":e=new sf.data.ODataAdaptor;break;case"ODataV4Adaptor":e=new sf.data.ODataV4Adaptor;break;case"UrlAdaptor":e=new sf.data.UrlAdaptor;break;case"WebApiAdaptor":e=new sf.data.WebApiAdaptor;break;case"JsonAdaptor":e=new sf.data.JsonAdaptor;break;case"RemoteSaveAdaptor":e=new sf.data.RemoteSaveAdaptor;break;case"CustomAdaptor":sfBlazor.initCustomAdaptor(),e=new window.CustomAdaptor;break;default:e=new window.BlazorAdaptor}return e},spinnerUtility:function(t,e,i,n){try{sf.popups.Spinner(t,e,i,n)}catch(t){return window.sfBlazor.throwError(t)}},initBlazorAdaptor:function(){var t=sf.data?sf.data.UrlAdaptor:function(){};window.BlazorAdaptor=class extends t{processQuery(t,e,i){var n=sf.data.UrlAdaptor.prototype.processQuery.apply(this,arguments);return n.dotnetInstance=t.dotnetInstance,n.key=t.key,n}makeRequest(t,e,i,n){var r=JSON.parse(t.data);r.serverSideGroup=!1;var o=this;t.dotnetInstance.invokeMethodAsync("DataProcess",JSON.stringify(r),t.key).then(i=>{null===(i=sf.data.DataUtil.parse.parseJson(i))?i=[]:null===i.result&&(i.result=[]),function(t,i,n){var r={};r.count=t.count?parseInt(t.count.toString(),10):0,r.result=t.result?t.result:t,r.aggregates=t.aggregates,r.virtualSelectRecords=n,e.resolve(r)}(o.processResponse(i,{},n,null,t))}).catch(t=>(t=>{i.error=t,e.reject(i)})(t))}insert(t,e,i,n,r){var o={};return o.dm=t,o.data=e,o.tableName=i,o.query=n,o.requestType="insert",o.position=r,o}remove(t,e,i,n,r){var o={};return o.dm=t,o.data=i,o.keyField=e,o.tableName=n,o.query=r,o.requestType="remove",o}update(t,e,i,n,r){var o={};return o.dm=t,o.data=i,o.keyField=e,o.tableName=n,o.query=r,o.requestType="update",o}batchRequest(t,e,i,n,r){var o={};return o.dm=t,o.changed=e.changedRecords,o.added=e.addedRecords,o.deleted=e.deletedRecords,o.requestType="batchsave",o.keyField=i.key,o.dropIndex=sf.base.isNullOrUndefined(n)?null:n.dragDropDestinationIndex,o.query=n,o}doAjaxRequest(t){var e=new sf.data.Deferred,i=t.dm,n=sf.data.UrlAdaptor.prototype.processQuery.apply(this,[i,t.query,!1]),r=i=>{t.error=i,e.reject(t)};if("insert"===t.requestType&&i.dotnetInstance.invokeMethodAsync("Insert",JSON.stringify(t.data),i.key,t.position?t.position:0,n.data).then(t=>{e.resolve(t)}).catch(t=>r(t)),"remove"===t.requestType){var o="string"==typeof t.data?t.data:JSON.stringify(t.data);t.data instanceof Date&&(o=t.data.toJSON()),i.dotnetInstance.invokeMethodAsync("Remove",o,t.keyField,i.key,n.data).then(t=>{e.resolve()}).catch(t=>r(t))}return"update"===t.requestType&&i.dotnetInstance.invokeMethodAsync("Update",JSON.stringify(t.data),t.keyField,i.key,n.data).then(t=>{var i=sf.data.DataUtil.parse.parseJson(t);e.resolve(i)}).catch(t=>r(t)),"batchsave"===t.requestType&&i.dotnetInstance.invokeMethodAsync("BatchUpdate",JSON.stringify(t.changed),JSON.stringify(t.added),JSON.stringify(t.deleted),t.keyField,i.key,t.dropIndex,n.data).then(t=>{var i=sf.data.DataUtil.parse.parseJson(t);e.resolve(i)}).catch(t=>r(t)),e.promise}}},initCustomAdaptor:function(){window.CustomAdaptor=class extends window.BlazorAdaptor{processQuery(t,e,i){var n=sf.data.UrlAdaptor.prototype.processQuery.apply(this,arguments);return n.dotnetInstance=t.dotnetInstance,n.baseAdaptorInstance=t.baseAdaptorInstance,n.key=t.key,n}makeRequest(t,e,i,n){var r=JSON.parse(t.data);r.serverSideGroup=!1;var o=this;t.baseAdaptorInstance.invokeMethodAsync("BaseRead",JSON.stringify(r),t.key).then(i=>{null===(i=sf.data.DataUtil.parse.parseJson(i)).result&&(i.result=[]),function(t,i,n){var r={};r.count=t.count?parseInt(t.count.toString(),10):0,r.result=t.result?t.result:t,r.aggregates=i,r.virtualSelectRecords=n,e.resolve(r)}(o.processResponse(i,{},n,null,t))}).catch(t=>(t=>{i.error=t,e.reject(i)})(t))}doAjaxRequest(t){var e=new sf.data.Deferred,i=t.dm,n=i=>{t.error=i,e.reject(t)};return"insert"===t.requestType&&i.baseAdaptorInstance.invokeMethodAsync("BaseInsert",JSON.stringify(t.data),i.key).then(t=>{t=sf.data.DataUtil.parse.parseJson(t),e.resolve(t)}).catch(t=>n(t)),"remove"===t.requestType&&i.baseAdaptorInstance.invokeMethodAsync("BaseRemove",JSON.stringify(t.data),t.keyField,i.key).then(t=>{t=sf.data.DataUtil.parse.parseJson(t),e.resolve(t)}).catch(t=>n(t)),"update"===t.requestType&&i.baseAdaptorInstance.invokeMethodAsync("BaseUpdate",JSON.stringify(t.data),t.keyField,i.key).then(t=>{t=sf.data.DataUtil.parse.parseJson(t),e.resolve(t)}).catch(t=>n(t)),"batchsave"===t.requestType&&i.baseAdaptorInstance.invokeMethodAsync("BaseBatchUpdate",JSON.stringify(t.changed),JSON.stringify(t.added),JSON.stringify(t.deleted),t.keyField,i.key,t.dropIndex).then(t=>{t=sf.data.DataUtil.parse.parseJson(t),e.resolve(t)}).catch(t=>n(t)),e.promise}}},requestHandler:function(t){try{var e=document.getElementById(t.elementId);e&&e.ej2_instances[0]&&this.element&&this.element.ej2_instances[0]&&this._dotnetInstance.invokeMethodAsync("GetPDFInfo",t)}catch(t){window.sfBlazor.throwError(t,this)}},ioSuccessHandler:function(t,e,i,n){try{var r=document.getElementById(t);if(r){var o=r.ej2_instances[0],s={data:n};if("sf.pdfviewer.PdfViewer"==e)switch(i){case"Load":o.viewerBase.loadRequestHandler.successHandler(s);break;case"RenderPdfPages":o.viewerBase.pageRequestHandler.successHandler(s);break;case"VirtualLoad":o.viewerBase.virtualLoadRequestHandler.successHandler(s);break;case"Download":o.viewerBase.dowonloadRequestHandler.successHandler(s);break;case"PrintImages":o.printModule.printRequestHandler.successHandler(s);break;case"Search":o.textSearchModule.searchRequestHandler.successHandler(s);break;case"Bookmarks":o.bookmarkViewModule.bookmarkRequestHandler.successHandler(s);break;case"RenderThumbnailImages":o.thumbnailViewModule.thumbnailRequestHandler.successHandler(s);break;case"RenderAnnotationComments":o.annotationModule.stickyNotesAnnotationModule.commentsRequestHandler.successHandler(s);break;case"ImportAnnotations":o.viewerBase.importAnnotationRequestHandler.successHandler(s);break;case"ExportAnnotations":o.viewerBase.exportAnnotationRequestHandler.successHandler(s);break;case"ExportFormFields":o.viewerBase.exportFormFieldsRequestHandler.successHandler(s);break;case"ImportFormFields":o.viewerBase.importFormFieldsRequestHandler.successHandler(s)}if("sf.documenteditor.DocumentEditorContainer"==e||"sf.documenteditor.DocumentEditor"==e){var a=sfBlazor.getDocEditor(o);switch(i){case"SystemClipboard":s.data=JSON.parse(s.data),a.editor.pasteRequestHandler.successHandler(s);break;case"Import":o.toolbarModule.importHandler.successHandler(s);break;case"EnforceProtection":a.editor.enforceProtectionInternal(s);break;case"UnprotectDocument":a.editor.onUnProtectionSuccess(s)}}}}catch(t){window.sfBlazor.throwError(t,this)}},docEditRequestHandler:async function(t){try{if(t instanceof FormData){var e=t.get("files"),i="";await window.sfBlazor.docEditFileReader(e).then(function(t){i=t});var n={documentData:i.substr(i.indexOf(",")+1),fileName:e.name,action:"Import"};this._dotnetInstance.invokeMethodAsync("GetDocumentInfo",n)}else t.hasOwnProperty("saltBase64")?t.action=""===t.saltBase64?"EnforceProtection":"UnprotectDocument":t.hasOwnProperty("type")&&t.hasOwnProperty("content")&&(t.action="SystemClipboard"),this._dotnetInstance.invokeMethodAsync("GetDocumentInfo",t)}catch(t){window.sfBlazor.throwError(t,this)}},docEditFileReader:function(t){try{return new Promise(function(e,i){var n=new FileReader;n.onload=function(){e(n.result)},n.readAsDataURL(t)})}catch(t){window.sfBlazor.throwError(t,this)}},focusButton:function(t){t.focus()}},window.ej&&(window.sf=window.ej),sf.base.enableBlazorMode()},function(t,e){window.sf.sfBlazor&&(Object.assign(window.sfBlazor,window.sf.sfBlazor),delete window.sf.sfBlazor),sfBlazor.loadScripts=function(){}},function(t,e,i){"use strict";i.r(e);var n={};i.r(n),i.d(n,"blazorCultureFormats",function(){return Vt}),i.d(n,"IntlBase",function(){return _t}),i.d(n,"Ajax",function(){return Ut}),i.d(n,"Animation",function(){return Ji}),i.d(n,"rippleEffect",function(){return Qi}),i.d(n,"isRippleEnabled",function(){return rn}),i.d(n,"enableRipple",function(){return on}),i.d(n,"Base",function(){return xi}),i.d(n,"getComponent",function(){return Ci}),i.d(n,"removeChildInstance",function(){return Pi}),i.d(n,"Browser",function(){return te}),i.d(n,"Component",function(){return un}),i.d(n,"ChildProperty",function(){return ln}),i.d(n,"Position",function(){return vn}),i.d(n,"Draggable",function(){return bn}),i.d(n,"Droppable",function(){return xn}),i.d(n,"EventHandler",function(){return ee}),i.d(n,"onIntlChange",function(){return Et}),i.d(n,"rightToLeft",function(){return Lt}),i.d(n,"cldrData",function(){return It}),i.d(n,"defaultCulture",function(){return Tt}),i.d(n,"defaultCurrencyCode",function(){return At}),i.d(n,"Internationalization",function(){return kt}),i.d(n,"setCulture",function(){return Mt}),i.d(n,"setCurrencyCode",function(){return Dt}),i.d(n,"loadCldr",function(){return Rt}),i.d(n,"enableRtl",function(){return zt}),i.d(n,"getNumericObject",function(){return jt}),i.d(n,"getNumberDependable",function(){return Nt}),i.d(n,"getDefaultDateObject",function(){return Ht}),i.d(n,"KeyboardEvents",function(){return En}),i.d(n,"L10n",function(){return Ln}),i.d(n,"ModuleLoader",function(){return an}),i.d(n,"Property",function(){return Hi}),i.d(n,"Complex",function(){return _i}),i.d(n,"ComplexFactory",function(){return Vi}),i.d(n,"Collection",function(){return Fi}),i.d(n,"CollectionFactory",function(){return Wi}),i.d(n,"Event",function(){return Ui}),i.d(n,"NotifyPropertyChanges",function(){return Gi}),i.d(n,"CreateBuilder",function(){return Xi}),i.d(n,"SwipeSettings",function(){return An}),i.d(n,"Touch",function(){return kn}),i.d(n,"HijriParser",function(){return rt}),i.d(n,"blazorTemplates",function(){return Le}),i.d(n,"getRandomId",function(){return Ie}),i.d(n,"compile",function(){return Te}),i.d(n,"updateBlazorTemplate",function(){return Ae}),i.d(n,"resetBlazorTemplate",function(){return Be}),i.d(n,"setTemplateEngine",function(){return ke}),i.d(n,"getTemplateEngine",function(){return Me}),i.d(n,"disableBlazorMode",function(){return k}),i.d(n,"createInstance",function(){return M}),i.d(n,"setImmediate",function(){return D}),i.d(n,"getValue",function(){return R}),i.d(n,"setValue",function(){return z}),i.d(n,"deleteObject",function(){return j}),i.d(n,"isObject",function(){return N}),i.d(n,"getEnumValue",function(){return H}),i.d(n,"merge",function(){return _}),i.d(n,"extend",function(){return V}),i.d(n,"isNullOrUndefined",function(){return F}),i.d(n,"isUndefined",function(){return W}),i.d(n,"getUniqueID",function(){return U}),i.d(n,"debounce",function(){return G}),i.d(n,"queryParams",function(){return q}),i.d(n,"isObjectArray",function(){return X}),i.d(n,"compareElementParent",function(){return Y}),i.d(n,"throwError",function(){return Z}),i.d(n,"print",function(){return K}),i.d(n,"formatUnit",function(){return J}),i.d(n,"enableBlazorMode",function(){return Q}),i.d(n,"isBlazor",function(){return $}),i.d(n,"getElement",function(){return tt}),i.d(n,"getInstance",function(){return et}),i.d(n,"addInstance",function(){return it}),i.d(n,"uniqueID",function(){return nt}),i.d(n,"createElement",function(){return $e}),i.d(n,"addClass",function(){return ti}),i.d(n,"removeClass",function(){return ei}),i.d(n,"isVisible",function(){return ni}),i.d(n,"prepend",function(){return ri}),i.d(n,"append",function(){return oi}),i.d(n,"detach",function(){return ai}),i.d(n,"remove",function(){return li}),i.d(n,"attributes",function(){return hi}),i.d(n,"select",function(){return ci}),i.d(n,"selectAll",function(){return di}),i.d(n,"closest",function(){return pi}),i.d(n,"siblings",function(){return ui}),i.d(n,"getAttributeOrDefault",function(){return fi}),i.d(n,"setStyleAttribute",function(){return gi}),i.d(n,"classList",function(){return mi}),i.d(n,"matches",function(){return yi}),i.d(n,"includeInnerHTML",function(){return vi}),i.d(n,"containsClass",function(){return bi}),i.d(n,"cloneNode",function(){return wi}),i.d(n,"Observer",function(){return Ot}),i.d(n,"SanitizeHtmlHelper",function(){return zn});var r={};i.r(r),i.d(r,"AccordionActionSettings",function(){return Wn}),i.d(r,"AccordionAnimationSettings",function(){return Un}),i.d(r,"AccordionItem",function(){return Gn}),i.d(r,"Accordion",function(){return qn});var o={};i.r(o),i.d(o,"buttonObserver",function(){return ur}),i.d(o,"Button",function(){return vr});var s={};i.r(s),i.d(s,"CheckBox",function(){return Pr});var a={};i.r(a),i.d(a,"PositionData",function(){return ro}),i.d(a,"Popup",function(){return ho}),i.d(a,"getScrollableParent",function(){return co}),i.d(a,"getZindexPartial",function(){return po}),i.d(a,"getMaxZindex",function(){return uo});var l={};i.r(l),i.d(l,"Animation",function(){return ys}),i.d(l,"Tooltip",function(){return vs});var h={};i.r(h),i.d(h,"Spinner",function(){return Hs}),i.d(h,"createSpinner",function(){return _s}),i.d(h,"showSpinner",function(){return $s}),i.d(h,"hideSpinner",function(){return ea}),i.d(h,"setSpinner",function(){return ia});var c={};i.r(c),i.d(c,"PositionData",function(){return ro}),i.d(c,"Popup",function(){return ho}),i.d(c,"getScrollableParent",function(){return co}),i.d(c,"getZindexPartial",function(){return po}),i.d(c,"getMaxZindex",function(){return uo}),i.d(c,"calculateRelativeBasedPosition",function(){return Er}),i.d(c,"calculatePosition",function(){return Lr}),i.d(c,"fit",function(){return Nr}),i.d(c,"isCollide",function(){return Hr}),i.d(c,"flip",function(){return _r}),i.d(c,"ButtonProps",function(){return rs}),i.d(c,"AnimationSettings",function(){return os}),i.d(c,"Dialog",function(){return fs}),i.d(c,"DialogUtility",function(){return es}),i.d(c,"Animation",function(){return ys}),i.d(c,"Tooltip",function(){return vs}),i.d(c,"Spinner",function(){return Hs}),i.d(c,"createSpinner",function(){return _s}),i.d(c,"showSpinner",function(){return $s}),i.d(c,"hideSpinner",function(){return ea}),i.d(c,"setSpinner",function(){return ia});var d={};i.r(d),i.d(d,"SplitButton",function(){return ga}),i.d(d,"Deferred",function(){return ma});var p={};i.r(p),i.d(p,"Input",function(){return ya});var u={};i.r(u),i.d(u,"ColorPicker",function(){return Jl});var f={};i.r(f),i.d(f,"TicksData",function(){return Ia}),i.d(f,"ColorRangeData",function(){return Ta}),i.d(f,"LimitData",function(){return Aa}),i.d(f,"TooltipData",function(){return Ba}),i.d(f,"Slider",function(){return Dl});var g={};i.r(g),i.d(g,"FilesProp",function(){return zh}),i.d(g,"ButtonsProps",function(){return jh}),i.d(g,"AsyncSettings",function(){return Nh}),i.d(g,"Uploader",function(){return Hh});var m={};i.r(m),i.d(m,"DataManager",function(){return sc}),i.d(m,"Deferred",function(){return ac}),i.d(m,"Query",function(){return qh}),i.d(m,"Predicate",function(){return Xh}),i.d(m,"Adaptor",function(){return Jh}),i.d(m,"JsonAdaptor",function(){return Qh}),i.d(m,"UrlAdaptor",function(){return $h}),i.d(m,"ODataAdaptor",function(){return tc}),i.d(m,"ODataV4Adaptor",function(){return ec}),i.d(m,"WebApiAdaptor",function(){return ic}),i.d(m,"WebMethodAdaptor",function(){return nc}),i.d(m,"RemoteSaveAdaptor",function(){return rc}),i.d(m,"CacheAdaptor",function(){return oc}),i.d(m,"DataUtil",function(){return Zh});var y={};i.r(y),i.d(y,"cssClass",function(){return lc}),i.d(y,"ListBase",function(){return Gh}),i.d(y,"getFieldValues",function(){return hc});var v={};i.r(v),i.d(v,"dropDownListClasses",function(){return zc}),i.d(v,"DropDownList",function(){return Nc});var b={};i.r(b),i.d(b,"HScroll",function(){return Yc});var w={};i.r(w),i.d(w,"VScroll",function(){return Jc});var S={};i.r(S),i.d(S,"Menu",function(){return ld});var x={};i.r(x),i.d(x,"ContextMenu",function(){return aS});var C={};i.r(C),i.d(C,"Overview",function(){return ax});var P={};i.r(P),i.d(P,"TextStyle",function(){return Nx}),i.d(P,"TooltipBorder",function(){return Hx}),i.d(P,"AreaBounds",function(){return _x}),i.d(P,"ToolLocation",function(){return Vx}),i.d(P,"Tooltip",function(){return Fx}),i.d(P,"getTooltipThemeColor",function(){return wx}),i.d(P,"measureText",function(){return xx}),i.d(P,"findDirection",function(){return Cx}),i.d(P,"Size",function(){return Px}),i.d(P,"Rect",function(){return Ox}),i.d(P,"Side",function(){return Ex}),i.d(P,"CustomizeOption",function(){return Lx}),i.d(P,"TextOption",function(){return Ix}),i.d(P,"getElement",function(){return Tx}),i.d(P,"removeElement",function(){return Ax}),i.d(P,"drawSymbol",function(){return Bx}),i.d(P,"calculateShapes",function(){return kx}),i.d(P,"PathOption",function(){return Mx}),i.d(P,"textElement",function(){return Dx}),i.d(P,"TooltipLocation",function(){return Rx}),i.d(P,"SvgRenderer",function(){return vx}),i.d(P,"CanvasRenderer",function(){return bx});var O={};i.r(O),i.d(O,"XmlWriter",function(){return rC}),i.d(O,"Namespace",function(){return oC}),i.d(O,"XmlElement",function(){return sC}),i.d(O,"XmlAttribute",function(){return aC}),i.d(O,"StreamWriter",function(){return dC}),i.d(O,"Encoding",function(){return lC}),i.d(O,"validateNullOrUndefined",function(){return hC}),i.d(O,"Save",function(){return nC});var E={};i.r(E),i.d(E,"ZipArchive",function(){return wC}),i.d(E,"ZipArchiveItem",function(){return SC}),i.d(E,"CompressedStreamWriter",function(){return mC}),i.d(E,"CompressorHuffmanTree",function(){return yC}),i.d(E,"ChecksumCalculator",function(){return vC});var L={};i.r(L),i.d(L,"PdfAction",function(){return FC}),i.d(L,"PdfUriAction",function(){return UC}),i.d(L,"PdfActionLinkAnnotation",function(){return xE}),i.d(L,"PdfAnnotation",function(){return vE}),i.d(L,"PdfAnnotationCollection",function(){return tE}),i.d(L,"PdfDocumentLinkAnnotation",function(){return PE}),i.d(L,"PdfLinkAnnotation",function(){return wE}),i.d(L,"PdfTextWebLink",function(){return VE}),i.d(L,"PdfUriAnnotation",function(){return HE}),i.d(L,"Dictionary",function(){return Ux}),i.d(L,"defaultToString",function(){return Wx}),i.d(L,"PdfCatalog",function(){return kP}),i.d(L,"PdfDocument",function(){return fE}),i.d(L,"PdfDocumentBase",function(){return PP}),i.d(L,"PdfDocumentTemplate",function(){return oE}),i.d(L,"PdfPageNumberField",function(){return XE}),i.d(L,"PdfCompositeField",function(){return ZE}),i.d(L,"PdfPageCountField",function(){return $E}),i.d(L,"PointF",function(){return oP}),i.d(L,"SizeF",function(){return sP}),i.d(L,"RectangleF",function(){return aP}),i.d(L,"Rectangle",function(){return lP}),i.d(L,"PdfCacheCollection",function(){return pE}),i.d(L,"PdfCollection",function(){return KO}),i.d(L,"PdfDestination",function(){return rL}),i.d(L,"PdfFunction",function(){return oL}),i.d(L,"PdfSampledFunction",function(){return aL}),i.d(L,"PdfDestinationMode",function(){return zO}),i.d(L,"ProcedureSets",function(){return WP}),i.d(L,"PdfHorizontalAlignment",function(){return EC}),i.d(L,"PdfVerticalAlignment",function(){return LC}),i.d(L,"PdfTextAlignment",function(){return IC}),i.d(L,"TextRenderingMode",function(){return TC}),i.d(L,"PdfLineJoin",function(){return AC}),i.d(L,"PdfLineCap",function(){return BC}),i.d(L,"PdfDashStyle",function(){return kC}),i.d(L,"PdfFillMode",function(){return MC}),i.d(L,"PdfColorSpace",function(){return DC}),i.d(L,"PdfBlendMode",function(){return RC}),i.d(L,"PdfGraphicsUnit",function(){return zC}),i.d(L,"PdfGridImagePosition",function(){return jC}),i.d(L,"PdfTextDirection",function(){return NC}),i.d(L,"PdfColor",function(){return rP}),i.d(L,"PdfGraphics",function(){return GO}),i.d(L,"GetResourceEventHandler",function(){return qO}),i.d(L,"PdfGraphicsState",function(){return XO}),i.d(L,"PdfMargins",function(){return jP}),i.d(L,"PdfPen",function(){return _P}),i.d(L,"PdfResources",function(){return VO}),i.d(L,"Guid",function(){return FO}),i.d(L,"PdfTransformationMatrix",function(){return VP}),i.d(L,"Matrix",function(){return FP}),i.d(L,"PdfBrush",function(){return hP}),i.d(L,"PdfBrushes",function(){return hL}),i.d(L,"PdfSolidBrush",function(){return dP}),i.d(L,"PdfLinearGradientBrush",function(){return fL}),i.d(L,"PdfRadialGradientBrush",function(){return mL}),i.d(L,"PdfTilingBrush",function(){return UO}),i.d(L,"PdfGradientBrush",function(){return NO}),i.d(L,"PdfColorBlend",function(){return pL}),i.d(L,"PdfBlend",function(){return cL}),i.d(L,"PdfTemplate",function(){return HO}),i.d(L,"PdfLayoutElement",function(){return BE}),i.d(L,"PdfPath",function(){return eI}),i.d(L,"PdfArc",function(){return aI}),i.d(L,"PdfTextElement",function(){return jE}),i.d(L,"ElementLayouter",function(){return OE}),i.d(L,"PdfLayoutFormat",function(){return EE}),i.d(L,"PdfLayoutParams",function(){return LE}),i.d(L,"PdfLayoutResult",function(){return IE}),i.d(L,"TextLayouter",function(){return ME}),i.d(L,"TextPageLayoutResult",function(){return DE}),i.d(L,"PdfTextLayoutResult",function(){return RE}),i.d(L,"PdfLayoutType",function(){return $P}),i.d(L,"PdfLayoutBreakType",function(){return tO}),i.d(L,"PathPointType",function(){return eO}),i.d(L,"PdfFontStyle",function(){return GC}),i.d(L,"PdfFontFamily",function(){return qC}),i.d(L,"PdfFontType",function(){return XC}),i.d(L,"PdfWordWrapType",function(){return YC}),i.d(L,"PdfSubSuperScript",function(){return ZC}),i.d(L,"FontEncoding",function(){return KC}),i.d(L,"TtfCmapFormat",function(){return JC}),i.d(L,"TtfCmapEncoding",function(){return QC}),i.d(L,"TtfPlatformID",function(){return $C}),i.d(L,"TtfMicrosoftEncodingID",function(){return tP}),i.d(L,"TtfMacintoshEncodingID",function(){return eP}),i.d(L,"FontDescriptorFlags",function(){return iP}),i.d(L,"TtfCompositeGlyphFlags",function(){return nP}),i.d(L,"PdfFont",function(){return bP}),i.d(L,"PdfFontMetrics",function(){return LO}),i.d(L,"WidthTable",function(){return IO}),i.d(L,"StandardWidthTable",function(){return TO}),i.d(L,"PdfStandardFont",function(){return yE}),i.d(L,"PdfStandardFontMetricsFactory",function(){return gE}),i.d(L,"PdfStringFormat",function(){return uP}),i.d(L,"PdfStringLayouter",function(){return gP}),i.d(L,"PdfStringLayoutResult",function(){return mP}),i.d(L,"LineInfo",function(){return yP}),i.d(L,"LineType",function(){return pP}),i.d(L,"StringTokenizer",function(){return fP}),i.d(L,"PdfTrueTypeFont",function(){return hI}),i.d(L,"RtlRenderer",function(){return RO}),i.d(L,"ArabicShapeRenderer",function(){return BO}),i.d(L,"ArabicShape",function(){return kO}),i.d(L,"Bidi",function(){return MO}),i.d(L,"RtlCharacters",function(){return DO}),i.d(L,"ByteArray",function(){return JP}),i.d(L,"ImageFormat",function(){return zP}),i.d(L,"ImageDecoder",function(){return iO}),i.d(L,"PdfBitmap",function(){return sO}),i.d(L,"PdfImage",function(){return rO}),i.d(L,"PdfTransparency",function(){return GP}),i.d(L,"ObjectStatus",function(){return vP}),i.d(L,"ObjectType",function(){return SP}),i.d(L,"PdfCrossTable",function(){return MP}),i.d(L,"RegisteredObject",function(){return DP}),i.d(L,"DictionaryProperties",function(){return Xx}),i.d(L,"PdfMainObjectCollection",function(){return xP}),i.d(L,"ObjectInfo",function(){return CP}),i.d(L,"Operators",function(){return qx}),i.d(L,"PdfStreamWriter",function(){return HP}),i.d(L,"PdfWriter",function(){return wP}),i.d(L,"PdfPageOrientation",function(){return OP}),i.d(L,"PdfPageRotateAngle",function(){return EP}),i.d(L,"PdfNumberStyle",function(){return LP}),i.d(L,"PdfDockStyle",function(){return IP}),i.d(L,"PdfAlignmentStyle",function(){return TP}),i.d(L,"TemplateType",function(){return AP}),i.d(L,"PageAddedEventArgs",function(){return nE}),i.d(L,"PdfDocumentPageCollection",function(){return dE}),i.d(L,"PdfPage",function(){return iE}),i.d(L,"PdfPageBase",function(){return $O}),i.d(L,"PdfPageLayer",function(){return ZO}),i.d(L,"PdfPageLayerCollection",function(){return QO}),i.d(L,"PdfPageSettings",function(){return NP}),i.d(L,"PdfPageSize",function(){return RP}),i.d(L,"PdfPageTemplateElement",function(){return cI}),i.d(L,"PdfSection",function(){return lE}),i.d(L,"PageSettingsState",function(){return hE}),i.d(L,"PdfSectionCollection",function(){return cE}),i.d(L,"PdfSectionPageCollection",function(){return rE}),i.d(L,"PdfSectionTemplate",function(){return aE}),i.d(L,"PdfArray",function(){return iC}),i.d(L,"PdfDictionary",function(){return Yx}),i.d(L,"SaveSectionCollectionEventHandler",function(){return Zx}),i.d(L,"SaveDescendantFontEventHandler",function(){return Kx}),i.d(L,"SaveFontDictionaryEventHandler",function(){return Jx}),i.d(L,"SaveAnnotationEventHandler",function(){return Qx}),i.d(L,"SaveSectionEventHandler",function(){return $x}),i.d(L,"SaveTemplateEventHandler",function(){return tC}),i.d(L,"PdfName",function(){return Gx}),i.d(L,"PdfNumber",function(){return eC}),i.d(L,"PdfReference",function(){return _C}),i.d(L,"PdfReferenceHolder",function(){return VC}),i.d(L,"PdfStream",function(){return CC}),i.d(L,"SaveCmapEventHandler",function(){return PC}),i.d(L,"SaveFontProgramEventHandler",function(){return OC}),i.d(L,"InternalEnum",function(){return cC}),i.d(L,"PdfString",function(){return HC}),i.d(L,"PdfGridStyleBase",function(){return bL}),i.d(L,"PdfGridStyle",function(){return wL}),i.d(L,"PdfGridCellStyle",function(){return SL}),i.d(L,"PdfGridRowStyle",function(){return xL}),i.d(L,"PdfHorizontalOverflowType",function(){return yL}),i.d(L,"PdfBorders",function(){return TE}),i.d(L,"PdfPaddings",function(){return AE}),i.d(L,"PdfBorderOverlapStyle",function(){return lL}),i.d(L,"PdfGridLayouter",function(){return ML}),i.d(L,"PdfGridLayoutResult",function(){return DL}),i.d(L,"PdfGridLayoutFormat",function(){return RL}),i.d(L,"GridCellEventArgs",function(){return zL}),i.d(L,"PdfGridBeginCellDrawEventArgs",function(){return jL}),i.d(L,"PdfGridEndCellDrawEventArgs",function(){return NL}),i.d(L,"PdfCancelEventArgs",function(){return HL}),i.d(L,"BeginPageLayoutEventArgs",function(){return _L}),i.d(L,"EndPageLayoutEventArgs",function(){return VL}),i.d(L,"PdfGridBeginPageLayoutEventArgs",function(){return FL}),i.d(L,"PdfGridEndPageLayoutEventArgs",function(){return WL}),i.d(L,"RowLayoutResult",function(){return UL}),i.d(L,"PdfGrid",function(){return BL}),i.d(L,"PdfGridColumn",function(){return OL}),i.d(L,"PdfGridColumnCollection",function(){return EL}),i.d(L,"PdfGridRow",function(){return LL}),i.d(L,"PdfGridRowCollection",function(){return IL}),i.d(L,"PdfGridHeaderCollection",function(){return TL}),i.d(L,"PdfGridCell",function(){return CL}),i.d(L,"PdfGridCellCollection",function(){return PL});var I=i(0),T="ej2_instances",A=0,B=!1;function k(){B=!1}function M(t,e){var i=e;return i.unshift(void 0),new(Function.prototype.bind.apply(t,i))}function D(t){var e,i=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(i);var n="ej2"+function(t){for(var e="",i=0;i<5;i++)e+=(i?",":"")+t[i];return e}(i),r=function(i){i.source===window&&"string"==typeof i.data&&i.data.length<=32&&i.data===n&&(t(),e())};return window.addEventListener("message",r,!1),window.postMessage(n,"*"),e=function(){window.removeEventListener("message",r),t=r=n=void 0}}function R(t,e){for(var i=e,n=t.replace(/\[/g,".").replace(/\]/g,"").split("."),r=0;r<n.length&&!W(i);r++)i=i[n[r]];return i}function z(t,e,i){var n,r,o=t.replace(/\[/g,".").replace(/\]/g,"").split("."),s=i||{},a=s,l=o.length;for(n=0;n<l;n++)r=o[n],n+1===l?a[r]=void 0===e?{}:e:F(a[r])&&(a[r]={}),a=a[r];return s}function j(t,e){delete t[e]}function N(t){return!F(t)&&t.constructor==={}.constructor}function H(t,e){return t[e]}function _(t,e){if(!F(e))for(var i=t,n=e,r=0,o=Object.keys(e);r<o.length;r++){var s=o[r];F(i.deepMerge)||-1===i.deepMerge.indexOf(s)||!N(n[s])&&!Array.isArray(n[s])?i[s]=n[s]:V(i[s],i[s],n[s],!0)}}function V(t,e,i,n){var r=t&&"object"==typeof t?t:{},o=arguments.length;n&&(o-=1);for(var s=function(t){if(!a[t])return"continue";var e=a[t];Object.keys(e).forEach(function(t){var i,o=r[t],s=e[t],a=Array.isArray(s)&&Array.isArray(o)&&s.length!==o.length,l=!$()||!(o instanceof Event||a);n&&l&&(N(s)||Array.isArray(s))?N(s)?(i=o||{},Array.isArray(i)&&i.hasOwnProperty("isComplexArray")?V(i,{},s,n):r[t]=V(i,{},s,n)):(i=$()?o&&Object.keys(s).length:o||[],r[t]=V([],i,s,n)):r[t]=s})},a=arguments,l=1;l<o;l++)s(l);return r}function F(t){return null==t}function W(t){return void 0===t}function U(t){return t+"_"+A++}function G(t,e){var i;return function(){var n=this,r=arguments;clearTimeout(i),i=setTimeout(function(){return i=null,t.apply(n,r)},e)}}function q(t){for(var e=[],i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];e.push(encodeURIComponent(r)+"="+encodeURIComponent(""+t[r]))}return e.join("&")}function X(t){var e=Object.prototype.toString;return"[object Array]"===e.call(t)&&"[object Object]"===e.call(t[0])}function Y(t,e){return t===e||!(t===document||!t)&&Y(t.parentNode,e)}function Z(t){try{throw new Error(t)}catch(t){throw t.message+"\n"+t.stack}}function K(t,e){var i=document.createElement("div"),n=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),r="";F(e)&&(e=window.open("","print","height=452,width=1024,tabbar=no")),i.appendChild(t.cloneNode(!0));for(var o=0,s=n.length;o<s;o++)r+=n[o].outerHTML;e.document.write("<!DOCTYPE html> <html><head>"+r+"</head><body>"+i.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),e.document.close(),e.focus();var a=setInterval(function(){e.ready&&(e.print(),e.close(),clearInterval(a))},500);return e}function J(t){var e=t+"";return"auto"===e||-1!==e.indexOf("%")||-1!==e.indexOf("px")?e:e+"px"}function Q(){B=!0}function $(){return B}function tt(t){return t instanceof Node||!$()||F(t.xPath)?t:document.evaluate(t.xPath,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}function et(t,e){var i="string"==typeof t?document.querySelector(t):t;if(i[T])for(var n=0,r=i[T];n<r.length;n++){var o=r[n];if(o instanceof e)return o}return null}function it(t,e){var i="string"==typeof t?document.querySelector(t):t;i[T]?i[T].push(e):i[T]=[e]}function nt(){if("undefined"!=typeof window){var t=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(t)}}var rt,ot={latn:{_digits:"0123456789",_type:"numeric"}},st={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"∞",nan:"NaN",exponential:"E"},at=[0,1,2,3,4,5,6,7,8,9],lt=function(){function t(){}return t.getMainObject=function(t,e){return R($()?e:"main."+e,t)},t.getNumberingSystem=function(t){return R("supplemental.numberingSystems",t)||this.numberingSystems},t.reverseObject=function(t,e){for(var i={},n=0,r=e||Object.keys(t);n<r.length;n++){var o=r[n];i.hasOwnProperty(t[o])||(i[t[o]]=o)}return i},t.getSymbolRegex=function(t){var e=t.map(function(t){return t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}).join("|");return new RegExp(e,"g")},t.getSymbolMatch=function(t){for(var e={},i=0,n=Object.keys(st);i<n.length;i++){var r=n[i];e[t[r]]=st[r]}return e},t.constructRegex=function(t){for(var e=t.length,i="",n=0;n<e;n++)i+=n!==e-1?t[n]+"|":t[n];return i},t.convertValueParts=function(t,e,i){return t.replace(e,function(t){return i[t]})},t.getDefaultNumberingSystem=function(t){var e={};return e.obj=R("numbers",t),e.nSystem=R("defaultNumberingSystem",e.obj),e},t.getCurrentNumericOptions=function(t,e,i,n){var r={},o=this.getDefaultNumberingSystem(t);if(!W(o.nSystem)||n){var s=n?R("obj.mapperDigits",o):R(o.nSystem+"._digits",e);W(s)||(r.numericPair=this.reverseObject(s,at),r.numberParseRegex=new RegExp(this.constructRegex(s),"g"),r.numericRegex="["+s[0]+"-"+s[9]+"]",i&&(r.numericRegex=s[0]+"-"+s[9],r.symbolNumberSystem=R(n?"numberSymbols":"symbols-numberSystem-"+o.nSystem,o.obj),r.symbolMatch=this.getSymbolMatch(r.symbolNumberSystem),r.numberSystem=o.nSystem))}return r},t.getNumberMapper=function(t,e,i){var n={mapper:{}},r=this.getDefaultNumberingSystem(t);if(!W(r.nSystem)){n.numberSystem=r.nSystem,n.numberSymbols=R("symbols-numberSystem-"+r.nSystem,r.obj),n.timeSeparator=R("timeSeparator",n.numberSymbols);var o=R(r.nSystem+"._digits",e);if(!W(o))for(var s=0,a=at;s<a.length;s++){var l=a[s];n.mapper[l]=o[l]}}return n},t.nPair="numericPair",t.nRegex="numericRegex",t.numberingSystems=ot,t}(),ht={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH₵",XDR:"XDR",AED:"د.إ.‏",BHD:"د.ب.‏",DZD:"د.ج.‏",EGP:"ج.م.‏",ILS:"₪",IQD:"د.ع.‏",JOD:"د.ا.‏",KMF:"CF",KWD:"د.ك.‏",LBP:"ل.ل.‏",LYD:"د.ل.‏",MAD:"د.م.‏",MRU:"أ.م.",OMR:"ر.ع.‏",QAR:"ر.ق.‏",SAR:"ر.س.‏",SDG:"ج.س.",SOS:"S",SSP:"£",SYP:"ل.س.‏",TND:"د.ت.‏",YER:"ر.ي.‏",CLP:"$",INR:"₹",TZS:"TSh",EUR:"€",AZN:"₼",RUB:"₽",BYN:"Br",ZMW:"K",BGN:"лв.",NGN:"₦",XOF:"CFA",BDT:"৳",CNY:"¥",BAM:"КМ",UGX:"USh",USD:"$",CZK:"Kč",GBP:"£",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"ރ.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"£",GIP:"£",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"₱",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"£",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"₡",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"₲",UYU:"$",VES:"Bs.S",IRR:"ريال",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"֏",ISK:"kr",JPY:"¥",GEL:"₾",CVE:"​",KZT:"₸",KHR:"៛",KPW:"₩",KRW:"₩",KGS:"сом",AOA:"Kz",LAK:"₭",MZN:"MTn",MKD:"ден",MNT:"₮",BND:"$",MMK:"K",NOK:"kr",NPR:"रु",AWG:"Afl.",SRD:"$",PLN:"zł",AFN:"؋",STN:"Db",MDL:"L",RON:"lei",UAH:"₴",LKR:"රු.",ALL:"Lekë",RSD:"дин.",TJS:"смн",THB:"฿",TMT:"m.",TRY:"₺",UZS:"сўм",VND:"₫",TWD:"NT$"};!function(t){var e=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];t.getHijriDate=function(t){var i=t.getDate(),n=t.getMonth(),r=t.getFullYear(),o=n+1,s=r;o<3&&(s-=1,o+=12);var a=Math.floor(s/100),l=a-Math.floor(a/4)-2,h=Math.floor(365.25*(s+4716))+Math.floor(30.6001*(o+1))+i-l-1524,c=h+(l=(a=Math.floor((h-1867216.25)/36524.25))-Math.floor(a/4)+1)+1524,d=Math.floor((c-122.1)/365.25),p=Math.floor(365.25*d),u=Math.floor((c-p)/30.6001);i=c-p-Math.floor(30.6001*u),(n=Math.floor((c-p)/20.6001))>13&&(d+=1,n-=12),n-=1,r=d-4716;var f=h-24e5,g=h-1948084,m=Math.floor(g/10631);g-=10631*m;var y=Math.floor((g-.1335)/(10631/30)),v=30*m+y;g-=Math.floor(y*(10631/30)+.1335);var b=Math.floor((g+28.5001)/29.5);13===b&&(b=12);for(var w=g-Math.floor(29.5001*b-29),S=0;S<e.length&&!(e[S]>f);S++);var x=S+16260,C=Math.floor((x-1)/12),P=C+1,O=x-12*C,E=f-e[S-1]+1;return(E+"").length>2&&(E=w,O=b,P=v),{year:P,month:O,date:E}},t.toGregorian=function(t,i,n){var r=n+e[12*(t-1)+1+(i-1)-16260-1]-1+24e5,o=Math.floor(r+.5),s=Math.floor((o-1867216.25)/36524.25),a=1524+(s=o+1+s-Math.floor(s/4)),l=Math.floor((a-122.1)/365.25),h=Math.floor(365.25*l),c=Math.floor((a-h)/30.6001),d=a-h-Math.floor(30.6001*c),p=c-(c>13.5?13:1),u=l-(p>2.5?4716:4715);return u<=0&&p--,new Date(u+"/"+p+"/"+d)}}(rt||(rt={}));var ct=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,dt=["sun","mon","tue","wed","thu","fri","sat"],pt={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},ut={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},ft=function(){function t(){}return t.dateFormat=function(t,e,i){var n=this,r=_t.getDependables(i,t,e.calendar),o=R("parserObject.numbers",r),s=r.dateObject,a={isIslamic:_t.islamicRegex.test(e.calendar)};$()&&e.isServerRendered&&(e=_t.compareBlazorDateFormats(e,t));var l=e.format||_t.getResultantPattern(e.skeleton,r.dateObject,e.type,!1,$()?t:"");if(a.dateSeperator=$()?R("dateSeperator",s):_t.getDateSeparator(r.dateObject),W(l))Z("Format options or type given must be invalid");else{l=_t.ConvertDateToWeekFormat(l),$()&&(l=l.replace(/tt/,"a")),a.pattern=l,a.numMapper=$()?V({},o):lt.getNumberMapper(r.parserObject,lt.getNumberingSystem(i));for(var h=0,c=l.match(ct)||[];h<c.length;h++){var d=c[h],p=d.length,u=d[0];"K"===u&&(u="h");switch(u){case"E":case"c":$()?a.weekday=R("days."+_t.monthIndex[p],s):a.weekday=r.dateObject[_t.days]["stand-alone"][_t.monthIndex[p]];break;case"M":case"L":$()?a.month=R("months."+_t.monthIndex[p],s):a.month=r.dateObject[_t.month]["stand-alone"][_t.monthIndex[p]];break;case"a":a.designator=$()?R("dayPeriods",s):R("dayPeriods.format.wide",s);break;case"G":var f=p<=3?"eraAbbr":4===p?"eraNames":"eraNarrow";a.era=$()?R("eras",s):R("eras."+f,r.dateObject);break;case"z":a.timeZone=R("dates.timeZoneNames",r.parserObject)}}}return function(t){return isNaN(t.getDate())?null:n.intDateFormatter(t,a)}},t.intDateFormatter=function(t,e){for(var i="",n=e.pattern.match(_t.dateParseRegex),r=this.getCurrentDateValue(t,e.isIslamic),o=0,s=n;o<s.length;o++){var a=s[o],l=a.length,h=a[0];"K"===h&&(h="h");var c=void 0,d="",p=void 0,u=void 0,f="";switch(h){case"M":case"L":c=r.month,l>2?i+=e.month[c]:p=!0;break;case"E":case"c":i+=e.weekday[dt[t.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(p=!0,"d"===h)c=r.date;else if("f"===h){p=!1,u=!0;var g=(d=(d=t[pt[h]]().toString()).substring(0,l)).length;if(l!==g){if(l>3)continue;for(var m=0;m<l-g;m++)d="0"+d.toString()}f+=d}else c=t[pt[h]]();"h"===h&&(c=c%12||12);break;case"y":u=!0,f+=r.year,2===l&&(f=f.substr(f.length-2));break;case"a":var y=t.getHours()<12?"am":"pm";i+=e.designator[y];break;case"G":var v=t.getFullYear()<0?0:1,b=e.era[v];F(b)&&(b=e.era[v?0:1]),i+=b||"";break;case"'":i+="''"===a?"'":a.replace(/\'/g,"");break;case"z":var w=t.getTimezoneOffset(),S=l<4?"+H;-H":e.timeZone.hourFormat;S=S.replace(/:/g,e.numMapper.timeSeparator),0===w?i+=e.timeZone.gmtZeroFormat:(u=!0,f=this.getTimeZoneValue(w,S)),f=e.timeZone.gmtFormat.replace(/\{0\}/,f);break;case":":i+=e.numMapper.numberSymbols.timeSeparator;break;case"/":i+=e.dateSeperator;break;case"W":p=!0,c=_t.getWeekOfYear(t);break;default:i+=a}p&&(u=!0,f=this.checkTwodigitNumber(c,l)),u&&(i+=lt.convertValueParts(f,_t.latnParseRegex,e.numMapper.mapper))}return i},t.getCurrentDateValue=function(t,e){return e?rt.getHijriDate(t):{year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate()}},t.checkTwodigitNumber=function(t,e){var i=t+"";return 2===e&&2!==i.length?"0"+i:i},t.getTimeZoneValue=function(t,e){var i=this,n=e.split(";")[t>0?1:0],r=Math.abs(t);return n.replace(/HH?|mm/g,function(t){var e=t.length,n=-1!==t.indexOf("H");return i.checkTwodigitNumber(Math.floor(n?r/60:r%60),e)})},t}(),gt={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},mt=["infinity","nan","group","decimal","exponential"],yt=function(){function t(){}return t.numberFormatter=function(t,e,i){var n,r=this,o=V({},e),s={},a={},l=_t.getDependables(i,t,"",!0),h=l.numericObject;a.numberMapper=$()?V({},h):lt.getNumberMapper(l.parserObject,lt.getNumberingSystem(i),!0),a.currencySymbol=$()?R("currencySymbol",h):_t.getCurrencySymbol(l.numericObject,o.currency||At,e.altSymbol),a.percentSymbol=$()?R("numberSymbols.percentSign",h):a.numberMapper.numberSymbols.percentSign,a.minusSymbol=$()?R("numberSymbols.minusSign",h):a.numberMapper.numberSymbols.minusSign;var c=a.numberMapper.numberSymbols;if(e.format&&!_t.formatRegex.test(e.format))s=_t.customFormat(e.format,a,l.numericObject);else{if(V(o,_t.getProperNumericSkeleton(e.format||"N")),o.isCurrency="currency"===o.type,o.isPercent="percent"===o.type,$()||(n=_t.getSymbolPattern(o.type,a.numberMapper.numberSystem,l.numericObject,o.isAccount)),o.groupOne=this.checkValueRange(o.maximumSignificantDigits,o.minimumSignificantDigits,!0),this.checkValueRange(o.maximumFractionDigits,o.minimumFractionDigits,!1,!0),W(o.fractionDigits)||(o.minimumFractionDigits=o.maximumFractionDigits=o.fractionDigits),W(o.useGrouping)&&(o.useGrouping=!0),o.isCurrency&&!$()&&(n=n.replace(/\u00A4/g,_t.defaultCurrency)),$())s.nData=V({},{},R(o.type+"nData",h)),s.pData=V({},{},R(o.type+"pData",h)),"currency"===o.type&&e.currency&&_t.replaceBlazorCurrency([s.pData,s.nData],a.currencySymbol,e.currency);else{var d=n.split(";");s.nData=_t.getFormatData(d[1]||"-"+d[0],!0,a.currencySymbol),s.pData=_t.getFormatData(d[0],!1,a.currencySymbol),o.useGrouping&&(o.groupSeparator=c[mt[2]],o.groupData=this.getGroupingDetails(d[0]))}if(W(o.minimumFractionDigits)&&(o.minimumFractionDigits=s.nData.minimumFraction),W(o.maximumFractionDigits)){var p=s.nData.maximumFraction;o.maximumFractionDigits=W(p)&&o.isPercent?0:p}var u=o.minimumFractionDigits,f=o.maximumFractionDigits;W(u)||W(f)||u>f&&(o.maximumFractionDigits=u)}return V(s.nData,o),V(s.pData,o),function(t){return isNaN(t)?c[mt[1]]:isFinite(t)?r.intNumberFormatter(t,s,a):c[mt[0]]}},t.getGroupingDetails=function(t){var e={},i=t.match(_t.negativeDataRegex);if(i&&i[4]){var n=i[4],r=n.lastIndexOf(",");if(-1!==r){var o=n.split(".")[0];e.primary=o.length-r-1;var s=n.lastIndexOf(",",r-1);-1!==s&&(e.secondary=r-1-s)}}return e},t.checkValueRange=function(t,e,i,n){var r=n?"f":"s",o=0,s=gt["l"+r],a=gt["m"+r];if(W(t)||(this.checkRange(t,s,n),o++),W(e)||(this.checkRange(e,a,n),o++),2===o){if(!(t<e))return!0;Z(a+"specified must be less than the"+s)}else i&&1===o&&Z("Both"+a+"and"+a+"must be present");return!1},t.checkRange=function(t,e,i){var n=i?[0,20]:[1,21];(t<n[0]||t>n[1])&&Z(e+"value must be within the range"+n[0]+"to"+n[1])},t.intNumberFormatter=function(t,e,i){var n;if(!W(e.nData.type)){t<0?(t*=-1,n=e.nData):n=0===t&&e.zeroData||e.pData;var r="";return n.isPercent&&(t*=100),n.groupOne?r=this.processSignificantDigits(t,n.minimumSignificantDigits,n.maximumSignificantDigits):(r=this.processFraction(t,n.minimumFractionDigits,n.maximumFractionDigits),n.minimumIntegerDigits&&(r=this.processMinimumIntegers(r,n.minimumIntegerDigits))),"scientific"===n.type&&(r=(r=t.toExponential(n.maximumFractionDigits)).replace("e",i.numberMapper.numberSymbols[mt[4]])),r=r.replace(".",i.numberMapper.numberSymbols[mt[3]]),n.useGrouping&&(r=this.groupNumbers(r,n.groupData.primary,n.groupSeparator||",",i.numberMapper.numberSymbols[mt[3]]||".",n.groupData.secondary)),r=lt.convertValueParts(r,_t.latnParseRegex,i.numberMapper.mapper),"N/A"===n.nlead?n.nlead:n.nlead+r+n.nend}},t.processSignificantDigits=function(t,e,i){var n=t+"";return n.length<e?t.toPrecision(e):+(n=t.toPrecision(i))+""},t.groupNumbers=function(t,e,i,n,r){for(var o=!F(r)&&0!==r,s=t.split(n),a=s[0],l=a.length,h="";l>e;)h=a.slice(l-e,l)+(h.length?i+h:""),l-=e,o&&(e=r,o=!1);return s[0]=a.slice(0,l)+(h.length?i:"")+h,s.join(n)},t.processFraction=function(t,e,i){var n=(t+"").split(".")[1],r=n?n.length:0;if(e&&r<e){var o="";if(0!==r){o+=t;for(var s=0;s<e-r;s++)o+="0";return o}return o=t.toFixed(e),t.toFixed(e)}return!F(i)&&(r>i||0===i)?t.toFixed(i):t+""},t.processMinimumIntegers=function(t,e){var i=t.split("."),n=i[0],r=n.length;if(r<e){for(var o=0;o<e-r;o++)n="0"+n;i[0]=n}return i.join(".")},t}(),vt=/^[0-9]*$/,bt={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},wt=function(){function t(){}return t.dateParser=function(t,e,i){var n=this,r=_t.getDependables(i,t,e.calendar),o=lt.getCurrentNumericOptions(r.parserObject,lt.getNumberingSystem(i),!1,$()),s={};$()&&e.isServerRendered&&(e=_t.compareBlazorDateFormats(e,t));var a,l=e.format||_t.getResultantPattern(e.skeleton,r.dateObject,e.type,!1,$()?t:""),h="";if(W(l))Z("Format options or type given must be invalid");else{l=_t.ConvertDateToWeekFormat(l),s={isIslamic:_t.islamicRegex.test(e.calendar),pattern:l,evalposition:{}};for(var c=l.match(_t.dateParseRegex)||[],d=c.length,p=0,u=0,f=!1,g=o.numericRegex,m=$()?r.parserObject.numbers:lt.getNumberMapper(r.parserObject,lt.getNumberingSystem(i)),y=0;y<d;y++){var v=c[y],b=v.length,w="K"===v[0]?"h":v[0],S=void 0,x=void 0,C=ut[w],P=2===b?"":"?";switch(f&&(p=u,f=!1),w){case"E":case"c":var O=void 0;O=$()?R("days."+_t.monthIndex[b],r.dateObject):r.dateObject[_t.days]["stand-alone"][_t.monthIndex[b]];var E=lt.reverseObject(O);h+="("+Object.keys(E).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(x=!0,("M"===w||"L"===w)&&b>2){var L=void 0;L=$()?R("months."+_t.monthIndex[b],r.dateObject):r.dateObject.months["stand-alone"][_t.monthIndex[b]],s[C]=lt.reverseObject(L),h+="("+Object.keys(s[C]).join("|")+")"}else if("f"===w){if(b>3)continue;S=!0,h+="("+g+g+"?"+g+"?)"}else S=!0,h+="("+g+g+P+")";"h"===w&&(s.hour12=!0);break;case"W":h+="("+g+(1===b?"?":"")+g+")";break;case"y":x=S=!0,h+=2===b?"("+g+g+")":"("+g+"{"+b+",})";break;case"a":x=!0;var I=$()?R("dayPeriods",r.dateObject):R("dayPeriods.format.wide",r.dateObject);s[C]=lt.reverseObject(I),h+="("+Object.keys(s[C]).join("|")+")";break;case"G":x=!0;var T=b<=3?"eraAbbr":4===b?"eraNames":"eraNarrow";s[C]=lt.reverseObject($()?R("eras",r.dateObject):R("eras."+T,r.dateObject)),h+="("+Object.keys(s[C]).join("|")+"?)";break;case"z":x=0!==(new Date).getTimezoneOffset(),s[C]=R("dates.timeZoneNames",r.parserObject);var A=s[C],B=(a=b<4)?"+H;-H":A.hourFormat;B=B.replace(/:/g,m.timeSeparator),h+="("+this.parseTimeZoneRegx(B,A,g)+")?",f=!0,u=a?6:12;break;case"'":h+="("+v.replace(/\'/g,"")+")?";break;default:h+="([\\D])"}x&&(s.evalposition[C]={isNumber:S,pos:y+1+p,hourOnly:a}),y!==d-1||F(h)||(s.parserRegex=new RegExp("^"+h+"$","i"))}}return function(t){var e=n.internalDateParse(t,s,o);if(F(e)||!Object.keys(e).length)return null;if(s.isIslamic){var i={},r=e.year,a=e.day,l=e.month,h=r?r+"":"",c=2===h.length;r&&l&&a&&!c||(i=rt.getHijriDate(new Date)),c&&(r=parseInt((i.year+"").slice(0,2)+h,10));var d=rt.toGregorian(r||i.year,l||i.month,a||i.date);e.year=d.getFullYear(),e.month=d.getMonth()+1,e.day=d.getDate()}return n.getDateObject(e)}},t.getDateObject=function(t,e){var i=e||new Date;i.setMilliseconds(0);var n=t.year,r=t.designator,o=t.timeZone;if(!W(n)){if((n+"").length<=2)n+=100*Math.floor(i.getFullYear()/100);i.setFullYear(n)}for(var s=0,a=["hour","minute","second","milliseconds","month","day"];s<a.length;s++){var l=a[s],h=t[l];if(W(h)&&"day"===l&&i.setDate(1),!W(h))if("month"===l){if((h-=1)<0||h>11)return new Date("invalid");var c=i.getDate();i.setDate(1),i[bt[l]](h);var d=new Date(i.getFullYear(),h+1,0).getDate();i.setDate(c<d?c:d)}else{if("day"===l){var p=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(h<1||h>p)return null}i[bt[l]](h)}}if(!W(r)){var u=i.getHours();"pm"===r?i.setHours(u+(12===u?0:12)):12===u&&i.setHours(0)}if(!W(o)){var f=o-i.getTimezoneOffset();0!==f&&i.setMinutes(i.getMinutes()+f)}return i},t.internalDateParse=function(t,e,i){var n=t.match(e.parserRegex),r={hour:0,minute:0,second:0};i.numericRegex;if(F(n))return null;for(var o=0,s=Object.keys(e.evalposition);o<s.length;o++){var a=s[o],l=e.evalposition[a],h=n[l.pos];if(l.isNumber)r[a]=this.internalNumberParser(h,i);else if("timeZone"!==a||W(h))r[a]=e[a][h];else{var c=l.pos,d=void 0,p=n[c+1],u=!W(p);l.hourOnly?d=60*this.getZoneValue(u,p,n[c+4],i):(d=60*this.getZoneValue(u,p,n[c+7],i),d+=this.getZoneValue(u,n[c+4],n[c+10],i)),F(d)||(r[a]=d)}}return e.hour12&&(r.hour12=!0),r},t.internalNumberParser=function(t,e){return t=lt.convertValueParts(t,e.numberParseRegex,e.numericPair),vt.test(t)?+t:null},t.parseTimeZoneRegx=function(t,e,i){var n,r,o=e.gmtFormat,s="("+i+")("+i+")";return n=t.replace("+","\\+"),r=(n=-1!==t.indexOf("HH")?n.replace(/HH|mm/g,"("+s+")"):n.replace(/H|m/g,"("+s+"?)")).split(";").map(function(t){return o.replace("{0}",t)}),n=r.join("|")+"|"+e.gmtZeroFormat},t.getZoneValue=function(t,e,i,n){var r=t?e:i;if(!r)return 0;var o=this.internalNumberParser(r,n);return t?-o:o},t}(),St=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,xt=/,/g,Ct=["minusSign","infinity"],Pt=function(){function t(){}return t.numberParser=function(t,e,i){var n,r=this,o=_t.getDependables(i,t,"",!0),s={custom:!0};_t.formatRegex.test(e.format)||!e.format?(V(s,_t.getProperNumericSkeleton(e.format||"N")),s.custom=!1):V(s,_t.customFormat(e.format,null,null));var a,l=R("numbers",o.parserObject);if(n=lt.getCurrentNumericOptions(o.parserObject,lt.getNumberingSystem(i),!0,$()),s.symbolRegex=lt.getSymbolRegex(Object.keys(n.symbolMatch)),s.infinity=n.symbolNumberSystem[Ct[1]],$())s.nData=V({},{},R(s.type+"nData",l)),s.pData=V({},{},R(s.type+"pData",l)),"currency"===s.type&&e.currency&&_t.replaceBlazorCurrency([s.pData,s.nData],R("currencySymbol",l),e.currency);else if(a=_t.getSymbolPattern(s.type,n.numberSystem,o.numericObject,s.isAccount)){var h=(a=a.replace(/\u00A4/g,_t.defaultCurrency)).split(";");s.nData=_t.getFormatData(h[1]||"-"+h[0],!0,""),s.pData=_t.getFormatData(h[0],!0,"")}return function(t){return r.getParsedNumber(t,s,n)}},t.getParsedNumber=function(t,e,i){var n,r,o,s,a,l;if(-1!==t.indexOf(e.infinity))return 1/0;t=lt.convertValueParts(t,e.symbolRegex,i.symbolMatch),0===(t=lt.convertValueParts(t,i.numberParseRegex,i.numericPair)).indexOf(".")&&(t="0"+t);var h=t.match(St);if(F(h))return NaN;s=h[1],o=h[2];var c=h[5];return a=h[6],r=(n=e.custom?s===e.nData.nlead&&a===e.nData.nend:-1!==s.indexOf(e.nData.nlead)&&-1!==a.indexOf(e.nData.nend))?e.nData.isPercent:e.pData.isPercent,o=o.replace(xt,""),c&&(o+=c),l=+o,("percent"===e.type||r)&&(l/=100),(e.custom||e.fractionDigits)&&(l=parseFloat(l.toFixed(e.custom?n?e.nData.maximumFractionDigits:e.pData.maximumFractionDigits:e.fractionDigits))),n&&(l*=-1),l},t}(),Ot=function(){function t(t){this.ranArray=[],this.boundedEvents={},F(t)||(this.context=t)}return t.prototype.on=function(t,e,i,n){if(!F(e)){var r=i||this.context;this.notExist(t)?this.boundedEvents[t]=[{handler:e,context:r}]:F(n)?this.isHandlerPresent(this.boundedEvents[t],e)||this.boundedEvents[t].push({handler:e,context:r}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[t].push({handler:e,context:r,id:n}))}},t.prototype.off=function(t,e,i){if(!this.notExist(t)){var n=R(t,this.boundedEvents);if(e){for(var r=0;r<n.length;r++)if(i){if(n[r].id===i){n.splice(r,1);var o=this.ranArray.indexOf(i);-1!==o&&this.ranArray.splice(o,1);break}}else if(e===n[r].handler){n.splice(r,1);break}}else delete this.boundedEvents[t]}},t.prototype.notify=function(t,e,i,n){if(this.notExist(t))i&&i.call(this,e);else{e&&(e.name=t);var r=R(t,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(r,e,i,n,0);for(var o=0,s=r;o<s.length;o++){var a=s[o];a.handler.call(a.context,e)}i&&i.call(this,e)}},t.prototype.blazorCallback=function(t,e,i,n,r){var o=this,s=r===t.length-1;if(r<t.length){var a=t[r],l=a.handler.call(a.context,e);if(l&&"function"==typeof l.then){if(!i)return l;l.then(function(l){if(l="string"==typeof l&&o.isJson(l)?JSON.parse(l,o.dateReviver):l,V(e,e,l,!0),!i||!s)return o.blazorCallback(t,e,i,n,r+1);i.call(a.context,e)}).catch(function(t){n&&n.call(a.context,"string"==typeof t&&o.isJson(t)?JSON.parse(t,o.dateReviver):t)})}else{if(!i||!s)return this.blazorCallback(t,e,i,n,r+1);i.call(a.context,e)}}},t.prototype.dateReviver=function(t,e){return $&&"string"==typeof e&&null!==e.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(e):e},t.prototype.isJson=function(t){try{JSON.parse(t)}catch(t){return!1}return!0},t.prototype.destroy=function(){this.boundedEvents=this.context=void 0},t.prototype.notExist=function(t){return!1===this.boundedEvents.hasOwnProperty(t)||this.boundedEvents[t].length<=0},t.prototype.isHandlerPresent=function(t,e){for(var i=0,n=t;i<n.length;i++){if(n[i].handler===e)return!0}return!1},t}(),Et=new Ot,Lt=!1,It={},Tt="en-US",At="USD",Bt=["numericObject","dateObject"],kt=function(){function t(t){t&&(this.culture=t)}return t.prototype.getDateFormat=function(t){return ft.dateFormat(this.getCulture(),t||{type:"date",skeleton:"short"},It)},t.prototype.getNumberFormat=function(t){return t&&!t.currency&&(t.currency=At),$()&&t&&!t.format&&(t.minimumFractionDigits=0),yt.numberFormatter(this.getCulture(),t||{},It)},t.prototype.getDateParser=function(t){return wt.dateParser(this.getCulture(),t||{skeleton:"short",type:"date"},It)},t.prototype.getNumberParser=function(t){return $()&&t&&!t.format&&(t.minimumFractionDigits=0),Pt.numberParser(this.getCulture(),t||{format:"N"},It)},t.prototype.formatNumber=function(t,e){return this.getNumberFormat(e)(t)},t.prototype.formatDate=function(t,e){return this.getDateFormat(e)(t)},t.prototype.parseDate=function(t,e){return this.getDateParser(e)(t)},t.prototype.parseNumber=function(t,e){return this.getNumberParser(e)(t)},t.prototype.getDatePattern=function(t,e){return _t.getActualDateTimeFormat(this.getCulture(),t,It,e)},t.prototype.getNumberPattern=function(t){return _t.getActualNumberFormat(this.getCulture(),t,It)},t.prototype.getFirstDayOfWeek=function(){return _t.getWeekData(this.getCulture(),It)},t.prototype.getCulture=function(){return this.culture||Tt},t}();function Mt(t){Tt=t,Et.notify("notifyExternalChange",{locale:Tt})}function Dt(t){At=t,Et.notify("notifyExternalChange",{currencyCode:At})}function Rt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,n=t;i<n.length;i++){var r=n[i];V(It,r,{},!0)}}function zt(t){void 0===t&&(t=!0),Lt=t,Et.notify("notifyExternalChange",{enableRtl:Lt})}function jt(t,e){var i=_t.getDependables(It,t,"",!0)[Bt[0]],n=_t.getDependables(It,t,"")[Bt[1]],r=R("defaultNumberingSystem",i),o=$()?R("numberSymbols",i):R("symbols-numberSystem-"+r,i),s=_t.getSymbolPattern(e||"decimal",r,i,!1);return V(o,_t.getFormatData(s,!0,"",!0),{dateSeparator:_t.getDateSeparator(n)})}function Nt(t,e){var i=_t.getDependables(It,t,"",!0);return _t.getCurrencySymbol(i.numericObject,e)}function Ht(t){return _t.getDependables(It,"",t,!1)[Bt[1]]}var _t,Vt={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(t){t.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,t.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,t.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var e=/[0-9]/g;t.defaultCurrency="$";var i=["infinity","nan","group","decimal"],n=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,r={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};t.dateConverterMapper=/dddd|ddd/gi;var o="sun";t.islamicRegex=/^islamic/;var s={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};t.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,t.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,t.curWithoutNumberRegex=/(c|a)$/gi;var a={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function l(e,i,n,r,o){var s,a=n||"date";if(o)s=p({skeleton:e},o).format||p({skeleton:"d"},"en-US").format;else{if(-1!==t.basicPatterns.indexOf(e)){if(s=R(a+"Formats."+e,i),"dateTime"===a){var l=R("dateFormats."+e,i),h=R("timeFormats."+e,i);s=s.replace("{1}",l).replace("{0}",h)}}else s=R("dateTimeFormats.availableFormats."+e,i);W(s)&&"yMd"===e&&(s="M/d/y")}return s}function h(e,i,n,r){var o={},s=n||"gregorian";if(o.parserObject=lt.getMainObject(e,i)||($()?t.blazorDefaultObject:t.defaultObject),r)o.numericObject=R("numbers",o.parserObject);else{var a=$()?"dates":"dates.calendars."+s;o.dateObject=R(a,o.parserObject)}return o}function c(t,e,i,n){return R(t+"Formats-numberSystem-"+e+(n?".accounting":".standard"),i)||(n?R(t+"Formats-numberSystem-"+e+".standard",i):"")}function d(e){var i=e.match(t.dateConverterMapper);if(i&&$()){var n=3===i[0].length?"EEE":"EEEE";return e.replace(t.dateConverterMapper,n)}return e}function p(t,e){var i=t.format||t.skeleton,n=R((e||"en-US")+"."+i,Vt);return n||(n=R("en-US."+i,Vt)),n&&(n=d(n),t.format=n.replace(/tt/,"a")),t}function u(e){var i=e.match(t.formatRegex),n={},r=i[1].toUpperCase();return n.isAccount="A"===r,n.type=t.patternMatcher[r],e.length>1&&(n.fractionDigits=parseInt(i[2],10)),n}function f(i,n,r,o){var s=o?{}:{nlead:"",nend:""},a=i.match(t.customRegex);if(a){o||(s.nlead=g(a[1],r),s.nend=g(a[10],r),s.groupPattern=a[4]);var l=a[7];if(l&&n){var h=l.match(e);F(h)?s.minimumFraction=0:s.minimumFraction=h.length,s.maximumFraction=l.length-1}}return s}function g(e,i){return e?e.replace(t.defaultCurrency,i):""}function m(t,e,i){return R("currencies."+e+(i?"."+i:".symbol"),t)||R("currencies."+e+".symbol-alt-narrow",t)||"$"}function y(e,n,r){var o={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},s=e.match(t.customRegex);if(F(s)||""===s[5]&&"N/A"!==e)return o.type=void 0,o;o.nlead=s[1],o.nend=s[10];var a=s[6];o.useGrouping=-1!==a.indexOf(","),a=a.replace(/,/g,"");var l=s[7];if(-1!==a.indexOf("0")&&(o.minimumIntegerDigits=a.length-a.indexOf("0")),F(l)||(o.minimumFractionDigits=l.lastIndexOf("0"),o.maximumFractionDigits=l.lastIndexOf("#"),-1===o.minimumFractionDigits&&(o.minimumFractionDigits=0),(-1===o.maximumFractionDigits||o.maximumFractionDigits<o.minimumFractionDigits)&&(o.maximumFractionDigits=o.minimumFractionDigits)),F(n)?V(o,v([o.nlead,o.nend],"%","%")):(V(o,v([o.nlead,o.nend],"$",n.currencySymbol)),o.isCurrency||V(o,v([o.nlead,o.nend],"%",n.percentSymbol))),!F(r)){var h=c(o.type,n.numberMapper.numberSystem,r,!1);o.useGrouping&&(o.groupSeparator=n.numberMapper.numberSymbols[i[2]],o.groupData=yt.getGroupingDetails(h.split(";")[0])),o.nlead=o.nlead.replace(/\'/g,""),o.nend=o.nend.replace(/\'/g,"")}return o}function v(t,e,i){for(var n={nlead:t[0],nend:t[1]},r=0;r<2;r++){var o=t[r],s=o.indexOf(e);if(-1!==s&&(s<o.indexOf("'")||s>o.lastIndexOf("'"))){n[a[r]]=o.substr(0,s)+i+o.substr(s+1),n[a[e]]=!0,n.type=n.isCurrency?"currency":"percent";break}}return n}t.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,t.basicPatterns=["short","medium","long","full"],t.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhuʻl-Q.",12:"Dhuʻl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabiʻ I",4:"Rabiʻ II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Shaʻban",9:"Ramadan",10:"Shawwal",11:"Dhuʻl-Qiʻdah",12:"Dhuʻl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"€","symbol-alt-narrow":"€"},GBP:{displayName:"British Pound","symbol-alt-narrow":"£"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"×",perMille:"‰",infinity:"∞",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"¤#,##0.00",accounting:"¤#,##0.00;(¤#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},t.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"∞"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},t.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},t.month="months",t.days="days",t.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},t.getResultantPattern=l,t.getDependables=h,t.getSymbolPattern=c,t.ConvertDateToWeekFormat=d,t.compareBlazorDateFormats=p,t.getProperNumericSkeleton=u,t.getFormatData=f,t.getCurrencySymbol=m,t.customFormat=function(t,e,i){for(var n={},r=t.split(";"),o=["pData","nData","zeroData"],s=0;s<r.length;s++)n[o[s]]=y(r[s],e,i);return F(n.nData)&&(n.nData=V({},n.pData),n.nData.nlead=F(e)?"-"+n.nData.nlead:e.minusSymbol+n.nData.nlead),n},t.isCurrencyPercent=v,t.getDateSeparator=function(t){var e=(R("dateFormats.short",t)||"").match(/[d‏M‏]([^d‏M])[d‏M‏]/i);return e?e[1]:"/"},t.getActualDateTimeFormat=function(t,e,i,o){var s=h(i,t,e.calendar);$()&&(e=p(e,t));var a=e.format||l(e.skeleton,s.dateObject,e.type);if(o){if(-1!==(a=a.replace(n,function(t){return r[t]})).indexOf("z")){var c=a.match(/z/g).length,d=void 0,u={timeZone:{}};u.numMapper=lt.getNumberMapper(s.parserObject,lt.getNumberingSystem(i)),u.timeZone=R("dates.timeZoneNames",s.parserObject);var f=(new Date).getTimezoneOffset(),g=c<4?"+H;-H":u.timeZone.hourFormat;g=g.replace(/:/g,u.numMapper.timeSeparator),0===f?d=u.timeZone.gmtZeroFormat:(d=ft.getTimeZoneValue(f,g),d=u.timeZone.gmtFormat.replace(/\{0\}/,d)),a=a.replace(/[z]+/,'"'+d+'"')}a=a.replace(/ $/,"")}return a},t.getActualNumberFormat=function(e,i,n){var r,o,s=h(n,e,"",!0),a={custom:!0},l=s.numericObject,d={},p=(i.format||"").match(t.currencyFormatRegex),g=t.formatRegex.test(i.format)?u(i.format||"N"):{},y={};if(p){y.numberMapper=$()?V({},s.numericObject):lt.getNumberMapper(s.parserObject,lt.getNumberingSystem(n),!0);var v=$()?R("currencySymbol",s.numericObject):m(s.numericObject,i.currency||At,i.altSymbol),b=c("currency",y.numberMapper.numberSystem,s.numericObject,/a/i.test(i.format)),w=(b=b.replace(/\u00A4/g,v)).split(";");d.hasNegativePattern=!!$()||w.length>1,d.nData=$()?R(g.type+"nData",l):f(w[1]||"-"+w[0],!0,v),d.pData=$()?R(g.type+"pData",l):f(w[0],!1,v),p[2]||i.minimumFractionDigits||i.maximumFractionDigits||(r=f(b.split(";")[0],!0,"",!0).minimumFraction)}if(t.formatRegex.test(i.format)||!i.format){if(V(a,u(i.format||"N")),a.custom=!1,o="###0",(a.fractionDigits||i.minimumFractionDigits||i.maximumFractionDigits||r)&&(a.fractionDigits&&(i.minimumFractionDigits=i.maximumFractionDigits=a.fractionDigits),o=function(t,e,i){t+=".";for(var n=0;n<e;n++)t+="0";if(e<i)for(var r=i-e,o=0;o<r;o++)t+="#";return t}(o,r||a.fractionDigits||i.minimumFractionDigits||0,i.maximumFractionDigits||0)),i.minimumIntegerDigits&&(o=function(t,e){for(var i=t.split("."),n="",r=0;r<e;r++)n+="0";return i[1]?n+"."+i[1]:n}(o,i.minimumIntegerDigits)),i.useGrouping&&(o=function(t){var e=t.split("."),i=e[0],n=3-i.length%3;t="";for(var r=(i=(n&&1===n?"#":2===n?"##":"")+i).length-1;r>0;r-=3)t=","+i[r-2]+i[r-1]+i[r]+t;return t=t.slice(1),e[1]?t+"."+e[1]:t}(o)),"currency"===a.type||a.type&&$()){$()&&"currency"!==a.type&&(d.pData=R(a.type+"pData",l),d.nData=R(a.type+"nData",l));var S=o;o=d.pData.nlead+S+d.pData.nend,(d.hasNegativePattern||$())&&(o+=";"+d.nData.nlead+S+d.nData.nend)}"percent"!==a.type||$()||(o+=" %")}else o=i.format.replace(/\'/g,'"');return Object.keys(y).length>0&&(o=function(t,e){if(-1!==t.indexOf(",")){var i=t.split(",");t=i[0]+R("numberMapper.numberSymbols.group",e)+i[1].replace(".",R("numberMapper.numberSymbols.decimal",e))}else t=t.replace(".",R("numberMapper.numberSymbols.decimal",e));return t}(o,y)),o},t.getWeekData=function(t,e){var i=o,n=R("supplemental.weekData.firstDay",e),r=t;return/en-/.test(r)&&(r=r.slice(3)),r=r.slice(0,2).toUpperCase()+r.substr(2),n&&(i=n[r]||o),s[i]},t.replaceBlazorCurrency=function(t,e,i){var n=R(i||"",ht);if(e!==n)for(var r=0,o=t;r<o.length;r++){var s=o[r];s.nend=s.nend.replace(e,n),s.nlead=s.nlead.replace(e,n)}},t.getWeekOfYear=function(t){var e,i=new Date(t.getFullYear(),0,1),n=i.getDay();n=n>=0?n:n+7;var r=Math.floor((t.getTime()-i.getTime()-6e4*(t.getTimezoneOffset()-i.getTimezoneOffset()))/864e5)+1;if(n<4){if((e=Math.floor((r+n-1)/7)+1)>52){var o=new Date(this.getFullYear()+1,0,1).getDay();e=(o=o>=0?o:o+7)<4?1:53}}else e=Math.floor((r+n-1)/7);return e}}(_t||(_t={}));var Ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,Wt="GET",Ut=function(){function t(t,e,i,n){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof t?(this.url=t,this.type=e?e.toUpperCase():Wt,this.mode=!!F(i)||i):"object"==typeof t&&(this.options=t,_(this,this.options)),this.type=this.type?this.type.toUpperCase():Wt,this.contentType=void 0!==this.contentType?this.contentType:n}return t.prototype.send=function(t){var e=this;this.data=F(t)?this.data:t;var i={cancel:!1,httpRequest:null};return new Promise(function(t,n){e.httpRequest=new XMLHttpRequest,e.httpRequest.onreadystatechange=function(){e.stateChange(t,n)},F(e.onLoad)||(e.httpRequest.onload=e.onLoad),F(e.onProgress)||(e.httpRequest.onprogress=e.onProgress),F(e.onAbort)||(e.httpRequest.onabort=e.onAbort),F(e.onError)||(e.httpRequest.onerror=e.onError),F(e.onUploadProgress)||(e.httpRequest.upload.onprogress=e.onUploadProgress),e.httpRequest.open(e.type,e.url,e.mode),F(e.data)||null===e.contentType||e.httpRequest.setRequestHeader("Content-Type",e.contentType||"application/json; charset=utf-8"),e.beforeSend&&(i.httpRequest=e.httpRequest,e.beforeSend(i)),i.cancel||e.httpRequest.send(F(e.data)?null:e.data)})},t.prototype.successHandler=function(t){return this.onSuccess&&this.onSuccess(t,this),t},t.prototype.failureHandler=function(t){return this.onFailure&&this.onFailure(this.httpRequest),t},t.prototype.stateChange=function(t,e){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(t){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?t(this.successHandler(i)):this.emitError?e(new Error(this.failureHandler(this.httpRequest.statusText))):t())},t.prototype.getResponseHeader=function(t){var e,i;e={};for(var n=Ft.exec(this.httpRequest.getAllResponseHeaders());n;)e[n[1].toLowerCase()]=n[2],n=Ft.exec(this.httpRequest.getAllResponseHeaders());return F(i=e[t.toLowerCase()])?null:i},t}(),Gt=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,qt=/msie|trident/i,Xt=/Trident\/7\./,Yt=/(ipad|iphone|ipod touch)/i,Zt=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,Kt=/android/i,Jt=/trident|windows phone|edge/i,Qt=/(version)[ \/]([\w.]+)/i,$t={OPERA:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ \/]([\w.]+)/i,CHROME:/(chrome|crios)[ \/]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ \/]([\w.]+)/i,SAFARI:/(safari)[ \/]([\w.]+)/i,WEBKIT:/(webkit)[ \/]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!=typeof window&&(window.browserDetails=window.browserDetails||{});var te=function(){function t(){}return t.extractBrowserDetail=function(){for(var e={culture:{}},i=[],n=0,r=Object.keys($t);n<r.length;n++){var o=r[n];if(i=t.userAgent.match($t[o])){if(e.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),e.name="crios"===i[1].toLowerCase()?"chrome":e.name,e.version=i[2],e.culture.name=e.culture.language=navigator.language,t.userAgent.match(Xt)){e.name="msie";break}var s=t.userAgent.match(Qt);"safari"===e.name&&s&&(e.version=s[2]);break}}return e},t.getEvent=function(e){var i={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return t.isPointer?i[e].isPointer:t.isTouch?i[e].isTouch+(t.isDevice?"":" "+i[e].isDevice):i[e].isDevice},t.getTouchStartEvent=function(){return t.getEvent("start")},t.getTouchEndEvent=function(){return t.getEvent("end")},t.getTouchMoveEvent=function(){return t.getEvent("move")},t.getTouchCancelEvent=function(){return t.getEvent("cancel")},t.getValue=function(e,i){var n=window.browserDetails;return void 0===n[e]?n[e]=i.test(t.userAgent):n[e]},Object.defineProperty(t,"userAgent",{get:function(){return t.uA},set:function(e){t.uA=e,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"info",{get:function(){return W(window.browserDetails.info)?window.browserDetails.info=t.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isIE",{get:function(){return t.getValue("isIE",qt)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isTouch",{get:function(){return W(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isPointer",{get:function(){return W(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isMSPointer",{get:function(){return W(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isDevice",{get:function(){return t.getValue("isDevice",Gt)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isIos",{get:function(){return t.getValue("isIos",Yt)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isIos7",{get:function(){return t.getValue("isIos7",Zt)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isAndroid",{get:function(){return t.getValue("isAndroid",Kt)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isWebView",{get:function(){return W(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(W(window.cordova)&&W(window.PhoneGap)&&W(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isWindows",{get:function(){return t.getValue("isWindows",Jt)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"touchStartEvent",{get:function(){return W(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=t.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t,"touchMoveEvent",{get:function(){return W(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=t.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t,"touchEndEvent",{get:function(){return W(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=t.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t,"touchCancelEvent",{get:function(){return W(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=t.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),t.uA="undefined"!=typeof navigator?navigator.userAgent:"",t}(),ee=function(){function t(){}return t.addOrGetEventData=function(t){return"__eventList"in t?t.__eventList.events:(t.__eventList={},t.__eventList.events=[])},t.add=function(e,i,n,r,o){var s,a=t.addOrGetEventData(e);s=o?G(n,o):n,r&&(s=s.bind(r));for(var l=i.split(" "),h=0;h<l.length;h++)a.push({name:l[h],listener:n,debounce:s}),te.isIE?e.addEventListener(l[h],s):e.addEventListener(l[h],s,{passive:!1});return s},t.remove=function(e,i,n){for(var r=t.addOrGetEventData(e),o=i.split(" "),s=function(t){var i,s=-1;r&&0!==r.length&&r.some(function(e,r){return e.name===o[t]&&e.listener===n&&(s=r,i=e.debounce,!0)}),-1!==s&&r.splice(s,1),i&&e.removeEventListener(o[t],i)},a=0;a<o.length;a++)s(a)},t.clearEvents=function(e){var i,n;n=V([],n,i=t.addOrGetEventData(e));for(var r=0;r<n.length;r++)e.removeEventListener(n[r].name,n[r].debounce),i.shift()},t.trigger=function(e,i,n){for(var r=0,o=t.addOrGetEventData(e);r<o.length;r++){var s=o[r];s.name===i&&s.debounce.call(this,n)}},t}(),ie=new RegExp("\\n|\\r|\\s\\s+","g"),ne=new RegExp(/'|"/g),re=new RegExp("if ?\\("),oe=new RegExp("else if ?\\("),se=new RegExp("else"),ae=new RegExp("for ?\\("),le=new RegExp("(/if|/for)"),he=new RegExp("\\((.*)\\)",""),ce=new RegExp("^[0-9]+$","g"),de=new RegExp("[\\w\"'.\\s+]+","g"),pe=new RegExp('"(.*?)"',"g"),ue=new RegExp("[\\w\"'@#$.\\s+]+","g"),fe=new RegExp("\\${([^}]*)}","g"),ge=/^\..*/gm,me=/\\/gi,ye=/\\\\/gi,ve=new RegExp("[\\w\"'@#$.\\s+]+","g"),be=/\window\./gm;function we(t,e){var i=function(t,e,i){var n=0,r=[],o=t.match(/class="([^\"]+|)\s{2}/g),s="";o&&o.forEach(function(e){s=e.replace(/\s\s+/g," "),t=t.replace(e,s)});return t.replace(ie,"").replace(pe,"'$1'").replace(fe,function(t,o,s,a){var l=o.match(he);if(l){var h=l[1];if(oe.test(o))o='";} '+o.replace(l[1],h.replace(de,function(t){return Se(t=t.trim(),!ne.test(t)&&-1===r.indexOf(t),e,r)}))+'{ \n str = str + "';else if(re.test(o))o='"; '+o.replace(l[1],h.replace(ue,function(t){return Pe(t,e,r)}))+'{ \n str = str + "';else if(ae.test(o)){var c=l[1].split(" of ");o='"; '+o.replace(l[1],function(t){return r.push(c[0]),r.push(c[0]+"Index"),"var i"+(n+=1)+"=0; i"+n+" < "+Se(c[1],!0,e,r)+".length; i"+n+"++"})+"{ \n "+c[0]+"= "+Se(c[1],!0,e,r)+"[i"+n+"]; \n var "+c[0]+"Index=i"+n+'; \n str = str + "'}else{var d=o.split("("),p=i&&i.hasOwnProperty(d[0])?"this.":"global";p=/\./.test(d[0])?"":p;var u=l[1].split(",");0===l[1].length||/data/.test(u[0])||/window./.test(u[0])||(l[1]="global"===p?e+"."+l[1]:l[1]);if(be.test(o)&&/\]\./gm.test(o)||/\@|\$|\#/gm.test(o)){/\@|\$|\#|\]\./gm.test(o)&&(o='"+ '+("global"===p?"":p)+o.replace(l[1],h.replace(ve,function(t){return Pe(t,e,r)}))+'+ "')}else o='" + '+("global"===p?"":p)+o.replace(h,Se(l[1].replace(/,( |)data.|,/gi,","+e+".").replace(/,( |)data.window/gi,",window"),"global"!==p,e,r))+'+"'}}else se.test(o)?o='"; '+o.replace(se,'} else { \n str = str + "'):o.match(le)?o=o.replace(le,'"; \n } \n str = str + "'):/\@|\#|\$/gm.test(o)?(o.match(me)&&(o=Ce(o)),o='"+'+xe(o,-1===r.indexOf(o),e,r)+'"]+"'):o=o.match(me)?'"+'+xe(o=Ce(o),-1===r.indexOf(o),e,r)+'"]+"':'"+'+Se(o.replace(/\,/gi,"+"+e+"."),-1===r.indexOf(o),e,r)+'+"';return o})}(t,"data",e);return new Function("data",'var str="'+i+'"; return str;').bind(e)}function Se(t,e,i,n){return e&&!ce.test(t)&&-1===n.indexOf(t.split(".")[0])?i+"."+t:t}function xe(t,e,i,n){return e&&!ce.test(t)&&-1===n.indexOf(t.split(".")[0])?i+'["'+t:t}function Ce(t){return t=t.match(ye)?t:t.replace(me,"\\\\")}function Pe(t,e,i){t=t.trim();if(/\window\./gm.test(t))return t;var n=/'|"/gm;return/\@|\$|\#/gm.test(t)&&(t=xe(t,-1===i.indexOf(t),e,i)+'"]'),ge.test(t)?function(t,e,i,n){return!e||ce.test(t)||-1!==n.indexOf(t.split(".")[0])||/^\..*/gm.test(t)?t:i+"."+t}(t,!n.test(t)&&-1===i.indexOf(t),e,i):Se(t,!n.test(t)&&-1===i.indexOf(t),e,i)}var Oe=/^[\n\r.]+\<tr|^\<tr/,Ee=/^[\n\r.]+\<svg|^\<path|^\<g/,Le={};function Ie(){return"-"+Math.random().toString(36).substr(2,5)}function Te(t,e){var i=Re.compile(t,e);return function(t,e,n,r,o,s){var a=i(t,e,n);if($()&&!o){var l=r+Ie();if(Le[r]||(Le[r]=[]),F(s))t.BlazorTemplateId=l,Le[r].push(t);else for(var h=0,c=Object.keys(Le[r][s]);h<c.length;h++){var d=c[h];"BlazorTemplateId"!==d&&t[d]&&(Le[r][s][d]=t[d]),"BlazorTemplateId"===d&&(l=Le[r][s][d])}return"rowTemplate"===n?[$e("tr",{id:l,className:"e-blazor-template"})]:[$e("div",{id:l,className:"e-blazor-template"})]}return"string"==typeof a?Ee.test(a)?$e("svg",{innerHTML:a}).childNodes:$e(Oe.test(a)?"table":"div",{innerHTML:a}).childNodes:a}}function Ae(t,e,i,n,r){if($()){window.sfBlazor.updateTemplate(e,Le[t],t,i,r),!1!==n&&(Le[t]=[])}}function Be(t,e,i){var n=document.getElementById(t);if(n)for(var r=n.getElementsByClassName("blazor-inner-template"),o=0;o<r.length;o++){var s=" ";s=F(i)?r[o].getAttribute("data-templateId"):r[i].getAttribute("data-templateId");var a=document.getElementById(s);if(a)for(var l=a.childNodes.length,h=0;h<l;h++)F(i)?r[o].appendChild(a.childNodes[0]):(r[i].appendChild(a.childNodes[0]),o=r.length)}}function ke(t){Re.compile=t.compile}function Me(){return Re.compile}var De,Re={compile:(new(function(){function t(){}return t.prototype.compile=function(t,e){return void 0===e&&(e={}),we(t,e)},t}())).compile},ze=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,je=/(?:#([\w-]+)|(\w+)|\.([\w-]+))/g,Ne=/^(\.|#)/,He={".":"className","#":"id"},_e="(?=.*?\\b{value}\\b)",Ve={className:"attributes.className",id:"attributes.id",tagName:"tagName"},Fe=["area","base","basefont","br","col","frame","hr","img","input","link","meta","param","embed","command","keygen","source","track","wbr"],We=["a","address","article","applet","aside","audio","blockquote","button","canvas","center","dd","del","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","ins","isindex","li","map","menu","noframes","noscript","object","ol","output","p","pre","section","script","table","tbody","td","tfoot","th","thead","tr","ul","video"],Ue=["abbr","acronym","applet","b","basefont","bdo","big","br","button","cite","code","del","dfn","em","font","i","iframe","img","input","ins","kbd","label","map","object","q","s","samp","script","select","small","span","strike","strong","sub","sup","textarea","tt","u","var"],Ge=["colgroup","dd","dt","li","options","p","td","tfoot","th","thead","tr"],qe=["checked","compact","declare","defer","disabled","ismap","multiple","nohref","noresize","noshade","nowrap","readonly","selected"],Xe=["Script","style"],Ye={tabindex:"tabIndex"},Ze=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,Ke=/^<\/([-A-Za-z0-9_]+)[^>]*>/,Je=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;!function(t){function e(t,e){e&&t&&t.forEach(function(t){return N(t)&&(t.parent&&i(t),t.parent=e),t})}function i(t){var e=t.parent;if(e){var i=e.children.indexOf(t);-1!==i&&e.children.splice(i)}return e}function n(t,e){var i=t.match(Ne),n={};if(i){var r=He[i[0]];if("className"===r){var o=e.filter(function(t){return t.hasOwnProperty("className")})[0],s=!1;o||(s=!0,o={});var a=o[r]||"";o[r]=a+_e.replace("{value}",t.replace(".","")),s&&e.push(o)}else n[r]=t.replace(i[0],""),e.push(n)}else e.push({tagName:t})}function r(t,e,i,n){if(t.children){var o=t.children.filter(function(t){if("string"!=typeof t){for(var i=!0,n=0,r=e;n<r.length;n++){var o=r[n],s=Object.keys(o)[0],a=o[s],l=R(Ve[s],t);if("className"===s){if(!new RegExp("^"+a+".*$").test(l)){i=!1;break}}else if(l!==a){i=!1;break}}return i}return!1});return n||o.length&&!i||t.children.forEach(function(t){N(t)&&(o=o.concat(r(t,e,i)))}),o}return[]}function o(t){for(var e,i=[],n=[],r=[];t;){e=!0;var o=s(n);if(o&&a(Xe,o))t=t.replace(new RegExp("([\\s\\S]*?)</"+s(r)+"[^>]*>"),function(t,e){return u(e=e.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2")),""}),p("",s(n));else{if(0===t.indexOf("</"))(l=t.match(Ke))&&(t=t.substring(l[0].length),l[0].replace(Ke,p)),e=!1;else if(0===t.indexOf("<")){var l;(l=t.match(Ze))&&(t=t.substring(l[0].length),l[0].replace(Ze,d)),e=!1}if(e){var h=t.indexOf("<"),c=h<0?t:t.substring(0,h);t=h<0?"":t.substring(h),u(c)}}t}function d(t,e,o){if(e=e.toLowerCase(),a(We,e))for(;s(n)&&a(Ue,s(n));)p("",s(n));a(Ge,e)&&s(n)&&p("",e);var l=a(Fe,e);l||n.push(e);var h={};o.replace(Je,function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var r=i[2]?i[2]:i[3]?i[3]:i[4]?i[4]:a(qe,e)?e:"";if("style"===e){for(var o=r.split(";"),s={},l=0,c=o.length;l<c;l++){var d=o[l].split(":");s[d[0]]=d[1]}r=s}e=Ye[e]||e,h[e]=r}),h["data-id"]=Ie();var c={tagName:e,attributes:h};if(l){var d=r[0]||i;void 0===d.children&&(d.children=[]),c.parent=d,d.children.push(c)}else r.unshift(c)}function p(t,e){var o;if(e)for(o=n.length-1;o>=0&&n[o]!==e;o--);else o=0;if(o>=0){for(var s=r.length-1;s>=o;s--){var a=r.shift();if(0===r.length)i.push(a);else{var l=r[0];void 0===l.children&&(l.children=[]),a.parent=l,l.children.push(a)}}n.length=o}}function u(t){if(0===r.length)i.push(t);else{var e=r[0];void 0===e.children&&(e.children=[]),e.children.push(t)}}return i}function s(t){return t[t.length-1]}function a(t,e){return-1!==t.indexOf(e)}t.createElement=function(t,e){var i=[],n=V({},{},e,!0);if(!F(e)&&Object.keys(e).length&&(n.innerHTML&&(i=o(n.innerHTML),delete n.innerHTML),n.attrs&&(V(n,n.attrs),delete n.attrs),n.styles)){for(var r=n.styles.split(";"),s={},a=0,l=r.length;a<l;a++){var h=r[a].split(":");s[h[0]]=h[1]}delete n.styles,n.style=s}return{tagName:t,attributes:n||{},children:i}},t.assignParent=e,t.append=function(t,i){e(t,i),i.children?i.children=i.children.concat(t):i.children=[].concat(t)},t.prepend=function(t,i){if(e(t,i),i.children&&i.children.length)for(var n=t.length-1;n>=0;n--)i.children.unshift(t[n]);else i.children=[],i.children.concat(t)},t.detach=i,t.vDomSelector=function t(e){for(var i=e.ele,o=e.selector,s=e.selectAll,a=e.immediateParent,l=o.split(" "),h=i,c=0,d=l.length;c<d;c++){var p=!1,u=h,f=l[c],g=[];if(ze.test(f))n(f,g);else if(-1===f.indexOf(">"))for(var m=0,y=f.match(je);m<y.length;m++)n(y[m],g);else if(-1!==f.indexOf(">")){p=!0;for(var v=i,b=void 0,w=0,S=0,x=f.split(">");S<x.length;S++){var C=x[S];if(!v)break;if(v.length){for(var P=[],O=0,E=v;O<E.length;O++){var L=E[O];P=P.concat(t({ele:L,selector:C,selectAll:s,immediateParent:!!w}))}b=P}else b=t({ele:v,selector:C,selectAll:s,immediateParent:!!w});w++,v=b}b&&(h=b)}if(!p)if(u.length){for(var I=[],T=0,A=u;T<A.length;T++){var B=A[T];I=I.concat(r(B,g,s,a))}h=I}else h=r(u,g,s,a)}return s?h:h[0]||null},t.accessElement=r,t.ConvertHTMLToJSon=o,t.cloneNode=function(t,e){return N(t)?e?V({},{},t,!0):{tagName:t.tagName,attributes:t.attributes}:t.cloneNode(e)},t.setStyleAttribute=function(t,e){t.attributes.style?t.attributes.style=V({},e):t.attributes.style=V(t.attributes.style,e)}}(De||(De={}));var Qe=/^svg|^path|^g/;function $e(t,e){var i=Qe.test(t)?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return void 0===e?i:(i.innerHTML=e.innerHTML?e.innerHTML:"",void 0!==e.className&&(i.className=e.className),void 0!==e.id&&(i.id=e.id),void 0!==e.styles&&i.setAttribute("style",e.styles),void 0!==e.attrs&&hi(i,e.attrs),i)}function ti(t,e){for(var i=ii(e),n=0,r=t;n<r.length;n++)for(var o=r[n],s=0,a=i;s<a.length;s++){var l=a[s];if(N(o)){var h=R("attributes.className",o);F(h)?z("attributes.className",l,o):new RegExp("\\b"+l+"\\b","i").test(h)||z("attributes.className",h+" "+l,o)}else o.classList.contains(l)||o.classList.add(l)}return t}function ei(t,e){for(var i=ii(e),n=0,r=t;n<r.length;n++){var o=r[n],s=N(o);if(s?R("attributes.className",o):""!==o.className)for(var a=0,l=i;a<l.length;a++){var h=l[a];if(s){var c=R("attributes.className",o).split(" "),d=c.indexOf(h);-1!==d&&c.splice(d,1),z("attributes.className",c.join(" "),o)}else o.classList.remove(h)}}return t}function ii(t){var e=[];return"string"==typeof t?e.push(t):e=t,e}function ni(t){var e=t;return""===e.style.visibility&&e.offsetWidth>0}function ri(t,e,i){if(N(e))De.prepend(t,e);else{for(var n=document.createDocumentFragment(),r=0,o=t;r<o.length;r++){var s=o[r];n.appendChild(s)}e.insertBefore(n,e.firstElementChild),i&&si(e)}return t}function oi(t,e,i){if(N(e))De.append(t,e);else{for(var n=document.createDocumentFragment(),r=0,o=t;r<o.length;r++){var s=o[r];n.appendChild(s)}e.appendChild(n),i&&si(e)}return t}function si(t){t.querySelectorAll("script").forEach(function(t){var e=document.createElement("script");e.text=t.innerHTML,document.head.appendChild(e),ai(e)})}function ai(t){return N(t)?De.detach(t):t.parentNode.removeChild(t)}function li(t){if(N(t))De.detach(t);else{var e=t.parentNode;ee.clearEvents(t),e.removeChild(t)}}function hi(t,e){for(var i=t,n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];if(N(i)){var s=o;"tabindex"===o&&(s="tabIndex"),i.attributes[s]=e[o]}else i.setAttribute(o,e[o])}return i}function ci(t,e,i){return void 0===e&&(e=document),N(e)&&i?De.vDomSelector({ele:e,selector:t,selectAll:!1}):e.querySelector(t)}function di(t,e,i){return void 0===e&&(e=document),N(e)&&!i?De.vDomSelector({ele:e,selector:t,selectAll:!0}):e.querySelectorAll(t)}function pi(t,e){var i=t;if("function"==typeof i.closest)return i.closest(e);for(;i&&1===i.nodeType;){if(yi(i,e))return i;i=i.parentNode}return null}function ui(t){for(var e=[],i=0,n=Array.prototype.slice.call(t.parentNode.childNodes);i<n.length;i++){var r=n[i];r.nodeType===Node.ELEMENT_NODE&&t!==r&&e.push(r)}return e}function fi(t,e,i){var n,r=N(t);return F(n=r?R("attributes."+e,t):t.getAttribute(e))&&i&&(r?t.attributes[e]=i:t.setAttribute(e,i.toString()),n=i),n}function gi(t,e){void 0!==e&&(N(t)?De.setStyleAttribute(t,e):Object.keys(e).forEach(function(i){t.style[i]=e[i]}))}function mi(t,e,i){ti([t],e),ei([t],i)}function yi(t,e){var i=t.matches||t.msMatchesSelector||t.webkitMatchesSelector;return i?i.call(t,e):-1!==[].indexOf.call(document.querySelectorAll(e),t)}function vi(t,e){if(N(t))if(""===e)t.children=[];else{var i=De.ConvertHTMLToJSon(e);i.length&&(De.assignParent(i,t),t.children=i)}else t.innerHTML=e}function bi(t,e){return N(t)?new RegExp("\\b"+e+"\\b","i").test(t.attributes.className):t.classList.contains(e)}function wi(t,e){return N(t)?e?V({},{},t,!0):{tagName:t.tagName,attributes:t.attributes}:t.cloneNode(e)}var Si=new RegExp("]"),xi=function(){function t(t,e){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new Ot(this),W(e)||(this.element="string"==typeof e?document.querySelector(e):e,F(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),W(t)||this.setProperties(t,!0),this.isDestroyed=!1}return t.prototype.setProperties=function(t,e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!e,_(this,t),!0!==e?(_(this.changedProperties,t),this.dataBind()):$()&&this.isRendered&&this.serverDataBind(t),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},t.callChildDataBind=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];if(e[r]instanceof Array)for(var o=0,s=e[r];o<s.length;o++){var a=s[o];void 0!==a.dataBind&&a.dataBind()}else e[r].dataBind()}},t.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},t.prototype.dataBind=function(){if(t.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var e=this.isProtectedOnChange,i=this.changedProperties,n=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(i,n),this.isProtectedOnChange=e}},t.prototype.serverDataBind=function(t){if($()&&(t=t||{},V(this.bulkChanges,{},t,!0),this.allowServerDataBinding)){window.sfBlazor.updateModel(this),this.bulkChanges={}}},t.prototype.saveChanges=function(t,e,i){if($()){var n={};n[t]=e,this.serverDataBind(n)}this.isProtectedOnChange||(this.oldProperties[t]=i,this.changedProperties[t]=e,this.finalUpdate(),this.finalUpdate=D(this.dataBind.bind(this)))},t.prototype.addEventListener=function(t,e){this.modelObserver.on(t,e)},t.prototype.removeEventListener=function(t,e){this.modelObserver.off(t,e)},t.prototype.trigger=function(t,e,i,n){var r=this;if(!0!==this.isDestroyed){var o=this.isProtectedOnChange;this.isProtectedOnChange=!1;var s=this.modelObserver.notify(t,e,i,n);if(Si.test(t)){var a=R(t,this);if(a){if(window.Blazor){var l=a.call(this,e);l&&"function"==typeof l.then?i?l.then(function(t){i&&(t="string"==typeof t&&r.modelObserver.isJson(t)?JSON.parse(t):t,i.call(r,t))}).catch(function(t){n&&(t="string"==typeof t&&r.modelObserver.isJson(t)?JSON.parse(t):t,n.call(r,t))}):s=l:i&&i.call(this,e)}else a.call(this,e),i&&i.call(this,e)}else i&&i.call(this,e)}return this.isProtectedOnChange=o,s}},t.prototype.addInstance=function(){var t="e-"+this.getModuleName().toLowerCase();ti([this.element],["e-lib",t]),F(this.element.ej2_instances)?z("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},t.prototype.destroy=function(){var t=this;this.element.ej2_instances=this.element.ej2_instances.filter(function(e){return e!==t}),ei([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&ei([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},t}();function Ci(t,e){var i,n,r="string"==typeof t?document.getElementById(t):t;for(n=0;n<r.ej2_instances.length;n++){if(i=r.ej2_instances[n],"string"==typeof e){if(e===i.getModuleName())return i}else if(i instanceof e)return i}}function Pi(t){for(var e=[].slice.call(t.getElementsByClassName("e-control")),i=0;i<e.length;i++){var n=e[i].classList[1].split("e-")[1],r=Ci(e[i],n);W(r)||r.destroy()}}function Oi(t,e,i,n){return t.properties.hasOwnProperty(e)&&t.properties[e]instanceof n||(t.properties[e]=M(n,[t,e,i])),t.properties[e]}function Ei(t,e,i,n,r,o){for(var s=[],a=i?i.length:0,l=0;l<a;l++){var h=n;if(o&&(h=n(i[l],t)),r){var c=M(h,[t,e,{},!0]);c.setProperties(i[l],!0),s.push(c)}else s.push(M(h,[t,e,i[l],!1]))}return s}function Li(t,e){return function(){return this.properties.hasOwnProperty(e)||(this.properties[e]=t),this.properties[e]}}function Ii(t,e){return function(i){if(this.properties[e]!==i){var n=this.properties.hasOwnProperty(e)?this.properties[e]:t;this.saveChanges(e,i,n),this.properties[e]=i}}}function Ti(t,e,i){return function(){return Oi(this,e,t,i)}}function Ai(t,e,i){return function(n){Oi(this,e,t,i).setProperties(n)}}function Bi(t,e,i){return function(){var n=i({});return this.properties.hasOwnProperty(e)?this.properties[e]:Oi(this,e,t,n)}}function ki(t,e,i){return function(n){var r=i(n,this);Oi(this,e,t,r).setProperties(n)}}function Mi(t,e,i){return function(){var n=this;if(!this.properties.hasOwnProperty(e)){var r=Ei(this,e,t,i,!1);this.properties[e]=r}var o=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return this.properties[e].hasOwnProperty("push")||o||["push","pop"].forEach(function(t){var r={value:ji(t,e,i,n.properties[e]).bind(n),configurable:!0};Object.defineProperty(n.properties[e],t,r)}),this.properties[e].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[e],"isComplexArray",{value:!0}),this.properties[e]}}function Di(t,e,i){return function(n){this.isComplexArraySetter=!0;var r=Ei(this,e,t,i,!1),o=Ei(this,e,n,i,!0);this.isComplexArraySetter=!1,this.saveChanges(e,o,r),this.properties[e]=o}}function Ri(t,e,i){return function(n){var r=this.properties.hasOwnProperty(e)?this.properties[e]:t,o=Ei(this,e,n,i,!0,!0);this.saveChanges(e,o,r),this.properties[e]=o}}function zi(t,e,i){return function(){var n=i({});if(!this.properties.hasOwnProperty(e)){var r=Ei(this,e,t,n,!1);this.properties[e]=r}return this.properties[e]}}function ji(t,e,i,n){return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var o=this.propName?this.getParentKey()+"."+e+"-":e+"-";switch(t){case"push":for(var s=0;s<i.length;s++){Array.prototype[t].apply(n,[i[s]]);var a=Ni(o+(n.length-1),i[s],!this.controlParent,t);this.serverDataBind(a,i[s],!1,t)}break;case"pop":Array.prototype[t].apply(n);var l=Ni(o+n.length,null,!this.controlParent,t);this.serverDataBind(l,{ejsAction:"pop"},!1,t)}return n}}function Ni(t,e,i,n){var r=t;if(i&&((r={})[t]=e,e&&"object"==typeof e)){r[t].ejsAction=n}return r}function Hi(t){return function(e,i){var n={set:Ii(t,i),get:Li(t,i),enumerable:!0,configurable:!0};Object.defineProperty(e,i,n),qi(e,i,"prop",t)}}function _i(t,e){return function(i,n){var r={set:Ai(t,n,e),get:Ti(t,n,e),enumerable:!0,configurable:!0};Object.defineProperty(i,n,r),qi(i,n,"complexProp",t,e)}}function Vi(t){return function(e,i){var n={set:ki({},i,t),get:Bi({},i,t),enumerable:!0,configurable:!0};Object.defineProperty(e,i,n),qi(e,i,"complexProp",{},t)}}function Fi(t,e){return function(i,n){var r={set:Di(t,n,e),get:Mi(t,n,e),enumerable:!0,configurable:!0};Object.defineProperty(i,n,r),qi(i,n,"colProp",t,e)}}function Wi(t){return function(e,i){var n={set:Ri([],i,t),get:zi([],i,t),enumerable:!0,configurable:!0};Object.defineProperty(e,i,n),qi(e,i,"colProp",{},t)}}function Ui(){return function(t,e){var i={set:function(t){var i=this.properties[e];if(i!==t){var n=function t(e,i){if(!1===e.hasOwnProperty("parentObj"))return{context:e,prefix:i};var n=R("propName",e);return n&&(i=n+"-"+i),t(R("parentObj",e),i)}(this,e);!1===W(i)&&n.context.removeEventListener(n.prefix,i),n.context.addEventListener(n.prefix,t),this.properties[e]=t}},get:Li(void 0,e),enumerable:!0,configurable:!0};Object.defineProperty(t,e,i),qi(t,e,"event")}}function Gi(t){}function qi(t,e,i,n,r){W(t.propList)&&(t.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),t.propList[i+"s"].push({propertyName:e,defaultValue:n,type:r}),t.propList[i+"Names"].push(e)}function Xi(t){var e=function(t){return this.element=t,this};return function(i){return e.prototype.hasOwnProperty("create")||((e.prototype=function t(e){if(W(e.prototype.builderObject)){e.prototype.builderObject={properties:{},propCollections:[],add:function(){this.isPropertyArray=!0,this.propCollections.push(V({},this.properties,{}))}};for(var i=/complex/,n=0,r=Object.keys(e.prototype.propList);n<r.length;n++)for(var o=r[n],s=function(n){i.test(o)?e.prototype.builderObject[n.propertyName]=function(e){var i,r={};return _(r,t(n.type)),e(r),i=r.isPropertyArray?r.propCollections:V({},r.properties,{}),this.properties[n.propertyName]=i,r.properties={},r.propCollections=[],r.isPropertyArray=!1,this}:e.prototype.builderObject[n.propertyName]=function(t){return this.properties[n.propertyName]=t,this}},a=0,l=e.prototype.propList[o];a<l.length;a++)s(l[a])}return e.prototype.builderObject}(t)).create=function(){var e=V({},{},this.properties);return this.properties={},new t(e,this.element)}),new e(i)}}var Yi,Zi=(Yi=function(t,e){return(Yi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Yi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Ki=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Ji=function(t){function e(e){var i=t.call(this,e,void 0)||this;return i.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},i}var i;return Zi(e,t),i=e,e.prototype.animate=function(t,e){e=e||{};var n=this.getModel(e);if("string"==typeof t)for(var r=0,o=Array.prototype.slice.call(di(t,document));r<o.length;r++){var s=o[r];n.element=s,i.delayAnimation(n)}else n.element=t,i.delayAnimation(n)},e.stop=function(t,e){t.style.animation="",t.removeAttribute("e-animate");var i=t.getAttribute("e-animation-id");if(i){var n=parseInt(i,10);cancelAnimationFrame(n),t.removeAttribute("e-animation-id")}e&&e.end&&e.end.call(this,e)},e.delayAnimation=function(t){t.delay?setTimeout(function(){i.applyAnimation(t)},t.delay):i.applyAnimation(t)},e.applyAnimation=function(t){var e=this;t.timeStamp=0;var i=0,n=0,r=0,o=t.duration;t.element.setAttribute("e-animate","true");var s=function(a){try{if(a){r=0===r?a:r,t.timeStamp=a+t.timeStamp-r,r=a,!i&&t.begin&&t.begin.call(e,t),i+=1;var l=t.timeStamp/i;t.timeStamp<o&&t.timeStamp+l<o&&t.element.getAttribute("e-animate")?(t.element.style.animation=t.name+" "+t.duration+"ms "+t.timingFunction,t.progress&&t.progress.call(e,t),requestAnimationFrame(s)):(cancelAnimationFrame(n),t.element.removeAttribute("e-animation-id"),t.element.removeAttribute("e-animate"),t.element.style.animation="",t.end&&t.end.call(e,t))}else performance.now(),n=requestAnimationFrame(s),t.element.setAttribute("e-animation-id",n.toString())}catch(i){cancelAnimationFrame(n),t.element.removeAttribute("e-animation-id"),t.fail&&t.fail.call(e,i)}};s()},e.prototype.getModel=function(t){return{name:t.name||this.name,delay:t.delay||this.delay,duration:void 0!==t.duration?t.duration:this.duration,begin:t.begin||this.begin,end:t.end||this.end,fail:t.fail||this.fail,progress:t.progress||this.progress,timingFunction:this.easing[t.timingFunction]?this.easing[t.timingFunction]:t.timingFunction||this.easing[this.timingFunction]}},e.prototype.onPropertyChanged=function(t,e){},e.prototype.getModuleName=function(){return"animation"},e.prototype.destroy=function(){},Ki([Hi("FadeIn")],e.prototype,"name",void 0),Ki([Hi(400)],e.prototype,"duration",void 0),Ki([Hi("ease")],e.prototype,"timingFunction",void 0),Ki([Hi(0)],e.prototype,"delay",void 0),Ki([Ui()],e.prototype,"progress",void 0),Ki([Ui()],e.prototype,"begin",void 0),Ki([Ui()],e.prototype,"end",void 0),Ki([Ui()],e.prototype,"fail",void 0),e=i=Ki([Gi],e)}(xi);function Qi(t,e,i){var n=function(t){return{selector:t&&t.selector?t.selector:null,ignore:t&&t.ignore?t.ignore:null,rippleFlag:t&&t.rippleFlag,isCenterRipple:t&&t.isCenterRipple,duration:t&&t.duration?t.duration:350}}(e);return!1===n.rippleFlag||void 0===n.rippleFlag&&!rn?Function:(t.setAttribute("data-ripple","true"),ee.add(t,"mousedown",$i,{parent:t,rippleOptions:n}),ee.add(t,"mouseup",tn,{parent:t,rippleOptions:n,done:i}),ee.add(t,"mouseleave",en,{parent:t,rippleOptions:n}),te.isPointer&&ee.add(t,"transitionend",en,{parent:t,rippleOptions:n}),function(){t.removeAttribute("data-ripple"),ee.remove(t,"mousedown",$i),ee.remove(t,"mouseup",tn),ee.remove(t,"mouseleave",en),ee.remove(t,"transitionend",en)})}function $i(t){var e=t.target,i=this.rippleOptions.selector,n=i?pi(e,i):e;if(!(!n||this.rippleOptions&&pi(e,this.rippleOptions.ignore))){var r=n.getBoundingClientRect(),o=t.pageX-document.body.scrollLeft,s=t.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),a=Math.max(Math.abs(o-r.left),Math.abs(o-r.right)),l=Math.max(Math.abs(s-r.top),Math.abs(s-r.bottom)),h=Math.sqrt(a*a+l*l),c=2*h+"px",d=o-r.left-h,p=s-r.top-h;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(d=0,p=0,c="100%"),n.classList.add("e-ripple");var u=$e("div",{className:"e-ripple-element",styles:"width: "+c+";height: "+c+";left: "+d+"px;top: "+p+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});n.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)",n!==this.parent&&ee.add(n,"mouseleave",en,{parent:this.parent,rippleOptions:this.rippleOptions})}}function tn(t){nn(t,this)}function en(t){nn(t,this)}function nn(t,e){var i=e.rippleOptions.duration,n=t.target,r=e.rippleOptions.selector,o=r?pi(n,r):n;if(o&&(!o||-1!==o.className.indexOf("e-ripple"))){var s=di(".e-ripple-element",o),a=s[s.length-1];a&&(a.style.opacity="0.5"),e.parent!==o&&ee.remove(o,"mouseleave",en),setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a),o.getElementsByClassName("e-ripple-element").length||o.classList.remove("e-ripple"),e.done&&e.done(t)},i)}}var rn=!1;function on(t){return rn=t}var sn,an=function(){function t(t){this.loadedModules=[],this.parent=t}return t.prototype.inject=function(t,e){var i=t.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(t);for(var n=0;n<i;n++)for(var r=t[n],o=0,s=e;o<s.length;o++){var a=s[o],l=r.member;if(a.prototype.getModuleName()===r.member&&!this.isModuleLoaded(l)){var h=M(a,r.args),c=this.getMemberName(l);r.isProperty?z(c,a,this.parent):z(c,h,this.parent);var d=r;d.member=c,this.loadedModules.push(d)}}}else this.clean()},t.prototype.clean=function(){for(var t=0,e=this.loadedModules;t<e.length;t++){var i=e[t];i.isProperty||R(i.member,this.parent).destroy()}this.loadedModules=[]},t.prototype.clearUnusedModule=function(t){for(var e=this,i=t.map(function(t){return e.getMemberName(t.member)}),n=0,r=this.loadedModules.filter(function(t){return-1===i.indexOf(t.member)});n<r.length;n++){var o=r[n];o.isProperty||R(o.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(o),1),j(this.parent,o.member)}},t.prototype.getMemberName=function(t){return t[0].toLowerCase()+t.substring(1)+"Module"},t.prototype.isModuleLoaded=function(t){for(var e=0,i=this.loadedModules;e<i.length;e++){if(i[e].member===this.getMemberName(t))return!0}return!1},t}(),ln=function(){function t(t,e,i,n){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=R("callChildDataBind",xi),this.parentObj=t,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=e,this.isParentArray=n,this.setProperties(i,!0)}return t.prototype.updateChange=function(t,e){!0===t?this.parentObj.childChangedProperties[e]=t:delete this.parentObj.childChangedProperties[e],this.parentObj.updateChange&&this.parentObj.updateChange(t,this.parentObj.propName)},t.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var t=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(t)}}},t.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},t.prototype.setProperties=function(t,e){!0===e?(_(this,t),this.updateChange(!1,this.propName),this.clearChanges()):_(this,t)},t.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var t=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(z(this.propName+"."+t,this.changedProperties,this.parentObj.changedProperties),z(this.propName+"."+t,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},t.prototype.saveChanges=function(t,e,i,n){this.controlParent.isProtectedOnChange||(n||this.serverDataBind(t,e,!0),this.oldProperties[t]=i,this.changedProperties[t]=e,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},t.prototype.serverDataBind=function(t,e,i,n){if($()&&!this.parentObj.isComplexArraySetter){var r,o={},s=i?this.getParentKey(!0)+"."+t:t;if(-1!==s.indexOf(".")){var a=s.split(".");r=o;for(var l=0;l<a.length;l++){var h=l===a.length-1;r[a[l]]=h?e:{},r=h?r:r[a[l]]}}else o[s]={},r=o[s],o[s][t]=e;if(this.isParentArray){r.ejsAction=n||"none"}this.controlParent.serverDataBind(o)}},t.prototype.getParentKey=function(t){var e="",i=this.propName;if(this.isParentArray){e=this.parentObj[this.propName].indexOf(this);var n=this.parentObj[this.propName].length;n=t?n:n>0?n-1:0,i+=e=-1!==e?"-"+e:"-"+n}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+e),i},t}(),hn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cn=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},dn=0,pn=0,un=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.randomId=nt(),n.isStringTemplate=!1,n.needsID=!1,n.isReactHybrid=!1,F(n.enableRtl)&&n.setProperties({enableRtl:Lt},!0),F(n.locale)&&n.setProperties({locale:Tt},!0),n.moduleLoader=new an(n),n.localObserver=new Ot(n),Et.on("notifyExternalChange",n.detectFunction,n,n.randomId),W(i)||n.appendTo(),n}return hn(e,t),e.prototype.requiredModules=function(){return[]},e.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(ei([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),t.prototype.destroy.call(this),this.moduleLoader.clean(),Et.off("notifyExternalChange",this.detectFunction,this.randomId)))},e.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new Ot(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},e.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},e.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},e.prototype.appendTo=function(e){if(F(e)||"string"!=typeof e?F(e)||(this.element=e):this.element=document.querySelector(e),!F(this.element)){var i="e-"+this.getModuleName().toLowerCase();ti([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var n=R("ej2_instances",this.element);n&&-1!==n.indexOf(this)||t.prototype.addInstance.call(this),this.preRender(),this.injectModules(),this.render(),this.mount?this.accessMount():this.trigger("created")}},e.prototype.renderComplete=function(t){if($()){window.sfBlazor.renderComplete(this.element,t)}this.isRendered=!0},e.prototype.dataBind=function(){this.injectModules(),t.prototype.dataBind.call(this)},e.prototype.on=function(t,e,i){if("string"==typeof t)this.localObserver.on(t,e,i);else for(var n=0,r=t;n<r.length;n++){var o=r[n];this.localObserver.on(o.event,o.handler,o.context)}},e.prototype.off=function(t,e){if("string"==typeof t)this.localObserver.off(t,e);else for(var i=0,n=t;i<n.length;i++){var r=n[i];this.localObserver.off(r.event,r.handler)}},e.prototype.notify=function(t,e){!0!==this.isDestroyed&&this.localObserver.notify(t,e)},e.prototype.getInjectedModules=function(){return this.injectedModules},e.Inject=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var i=0;i<t.length;i++)-1===this.prototype.injectedModules.indexOf(t[i])&&this.prototype.injectedModules.push(t[i])},e.prototype.createElement=function(t,e,i){return i&&this.isReactHybrid?(e&&(e={}),e["data-id"]=Ie(),De.createElement(t,e)):$e(t,e)},e.prototype.triggerStateChange=function(t,e){this.isReactHybrid&&(this.setState(),this.currentContext={calls:t,args:e})},e.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},e.prototype.detectFunction=function(t){var e=Object.keys(t);e.length&&(this[e[0]]=t[e[0]])},e.prototype.mergePersistData=function(){var t=window.localStorage.getItem(this.getModuleName()+this.element.id);F(t)||""===t||this.setProperties(JSON.parse(t),!0)},e.prototype.setPersistData=function(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())},e.prototype.clearTemplate=function(t,e){},e.prototype.getUniqueID=function(t){return this.isHistoryChanged()&&(dn=0),sn=this.pageID(location.href),pn=history.length,t+"_"+sn+"_"+dn++},e.prototype.pageID=function(t){var e=0;if(0===t.length)return e;for(var i=0;i<t.length;i++){e=(e<<5)-e+t.charCodeAt(i),e&=e}return Math.abs(e)},e.prototype.isHistoryChanged=function(){return sn!==this.pageID(location.href)||pn!==history.length},e.prototype.addOnPersist=function(t){for(var e=this,i={},n=0,r=t;n<r.length;n++){var o,s=r[n];W(o=R(s,this))||z(s,this.getActualProperties(o),i)}return JSON.stringify(i,function(t,i){return e.getActualProperties(i)})},e.prototype.getActualProperties=function(t){return t instanceof ln?R("properties",t):t},e.prototype.ignoreOnPersist=function(t){return JSON.stringify(this.iterateJsonProperties(this.properties,t))},e.prototype.iterateJsonProperties=function(t,e){for(var i={},n=function(n){if(-1===e.indexOf(n)){var o=t[n];if("object"!=typeof o||o instanceof Array)i[n]=o;else{var s=e.filter(function(t){return new RegExp(n+".").test(t)}).map(function(t){return t.replace(n+".","")});i[n]=r.iterateJsonProperties(r.getActualProperties(o),s)}}},r=this,o=0,s=Object.keys(t);o<s.length;o++){n(s[o])}return i},cn([Hi(!1)],e.prototype,"enablePersistence",void 0),cn([Hi()],e.prototype,"enableRtl",void 0),cn([Hi()],e.prototype,"locale",void 0),e=cn([Gi],e)}(xi);"undefined"!=typeof window&&window.addEventListener("popstate",function(){dn=0});var fn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gn=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},mn={left:0,top:0,bottom:0,right:0},yn={isDragged:!1},vn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fn(e,t),gn([Hi(0)],e.prototype,"left",void 0),gn([Hi(0)],e.prototype,"top",void 0),e}(ln),bn=function(t){function e(e,n){var r=t.call(this,n,e)||this;return r.dragLimit=i.getDefaultPosition(),r.borderWidth=i.getDefaultPosition(),r.padding=i.getDefaultPosition(),r.diffX=0,r.prevLeft=0,r.prevTop=0,r.dragProcessStarted=!1,r.tapHoldTimer=0,r.externalInitialize=!1,r.diffY=0,r.parentScrollX=0,r.parentScrollY=0,r.droppables={},r.bind(),r}var i;return fn(e,t),i=e,e.prototype.bind=function(){this.toggleEvents(),te.isIE&&ti([this.element],"e-block-touch"),this.droppables[this.scope]={}},e.getDefaultPosition=function(){return V({},mn)},e.prototype.toggleEvents=function(t){var e;W(this.handle)||(e=ci(this.handle,this.element));var i=this.enableTapHold&&te.isDevice&&te.isTouch?this.mobileInitialize:this.initialize;t?ee.remove(e||this.element,te.touchStartEvent,i):ee.add(e||this.element,te.touchStartEvent,i,this)},e.prototype.mobileInitialize=function(t){var e=this,i=t.currentTarget;this.tapHoldTimer=setTimeout(function(){e.externalInitialize=!0,e.removeTapholdTimer(),e.initialize(t,i)},this.tapHoldThreshold),ee.add(document,te.touchMoveEvent,this.removeTapholdTimer,this),ee.add(document,te.touchEndEvent,this.removeTapholdTimer,this)},e.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),ee.remove(document,te.touchMoveEvent,this.removeTapholdTimer),ee.remove(document,te.touchEndEvent,this.removeTapholdTimer)},e.prototype.getScrollableParent=function(t,e){return F(t)?null:t[{vertical:"scrollHeight",horizontal:"scrollWidth"}[e]]>t[{vertical:"clientHeight",horizontal:"clientWidth"}[e]]&&("vertical"===e?t.scrollTop>0:t.scrollLeft>0)?("vertical"===e?this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?t.scrollTop:t.scrollTop-this.parentScrollY):this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?t.scrollLeft:t.scrollLeft-this.parentScrollX),F(t)?t:this.getScrollableParent(t.parentNode,e)):this.getScrollableParent(t.parentNode,e)},e.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0;this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},e.prototype.initialize=function(t,e){if(this.currentStateTarget=t.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=t.currentTarget||e,this.dragProcessStarted=!1,this.abort){var i=this.abort;"string"==typeof i&&(i=[i]);for(var n=0;n<i.length;n++)if(!F(pi(t.target,i[n])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!W(t.changedTouches)&&t.preventDefault(),this.element.setAttribute("aria-grabbed","true");var r=this.getCoordinates(t);if(this.initialPosition={x:r.pageX,y:r.pageY},!this.clone){var o=this.element.getBoundingClientRect();this.getScrollableValues(),t.clientX===t.pageX&&(this.parentScrollX=0),t.clientY===t.pageY&&(this.parentScrollY=0),this.relativeXPosition=r.pageX-(o.left+this.parentScrollX),this.relativeYPosition=r.pageY-(o.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(t):(ee.add(document,te.touchMoveEvent,this.intDragStart,this),ee.add(document,te.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,ee.trigger(document.documentElement,te.touchStartEvent,t)}},e.prototype.intDragStart=function(t){this.removeTapholdTimer();var e=!W(t.changedTouches);if(!e||1===t.changedTouches.length){e&&t.preventDefault();var i,n=this.getCoordinates(t),r=getComputedStyle(this.element);this.margin={left:parseInt(r.marginLeft,10),top:parseInt(r.marginTop,10),right:parseInt(r.marginRight,10),bottom:parseInt(r.marginBottom,10)};var o=this.element;if(this.clone&&this.dragTarget){var s=pi(t.target,this.dragTarget);F(s)||(o=s)}this.offset=this.calculateParentPosition(o),this.position=this.getMousePosition(t,this.isDragScroll);var a=this.initialPosition.x-n.pageX,l=this.initialPosition.y-n.pageY;if(Math.sqrt(a*a+l*l)>=this.distance||this.externalInitialize){var h=this.getHelperElement(t);if(!h||F(h))return;var c=this.helperElement=h;if(this.parentClientRect=this.calculateParentPosition(c.offsetParent),this.dragStart){var d={event:t,element:o,target:this.getProperTargetElement(t),bindEvents:$()?this.bindDragEvents.bind(this):null,dragElement:c};this.trigger("dragStart",d)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),i={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var p=this.getProcessedPositionValue({top:i.top-this.diffY+"px",left:i.left-this.diffX+"px"});this.dragElePosition={top:i.top,left:i.left},gi(c,this.getDragPosition({position:"absolute",left:p.left,top:p.top})),ee.remove(document,te.touchMoveEvent,this.intDragStart),ee.remove(document,te.touchEndEvent,this.intDestroy),$()||this.bindDragEvents(c)}}},e.prototype.bindDragEvents=function(t){ni(t)?(ee.add(document,te.touchMoveEvent,this.intDrag,this),ee.add(document,te.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,t)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},e.prototype.elementInViewport=function(t){for(this.top=t.offsetTop,this.left=t.offsetLeft,this.width=t.offsetWidth,this.height=t.offsetHeight;t.offsetParent;)t=t.offsetParent,this.top+=t.offsetTop,this.left+=t.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},e.prototype.getProcessedPositionValue=function(t){return this.queryPositionInfo?this.queryPositionInfo(t):t},e.prototype.calculateParentPosition=function(t){if(F(t))return{left:0,top:0};var e=t.getBoundingClientRect(),i=getComputedStyle(t);return{left:e.left+window.pageXOffset-parseInt(i.marginLeft,10),top:e.top+window.pageYOffset-parseInt(i.marginTop,10)}},e.prototype.intDrag=function(t){if(W(t.changedTouches)||1===t.changedTouches.length){var e,i;this.position=this.getMousePosition(t,this.isDragScroll);var n=this.getDocumentWidthHeight("Height");n<this.position.top&&(this.position.top=n);var r=this.getDocumentWidthHeight("Width");if(r<this.position.left&&(this.position.left=r),this.drag){var o=this.getProperTargetElement(t);this.trigger("drag",{event:t,element:this.element,target:o})}var s=this.checkTargetElement(t);if(s.target&&s.instance){var a=!0;this.hoverObject&&(this.hoverObject.instance!==s.instance?this.triggerOutFunction(t,s):a=!1),a&&(s.instance.dragData[this.scope]=this.droppables[this.scope],s.instance.intOver(t,s.target),this.hoverObject=s)}else this.hoverObject&&this.triggerOutFunction(t,s);var l=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var h=this.parentClientRect.left,c=this.parentClientRect.top,d=this.getCoordinates(t),p=d.pageX,u=d.pageY,f=this.position.left-this.diffX,g=this.position.top-this.diffY;if(this.dragArea){var m=getComputedStyle(l);if(this.pageX!==p||this.skipDistanceCheck){var y=l.offsetWidth+(parseFloat(m.marginLeft)+parseFloat(m.marginRight));e=this.dragLimit.left>f&&f>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<f+y&&f>0?f-(f-this.dragLimit.right)+window.pageXOffset-y:f<0?this.dragLimit.left:f}if(this.pageY!==u||this.skipDistanceCheck){var v=l.offsetHeight+(parseFloat(m.marginTop)+parseFloat(m.marginBottom));i=this.dragLimit.top>g&&g>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<g+v&&g>0?g-(g-this.dragLimit.bottom)+window.pageYOffset-v:g<0?this.dragLimit.top:g}}else e=f,i=g;var b,w,S=c+this.borderWidth.top,x=h+this.borderWidth.left;this.dragProcessStarted&&(F(i)&&(i=this.prevTop),F(e)&&(e=this.prevLeft)),this.dragArea?(b=i-S<0?this.dragLimit.top:i-S,w=e-x<0?this.dragElePosition.left:e-x):(b=i-S,w=e-x);var C=this.getProcessedPositionValue({top:b+"px",left:w+"px"});gi(l,this.getDragPosition(C)),!this.elementInViewport(l)&&this.enableAutoScroll&&this.helperElement.scrollIntoView(),this.dragProcessStarted=!0,this.prevLeft=e,this.prevTop=i,this.position.left=e,this.position.top=i,this.pageX=p,this.pageY=u}},e.prototype.triggerOutFunction=function(t,e){this.hoverObject.instance.intOut(t,e.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},e.prototype.getDragPosition=function(t){var e=V({},t);return this.axis&&("x"===this.axis?delete e.top:"y"===this.axis&&delete e.left),e},e.prototype.getDocumentWidthHeight=function(t){var e=document.body,i=document.documentElement;return Math.max(e["scroll"+t],i["scroll"+t],e["offset"+t],i["offset"+t],i["client"+t])},e.prototype.intDragStop=function(t){if(this.dragProcessStarted=!1,W(t.changedTouches)||1===t.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(t.type)){if(this.dragStop){var e=this.getProperTargetElement(t);this.trigger("dragStop",{event:t,element:this.element,target:e,helper:this.helperElement})}this.intDestroy(t)}else this.element.setAttribute("aria-grabbed","false");var i=this.checkTargetElement(t);i.target&&i.instance&&(i.instance.dragStopCalled=!0,i.instance.dragData[this.scope]=this.droppables[this.scope],i.instance.intDrop(t,i.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},e.prototype.intDestroy=function(t){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),ee.remove(document,te.touchMoveEvent,this.intDragStart),ee.remove(document,te.touchEndEvent,this.intDragStop),ee.remove(document,te.touchEndEvent,this.intDestroy),ee.remove(document,te.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},e.prototype.onPropertyChanged=function(t,e){},e.prototype.getModuleName=function(){return"draggable"},e.prototype.isDragStarted=function(t){return t&&(yn.isDragged=!yn.isDragged),yn.isDragged},e.prototype.setDragArea=function(){var t,e,i,n=0,r=0;if(i="string"===typeof this.dragArea?ci(this.dragArea):this.dragArea){var o=i.getBoundingClientRect();t=i.scrollWidth?i.scrollWidth:o.right-o.left,e=i.scrollHeight?i.scrollHeight:o.bottom-o.top;for(var s=["Top","Left","Bottom","Right"],a=getComputedStyle(i),l=0;l<s.length;l++){var h=s[l],c=a["border"+h+"Width"],d=a["padding"+h],p=h.toLowerCase();this.borderWidth[p]=isNaN(parseFloat(c))?0:parseFloat(c),this.padding[p]=isNaN(parseFloat(d))?0:parseFloat(d)}n=o.top,r=o.left,this.dragLimit.left=r+this.borderWidth.left+this.padding.left,this.dragLimit.top=i.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=r+t-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=n+e-(this.borderWidth.bottom+this.padding.bottom)}},e.prototype.getProperTargetElement=function(t){var e,i=this.getCoordinates(t),n=this.helperElement.style.pointerEvents||"";return Y(t.target,this.helperElement)||-1!==t.type.indexOf("touch")?(this.helperElement.style.pointerEvents="none",e=document.elementFromPoint(i.clientX,i.clientY),this.helperElement.style.pointerEvents=n):e=t.target,e},e.prototype.getMousePosition=function(t,e){var i,n,r=void 0!==t.srcElement?t.srcElement:t.target,o=this.getCoordinates(t),s=F(r.offsetParent);return e?(i=this.clone?o.pageX:o.pageX+(s?0:r.offsetParent.scrollLeft)-this.relativeXPosition,n=this.clone?o.pageY:o.pageY+(s?0:r.offsetParent.scrollTop)-this.relativeYPosition):(i=this.clone?o.pageX:o.pageX+window.pageXOffset-this.relativeXPosition,n=this.clone?o.pageY:o.pageY+window.pageYOffset-this.relativeYPosition),{left:i-(this.margin.left+this.cursorAt.left),top:n-(this.margin.top+this.cursorAt.top)}},e.prototype.getCoordinates=function(t){return t.type.indexOf("touch")>-1?t.changedTouches[0]:t},e.prototype.getHelperElement=function(t){var e;return this.clone?this.helper?e=this.helper({sender:t,element:this.target}):(e=$e("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(e)):e=this.element,e},e.prototype.setGlobalDroppables=function(t,e,i){this.droppables[this.scope]=t?null:{draggable:e,helper:i,draggedElement:this.element}},e.prototype.checkTargetElement=function(t){var e=this.getProperTargetElement(t),i=this.getDropInstance(e);if(!i&&e&&!F(e.parentNode)){var n=pi(e.parentNode,".e-droppable")||e.parentElement;n&&(i=this.getDropInstance(n))}return{target:e,instance:i}},e.prototype.getDropInstance=function(t){var e,i=t&&t.ej2_instances;if(i)for(var n=0,r=i;n<r.length;n++){var o=r[n];if("droppable"===o.getModuleName()){e=o;break}}return e},e.prototype.destroy=function(){this.toggleEvents(!0),t.prototype.destroy.call(this)},gn([_i({},vn)],e.prototype,"cursorAt",void 0),gn([Hi(!0)],e.prototype,"clone",void 0),gn([Hi()],e.prototype,"dragArea",void 0),gn([Hi()],e.prototype,"isDragScroll",void 0),gn([Ui()],e.prototype,"drag",void 0),gn([Ui()],e.prototype,"dragStart",void 0),gn([Ui()],e.prototype,"dragStop",void 0),gn([Hi(1)],e.prototype,"distance",void 0),gn([Hi()],e.prototype,"handle",void 0),gn([Hi()],e.prototype,"abort",void 0),gn([Hi()],e.prototype,"helper",void 0),gn([Hi("default")],e.prototype,"scope",void 0),gn([Hi("")],e.prototype,"dragTarget",void 0),gn([Hi()],e.prototype,"axis",void 0),gn([Hi()],e.prototype,"queryPositionInfo",void 0),gn([Hi(!1)],e.prototype,"enableTailMode",void 0),gn([Hi(!1)],e.prototype,"skipDistanceCheck",void 0),gn([Hi(!0)],e.prototype,"preventDefault",void 0),gn([Hi(!1)],e.prototype,"enableAutoScroll",void 0),gn([Hi(!1)],e.prototype,"enableTapHold",void 0),gn([Hi(750)],e.prototype,"tapHoldThreshold",void 0),e=i=gn([Gi],e)}(xi),wn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Sn=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},xn=function(t){function e(e,i){var n=t.call(this,i,e)||this;return n.mouseOver=!1,n.dragData={},n.dragStopCalled=!1,n.bind(),n}return wn(e,t),e.prototype.bind=function(){this.wireEvents()},e.prototype.wireEvents=function(){ee.add(this.element,te.touchEndEvent,this.intDrop,this)},e.prototype.onPropertyChanged=function(t,e){},e.prototype.getModuleName=function(){return"droppable"},e.prototype.intOver=function(t,e){if(!this.mouseOver){var i=this.dragData[this.scope];this.trigger("over",{event:t,target:e,dragData:i}),this.mouseOver=!0}},e.prototype.intOut=function(t,e){this.mouseOver&&(this.trigger("out",{evt:t,target:e}),this.mouseOver=!1)},e.prototype.intDrop=function(t,e){if(this.dragStopCalled){this.dragStopCalled=!1;var i,n=!0,r=this.dragData[this.scope],o=!!r&&(r.helper&&ni(r.helper));o&&(i=this.isDropArea(t,r.helper,e),this.accept&&(n=yi(r.helper,this.accept))),o&&this.drop&&i.canDrop&&n&&this.trigger("drop",{event:t,target:i.target,droppedElement:r.helper,dragData:r}),this.mouseOver=!1}},e.prototype.isDropArea=function(t,e,i){var n={canDrop:!0,target:i||t.target},r="touchend"===t.type;if(r||n.target===e){e.style.display="none";var o=r?t.changedTouches[0]:t,s=document.elementFromPoint(o.clientX,o.clientY);n.canDrop=!1,n.canDrop=Y(s,this.element),n.canDrop&&(n.target=s),e.style.display=""}return n},e.prototype.destroy=function(){ee.remove(this.element,te.touchEndEvent,this.intDrop),t.prototype.destroy.call(this)},Sn([Hi()],e.prototype,"accept",void 0),Sn([Hi("default")],e.prototype,"scope",void 0),Sn([Ui()],e.prototype,"drop",void 0),Sn([Ui()],e.prototype,"over",void 0),Sn([Ui()],e.prototype,"out",void 0),e=Sn([Gi],e)}(xi),Cn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pn=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},On={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},En=function(t){function e(e,n){var r=t.call(this,n,e)||this;return r.keyPressHandler=function(t){for(var e=t.altKey,n=t.ctrlKey,o=t.shiftKey,s=t.which,a=0,l=Object.keys(r.keyConfigs);a<l.length;a++)for(var h=l[a],c=0,d=r.keyConfigs[h].split(",");c<d.length;c++){var p=d[c],u=i.getKeyConfigData(p.trim());e===u.altKey&&n===u.ctrlKey&&o===u.shiftKey&&s===u.keyCode&&(t.action=h,r.keyAction&&r.keyAction(t))}},r.bind(),r}var i;return Cn(e,t),i=e,e.prototype.destroy=function(){this.unwireEvents(),t.prototype.destroy.call(this)},e.prototype.onPropertyChanged=function(t,e){},e.prototype.bind=function(){this.wireEvents()},e.prototype.getModuleName=function(){return"keyboard"},e.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},e.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},e.getKeyConfigData=function(t){if(t in this.configCache)return this.configCache[t];var e=t.toLowerCase().split("+"),n={altKey:-1!==e.indexOf("alt"),ctrlKey:-1!==e.indexOf("ctrl"),shiftKey:-1!==e.indexOf("shift"),keyCode:null};return e[e.length-1].length>1&&Number(e[e.length-1])?n.keyCode=Number(e[e.length-1]):n.keyCode=i.getKeyCode(e[e.length-1]),i.configCache[t]=n,n},e.getKeyCode=function(t){return On[t]||t.toUpperCase().charCodeAt(0)},e.configCache={},Pn([Hi({})],e.prototype,"keyConfigs",void 0),Pn([Hi("keyup")],e.prototype,"eventName",void 0),Pn([Ui()],e.prototype,"keyAction",void 0),e=i=Pn([Gi],e)}(xi),Ln=function(){function t(t,e,i){this.controlName=t,this.localeStrings=e,this.setLocale(i||Tt)}return t.prototype.setLocale=function(e){var i=this.intGetControlConstant(t.locale,e);this.currentLocale=i||this.localeStrings},t.load=function(t){this.locale=V(this.locale,t,{},!0)},t.prototype.getConstant=function(t){return F(this.currentLocale[t])?this.localeStrings[t]||"":this.currentLocale[t]},t.prototype.intGetControlConstant=function(t,e){return t[e]?t[e][this.controlName]:null},t.locale={},t}(),In=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Tn=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},An=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return In(e,t),Tn([Hi(50)],e.prototype,"swipeThresholdDistance",void 0),e}(ln),Bn=/(Up|Down)/,kn=function(t){function e(e,i){var n=t.call(this,i,e)||this;return n.touchAction=!0,n.tapCount=0,n.startEvent=function(t){if(!0===n.touchAction){var e=n.updateChangeTouches(t);void 0!==t.changedTouches&&(n.touchAction=!1),n.isTouchMoved=!1,n.movedDirection="",n.startPoint=n.lastMovedPoint={clientX:e.clientX,clientY:e.clientY},n.startEventData=e,n.hScrollLocked=n.vScrollLocked=!1,n.tStampStart=Date.now(),n.timeOutTapHold=setTimeout(function(){n.tapHoldEvent(t)},n.tapHoldThreshold),ee.add(n.element,te.touchMoveEvent,n.moveEvent,n),ee.add(n.element,te.touchEndEvent,n.endEvent,n),ee.add(n.element,te.touchCancelEvent,n.cancelEvent,n)}},n.moveEvent=function(t){var e=n.updateChangeTouches(t);n.movedPoint=e,n.isTouchMoved=!(e.clientX===n.startPoint.clientX&&e.clientY===n.startPoint.clientY);var i={};n.isTouchMoved&&(clearTimeout(n.timeOutTapHold),n.calcScrollPoints(t),i=V(i,{},{startEvents:n.startEventData,originalEvent:t,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,scrollDirection:n.scrollDirection,velocity:n.getVelocity(e)}),n.trigger("scroll",i),n.lastMovedPoint={clientX:e.clientX,clientY:e.clientY})},n.cancelEvent=function(t){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap),n.tapCount=0,n.swipeFn(t),ee.remove(n.element,te.touchCancelEvent,n.cancelEvent)},n.endEvent=function(t){n.swipeFn(t),n.isTouchMoved||"function"==typeof n.tap&&(n.trigger("tap",{originalEvent:t,tapCount:++n.tapCount}),n.timeOutTap=setTimeout(function(){n.tapCount=0},n.tapThreshold)),n.modeclear()},n.swipeFn=function(t){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap);var e=n.updateChangeTouches(t),i=e.clientX-n.startPoint.clientX,r=e.clientY-n.startPoint.clientY;i=Math.floor(i<0?-1*i:i),r=Math.floor(r<0?-1*r:i),n.isTouchMoved=i>1||r>1,n.endPoint=e,n.calcPoints(t);var o={originalEvent:t,startEvents:n.startEventData,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,swipeDirection:n.movedDirection,velocity:n.getVelocity(e)};if(n.isTouchMoved){var s=void 0,a=n.swipeSettings.swipeThresholdDistance;s=V(s,n.defaultArgs,o);var l=!1,h=n.element,c=n.isScrollable(h),d=Bn.test(n.movedDirection);(a<n.distanceX&&!d||a<n.distanceY&&d)&&(l=!c||n.checkSwipe(h,d)),l&&n.trigger("swipe",s)}n.modeclear()},n.modeclear=function(){n.modeClear=setTimeout(function(){n.touchAction=!0},"function"!=typeof n.tap?0:20),n.lastTapTime=(new Date).getTime(),ee.remove(n.element,te.touchMoveEvent,n.moveEvent),ee.remove(n.element,te.touchEndEvent,n.endEvent),ee.remove(n.element,te.touchCancelEvent,n.cancelEvent)},n.bind(),n}return In(e,t),e.prototype.onPropertyChanged=function(t,e){},e.prototype.bind=function(){this.wireEvents(),te.isIE&&this.element.classList.add("e-block-touch")},e.prototype.destroy=function(){this.unwireEvents(),t.prototype.destroy.call(this)},e.prototype.wireEvents=function(){ee.add(this.element,te.touchStartEvent,this.startEvent,this)},e.prototype.unwireEvents=function(){ee.remove(this.element,te.touchStartEvent,this.startEvent)},e.prototype.getModuleName=function(){return"touch"},e.prototype.isScrollable=function(t){var e=getComputedStyle(t),i=e.overflow+e.overflowX+e.overflowY;return!!/(auto|scroll)/.test(i)},e.prototype.tapHoldEvent=function(t){var e;this.tapCount=0,this.touchAction=!0,ee.remove(this.element,te.touchMoveEvent,this.moveEvent),ee.remove(this.element,te.touchEndEvent,this.endEvent),e={originalEvent:t},this.trigger("tapHold",e),ee.remove(this.element,te.touchCancelEvent,this.cancelEvent)},e.prototype.calcPoints=function(t){var e=this.updateChangeTouches(t);this.defaultArgs={originalEvent:t},this.distanceX=Math.abs(Math.abs(e.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(e.clientY)-Math.abs(this.startPoint.clientY)),this.distanceX>this.distanceY?this.movedDirection=e.clientX>this.startPoint.clientX?"Right":"Left":this.movedDirection=e.clientY<this.startPoint.clientY?"Up":"Down"},e.prototype.calcScrollPoints=function(t){var e=this.updateChangeTouches(t);this.defaultArgs={originalEvent:t},this.distanceX=Math.abs(Math.abs(e.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(e.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=e.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=e.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},e.prototype.getVelocity=function(t){var e=t.clientX,i=t.clientY,n=Date.now(),r=e-this.startPoint.clientX,o=i-this.startPoint.clientX,s=n-this.tStampStart;return Math.sqrt(r*r+o*o)/s},e.prototype.checkSwipe=function(t,e){var i=["scroll","offset"],n=e?["Height","Top"]:["Width","Left"];return t[i[0]+n[0]]<=t[i[1]+n[0]]||(0===t[i[0]+n[1]]||t[i[1]+n[0]]+t[i[0]+n[1]]>=t[i[0]+n[0]])},e.prototype.updateChangeTouches=function(t){return t.changedTouches&&0!==t.changedTouches.length?t.changedTouches[0]:t},Tn([Ui()],e.prototype,"tap",void 0),Tn([Ui()],e.prototype,"tapHold",void 0),Tn([Ui()],e.prototype,"swipe",void 0),Tn([Ui()],e.prototype,"scroll",void 0),Tn([Hi(350)],e.prototype,"tapThreshold",void 0),Tn([Hi(750)],e.prototype,"tapHoldThreshold",void 0),Tn([_i({},An)],e.prototype,"swipeSettings",void 0),e=Tn([Gi],e)}(xi),Mn=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],Dn=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],Rn=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"],zn=function(){function t(){}return t.beforeSanitize=function(){return{selectors:{tags:Mn,attributes:Dn}}},t.sanitize=function(t){var e=this.beforeSanitize();return this.serializeValue(e,t)},t.serializeValue=function(t,e){this.removeAttrs=t.selectors.attributes,this.removeTags=t.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=e,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),i},t.removeElement=function(){for(var t=this.wrapElement.children,e=0;e<t.length;e++)for(var i=t[e].attributes,n=0;n<i.length;n++)this.wrapElement.children[e].removeAttribute(i[n].localName)},t.removeXssTags=function(){var t=this.wrapElement.querySelectorAll(this.removeTags.join(","));t.length>0&&t.forEach(function(t){ai(t)})},t.removeJsEvents=function(){var t=this.wrapElement.querySelectorAll("["+Rn.join("],[")+"]");t.length>0&&t.forEach(function(t){Rn.forEach(function(e){t.hasAttribute(e)&&t.removeAttribute(e)})})},t.removeXssAttrs=function(){var t=this;this.removeAttrs.forEach(function(e,i){var n=t.wrapElement.querySelectorAll(e.selector);n.length>0&&n.forEach(function(t){t.removeAttribute(e.attribute)})})},t}(),jn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Nn=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Hn="e-accordion",_n="e-acrdn-item",Vn="e-acrdn-header",Fn="e-acrdn-panel",Wn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jn(e,t),Nn([Hi("SlideDown")],e.prototype,"effect",void 0),Nn([Hi(400)],e.prototype,"duration",void 0),Nn([Hi("linear")],e.prototype,"easing",void 0),e}(ln),Un=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jn(e,t),Nn([_i({effect:"SlideUp",duration:400,easing:"linear"},Wn)],e.prototype,"collapse",void 0),Nn([_i({effect:"SlideDown",duration:400,easing:"linear"},Wn)],e.prototype,"expand",void 0),e}(ln),Gn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jn(e,t),Nn([Hi(null)],e.prototype,"content",void 0),Nn([Hi(null)],e.prototype,"header",void 0),Nn([Hi(null)],e.prototype,"cssClass",void 0),Nn([Hi(null)],e.prototype,"iconCss",void 0),Nn([Hi(!1)],e.prototype,"expanded",void 0),Nn([Hi(!0)],e.prototype,"visible",void 0),Nn([Hi(!1)],e.prototype,"disabled",void 0),e}(ln),qn=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.keyConfigs={moveUp:"uparrow",moveDown:"downarrow",enter:"enter",space:"space",home:"home",end:"end"},n}return jn(e,t),e.prototype.destroy=function(){var e=this,i=this.element;if(t.prototype.destroy.call(this),this.unwireEvents(),this.isDestroy=!0,this.restoreContent(null),[].slice.call(i.children).forEach(function(t){t.classList.contains("blazor-template")||i.removeChild(t)}),this.trgtEle)for(;this.ctrlTem.firstElementChild;)i.appendChild(this.ctrlTem.firstElementChild);i.classList.remove("e-acrdn-root"),i.removeAttribute("style"),["aria-disabled","aria-multiselectable","role","data-ripple"].forEach(function(t){e.element.removeAttribute(t)}),!this.isNested&&rn&&this.removeRippleEffect()},e.prototype.preRender=function(){var t=pi(this.element,"."+Fn);this.isNested=!1,this.templateEle=[],this.isDestroy||(this.isDestroy=!1),F(t)?this.element.classList.add("e-acrdn-root"):(t.classList.add("e-nested"),this.isNested=!0),this.enableRtl&&this.add(this.element,"e-rtl")},e.prototype.add=function(t,e){t.classList.add(e)},e.prototype.remove=function(t,e){t.classList.remove(e)},e.prototype.render=function(){this.isServerRendered?this.wireFocusEvents():(this.initializeheaderTemplate(),this.initializeItemTemplate(),this.initialize(),this.renderControl()),this.wireEvents(),this.renderComplete()},e.prototype.initialize=function(){var t=J(this.width),e=J(this.height);gi(this.element,{width:t,height:e});F(this.initExpand)&&(this.initExpand=[]),this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),hi(this.element,{"aria-disabled":"false",role:"presentation","aria-multiselectable":"true"}),"Single"===this.expandMode&&this.element.setAttribute("aria-multiselectable","false")},e.prototype.renderControl=function(){this.trgtEle=this.element.children.length>0&&(!$()||this.isStringTemplate)?ci("div",this.element):null,this.renderItems(),this.initItemExpand()},e.prototype.wireFocusEvents=function(){for(var t=0,e=[].slice.call(this.element.querySelectorAll("."+_n));t<e.length;t++){var i=e[t],n=i.querySelector("."+Vn);i.childElementCount>0&&n&&(ee.clearEvents(n),ee.add(n,"focus",this.focusIn,this),ee.add(n,"blur",this.focusOut,this))}},e.prototype.unwireEvents=function(){ee.remove(this.element,"click",this.clickHandler),F(this.keyModule)||this.keyModule.destroy()},e.prototype.wireEvents=function(){ee.add(this.element,"click",this.clickHandler,this),this.isNested||this.isDestroy||(this.removeRippleEffect=Qi(this.element,{selector:"."+Vn})),this.isNested||(this.keyModule=new En(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}))},e.prototype.templateParser=function(t){if(t)try{if(document.querySelectorAll(t).length)return Te(document.querySelector(t).innerHTML.trim())}catch(e){return Te(t)}},e.prototype.initializeheaderTemplate=function(){this.headerTemplate&&(this.headerTemplateFn=this.templateParser(this.headerTemplate))},e.prototype.initializeItemTemplate=function(){this.itemTemplate&&(this.itemTemplateFn=this.templateParser(this.itemTemplate))},e.prototype.getheaderTemplate=function(){return this.headerTemplateFn},e.prototype.getItemTemplate=function(){return this.itemTemplateFn},e.prototype.focusIn=function(t){t.target.parentElement.classList.add("e-item-focus")},e.prototype.focusOut=function(t){t.target.parentElement.classList.remove("e-item-focus")},e.prototype.ctrlTemplate=function(){var t;this.ctrlTem=this.element.cloneNode(!0);var e=ci(".e-accordion-container",this.element);t=e?e.children:this.element.children;var i=[];[].slice.call(t).forEach(function(t){i.push({header:t.childElementCount>0&&t.children[0]?t.children[0]:"",content:t.childElementCount>1&&t.children[1]?t.children[1]:""}),t.parentNode.removeChild(t)}),e&&this.element.removeChild(e),this.setProperties({items:i},!0)},e.prototype.toggleIconGenerate=function(){var t=this.createElement("div",{className:"e-toggle-icon"}),e=this.createElement("span",{className:"e-tgl-collapse-icon e-icons"});return t.appendChild(e),t},e.prototype.initItemExpand=function(){var t=this.initExpand.length;if(0!==t)if("Single"===this.expandMode)this.expandItem(!0,this.initExpand[t-1]);else for(var e=0;e<t;e++)this.expandItem(!0,this.initExpand[e])},e.prototype.renderItems=function(){var t,e,i=this,n=this.element;if(F(this.trgtEle)||this.ctrlTemplate(),this.dataSource.length>0)this.dataSource.forEach(function(t,r){e=i.renderInnerItem(t,r),n.appendChild(e),e.childElementCount>0&&(ee.add(e.querySelector("."+Vn),"focus",i.focusIn,i),ee.add(e.querySelector("."+Vn),"blur",i.focusOut,i))});else{var r=this.items;n&&r.length>0&&r.forEach(function(e,r){t=i.renderInnerItem(e,r),n.appendChild(t),t.childElementCount>0&&(ee.add(t.querySelector("."+Vn),"focus",i.focusIn,i),ee.add(t.querySelector("."+Vn),"blur",i.focusOut,i))})}},e.prototype.clickHandler=function(t){var e,i,n=this,r=t.target,o=this.getItems(),s={};if(pi(r,"."+Hn)===this.element){r.classList.add("e-target");var a,l=pi(r,"."+_n),h=pi(r,"."+Vn),c=pi(r,"."+Fn);if(l&&(F(h)||F(c))&&(h=l.children[0],c=l.children[1]),h&&(i=ci(".e-toggle-icon",h)),h?a=pi(h,"."+_n):c&&(a=pi(c,"."+_n)),e=this.getIndexByItem(l),a&&(s.item=o[this.getIndexByItem(a)]),s.originalEvent=t,!(!F(i)&&l.childElementCount<=1)||!F(c)&&F(ci(".e-acrdn-header .e-toggle-icon",a)))this.afterContentRender(r,s,l,h,c,a);else if(this.isServerRendered){var d=l.id;this.items.length>0?this.interopAdaptor.invokeMethodAsync("OnItemClick",e).then(function(){n.isDestroyed||n.afterContentRender(r,s,l,h,c,a)}):this.interopAdaptor.invokeMethodAsync("OnDataClick",d).then(function(){n.isDestroyed||n.afterContentRender(r,s,l,h,c,a)})}else l.appendChild(this.contentRendering(e)),this.ariaAttrUpdate(l),this.afterContentRender(r,s,l,h,c,a)}},e.prototype.afterContentRender=function(t,e,i,n,r,o){var s=this,a=[];this.trigger("clicked",e);var l=r&&!F(ci(".e-target",r)),h=r&&!F(ci("."+Hn,r))&&F(pi(t,".e-acrdn-panel .e-accordion")),c=r&&F(ci("."+Hn,r))||!(pi(t,"."+Hn)===this.element);if(l=l&&(h||c),t.classList.remove("e-target"),!(t.classList.contains(Fn)||t.classList.contains("e-acrdn-content")||l)){var d=this.element.querySelector(".e-accordion-container"),p=d?d.children:this.element.children;[].slice.call(p).forEach(function(t){t.classList.contains("e-active")&&a.push(t)});var u=[].slice.call(this.element.querySelectorAll(".e-acrdn-item [e-animate]"));if(u.length>0)for(var f=0,g=u;f<g.length;f++){var m=g[f];a.push(m.parentElement)}var y=-1!==a.indexOf(o)&&"true"===r.getAttribute("e-animate"),v=!1;if(!F(i)&&!F(n)){var b=ci("."+Fn,i),w=pi(i,".e-acrdn-root").querySelector(".e-expand-state");if(F(b))return;v=w===i,!ni(b)||y&&!o.classList.contains("e-selected")?(a.length>0&&"Single"===this.expandMode&&!y&&a.forEach(function(t){s.collapse(ci("."+Fn,t)),t.classList.remove("e-expand-state")}),this.expand(b)):this.collapse(b),F(w)||v||w.classList.remove("e-expand-state")}}},e.prototype.eleMoveFocus=function(t,e,i){var n,r=pi(i,"."+_n);i===e?n=("moveUp"===t?i.lastElementChild:i).querySelector("."+Vn):i.classList.contains(Vn)&&(r="moveUp"===t?r.previousElementSibling:r.nextElementSibling)&&(n=ci("."+Vn,r)),n&&n.focus()},e.prototype.keyActionHandler=function(t){var e=t.target;if(!F(pi(t.target,Vn))||e.classList.contains(Hn)||e.classList.contains(Vn)){var i,n=this.element;switch(t.action){case"moveUp":case"moveDown":this.eleMoveFocus(t.action,n,e);break;case"space":case"enter":!F(i=e.nextElementSibling)&&i.classList.contains(Fn)?"true"!==i.getAttribute("e-animate")&&e.click():e.click();break;case"home":case"end":("home"===t.action?n.firstElementChild.children[0]:n.lastElementChild.children[0]).focus()}}},e.prototype.headerEleGenerate=function(){var t=this.createElement("div",{className:Vn,id:U("acrdn_header")});return hi(t,{tabindex:"0",role:"heading","aria-selected":"false","aria-disabled":"false","aria-level":this.getItems().length.toString()}),t},e.prototype.renderInnerItem=function(t,e){var i;if((i=this.createElement("div",{className:_n})).id=U("acrdn_item"),hi(i,{"aria-expanded":"false"}),this.headerTemplate){var n=this.headerEleGenerate(),r=this.createElement("div",{className:"e-acrdn-header-content"});return n.appendChild(r),oi(this.getheaderTemplate()(t,this,"headerTemplate",this.element.id+"_headerTemplate",!1),r),i.appendChild(n),n.appendChild(this.toggleIconGenerate()),this.add(i,"e-select"),i}if(t.header&&this.angularnativeCondiCheck(t,"header")){this.enableHtmlSanitizer&&"string"==typeof t.header&&(t.header=zn.sanitize(t.header));n=this.headerEleGenerate(),r=this.createElement("div",{className:"e-acrdn-header-content"});n.appendChild(r),n.appendChild(this.fetchElement(r,t.header,e,!0)),i.appendChild(n)}var o=ci("."+Vn,i);if(!t.expanded||F(e)||this.enablePersistence||-1===this.initExpand.indexOf(e)&&this.initExpand.push(e),t.cssClass&&ti([i],t.cssClass.split(" ")),t.disabled&&ti([i],"e-overlay"),!1===t.visible&&ti([i],"e-hide"),t.iconCss){var s=this.createElement("div",{className:"e-acrdn-header-icon"}),a=this.createElement("span",{className:t.iconCss+" e-icons"});s.appendChild(a),F(o)?((o=this.headerEleGenerate()).appendChild(s),i.appendChild(o)):o.insertBefore(s,o.childNodes[0])}if(t.content&&this.angularnativeCondiCheck(t,"content")){var l=this.toggleIconGenerate();F(o)&&(o=this.headerEleGenerate(),i.appendChild(o)),o.appendChild(l),this.add(i,"e-select")}return i},e.prototype.angularnativeCondiCheck=function(t,e){var i="content"===e?t.content:t.header;if(this.isAngular&&!F(i.elementRef)){var n=i.elementRef.nativeElement.data;if(F(n)||""===n||-1===n.indexOf("bindings="))return!0;var r=JSON.parse(i.elementRef.nativeElement.data.replace("bindings=",""));return!(!F(r)&&"false"===r["ng-reflect-ng-if"])}return!0},e.prototype.fetchElement=function(t,e,i,n){var r,o,s;try{if(document.querySelectorAll(e).length){var a=document.querySelector(e);o=a.outerHTML.trim(),t.appendChild(a),a.style.display=""}}catch(i){"string"==typeof e&&$()&&0!==e.indexOf("<div>Blazor")?t.innerHTML=zn.sanitize(e):!F(this.trgtEle)&&e instanceof HTMLElement?(t.appendChild(e),t.firstElementChild.style.display=""):r=Te(e)}if(!F(r)){var l=void 0;t.classList.contains("e-acrdn-header-content")?l=this.element.id+i+"_header":t.classList.contains("e-acrdn-content")&&(l=this.element.id+i+"_content"),s=r({},null,null,l,this.isStringTemplate)}return F(s)||!(s.length>0)||F(s[0].tagName)&&1===s.length?0===t.childElementCount&&(t.innerHTML=zn.sanitize(e)):[].slice.call(s).forEach(function(e){F(e.tagName)||(e.style.display=""),t.appendChild(e)}),F(o)||-1===this.templateEle.indexOf(e)&&this.templateEle.push(e),t},e.prototype.ariaAttrUpdate=function(t){var e=ci("."+Vn,t),i=ci("."+Fn,t);e.setAttribute("aria-controls",i.id),i.setAttribute("aria-labelledby",e.id),i.setAttribute("role","definition")},e.prototype.contentRendering=function(t){var e=this.createElement("div",{className:Fn+" e-content-hide",id:U("acrdn_panel")});hi(e,{"aria-hidden":"true"});var i=this.createElement("div",{className:"e-acrdn-content"});return this.dataSource.length>0?(oi(this.getItemTemplate()(this.dataSource[t],this,"itemTemplate",this.element.id+"_itemTemplate",!1),i),e.appendChild(i)):(this.enableHtmlSanitizer&&(this.items[t].content,1)&&(this.items[t].content=zn.sanitize(this.items[t].content)),e.appendChild(this.fetchElement(i,this.items[t].content,t,!1))),e},e.prototype.expand=function(t){var e,i=this,n=this.getItems(),r=pi(t,"."+_n);if(!(F(t)||ni(t)&&"true"!==t.getAttribute("e-animate")||r.classList.contains("e-overlay"))){var o=pi(r,".e-acrdn-root").querySelector(".e-expand-state"),s={name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing},a=ci(".e-toggle-icon",r).firstElementChild;e={element:r,item:n[this.getIndexByItem(r)],index:this.getIndexByItem(r),content:r.querySelector("."+Fn),isExpanded:!0},this.trigger("expanding",e,function(e){e.cancel||(a.classList.add("e-toggle-animation"),i.expandedItemsPush(r),F(o)||o.classList.remove("e-expand-state"),r.classList.add("e-expand-state"),"None"===s.name?(i.expandProgress("begin",a,t,r,e),i.expandProgress("end",a,t,r,e)):i.expandAnimation(s.name,a,t,r,s,e))})}},e.prototype.expandAnimation=function(t,e,i,n,r,o){var s,a=this;this.lastActiveItemId=n.id,"SlideDown"===t?(r.begin=function(){a.expandProgress("begin",e,i,n,o),i.style.position="absolute",s=n.offsetHeight,i.style.maxHeight=i.offsetHeight+"px",n.style.maxHeight=""},r.progress=function(){n.style.minHeight=s+i.offsetHeight+"px"},r.end=function(){gi(i,{position:"",maxHeight:""}),n.style.minHeight="",a.expandProgress("end",e,i,n,o)}):(r.begin=function(){a.expandProgress("begin",e,i,n,o)},r.end=function(){a.expandProgress("end",e,i,n,o)}),new Ji(r).animate(i)},e.prototype.expandProgress=function(t,e,i,n,r){this.remove(i,"e-content-hide"),this.add(n,"e-selected"),this.add(e,"e-expand-icon"),"end"===t&&(this.add(n,"e-active"),i.setAttribute("aria-hidden","false"),hi(n,{"aria-expanded":"true"}),hi(i.previousElementSibling,{"aria-selected":"true"}),e.classList.remove("e-toggle-animation"),this.trigger("expanded",r))},e.prototype.expandedItemsPush=function(t){var e=this.getIndexByItem(t);if(-1===this.expandedIndices.indexOf(e)){var i=[].slice.call(this.expandedIndices);i.push(e),this.setProperties({expandedIndices:i},!0)}},e.prototype.getIndexByItem=function(t){var e=this.getItemElements();return[].slice.call(e).indexOf(t)},e.prototype.getItemElements=function(){var t=[],e=this.element.children;return[].slice.call(e).forEach(function(e){e.classList.contains(_n)&&t.push(e)}),t},e.prototype.expandedItemsPop=function(t){var e=this.getIndexByItem(t),i=[].slice.call(this.expandedIndices);i.splice(i.indexOf(e),1),this.setProperties({expandedIndices:i},!0)},e.prototype.collapse=function(t){var e,i=this,n=this.getItems(),r=pi(t,"."+_n);if(!F(t)&&ni(t)&&!r.classList.contains("e-overlay")){var o={name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing},s=ci(".e-toggle-icon",r).firstElementChild;e={element:r,item:n[this.getIndexByItem(r)],index:this.getIndexByItem(r),content:r.querySelector("."+Fn),isExpanded:!1},this.trigger("expanding",e,function(e){e.cancel||(i.expandedItemsPop(r),r.classList.add("e-expand-state"),s.classList.add("e-toggle-animation"),"None"===o.name?(i.collapseProgress("begin",s,t,r,e),i.collapseProgress("end",s,t,r,e)):i.collapseAnimation(o.name,t,r,s,o,e))})}},e.prototype.collapseAnimation=function(t,e,i,n,r,o){var s,a,l,h,c=this;this.lastActiveItemId=i.id,"SlideUp"===t?(r.begin=function(){l=i.offsetHeight,i.style.minHeight=l+"px",e.style.position="absolute",s=i.offsetHeight,a=e.offsetHeight,e.style.maxHeight=a+"px",c.collapseProgress("begin",n,e,i,o)},r.progress=function(){(h=s-(a-e.offsetHeight))<l&&(i.style.minHeight=h+"px")},r.end=function(){e.style.display="none",c.collapseProgress("end",n,e,i,o),i.style.minHeight="",gi(e,{position:"",maxHeight:"",display:""})}):(r.begin=function(){c.collapseProgress("begin",n,e,i,o)},r.end=function(){c.collapseProgress("end",n,e,i,o)}),new Ji(r).animate(e)},e.prototype.collapseProgress=function(t,e,i,n,r){this.remove(e,"e-expand-icon"),this.remove(n,"e-selected"),"end"===t&&(this.add(i,"e-content-hide"),e.classList.remove("e-toggle-animation"),this.remove(n,"e-active"),i.setAttribute("aria-hidden","true"),hi(n,{"aria-expanded":"false"}),hi(i.previousElementSibling,{"aria-selected":"false"}),this.trigger("expanded",r))},e.prototype.getModuleName=function(){return"accordion"},e.prototype.itemAttribUpdate=function(){var t=this.getItems(),e=this.getItemElements(),i=t.length;e.forEach(function(t){ci("."+Vn,t).setAttribute("aria-level",""+i)})},e.prototype.getItems=function(){return this.itemTemplate&&this.headerTemplate?this.dataSource:this.items},e.prototype.addItem=function(t,e){var i=this,n=this.element,r=this.getItemElements(),o=this.getItems();(F(e)&&(e=o.length),n.childElementCount>=e)&&(t instanceof Array?t:[t]).forEach(function(t,s){var a=e+s;o.splice(a,0,t);var l=i.renderInnerItem(t,a);n.childElementCount===a?n.appendChild(l):n.insertBefore(l,r[a]),ee.add(l.querySelector("."+Vn),"focus",i.focusIn,i),ee.add(l.querySelector("."+Vn),"blur",i.focusOut,i),i.itemAttribUpdate(),i.expandedIndices=[],i.expandedItemRefresh(n),t&&t.expanded&&i.expandItem(!0,a)})},e.prototype.expandedItemRefresh=function(t){var e=this,i=this.getItemElements();[].slice.call(i).forEach(function(t){t.classList.contains("e-selected")&&e.expandedItemsPush(t)})},e.prototype.removeItem=function(t){var e=this.getItemElements()[t],i=this.getItems();F(e)||(this.restoreContent(t),ai(e),i.splice(t,1),this.itemAttribUpdate(),this.expandedIndices=[],this.expandedItemRefresh(this.element))},e.prototype.select=function(t){var e=this.getItemElements()[t];F(e)||F(ci("."+Vn,e))||e.children[0].focus()},e.prototype.hideItem=function(t,e){var i=this.getItemElements()[t];F(i)||(F(e)&&(e=!0),e?this.add(i,"e-hide"):this.remove(i,"e-hide"))},e.prototype.enableItem=function(t,e){var i=this.getItemElements()[t];if(!F(i)){var n=i.firstElementChild;e?(this.remove(i,"e-overlay"),hi(n,{tabindex:"0","aria-disabled":"false"}),n.focus()):(i.classList.contains("e-active")&&(this.expandItem(!1,t),this.eleMoveFocus("movedown",this.element,n)),this.add(i,"e-overlay"),n.setAttribute("aria-disabled","true"),n.removeAttribute("tabindex"))}},e.prototype.refresh=function(){this.isServerRendered||t.prototype.refresh.call(this)},e.prototype.expandItem=function(t,e){var i=this,n=this.getItemElements();if(F(e))if("Single"===this.expandMode&&t){var r=n[n.length-1];this.itemExpand(t,r,this.getIndexByItem(r))}else{var o=ci("#"+this.lastActiveItemId,this.element);[].slice.call(n).forEach(function(e){i.itemExpand(t,e,i.getIndexByItem(e)),e.classList.remove("e-expand-state")});var s=ci(".e-expand-state",this.element);s&&s.classList.remove("e-expand-state"),o&&o.classList.add("e-expand-state")}else{if(F(r=n[e])||!r.classList.contains("e-select")||r.classList.contains("e-active")&&t)return;"Single"===this.expandMode&&this.expandItem(!1),this.itemExpand(t,r,e)}},e.prototype.itemExpand=function(t,e,i){var n=this,r=e.children[1];if(!e.classList.contains("e-overlay"))if(F(r)&&t)if(this.isServerRendered){var o=e.id;this.items.length>0?this.interopAdaptor.invokeMethodAsync("OnItemClick",i).then(function(){n.isDestroyed||(r=e.children[1],n.expand(r))}):this.interopAdaptor.invokeMethodAsync("OnDataClick",o).then(function(){n.isDestroyed||(r=e.children[1],n.expand(r))})}else r=this.contentRendering(i),e.appendChild(r),this.ariaAttrUpdate(e),this.expand(r);else F(r)||(t?this.expand(r):this.collapse(r))},e.prototype.destroyItems=function(){this.restoreContent(null),[].slice.call(this.element.querySelectorAll("."+_n)).forEach(function(t){ai(t)})},e.prototype.restoreContent=function(t){var e;e=F(t)?this.element:this.element.querySelectorAll("."+_n)[t],this.templateEle.forEach(function(t){F(e.querySelector(t))||(document.body.appendChild(e.querySelector(t)).style.display="none")})},e.prototype.updateItem=function(t,e){if(!F(t)){var i=this.getItems(),n=i[e];i.splice(e,1),this.restoreContent(e),ai(t),this.addItem(n,e)}},e.prototype.getPersistData=function(){return this.addOnPersist(["expandedIndices"])},e.prototype.onPropertyChanged=function(t,e){for(var i=this.element,n=!1,r=0,o=Object.keys(t);r<o.length;r++){switch(o[r]){case"items":if(this.isServerRendered){this.wireFocusEvents();break}if(t.items instanceof Array&&e.items instanceof Array)n=!0;else for(var s=Object.keys(t.items),a=0;a<s.length;a++){var l=parseInt(Object.keys(t.items)[a],10),h=Object.keys(t.items[l])[0],c=di("."+_n,this.element)[l],d=Object(e.items[l])[h],p=Object(t.items[l])[h];("header"===h||"iconCss"===h||"expanded"===h||"content"===h&&""===d)&&this.updateItem(c,l),"cssClass"!==h||F(c)||(c.classList.remove(d),c.classList.add(p)),"visible"!==h||F(c)||(!1===Object(t.items[l])[h]?c.classList.add("e-hide"):c.classList.remove("e-hide")),"disabled"!==h||F(c)||this.enableItem(l,!p),"content"!==h||F(c)||2!==c.children.length||(c.classList.contains("e-selected")&&this.expandItem(!1,l),ai(c.querySelector("."+Fn)))}break;case"dataSource":case"expandedIndices":null===this.expandedIndices&&(this.expandedIndices=[]),n=!0;break;case"headerTemplate":this.initializeheaderTemplate(),n=!0;break;case"itemTemplate":this.initializeItemTemplate(),n=!0;break;case"enableRtl":t.enableRtl?this.add(i,"e-rtl"):this.remove(i,"e-rtl");break;case"height":gi(this.element,{height:J(t.height)});break;case"width":gi(this.element,{width:J(t.width)});break;case"expandMode":"Single"===t.expandMode?(this.element.setAttribute("aria-multiselectable","false"),this.expandedIndices.length>1&&this.expandItem(!1)):this.element.setAttribute("aria-multiselectable","true")}}n&&!this.isServerRendered&&(this.initExpand=[],this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),this.destroyItems(),this.renderItems(),this.initItemExpand())},Nn([Fi([],Gn)],e.prototype,"items",void 0),Nn([Hi([])],e.prototype,"dataSource",void 0),Nn([Hi()],e.prototype,"itemTemplate",void 0),Nn([Hi()],e.prototype,"headerTemplate",void 0),Nn([Hi("100%")],e.prototype,"width",void 0),Nn([Hi("auto")],e.prototype,"height",void 0),Nn([Hi([])],e.prototype,"expandedIndices",void 0),Nn([Hi("Multiple")],e.prototype,"expandMode",void 0),Nn([Hi(!1)],e.prototype,"enableHtmlSanitizer",void 0),Nn([_i({},Un)],e.prototype,"animation",void 0),Nn([Ui()],e.prototype,"clicked",void 0),Nn([Ui()],e.prototype,"expanding",void 0),Nn([Ui()],e.prototype,"expanded",void 0),Nn([Ui()],e.prototype,"created",void 0),Nn([Ui()],e.prototype,"destroyed",void 0),e=Nn([Gi],e)}(un),Xn={},Yn={};Object(I.copy)(Xn,r),Object(I.copy)(Yn,n);var Zn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kn=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};function Jn(t,e){for(var i=V({},t),n=0,r=Object.keys(i);n<r.length;n++){var o=r[n];e.indexOf(o)<0&&j(i,o)}return i}function Qn(t,e){var i=40===e?0:t.childElementCount-1,n=i,r=t.querySelector(".e-selected");r&&r.classList.remove("e-selected");for(var o=0,s=t.children.length;o<s;o++)t.children[o].classList.contains("e-focused")&&(n=o,t.children[o].classList.remove("e-focused"),40===e?n++:n--,n===(40===e?t.childElementCount:-1)&&(n=i));-1!==(n=function t(e,i,n,r,o){void 0===o&&(o=0);(i.classList.contains("e-separator")||i.classList.contains("e-disabled"))&&(n===(40===r?e.childElementCount-1:0)?n=40===r?0:e.childElementCount-1:40===r?n++:n--);i=e.children[n];if(i.classList.contains("e-separator")||i.classList.contains("e-disabled")){if(++o===e.childElementCount)return n=-1;n=t(e,i,n,r,o)}return n}(t,t.children[n],n,e))&&(ti([t.children[n]],"e-focused"),t.children[n].focus())}var $n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zn(e,t),Kn([Hi("")],e.prototype,"iconCss",void 0),Kn([Hi("")],e.prototype,"id",void 0),Kn([Hi(!1)],e.prototype,"separator",void 0),Kn([Hi("")],e.prototype,"text",void 0),Kn([Hi("")],e.prototype,"url",void 0),e}(ln);function tr(t,e,i,n,r,o){var s=n;if(n.tagName===e){var a=R("ej2_instances",n);s=t("input",{attrs:{type:i}});for(var l=["change","cssClass","label","labelPosition","id"],h=0,c=n.attributes.length;h<c;h++)-1===l.indexOf(n.attributes[h].nodeName)&&s.setAttribute(n.attributes[h].nodeName,n.attributes[h].nodeValue);hi(n,{class:r,role:o,"aria-checked":"false"}),n.appendChild(s),z("ej2_instances",a,s),j(n,"ej2_instances")}return s}function er(t){for(var e,i=t.childNodes,n=0;n<i.length;n++)if(3===(e=i[n]).nodeType)return e;return null}function ir(t,e,i){void 0===e&&(e=!1),void 0===i&&(i={});var n=t("div",{className:"e-checkbox-wrapper e-css"});if(i.cssClass&&ti([n],i.cssClass.split(" ")),i.enableRtl&&n.classList.add("e-rtl"),e){var r=t("span",{className:"e-ripple-container"});Qi(r,{isCenterRipple:!0,duration:400}),n.appendChild(r)}var o=t("span",{className:"e-frame e-icons"});if(i.checked&&o.classList.add("e-check"),n.appendChild(o),i.label){var s=t("span",{className:"e-label",innerHTML:i.label});n.appendChild(s)}return n}function nr(t,e){if(e){var i=document.createEvent("MouseEvents");i.initEvent(t.type,!1,!0),e.dispatchEvent(i)}}function rr(t,e){t.element.getAttribute("ejs-for")&&e.appendChild(t.createElement("input",{attrs:{name:t.name||t.element.name,value:"false",type:"hidden"}}))}var or,sr,ar,lr,hr,cr,dr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),pr=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},ur=new Ot,fr="e-rtl",gr="e-btn",mr="e-primary",yr="e-icon-btn",vr=function(t){function e(e,i){return t.call(this,e,i)||this}return dr(e,t),e.prototype.preRender=function(){},e.prototype.render=function(){$()&&this.isServerRendered?(this.disabled||this.wireEvents(),ur.notify("component-rendered",{id:this.element.id,instance:this})):this.initialize(),this.removeRippleEffect=Qi(this.element,{selector:"."+gr}),this.renderComplete()},e.prototype.initialize=function(){if(this.cssClass&&ti([this.element],this.cssClass.split(" ")),this.isPrimary&&this.element.classList.add(mr),!$()||$()&&"progress-btn"!==this.getModuleName()){if(this.content){var t=this.enableHtmlSanitizer?zn.sanitize(this.content):this.content;this.element.innerHTML=t}this.setIconCss()}this.enableRtl&&this.element.classList.add(fr),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},e.prototype.controlStatus=function(t){this.element.disabled=t},e.prototype.setIconCss=function(){if(this.iconCss){var t=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(t.classList.add("e-icon-"+this.iconPosition.toLowerCase()),"Top"!==this.iconPosition&&"Bottom"!==this.iconPosition||this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add(yr);var e=this.element.childNodes[0];!e||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(t):this.element.insertBefore(t,e)}},e.prototype.wireEvents=function(){this.isToggle&&ee.add(this.element,"click",this.btnClickHandler,this)},e.prototype.unWireEvents=function(){this.isToggle&&ee.remove(this.element,"click",this.btnClickHandler)},e.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},e.prototype.destroy=function(){if(!$()||!this.isServerRendered){var e,i=[mr,fr,yr,"e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(i=i.concat(this.cssClass.split(" "))),t.prototype.destroy.call(this),ei([this.element],i),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,"")),(e=this.element.querySelector("span.e-btn-icon"))&&ai(e)}this.unWireEvents(),rn&&this.removeRippleEffect()},e.prototype.getModuleName=function(){return"btn"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.Inject=function(){},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"isPrimary":t.isPrimary?this.element.classList.add(mr):this.element.classList.remove(mr);break;case"disabled":this.controlStatus(t.disabled);break;case"iconCss":var r=this.element.querySelector("span.e-btn-icon");r?t.iconCss?(r.className="e-btn-icon "+t.iconCss,this.element.textContent.trim()&&("Left"===this.iconPosition?r.classList.add("e-icon-left"):r.classList.add("e-icon-right"))):ai(r):this.setIconCss();break;case"iconPosition":ei([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(r=this.element.querySelector("span.e-btn-icon"))&&ai(r),this.setIconCss();break;case"cssClass":e.cssClass&&ei([this.element],e.cssClass.split(" ")),t.cssClass&&ti([this.element],t.cssClass.split(" "));break;case"enableRtl":t.enableRtl?this.element.classList.add(fr):this.element.classList.remove(fr);break;case"content":er(this.element)||this.element.classList.remove(yr),(!$()||$()&&!this.isServerRendered&&"progress-btn"!==this.getModuleName())&&(this.enableHtmlSanitizer&&(t.content=zn.sanitize(t.content)),this.element.innerHTML=t.content,this.setIconCss());break;case"isToggle":t.isToggle?ee.add(this.element,"click",this.btnClickHandler,this):(ee.remove(this.element,"click",this.btnClickHandler),ei([this.element],["e-active"]))}}},e.prototype.click=function(){this.element.click()},e.prototype.focusIn=function(){this.element.focus()},pr([Hi("Left")],e.prototype,"iconPosition",void 0),pr([Hi("")],e.prototype,"iconCss",void 0),pr([Hi(!1)],e.prototype,"disabled",void 0),pr([Hi(!1)],e.prototype,"isPrimary",void 0),pr([Hi("")],e.prototype,"cssClass",void 0),pr([Hi("")],e.prototype,"content",void 0),pr([Hi(!1)],e.prototype,"isToggle",void 0),pr([Hi()],e.prototype,"locale",void 0),pr([Hi(!1)],e.prototype,"enableHtmlSanitizer",void 0),pr([Ui()],e.prototype,"created",void 0),e=pr([Gi],e)}(un),br=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wr=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Sr="e-frame",xr="e-ripple-container",Cr=["title","class","style","disabled","readonly","name","value"],Pr=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isFocused=!1,n.isMouseClick=!1,n}return br(e,t),e.prototype.changeState=function(t){var e,i,n=this.getWrapper().getElementsByClassName(Sr)[0];rn&&(i=this.getWrapper().getElementsByClassName(xr)[0]),"check"===t?(n.classList.remove("e-stop"),n.classList.add("e-check"),i&&(i.classList.remove("e-ripple-stop"),i.classList.add("e-ripple-check")),e="true",this.element.checked=!0):"uncheck"===t?(ei([n],["e-check","e-stop"]),i&&ei([i],["e-ripple-check","e-ripple-stop"]),e="false",this.element.checked=!1):(n.classList.remove("e-check"),n.classList.add("e-stop"),i&&(i.classList.remove("e-ripple-check"),i.classList.add("e-ripple-stop")),e="mixed",this.element.indeterminate=!0),this.getWrapper().setAttribute("aria-checked",e)},e.prototype.clickHandler=function(t){this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck"),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck"),this.checked=!1):(this.changeState("check"),this.checked=!0);var e={checked:this.element.checked,event:t};this.trigger("change",e)},e.prototype.destroy=function(){var e=this,i=this.getWrapper();$()&&this.isServerRendered?this.disabled||this.unWireEvents():(t.prototype.destroy.call(this),this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(i.parentNode.insertBefore(this.element,i),ai(i),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach(function(t){e.element.removeAttribute(t)})):(["role","aria-checked","class"].forEach(function(t){i.removeAttribute(t)}),i.innerHTML=""))},e.prototype.focusHandler=function(){this.isFocused=!0},e.prototype.focusOutHandler=function(){this.getWrapper().classList.remove("e-focus"),this.isFocused=!1},e.prototype.getModuleName=function(){return"checkbox"},e.prototype.getPersistData=function(){return this.addOnPersist(["checked","indeterminate"])},e.prototype.getWrapper=function(){return this.element.parentElement.parentElement},e.prototype.initialize=function(){F(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&this.element.setAttribute("value",this.value),this.checked&&this.changeState("check"),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()},e.prototype.initWrapper=function(){var t=this.element.parentElement;t.classList.contains("e-checkbox-wrapper")||(t=this.createElement("div",{className:"e-checkbox-wrapper",attrs:{role:"checkbox","aria-checked":"false"}}),this.element.parentNode.insertBefore(t,this.element));var e=this.createElement("label",{attrs:{for:this.element.id}}),i=this.createElement("span",{className:"e-icons "+Sr});if(t.classList.add("e-wrapper"),this.enableRtl&&t.classList.add("e-rtl"),this.cssClass&&ti([t],this.cssClass.split(" ")),t.appendChild(e),e.appendChild(this.element),rr(this,e),e.appendChild(i),rn){var n=this.createElement("span",{className:xr});"Before"===this.labelPosition?e.appendChild(n):e.insertBefore(n,i),Qi(n,{duration:400,isCenterRipple:!0})}this.label&&this.setText(this.label)},e.prototype.keyUpHandler=function(){this.isFocused&&this.getWrapper().classList.add("e-focus")},e.prototype.labelMouseHandler=function(t){this.isMouseClick=!0,nr(t,this.getWrapper().getElementsByClassName(xr)[0])},e.prototype.onPropertyChanged=function(t,e){for(var i=this.getWrapper(),n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(t.checked?"check":"uncheck");break;case"indeterminate":t.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":t.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,i.classList.remove("e-checkbox-disabled"),i.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":e.cssClass&&ei([i],e.cssClass.split(" ")),t.cssClass&&ti([i],t.cssClass.split(" "));break;case"enableRtl":t.enableRtl?i.classList.add("e-rtl"):i.classList.remove("e-rtl");break;case"label":this.setText(t.label);break;case"labelPosition":var o=i.getElementsByClassName("e-label")[0],s=i.getElementsByTagName("label")[0];ai(o),"After"===t.labelPosition?s.appendChild(o):s.insertBefore(o,i.getElementsByClassName(Sr)[0]);break;case"name":this.element.setAttribute("name",t.name);break;case"value":this.element.setAttribute("value",t.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper()}}},e.prototype.preRender=function(){if(!$()||!this.isServerRendered){var t=this.element;this.formElement=pi(this.element,"form"),this.tagName=this.element.tagName,t=tr(this.createElement,"EJS-CHECKBOX","checkbox",t,"e-checkbox-wrapper","checkbox"),this.element=t,"checkbox"!==this.element.getAttribute("type")&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=U("e-"+this.getModuleName()))}},e.prototype.render=function(){$()&&this.isServerRendered?rn&&Qi(this.getWrapper().getElementsByClassName(xr)[0],{duration:400,isCenterRipple:!0}):(this.initWrapper(),this.initialize()),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.renderComplete()},e.prototype.setDisabled=function(){var t=this.getWrapper();this.element.disabled=!0,t.classList.add("e-checkbox-disabled"),t.setAttribute("aria-disabled","true")},e.prototype.setText=function(t){var e=this.getWrapper().getElementsByClassName("e-label")[0];if(e)e.textContent=t;else{t=this.enableHtmlSanitizer?zn.sanitize(t):t,e=this.createElement("span",{className:"e-label",innerHTML:t});var i=this.getWrapper().getElementsByTagName("label")[0];"Before"===this.labelPosition?i.insertBefore(e,this.getWrapper().getElementsByClassName(Sr)[0]):i.appendChild(e)}},e.prototype.changeHandler=function(t){t.stopPropagation()},e.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue},e.prototype.unWireEvents=function(){var t=this.getWrapper();ee.remove(this.element,"click",this.clickHandler),ee.remove(this.element,"keyup",this.keyUpHandler),ee.remove(this.element,"focus",this.focusHandler),ee.remove(this.element,"focusout",this.focusOutHandler);var e=t.getElementsByTagName("label")[0];ee.remove(e,"mousedown",this.labelMouseHandler),ee.remove(e,"mouseup",this.labelMouseHandler),this.formElement&&ee.remove(this.formElement,"reset",this.formResetHandler),"EJS-CHECKBOX"===this.tagName&&ee.remove(this.element,"change",this.changeHandler)},e.prototype.wireEvents=function(){var t=this.getWrapper();ee.add(this.element,"click",this.clickHandler,this),ee.add(this.element,"keyup",this.keyUpHandler,this),ee.add(this.element,"focus",this.focusHandler,this),ee.add(this.element,"focusout",this.focusOutHandler,this);var e=t.getElementsByTagName("label")[0];ee.add(e,"mousedown",this.labelMouseHandler,this),ee.add(e,"mouseup",this.labelMouseHandler,this),this.formElement&&ee.add(this.formElement,"reset",this.formResetHandler,this),"EJS-CHECKBOX"===this.tagName&&ee.add(this.element,"change",this.changeHandler,this)},e.prototype.updateHtmlAttributeToWrapper=function(){if(!F(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if(Cr.indexOf(i)>-1){var n=this.getWrapper();if("class"===i)ti([n],this.htmlAttributes[i].split(" "));else if("title"===i)n.setAttribute(i,this.htmlAttributes[i]);else if("style"===i){this.getWrapper().getElementsByClassName(Sr)[0].setAttribute(i,this.htmlAttributes[i])}else this.element.setAttribute(i,this.htmlAttributes[i])}}},e.prototype.click=function(){this.element.click()},e.prototype.focusIn=function(){this.element.focus()},wr([Ui()],e.prototype,"change",void 0),wr([Ui()],e.prototype,"created",void 0),wr([Hi(!1)],e.prototype,"checked",void 0),wr([Hi("")],e.prototype,"cssClass",void 0),wr([Hi(!1)],e.prototype,"disabled",void 0),wr([Hi(!1)],e.prototype,"indeterminate",void 0),wr([Hi("")],e.prototype,"label",void 0),wr([Hi("After")],e.prototype,"labelPosition",void 0),wr([Hi("")],e.prototype,"name",void 0),wr([Hi("")],e.prototype,"value",void 0),wr([Hi(!1)],e.prototype,"enableHtmlSanitizer",void 0),wr([Hi({})],e.prototype,"htmlAttributes",void 0),e=wr([Gi],e)}(un),Or=(function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),!1);function Er(t,e){var i=!1,n={left:0,top:0},r=t;if(!t||!e)return n;for(F(e.offsetParent)&&"fixed"===e.style.position&&(i=!0);(e.offsetParent||i)&&t&&e.offsetParent!==t;)n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent;for(t=r;(e.offsetParent||i)&&t&&e.offsetParent!==t;)n.left-=t.scrollLeft,n.top-=t.scrollTop,t=t.parentElement;return n}function Lr(t,e,i,n,r){if(sr=i+e==="topright"?void 0:r,sr=r,Or=!!n,!t)return{left:0,top:0};e||(e="left"),i||(i="top"),lr=t.ownerDocument,ar=t;return function(t,e,i){switch(or=ar.getBoundingClientRect(),e+t){case"topcenter":Ir(jr(),i),Tr(Dr(),i);break;case"topright":Ir(zr(),i),Tr(Dr(),i);break;case"centercenter":Ir(jr(),i),Tr(Mr(),i);break;case"centerright":Ir(zr(),i),Tr(Mr(),i);break;case"centerleft":Ir(Rr(),i),Tr(Mr(),i);break;case"bottomcenter":Ir(jr(),i),Tr(kr(),i);break;case"bottomright":Ir(zr(),i),Tr(kr(),i);break;case"bottomleft":Ir(Rr(),i),Tr(kr(),i);break;default:case"topleft":Ir(Rr(),i),Tr(Dr(),i)}return i}(e.toLowerCase(),i.toLowerCase(),{left:0,top:0})}function Ir(t,e){e.left=t}function Tr(t,e){e.top=t}function Ar(){return lr.documentElement.scrollTop||lr.body.scrollTop}function Br(){return lr.documentElement.scrollLeft||lr.body.scrollLeft}function kr(){return Or?or.bottom:or.bottom+Ar()}function Mr(){return Dr()+or.height/2}function Dr(){return Or?or.top:or.top+Ar()}function Rr(){return or.left+Br()}function zr(){return or.right+Br()-(sr?sr.width:0)}function jr(){return Rr()+or.width/2}function Nr(t,e,i,n){if(void 0===e&&(e=null),void 0===i&&(i={X:!1,Y:!1}),!i.Y&&!i.X)return{left:0,top:0};var r=t.getBoundingClientRect();if(cr=e,hr=t.ownerDocument,n||(n=Lr(t,"left","top")),i.X){var o=cr?Ur():eo(),s=Zr(),a=Kr(),l=s-n.left,h=n.left+r.width-a;r.width>o?n.left=l>0&&h<=0?a-r.width:h>0&&l<=0?s:l>h?a-r.width:s:l>0?n.left+=l:h>0&&(n.left-=h)}if(i.Y){var c=cr?Gr():to(),d=Yr(),p=Jr(),u=d-n.top,f=n.top+r.height-p;r.height>c?n.top=u>0&&f<=0?p-r.height:f>0&&u<=0?d:u>f?p-r.height:d:u>0?n.top+=u:f>0&&(n.top-=f)}return n}function Hr(t,e,i,n){void 0===e&&(e=null);var r=Lr(t,"left","top");i&&(r.left=i),n&&(r.top=n);var o=[];cr=e,hr=t.ownerDocument;var s=t.getBoundingClientRect(),a=r.top,l=r.left,h=r.left+s.width,c=Wr(a,r.top+s.height),d=Fr(l,h);return c.topSide&&o.push("top"),d.rightSide&&o.push("right"),d.leftSide&&o.push("left"),c.bottomSide&&o.push("bottom"),o}function _r(t,e,i,n,r,o,s,a,l){if(void 0===s&&(s=null),void 0===a&&(a={X:!0,Y:!0}),e&&t&&r&&o&&(a.X||a.Y)){var h={TL:null,TR:null,BL:null,BR:null},c={TL:null,TR:null,BL:null,BR:null},d=t.getBoundingClientRect(),p={posX:r,posY:o,offsetX:i,offsetY:n,position:{left:0,top:0}};cr=s,hr=e.ownerDocument,function(t,e,i,n,r){i.position=Lr(t,i.posX,i.posY,n,r),e.TL=Lr(t,"left","top",n,r),e.TR=Lr(t,"right","top",n,r),e.BR=Lr(t,"left","bottom",n,r),e.BL=Lr(t,"right","bottom",n,r)}(e,h,p,l,d),Vr(c,p,d),a.X&&function t(e,i,n,r,o,s){var a=Fr(i.TL.left,i.TR.left);n.TL.left-$r()<=Zr()&&(a.leftSide=!1);n.TR.left>=Kr()&&(a.rightSide=!1);(a.leftSide&&!a.rightSide||!a.leftSide&&a.rightSide)&&("right"===r.posX?r.posX="left":r.posX="right",r.offsetX=r.offsetX+o.width,r.offsetX=-1*r.offsetX,r.position=Lr(e,r.posX,r.posY,!1),Vr(i,r,o),s&&t(e,i,n,r,o,!1))}(e,c,h,p,d,!0),a.Y&&h.TL.top>-1&&function t(e,i,n,r,o,s){var a=Wr(i.TL.top,i.BL.top);n.TL.top-Qr()<=Yr()&&(a.topSide=!1);n.BL.top>=Jr()&&(a.bottomSide=!1);(a.topSide&&!a.bottomSide||!a.topSide&&a.bottomSide)&&("top"===r.posY?r.posY="bottom":r.posY="top",r.offsetY=r.offsetY+o.height,r.offsetY=-1*r.offsetY,r.position=Lr(e,r.posX,r.posY,!1,o),Vr(i,r,o),s&&t(e,i,n,r,o,!1))}(e,c,h,p,d,!0),function(t,e,i){var n=0,r=0;if(null!=t.offsetParent&&("absolute"===getComputedStyle(t.offsetParent).position||"relative"===getComputedStyle(t.offsetParent).position)){var o=Lr(t.offsetParent,"left","top",!1,i);n=o.left,r=o.top}t.style.top=e.position.top+e.offsetY-r+"px",t.style.left=e.position.left+e.offsetX-n+"px"}(t,p,d)}}function Vr(t,e,i){t.TL={top:e.position.top+e.offsetY,left:e.position.left+e.offsetX},t.TR={top:t.TL.top,left:t.TL.left+i.width},t.BL={top:t.TL.top+i.height,left:t.TL.left},t.BR={top:t.TL.top+i.height,left:t.TL.left+i.width}}function Fr(t,e){var i=!1,n=!1;return t-$r()<Zr()&&(i=!0),e>Kr()&&(n=!0),{leftSide:i,rightSide:n}}function Wr(t,e){var i=!1,n=!1;return t-Qr()<Yr()&&(i=!0),e>Jr()&&(n=!0),{topSide:i,bottomSide:n}}function Ur(){return cr.getBoundingClientRect().width}function Gr(){return cr.getBoundingClientRect().height}function qr(){return cr.getBoundingClientRect().left}function Xr(){return cr.getBoundingClientRect().top}function Yr(){return cr?Xr():0}function Zr(){return cr?qr():0}function Kr(){return cr?$r()+qr()+Ur():$r()+eo()}function Jr(){return cr?Qr()+Xr()+Gr():Qr()+to()}function Qr(){return hr.documentElement.scrollTop||hr.body.scrollTop}function $r(){return hr.documentElement.scrollLeft||hr.body.scrollLeft}function to(){return window.innerHeight}function eo(){var t=window.innerWidth;return t-(t-(F(document.documentElement)?0:document.documentElement.offsetWidth))}var io=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),no=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},ro=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return io(e,t),no([Hi("left")],e.prototype,"X",void 0),no([Hi("top")],e.prototype,"Y",void 0),e}(ln),oo="e-popup",so="e-rtl",ao="e-popup-open",lo="e-popup-close",ho=function(t){function e(e,i){return t.call(this,i,e)||this}return io(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"width":gi(this.element,{width:J(t.width)});break;case"height":gi(this.element,{height:J(t.height)});break;case"zIndex":gi(this.element,{zIndex:t.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var r=t.offsetX-e.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+r).toString()+"px";break;case"offsetY":var o=t.offsetY-e.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+o).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==t.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}},e.prototype.getModuleName=function(){return"popup"},e.prototype.resolveCollision=function(){this.checkCollision()},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.destroy=function(){this.element.classList.remove(oo,so,ao,lo),this.unwireEvents(),t.prototype.destroy.call(this)},e.prototype.render=function(){this.element.classList.add(oo);var t={};1e3!==this.zIndex&&(t.zIndex=this.zIndex),"auto"!==this.width&&(t.width=J(this.width)),"auto"!==this.height&&(t.height=J(this.height)),gi(this.element,t),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},e.prototype.wireEvents=function(){te.isDevice&&ee.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},e.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var t=0,e=this.getScrollableParent(this.getRelateToElement());t<e.length;t++){var i=e[t];ee.add(i,"scroll",this.scrollRefresh,this)}},e.prototype.unwireEvents=function(){te.isDevice&&ee.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},e.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var t=0,e=this.getScrollableParent(this.getRelateToElement());t<e.length;t++){var i=e[t];ee.remove(i,"scroll",this.scrollRefresh)}},e.prototype.getRelateToElement=function(){var t=""===this.relateTo||F(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:t},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},e.prototype.scrollRefresh=function(t){if("reposition"===this.actionOnScroll?this.element.offsetParent===t.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==t.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var e=this.isElementOnViewport(this.getRelateToElement(),t.target);e||this.targetInvisibleStatus?e&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},e.prototype.isElementOnViewport=function(t,e){for(var i=this.getScrollableParent(t),n=0;n<i.length;n++)if(!this.isElementVisible(t,i[n]))return!1;return!0},e.prototype.isElementVisible=function(t,e){var i=this.checkGetBoundingClientRect(t);if(!i.height||!i.width)return!1;if(F(this.checkGetBoundingClientRect(e))){var n=window,r={top:n.scrollY,left:n.scrollX,right:n.scrollX+n.outerWidth,bottom:n.scrollY+n.outerHeight},o=Lr(t),s={top:o.top,left:o.left,right:o.left+i.width,bottom:o.top+i.height},a={top:r.bottom-s.top,left:r.right-s.left,bottom:s.bottom-r.top,right:s.right-r.left};return a.top>0&&a.left>0&&a.right>0&&a.bottom>0}var l=e.getBoundingClientRect();return!(i.bottom<l.top||i.bottom>l.bottom||i.right>l.right||i.left<l.left)},e.prototype.preRender=function(){},e.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(so):this.element.classList.remove(so)},e.prototype.setContent=function(){F(this.content)||(this.element.innerHTML="","string"==typeof this.content?this.element.textContent=this.content:this.element.appendChild(this.content))},e.prototype.orientationOnChange=function(){var t=this;setTimeout(function(){t.refreshPosition()},200)},e.prototype.refreshPosition=function(t,e){F(t)||this.checkFixedParent(t),this.reposition(),e||this.checkCollision()},e.prototype.reposition=function(){var t,e,i=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)t={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){var n=this.element.style.display,r=void 0;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(r=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),t="string"==typeof this.position.X?{left:e.left,top:this.position.Y}:{left:this.position.X,top:e.top},this.element.style.display=n,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=r)}else if(i){n=this.element.style.display;this.element.style.display="block",t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=n}else t={left:0,top:0};F(t)||(this.element.style.left=t.left+"px",this.element.style.top=t.top+"px")},e.prototype.checkGetBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(t){return null}},e.prototype.getAnchorPosition=function(t,e,i,n,r){var o=this.checkGetBoundingClientRect(e),s=this.checkGetBoundingClientRect(t);if(F(o)||F(s))return null;var a=t,l={left:0,top:0};switch(e.offsetParent&&"BODY"===e.offsetParent.tagName&&"BODY"===t.tagName?l=Lr(t):(e.classList.contains("e-dlg-modal")&&"BODY"!==a.tagName&&(e=e.parentElement),l=Er(a,e)),i.X){default:case"left":break;case"center":e.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.left+=window.innerWidth/2-o.width/2:"container"===this.targetType?l.left+=s.width/2-o.width/2:l.left+=s.width/2;break;case"right":e.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.left+=window.innerWidth-o.width:"container"===this.targetType?l.left+=s.width-o.width:l.left+=s.width}switch(i.Y){default:case"top":break;case"center":e.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.top+=window.innerHeight/2-o.height/2:"container"===this.targetType?l.top+=s.height/2-o.height/2:l.top+=s.height/2;break;case"bottom":e.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.top+=window.innerHeight-o.height:"container"===this.targetType?l.top+=s.height-o.height:l.top+=s.height}return l.left+=n,l.top+=r,l},e.prototype.callFlip=function(t){var e=this.getRelateToElement();_r(this.element,e,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,t,this.fixedParent)},e.prototype.callFit=function(t){if(0!==Hr(this.element,this.viewPortElement).length)if(F(this.viewPortElement)){var e=Nr(this.element,this.viewPortElement,t);t.X&&(this.element.style.left=e.left+"px"),t.Y&&(this.element.style.top=e.top+"px")}else{var i=this.checkGetBoundingClientRect(this.element),n=this.checkGetBoundingClientRect(this.viewPortElement);if(F(i)||F(n))return null;t&&!0===t.Y&&(n.top>i.top?this.element.style.top="0px":n.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-n.bottom)+"px")),t&&!0===t.X&&(n.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-n.right)+"px":n.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(n.left-i.left)+"px"))}},e.prototype.checkCollision=function(){var t=this.collision.X,e=this.collision.Y;"none"===t&&"none"===e||("flip"===t&&"flip"===e?this.callFlip({X:!0,Y:!0}):"fit"===t&&"fit"===e?this.callFit({X:!0,Y:!0}):("flip"===t?this.callFlip({X:!0,Y:!1}):"flip"===e&&this.callFlip({Y:!0,X:!1}),"fit"===t?this.callFit({X:!0,Y:!1}):"fit"===e&&this.callFit({X:!1,Y:!0})))},e.prototype.show=function(t,e){var i=this;if(this.wireEvents(),1e3===this.zIndex||!F(e)){var n=F(e)?this.element:e;this.zIndex=po(n),gi(this.element,{zIndex:this.zIndex})}t=F(t)||"object"!=typeof t?this.showAnimation:t,"none"===this.collision.X&&"none"===this.collision.Y||(ei([this.element],lo),ti([this.element],ao),this.checkCollision(),ei([this.element],ao),ti([this.element],lo)),F(t)?(ei([this.element],lo),ti([this.element],ao),this.trigger("open")):(t.begin=function(){i.isDestroyed||(ei([i.element],lo),ti([i.element],ao))},t.end=function(){i.isDestroyed||i.trigger("open")},new Ji(t).animate(this.element))},e.prototype.hide=function(t){var e=this;t=F(t)||"object"!=typeof t?this.hideAnimation:t,F(t)?(ei([this.element],ao),ti([this.element],lo),this.trigger("close")):(t.end=function(){e.isDestroyed||(ei([e.element],ao),ti([e.element],lo),e.trigger("close"))},new Ji(t).animate(this.element)),this.unwireEvents()},e.prototype.getScrollableParent=function(t){return this.checkFixedParent(t),co(t,this.fixedParent)},e.prototype.checkFixedParent=function(t){for(var e=t.parentElement;e&&"HTML"!==e.tagName;){var i=getComputedStyle(e);"fixed"===i.position&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.position="fixed",this.fixedParent=!0),e=e.parentElement,F(this.element.offsetParent)&&"fixed"===i.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},no([Hi("auto")],e.prototype,"height",void 0),no([Hi("auto")],e.prototype,"width",void 0),no([Hi(null)],e.prototype,"content",void 0),no([Hi("container")],e.prototype,"targetType",void 0),no([Hi(null)],e.prototype,"viewPortElement",void 0),no([Hi({X:"none",Y:"none"})],e.prototype,"collision",void 0),no([Hi("")],e.prototype,"relateTo",void 0),no([_i({},ro)],e.prototype,"position",void 0),no([Hi(0)],e.prototype,"offsetX",void 0),no([Hi(0)],e.prototype,"offsetY",void 0),no([Hi(1e3)],e.prototype,"zIndex",void 0),no([Hi(!1)],e.prototype,"enableRtl",void 0),no([Hi("reposition")],e.prototype,"actionOnScroll",void 0),no([Hi(null)],e.prototype,"showAnimation",void 0),no([Hi(null)],e.prototype,"hideAnimation",void 0),no([Ui()],e.prototype,"open",void 0),no([Ui()],e.prototype,"close",void 0),no([Ui()],e.prototype,"targetExitViewport",void 0),e=no([Gi],e)}(un);function co(t,e){for(var i=getComputedStyle(t),n=[],r=/(auto|scroll)/,o=t.parentElement;o&&"HTML"!==o.tagName;){var s=getComputedStyle(o);"absolute"===i.position&&"static"===s.position||!r.test(s.overflow+s.overflowY+s.overflowX)||n.push(o),o=o.parentElement}return e||n.push(document),n}function po(t){for(var e=t.parentElement,i=[];e&&"BODY"!==e.tagName;){var n=document.defaultView.getComputedStyle(e,null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(e,null).getPropertyValue("position");"auto"!==n&&"static"!==r&&i.push(n),e=e.parentElement}for(var o=[],s=0;s<document.body.children.length;s++)if(!t.isEqualNode(document.body.children[s])){n=document.defaultView.getComputedStyle(document.body.children[s],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(document.body.children[s],null).getPropertyValue("position");"auto"!==n&&"static"!==r&&o.push(n)}o.push("999");var a=[];if(!F(t.parentElement)&&"BODY"!==t.parentElement.tagName){var l=[].slice.call(t.parentElement.children);for(s=0;s<l.length;s++){n=document.defaultView.getComputedStyle(l[s],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(l[s],null).getPropertyValue("position");"auto"!==n&&"static"!==r&&a.push(n)}}var h=i.concat(o,a),c=Math.max.apply(Math,h)+1;return c>2147483647?2147483647:c}function uo(t){void 0===t&&(t=["*"]);for(var e=[],i=0;i<t.length;i++)for(var n=document.getElementsByTagName(t[i]),r=0;r<n.length;r++){var o=document.defaultView.getComputedStyle(n[r],null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(n[r],null).getPropertyValue("position");"auto"!==o&&"static"!==s&&e.push(o)}var a=Math.max.apply(Math,e)+1;return a>2147483647?2147483647:a}var fo,go,mo,yo,vo,bo,wo,So,xo=["north-west","north","north-east","west","east","south-west","south","south-east"],Co=0,Po=0,Oo=0,Eo=0,Lo=0,Io=0,To="e-resize-handle",Ao="e-focused-handle",Bo=["e-restrict-left"],ko="e-resize-viewport",Mo=null,Do=null,Ro=null,zo=!0,jo=0,No=!0;function Ho(t){Mo=t.resizeBegin,Do=t.resizing,Ro=t.resizeComplete,fo=_o(t.element),wo=_o(t.boundary);for(var e=t.direction.split(" "),i=0;i<e.length;i++){var n=$e("div",{className:"e-icons "+To+" e-"+e[i]});fo.appendChild(n)}mo=t.minHeight,vo=t.minWidth,bo=t.maxWidth,yo=t.maxHeight,t.proxy&&t.proxy.element&&t.proxy.element.classList.contains("e-dialog")?Vo(t.proxy):Vo()}function _o(t){var e;return F(t)||(e="string"==typeof t?document.querySelector(t):t),e}function Vo(t){F(t)&&(t=this);for(var e=fo.querySelectorAll("."+To),i=0;i<e.length;i++){go=e[i],ee.add(go,"mousedown",Wo,t);var n="msie"===te.info.name?"pointerdown":"touchstart";ee.add(go,n,qo,t)}}function Fo(t){return t.indexOf("mouse")>-1?"mouse":"touch"}function Wo(t){if(t.preventDefault(),fo=t.target.parentElement,Go(),Lo=t.pageX,Io=t.pageY,t.target.classList.add(Ao),F(Mo)||!0!==Mo(t,this)){var e=F(wo)?document:wo;ee.add(e,"mousemove",Xo,this),ee.add(document,"mouseup",Uo,this);for(var i=0;i<Bo.length;i++)zo=!fo.classList.contains(Bo[i])}}function Uo(t){var e="msie"===te.info.name?"pointermove":"touchmove",i="msie"===te.info.name?"pointerup":"touchend",n=F(wo)?document:wo;ee.remove(n,"mousemove",Xo),ee.remove(n,e,Xo);var r="msie"===te.info.name?"pointerdown":"touchstart";ee.remove(n,r,Xo),F(document.body.querySelector("."+Ao))||document.body.querySelector("."+Ao).classList.remove(Ao),F(Ro)||Ro(t,this),ee.remove(document,"mouseup",Uo),ee.remove(document,i,Uo)}function Go(){Co=parseFloat(getComputedStyle(fo,null).getPropertyValue("width").replace("px","")),Po=parseFloat(getComputedStyle(fo,null).getPropertyValue("height").replace("px","")),Oo=fo.getBoundingClientRect().left,Eo=fo.getBoundingClientRect().top}function qo(t){fo=t.target.parentElement,Go();var e=t.touches?t.changedTouches[0]:t;if(Lo=e.pageX,Io=e.pageY,F(Mo)||!0!==Mo(t,this)){var i="msie"===te.info.name?"pointermove":"touchmove",n="msie"===te.info.name?"pointerup":"touchend",r=F(wo)?document:wo;ee.add(r,i,Xo,this),ee.add(document,n,Uo)}}function Xo(t){if(t.target.classList.contains(To)&&t.target.classList.contains(Ao)?go=t.target:F(document.body.querySelector("."+Ao))||(go=document.body.querySelector("."+Ao)),!F(go)){for(var e="",i=0;i<xo.length;i++)go.classList.contains("e-"+xo[i])&&(e=xo[i]);switch(F(Do)||Do(t,this),e){case"south":Zo(t);break;case"north":Ko(t);break;case"west":Jo(t);break;case"east":Qo(t);break;case"south-east":Zo(t),Qo(t);break;case"south-west":Zo(t),Jo(t);break;case"north-east":Ko(t),Qo(t);break;case"north-west":Ko(t),Jo(t)}}}function Yo(t){return t.getBoundingClientRect()}function Zo(t){var e,i=document.documentElement.clientHeight,n=!1,r=(t.touches?t.changedTouches[0]:t).pageY,o=Yo(fo);F(wo)||(e=Yo(wo)),F(wo)?F(wo)&&(i-r>=0||o.top<0)&&(n=!0):n=!0;var s=Po+(r-Io);s=s>mo?s:mo;var a=0;F(wo)||(a=e.top);var l=F(wo)?0:wo.offsetHeight-wo.clientHeight,h=o.top-a-l/2;if(h=h<0?0:h,o.top>0&&h+s>yo){if(n=!1,fo.classList.contains(ko))return;fo.style.height=yo-parseInt(h.toString(),10)+"px"}else{var c=0;if(n){o.top<0&&i+(o.height+o.top)>0&&s+(c=o.top)<=30&&(s=o.height-(o.height+o.top)+30),s+o.top>=yo&&(fo.style.height=o.height+(i-(o.height+o.top))+"px");var d=F(wo)?c:h;s>=mo&&s+d<=yo&&(fo.style.height=s+"px")}}}function Ko(t){var e,i=!1,n="mouse"===Fo(t.type)?t.pageY:t.touches[0].pageY,r=Yo(fo);F(wo)||(e=Yo(wo)),!F(wo)&&r.top-e.top>0?i=!0:F(wo)&&n>0&&(i=!0);var o=Po-(n-Io);if(Yo(fo).bottom+o>yo&&(i=!1,fo.style.height=yo-Yo(fo).bottom+"px"),i&&o>=mo&&o<=yo){var s=0;F(wo)||(s=e.top);var a=Eo-s+(n-Io);a=a>0?a:1,fo.style.height=o+"px",fo.style.top=a+"px"}}function Jo(t){var e,i=document.documentElement.clientWidth,n=!1;F(wo)||(e=Yo(wo));var r="mouse"===Fo(t.type)?t.pageX:t.touches[0].pageX,o=Yo(fo),s=F(wo)?0:wo.offsetWidth-wo.clientWidth,a=F(wo)?0:e.left,l=F(wo)?0:e.width;F(So)&&(F(wo)?So=i:(So=o.left-a-s/2+o.width,So+=l-s-So)),!F(wo)&&o.left-e.left+o.width+(e.right-o.right)-s<=bo?n=!0:F(wo)&&r>=0&&(n=!0);var h=Co-(r-Lo);if(zo&&(h=h>So?So:h),n&&h>=vo&&h<=bo){var c=0;F(wo)||(c=e.left);var d=Oo-c+(r-Lo);d=d>0?d:1,h!==jo&&No&&(fo.style.width=h+"px"),zo&&(fo.style.left=d+"px",No=1!==d)}jo=h}function Qo(t){var e,i=document.documentElement.clientWidth,n=!1;F(wo)||(e=Yo(wo));var r=(t.touches?t.changedTouches[0]:t).pageX,o=Yo(fo);!F(wo)&&(o.left-e.left+o.width<bo||o.right-e.left>o.width)?n=!0:F(wo)&&i-r>0&&(n=!0);var s=Co+(r-Lo),a=0;if(F(wo)||(a=e.left),o.left-a+s>bo){if(n=!1,fo.classList.contains(ko))return;fo.style.width=bo-(o.left-a)+"px"}n&&s>=vo&&s<=bo&&(fo.style.width=s+"px")}function $o(t){mo=t}function ts(){for(var t=fo.querySelectorAll("."+To),e=0;e<t.length;e++)ai(t[e])}var es,is=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ns=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},rs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return is(e,t),ns([Hi()],e.prototype,"buttonModel",void 0),ns([Hi("Button")],e.prototype,"type",void 0),ns([Ui()],e.prototype,"click",void 0),e}(ln),os=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return is(e,t),ns([Hi("Fade")],e.prototype,"effect",void 0),ns([Hi(400)],e.prototype,"duration",void 0),ns([Hi(0)],e.prototype,"delay",void 0),e}(ln),ss="e-dialog",as="e-dlg-target",ls="e-scroll-disabled",hs="e-dlg-fullscreen",cs="Information",ds="e-scroll-disabled",ps="e-alert-dialog",us="e-confirm-dialog",fs=function(t){function e(e,i){return t.call(this,e,i)||this}return is(e,t),e.prototype.render=function(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=this.minHeight.toString()),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()},e.prototype.preRender=function(){var t=this;this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(e){t.hide(e)},this.dlgOverlayClickEventHandler=function(e){t.trigger("overlayClick",e),t.focusContent()};if(this.l10n=new Ln("dialog",{close:"Close"},this.locale),this.checkPositionData(),F(this.target)){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=e}},e.prototype.isNumberValue=function(t){return/^[-+]?\d*\.?\d+$/.test(t)},e.prototype.checkPositionData=function(){if(!F(this.position)){if(!F(this.position.X)&&"number"!=typeof this.position.X)if(this.isNumberValue(this.position.X)){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=t}if(!F(this.position.Y)&&"number"!=typeof this.position.Y)if(this.isNumberValue(this.position.Y)){t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=t}}},e.prototype.getEle=function(t,e){for(var i=void 0,n=0;n<t.length;n++)if(t[n].classList.contains(e)){i=t[n];break}return i},e.prototype.getMinHeight=function(){var t="0px",e="0px";F(this.element.querySelector(".e-dlg-header-content"))||(t=getComputedStyle(this.headerContent).height);var i=this.getEle(this.element.children,"e-footer-content");F(i)||(e=getComputedStyle(i).height);var n=parseInt(t.slice(0,t.indexOf("p")),10),r=parseInt(e.slice(0,e.indexOf("p")),10);return $o(n+30+r),n+30+r},e.prototype.onResizeStart=function(t,e){return e.trigger("resizeStart",t),t.cancel},e.prototype.onResizing=function(t,e){e.trigger("resizing",t)},e.prototype.onResizeComplete=function(t,e){e.trigger("resizeStop",t)},e.prototype.setResize=function(){if(this.enableResize){if(this.isBlazorServerRender()&&!F(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add("e-dlg-resizable");var t=getComputedStyle(this.element).minHeight,e=getComputedStyle(this.element).minWidth,i=this.enableRtl?"south-west":"south-east";this.isModal&&this.enableRtl?this.element.classList.add("e-restrict-left"):this.isModal&&this.target===document.body&&this.element.classList.add("e-resize-viewport"),Ho({element:this.element,direction:i,minHeight:parseInt(t.slice(0,e.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(e.slice(0,e.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this})}else ts(),this.isModal?this.element.classList.remove("e-restrict-left"):this.element.classList.remove("e-resize-viewport"),this.element.classList.remove("e-dlg-resizable")},e.prototype.keyDown=function(t){var e=this;if(9===t.keyCode&&this.isModal){var i=void 0;if(F(this.btnObj)||(i=this.btnObj[this.btnObj.length-1]),F(this.btnObj)&&!F(this.ftrTemplateContent)){var n=this.ftrTemplateContent.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');i={element:n[n.length-1]}}F(i)||document.activeElement!==i.element||t.shiftKey||(t.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&t.shiftKey&&(t.preventDefault(),F(i)||i.element.focus())}var r,o=document.activeElement,s=["input","textarea"].indexOf(o.tagName.toLowerCase())>-1,a=!1;(s||(a=o.hasAttribute("contenteditable")&&"true"===o.getAttribute("contenteditable")),27===t.keyCode&&this.closeOnEscape&&this.hide(t),13===t.keyCode&&!t.ctrlKey&&"textarea"!==o.tagName.toLowerCase()&&s&&!F(this.primaryButtonEle)||13===t.keyCode&&t.ctrlKey&&("textarea"===o.tagName.toLowerCase()||a)&&!F(this.primaryButtonEle))&&(this.buttons.some(function(t,e){r=e;var i=t.buttonModel;return!F(i)&&!0===i.isPrimary})&&"function"==typeof this.buttons[r].click&&setTimeout(function(){e.buttons[r].click.call(e,t)}))},e.prototype.initialize=function(){F(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||ti([this.element],ss),te.isDevice&&ti([this.element],"e-device"),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()},e.prototype.initRender=function(){var t=this;if(this.initialRender=!0,this.isBlazorServerRender()||hi(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&F(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&F(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""===this.header||F(this.header)||this.setHeader(),this.showCloseIcon&&this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||F(this.footerTemplate)?F(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&(F(this.buttons[0].buttonModel)||""!==this.footerTemplate||this.setButton()),this.allowDragging&&!F(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(hi(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&F(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(var e=0,i=this.dlgContainer.children;e<i.length;e++)i[e].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=i[e])}if(!0!==this.element.classList.contains(ps)&&!0!==this.element.classList.contains(us)&&!F(this.element.parentElement)){var n=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),n.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}F(this.targetEle)||(this.isModal?this.targetEle.appendChild(this.dlgContainer):this.targetEle.appendChild(this.element)),this.popupObj=new ho(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(e){var i={container:t.isModal?t.dlgContainer:t.element,element:t.element,target:t.target,preventFocus:!1};t.enableResize&&t.resetResizeIcon(),t.trigger("open",i,function(e){e.preventFocus||t.focusContent()})},close:function(e){t.isModal&&ti([t.dlgOverlay],"e-fade"),t.unBindEvent(t.element),t.isModal&&(t.dlgContainer.style.display="none"),t.trigger("close",t.closeArgs);var i=document.activeElement;F(i)||F(i.blur)||i.blur(),F(t.storeActiveElement)||F(t.storeActiveElement.focus)||t.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(ti([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1},e.prototype.resetResizeIcon=function(){var t=this.getMinHeight();if(this.targetEle.offsetHeight<t){var e=this.enableRtl?"e-south-west":"e-south-east",i=this.element.querySelector("."+e);F(i)||(i.style.bottom="-"+t.toString()+"px")}},e.prototype.setOverlayZindex=function(t){var e;e=F(t)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:t,this.dlgOverlay.style.zIndex=(e-1).toString(),this.dlgContainer.style.zIndex=e.toString()},e.prototype.positionChange=function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},e.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},e.prototype.setAllowDragging=function(){var t=this;this.dragObj=new bn(this.element,{clone:!1,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:function(e){t.trigger("dragStart",e,function(t){$()&&t.bindEvents(e.dragElement)})},dragStop:function(e){t.isModal&&(F(t.position)||t.dlgContainer.classList.remove("e-dlg-"+t.position.X+"-"+t.position.Y),t.element.style.position="relative"),t.trigger("dragStop",e),t.element.classList.remove("e-restrict-left")},drag:function(e){t.trigger("drag",e)}}),F(this.targetEle)||(this.dragObj.dragArea=this.targetEle)},e.prototype.setButton=function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var t=0;t<this.buttons.length;t++){var e=F(this.buttons[t].type)?"button":this.buttons[t].type.toLowerCase(),i=this.createElement("button",{attrs:{type:e}});this.buttonContent.push(i.outerHTML)}this.setFooterTemplate()}t=0;for(var n,r=this.element.children;t<r.length;t++)r[t].classList.contains("e-footer-content")&&(n=r[t].querySelectorAll("button"));for(t=0;t<this.buttons.length;t++)this.isBlazorServerRender()||(this.btnObj[t]=new vr(this.buttons[t].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector(".e-footer-content")),!F(this.ftrTemplateContent)&&"function"==typeof this.buttons[t].click&&n.length>0&&ee.add(n[t],"click",this.buttons[t].click,this),this.isBlazorServerRender()||F(this.ftrTemplateContent)||(this.btnObj[t].appendTo(this.ftrTemplateContent.children[t]),this.btnObj[t].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])},e.prototype.setContent=function(){if(hi(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement)this.contentEle.appendChild(this.innerContentElement);else if(!F(this.content)&&""!==this.content||!this.initialRender){Object.keys(window);"string"!=typeof this.content||$()?this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle):this.contentEle.innerHTML=this.sanitizeHelper(this.content)}F(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(this.isBlazorServerRender()||!te.isIE||""!==this.element.style.width||F(this.width)||(this.element.style.width=J(this.width)),this.setMaxHeight())},e.prototype.setTemplate=function(t,e){var i,n,r;Object.keys(window);n=e.classList.contains("e-dlg-header")?this.element.id+"header":e.classList.contains("e-footer-content")?this.element.id+"footerTemplate":this.element.id+"content",F(t.outerHTML)?"string"!=typeof t||$()&&!this.isStringTemplate?(i=Te(t),r=t):e.innerHTML=this.sanitizeHelper(t):e.appendChild(t);var o=[];if(!F(i)){for(var s=0,a=i({},null,null,n,!($()&&!this.isStringTemplate&&0===r.indexOf("<div>Blazor"))||this.isStringTemplate);s<a.length;s++){var l=a[s];o.push(l)}oi([].slice.call(o),e)}},e.prototype.sanitizeHelper=function(t){if(this.enableHtmlSanitizer){var e=zn.beforeSanitize();V(e,e,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",e),e.cancel&&!F(e.helper)?t=e.helper(t):e.cancel||(t=zn.serializeValue(e,t))}return t},e.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var t=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!F(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=t,te.isIE&&"auto"===this.height&&!F(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},e.prototype.setEnableRTL=function(){this.isBlazorServerRender()||(this.enableRtl?ti([this.element],"e-rtl"):ei([this.element],"e-rtl")),F(this.element.querySelector(".e-resize-handle"))||(ts(),this.setResize())},e.prototype.setTargetContent=function(){var t=this;if(F(this.content)||""===this.content){var e=""!==this.element.innerHTML.replace(/\s|<(\/?|\!?)(!--!--)>/g,"");(this.element.children.length>0||e)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(function(e){8!==e.nodeType&&t.innerContentElement.appendChild(e)}))}},e.prototype.setHeader=function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:"e-dlg-header"}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle),hi(this.element,{"aria-labelledby":this.element.id+"_title"}),this.element.insertBefore(this.headerContent,this.element.children[0])},e.prototype.setFooterTemplate=function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:"e-footer-content"}),""===this.footerTemplate||F(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent),this.element.appendChild(this.ftrTemplateContent)},e.prototype.createHeaderContent=function(){F(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:"e-dlg-header-content"}))},e.prototype.renderCloseIcon=function(){this.closeIcon=this.createElement("button",{className:"e-dlg-closeicon-btn",attrs:{type:"button"}}),this.closeIconBtnObj=new vr({cssClass:"e-flat",iconCss:"e-icon-dlg-close e-icons"}),this.closeIconTitle(),F(this.headerContent)?(this.createHeaderContent(),ri([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):ri([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon)},e.prototype.closeIconTitle=function(){this.l10n.setLocale(this.locale);var t=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",t),this.closeIcon.setAttribute("aria-label",t)},e.prototype.setCSSClass=function(t){this.cssClass&&ti([this.element],this.cssClass.split(" ")),t&&ei([this.element],t.split(" "))},e.prototype.setIsModal=function(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.element.classList.remove("e-popup-open"),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),ti([this.element],"e-dlg-modal"),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)},e.prototype.getValidFocusNode=function(t){for(var e,i=0;i<t.length;i++)if(((e=t[i]).clientHeight>0||"a"===e.tagName.toLowerCase()&&e.hasAttribute("href"))&&e.tabIndex>-1&&!e.disabled&&!this.disableElement(e,'[disabled],[aria-disabled="true"],[type="hidden"]'))return e;return e},e.prototype.focusableElements=function(t){if(!F(t)){var e=t.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(e)}return null},e.prototype.getAutoFocusNode=function(t){var e=t.querySelector(".e-dlg-closeicon-btn"),i=t.querySelectorAll("[autofocus]"),n=this.getValidFocusNode(i);if($()&&(this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0]),F(n)){if(!F(n=this.focusableElements(this.contentEle)))return n;if(!F(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else e=n;return e},e.prototype.disableElement=function(t,e){var i=t?t.matches||t.webkitMatchesSelector||t.msMatchesSelector:null;if(i)for(;t;t=t.parentNode)if(t instanceof Element&&i.call(t,e))return t;return null},e.prototype.focusContent=function(){var t=this.getAutoFocusNode(this.element);(F(t)?this.element:t).focus(),this.bindEvent(this.element)},e.prototype.bindEvent=function(t){ee.add(t,"keydown",this.keyDown,this)},e.prototype.unBindEvent=function(t){ee.remove(t,"keydown",this.keyDown)},e.prototype.updateSanitizeContent=function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))},e.prototype.isBlazorServerRender=function(){return $()&&this.isServerRendered},e.prototype.getModuleName=function(){return"dialog"},e.prototype.onPropertyChanged=function(t,e){if(this.element.classList.contains(ss))for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"content":F(this.content)||""===this.content?F(this.contentEle)||(ai(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),F(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?this.isBlazorServerRender()&&!F(this.element.querySelector(".e-dlg-content"))||this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||F(this.header)?this.headerEle&&(ai(this.headerEle),this.headerEle=null):this.isBlazorServerRender()&&!F(this.element.querySelector(".e-dlg-header-content"))||this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||F(this.footerTemplate)){if(!this.ftrTemplateContent)return;ai(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else this.isBlazorServerRender()&&!F(this.element.querySelector(".e-footer-content"))||this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName("e-icon-dlg-close").length>0?this.showCloseIcon||""!==this.header&&!F(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():ai(this.closeIcon):(ai(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":gi(this.element,{height:J(t.height)});break;case"width":gi(this.element,{width:J(t.width)});break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(e.cssClass);break;case"buttons":var r=this.buttons.length;F(this.ftrTemplateContent)||this.isBlazorServerRender()||(ai(this.ftrTemplateContent),this.ftrTemplateContent=null);for(var o=0;o<r;o++)F(this.buttons[o].buttonModel)||(this.footerTemplate="",this.setButton());break;case"allowDragging":this.allowDragging&&!F(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(t.target);break;case"position":if(this.checkPositionData(),this.isModal){var s=F(e.position.X)?this.position.X:e.position.X,a=F(e.position.Y)?this.position.Y:e.position.Y;this.dlgContainer.classList.contains("e-dlg-"+s+"-"+a)&&this.dlgContainer.classList.remove("e-dlg-"+s+"-"+a)}this.positionChange();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize()}}},e.prototype.setTarget=function(t){this.popupObj.relateTo=t,this.target=t,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()},e.prototype.updateIsModal=function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",F(this.targetEle)||this.targetEle.appendChild(this.dlgContainer);else{for(ei([this.element],"e-dlg-modal"),ei([document.body],[as,ls]),ai(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&ee.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},e.prototype.setzIndex=function(t,e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.zIndex=po(t),this.isProtectedOnChange=i,e&&(this.popupObj.zIndex=this.zIndex)},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.destroy=function(){if(!this.isDestroyed){var e=["e-rtl","e-dlg-modal","e-dlg-resizable","e-restrict-left",hs,"e-device"],i=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(ei([this.targetEle],[as,ls]),this.element.classList.contains(hs)&&ei([document.body],[as,ls]),this.isModal&&ei([F(this.targetEle)?document.body:this.targetEle],ls),this.unWireEvents(),!F(this.btnObj))for(var n=0;n<this.btnObj.length;n++)this.btnObj[n].destroy();if(F(this.dragObj)||this.dragObj.destroy(),this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),ei([this.element],e),F(this.cssClass)||""===this.cssClass||ei([this.element],this.cssClass.split(" ")),F(this.refElement)||F(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),ai(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(ai(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),ai(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!F(this.element.children))for(n=0;n<=this.element.children.length;n++)n-=n,ai(this.element.children[n]);for(n=0;n<i.length;n++)this.element.removeAttribute(i[n]);this.isBlazorServerRender()?this.isDestroyed=!0:t.prototype.destroy.call(this)}},e.prototype.wireEvents=function(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&ee.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&ee.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},e.prototype.unWireEvents=function(){if(this.showCloseIcon&&ee.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&ee.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!F(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(var t=0;t<this.buttons.length;t++)"function"==typeof this.buttons[t].click&&ee.remove(this.ftrTemplateContent.children[t],"click",this.buttons[t].click)},e.prototype.refreshPosition=function(){this.popupObj.refreshPosition()},e.prototype.show=function(t){var e=this;if(this.element.classList.contains(ss)&&(!this.element.classList.contains("e-popup-open")||!F(t))){F(t)||this.fullScreen(t);var i=$()?{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,maxHeight:this.element.style.maxHeight}:{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",i,function(t){if(!t.cancel){e.element.style.maxHeight!==i.maxHeight&&(e.allowMaxHeight=!1,e.element.style.maxHeight=i.maxHeight),e.storeActiveElement=document.activeElement,e.element.tabIndex=-1,e.isModal&&!F(e.dlgOverlay)&&(e.dlgOverlay.style.display="block",e.dlgContainer.style.display="flex",ei([e.dlgOverlay],"e-fade"),F(e.targetEle)?ti([document.body],[as,ls]):(e.targetEle===document.body?e.dlgContainer.style.position="fixed":e.dlgContainer.style.position="absolute",e.dlgOverlay.style.position="absolute",e.element.style.position="relative",ti([e.targetEle],[as,ls])));var n={name:e.animationSettings.effect+"In",duration:e.animationSettings.duration,delay:e.animationSettings.delay},r=e.isModal?e.element.parentElement:e.element;e.calculatezIndex&&(e.setzIndex(r,!0),gi(e.element,{zIndex:e.zIndex}),e.isModal&&e.setOverlayZindex(e.zIndex)),"None"===e.animationSettings.effect?e.popupObj.show():e.popupObj.show(n),e.dialogOpen=!0;var o=e.isProtectedOnChange;e.isProtectedOnChange=!0,e.visible=!0,e.preventVisibility=!0,e.isProtectedOnChange=o}})}},e.prototype.hide=function(t){var e=this;if(this.element.classList.contains(ss)&&this.preventVisibility){var i=$()?{cancel:!1,isInteracted:!!t,element:this.element,container:this.isModal?this.dlgContainer:this.element,event:t}:{cancel:!1,isInteracted:!!t,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:t};this.closeArgs=i,this.trigger("beforeClose",i,function(t){if(!t.cancel){e.isModal&&(F(e.targetEle)?ei([document.body],[as,ls]):ei([e.targetEle],[as,ls]));var i={name:e.animationSettings.effect+"Out",duration:e.animationSettings.duration,delay:e.animationSettings.delay};"None"===e.animationSettings.effect?e.popupObj.hide():e.popupObj.hide(i),e.dialogOpen=!1;var n=e.isProtectedOnChange;e.isProtectedOnChange=!0,e.visible=!1,e.preventVisibility=!1,e.isProtectedOnChange=n}})}},e.prototype.fullScreen=function(t){this.element.offsetTop,this.element.offsetLeft;if(t){ti([this.element],hs);var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=F(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=e,ti([document.body],[as,ls]),this.allowDragging&&!F(this.dragObj)&&this.dragObj.destroy()}else ei([this.element],hs),ei([document.body],[as,ls]),this.allowDragging&&!F(this.headerContent)&&this.setAllowDragging();return t},e.prototype.getButtons=function(t){return F(t)?this.btnObj:this.btnObj[t]},ns([Hi("")],e.prototype,"content",void 0),ns([Hi(!0)],e.prototype,"enableHtmlSanitizer",void 0),ns([Hi(!1)],e.prototype,"showCloseIcon",void 0),ns([Hi(!1)],e.prototype,"isModal",void 0),ns([Hi("")],e.prototype,"header",void 0),ns([Hi(!0)],e.prototype,"visible",void 0),ns([Hi(!1)],e.prototype,"enableResize",void 0),ns([Hi("auto")],e.prototype,"height",void 0),ns([Hi("")],e.prototype,"minHeight",void 0),ns([Hi("100%")],e.prototype,"width",void 0),ns([Hi("")],e.prototype,"cssClass",void 0),ns([Hi(1e3)],e.prototype,"zIndex",void 0),ns([Hi(null)],e.prototype,"target",void 0),ns([Hi("")],e.prototype,"footerTemplate",void 0),ns([Hi(!1)],e.prototype,"allowDragging",void 0),ns([Fi([{}],rs)],e.prototype,"buttons",void 0),ns([Hi(!0)],e.prototype,"closeOnEscape",void 0),ns([_i({},os)],e.prototype,"animationSettings",void 0),ns([_i({X:"center",Y:"center"},ro)],e.prototype,"position",void 0),ns([Ui()],e.prototype,"created",void 0),ns([Ui()],e.prototype,"open",void 0),ns([Ui()],e.prototype,"beforeSanitizeHtml",void 0),ns([Ui()],e.prototype,"beforeOpen",void 0),ns([Ui()],e.prototype,"close",void 0),ns([Ui()],e.prototype,"beforeClose",void 0),ns([Ui()],e.prototype,"dragStart",void 0),ns([Ui()],e.prototype,"dragStop",void 0),ns([Ui()],e.prototype,"drag",void 0),ns([Ui()],e.prototype,"overlayClick",void 0),ns([Ui()],e.prototype,"resizeStart",void 0),ns([Ui()],e.prototype,"resizing",void 0),ns([Ui()],e.prototype,"resizeStop",void 0),ns([Ui()],e.prototype,"destroyed",void 0),e=ns([Gi],e)}(un);!function(t){function e(t,e){var i=new fs(t);return i.appendTo(e),i}function i(t,e){return t.header=F(e.title)?cs:e.title,t.content=F(e.content)?"":e.content,t.isModal=!!F(e.isModal)||e.isModal,t.showCloseIcon=!F(e.showCloseIcon)&&e.showCloseIcon,t.allowDragging=!F(e.isDraggable)&&e.isDraggable,t.closeOnEscape=!F(e.closeOnEscape)&&e.closeOnEscape,t.position=F(e.position)?{X:"center",Y:"top"}:e.position,t.animationSettings=F(e.animationSettings)?{effect:"Fade",duration:400,delay:0}:e.animationSettings,t.cssClass=F(e.cssClass)?"":e.cssClass,t.zIndex=F(e.zIndex)?1e3:e.zIndex,t.open=F(e.open)?null:e.open,t}function n(t,e,i){var n=i;return F(e.text)||(n.buttonModel.content=e.text),F(e.icon)||(n.buttonModel.iconCss=e.icon),F(e.cssClass)||(n.buttonModel.cssClass=e.cssClass),F(e.click)||(n.click=e.click),n}t.alert=function(t){var r,o,s=$e("div",{className:ps});return document.body.appendChild(s),(r=e("string"==typeof t?{content:t,position:{X:"center",Y:"top"},isModal:!0,header:cs,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function(t,e){var i=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return F(e.okButton)?t.buttons=i:t.buttons[0]=n(t.buttons[0],e.okButton,i[0]),t}(i({buttons:[]},o=t),o),s)).close=function(){t&&t.close&&t.close.apply(r),r.destroy(),r.element.classList.contains("e-dlg-modal")?(r.element.parentElement.remove(),r.target.classList.remove(ds)):r.element.remove()},r},t.confirm=function(t){var r,o,s=$e("div",{className:us});return document.body.appendChild(s),(r=e("string"==typeof t?{position:{X:"center",Y:"top"},content:t,isModal:!0,header:cs,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function(t,e){var i={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},r={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return F(e.okButton)?t.buttons[0]=i:t.buttons[0]=n(t.buttons[0],e.okButton,i),F(e.cancelButton)?t.buttons[1]=r:t.buttons[1]=n(t.buttons[1],e.cancelButton,r),t}(i({buttons:[]},o=t),o),s)).close=function(){t&&t.close&&t.close.apply(r),r.destroy(),r.element.classList.contains("e-dlg-modal")?(r.element.parentElement.remove(),r.target.classList.remove(ds)):r.element.remove()},r}}(es||(es={}));var gs=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ms=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},ys=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gs(e,t),ms([Hi({effect:"FadeIn",duration:150,delay:0})],e.prototype,"open",void 0),ms([Hi({effect:"FadeOut",duration:150,delay:0})],e.prototype,"close",void 0),e}(ln),vs=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isBlazorTooltip=!1,n.contentTargetValue=null,n.contentEvent=null,n.contentAnimation=null,n}return gs(e,t),e.prototype.initialize=function(){this.formatPosition(),this.isServerRender()||ti([this.element],"e-tooltip")},e.prototype.isServerRender=function(){return $()&&this.isServerRendered},e.prototype.formatPosition=function(){var t,e;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=t[0],this.tooltipPositionX=t[1]):(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=e[0],this.tooltipPositionY=e[1])},e.prototype.renderArrow=function(){var t;(this.setTipClass(this.position),this.isServerRender())?(ti([(t=this.tooltipEle.querySelector(".e-arrow-tip")).querySelector(".e-arrow-tip-outer")],this.tipClass),ti([t.querySelector(".e-arrow-tip-inner")],this.tipClass),this.tooltipEle.appendChild(t)):((t=this.createElement("div",{className:"e-arrow-tip "+this.tipClass})).appendChild(this.createElement("div",{className:"e-arrow-tip-outer "+this.tipClass})),t.appendChild(this.createElement("div",{className:"e-arrow-tip-inner "+this.tipClass})),this.tooltipEle.appendChild(t))},e.prototype.setTipClass=function(t){0===t.indexOf("Right")?this.tipClass="e-tip-left":0===t.indexOf("Bottom")?this.tipClass="e-tip-top":0===t.indexOf("Left")?this.tipClass="e-tip-right":this.tipClass="e-tip-bottom"},e.prototype.renderPopup=function(t){var e=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(t);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new ho(this.tooltipEle,{height:this.height,width:this.width,position:{X:e.left,Y:e.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},e.prototype.getTooltipPosition=function(t){this.tooltipEle.style.display="block";var e=Lr(t,this.tooltipPositionX,this.tooltipPositionY),i=this.calculateTooltipOffset(this.position),n=this.collisionFlipFit(t,e.left+i.left,e.top+i.top);return this.tooltipEle.style.display="",n},e.prototype.reposition=function(t){var e=this.getTooltipPosition(t);this.popupObj.position={X:e.left,Y:e.top},this.popupObj.dataBind()},e.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs)},e.prototype.closePopupHandler=function(){Be(this.element.id+"content"),this.clear(),this.trigger("afterClose",this.tooltipEventArgs)},e.prototype.calculateTooltipOffset=function(t){var e={top:0,left:0},i=this.tooltipEle.offsetWidth,n=this.tooltipEle.offsetHeight,r=this.tooltipEle.querySelector(".e-arrow-tip"),o=r?r.offsetWidth:0,s=r?r.offsetHeight:0,a=this.showTipPointer?0:8,l=s/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),h=o/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(a+=2),t){case"RightTop":e.left+=o+a,e.top-=n-l;break;case"RightCenter":e.left+=o+a,e.top-=n/2;break;case"RightBottom":e.left+=o+a,e.top-=l;break;case"BottomRight":e.top+=s+a,e.left-=h;break;case"BottomCenter":e.top+=s+a,e.left-=i/2;break;case"BottomLeft":e.top+=s+a,e.left-=i-h;break;case"LeftBottom":e.left-=o+i+a,e.top-=l;break;case"LeftCenter":e.left-=o+i+a,e.top-=n/2;break;case"LeftTop":e.left-=o+i+a,e.top-=n-l;break;case"TopLeft":e.top-=n+s+a,e.left-=i-h;break;case"TopRight":e.top-=n+s+a,e.left-=h;break;default:e.top-=n+s+a,e.left-=i/2}return e.left+=this.offsetX,e.top+=this.offsetY,e},e.prototype.updateTipPosition=function(t){var e=this.tooltipEle.querySelectorAll(".e-arrow-tip,.e-arrow-tip-outer,.e-arrow-tip-inner");ei(e,["e-tip-bottom","e-tip-top","e-tip-left","e-tip-right"]),this.setTipClass(t),ti(e,this.tipClass)},e.prototype.adjustArrow=function(t,e,i,n){if(!1!==this.showTipPointer){var r,o;this.updateTipPosition(e),this.tooltipEle.style.display="block";var s,a=this.tooltipEle.clientWidth,l=this.tooltipEle.clientHeight,h=this.tooltipEle.querySelector(".e-arrow-tip"),c=this.tooltipEle.querySelector(".e-arrow-tip-inner"),d=h.offsetWidth,p=h.offsetHeight;if(this.tooltipEle.style.display="","e-tip-bottom"===this.tipClass||"e-tip-top"===this.tipClass){if("e-tip-bottom"===this.tipClass?(o="99.9%",c.style.top="-"+(p-2)+"px"):(o=-(p-1)+"px",c.style.top="-"+(p-6)+"px"),t)r=(s="Center"!==i||a>t.offsetWidth||this.mouseTrail)&&"Left"===i||!s&&"End"===this.tipPointerPosition?a-d-2+"px":s&&"Right"===i||!s&&"Start"===this.tipPointerPosition?"2px":a/2-d/2+"px"}else"e-tip-right"===this.tipClass?(r="99.9%",c.style.left="-"+(d-2)+"px"):(r=-(d-1)+"px",c.style.left=d-2-d+"px"),o=(s="Center"!==n||l>t.offsetHeight||this.mouseTrail)&&"Top"===n||!s&&"End"===this.tipPointerPosition?l-p-2+"px":s&&"Bottom"===n||!s&&"Start"===this.tipPointerPosition?"2px":l/2-p/2+"px";h.style.top=o,h.style.left=r}},e.prototype.renderContent=function(t){var e=this.tooltipEle.querySelector(".e-tip-content");if(this.cssClass&&ti([this.tooltipEle],this.cssClass.split(" ")),t&&!F(t.getAttribute("title"))&&(t.setAttribute("data-content",t.getAttribute("title")),t.removeAttribute("title")),F(this.content))t&&!F(t.getAttribute("data-content"))&&(e.innerHTML=t.getAttribute("data-content"));else if(this.isBlazorTooltip||!this.isServerRender())if(e.innerHTML="",this.content instanceof HTMLElement)e.appendChild(this.content);else if("string"==typeof this.content&&this.content.indexOf("<div>Blazor")<0)this.enableHtmlSanitizer&&this.setProperties({content:zn.sanitize(this.content)},!0),e.innerHTML=this.content;else{oi(Te(this.content)({},null,null,this.element.id+"content"),e),"string"==typeof this.content&&this.content.indexOf("<div>Blazor")>=0&&(this.isBlazorTemplate=!0,Ae(this.element.id+"content","Content",this))}},e.prototype.renderCloseIcon=function(){if(this.isSticky){var t=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(t),ee.add(t,te.touchStartEvent,this.onStickyClose,this)}},e.prototype.addDescribedBy=function(t,e){var i=(t.getAttribute("aria-describedby")||"").split(/\s+/);i.indexOf(e)<0&&i.push(e),hi(t,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":e})},e.prototype.removeDescribedBy=function(t){var e=t.getAttribute("data-tooltip-id"),i=(t.getAttribute("aria-describedby")||"").split(/\s+/),n=i.indexOf(e);-1!==n&&i.splice(n,1),t.removeAttribute("data-tooltip-id");var r=i.join(" ").trim();r?t.setAttribute("aria-describedby",r):t.removeAttribute("aria-describedby")},e.prototype.tapHoldHandler=function(t){clearTimeout(this.autoCloseTimer),this.targetHover(t.originalEvent)},e.prototype.touchEndHandler=function(t){var e=this;if(!this.isSticky){this.autoCloseTimer=setTimeout(function(){e.close()},1500)}},e.prototype.targetClick=function(t){var e;F(e=this.target?pi(t.target,this.target):this.element)||(null===e.getAttribute("data-tooltip-id")?this.targetHover(t):this.isSticky||this.hideTooltip(this.animation.close,t,e))},e.prototype.targetHover=function(t){var e;if(!F(e=this.target?pi(t.target,this.target):this.element)&&null===e.getAttribute("data-tooltip-id")){for(var i=0,n=[].slice.call(document.querySelectorAll("[data-tooltip-id= "+this.ctrlId+"_content]"));i<n.length;i++){var r=n[i];this.restoreElement(r)}this.showTooltip(e,this.animation.open,t)}},e.prototype.showTooltip=function(t,e,i){var n=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:t,event:i||null,element:this.tooltipEle,isInteracted:!F(i)};this.trigger("beforeRender",this.tooltipEventArgs,function(r){n.beforeRenderCallback(r,t,i,e)}.bind(this))},e.prototype.beforeRenderCallback=function(t,e,i,n){var r=!1;if(t.cancel)this.isHidden=!0,this.clear();else if(this.isHidden=!1,F(this.tooltipEle)){if(this.isServerRender()){this.contentTargetValue=e,this.contentEvent=i,this.contentAnimation=n;this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",{enableTooltip:"true"}),r=!0}else this.ctrlId=this.element.getAttribute("id")?U(this.element.getAttribute("id")):U("tooltip"),this.tooltipEle=this.createElement("div",{className:"e-tooltip-wrap e-popup e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+J(this.width)+";height:"+J(this.height)+";position:absolute;"}),this.beforeRenderBlazor(e,this);r||this.afterRenderBlazor(e,i,n,this)}else this.isServerRender()&&(ti([this.tooltipEle],"e-popup-open"),document.body.appendChild(this.tooltipEle),this.renderCloseIcon(),this.renderPopup(e)),e&&(this.adjustArrow(e,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(e,this.ctrlId+"_content"),this.renderContent(e),Ji.stop(this.tooltipEle),this.reposition(e),this.afterRenderBlazor(e,i,n,this))},e.prototype.contentUpdated=function(t){F(this.tooltipEle)&&this.isServerRender()&&(this.ctrlId=this.element.id,this.tooltipEle=document.querySelector("#"+this.ctrlId+"_content"),this.tooltipEle&&(this.tooltipEle.setAttribute("style","width:"+J(this.width)+";height:"+J(this.height)+";position:absolute;"),this.beforeRenderBlazor(this.contentTargetValue,this),this.afterRenderBlazor(this.contentTargetValue,this.contentEvent,this.contentAnimation,this),this.contentTargetValue=this.contentEvent=this.contentAnimation=null))},e.prototype.beforeRenderBlazor=function(t,e){t&&(te.isDevice&&ti([e.tooltipEle],"e-bigger"),"auto"!==e.width&&(e.tooltipEle.style.maxWidth=J(e.width)),this.isServerRender()||e.tooltipEle.appendChild(e.createElement("div",{className:"e-tip-content"})),document.body.appendChild(e.tooltipEle),ei([e.tooltipEle],"e-hidden"),e.addDescribedBy(t,e.ctrlId+"_content"),e.renderContent(t),ti([e.tooltipEle],"e-popup-open"),e.showTipPointer&&e.renderArrow(),e.renderCloseIcon(),e.renderPopup(t),e.adjustArrow(t,e.position,e.tooltipPositionX,e.tooltipPositionY),Ji.stop(e.tooltipEle),e.reposition(t))},e.prototype.afterRenderBlazor=function(t,e,i,n){if(t){ei([n.tooltipEle],"e-popup-open"),ti([n.tooltipEle],"e-popup-close"),n.tooltipEventArgs={type:e?e.type:null,cancel:!1,target:t,event:e||null,element:n.tooltipEle,isInteracted:!F(e)},n.needTemplateReposition()&&!n.mouseTrail&&(n.tooltipEle.style.display="none");n.trigger("beforeOpen",n.tooltipEventArgs,function(r){n.beforeOpenCallback(r,t,i,e)}.bind(n))}},e.prototype.beforeOpenCallback=function(t,e,i,n){var r=this;if(t.cancel)this.isHidden=!0,this.clear(),this.restoreElement(e);else{var o={name:i.effect,duration:i.duration,delay:i.delay,timingFunction:"easeOut"};if("None"===i.effect&&(o=void 0),this.openDelay>0){this.showTimer=setTimeout(function(){r.popupObj&&r.popupObj.show(o,e)},this.openDelay)}else this.popupObj&&this.popupObj.show(o,e)}n&&this.wireMouseEvents(n,e)},e.prototype.needTemplateReposition=function(){return!F(this.viewContainerRef)&&"string"!=typeof this.viewContainerRef||this.isServerRender()&&this.isBlazorTemplate},e.prototype.checkCollision=function(t,e,i){var n={left:e,top:i,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},r=Hr(this.tooltipEle,this.target?this.element:null,e,i);return r.length>0&&(n.horizontal=r.indexOf("left")>=0?"Right":r.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=r.indexOf("top")>=0?"Bottom":r.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},e.prototype.collisionFlipFit=function(t,e,i){var n=this.checkCollision(t,e,i),r=n.position;if(this.tooltipPositionY!==n.vertical&&(r=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(0===r.indexOf("Left")&&(n.vertical="LeftTop"===r||"LeftCenter"===r?"Top":"Bottom",r=n.vertical+"Left"),0===r.indexOf("Right")&&(n.vertical="RightTop"===r||"RightCenter"===r?"Top":"Bottom",r=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:t,event:null,element:this.tooltipEle,collidedPosition:r},this.trigger("beforeCollision",this.tooltipEventArgs),n.position!==r){var o=Lr(t,n.horizontal,n.vertical);this.adjustArrow(t,r,n.horizontal,n.vertical);var s=this.calculateTooltipOffset(r);s.top-=-1!=="TopBottom".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="TopBottom".indexOf(r.split(/(?=[A-Z])/)[0])?2*this.offsetY:0,s.left-=-1!=="RightLeft".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="RightLeft".indexOf(r.split(/(?=[A-Z])/)[0])?2*this.offsetX:0,n.position=r,n.left=o.left+s.left,n.top=o.top+s.top}else this.adjustArrow(t,r,n.horizontal,n.vertical);var a={left:n.left,top:n.top},l=Nr(this.tooltipEle,this.target?this.element:null,{X:!0,Y:!1},a).left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===r.indexOf("Bottom")||0===r.indexOf("Top"))){var h=this.tooltipEle.querySelector(".e-arrow-tip"),c=parseInt(h.style.left,10)-(l-n.left);c<0?c=0:c+h.offsetWidth>this.tooltipEle.clientWidth&&(c=this.tooltipEle.clientWidth-h.offsetWidth),h.style.left=c.toString()+"px"}return this.tooltipEle.style.display="",a.left=l,a},e.prototype.hideTooltip=function(t,e,i){var n,r=this;n=e?this.target?i||e.target:this.element:document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]"),this.tooltipEventArgs={type:e?e.type:null,cancel:!1,target:n,event:e||null,element:this.tooltipEle,isInteracted:!F(e)},this.trigger("beforeClose",this.tooltipEventArgs,function(e){e.cancel?r.isHidden=!1:r.isServerRender()?r.blazorHide(t,n):r.popupHide(t,n)})},e.prototype.blazorHide=function(t,e){var i=this;this.popupObj?this.popupHide(t,e):setTimeout(function(){i.popupHide(t,e)},200)},e.prototype.popupHide=function(t,e){var i=this;this.clearTemplate(),e&&this.restoreElement(e),this.isHidden=!0;var n={name:t.effect,duration:t.duration,delay:t.delay,timingFunction:"easeIn"};if("None"===t.effect&&(n=void 0),this.closeDelay>0){this.hideTimer=setTimeout(function(){i.popupObj&&i.popupObj.hide(n)},this.closeDelay)}else this.popupObj&&this.popupObj.hide(n)},e.prototype.restoreElement=function(t){this.unwireMouseEvents(t),F(t.getAttribute("data-content"))||(t.setAttribute("title",t.getAttribute("data-content")),t.removeAttribute("data-content")),this.removeDescribedBy(t)},e.prototype.clear=function(){if(this.tooltipEle&&(ei([this.tooltipEle],"e-popup-close"),ti([this.tooltipEle],"e-popup-open")),this.isHidden){if(this.popupObj&&this.popupObj.destroy(),this.isServerRender()&&this.tooltipEle){this.tooltipEle.style.display="none";this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",{enableTooltip:"false"}),li(this.tooltipEle)}else this.tooltipEle&&li(this.tooltipEle);this.tooltipEle=null,this.popupObj=null}},e.prototype.onMouseOut=function(t){var e=t.relatedTarget;if(e&&!this.mouseTrail){var i=pi(e,".e-tooltip-wrap.e-lib.e-popup");i?(ee.add(i,"mouseleave",this.tooltipElementMouseOut,this),this.unwireMouseEvents(t.target)):(this.hideTooltip(this.animation.close,t,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,t,this.findTarget()),this.clear()},e.prototype.tooltipElementMouseOut=function(t){this.hideTooltip(this.animation.close,t,this.findTarget()),ee.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},e.prototype.onStickyClose=function(t){this.close()},e.prototype.onMouseMove=function(t){var e=0,i=0;t.type.indexOf("touch")>-1?(t.preventDefault(),e=t.touches[0].pageX,i=t.touches[0].pageY):(e=t.pageX,i=t.pageY),Ji.stop(this.tooltipEle),ei([this.tooltipEle],"e-popup-close"),ti([this.tooltipEle],"e-popup-open"),this.adjustArrow(t.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var n=this.calculateTooltipOffset(this.position),r=e+n.left+this.offsetX,o=i+n.top+this.offsetY,s=this.checkCollision(t.target,r,o);if(this.tooltipPositionX!==s.horizontal||this.tooltipPositionY!==s.vertical){var a=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?s.vertical+s.horizontal:s.horizontal+s.vertical;s.position=a,this.adjustArrow(t.target,s.position,s.horizontal,s.vertical);var l=this.calculateTooltipOffset(s.position);s.left=e+l.left-this.offsetX,s.top=i+l.top-this.offsetY}this.tooltipEle.style.left=s.left+"px",this.tooltipEle.style.top=s.top+"px"},e.prototype.keyDown=function(t){this.tooltipEle&&27===t.keyCode&&this.close()},e.prototype.touchEnd=function(t){this.tooltipEle&&null===pi(t.target,".e-tooltip")&&this.close()},e.prototype.scrollHandler=function(t){this.tooltipEle&&(pi(t.target,".e-tooltip-wrap.e-lib.e-popup")||this.close())},e.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},e.prototype.preRender=function(){this.tipClass="e-tip-bottom",this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},e.prototype.wireEvents=function(t){for(var e=0,i=this.getTriggerList(t);e<i.length;e++){var n=i[e];if("Custom"===n)return;"Focus"===n&&this.wireFocusEvents(),"Click"===n&&ee.add(this.element,te.touchStartEvent,this.targetClick,this),"Hover"===n&&(te.isDevice?(this.touchModule=new kn(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),ee.add(this.element,te.touchEndEvent,this.touchEndHandler,this)):(ee.add(this.element,"mouseover",this.targetHover,this),this.isServerRender()&&!this.isSticky&&ee.add(this.element,"mouseleave",this.onMouseOut,this)))}ee.add(document,"touchend",this.touchEnd,this),ee.add(document,"scroll wheel",this.scrollHandler,this),ee.add(document,"keydown",this.keyDown,this)},e.prototype.getTriggerList=function(t){return"Auto"===t&&(t=te.isDevice?"Hover":"Hover Focus"),t.split(" ")},e.prototype.wireFocusEvents=function(){if(F(this.target))ee.add(this.element,"focus",this.targetHover,this);else for(var t=0,e=[].slice.call(this.element.querySelectorAll(this.target));t<e.length;t++){var i=e[t];ee.add(i,"focus",this.targetHover,this)}},e.prototype.wireMouseEvents=function(t,e){this.tooltipEle&&(this.isSticky||("focus"===t.type&&ee.add(e,"blur",this.onMouseOut,this),"mouseover"===t.type&&(this.isServerRender()||ee.add(e,"mouseleave",this.onMouseOut,this))),this.mouseTrail&&ee.add(e,"mousemove touchstart mouseenter",this.onMouseMove,this))},e.prototype.unwireEvents=function(t){for(var e=0,i=this.getTriggerList(t);e<i.length;e++){var n=i[e];if("Custom"===n)return;"Focus"===n&&this.unwireFocusEvents(),"Click"===n&&ee.remove(this.element,te.touchStartEvent,this.targetClick),"Hover"===n&&(te.isDevice?(this.touchModule&&this.touchModule.destroy(),ee.remove(this.element,te.touchEndEvent,this.touchEndHandler)):(ee.remove(this.element,"mouseover",this.targetHover),this.isServerRender()&&!this.isSticky&&ee.remove(this.element,"mouseleave",this.onMouseOut)))}ee.remove(document,"touchend",this.touchEnd),ee.remove(document,"scroll wheel",this.scrollHandler),ee.remove(document,"keydown",this.keyDown)},e.prototype.unwireFocusEvents=function(){if(F(this.target))ee.remove(this.element,"focus",this.targetHover);else for(var t=0,e=[].slice.call(this.element.querySelectorAll(this.target));t<e.length;t++){var i=e[t];ee.remove(i,"focus",this.targetHover)}},e.prototype.unwireMouseEvents=function(t){if(!this.isSticky)for(var e=0,i=this.getTriggerList(this.opensOn);e<i.length;e++){var n=i[e];"Focus"===n&&ee.remove(t,"blur",this.onMouseOut),"Hover"!==n||te.isDevice||this.isServerRender()||ee.remove(t,"mouseleave",this.onMouseOut)}this.mouseTrail&&ee.remove(t,"mousemove touchstart mouseenter",this.onMouseMove)},e.prototype.findTarget=function(){return document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]")},e.prototype.getModuleName=function(){return"tooltip"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.onPropertyChanged=function(t,e){for(var i=this.findTarget(),n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"width":this.tooltipEle&&i&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=J(t.width),this.reposition(i));break;case"height":this.tooltipEle&&i&&(this.tooltipEle.style.height=J(t.height),this.reposition(i));break;case"content":if(this.tooltipEle)this.isServerRender()&&(this.isBlazorTooltip=!0),this.renderContent();else if(this.isServerRender()){var o={content:t.content};this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",o)}break;case"opensOn":this.unwireEvents(e.opensOn),this.wireEvents(t.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&i){var s=this.tooltipEle.querySelector(".e-arrow-tip-inner");s.style.top=s.style.left=null,this.reposition(i)}break;case"tipPointerPosition":this.tooltipEle&&i&&this.reposition(i);break;case"offsetX":if(this.tooltipEle){var a=t.offsetX-e.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+a).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var l=t.offsetY-e.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+l).toString()+"px"}break;case"cssClass":this.tooltipEle&&(e.cssClass&&ei([this.tooltipEle],e.cssClass.split(" ")),t.cssClass&&ti([this.tooltipEle],t.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?ti([this.tooltipEle],"e-rtl"):ei([this.tooltipEle],"e-rtl"))}}},e.prototype.open=function(t,e){F(e)&&(e=this.animation.open),F(t)&&(t=this.element),"none"!==t.style.display&&this.showTooltip(t,e)},e.prototype.close=function(t){t||(t=this.animation.close),this.hideTooltip(t)},e.prototype.refresh=function(t){this.tooltipEle&&this.renderContent(t),this.popupObj&&t&&this.reposition(t)},e.prototype.destroy=function(){if(this.isServerRender()||(t.prototype.destroy.call(this),this.tooltipEle&&li(this.tooltipEle)),this.isServerRender()&&this.tooltipEle){var e=document.querySelector("#"+this.ctrlId+"_content_placeholder");e&&e.appendChild(this.tooltipEle)}this.popupObj&&this.popupObj.destroy(),ei([this.element],"e-tooltip"),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null},ms([Hi("auto")],e.prototype,"width",void 0),ms([Hi("auto")],e.prototype,"height",void 0),ms([Hi()],e.prototype,"content",void 0),ms([Hi()],e.prototype,"target",void 0),ms([Hi("TopCenter")],e.prototype,"position",void 0),ms([Hi(0)],e.prototype,"offsetX",void 0),ms([Hi(0)],e.prototype,"offsetY",void 0),ms([Hi(!0)],e.prototype,"showTipPointer",void 0),ms([Hi("Auto")],e.prototype,"tipPointerPosition",void 0),ms([Hi("Auto")],e.prototype,"opensOn",void 0),ms([Hi(!1)],e.prototype,"mouseTrail",void 0),ms([Hi(!1)],e.prototype,"isSticky",void 0),ms([_i({},ys)],e.prototype,"animation",void 0),ms([Hi(0)],e.prototype,"openDelay",void 0),ms([Hi(0)],e.prototype,"closeDelay",void 0),ms([Hi()],e.prototype,"cssClass",void 0),ms([Hi(!1)],e.prototype,"enableHtmlSanitizer",void 0),ms([Ui()],e.prototype,"beforeRender",void 0),ms([Ui()],e.prototype,"beforeOpen",void 0),ms([Ui()],e.prototype,"afterOpen",void 0),ms([Ui()],e.prototype,"beforeClose",void 0),ms([Ui()],e.prototype,"afterClose",void 0),ms([Ui()],e.prototype,"beforeCollision",void 0),ms([Ui()],e.prototype,"created",void 0),ms([Ui()],e.prototype,"destroyed",void 0),e=ms([Gi],e)}(un),bs={},ws=null,Ss=null,xs=30,Cs=30,Ps=30,Os=36,Es="e-spin-show",Ls="e-spin-hide",Is="e-spin-material",Ts="e-spin-fabric",As="e-spin-bootstrap",Bs="e-spin-bootstrap4",ks="e-spin-high-contrast",Ms="e-spinner-pane",Ds="e-spinner-inner",Rs="e-path-circle",zs="e-path-arc",js="e-spin-label",Ns="e-spin-template";function Hs(t,e,i,n){switch(t){case"Create":_s({type:n,target:document.querySelector(e.target),cssClass:e.cssClass,label:e.label,width:e.width});break;case"Show":$s(document.querySelector(i));break;case"Hide":ea(document.querySelector(i));break;case"Set":ia({cssClass:e.cssClass,type:n})}}function _s(t,e){if(t.target){var i,n=F(e)?$e:e,r=function(t,e){var i=e("div",{});i.classList.add(Ms);var n=e("div",{});return n.classList.add(Ds),t.appendChild(i),i.appendChild(n),{wrap:i,inner_wrap:n}}(t.target,n);if(F(t.cssClass)||r.wrap.classList.add(t.cssClass),F(t.template)&&F(ws)){var o=F(t.type)?function(t){return window.getComputedStyle(t,":after").getPropertyValue("content").replace(/['"]+/g,"")}(r.wrap):t.type;i=function(t,e){var i;switch(e){case"Material":i=xs;break;case"Fabric":i=Cs;break;case"Bootstrap4":i=Os;break;default:i=Ps}return t=t?parseFloat(t+""):i,"Bootstrap"===e?t:t/2}(F(t.width)?void 0:t.width,o),Vs(o,r.wrap,i,n),F(t.label)||function(t,e,i){var n=i("div",{});n.classList.add(js),n.textContent=e,t.appendChild(n)}(r.inner_wrap,t.label,n)}else{var s=F(t.template)?ws:t.template;r.wrap.classList.add(Ns),function(t,e,i){F(i)||t.classList.add(i);t.querySelector(".e-spinner-inner").innerHTML=e}(r.wrap,s,Ss)}r.wrap.classList.add(Ls),r=null}}function Vs(t,e,i,n){var r=e.querySelector("."+Ds),o=r.querySelector("svg");switch(F(o)||r.removeChild(o),t){case"Material":!function(t,e,i){var n=Ws();bs[n]={timeOut:0,type:"Material",radius:e},Gs(t,n,i,Is),Xs(e,t,"Material",Is)}(r,i,n);break;case"Fabric":!function(t,e,i){var n=Ws();bs[n]={timeOut:0,type:"Fabric",radius:e},Us(t,n,Ts,i),Js(e,t,Ts)}(r,i,n);break;case"Bootstrap":!function(t,e,i){var n=Ws();bs[n]={timeOut:0,type:"Bootstrap",radius:e},function(t,e,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",e),n.setAttribute("class",As),n.setAttribute("viewBox","0 0 64 64"),t.insertBefore(n,t.firstChild);for(var r=0;r<=7;r++){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttribute("class",Rs+"_"+r),o.setAttribute("r","2"),o.setAttribute("transform","translate(32,32)"),n.appendChild(o)}}(t,n),function(t,e){var i=t.querySelector("svg.e-spin-bootstrap");i.style.width=i.style.height=e+"px";for(var n=90,r=0;r<=7;r++){var o=Qs(0,0,24,n),s=i.querySelector("."+Rs+"_"+r);s.setAttribute("cx",o.x+""),s.setAttribute("cy",o.y+""),n=n>=360?0:n,n+=45}}(t,e)}(r,i);break;case"HighContrast":!function(t,e,i){var n=Ws();bs[n]={timeOut:0,type:"HighContrast",radius:e},Us(t,n,ks,i),Js(e,t,ks)}(r,i,n);break;case"Bootstrap4":!function(t,e,i){var n=Ws();bs[n]={timeOut:0,type:"Bootstrap4",radius:e},Gs(t,n,i,Bs),Xs(e,t,"Bootstrap4",Bs)}(r,i,n)}}function Fs(t,e){var i=[],n=t,r=e,o=!1,s=1;return function t(e){i.push(e);e===r&&1!==s||(e<=n&&e>1&&!o?e=parseFloat((e-.2).toFixed(2)):1===e?(e=7,e=parseFloat((e+.2).toFixed(2)),o=!0):e<8&&o?8===(e=parseFloat((e+.2).toFixed(2)))&&(o=!1):e<=8&&!o&&(e=parseFloat((e-.2).toFixed(2))),++s,t(e))}(n),i}function Ws(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function Us(t,e,i,n){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("id",e),r.setAttribute("class",i);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class",Rs);var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",zs),t.insertBefore(r,t.firstChild),r.appendChild(o),r.appendChild(s)}function Gs(t,e,i,n){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("class",n),r.setAttribute("id",e);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class",Rs),t.insertBefore(r,t.firstChild),r.appendChild(o)}function qs(t){!function(t,e,i,n,r,o,s){var a=++s.globalInfo[s.uniqueID].previousId,l=(new Date).getTime(),h=e-t,c=(u=2*s.globalInfo[s.uniqueID].radius+"",parseFloat(u)),d=Ys(c),p=-90*(s.globalInfo[s.uniqueID].count||0);var u;!function e(r){var s=Math.max(0,Math.min((new Date).getTime()-l,n));!function(t,e){if(!F(e.querySelector("svg.e-spin-material"))&&!F(e.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){var i=e.querySelector("svg.e-spin-material"),n=i.querySelector("path.e-path-circle");n.setAttribute("stroke-dashoffset",Zs(c,d,t,o)+""),n.setAttribute("transform","rotate("+p+" "+c/2+" "+c/2+")")}}(i(s,t,h,n),r.container);a===r.globalInfo[r.uniqueID].previousId&&s<n?bs[r.uniqueID].timeOut=setTimeout(e.bind(null,r),1):qs(r)}(s)}(1,149,Ks,1333,t.globalInfo[t.uniqueID].count,75,t),t.globalInfo[t.uniqueID].count=++t.globalInfo[t.uniqueID].count%4}function Xs(t,e,i,n){var r=2*t,o=e.querySelector("svg."+n),s=o.querySelector("path.e-path-circle"),a=Ys(r),l=r/2+"px";o.setAttribute("viewBox","0 0 "+r+" "+r),o.style.width=o.style.height=r+"px",o.style.transformOrigin=l+" "+l+" "+l,s.setAttribute("d",function(t,e){var i=t/2,n=e/2;return"M"+i+","+n+"A"+(i-n)+","+(i-n)+" 0 1 1 "+n+","+i}(r,a)),"Material"===i&&(s.setAttribute("stroke-width",a+""),s.setAttribute("stroke-dasharray",(r-a)*Math.PI*.75+""),s.setAttribute("stroke-dashoffset",Zs(r,a,1,75)+""))}function Ys(t){return.1*t}function Zs(t,e,i,n){return(t-e)*Math.PI*(3*n/100-i/100)}function Ks(t,e,i,n){var r=(t/=n)*t,o=r*t;return e+i*(6*o*r+-15*r*r+10*o)}function Js(t,e,i){var n=t,r=t,o=2*t,s=e.querySelector("."+i),a=s.querySelector(".e-path-circle"),l=s.querySelector(".e-path-arc"),h=o/2+"px";a.setAttribute("d",function(t,e,i){return["M",t,e,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(n,r,t)),l.setAttribute("d",function(t,e,i,n,r){var o=Qs(t,e,i,r),s=Qs(t,e,i,n);return["M",o.x,o.y,"A",i,i,0,0,0,s.x,s.y].join(" ")}(n,r,t,315,45)),s.setAttribute("viewBox","0 0 "+o+" "+o),s.style.transformOrigin=h+" "+h+" "+h,s.style.width=s.style.height=o+"px"}function Qs(t,e,i,n){var r=(n-90)*Math.PI/180;return{x:t+i*Math.cos(r),y:e+i*Math.sin(r)}}function $s(t){ta(t,!1),t=null}function ta(t,e){var i;if(t&&(i=t.classList.contains(Ms)?t:t.querySelector("."+Ms)),t&&i){var n=i.querySelector("."+Ds);if(e?!i.classList.contains(Ns)&&!i.classList.contains(Ls):!i.classList.contains(Ns)&&!i.classList.contains(Es)){var r=i.querySelector("svg");if(F(r))return;var o=r.getAttribute("id");switch(bs[o].isAnimate=!e,bs[o].type){case"Material":e?clearTimeout(bs[o].timeOut):function(t,e,i){var n={};bs[e].timeOut=0,n[e]=function(t,e,i,n){return{radius:e,count:i,previousId:n}}(0,i,0,0),qs({uniqueID:e,container:t,globalInfo:n,timeOutVar:0})}(n,o,bs[o].radius);break;case"Bootstrap":e?clearTimeout(bs[o].timeOut):function(t){for(var e=t.querySelector("svg.e-spin-bootstrap").getAttribute("id"),i=1;i<=8;i++)n(t.getElementsByClassName("e-path-circle_"+(8===i?0:i))[0],i,0,Fs(i,i),e);function n(t,e,i,n,r){var o=0;!function e(i){bs[r].isAnimate&&(++o,t.setAttribute("r",i+""),o>=n.length&&(o=0),bs[r].timeOut=setTimeout(e.bind(null,n[o]),18))}(e)}}(n)}}e?mi(i,[Ls],[Es]):mi(i,[Es],[Ls]),t=null}}function ea(t){ta(t,!0),t=null}function ia(t,e){var i=F(e)?$e:e;void 0!==t.template&&(ws=t.template,void 0!==t.template&&(Ss=t.cssClass));for(var n=document.querySelectorAll("."+Ms),r=0;r<n.length;r++)na(t.template,n[r],t.type,t.cssClass,i)}function na(t,e,i,n,r){F(t)&&!e.classList.contains(Ns)?(!function(t,e,i,n){F(i)||t.classList.add(i);var r=t.querySelector("svg"),o="Bootstrap"===e?parseFloat(r.style.height):parseFloat(r.style.height)/2;if(r.getAttribute("class").split(/\s/).indexOf("e-spin-material")>=0){var s=r.getAttribute("id");clearTimeout(bs[s].timeOut)}Vs(e,t,o,n)}(e,i,n,r),e.classList.contains(Es)?(e.classList.remove(Es),$s(e)):(e.classList.remove(Ls),ea(e))):(ws=t,F(n)||(Ss=n))}var ra=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),oa=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},sa="e-menu-icon",aa="e-item",la="e-dropdown-popup",ha="e-separator",ca="e-vertical",da=function(t){function e(e,i){return t.call(this,e,i)||this}return ra(e,t),e.prototype.preRender=function(){},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.toggle=function(){this.canOpen()?this.openPopUp():this.closePopup()},e.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()},e.prototype.addItems=function(t,e){for(var i,n=this.items.length,r=0,o=this.items.length;r<o;r++)if(e===this.items[r].text){n=r;break}for(var s=t.length-1;s>=0;s--)i=new $n(this,"items",t[s],!0),this.items.splice(n,0,i);this.canOpen()||this.createItems()},e.prototype.removeItems=function(t){for(var e=0,i=t.length;e<i;e++)for(var n=0,r=this.items.length;n<r;n++)if(t[e]===this.items[n].text){this.items.splice(n,1);break}this.canOpen()||this.createItems()},e.prototype.createPopup=function(){var t,e=this.createElement("div",{className:la,id:this.element.id+"-popup"});document.body.appendChild(e),this.dropDown=new ho(e,{relateTo:this.element,collision:{X:"fit",Y:"flip"},position:{X:"left",Y:"bottom"},targetType:"relative",content:this.target?this.getTargetElement():"",enableRtl:this.enableRtl}),"fixed"===this.dropDown.element.style.position&&this.dropDown.refreshPosition(this.element),this.dropDown.hide(),hi(this.element,((t={})["aria-haspopup"]=this.items.length||this.target?"true":"false",t["aria-expanded"]="false",t["aria-owns"]=this.getPopUpElement().id,t.type="button",t["aria-label"]=this.element.textContent+" dropdownbutton",t)),this.cssClass&&ti([e],this.cssClass.split(" "))},e.prototype.getTargetElement=function(){return"string"==typeof this.target?ci(this.target):this.target},e.prototype.createItems=function(t){var e,i,n,r,o=this.items,s=this.hasIcon(this.items,"iconCss"),a=this.getULElement();a?a.innerHTML="":a=this.createElement("ul",{attrs:{role:"menu",tabindex:"0"}});for(var l=0;l<o.length;l++){i=o[l];var h=this.enableHtmlSanitizer?zn.sanitize(i.text):i.text;n=this.createElement("li",{innerHTML:i.url?"":h,className:i.separator?aa+" "+ha:aa,attrs:{role:"menuItem",tabindex:"-1"},id:i.id?i.id:U("e-"+this.getModuleName()+"-item")}),i.url&&(n.appendChild(this.createAnchor(i)),n.classList.add("e-url")),i.iconCss?(e=this.createElement("span",{className:sa+" "+i.iconCss}),i.url?n.childNodes[0].appendChild(e):n.insertBefore(e,n.childNodes[0])):s&&!i.separator&&n.classList.add("e-blank-icon"),r={item:i,element:n},this.trigger("beforeItemRender",r),a.appendChild(n)}if(t&&this.getPopUpElement().appendChild(a),s){var c,d=[].slice.call(this.getPopUpElement().getElementsByClassName("e-blank-icon")),p=this.getPopUpElement().querySelector(".e-item:not(.e-blank-icon)"),u=p.querySelector(".e-menu-icon");c=this.enableRtl?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"};var f=parseInt(getComputedStyle(u).fontSize,10)+parseInt((this.enableRtl,getComputedStyle(u)[c.margin]),10)+parseInt(getComputedStyle(p).paddingLeft,10)+"px";d.forEach(function(t){t.style[c.padding]=f})}},e.prototype.hasIcon=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i][e])return!0;return!1},e.prototype.createAnchor=function(t){var e=this.enableHtmlSanitizer?zn.sanitize(t.text):t.text;return this.createElement("a",{className:"e-menu-text e-menu-url",innerHTML:e,attrs:{href:t.url}})},e.prototype.initialize=function(){this.button=new vr({iconCss:this.iconCss,iconPosition:this.iconPosition,cssClass:this.cssClass,content:this.content,disabled:this.disabled,enableRtl:this.enableRtl,enablePersistence:this.enablePersistence}),this.button.createElement=this.createElement,this.button.appendTo(this.element),this.element.id||(this.element.id=U("e-"+this.getModuleName())),this.appendArrowSpan(),this.createPopup(),this.setActiveElem([this.element])},e.prototype.appendArrowSpan=function(){this.element.appendChild(this.createElement("span",{className:"e-btn-icon e-icons e-icon-"+(this.cssClass.indexOf(ca)>-1?"bottom":"right")+" e-caret"}))},e.prototype.setActiveElem=function(t){this.activeElem=t},e.prototype.getModuleName=function(){return"dropdown-btn"},e.prototype.canOpen=function(){return this.getPopUpElement().classList.contains("e-popup-close")},e.prototype.destroy=function(){var e=this;if(t.prototype.destroy.call(this),"dropdown-btn"===this.getModuleName()){var i;this.element.querySelector("span.e-caret")&&ai(this.element.querySelector("span.e-caret")),this.cssClass&&(i=this.cssClass.split(" ")),this.button.destroy(),i&&ei([this.element],i),ei(this.activeElem,["e-active"]),(this.element.getAttribute("class")?["aria-haspopup","aria-expanded","aria-owns","type"]:["aria-haspopup","aria-expanded","aria-owns","type","class"]).forEach(function(t){e.element.removeAttribute(t)}),this.dropDown.destroy();var n=document.getElementById(this.getPopUpElement().id);n&&(ei([n],["e-popup-open","e-popup-close"]),ai(n)),this.disabled||this.unWireEvents()}},e.prototype.getPopUpElement=function(){return this.dropDown.element},e.prototype.getULElement=function(){return this.getPopUpElement().children[0]},e.prototype.wireEvents=function(){var t=this.getPopUpElement();this.delegateMousedownHandler=this.mousedownHandler.bind(this),ee.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),ee.add(this.element,"click",this.clickHandler,this),ee.add(t,"click",this.clickHandler,this),ee.add(this.element,"keydown",this.keyBoardHandler,this),ee.add(t,"keydown",this.keyBoardHandler,this),this.rippleFn=Qi(t,{selector:"."+aa})},e.prototype.keyBoardHandler=function(t){if(t.target!==this.element||9!==t.keyCode&&(t.altKey||40!==t.keyCode)&&38!==t.keyCode)switch(t.keyCode){case 38:case 40:!t.altKey||38!==t.keyCode&&40!==t.keyCode?this.upDownKeyHandler(t):this.keyEventHandler(t);break;case 9:case 13:case 27:case 32:this.keyEventHandler(t)}},e.prototype.upDownKeyHandler=function(t){(!this.target||38!==t.keyCode&&40!==t.keyCode)&&(t.preventDefault(),Qn(this.getULElement(),t.keyCode))},e.prototype.keyEventHandler=function(t){(!this.target||13!==t.keyCode&&9!==t.keyCode)&&(9!==t.keyCode&&t.preventDefault(),27===t.keyCode||38===t.keyCode||9===t.keyCode?this.canOpen()||this.closePopup(t,this.element):this.clickHandler(t))},e.prototype.getLI=function(t){return"LI"===t.tagName?t:pi(t,"li")},e.prototype.mousedownHandler=function(t){var e=t.target;this.canOpen()||pi(e,"#"+this.getPopUpElement().id)||pi(e,"#"+this.element.id)||this.closePopup(t)},e.prototype.clickHandler=function(t){var e=t.target,i=this.canOpen();if(pi(e,"#"+this.element.id))i?this.openPopUp(t):this.closePopup(t,this.activeElem[0]);else if(pi(e,"#"+this.getPopUpElement().id)){var n=void 0,r=void 0,o=void 0,s=this.getLI(e);s&&(r=Array.prototype.indexOf.call(this.getULElement().children,s),(o=this.items[r])&&(n={element:s,item:o},this.trigger("select",n)),this.closePopup(t,this.activeElem[0]))}},e.prototype.openPopUp=function(t){var e=this;void 0===t&&(t=null),this.target||this.createItems(!0);var i={element:this.getULElement(),items:this.items,event:t,cancel:!1};this.trigger("beforeOpen",i,function(t){if(!t.cancel){var i=e.getULElement();e.dropDown.show(null,e.element),ti([e.element],"e-active"),e.element.setAttribute("aria-expanded","true"),i.focus();var n={element:i,items:e.items};e.trigger("open",n)}})},e.prototype.closePopup=function(t,e){var i=this;void 0===t&&(t=null);var n={element:this.getULElement(),items:this.items,event:t,cancel:!1};this.trigger("beforeClose",n,function(t){if(!t.cancel){var n=i.getULElement(),r=n.querySelector(".e-selected");r&&r.classList.remove("e-selected"),i.dropDown.hide(),ei(i.activeElem,"e-active"),i.element.setAttribute("aria-expanded","false"),e&&e.focus();var o={element:n,items:i.items};i.trigger("close",o),!i.target&&n&&ai(n)}})},e.prototype.unWireEvents=function(){ee.remove(document,"mousedown touchstart",this.delegateMousedownHandler),ee.remove(this.element,"click",this.clickHandler),ee.remove(this.getPopUpElement(),"click",this.clickHandler),ee.remove(this.element,"keydown",this.keyBoardHandler),ee.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler),this.rippleFn()},e.prototype.onPropertyChanged=function(t,e){this.button.setProperties(Jn(t,["content","cssClass","iconCss","iconPosition","disabled","enableRtl"])),this.dropDown.setProperties(Jn(t,["enableRtl"]));for(var i=this.getPopUpElement(),n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"content":this.element.querySelector("span.e-caret")||this.appendArrowSpan();break;case"disabled":t.disabled?(this.unWireEvents(),this.canOpen()||this.closePopup()):this.wireEvents();break;case"cssClass":if(t.cssClass.indexOf(ca)>-1)mi(this.element.querySelector("span.e-caret"),["e-icon-bottom"],["e-icon-right"]);e.cssClass&&ei([i],e.cssClass.split(" ")),t.cssClass&&ti([i],t.cssClass.split(" "));break;case"target":this.dropDown.content=this.getTargetElement(),this.dropDown.dataBind();break;case"items":this.canOpen()||this.createItems()}}},e.prototype.focusIn=function(){this.element.focus()},oa([Hi("")],e.prototype,"content",void 0),oa([Hi("")],e.prototype,"cssClass",void 0),oa([Hi(!1)],e.prototype,"disabled",void 0),oa([Hi("")],e.prototype,"iconCss",void 0),oa([Hi("Left")],e.prototype,"iconPosition",void 0),oa([Hi(!1)],e.prototype,"enableHtmlSanitizer",void 0),oa([Fi([],$n)],e.prototype,"items",void 0),oa([Hi("")],e.prototype,"target",void 0),oa([Ui()],e.prototype,"beforeItemRender",void 0),oa([Ui()],e.prototype,"beforeOpen",void 0),oa([Ui()],e.prototype,"beforeClose",void 0),oa([Ui()],e.prototype,"close",void 0),oa([Ui()],e.prototype,"open",void 0),oa([Ui()],e.prototype,"select",void 0),oa([Ui()],e.prototype,"created",void 0),e=oa([Gi],e)}(un),pa=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ua=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},fa="EJS-SPLITBUTTON",ga=function(t){function e(e,i){return t.call(this,e,i)||this}return pa(e,t),e.prototype.preRender=function(){var t=this.element;if(t.tagName===fa){for(var e=R("ej2_instances",t),i=this.createElement("button",{attrs:{type:"button"}}),n=this.createElement(fa,{className:"e-"+this.getModuleName()+"-wrapper"}),r=0,o=t.attributes.length;r<o;r++)i.setAttribute(t.attributes[r].nodeName,t.attributes[r].nodeValue);t.parentNode.insertBefore(n,t),ai(t),t=i,n.appendChild(t),z("ej2_instances",e,t),this.wrapper=n,this.element=t}this.element.id||(this.element.id=U("e-"+this.getModuleName()))},e.prototype.render=function(){this.initWrapper(),this.createPrimaryButton(),this.renderControl()},e.prototype.renderControl=function(){this.createSecondaryButton(),this.setActiveElem([this.element,this.secondaryBtnObj.element]),this.setAria(),this.wireEvents(),this.renderComplete()},e.prototype.addItems=function(e,i){t.prototype.addItems.call(this,e,i),this.secondaryBtnObj.items=this.items},e.prototype.removeItems=function(e){t.prototype.removeItems.call(this,e),this.secondaryBtnObj.items=this.items},e.prototype.initWrapper=function(){this.wrapper||(this.wrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.element.parentNode.insertBefore(this.wrapper,this.element)),this.element.classList.remove("e-"+this.getModuleName()),this.enableRtl&&this.wrapper.classList.add("e-rtl"),this.cssClass&&ti([this.wrapper],this.cssClass.split(" "))},e.prototype.createPrimaryButton=function(){var t={cssClass:this.cssClass,enableRtl:this.enableRtl,iconCss:this.iconCss,iconPosition:this.iconPosition,content:this.content,disabled:this.disabled};this.primaryBtnObj=new vr(t),this.primaryBtnObj.createElement=this.createElement,this.primaryBtnObj.appendTo(this.element),this.element.classList.add("e-"+this.getModuleName()),this.element.type="button",this.wrapper.appendChild(this.element)},e.prototype.createSecondaryButton=function(){var t,e,i=this;e=this.createElement("button",{className:"e-icon-btn",attrs:{tabindex:"-1"},id:this.element.id+"_dropdownbtn"}),this.wrapper.appendChild(e),(t={cssClass:this.cssClass,disabled:this.disabled,enableRtl:this.enableRtl,items:this.items,target:this.target}).beforeItemRender=function(t){i.trigger("beforeItemRender",t)},t.open=function(t){i.trigger("open",t)},t.close=function(t){i.trigger("close",t)},t.select=function(t){i.trigger("select",t)},t.beforeOpen=function(t){var e=new ma;return i.trigger("beforeOpen",t,function(t){e.resolve(t)}),e},t.beforeClose=function(t){var e=new ma;return i.trigger("beforeClose",t,function(t){e.resolve(t)}),e},this.secondaryBtnObj=new da(t),this.secondaryBtnObj.createElement=this.createElement,this.secondaryBtnObj.appendTo(e),this.secondaryBtnObj.dropDown.relateTo=this.wrapper,this.dropDown=this.secondaryBtnObj.dropDown,this.secondaryBtnObj.activeElem=[this.element,this.secondaryBtnObj.element],ee.remove(this.getPopUpElement(),"keydown",this.secondaryBtnObj.keyBoardHandler),this.secondaryBtnObj.element.querySelector(".e-btn-icon").classList.remove("e-icon-right")},e.prototype.setAria=function(){hi(this.element,{"aria-expanded":"false","aria-haspopup":"true","aria-label":this.element.textContent+" splitbutton","aria-owns":this.secondaryBtnObj.dropDown.element.id})},e.prototype.getModuleName=function(){return"split-btn"},e.prototype.toggle=function(){this.secondaryBtnObj.toggle()},e.prototype.destroy=function(){var e=this,i=["e-rtl"],n=document.getElementById(this.element.id);this.cssClass&&(i=i.concat(this.cssClass.split(" "))),n&&n.parentElement===this.wrapper&&(this.wrapper.tagName===fa?(this.wrapper.innerHTML="",ei([this.wrapper],["e-rtl","e-"+this.getModuleName()+"-wrapper"]),ei([this.wrapper],this.cssClass.split(" "))):(ei([this.element],i),["aria-label","aria-haspopup","aria-expanded","aria-owns","type"].forEach(function(t){e.element.removeAttribute(t)}),this.wrapper.parentNode.insertBefore(this.element,this.wrapper),li(this.wrapper)),this.unWireEvents()),this.primaryBtnObj.destroy(),this.secondaryBtnObj.destroy(),t.prototype.destroy.call(this),this.element.getAttribute("class")||this.element.removeAttribute("class")},e.prototype.wireEvents=function(){ee.add(this.element,"click",this.primaryBtnClickHandler,this),ee.add(this.getPopUpElement(),"keydown",this.keyBoardHandler,this),new En(this.element,{keyAction:this.btnKeyBoardHandler.bind(this),keyConfigs:{altdownarrow:"alt+downarrow"}})},e.prototype.unWireEvents=function(){ee.remove(this.element,"click",this.primaryBtnClickHandler),et(this.element,En).destroy()},e.prototype.primaryBtnClickHandler=function(){this.trigger("click",{element:this.element})},e.prototype.btnKeyBoardHandler=function(t){switch(t.action){case"altdownarrow":this.clickHandler(t)}},e.prototype.onPropertyChanged=function(t,e){var i=["content","iconCss","iconPosition","cssClass","disabled","enableRtl"];this.primaryBtnObj.setProperties(Jn(t,i)),i=["beforeOpen","beforeItemRender","select","open","close","cssClass","disabled","enableRtl"],Object.keys(t).indexOf("items")>-1&&(this.secondaryBtnObj.items=t.items,this.secondaryBtnObj.dataBind()),this.secondaryBtnObj.setProperties(Jn(t,i));for(var n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"cssClass":e.cssClass&&ei([this.wrapper],e.cssClass.split(" ")),ti([this.wrapper],t.cssClass.split(" "));break;case"enableRtl":t.enableRtl?ti([this.wrapper],"e-rtl"):ei([this.wrapper],"e-rtl")}}},e.prototype.focusIn=function(){this.element.focus()},ua([Hi("")],e.prototype,"content",void 0),ua([Hi("")],e.prototype,"cssClass",void 0),ua([Hi(!1)],e.prototype,"disabled",void 0),ua([Hi("")],e.prototype,"iconCss",void 0),ua([Hi("Left")],e.prototype,"iconPosition",void 0),ua([Fi([],$n)],e.prototype,"items",void 0),ua([Hi("")],e.prototype,"target",void 0),ua([Ui()],e.prototype,"beforeItemRender",void 0),ua([Ui()],e.prototype,"beforeOpen",void 0),ua([Ui()],e.prototype,"beforeClose",void 0),ua([Ui()],e.prototype,"click",void 0),ua([Ui()],e.prototype,"close",void 0),ua([Ui()],e.prototype,"open",void 0),ua([Ui()],e.prototype,"select",void 0),ua([Ui()],e.prototype,"created",void 0),e=ua([Gi],e)}(da),ma=function(){return function(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),this.catch=this.promise.catch.bind(this.promise),this.then=this.promise.then.bind(this.promise)}}();!function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}();var ya,va={RTL:"e-rtl",DISABLE:"e-disabled",INPUT:"e-input",TEXTAREA:"e-multi-line-input",INPUTGROUP:"e-input-group",FLOATINPUT:"e-float-input",FLOATLINE:"e-float-line",FLOATTEXT:"e-float-text",CLEARICON:"e-clear-icon",CLEARICONHIDE:"e-clear-icon-hide",LABELTOP:"e-label-top",LABELBOTTOM:"e-label-bottom",NOFLOATLABEL:"e-no-float-label",INPUTCUSTOMTAG:"e-input-custom-tag",FLOATCUSTOMTAG:"e-float-custom-tag"};!function(t){var e;function i(t){n(t.floatLabelType,t.element),t.element.addEventListener("focus",function(){var t=d(this);(t.classList.contains("e-input-group")||t.classList.contains("e-outline")||t.classList.contains("e-filled"))&&t.classList.add("e-input-focus")}),t.element.addEventListener("blur",function(){var t=d(this);(t.classList.contains("e-input-group")||t.classList.contains("e-outline")||t.classList.contains("e-filled"))&&t.classList.remove("e-input-focus")}),t.element.addEventListener("input",function(){n(e,t.element)})}function n(t,e){var i=e.value;""===i||F(i)?"Always"!==t&&e.parentElement&&e.parentElement.classList.remove("e-valid-input"):e.parentElement.classList.add("e-valid-input")}function r(){var t=d(this).getElementsByClassName("e-float-text")[0];F(t)||(ti([t],va.LABELTOP),t.classList.contains(va.LABELBOTTOM)&&ei([t],va.LABELBOTTOM))}function o(){var t=d(this);if(t.getElementsByTagName("textarea")[0]?""===t.getElementsByTagName("textarea")[0].value:""===t.getElementsByTagName("input")[0].value){var e=t.getElementsByClassName("e-float-text")[0];F(e)||(e.classList.contains(va.LABELTOP)&&ei([e],va.LABELTOP),ti([e],va.LABELBOTTOM))}}function s(t){t.addEventListener("focus",r),t.addEventListener("blur",o)}function a(t,e,i){var n,r,o=F(i)?$e:i;if("Auto"===t.floatLabelType&&s(t.element),F(e.container)?(e.container=f(t,va.FLOATINPUT,va.FLOATCUSTOMTAG,"div",o),t.element.parentNode.insertBefore(e.container,t.element)):(F(t.customTag)||e.container.classList.add(va.FLOATCUSTOMTAG),e.container.classList.add(va.FLOATINPUT)),n=o("span",{className:va.FLOATLINE}),r=o("label",{className:va.FLOATTEXT}),F(t.element.id)||""===t.element.id||(r.id="label_"+t.element.id.replace(/ /g,"_"),hi(t.element,{"aria-labelledby":r.id})),F(t.element.placeholder)||""===t.element.placeholder||(r.innerHTML=t.element.placeholder,t.element.removeAttribute("placeholder")),F(t.properties)||F(t.properties.placeholder)||""===t.properties.placeholder||(r.innerHTML=t.properties.placeholder),r.innerHTML||e.container.classList.add(va.NOFLOATLABEL),e.container.classList.contains("e-float-icon-left")){var a=e.container.querySelector(".e-input-in-wrap");a.appendChild(t.element),a.appendChild(n),a.appendChild(r)}else e.container.appendChild(t.element),e.container.appendChild(n),e.container.appendChild(r);c(t.element.value,r),"Always"===t.floatLabelType&&(r.classList.contains(va.LABELBOTTOM)&&ei([r],va.LABELBOTTOM),ti([r],va.LABELTOP)),"Auto"===t.floatLabelType&&(t.element.addEventListener("input",function(e){c(t.element.value,r)}),t.element.addEventListener("blur",function(e){c(t.element.value,r)})),F(t.element.getAttribute("id"))||r.setAttribute("for",t.element.getAttribute("id"))}function l(t,e){"Always"===t&&e.classList.contains("e-outline")&&e.classList.add("e-valid-input")}function h(t,e){t?ei([e],va.CLEARICONHIDE):ti([e],va.CLEARICONHIDE)}function c(t,e){t?(ti([e],va.LABELTOP),e.classList.contains(va.LABELBOTTOM)&&ei([e],va.LABELBOTTOM)):(e.classList.contains(va.LABELTOP)&&ei([e],va.LABELTOP),ti([e],va.LABELBOTTOM))}function d(t){var e=F(t.parentNode)?t:t.parentNode;return e&&e.classList.contains("e-input-in-wrap")&&(e=e.parentNode),e}function p(t,e,i){e.addEventListener("click",function(i){t.classList.contains(va.DISABLE)||t.readOnly||(i.preventDefault(),t!==document.activeElement&&t.focus(),t.value="",ti([e],va.CLEARICONHIDE))}),t.addEventListener("input",function(i){h(t.value,e)}),t.addEventListener("focus",function(i){h(t.value,e)}),t.addEventListener("blur",function(t){setTimeout(function(){ti([e],va.CLEARICONHIDE)},200)})}function u(t,e){if(d(t).classList.contains(va.FLOATINPUT)&&"Auto"===e){var i=d(t).getElementsByClassName("e-float-text")[0];c(t.value,i)}}function f(t,e,i,n,r){var o,s=F(r)?$e:r;return F(t.customTag)?o=s(n,{className:e}):(o=s(t.customTag,{className:e})).classList.add(i),o.classList.add("e-control-wrapper"),o}function g(t,e,i){F(i)||""===i||ei(e,i.split(" ")),F(t)||""===t||ti(e,t.split(" "))}function m(t,e){var i;t=function(t){var e="";if(!F(t)&&""!==t){var i=document.createElement("span");i.innerHTML='<input  placeholder="'+t+'"/>',e=i.children[0].placeholder}return e}(t),(i=d(e)).classList.contains(va.FLOATINPUT)?F(t)||""===t?(i.classList.add(va.NOFLOATLABEL),i.getElementsByClassName(va.FLOATTEXT)[0].textContent=""):(i.getElementsByClassName(va.FLOATTEXT)[0].textContent=t,i.classList.remove(va.NOFLOATLABEL),e.removeAttribute("placeholder")):F(t)||""===t?(e.removeAttribute("placeholder"),e.removeAttribute("aria-placeholder")):hi(e,{placeholder:t,"aria-placeholder":t})}function y(t,e,i){t?hi(e,{readonly:""}):e.removeAttribute("readonly"),F(i)||u(e,i)}function v(t,e){t?ti(e,va.RTL):ei(e,va.RTL)}function b(t,e,i,n){var r={disabled:"disabled","aria-disabled":"true"},o=!F(n);t?(e.classList.remove(va.DISABLE),S(r,e),o&&ei([n],va.DISABLE)):(e.classList.add(va.DISABLE),x(r,e),o&&ti([n],va.DISABLE)),F(i)||u(e,i)}function w(t,e,i,n,r){var o=F(r)?$e:r;t?i.clearButton=function(t,e,i,n){var r=(F(n)?$e:n)("span",{className:va.CLEARICON}),o=e.container;return F(i)?(e.container.classList.contains(va.FLOATINPUT)?e.container.querySelector("."+va.FLOATTEXT):t).insertAdjacentElement("afterend",r):o.appendChild(r),!F(o)&&o.classList.contains(va.FLOATINPUT)&&ti([o],va.INPUTGROUP),ti([r],va.CLEARICONHIDE),p(t,r),r.setAttribute("aria-label","close"),r}(e,i,n,o):(i.clearButton.remove(),i.clearButton=null)}function S(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i],o=void 0;o=d(e),"disabled"===r&&e.classList.remove(va.DISABLE),"disabled"===r&&o.classList.contains(va.INPUTGROUP)&&o.classList.remove(va.DISABLE),"placeholder"===r&&o.classList.contains(va.FLOATINPUT)?o.getElementsByClassName(va.FLOATTEXT)[0].textContent="":e.removeAttribute(r)}}function x(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i],o=void 0;o=d(e),"disabled"===r&&e.classList.add(va.DISABLE),"disabled"===r&&o.classList.contains(va.INPUTGROUP)&&o.classList.add(va.DISABLE),"placeholder"===r&&o.classList.contains(va.FLOATINPUT)?o.getElementsByClassName(va.FLOATTEXT)[0].textContent=t[r]:e.setAttribute(r,t[r])}}function C(t,e,i){var n=[];n.push(i);var r=F(i)?e.querySelectorAll(".e-input-group-icon"):n;if(t&&r.length>0)for(var o=0;o<r.length;o++)r[o].addEventListener("mousedown",P,!1),r[o].addEventListener("mouseup",O,!1);else if(r.length>0)for(o=0;o<r.length;o++)r[o].removeEventListener("mousedown",P,this),r[o].removeEventListener("mouseup",O,this)}function P(){for(var t,e,i=this.parentElement;!i.classList.contains("e-input-group");)i=i.parentElement;e=this,(t=i).classList.contains("e-disabled")||t.querySelector("input").readOnly||e.classList.add("e-input-btn-ripple")}function O(){var t=this;setTimeout(function(){t.classList.remove("e-input-btn-ripple")},500)}function E(t,e){var i=e("span",{className:t});return i.classList.add("e-input-group-icon"),i}function L(t,e,i,n){var r=F(n)?$e:n,o=E(t,r);e.classList.add("e-float-icon-left");var s=e.querySelector(".e-input-in-wrap");if(F(s)){s=r("span",{className:"e-input-in-wrap"}),i.parentNode.insertBefore(s,i);var a=e.querySelectorAll(i.tagName+" ~ *");s.appendChild(i);for(var l=0;l<a.length;l++)s.appendChild(a[l])}return s.parentNode.insertBefore(o,s),e.classList.contains(va.INPUTGROUP)||e.classList.add(va.INPUTGROUP),C(!0,e,o),o}function I(t,e,i){var n=E(t,F(i)?$e:i);return e.classList.contains(va.INPUTGROUP)||e.classList.add(va.INPUTGROUP),(e.classList.contains("e-float-icon-left")?e.querySelector(".e-input-in-wrap"):e).appendChild(n),C(!0,e,n),n}t.createInput=function(t,n){var r=F(n)?$e:n,o={container:null,buttons:[],clearButton:null};if(e=t.floatLabelType,F(t.floatLabelType)||"Never"===t.floatLabelType?(o.container=f(t,va.INPUTGROUP,va.INPUTCUSTOMTAG,"span",r),t.element.parentNode.insertBefore(o.container,t.element),ti([t.element],va.INPUT),o.container.appendChild(t.element)):a(t,o,r),i(t),F(t.properties)||F(t.properties.showClearButton)||!t.properties.showClearButton||"TEXTAREA"===t.element.tagName||(w(t.properties.showClearButton,t.element,o,!0,r),o.clearButton.setAttribute("role","button"),o.container.classList.contains(va.FLOATINPUT)&&ti([o.container],va.INPUTGROUP)),!F(t.buttons)&&"TEXTAREA"!==t.element.tagName)for(var s=0;s<t.buttons.length;s++)o.buttons.push(I(t.buttons[s],o.container,r));return F(t.element)||"TEXTAREA"!==t.element.tagName||ti([o.container],va.TEXTAREA),o=function(t,e){if(!F(t.properties))for(var i=0,n=Object.keys(t.properties);i<n.length;i++){var r=n[i];switch(r){case"cssClass":g(t.properties.cssClass,[e.container]),l(t.floatLabelType,e.container);break;case"enabled":b(t.properties.enabled,t.element,t.floatLabelType,e.container);break;case"enableRtl":v(t.properties.enableRtl,[e.container]);break;case"placeholder":m(t.properties.placeholder,t.element);break;case"readonly":y(t.properties.readonly,t.element)}}return e}(t,o),o,o},t.bindInitialEvent=i,t.wireFloatingEvents=s,t.wireClearBtnEvents=p,t.setValue=function(t,e,i,r){if(e.value=t,F(i)||"Auto"!==i||u(e,i),!F(r)&&r){var o=d(e);if(!F(o)){var s=o.getElementsByClassName(va.CLEARICON)[0];e.value&&o.classList.contains("e-input-focus")?ei([s],va.CLEARICONHIDE):ti([s],va.CLEARICONHIDE)}}n(i,e)},t.setCssClass=g,t.setWidth=function(t,e){"number"==typeof t?e.style.width=J(t):"string"==typeof t&&(e.style.width=t.match(/px|%|em/)?t:J(t))},t.setPlaceholder=m,t.setReadonly=y,t.setEnableRtl=v,t.setEnabled=b,t.setClearButton=w,t.removeAttributes=S,t.addAttributes=x,t.removeFloating=function(t){var e,i=t.container;if(!F(i)&&i.classList.contains(va.FLOATINPUT)){var n=i.querySelector("textarea")?i.querySelector("textarea"):i.querySelector("input"),s=i.querySelector("."+va.FLOATTEXT).textContent,a=null!==i.querySelector(".e-clear-icon");ai(i.querySelector("."+va.FLOATLINE)),ai(i.querySelector("."+va.FLOATTEXT)),mi(i,[va.INPUTGROUP],[va.FLOATINPUT]),(e=n).removeEventListener("focus",r),e.removeEventListener("blur",o),hi(n,{placeholder:s}),n.classList.add(va.INPUT),a||"INPUT"!==n.tagName||n.removeAttribute("required")}},t.addFloating=function(t,i,n,r){var o=F(r)?$e:r,s=pi(t,"."+va.INPUTGROUP);if(e=i,"Never"!==i){var h=s.tagName,c={element:t,floatLabelType:i,customTag:h="DIV"!==h&&"SPAN"!==h?h:null,properties:{placeholder:n}},d=s.querySelector(".e-clear-icon"),p={container:s};t.classList.remove(va.INPUT),a(c,p,o);var u=s.classList.contains("e-float-icon-left");if(F(d)&&(d=u?s.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon"):s.querySelector(".e-input-group-icon")),F(d))u&&(d=s.querySelector(".e-input-group-icon")),F(d)&&s.classList.remove(va.INPUTGROUP);else{var f=s.querySelector("."+va.FLOATLINE),g=s.querySelector("."+va.FLOATTEXT),m=u?s.querySelector(".e-input-in-wrap"):s;m.insertBefore(t,d),m.insertBefore(f,d),m.insertBefore(g,d)}}l(i,t.parentElement)},t.setRipple=function(t,e){for(var i=0;i<e.length;i++)C(t,e[i].container)},t.addIcon=function(t,e,i,n,r){var o="string"==typeof e?e.split(","):e;if("append"===t.toLowerCase())for(var s=0,a=o;s<a.length;s++)I(a[s],i,r);else for(var l=0,h=o;l<h.length;l++)L(h[l],i,n,r)},t.prependSpan=L,t.appendSpan=I}(ya||(ya={}));var ba=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wa=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Sa="e-input-group-icon",xa="e-spin-up",Ca=new RegExp("^(-)?(\\d*)$"),Pa=["title","style","class"],Oa=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isVue=!1,n.preventChange=!1,n.numericOptions=e,n}return ba(e,t),e.prototype.preRender=function(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;var t=R("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),ei([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=pi(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var e=this.createElement("input"),i=0;i<this.element.attributes.length;i++){"id"!==this.element.attributes[i].nodeName&&(e.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),e.innerHTML=this.element.innerHTML)}this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(e),this.element=e,z("ej2_instances",t,this.element)}if(!$()||!this.isServerRendered){hi(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off","aria-live":"assertive"});var n={incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder};this.l10n=new Ln("numerictextbox",n,this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,$()&&this.isServerRendered||(this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value)),this.validateMinMax(),this.validateStep(),null!==this.placeholder||$()&&this.isServerRendered||this.updatePlaceholder()},e.prototype.render=function(){"input"===this.element.tagName.toLowerCase()&&($()&&this.isServerRendered?(this.container=this.element.parentElement,this.inputWrapper={container:this.container},this.hiddenInput=this.container.querySelector('input[type="hidden"]'),this.showClearButton&&(this.inputWrapper.clearButton=this.container.querySelector(".e-clear-icon"),ya.wireClearBtnEvents(this.element,this.inputWrapper.clearButton,this.inputWrapper.container)),this.showSpinButton&&(this.spinDown=this.container.querySelector(".e-spin-down"),this.spinUp=this.container.querySelector("."+xa),this.wireSpinBtnEvents()),ya.bindInitialEvent({element:this.element,buttons:null,customTag:null,floatLabelType:this.floatLabelType,properties:this.properties})):(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value)),this.wireEvents(),$()&&this.isServerRendered||(null===this.value||isNaN(this.value)||this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value))),this.elementPrevValue=this.element.value,this.renderComplete())},e.prototype.checkAttributes=function(t){for(var e=0,i=t?F(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"];e<i.length;e++){var n=i[e];if(!F(this.element.getAttribute(n)))switch(n){case"disabled":if(F(this.numericOptions)||void 0===this.numericOptions.enabled||t){var r="disabled"!==this.element.getAttribute(n)&&""!==this.element.getAttribute(n)&&"true"!==this.element.getAttribute(n);this.setProperties({enabled:r},!t)}break;case"readonly":if(F(this.numericOptions)||void 0===this.numericOptions.readonly||t){var o="readonly"===this.element.getAttribute(n)||""===this.element.getAttribute(n)||"true"===this.element.getAttribute(n);this.setProperties({readonly:o},!t)}break;case"placeholder":(F(this.numericOptions)||void 0===this.numericOptions.placeholder||t)&&this.setProperties({placeholder:this.element.placeholder},!t);break;case"value":if(F(this.numericOptions)||void 0===this.numericOptions.value||t){var s=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));this.setProperties(z(n,s,{}),!t)}break;case"min":if(F(this.numericOptions)||void 0===this.numericOptions.min||t){var a=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));null===a||isNaN(a)||this.setProperties(z(n,a,{}),!t)}break;case"max":if(F(this.numericOptions)||void 0===this.numericOptions.max||t){var l=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));null===l||isNaN(l)||this.setProperties(z(n,l,{}),!t)}break;case"step":if(F(this.numericOptions)||void 0===this.numericOptions.step||t){var h=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));null===h||isNaN(h)||this.setProperties(z(n,h,{}),!t)}break;case"style":this.inputStyle=this.element.getAttribute(n);break;case"name":this.inputName=this.element.getAttribute(n);break;default:var c=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));(null!==c&&!isNaN(c)||"value"===n)&&this.setProperties(z(n,c,{}),!0)}}},e.prototype.updatePlaceholder=function(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)},e.prototype.initCultureFunc=function(){this.instance=new kt(this.locale)},e.prototype.initCultureInfo=function(){this.cultureInfo.format=this.format,null!==R("currency",this)&&(z("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))},e.prototype.createWrapper=function(){var t=this.cssClass;F(this.cssClass)||""===this.cssClass||(t=this.getNumericValidClassList(this.cssClass));var e=ya.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:t,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=e,this.container=e.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&hi(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),hi(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&hi(this.container,{style:this.inputStyle})},e.prototype.updateDataAttribute=function(t){var e={};if(t)e=this.htmlAttributes;else for(var i=0;i<this.element.attributes.length;i++)e[this.element.attributes[i].name]=this.element.getAttribute(this.element.attributes[i].name);for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];0===o.indexOf("data")&&this.hiddenInput.setAttribute(o,e[o])}},e.prototype.updateHTMLAttrToElement=function(){if(!F(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];Pa.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[i])}},e.prototype.updateCssClass=function(t,e){ya.setCssClass(this.getNumericValidClassList(t),[this.container],this.getNumericValidClassList(e))},e.prototype.getNumericValidClassList=function(t){var e=t;return F(t)||""===t||(e=t.replace(/\s+/g," ").trim()),e},e.prototype.updateHTMLAttrToWrapper=function(){if(!F(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if(Pa.indexOf(i)>-1)if("class"===i){var n=this.getNumericValidClassList(this.htmlAttributes[i]);""!==n&&ti([this.container],n.split(" "))}else if("style"===i){var r=this.container.getAttribute(i);r=F(r)?this.htmlAttributes[i]:r+this.htmlAttributes[i],this.container.setAttribute(i,r)}else this.container.setAttribute(i,this.htmlAttributes[i])}},e.prototype.setElementWidth=function(t){F(t)||("number"==typeof t?this.container.style.width=J(t):"string"==typeof t&&(this.container.style.width=t.match(/px|%|em/)?t:J(t)))},e.prototype.spinBtnCreation=function(){this.spinDown=ya.appendSpan(Sa+" e-spin-down",this.container,this.createElement),hi(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),this.spinUp=ya.appendSpan(Sa+" "+xa,this.container,this.createElement),hi(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()},e.prototype.validateMinMax=function(){("number"!=typeof this.min||isNaN(this.min))&&this.setProperties({min:-Number.MAX_VALUE},!0),("number"!=typeof this.max||isNaN(this.max))&&this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),hi(this.element,{"aria-valuemin":this.min.toString(),"aria-valuemax":this.max.toString()})},e.prototype.formattedValue=function(t,e){return this.instance.getNumberFormat({maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1})(e)},e.prototype.validateStep=function(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)},e.prototype.action=function(t,e){this.isInteract=!0;var i=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(i,this.step,t)),this.raiseChangeEvent(e)},e.prototype.checkErrorClass=function(){this.isValidState?ei([this.container],"e-error"):ti([this.container],"e-error"),hi(this.element,{"aria-invalid":this.isValidState?"false":"true"})},e.prototype.bindClearEvent=function(){this.showClearButton&&ee.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},e.prototype.resetHandler=function(t){t.preventDefault(),this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.clear(t),this.isInteract=!0,this.raiseChangeEvent(t)},e.prototype.clear=function(t){if(this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="",pi(this.element,"form")){var e=this.element.nextElementSibling,i=document.createEvent("KeyboardEvent");i.initEvent("keyup",!1,!0),e.dispatchEvent(i)}},e.prototype.resetFormHandler=function(){"EJS-NUMERICTEXTBOX"===this.element.tagName?this.updateValue(null):this.updateValue(this.inputEleValue)},e.prototype.setSpinButton=function(){F(this.spinDown)||hi(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),F(this.spinUp)||hi(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})},e.prototype.wireEvents=function(){ee.add(this.element,"focus",this.focusHandler,this),ee.add(this.element,"blur",this.focusOutHandler,this),ee.add(this.element,"keydown",this.keyDownHandler,this),ee.add(this.element,"keyup",this.keyUpHandler,this),ee.add(this.element,"input",this.inputHandler,this),ee.add(this.element,"keypress",this.keyPressHandler,this),ee.add(this.element,"change",this.changeHandler,this),ee.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&ee.add(this.formEle,"reset",this.resetFormHandler,this))},e.prototype.wireSpinBtnEvents=function(){ee.add(this.spinUp,te.touchStartEvent,this.mouseDownOnSpinner,this),ee.add(this.spinDown,te.touchStartEvent,this.mouseDownOnSpinner,this),ee.add(this.spinUp,te.touchEndEvent,this.mouseUpOnSpinner,this),ee.add(this.spinDown,te.touchEndEvent,this.mouseUpOnSpinner,this),ee.add(this.spinUp,te.touchMoveEvent,this.touchMoveOnSpinner,this),ee.add(this.spinDown,te.touchMoveEvent,this.touchMoveOnSpinner,this)},e.prototype.unwireEvents=function(){ee.remove(this.element,"focus",this.focusHandler),ee.remove(this.element,"blur",this.focusOutHandler),ee.remove(this.element,"keyup",this.keyUpHandler),ee.remove(this.element,"input",this.inputHandler),ee.remove(this.element,"keydown",this.keyDownHandler),ee.remove(this.element,"keypress",this.keyPressHandler),ee.remove(this.element,"change",this.changeHandler),ee.remove(this.element,"paste",this.pasteHandler),this.formEle&&ee.remove(this.formEle,"reset",this.resetFormHandler)},e.prototype.unwireSpinBtnEvents=function(){ee.remove(this.spinUp,te.touchStartEvent,this.mouseDownOnSpinner),ee.remove(this.spinDown,te.touchStartEvent,this.mouseDownOnSpinner),ee.remove(this.spinUp,te.touchEndEvent,this.mouseUpOnSpinner),ee.remove(this.spinDown,te.touchEndEvent,this.mouseUpOnSpinner),ee.remove(this.spinUp,te.touchMoveEvent,this.touchMoveOnSpinner),ee.remove(this.spinDown,te.touchMoveEvent,this.touchMoveOnSpinner)},e.prototype.changeHandler=function(t){t.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);var e=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(e,t)},e.prototype.raiseChangeEvent=function(t){if(this.prevValue!==this.value){var e={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:t},t&&(this.changeEventArgs.event=t),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),_(e,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",e)}},e.prototype.pasteHandler=function(){var t=this;if(this.enabled&&!this.readonly){var e=this.element.value;setTimeout(function(){t.numericRegex().test(t.element.value)||t.setElementValue(e)})}},e.prototype.preventHandler=function(){var t=this,e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(function(){if(t.element.selectionStart>0){var i,n=t.element.selectionStart,r=t.element.selectionStart-1,o=t.element.value.split("");i=R("decimal",jt(t.locale)).charCodeAt(0)," "===t.element.value[r]&&t.element.selectionStart>0&&!e?(F(t.prevVal)?t.element.value=t.element.value.trim():0!==r?t.element.value=t.prevVal:0===r&&(t.element.value=t.element.value.trim()),t.element.setSelectionRange(r,r)):isNaN(parseFloat(t.element.value[t.element.selectionStart-1]))&&45!==t.element.value[t.element.selectionStart-1].charCodeAt(0)?(o.indexOf(t.element.value[t.element.selectionStart-1])!==o.lastIndexOf(t.element.value[t.element.selectionStart-1])&&t.element.value[t.element.selectionStart-1].charCodeAt(0)===i||t.element.value[t.element.selectionStart-1].charCodeAt(0)!==i)&&(t.element.value=t.element.value.substring(0,r)+t.element.value.substring(n,t.element.value.length),t.element.setSelectionRange(r,r),isNaN(parseFloat(t.element.value[t.element.selectionStart-1]))&&t.element.selectionStart>0&&t.element.value.length&&t.preventHandler()):isNaN(parseFloat(t.element.value[t.element.selectionStart-2]))&&t.element.selectionStart>1&&45!==t.element.value[t.element.selectionStart-2].charCodeAt(0)&&(o.indexOf(t.element.value[t.element.selectionStart-2])!==o.lastIndexOf(t.element.value[t.element.selectionStart-2])&&t.element.value[t.element.selectionStart-2].charCodeAt(0)===i||t.element.value[t.element.selectionStart-2].charCodeAt(0)!==i)&&(t.element.setSelectionRange(r,r),t.nextEle=t.element.value[t.element.selectionStart],t.cursorPosChanged=!0,t.preventHandler()),!0===t.cursorPosChanged&&t.element.value[t.element.selectionStart]===t.nextEle&&isNaN(parseFloat(t.element.value[t.element.selectionStart-1]))&&(t.element.setSelectionRange(t.element.selectionStart+1,t.element.selectionStart+1),t.cursorPosChanged=!1,t.nextEle=null),""===t.element.value.trim()&&t.element.setSelectionRange(0,0),t.element.selectionStart>0&&45===t.element.value[t.element.selectionStart-1].charCodeAt(0)&&t.element.selectionStart>1&&(F(t.prevVal)?t.element.value=t.element.value:t.element.value=t.prevVal,t.element.setSelectionRange(t.element.selectionStart,t.element.selectionStart)),t.prevVal=t.element.value}})},e.prototype.keyUpHandler=function(t){if(this.enabled&&!this.readonly){!(!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))&&te.isDevice&&this.preventHandler();var e=this.instance.getNumberParser({format:"n"})(this.element.value);if(e=null===e||isNaN(e)?null:e,this.hiddenInput.value=e||0===e?e.toString():null,pi(this.element,"form")){var i=this.element.nextElementSibling,n=document.createEvent("KeyboardEvent");n.initEvent("keyup",!1,!0),i.dispatchEvent(n)}}},e.prototype.inputHandler=function(t){if(this.enabled&&!this.readonly){var e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||e)&&te.isDevice&&this.preventHandler(),this.isVue){var i=this.instance.getNumberParser({format:"n"})(this.element.value),n=this.instance.getNumberParser({format:"n"})(this.elementPrevValue),r={event:t,value:null===i||isNaN(i)?null:i,previousValue:null===n||isNaN(n)?null:n};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",r)}}},e.prototype.keyDownHandler=function(t){if(!this.readonly)switch(t.keyCode){case 38:t.preventDefault(),this.action("increment",t);break;case 40:t.preventDefault(),this.action("decrement",t)}},e.prototype.performAction=function(t,e,i){(null===t||isNaN(t))&&(t=0);var n="increment"===i?t+e:t-e;return n=this.correctRounding(t,e,n),this.strictMode?this.trimValue(n):n},e.prototype.correctRounding=function(t,e,i){var n=new RegExp("[,.](.*)"),r=(t.toString(),e.toString(),n.test(t.toString())),o=n.test(e.toString());if(r||o){var s=r?n.exec(t.toString())[0].length:0,a=o?n.exec(e.toString())[0].length:0,l=Math.max(s,a);return this.roundValue(i,l)}return i},e.prototype.roundValue=function(t,e){e=e||0;var i=Math.pow(10,e);return t*=i,Math.round(t)/i},e.prototype.updateValue=function(t,e){e&&(this.isInteract=!0),null===t||isNaN(t)||this.decimals&&(t=this.roundNumber(t,this.decimals)),this.changeValue(null===t||isNaN(t)?null:this.strictMode?this.trimValue(t):t),(!this.isVue||this.isVue&&!this.preventChange)&&this.raiseChangeEvent(e)},e.prototype.updateCurrency=function(t,e){z(t,e,this.cultureInfo),this.updateValue(this.value)},e.prototype.changeValue=function(t){if(t||0===t){var e;e=this.getNumberOfDecimals(t),this.setProperties({value:this.roundNumber(t,e)},!0)}else t=null,this.setProperties({value:t},!0);this.modifyText(),this.strictMode||this.validateState()},e.prototype.modifyText=function(){if(this.value||0===this.value){var t=this.formatNumber(),e=this.isFocused?t:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(e),hi(this.element,{"aria-valuenow":t}),this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null},e.prototype.setElementValue=function(t,e){ya.setValue(t,e||this.element,this.floatLabelType,this.showClearButton)},e.prototype.validateState=function(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()},e.prototype.getNumberOfDecimals=function(t){var e,i=new RegExp("[eE][-+]?([0-9]+)"),n=t.toString();if(i.test(n)){var r=i.exec(n);F(r)||(n=t.toFixed(Math.min(parseInt(r[1],10),20)))}var o=n.split(".")[1];return e=o&&o.length?o.length:0,null!==this.decimals&&(e=e<this.decimals?e:this.decimals),e},e.prototype.formatNumber=function(){var t;return t=this.getNumberOfDecimals(this.value),this.instance.getNumberFormat({maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1})(this.value)},e.prototype.trimValue=function(t){return t>this.max?this.max:t<this.min?this.min:t},e.prototype.roundNumber=function(t,e){var i=t,n=e||0,r=i.toString().split("e"),o=(i=Math.round(Number(r[0]+"e"+(r[1]?Number(r[1])+n:n)))).toString().split("e");return i=Number(o[0]+"e"+(o[1]?Number(o[1])-n:-n)),Number(i.toFixed(n))},e.prototype.cancelEvent=function(t){return t.preventDefault(),!1},e.prototype.keyPressHandler=function(t){if(!this.enabled||this.readonly)return!0;if(!te.isDevice&&"11.0"===te.info.version&&13===t.keyCode){var e=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(e,t),!0}if(0===t.which||t.metaKey||t.ctrlKey||8===t.keyCode||13===t.keyCode)return!0;var i=String.fromCharCode(t.which),n=this.element.value;return n=n.substring(0,this.element.selectionStart)+i+n.substring(this.element.selectionEnd),!!this.numericRegex().test(n)||(t.preventDefault(),t.stopPropagation(),!1)},e.prototype.numericRegex=function(){var t=R("decimal",jt(this.locale)),e="*";return"."===t&&(t="\\"+t),0===this.decimals&&this.validateDecimalOnType?Ca:(this.decimals&&this.validateDecimalOnType&&(e="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+t+"\\d"+e+")?)|("+t+"\\d"+e+")))?$"))},e.prototype.mouseWheel=function(t){var e;t.preventDefault();var i=t;i.wheelDelta?e=i.wheelDelta/120:i.detail&&(e=-i.detail/3),e>0?this.action("increment",t):e<0&&this.action("decrement",t),this.cancelEvent(t)},e.prototype.focusHandler=function(t){var e=this;if(this.focusEventArgs={event:t,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,ei([this.container],"e-error"),this.prevValue=this.value,this.value||0===this.value){var i=this.formatNumber();if(this.setElementValue(i),!this.isPrevFocused)if(te.isDevice||"11.0"!==te.info.version){var n=te.isDevice&&te.isIos?600:0;setTimeout(function(){e.element.setSelectionRange(0,i.length)},n)}else this.element.setSelectionRange(0,i.length)}te.isDevice||ee.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}},e.prototype.focusOutHandler=function(t){var e=this;if(this.blurEventArgs={event:t,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(t.preventDefault(),te.isDevice){var i=this.element.value;this.element.focus(),this.isPrevFocused=!1;var n=this.element;setTimeout(function(){e.setElementValue(i,n)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);var r=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(r),te.isDevice||ee.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if(pi(this.element,"form")){var o=this.element.nextElementSibling,s=document.createEvent("FocusEvent");s.initEvent("focusout",!1,!0),o.dispatchEvent(s)}}},e.prototype.mouseDownOnSpinner=function(t){var e=this;if(this.isFocused&&(this.isPrevFocused=!0,t.preventDefault()),this.getElementData(t)){this.getElementData(t);var i=t.currentTarget,n=i.classList.contains(xa)?"increment":"decrement";ee.add(i,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(function(){e.isCalled=!0,e.action(n,t)},150),ee.add(document,"mouseup",this.mouseUpClick,this)}},e.prototype.touchMoveOnSpinner=function(t){document.elementFromPoint(t.clientX,t.clientY).classList.contains(Sa)||clearInterval(this.timeOut)},e.prototype.mouseUpOnSpinner=function(t){if(this.isPrevFocused&&(this.element.focus(),te.isDevice||(this.isPrevFocused=!1)),te.isDevice||t.preventDefault(),this.getElementData(t)){var e=t.currentTarget,i=e.classList.contains(xa)?"increment":"decrement";if(ee.remove(e,"mouseleave",this.mouseUpClick),this.isCalled||this.action(i,t),this.isCalled=!1,ee.remove(document,"mouseup",this.mouseUpClick),pi(this.element,"form")){var n=this.element.nextElementSibling,r=document.createEvent("KeyboardEvent");r.initEvent("keyup",!1,!0),n.dispatchEvent(r)}}},e.prototype.getElementData=function(t){return!(t.which&&3===t.which||t.button&&2===t.button||!this.enabled||this.readonly)&&(clearInterval(this.timeOut),!0)},e.prototype.floatLabelTypeUpdate=function(){ya.removeFloating(this.inputWrapper);var t=this.hiddenInput;this.hiddenInput.remove(),ya.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(t,this.container.childNodes[1])},e.prototype.mouseUpClick=function(t){t.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,ee.remove(this.spinUp,"mouseleave",this.mouseUpClick),ee.remove(this.spinDown,"mouseleave",this.mouseUpClick)},e.prototype.increment=function(t){void 0===t&&(t=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,t,"increment")),this.raiseChangeEvent()},e.prototype.decrement=function(t){void 0===t&&(t=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,t,"decrement")),this.raiseChangeEvent()},e.prototype.destroy=function(){if(this.unwireEvents(),!$()||!this.isServerRendered){ai(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),ai(this.spinUp),ai(this.spinDown));for(var e=["aria-labelledby","role","autocomplete","aria-readonly","autocorrect","aria-disabled","aria-placeholder","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-live","aria-valuenow","aria-invalid"],i=0;i<e.length;i++)this.element.removeAttribute(e[i]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),ai(this.container),t.prototype.destroy.call(this)}},e.prototype.getText=function(){return this.element.value},e.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),ti([this.container],["e-input-focus"]))},e.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),ei([this.container],["e-input-focus"]))},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];switch(r){case"width":this.setElementWidth(t.width);break;case"cssClass":this.updateCssClass(t.cssClass,e.cssClass);break;case"enabled":ya.setEnabled(t.enabled,this.element);break;case"enableRtl":ya.setEnableRtl(t.enableRtl,[this.container]);break;case"readonly":ya.setReadonly(t.readonly,this.element),this.readonly?hi(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0);break;case"placeholder":ya.setPlaceholder(t.placeholder,this.element);break;case"step":this.step=t.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(t);break;case"showClearButton":this.updateClearButton(t);break;case"floatLabelType":this.floatLabelType=t.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.updateValue(t.value),this.isVue&&this.preventChange&&(this.preventChange=!1);break;case"min":case"max":z(r,R(r,t),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=t.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),ya.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":var o=R(r,t);this.setProperties({currencyCode:o},!0),this.updateCurrency(r,o);break;case"currencyCode":var s=R(r,t);this.setProperties({currency:s},!0),this.updateCurrency("currency",s);break;case"format":z(r,R(r,t),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=t.decimals,this.updateValue(this.value)}}},e.prototype.updateClearButton=function(t){$()?this.showClearButton&&(this.inputWrapper.clearButton=this.container.querySelector(".e-clear-icon"),ya.wireClearBtnEvents(this.element,this.inputWrapper.clearButton,this.inputWrapper.container)):(ya.setClearButton(t.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent())},e.prototype.updateSpinButton=function(t){$()?this.showSpinButton&&(this.spinDown=this.container.querySelector(".e-spin-down"),this.spinUp=this.container.querySelector("."+xa),this.wireSpinBtnEvents()):t.showSpinButton?this.spinBtnCreation():(ai(this.spinUp),ai(this.spinDown))},e.prototype.getModuleName=function(){return"numerictextbox"},wa([Hi("")],e.prototype,"cssClass",void 0),wa([Hi(null)],e.prototype,"value",void 0),wa([Hi(-Number.MAX_VALUE)],e.prototype,"min",void 0),wa([Hi(Number.MAX_VALUE)],e.prototype,"max",void 0),wa([Hi(1)],e.prototype,"step",void 0),wa([Hi(null)],e.prototype,"width",void 0),wa([Hi(null)],e.prototype,"placeholder",void 0),wa([Hi({})],e.prototype,"htmlAttributes",void 0),wa([Hi(!0)],e.prototype,"showSpinButton",void 0),wa([Hi(!1)],e.prototype,"readonly",void 0),wa([Hi(!0)],e.prototype,"enabled",void 0),wa([Hi(!1)],e.prototype,"showClearButton",void 0),wa([Hi(!1)],e.prototype,"enablePersistence",void 0),wa([Hi("n2")],e.prototype,"format",void 0),wa([Hi(null)],e.prototype,"decimals",void 0),wa([Hi(null)],e.prototype,"currency",void 0),wa([Hi(null)],e.prototype,"currencyCode",void 0),wa([Hi(!0)],e.prototype,"strictMode",void 0),wa([Hi(!1)],e.prototype,"validateDecimalOnType",void 0),wa([Hi("Never")],e.prototype,"floatLabelType",void 0),wa([Ui()],e.prototype,"created",void 0),wa([Ui()],e.prototype,"destroyed",void 0),wa([Ui()],e.prototype,"change",void 0),wa([Ui()],e.prototype,"focus",void 0),wa([Ui()],e.prototype,"blur",void 0),e=wa([Gi],e)}(un),Ea=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),La=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Ia=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ea(e,t),La([Hi("None")],e.prototype,"placement",void 0),La([Hi(10)],e.prototype,"largeStep",void 0),La([Hi(1)],e.prototype,"smallStep",void 0),La([Hi(!1)],e.prototype,"showSmallTicks",void 0),La([Hi(null)],e.prototype,"format",void 0),e}(ln),Ta=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ea(e,t),La([Hi(null)],e.prototype,"color",void 0),La([Hi(null)],e.prototype,"start",void 0),La([Hi(null)],e.prototype,"end",void 0),e}(ln),Aa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ea(e,t),La([Hi(!1)],e.prototype,"enabled",void 0),La([Hi(null)],e.prototype,"minStart",void 0),La([Hi(null)],e.prototype,"minEnd",void 0),La([Hi(null)],e.prototype,"maxStart",void 0),La([Hi(null)],e.prototype,"maxEnd",void 0),La([Hi(!1)],e.prototype,"startHandleFixed",void 0),La([Hi(!1)],e.prototype,"endHandleFixed",void 0),e}(ln),Ba=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ea(e,t),La([Hi("")],e.prototype,"cssClass",void 0),La([Hi("Before")],e.prototype,"placement",void 0),La([Hi("Focus")],e.prototype,"showOn",void 0),La([Hi(!1)],e.prototype,"isVisible",void 0),La([Hi(null)],e.prototype,"format",void 0),e}(ln),ka="e-slider",Ma="e-rtl",Da="e-slider-input",Ra="e-control-wrapper",za="e-handle",ja="e-range",Na="e-slider-button",Ha="e-first-button",_a="e-second-button",Va="e-scale",Fa="e-tick",Wa="e-large",Ua="e-tick-value",Ga="e-slider-tooltip",qa="e-slider-hover",Xa="e-handle-first",Ya="e-handle-second",Za="e-disabled",Ka="e-slider-container",Ja="e-slider-horizontal-before",Qa="e-slider-horizontal-after",$a="e-slider-vertical-before",tl="e-slider-vertical-after",el="e-material-tooltip-open",il="e-tooltip-active",nl="e-material-slider",rl="e-slider-track",ol="e-slider-horizantal-color",sl="e-slider-vertical-color",al="e-handle-focused",ll="e-vertical",hl="e-horizontal",cl="e-handle-start",dl="e-material-tooltip-start",pl="e-tab-handle",ul="e-button-icon",fl="e-small-size",gl="e-tick-pos",ml="e-first-tick",yl="e-last-tick",vl="e-slider-btn",bl="e-tab-track",wl="e-tab-range",Sl="e-handle-active",xl="e-material-handle",Cl="e-material-range",Pl="e-material-default",Ol="e-material-tooltip-show",El="e-material-tooltip-hide",Ll="e-read-only",Il="e-limits",Tl="e-limit-bar",Al="e-limit-first",Bl="e-limit-second",kl="e-drag-horizontal",Ml="e-drag-vertical",Dl=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.horDir="left",n.verDir="bottom",n.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)"},n.transitionOnMaterialTooltip={handle:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, top 1ms ease-out",rangeBar:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, width 1ms ease-out, height 1ms ease-out"},n.scaleTransform="transform .4s cubic-bezier(.25, .8, .25, 1)",n.customAriaText=null,n.drag=!0,n}return Ea(e,t),e.prototype.preRender=function(){this.l10n=new Ln("slider",{incrementTitle:"Increase",decrementTitle:"Decrease"},this.locale),this.isElementFocused=!1,this.tickElementCollection=[],this.tooltipFormatInfo={},this.ticksFormatInfo={},this.initCultureInfo(),this.initCultureFunc(),this.formChecker()},e.prototype.formChecker=function(){var t=pi(this.element,"form");t?(this.isForm=!0,F(this.formResetValue)||this.setProperties({value:this.formResetValue},!0),this.formResetValue=this.value,"Range"!==this.type||!F(this.formResetValue)&&"object"==typeof this.formResetValue?F(this.formResetValue)&&(this.formResetValue=parseFloat(J(this.min))):this.formResetValue=[parseFloat(J(this.min)),parseFloat(J(this.max))],this.formElement=t):this.isForm=!1},e.prototype.initCultureFunc=function(){this.internationalization=new kt(this.locale)},e.prototype.initCultureInfo=function(){this.tooltipFormatInfo.format=F(this.tooltip.format)?null:this.tooltip.format,this.ticksFormatInfo.format=F(this.ticks.format)?null:this.ticks.format},e.prototype.formatString=function(t,e){var i=null,n=null;if(t||0===t){i=this.formatNumber(t);var r=this.numberOfDecimals(t);n=this.internationalization.getNumberFormat(e)(this.makeRoundNumber(t,r))}return{elementVal:i,formatString:n}},e.prototype.formatNumber=function(t){var e=this.numberOfDecimals(t);return this.internationalization.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(t)},e.prototype.numberOfDecimals=function(t){var e=t.toString().split(".")[1];return e&&e.length?e.length:0},e.prototype.makeRoundNumber=function(t,e){var i=e||0;return Number(t.toFixed(i))},e.prototype.fractionalToInteger=function(t){t=0===this.numberOfDecimals(t)?Number(t).toFixed(this.noOfDecimals):t;for(var e=1,i=0;i<this.noOfDecimals;i++)e*=10;return t=Number((t*e).toFixed(0))},e.prototype.render=function(){$()&&this.isServerRendered||this.initialize(),this.initRender(),this.wireEvents(),this.setZindex(),this.renderComplete()},e.prototype.initialize=function(){ti([this.element],ka),this.setCSSClass()},e.prototype.setElementWidth=function(t){F(t)||("number"==typeof t?this.sliderContainer.style.width=J(t):"string"==typeof t&&(this.sliderContainer.style.width=t.match(/px|%|em/)?t:J(t)))},e.prototype.setCSSClass=function(t){t&&ei([this.element],t.split(" ")),this.cssClass&&ti([this.element],this.cssClass.split(" "))},e.prototype.setEnabled=function(){this.enabled?(ei([this.sliderContainer],[Za]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.remove(Za),this.wireEvents()):(ti([this.sliderContainer],[Za]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.add(Za),this.unwireEvents())},e.prototype.getTheme=function(t){return window.getComputedStyle(t,":after").getPropertyValue("content").replace(/['"]+/g,"")},e.prototype.initRender=function(){$()&&this.isServerRendered?(this.sliderContainer=this.element.parentElement,this.sliderTrack=this.element.querySelector(".e-slider-track"),this.hiddenInput=this.element.parentElement.querySelector(".e-slider-input")):(this.sliderContainer=this.createElement("div",{className:Ka+" "+Ra}),this.element.parentNode.insertBefore(this.sliderContainer,this.element),this.sliderContainer.appendChild(this.element),this.sliderTrack=this.createElement("div",{className:rl}),this.element.appendChild(this.sliderTrack)),this.setElementWidth(this.width),this.element.tabIndex=-1,this.getThemeInitialization(),this.setHandler(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),$()&&this.isServerRendered||(this.setOrientClass(),this.hiddenInput=this.createElement("input",{attrs:{type:"hidden",value:F(this.value)?this.min.toString():this.value.toString(),name:this.element.getAttribute("name")||this.element.getAttribute("id")||"_"+(1e3*Math.random()).toFixed(0)+"slider",class:Da}}),this.hiddenInput.tabIndex=-1,this.sliderContainer.appendChild(this.hiddenInput)),this.showButtons&&this.setButtons(),this.setEnableRTL(),"Range"===this.type?this.rangeValueUpdate():this.value=F(this.value)?parseFloat(J(this.min.toString())):this.value,this.previousVal="Range"!==this.type?this.checkHandleValue(parseFloat(J(this.value.toString()))):[this.checkHandleValue(parseFloat(J(this.value[0].toString()))),this.checkHandleValue(parseFloat(J(this.value[1].toString())))],this.previousChanged=this.previousVal,F(this.element.hasAttribute("name"))||this.element.removeAttribute("name"),this.setValue(),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.renderScale(),this.tooltip.isVisible&&this.renderTooltip(),$()&&this.isServerRendered||(this.enabled?ei([this.sliderContainer],[Za]):ti([this.sliderContainer],[Za]),this.readonly?ti([this.sliderContainer],[Ll]):ei([this.sliderContainer],[Ll]))},e.prototype.getThemeInitialization=function(){this.isMaterial="material"===this.getTheme(this.sliderContainer)||"material-dark"===this.getTheme(this.sliderContainer),this.isBootstrap="bootstrap"===this.getTheme(this.sliderContainer)||"bootstrap-dark"===this.getTheme(this.sliderContainer),this.isBootstrap4="bootstrap4"===this.getTheme(this.sliderContainer),this.isMaterialTooltip=this.isMaterial&&"Range"!==this.type&&this.tooltip.isVisible},e.prototype.createRangeBar=function(){"Default"!==this.type&&(this.rangeBar=this.createElement("div",{attrs:{class:ja}}),this.element.appendChild(this.rangeBar),this.drag&&"Range"===this.type&&("Horizontal"===this.orientation?this.rangeBar.classList.add(kl):this.rangeBar.classList.add(Ml)))},e.prototype.createLimitBar=function(){if($()&&this.isServerRendered)this.limitBarFirst=this.element.querySelectorAll(".e-limits")[0],"Range"===this.type&&(this.limitBarSecond=this.element.querySelectorAll(".e-limit-second")[0]);else{var t="Range"!==this.type?Tl:Al;t+=" "+Il,this.limitBarFirst=this.createElement("div",{attrs:{class:t}}),this.element.appendChild(this.limitBarFirst),"Range"===this.type&&(this.limitBarSecond=this.createElement("div",{attrs:{class:Bl+" "+Il}}),this.element.appendChild(this.limitBarSecond))}},e.prototype.setOrientClass=function(){"Vertical"!==this.orientation?(this.sliderContainer.classList.remove(ll),this.sliderContainer.classList.add(hl),this.firstHandle.setAttribute("aria-orientation","horizontal"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","horizontal")):(this.sliderContainer.classList.remove(hl),this.sliderContainer.classList.add(ll),this.firstHandle.setAttribute("aria-orientation","vertical"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","vertical"))},e.prototype.setAriaAttributes=function(t){var e=this,i=this.min,n=this.max;(!F(this.customValues)&&this.customValues.length>0&&(i=this.customValues[0],n=this.customValues[this.customValues.length-1]),"Range"!==this.type)?hi(t,{"aria-valuemin":i.toString(),"aria-valuemax":n.toString()}):(!F(this.customValues)&&this.customValues.length>0?[[i.toString(),this.customValues[this.value[1]].toString()],[this.customValues[this.value[0]].toString(),n.toString()]]:[[i.toString(),this.value[1].toString()],[this.value[0].toString(),n.toString()]]).forEach(function(t,i){var n=0===i?e.firstHandle:e.secondHandle;n&&hi(n,{"aria-valuemin":t[0],"aria-valuemax":t[1]})})},e.prototype.createSecondHandle=function(){$()&&this.isServerRendered?this.secondHandle=this.element.querySelector(".e-handle-second"):(this.secondHandle=this.createElement("div",{attrs:{class:za,role:"slider",tabIndex:"0"}}),this.secondHandle.classList.add(Ya),this.element.appendChild(this.secondHandle))},e.prototype.createFirstHandle=function(){$()&&this.isServerRendered?this.firstHandle=this.element.querySelector(".e-handle-first"):(this.firstHandle=this.createElement("div",{attrs:{class:za,role:"slider",tabIndex:"0"}}),this.firstHandle.classList.add(Xa),this.element.appendChild(this.firstHandle)),this.isMaterialTooltip&&(this.materialHandle=this.createElement("div",{attrs:{class:za+" "+xl}}),this.element.appendChild(this.materialHandle))},e.prototype.wireFirstHandleEvt=function(t){t?(ee.remove(this.firstHandle,"mousedown touchstart",this.handleFocus),ee.remove(this.firstHandle,"transitionend",this.transitionEnd),ee.remove(this.firstHandle,"mouseenter touchenter",this.handleOver),ee.remove(this.firstHandle,"mouseleave touchend",this.handleLeave)):(ee.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this),ee.add(this.firstHandle,"transitionend",this.transitionEnd,this),ee.add(this.firstHandle,"mouseenter touchenter",this.handleOver,this),ee.add(this.firstHandle,"mouseleave touchend",this.handleLeave,this))},e.prototype.wireSecondHandleEvt=function(t){t?(ee.remove(this.secondHandle,"mousedown touchstart",this.handleFocus),ee.remove(this.secondHandle,"transitionend",this.transitionEnd),ee.remove(this.secondHandle,"mouseenter touchenter",this.handleOver),ee.remove(this.secondHandle,"mouseleave touchend",this.handleLeave)):(ee.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this),ee.add(this.secondHandle,"transitionend",this.transitionEnd,this),ee.add(this.secondHandle,"mouseenter touchenter",this.handleOver,this),ee.add(this.secondHandle,"mouseleave touchend",this.handleLeave,this))},e.prototype.handleStart=function(){"Range"!==this.type&&(this.firstHandle.classList[0===this.handlePos1?"add":"remove"](cl),this.isMaterialTooltip&&(this.materialHandle.classList[0===this.handlePos1?"add":"remove"](cl),this.tooltipElement&&this.tooltipElement.classList[0===this.handlePos1?"add":"remove"](dl)))},e.prototype.transitionEnd=function(t){"transform"!==t.propertyName&&(this.handleStart(),this.getHandle().style.transition="none","Default"!==this.type&&(this.rangeBar.style.transition="none"),this.isMaterial&&this.tooltip.isVisible&&"Default"===this.type&&(this.tooltipElement.style.transition=this.transition.handle),this.tooltipToggle(this.getHandle()),this.closeTooltip())},e.prototype.handleFocusOut=function(){this.firstHandle.classList.contains(al)&&this.firstHandle.classList.remove(al),"Range"===this.type&&this.secondHandle.classList.contains(al)&&this.secondHandle.classList.remove(al)},e.prototype.handleFocus=function(t){t.currentTarget===this.firstHandle?this.firstHandle.classList.add(al):this.secondHandle.classList.add(al)},e.prototype.handleOver=function(t){this.tooltip.isVisible&&"Hover"===this.tooltip.showOn&&this.tooltipToggle(t.currentTarget)},e.prototype.handleLeave=function(t){!this.tooltip.isVisible||"Hover"!==this.tooltip.showOn||t.currentTarget.classList.contains(al)||t.currentTarget.classList.contains(pl)||this.closeTooltip()},e.prototype.setHandler=function(){this.min>this.max&&(this.min=this.max),this.createFirstHandle(),"Range"===this.type&&this.createSecondHandle()},e.prototype.setEnableRTL=function(){if(!$()||!this.isServerRendered){this.enableRtl&&"Vertical"!==this.orientation?ti([this.sliderContainer],Ma):ei([this.sliderContainer],Ma);var t="Vertical"!==this.orientation?this.horDir:this.verDir;this.enableRtl?(this.horDir="right",this.verDir="bottom"):(this.horDir="left",this.verDir="bottom"),t!==("Vertical"!==this.orientation?this.horDir:this.verDir)&&"Horizontal"===this.orientation&&(gi(this.firstHandle,{right:"",left:"auto"}),"Range"===this.type&&gi(this.secondHandle,{top:"",left:"auto"}))}this.setBarColor()},e.prototype.tooltipValue=function(){var t,e=this,i={value:this.value,text:""};$()&&this.isServerRendered?i.text=this.formatContent(this.tooltipFormatInfo,!1):(this.setTooltipContent(),i.text=t=this.tooltipObj.content),this.trigger("tooltipChange",i,function(i){e.addTooltipClass(i.text),t!==i.text&&(e.customAriaText=i.text,e.tooltipObj.content=i.text,e.setAriaAttrValue(e.firstHandle),"Range"===e.type&&e.setAriaAttrValue(e.secondHandle))})},e.prototype.setTooltipContent=function(){var t;t=this.formatContent(this.tooltipFormatInfo,!1),this.tooltipObj.content=t},e.prototype.formatContent=function(t,e){var i="",n=this.handleVal1,r=this.handleVal2;return!F(this.customValues)&&this.customValues.length>0&&(n=this.customValues[this.handleVal1],r=this.customValues[this.handleVal2]),e?("Range"===this.type?i=this.enableRtl&&"Vertical"!==this.orientation?F(this.tooltip)||F(this.tooltip.format)?r.toString()+" - "+n.toString():this.formatString(r,t).elementVal+" - "+this.formatString(n,t).elementVal:F(this.tooltip)||F(this.tooltip.format)?n.toString()+" - "+r.toString():this.formatString(n,t).elementVal+" - "+this.formatString(r,t).elementVal:F(n)||(i=F(this.tooltip)||F(this.tooltip.format)?n.toString():this.formatString(n,t).elementVal),i):("Range"===this.type?i=this.enableRtl&&"Vertical"!==this.orientation?F(t.format)?r.toString()+" - "+n.toString():this.formatString(r,t).formatString+" - "+this.formatString(n,t).formatString:F(t.format)?n.toString()+" - "+r.toString():this.formatString(n,t).formatString+" - "+this.formatString(r,t).formatString:F(n)||(i=F(t.format)?n.toString():this.formatString(n,t).formatString),i)},e.prototype.addTooltipClass=function(t){if(this.isMaterialTooltip){var e=t.toString().length;if(this.tooltipElement){i=e>4?{oldCss:Pl,newCss:Cl}:{oldCss:Cl,newCss:Pl};this.tooltipElement.classList.remove(i.oldCss),this.tooltipElement.classList.contains(i.newCss)||(this.tooltipElement.classList.add(i.newCss),this.tooltipElement.style.transform=e>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate)}else{var i=e>4?Cl:Pl;this.tooltipObj.cssClass=Ga+" "+i}}},e.prototype.tooltipPlacement=function(){return"Horizontal"===this.orientation?"Before"===this.tooltip.placement?"TopCenter":"BottomCenter":"Before"===this.tooltip.placement?"LeftCenter":"RightCenter"},e.prototype.tooltipBeforeOpen=function(t){this.tooltipElement=t.element,this.tooltip.cssClass&&ti([this.tooltipElement],this.tooltip.cssClass.split(" ").filter(function(t){return t})),t.target.removeAttribute("aria-describedby"),this.isMaterialTooltip&&(this.tooltipElement.firstElementChild.classList.add(El),this.handleStart(),this.setTooltipTransform())},e.prototype.tooltipCollision=function(t){if(this.isBootstrap||this.isBootstrap4||this.isMaterial&&!this.isMaterialTooltip){var e=this.isBootstrap4?3:6;switch(t){case"TopCenter":this.tooltipObj.setProperties({offsetY:-e},!1);break;case"BottomCenter":this.tooltipObj.setProperties({offsetY:e},!1);break;case"LeftCenter":this.tooltipObj.setProperties({offsetX:-e},!1);break;case"RightCenter":this.tooltipObj.setProperties({offsetX:e},!1)}}},e.prototype.wireMaterialTooltipEvent=function(t){this.isMaterialTooltip&&(t?ee.remove(this.tooltipElement,"mousedown touchstart",this.sliderDown):ee.add(this.tooltipElement,"mousedown touchstart",this.sliderDown,this))},e.prototype.tooltipPositionCalculation=function(t){var e;switch(t){case"TopCenter":e=Ja;break;case"BottomCenter":e=Qa;break;case"LeftCenter":e=$a;break;case"RightCenter":e=tl}return e},e.prototype.getTooltipTransformProperties=function(t){var e;if(this.tooltipElement){var i="Horizontal"===this.orientation?this.tooltipElement.clientHeight+14-this.tooltipElement.clientHeight/2:this.tooltipElement.clientWidth+14-this.tooltipElement.clientWidth/2;e="Horizontal"===this.orientation?t===Ja?{rotate:"rotate(45deg)",translate:"translateY("+i+"px)"}:{rotate:"rotate(225deg)",translate:"translateY("+-i+"px)"}:t===$a?{rotate:"rotate(-45deg)",translate:"translateX("+i+"px)"}:{rotate:"rotate(-225deg)",translate:"translateX("+-i+"px)"}}return e},e.prototype.openMaterialTooltip=function(){var t=this;if(this.isMaterialTooltip){this.refreshTooltip(this.firstHandle);var e=this.tooltipElement.firstElementChild;e.classList.remove(El),e.classList.add(Ol),this.firstHandle.style.cursor="default",this.tooltipElement.style.transition=this.scaleTransform,this.tooltipElement.classList.add(el),this.materialHandle.style.transform="scale(0)",e.innerText.length>4?this.tooltipElement.style.transform="scale(1)":this.tooltipElement.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate,"Default"===this.type?setTimeout(function(){t.tooltipElement.style.transition=t.transition.handle},2500):setTimeout(function(){t.tooltipElement.style.transition="none"},2500)}},e.prototype.closeMaterialTooltip=function(){var t=this;if(this.isMaterialTooltip){var e=this.tooltipElement.firstElementChild;this.tooltipElement.style.transition=this.scaleTransform,e.classList.remove(Ol),e.classList.add(El),this.firstHandle.style.cursor="-webkit-grab",this.firstHandle.style.cursor="grab",this.materialHandle&&(this.materialHandle.style.transform="scale(1)"),this.tooltipElement.classList.remove(el),this.setTooltipTransform(),this.tooltipTarget=void 0,setTimeout(function(){t.tooltipElement.style.transition="none"},2500)}},e.prototype.checkTooltipPosition=function(t){if(void 0===this.tooltipCollidedPosition||this.tooltipCollidedPosition!==t.collidedPosition){if(this.isMaterialTooltip){var e=this.tooltipPositionCalculation(t.collidedPosition);void 0!==e&&(t.element.classList.remove(this.previousTooltipClass),t.element.classList.add(e),this.previousTooltipClass=e),t.element.style.transform&&t.element.classList.contains(el)&&t.element.firstElementChild.innerText.length<=4&&(t.element.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate)}this.tooltipCollidedPosition=t.collidedPosition}this.isMaterialTooltip&&this.tooltipElement&&-1!==this.tooltipElement.style.transform.indexOf("translate")&&this.setTooltipTransform()},e.prototype.setTooltipTransform=function(){var t=this.getTooltipTransformProperties(this.previousTooltipClass);this.tooltipElement.firstElementChild.innerText.length>4?this.tooltipElement.style.transform=t.translate+" scale(0.01)":this.tooltipElement.style.transform=t.translate+" "+t.rotate+" scale(0.01)"},e.prototype.renderTooltip=function(){this.tooltipObj=new vs({showTipPointer:this.isBootstrap||this.isMaterial||this.isBootstrap4,cssClass:Ga,height:this.isMaterial?30:"auto",animation:{open:{effect:"None"},close:{effect:"FadeOut",duration:500}},opensOn:"Custom",beforeOpen:this.tooltipBeforeOpen.bind(this),beforeCollision:this.checkTooltipPosition.bind(this),beforeClose:this.tooltipBeforeClose.bind(this),enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tooltipObj.appendTo(this.firstHandle),this.initializeTooltipProps()},e.prototype.initializeTooltipProps=function(){var t=this.isMaterialTooltip?"Always":"Auto"===this.tooltip.showOn?"Hover":this.tooltip.showOn;this.setProperties({tooltip:{showOn:t}},!0),this.tooltipObj.position=this.tooltipPlacement(),this.tooltipCollision(this.tooltipObj.position),[this.firstHandle,this.rangeBar,this.secondHandle].forEach(function(t){F(t)||(t.style.transition="none")}),this.isMaterialTooltip&&(this.sliderContainer.classList.add(nl),$()||this.tooltipValue(),this.tooltipObj.animation.close.effect="None",this.tooltipObj.open(this.firstHandle))},e.prototype.tooltipBeforeClose=function(){this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0},e.prototype.setButtons=function(){$()&&this.isServerRendered?(this.firstBtn=this.element.parentElement.querySelector(".e-slider-button.e-first-button"),this.secondBtn=this.element.parentElement.querySelector(".e-slider-button.e-second-button")):(this.firstBtn=this.createElement("div",{className:Na+" "+Ha}),this.firstBtn.appendChild(this.createElement("span",{className:ul})),this.firstBtn.tabIndex=-1,this.secondBtn=this.createElement("div",{className:Na+" "+_a}),this.secondBtn.appendChild(this.createElement("span",{className:ul})),this.secondBtn.tabIndex=-1,this.sliderContainer.classList.add(vl),this.sliderContainer.appendChild(this.firstBtn),this.sliderContainer.appendChild(this.secondBtn),this.sliderContainer.appendChild(this.element),this.buttonTitle())},e.prototype.buttonTitle=function(){var t=this.enableRtl&&"Vertical"!==this.orientation;this.l10n.setLocale(this.locale);var e=this.l10n.getConstant("decrementTitle"),i=this.l10n.getConstant("incrementTitle");hi(t?this.secondBtn:this.firstBtn,{"aria-label":e,title:e}),hi(t?this.firstBtn:this.secondBtn,{"aria-label":i,title:i})},e.prototype.buttonFocusOut=function(){this.isMaterial&&this.getHandle().classList.remove("e-large-thumb-size")},e.prototype.repeatButton=function(t){var e,i=this.handleValueUpdate(),n=this.enableRtl&&"Vertical"!==this.orientation;t.target.parentElement.classList.contains(Ha)||t.target.classList.contains(Ha)?e=n?this.add(i,parseFloat(this.step.toString()),!0):this.add(i,parseFloat(this.step.toString()),!1):(t.target.parentElement.classList.contains(_a)||t.target.classList.contains(_a))&&(e=n?this.add(i,parseFloat(this.step.toString()),!1):this.add(i,parseFloat(this.step.toString()),!0)),this.limits.enabled&&(e=this.getLimitCorrectedValues(e)),e>=this.min&&e<=this.max&&(this.changeHandleValue(e),this.tooltipToggle(this.getHandle()))},e.prototype.repeatHandlerMouse=function(t){t.preventDefault(),"mousedown"!==t.type&&"touchstart"!==t.type||(this.buttonClick(t),this.repeatInterval=setInterval(this.repeatButton.bind(this),180,t))},e.prototype.materialChange=function(){this.getHandle().classList.contains("e-large-thumb-size")||this.getHandle().classList.add("e-large-thumb-size")},e.prototype.repeatHandlerUp=function(t){this.changeEvent("changed",t),this.closeTooltip(),clearInterval(this.repeatInterval),this.getHandle().focus()},e.prototype.customTickCounter=function(t){var e=4;return!F(this.customValues)&&this.customValues.length>0&&(t>4&&(e=3),t>7&&(e=2),t>14&&(e=1),t>28&&(e=0)),e},e.prototype.renderScale=function(){var t=0,e="Vertical"===this.orientation?"v":"h";this.noOfDecimals=this.numberOfDecimals(this.step),$()&&this.isServerRendered?this.ul=this.element.querySelector("ul"):this.ul=this.createElement("ul",{className:Va+" e-"+e+"-scale "+Fa+"-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),this.ul.style.zIndex="-1",te.isAndroid&&"h"===e&&this.ul.classList.add(gl);var i=this.ticks.smallStep;this.ticks.showSmallTicks?i<=0&&(i=parseFloat(J(this.step))):i=this.ticks.largeStep>0?this.ticks.largeStep:parseFloat(J(this.max))-parseFloat(J(this.min));var n,r=this.fractionalToInteger(this.min),o=this.fractionalToInteger(this.max),s=this.fractionalToInteger(i),a=!F(this.customValues)&&this.customValues.length>0&&this.customValues.length-1,l=this.customTickCounter(a),h=!F(this.customValues)&&this.customValues.length>0?a*l+a:Math.abs((o-r)/s);$()&&this.isServerRendered||this.element.appendChild(this.ul);var c=parseFloat(this.min.toString());"v"===e&&(c=parseFloat(this.max.toString()));var d,p=0,u=100/h;u===1/0&&(u=5);for(var f=0,g=!F(this.customValues)&&this.customValues.length>0?this.customValues.length-1:0,m=0;f<=h;f++){if(n=this.createElement("li",{attrs:{class:Fa,role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),!F(this.customValues)&&this.customValues.length>0)(d=f%(l+1)==0)&&("h"===e?(c=this.customValues[m],m++):(c=this.customValues[g],g--),n.setAttribute("title",c.toString()));else if(n.setAttribute("title",c.toString()),0===this.numberOfDecimals(this.max)&&0===this.numberOfDecimals(this.min)&&0===this.numberOfDecimals(this.step))d="h"===e?(c-parseFloat(this.min.toString()))%this.ticks.largeStep==0:Math.abs(c-parseFloat(this.max.toString()))%this.ticks.largeStep==0;else{var y=this.fractionalToInteger(this.ticks.largeStep),v=this.fractionalToInteger(c);d="h"===e?(v-r)%y==0:Math.abs(v-parseFloat(o.toString()))%y==0}d&&n.classList.add(Wa),"h"===e?n.style.width=u+"%":n.style.height=u+"%";var b=d?"Both"===this.ticks.placement?2:1:0;if(d){for(var w=0;w<b;w++)this.createTick(n,c,u);$()&&this.isServerRendered&&F(this.customValues)&&(this.updateTicksValues(c,this.ul.children[t]),t++)}else F(this.customValues)&&(this.formatTicksValue(n,c),$()&&this.isServerRendered&&F(this.customValues)&&(this.updateTicksValues(c,this.ul.children[t]),t++));$()&&this.isServerRendered||this.ul.appendChild(n),this.tickElementCollection.push(n);var S=void 0;F(this.customValues)&&(S=this.numberOfDecimals(i)>this.numberOfDecimals(c)?this.numberOfDecimals(i):this.numberOfDecimals(c),c="h"===e?this.makeRoundNumber(c+i,S):this.makeRoundNumber(c-i,S),p=this.makeRoundNumber(p+i,S))}this.ticksAlignment(e,u)},e.prototype.updateTicksValues=function(t,e){if(e.childElementCount>0)for(var i=0;i<e.childElementCount;i++)this.blazortTicksValue(e,t,e.children[i]);else this.blazortTicksValue(e,t,null)},e.prototype.blazortTicksValue=function(t,e,i){var n=this,r=this.formatNumber(e),o={value:e,text:F(this.ticks)||F(this.ticks.format)?r:this.formatString(e,this.ticksFormatInfo).formatString,tickElement:t};this.trigger("renderingTicks",o,function(e){t.setAttribute("title",e.text.toString()),i&&(n.enableHtmlSanitizer?i.innerHTML=zn.sanitize(e.text.toString()):i.innerHTML=e.text.toString())})},e.prototype.ticksAlignment=function(t,e,i){void 0===i&&(i=!0),this.firstChild=this.ul.firstElementChild,this.lastChild=this.ul.lastElementChild,this.firstChild.classList.add(ml),this.lastChild.classList.add(yl),this.sliderContainer.classList.add(Va+"-"+this.ticks.placement.toLowerCase()),"h"===t?(this.firstChild.style.width=e/2+"%",this.lastChild.style.width=e/2+"%"):(this.firstChild.style.height=e/2+"%",this.lastChild.style.height=e/2+"%");var n={ticksWrapper:this.ul,tickElements:this.tickElementCollection};i&&this.trigger("renderedTicks",n),this.scaleAlignment()},e.prototype.createTick=function(t,e,i){var n=this.createElement("span",{className:Ua+" "+Fa+"-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}});t.appendChild(n),F(this.customValues)?this.formatTicksValue(t,e,n,i):this.enableHtmlSanitizer?n.innerHTML=zn.sanitize(e.toString()):n.innerHTML=e.toString()},e.prototype.formatTicksValue=function(t,e,i,n){var r=this,o=this.formatNumber(e),s={value:e,text:F(this.ticks)||F(this.ticks.format)?o:this.formatString(e,this.ticksFormatInfo).formatString,tickElement:t};this.trigger("renderingTicks",s,function(e){if(t.setAttribute("title",e.text.toString()),i&&(r.enableHtmlSanitizer?i.innerHTML=zn.sanitize(e.text.toString()):i.innerHTML=e.text.toString()),!F(r.renderingTicks)&&$()){var o="Horizontal"===r.orientation?"h":"v";r.ticksAlignment(o,n,!1)}})},e.prototype.scaleAlignment=function(){this.tickValuePosition();this.orientation;"Vertical"===this.orientation?this.element.getBoundingClientRect().width<=15?this.sliderContainer.classList.add(fl):this.sliderContainer.classList.remove(fl):this.element.getBoundingClientRect().height<=15?this.sliderContainer.classList.add(fl):this.sliderContainer.classList.remove(fl)},e.prototype.tickValuePosition=function(){this.firstChild=this.element.querySelector("ul").children[0];var t,e,i=this.firstChild.getBoundingClientRect(),n=this.ticks.smallStep,r=Math.abs(parseFloat(J(this.max))-parseFloat(J(this.min)))/n;this.firstChild.children.length>0&&(t=this.firstChild.children[0].getBoundingClientRect());var o,s=[this.sliderContainer.querySelectorAll("."+Fa+"."+Wa+" ."+Ua)];o="Both"===this.ticks.placement?[].slice.call(s[0],2):[].slice.call(s[0],1);for(var a="Vertical"===this.orientation?2*i.height:2*i.width,l=0;l<this.firstChild.children.length;l++)"Vertical"===this.orientation?$()&&this.isServerRendered||(this.firstChild.children[l].style.top=-t.height/2+"px"):this.enableRtl?this.firstChild.children[l].style.left=(a-this.firstChild.children[l].getBoundingClientRect().width)/2+"px":this.firstChild.children[l].style.left=-t.width/2+"px";for(l=0;l<o.length;l++)e=o[l].getBoundingClientRect(),"Vertical"===this.orientation?$()&&this.isServerRendered||gi(o[l],{top:(a-e.height)/2+"px"}):gi(o[l],{left:(a-e.width)/2+"px"});if(this.enableRtl&&this.lastChild.children.length&&0!==r&&(this.lastChild.children[0].style.left=-this.lastChild.getBoundingClientRect().width/2+"px","Both"===this.ticks.placement&&($()||(this.lastChild.children[1].style.left=-this.lastChild.getBoundingClientRect().width/2+"px"))),0===r&&("Horizontal"===this.orientation&&(this.enableRtl?(this.firstChild.classList.remove(yl),this.firstChild.style.right=this.firstHandle.style.right,$()||(this.firstChild.children[0].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px","Both"===this.ticks.placement&&(this.firstChild.children[1].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px"))):(this.firstChild.classList.remove(yl),$()||(this.firstChild.style.left=this.firstHandle.style.left))),$()&&this.isServerRendered||"Vertical"===this.orientation&&this.firstChild.classList.remove(yl)),$()&&this.isServerRendered){var h=void 0;null!=this.firstChild&&(h="Horizontal"===this.orientation?{firstTickPostion:this.firstChild.children[0].style.left}:{firstTickPostion:-t.height/2+"px"}),null!=o[0]&&(h="Horizontal"===this.orientation?{otherTicksPosition:o[0].style.left}:{otherTicksPosition:(a-e.height)/2+"px"}),null!=this.firstChild&&null!=o[0]&&(h="Horizontal"===this.orientation?{firstTickPostion:this.firstChild.children[0].style.left,otherTicksPosition:o[0].style.left}:{firstTickPostion:-t.height/2+"px",otherTicksPosition:(a-e.height)/2+"px"}),this.interopAdaptor.invokeMethodAsync("SliderTicksData",h)}},e.prototype.setAriaAttrValue=function(t){var e,i=!F(this.ticks)&&!F(this.ticks.format),n=i?this.formatContent(this.tooltipFormatInfo,!1):this.formatContent(this.ticksFormatInfo,!1),r=i?this.formatContent(this.ticksFormatInfo,!0):this.formatContent(this.tooltipFormatInfo,!0);e=2===(n=this.customAriaText?this.customAriaText:n).split(" - ").length?n.split(" - "):[n,n],this.setAriaAttributes(t),"Range"!==this.type?hi(t,{"aria-valuenow":r,"aria-valuetext":n}):this.enableRtl?t===this.firstHandle?hi(t,{"aria-valuenow":r.split(" - ")[1],"aria-valuetext":e[1]}):hi(t,{"aria-valuenow":r.split(" - ")[0],"aria-valuetext":e[0]}):t===this.firstHandle?hi(t,{"aria-valuenow":r.split(" - ")[0],"aria-valuetext":e[0]}):hi(t,{"aria-valuenow":r.split(" - ")[1],"aria-valuetext":e[1]})},e.prototype.handleValueUpdate=function(){return"Range"===this.type?1===this.activeHandle?this.handleVal1:this.handleVal2:this.handleVal1},e.prototype.getLimitCorrectedValues=function(t){return t="MinRange"===this.type||"Default"===this.type?this.getLimitValueAndPosition(t,this.limits.minStart,this.limits.minEnd)[0]:1===this.activeHandle?this.getLimitValueAndPosition(t,this.limits.minStart,this.limits.minEnd)[0]:this.getLimitValueAndPosition(t,this.limits.maxStart,this.limits.maxEnd)[0]},e.prototype.focusSliderElement=function(){this.isElementFocused||(this.element.focus(),this.isElementFocused=!0)},e.prototype.buttonClick=function(t){var e;this.focusSliderElement();var i=this.enableRtl&&"Vertical"!==this.orientation,n=this.handleValueUpdate();40===t.keyCode||37===t.keyCode||t.currentTarget.classList.contains(Ha)?e=i?this.add(n,parseFloat(this.step.toString()),!0):this.add(n,parseFloat(this.step.toString()),!1):38===t.keyCode||39===t.keyCode||t.currentTarget.classList.contains(_a)?e=i?this.add(n,parseFloat(this.step.toString()),!1):this.add(n,parseFloat(this.step.toString()),!0):33===t.keyCode||t.currentTarget.classList.contains(Ha)?e=i?this.add(n,parseFloat(this.ticks.largeStep.toString()),!1):this.add(n,parseFloat(this.ticks.largeStep.toString()),!0):34===t.keyCode||t.currentTarget.classList.contains(_a)?e=i?this.add(n,parseFloat(this.ticks.largeStep.toString()),!0):this.add(n,parseFloat(this.ticks.largeStep.toString()),!1):36===t.keyCode?e=parseFloat(this.min.toString()):35===t.keyCode&&(e=parseFloat(this.max.toString())),this.limits.enabled&&(e=this.getLimitCorrectedValues(e)),this.changeHandleValue(e),!this.isMaterial||this.tooltip.isVisible||this.getHandle().classList.contains(pl)||this.materialChange(),this.tooltipToggle(this.getHandle()),this.getHandle().focus(),t.currentTarget.classList.contains(Ha)&&ee.add(this.firstBtn,"mouseup touchend",this.buttonUp,this),t.currentTarget.classList.contains(_a)&&ee.add(this.secondBtn,"mouseup touchend",this.buttonUp,this)},e.prototype.tooltipToggle=function(t){this.isMaterialTooltip?this.tooltipElement.classList.contains(el)?this.refreshTooltip(this.firstHandle):this.openMaterialTooltip():this.tooltipElement?this.refreshTooltip(t):this.openTooltip(t)},e.prototype.buttonUp=function(t){t.currentTarget.classList.contains(Ha)&&ee.remove(this.firstBtn,"mouseup touchend",this.buttonUp),t.currentTarget.classList.contains(_a)&&ee.remove(this.secondBtn,"mouseup touchend",this.buttonUp)},e.prototype.setRangeBar=function(){"Horizontal"===this.orientation?"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",gi(this.rangeBar,{width:F(this.handlePos1)?0:this.handlePos1+"px"})):(this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",gi(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"})):"MinRange"===this.type?(this.rangeBar.style.bottom="0px",gi(this.rangeBar,{height:F(this.handlePos1)?0:this.handlePos1+"px"})):(this.rangeBar.style.bottom=this.handlePos1+"px",gi(this.rangeBar,{height:this.handlePos2-this.handlePos1+"px"}))},e.prototype.checkValidValueAndPos=function(t){return t=this.checkHandleValue(t),t=this.checkHandlePosition(t)},e.prototype.setLimitBarPositions=function(t,e,i,n){"Horizontal"===this.orientation?this.enableRtl?(this.limitBarFirst.style.right=t+"px",this.limitBarFirst.style.width=e-t+"px"):(this.limitBarFirst.style.left=t+"px",this.limitBarFirst.style.width=e-t+"px"):(this.limitBarFirst.style.bottom=t+"px",this.limitBarFirst.style.height=e-t+"px"),"Range"===this.type&&("Horizontal"===this.orientation?this.enableRtl?(this.limitBarSecond.style.right=i+"px",this.limitBarSecond.style.width=n-i+"px"):(this.limitBarSecond.style.left=i+"px",this.limitBarSecond.style.width=n-i+"px"):(this.limitBarSecond.style.bottom=i+"px",this.limitBarSecond.style.height=n-i+"px"))},e.prototype.setLimitBar=function(){if("Default"===this.type||"MinRange"===this.type){var t=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];t=this.checkValidValueAndPos(t);var e=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];e=this.checkValidValueAndPos(e),this.setLimitBarPositions(t,e)}else if("Range"===this.type){var i=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];i=this.checkValidValueAndPos(i);var n=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];n=this.checkValidValueAndPos(n);var r=this.getLimitValueAndPosition(this.limits.maxStart,this.limits.maxStart,this.limits.maxEnd,!0)[0];r=this.checkValidValueAndPos(r);var o=this.getLimitValueAndPosition(this.limits.maxEnd,this.limits.maxStart,this.limits.maxEnd,!0)[0];o=this.checkValidValueAndPos(o),this.setLimitBarPositions(i,n,r,o)}},e.prototype.getLimitValueAndPosition=function(t,e,i,n){return F(e)&&(e=this.min,F(t)&&n&&(t=e)),F(i)&&(i=this.max,F(t)&&n&&(t=i)),t<e&&(t=e),t>i&&(t=i),[t,this.checkHandlePosition(t)]},e.prototype.setValue=function(){if(!F(this.customValues)&&this.customValues.length>0&&(this.min=0,this.max=this.customValues.length-1,this.setBarColor()),this.setAriaAttributes(this.firstHandle),this.handleVal1=F(this.value)?this.checkHandleValue(parseFloat(this.min.toString())):this.checkHandleValue(parseFloat(this.value.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.preHandlePos1=this.handlePos1,F(this.activeHandle)?"Range"===this.type?this.activeHandle=2:this.activeHandle=1:this.activeHandle=this.activeHandle,"Default"===this.type||"MinRange"===this.type){if(this.limits.enabled){var t=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=t[0],this.handlePos1=t[1],this.preHandlePos1=this.handlePos1}this.setHandlePosition(null),this.handleStart(),this.value=this.handleVal1,this.setAriaAttrValue(this.firstHandle),this.changeEvent("changed",null)}else this.validateRangeValue();"Default"!==this.type&&this.setRangeBar(),this.limits.enabled&&this.setLimitBar()},e.prototype.rangeValueUpdate=function(){null!==this.value&&"object"==typeof this.value||(this.value=[parseFloat(J(this.min)),parseFloat(J(this.max))])},e.prototype.validateRangeValue=function(){this.rangeValueUpdate(),this.setRangeValue()},e.prototype.modifyZindex=function(){"Range"===this.type?1===this.activeHandle?(this.firstHandle.style.zIndex=this.zIndex+4+"",this.secondHandle.style.zIndex=this.zIndex+3+""):(this.firstHandle.style.zIndex=this.zIndex+3+"",this.secondHandle.style.zIndex=this.zIndex+4+""):this.isMaterialTooltip&&this.tooltipElement&&(this.tooltipElement.style.zIndex=po(this.element)+"")},e.prototype.setHandlePosition=function(t){var e,i=this,n=1===this.activeHandle?this.handlePos1:this.handlePos2;e=this.isMaterialTooltip?[this.firstHandle,this.materialHandle]:[this.getHandle()],this.handleStart(),e.forEach(function(t){"Horizontal"===i.orientation?i.enableRtl?t.style.right=n+"px":t.style.left=n+"px":t.style.bottom=n+"px",$()&&i.isServerRendered&&t.style.removeProperty("visibility")}),this.changeEvent("change",t)},e.prototype.getHandle=function(){return 1===this.activeHandle?this.firstHandle:this.secondHandle},e.prototype.setRangeValue=function(){this.updateRangeValue(),this.activeHandle=1,this.setHandlePosition(null),this.activeHandle=2,this.setHandlePosition(null),this.activeHandle=1},e.prototype.changeEvent=function(t,e){var i="change"===t?this.previousVal:this.previousChanged;if("Range"!==this.type)this.setProperties({value:this.handleVal1},!0),i!==this.value&&(this.trigger(t,this.changeEventArgs(t,e)),this.setPreviousVal(t,this.value)),this.setAriaAttrValue(this.firstHandle);else{var n=this.value=[this.handleVal1,this.handleVal2];this.setProperties({value:n},!0),(i.length===this.value.length&&this.value[0]!==i[0]||this.value[1]!==i[1])&&(this.trigger(t,this.changeEventArgs(t,e)),this.setPreviousVal(t,this.value)),this.setAriaAttrValue(this.getHandle())}this.hiddenInput.value=this.value.toString()},e.prototype.changeEventArgs=function(t,e){var i;return this.tooltip.isVisible&&this.tooltipObj?($()&&this.isServerRendered||this.tooltipValue(),i={value:this.value,previousValue:"change"===t?this.previousVal:this.previousChanged,action:t,text:this.tooltipObj.content,isInteracted:!F(e)}):i={value:this.value,previousValue:"change"===t?this.previousVal:this.previousChanged,action:t,text:F(this.ticksFormatInfo.format)?this.value.toString():"Range"!==this.type?this.formatString(this.value,this.ticksFormatInfo).formatString:this.formatString(this.value[0],this.ticksFormatInfo).formatString+" - "+this.formatString(this.value[1],this.ticksFormatInfo).formatString,isInteracted:!F(e)},i},e.prototype.setPreviousVal=function(t,e){"change"===t?this.previousVal=e:this.previousChanged=e},e.prototype.updateRangeValue=function(){var t=this.value.toString().split(",").map(Number);if(this.enableRtl&&"Vertical"!==this.orientation||this.rtl?this.value=[t[1],t[0]]:this.value=[t[0],t[1]],this.enableRtl&&"Vertical"!==this.orientation?(this.handleVal1=this.checkHandleValue(this.value[1]),this.handleVal2=this.checkHandleValue(this.value[0])):(this.handleVal1=this.checkHandleValue(this.value[0]),this.handleVal2=this.checkHandleValue(this.value[1])),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2),this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.preHandlePos1=this.handlePos1,this.preHandlePos2=this.handlePos2,this.limits.enabled){this.activeHandle=1;var e=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=e[0],this.handlePos1=e[1],this.preHandlePos1=this.handlePos1,this.activeHandle=2,e=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=e[0],this.handlePos2=e[1],this.preHandlePos2=this.handlePos2}},e.prototype.checkHandlePosition=function(t){var e;return t=100*(t-parseFloat(J(this.min)))/(parseFloat(J(this.max))-parseFloat(J(this.min))),e="Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(t/100):this.element.getBoundingClientRect().height*(t/100),parseFloat(J(this.max))===parseFloat(J(this.min))&&(e="Horizontal"===this.orientation?this.element.getBoundingClientRect().width:this.element.getBoundingClientRect().height),e},e.prototype.checkHandleValue=function(t){if(this.min>this.max&&(this.min=this.max),this.min===this.max)return parseFloat(J(this.max));var e=this.tempStartEnd();return t<e.start?t=e.start:t>e.end&&(t=e.end),t},e.prototype.reposition=function(){var t=this;this.firstHandle.style.transition="none","Default"!==this.type&&(this.rangeBar.style.transition="none"),"Range"===this.type&&(this.secondHandle.style.transition="none"),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handleVal2&&(this.handlePos2=this.checkHandlePosition(this.handleVal2)),"Horizontal"===this.orientation?(this.enableRtl?this.firstHandle.style.right=this.handlePos1+"px":this.firstHandle.style.left=this.handlePos1+"px",this.isMaterialTooltip&&(this.enableRtl?this.materialHandle.style.right=this.handlePos1+"px":this.materialHandle.style.left=this.handlePos1+"px"),"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",gi(this.rangeBar,{width:F(this.handlePos1)?0:this.handlePos1+"px"})):"Range"===this.type&&(this.enableRtl?this.secondHandle.style.right=this.handlePos2+"px":this.secondHandle.style.left=this.handlePos2+"px",this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",gi(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"}))):(this.firstHandle.style.bottom=this.handlePos1+"px",this.isMaterialTooltip&&(this.materialHandle.style.bottom=this.handlePos1+"px"),"MinRange"===this.type?(this.rangeBar.style.bottom="0px",gi(this.rangeBar,{height:F(this.handlePos1)?0:this.handlePos1+"px"})):"Range"===this.type&&(this.secondHandle.style.bottom=this.handlePos2+"px",this.rangeBar.style.bottom=this.handlePos1+"px",gi(this.rangeBar,{height:this.handlePos2-this.handlePos1+"px"}))),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.ul&&($()||(this.removeElement(this.ul),this.ul=void 0),this.renderScale(),$()&&this.tickValuePosition()),this.handleStart(),this.tooltip.isVisible||setTimeout(function(){t.firstHandle.style.transition=t.scaleTransform,"Range"===t.type&&(t.secondHandle.style.transition=t.scaleTransform)}),$()&&this.isServerRendered||this.refreshTooltip(this.tooltipTarget),this.setBarColor()},e.prototype.changeHandleValue=function(t){var e=null;1===this.activeHandle?(this.limits.enabled&&this.limits.startHandleFixed||(this.handleVal1=this.checkHandleValue(t),this.handlePos1=this.checkHandlePosition(this.handleVal1),"Range"===this.type&&this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.handlePos1!==this.preHandlePos1&&(e=this.preHandlePos1=this.handlePos1)),this.modifyZindex()):(this.limits.enabled&&this.limits.endHandleFixed||(this.handleVal2=this.checkHandleValue(t),this.handlePos2=this.checkHandlePosition(this.handleVal2),"Range"===this.type&&this.handlePos2<this.handlePos1&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.handlePos2!==this.preHandlePos2&&(e=this.preHandlePos2=this.handlePos2)),this.modifyZindex()),null!==e&&("Default"!==this.type&&this.setRangeBar(),this.setHandlePosition(null))},e.prototype.tempStartEnd=function(){return this.min>this.max?{start:this.max,end:this.min}:{start:this.min,end:this.max}},e.prototype.xyToPosition=function(t){if(this.min===this.max)return 100;if("Horizontal"===this.orientation){var e=t.x-this.element.getBoundingClientRect().left,i=this.element.offsetWidth/100;this.val=e/i}else{var n=t.y-this.element.getBoundingClientRect().top;i=this.element.offsetHeight/100;this.val=100-n/i}var r=this.stepValueCalculation(this.val);return r<0?r=0:r>100&&(r=100),this.enableRtl&&"Vertical"!==this.orientation&&(r=100-r),"Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(r/100):this.element.getBoundingClientRect().height*(r/100)},e.prototype.stepValueCalculation=function(t){0===this.step&&(this.step=1);var e=parseFloat(J(this.step))/((parseFloat(J(this.max))-parseFloat(J(this.min)))/100),i=t%Math.abs(e);return 0!==i&&(e/2>i?t-=i:t+=Math.abs(e)-i),t},e.prototype.add=function(t,e,i){var n=Math.pow(10,3);return i?(Math.round(t*n)+Math.round(e*n))/n:(Math.round(t*n)-Math.round(e*n))/n},e.prototype.positionToValue=function(t){var e,i=parseFloat(J(this.max))-parseFloat(J(this.min));return e="Horizontal"===this.orientation?t/this.element.getBoundingClientRect().width*i:t/this.element.getBoundingClientRect().height*i,this.add(e,parseFloat(this.min.toString()),!0)},e.prototype.sliderBarClick=function(t){var e;t.preventDefault(),"mousedown"===t.type||"click"===t.type?e={x:t.clientX,y:t.clientY}:"touchstart"===t.type&&(e={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY});var i=this.xyToPosition(e),n=this.positionToValue(i);if("Range"===this.type&&this.handlePos2-i<i-this.handlePos1){if(this.activeHandle=2,!this.limits.enabled||!this.limits.endHandleFixed){if(this.limits.enabled)n=(r=this.getLimitValueAndPosition(n,this.limits.maxStart,this.limits.maxEnd))[0],i=r[1];this.secondHandle.classList.add(Sl),this.handlePos2=this.preHandlePos2=i,this.handleVal2=n}this.modifyZindex(),this.secondHandle.focus()}else{if(this.activeHandle=1,!this.limits.enabled||!this.limits.startHandleFixed){var r;if(this.limits.enabled)n=(r=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd))[0],i=r[1];this.firstHandle.classList.add(Sl),this.handlePos1=this.preHandlePos1=i,this.handleVal1=n}this.modifyZindex(),this.firstHandle.focus()}this.isMaterialTooltip&&this.tooltipElement.classList.add(il);var o=this.element.querySelector("."+pl);o&&this.getHandle()!==o&&o.classList.remove(pl);var s=1===this.activeHandle?this.firstHandle:this.secondHandle;if(t.target===s)return!this.isMaterial||this.tooltip.isVisible||this.getHandle().classList.contains(pl)||this.materialChange(),void this.tooltipToggle(this.getHandle());if(this.checkRepeatedValue(n)){var a=this.isMaterial&&this.tooltip.isVisible?this.transitionOnMaterialTooltip:this.transition;this.getHandle().style.transition=a.handle,"Default"!==this.type&&(this.rangeBar.style.transition=a.rangeBar),this.setHandlePosition(t),"Default"!==this.type&&this.setRangeBar()}},e.prototype.sliderDown=function(t){var e,i;if(t.preventDefault(),this.focusSliderElement(),"Range"===this.type&&this.drag&&t.target===this.rangeBar){var n=void 0,r=void 0;"mousedown"===t.type?(n=(e=[t.clientX,t.clientY])[0],r=e[1]):"touchstart"===t.type&&(n=(i=[t.changedTouches[0].clientX,t.changedTouches[0].clientY])[0],r=i[1]),"Horizontal"===this.orientation?(this.firstPartRemain=n-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-n):(this.firstPartRemain=r-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-r),this.minDiff=this.handleVal2-this.handleVal1,this.tooltipToggle(this.rangeBar);var o=this.element.querySelector("."+pl);o&&o.classList.remove(pl),ee.add(document,"mousemove touchmove",this.dragRangeBarMove,this),ee.add(document,"mouseup touchend",this.dragRangeBarUp,this)}else this.sliderBarClick(t),ee.add(document,"mousemove touchmove",this.sliderBarMove,this),ee.add(document,"mouseup touchend",this.sliderBarUp,this)},e.prototype.handleValueAdjust=function(t,e,i){1===i?(this.handleVal1=e,this.handleVal2=this.handleVal1+this.minDiff):2===i&&(this.handleVal2=e,this.handleVal1=this.handleVal2-this.minDiff),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2)},e.prototype.dragRangeBarMove=function(t){var e,i,n,r,o;if("touchmove"!==t.type&&t.preventDefault(),this.rangeBar.style.transition="none",this.firstHandle.style.transition="none",this.secondHandle.style.transition="none","mousemove"===t.type?(r=(e=[t.clientX,t.clientY])[0],o=e[1]):(r=(i=[t.changedTouches[0].clientX,t.changedTouches[0].clientY])[0],o=i[1]),!(this.limits.enabled&&this.limits.startHandleFixed||this.limits.enabled&&this.limits.endHandleFixed)){if(n=this.enableRtl?{x:r+this.secondPartRemain,y:o+this.secondPartRemain}:{x:r-this.firstPartRemain,y:o+this.secondPartRemain},this.handlePos1=this.xyToPosition(n),this.handleVal1=this.positionToValue(this.handlePos1),n=this.enableRtl?{x:r-this.firstPartRemain,y:o-this.firstPartRemain}:{x:r+this.secondPartRemain,y:o-this.firstPartRemain},this.handlePos2=this.xyToPosition(n),this.handleVal2=this.positionToValue(this.handlePos2),this.limits.enabled){var s=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=s[0],this.handlePos1=s[1],this.handleVal1===this.limits.minEnd&&this.handleValueAdjust(this.handleVal1,this.limits.minEnd,1),this.handleVal1===this.limits.minStart&&this.handleValueAdjust(this.handleVal1,this.limits.minStart,1),s=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=s[0],this.handlePos2=s[1],this.handleVal2===this.limits.maxStart&&this.handleValueAdjust(this.handleVal2,this.limits.maxStart,2),this.handleVal2===this.limits.maxEnd&&this.handleValueAdjust(this.handleVal2,this.limits.maxEnd,2)}this.handleVal2===this.max&&this.handleValueAdjust(this.handleVal2,this.max,2),this.handleVal1===this.min&&this.handleValueAdjust(this.handleVal1,this.min,1)}this.activeHandle=1,this.setHandlePosition(t),this.activeHandle=2,this.setHandlePosition(t),this.tooltipToggle(this.rangeBar),this.setRangeBar()},e.prototype.sliderBarUp=function(t){this.changeEvent("changed",t),this.handleFocusOut(),this.firstHandle.classList.remove(Sl),"Range"===this.type&&this.secondHandle.classList.remove(Sl),this.closeTooltip(),this.isMaterial&&(this.getHandle().classList.remove("e-large-thumb-size"),this.isMaterialTooltip&&this.tooltipElement.classList.remove(il)),ee.remove(document,"mousemove touchmove",this.sliderBarMove),ee.remove(document,"mouseup touchend",this.sliderBarUp)},e.prototype.sliderBarMove=function(t){var e;"touchmove"!==t.type&&t.preventDefault(),e="mousemove"===t.type?{x:t.clientX,y:t.clientY}:{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY};var i=this.xyToPosition(e),n=this.positionToValue(i);if(i=Math.round(i),"Range"!==this.type&&1===this.activeHandle){if(!this.limits.enabled||!this.limits.startHandleFixed){if(this.limits.enabled){var r=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd);i=r[1],n=r[0]}this.handlePos1=i,this.handleVal1=n}this.firstHandle.classList.add(Sl)}if("Range"===this.type)if(1===this.activeHandle){if(this.firstHandle.classList.add(Sl),!(this.limits.enabled&&this.limits.startHandleFixed||(i>this.handlePos2&&(i=this.handlePos2,n=this.handleVal2),i===this.preHandlePos1))){if(this.limits.enabled)n=(o=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd))[0],i=o[1];this.handlePos1=this.preHandlePos1=i,this.handleVal1=n,this.activeHandle=1}}else if(2===this.activeHandle&&(this.secondHandle.classList.add(Sl),!(this.limits.enabled&&this.limits.endHandleFixed||(i<this.handlePos1&&(i=this.handlePos1,n=this.handleVal1),i===this.preHandlePos2)))){var o;if(this.limits.enabled)n=(o=this.getLimitValueAndPosition(n,this.limits.maxStart,this.limits.maxEnd))[0],i=o[1];this.handlePos2=this.preHandlePos2=i,this.handleVal2=n,this.activeHandle=2}this.checkRepeatedValue(n)&&(this.getHandle().style.transition=this.scaleTransform,"Default"!==this.type&&(this.rangeBar.style.transition="none"),this.setHandlePosition(t),!this.isMaterial||this.tooltip.isVisible||this.getHandle().classList.contains(pl)||this.materialChange(),this.tooltipToggle(this.getHandle()),"Default"!==this.type&&this.setRangeBar())},e.prototype.dragRangeBarUp=function(t){this.changeEvent("changed",t),this.closeTooltip(),ee.remove(document,"mousemove touchmove",this.dragRangeBarMove),ee.remove(document,"mouseup touchend",this.dragRangeBarUp)},e.prototype.checkRepeatedValue=function(t){if("Range"===this.type){if(t===(this.enableRtl&&"Vertical"!==this.orientation?1===this.activeHandle?this.previousVal[1]:this.previousVal[0]:1===this.activeHandle?this.previousVal[0]:this.previousVal[1]))return 0}else if(t===this.previousVal)return 0;return 1},e.prototype.refreshTooltip=function(t){this.tooltip.isVisible&&this.tooltipObj&&(this.tooltipValue(),t&&(this.tooltipObj.refresh(t),this.tooltipTarget=t))},e.prototype.openTooltip=function(t){this.tooltip.isVisible&&this.tooltipObj&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.open(t),this.tooltipTarget=t)},e.prototype.closeTooltip=function(){this.tooltip.isVisible&&this.tooltipObj&&"Always"!==this.tooltip.showOn&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.close(),this.tooltipTarget=void 0)},e.prototype.keyDown=function(t){switch(t.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 36:case 35:t.preventDefault(),this.buttonClick(t)}},e.prototype.wireButtonEvt=function(t){t?(ee.remove(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut),ee.remove(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut),ee.remove(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse),ee.remove(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),ee.remove(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse),ee.remove(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),ee.remove(this.firstBtn,"focusout",this.sliderFocusOut),ee.remove(this.secondBtn,"focusout",this.sliderFocusOut)):(ee.add(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut,this),ee.add(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut,this),ee.add(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse,this),ee.add(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),ee.add(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse,this),ee.add(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),ee.add(this.firstBtn,"focusout",this.sliderFocusOut,this),ee.add(this.secondBtn,"focusout",this.sliderFocusOut,this))},e.prototype.wireEvents=function(){this.onresize=this.reposition.bind(this),window.addEventListener("resize",this.onresize),this.enabled&&!this.readonly&&(ee.add(this.element,"mousedown touchstart",this.sliderDown,this),ee.add(this.sliderContainer,"keydown",this.keyDown,this),ee.add(this.sliderContainer,"keyup",this.keyUp,this),ee.add(this.element,"focusout",this.sliderFocusOut,this),ee.add(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover,this),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.showButtons&&this.wireButtonEvt(!1),this.wireMaterialTooltipEvent(!1),this.isForm&&ee.add(this.formElement,"reset",this.formResetHandler,this))},e.prototype.unwireEvents=function(){ee.remove(this.element,"mousedown touchstart",this.sliderDown),ee.remove(this.sliderContainer,"keydown",this.keyDown),ee.remove(this.sliderContainer,"keyup",this.keyUp),ee.remove(this.element,"focusout",this.sliderFocusOut),ee.remove(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover),this.wireFirstHandleEvt(!0),"Range"===this.type&&this.wireSecondHandleEvt(!0),this.showButtons&&this.wireButtonEvt(!0),this.wireMaterialTooltipEvent(!0),ee.remove(this.element,"reset",this.formResetHandler)},e.prototype.formResetHandler=function(){this.setProperties({value:this.formResetValue},!0),this.setValue()},e.prototype.keyUp=function(t){if(9===t.keyCode&&t.target.classList.contains(za)&&(this.focusSliderElement(),!t.target.classList.contains(pl))){this.element.querySelector("."+pl)&&this.element.querySelector("."+pl).classList.remove(pl),t.target.classList.add(pl);var e=t.target.parentElement;e===this.element&&(e.querySelector("."+rl).classList.add(bl),"Range"!==this.type&&"MinRange"!==this.type||e.querySelector("."+ja).classList.add(wl)),"Range"===this.type&&(t.target.previousSibling.classList.contains(za)?this.activeHandle=2:this.activeHandle=1),this.getHandle().focus(),this.tooltipToggle(this.getHandle())}this.closeTooltip(),this.changeEvent("changed",t)},e.prototype.hover=function(t){F(t)||("mouseover"===t.type||"touchmove"===t.type||"mousemove"===t.type||"pointermove"===t.type||"touchstart"===t.type?this.sliderContainer.classList.add(qa):this.sliderContainer.classList.remove(qa))},e.prototype.sliderFocusOut=function(t){t.relatedTarget!==this.secondHandle&&t.relatedTarget!==this.firstHandle&&t.relatedTarget!==this.element&&t.relatedTarget!==this.firstBtn&&t.relatedTarget!==this.secondBtn&&(this.closeMaterialTooltip(),this.element.querySelector("."+pl)&&this.element.querySelector("."+pl).classList.remove(pl),this.element.querySelector("."+bl)&&(this.element.querySelector("."+bl).classList.remove(bl),"Range"!==this.type&&"MinRange"!==this.type||!this.element.querySelector("."+wl)||this.element.querySelector("."+wl).classList.remove(wl)),this.hiddenInput.focus(),this.hiddenInput.blur(),this.isElementFocused=!1)},e.prototype.removeElement=function(t){t.parentNode&&t.parentNode.removeChild(t)},e.prototype.changeSliderType=function(t,e){this.isMaterialTooltip&&this.materialHandle&&(this.sliderContainer.classList.remove(nl),this.removeElement(this.materialHandle),this.materialHandle=void 0),this.removeElement(this.firstHandle),this.firstHandle=void 0,"Default"!==t&&("Range"===t&&(this.removeElement(this.secondHandle),this.secondHandle=void 0),this.removeElement(this.rangeBar),this.rangeBar=void 0),this.tooltip.isVisible&&!F(this.tooltipObj)&&(this.tooltipObj.destroy(),this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0),this.limits.enabled&&("MinRange"===t||"Default"===t?F(this.limitBarFirst)||(this.removeElement(this.limitBarFirst),this.limitBarFirst=void 0):F(this.limitBarSecond)||(this.removeElement(this.limitBarSecond),this.limitBarSecond=void 0)),this.activeHandle=1,this.getThemeInitialization(),"Range"===this.type&&this.rangeValueUpdate(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setHandler(),this.setOrientClass(),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.setValue(),this.tooltip.isVisible&&(this.renderTooltip(),this.wireMaterialTooltipEvent(!1)),this.setBarColor(),($()||this.isServerRendered)&&"tooltip"===e||this.updateConfig()},e.prototype.changeRtl=function(){if(this.enableRtl||"Range"!==this.type||(this.value=[this.handleVal2,this.handleVal1]),this.updateConfig(),this.tooltip.isVisible&&this.tooltipObj.refresh(this.firstHandle),this.showButtons){var t=this.enableRtl&&"Vertical"!==this.orientation;hi(t?this.secondBtn:this.firstBtn,{"aria-label":"Decrease",title:"Decrease"}),hi(t?this.firstBtn:this.secondBtn,{"aria-label":"Increase",title:"Increase"})}},e.prototype.changeOrientation=function(){this.changeSliderType(this.type,"null")},e.prototype.updateConfig=function(){this.setEnableRTL(),this.setValue(),this.tooltip.isVisible&&($()||this.refreshTooltip(this.tooltipTarget)),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.limitsPropertyChange()},e.prototype.limitsPropertyChange=function(){this.limits.enabled?(F(this.limitBarFirst)&&"Range"!==this.type&&this.createLimitBar(),F(this.limitBarFirst)&&F(this.limitBarSecond)&&"Range"===this.type&&this.createLimitBar(),this.setLimitBar(),this.setValue()):(F(this.limitBarFirst)||ai(this.limitBarFirst),F(this.limitBarSecond)||ai(this.limitBarSecond))},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.unwireEvents(),window.removeEventListener("resize",this.onresize),ei([this.sliderContainer],[Za]),this.firstHandle.removeAttribute("aria-orientation"),"Range"===this.type&&this.secondHandle.removeAttribute("aria-orientation"),$()||this.isServerRendered||(this.sliderContainer.parentNode.insertBefore(this.element,this.sliderContainer),ai(this.sliderContainer)),this.tooltip.isVisible&&this.tooltipObj.destroy(),$()||this.isServerRendered||(this.element.innerHTML="")},e.prototype.onPropertyChanged=function(t,e){for(var i=this,n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];switch(o){case"cssClass":this.setCSSClass(e.cssClass);break;case"value":if(t&&e){var s=F(t.value)?"Range"===this.type?[this.min,this.max]:this.min:t.value;this.setProperties({value:s},!0),F(e.value)||e.value.toString()===s.toString()||(this.setValue(),$()&&this.isServerRendered||this.refreshTooltip(this.tooltipTarget),"Range"===this.type&&(F(t.value)||e.value[1]===s[1]?this.activeHandle=1:this.activeHandle=2))}break;case"min":case"step":case"max":$()&&this.isServerRendered&&(this.isServerRendered=!1),this.setMinMaxValue(),$()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"tooltip":$()&&this.isServerRendered&&(this.isServerRendered=!1),F(t.tooltip)||F(e.tooltip)||this.setTooltip(o),$()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"type":$()&&this.isServerRendered&&(this.isServerRendered=!1),F(e)||!Object.keys(e).length||F(e.type)||(this.changeSliderType(e.type,o),this.setZindex()),$()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"enableRtl":$()&&this.isServerRendered&&(this.isMaterialTooltip&&this.sliderContainer.classList.add(nl),this.isServerRendered=!1),e.enableRtl!==t.enableRtl&&"Vertical"!==this.orientation&&(this.rtl=e.enableRtl,this.changeRtl()),$()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"limits":this.limitsPropertyChange();break;case"orientation":$()&&this.isServerRendered&&(this.isServerRendered=!1),this.changeOrientation(),$()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"ticks":F(this.sliderContainer.querySelector("."+Va))||($()&&this.isServerRendered||ai(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,function(t){t.match(/e-scale-/)&&i.sliderContainer.classList.remove(t)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex());break;case"locale":this.showButtons&&this.buttonTitle();break;case"showButtons":t.showButtons?(this.setButtons(),this.reposition(),this.enabled&&!this.readonly&&this.wireButtonEvt(!1)):$()&&this.isServerRendered||this.firstBtn&&this.secondBtn&&(this.sliderContainer.removeChild(this.firstBtn),this.sliderContainer.removeChild(this.secondBtn),this.sliderContainer.classList.remove(vl),this.firstBtn=void 0,this.secondBtn=void 0,this.reposition()),$()&&this.isServerRendered&&this.isMaterialTooltip&&this.sliderContainer.classList.add(nl);break;case"enabled":this.setEnabled(),$()&&this.isServerRendered&&this.isMaterialTooltip&&this.sliderContainer.classList.add(nl);break;case"readonly":this.setReadOnly(),$()&&this.isServerRendered&&this.isMaterialTooltip&&this.sliderContainer.classList.add(nl);break;case"customValues":$()&&this.isServerRendered&&(this.isServerRendered=!1),this.setValue(),this.reposition(),$()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"colorRange":$()&&this.isServerRendered&&(this.isServerRendered=!1),this.reposition(),$()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"width":this.setElementWidth(t.width),this.setMinMaxValue(),this.limits&&this.limitsPropertyChange()}}},e.prototype.setReadOnly=function(){this.readonly?(this.unwireEvents(),this.sliderContainer.classList.add(Ll)):(this.wireEvents(),this.sliderContainer.classList.remove(Ll))},e.prototype.setMinMaxValue=function(){var t=this;this.setValue(),$()||this.refreshTooltip(this.tooltipTarget),F(this.sliderContainer.querySelector("."+Va))||this.ul&&(ai(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,function(e){e.match(/e-scale-/)&&t.sliderContainer.classList.remove(e)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex())},e.prototype.setZindex=function(){this.zIndex=6,F(this.ticks)||"None"===this.ticks.placement||(this.ul.style.zIndex=this.zIndex+-7+"",this.element.style.zIndex=this.zIndex+2+""),this.isMaterial||F(this.ticks)||"Both"!==this.ticks.placement||(this.element.style.zIndex=this.zIndex+2+""),this.firstHandle.style.zIndex=this.zIndex+3+"","Range"===this.type&&(this.secondHandle.style.zIndex=this.zIndex+4+"")},e.prototype.setTooltip=function(t){this.changeSliderType(this.type,t)},e.prototype.setBarColor=function(){for(var t,e,i=this.sliderTrack.lastElementChild;i;)this.sliderTrack.removeChild(i),i=this.sliderTrack.lastElementChild;for(var n=0;n<this.colorRange.length;n++)if(!F(this.colorRange[n].start)&&!F(this.colorRange[n].end)&&this.colorRange[n].end>this.colorRange[n].start){this.colorRange[n].start<this.min&&(this.colorRange[n].start=this.min),this.colorRange[n].end>this.max&&(this.colorRange[n].end=this.max);var r=this.checkHandlePosition(this.colorRange[n].start),o=this.checkHandlePosition(this.colorRange[n].end),s=this.createElement("div");s.style.backgroundColor=this.colorRange[n].color,s.style.border="1px solid "+this.colorRange[n].color,"Horizontal"===this.orientation?(e=ol,t=this.enableRtl?F(this.customValues)?this.checkHandlePosition(this.max)-this.checkHandlePosition(this.colorRange[n].end):this.checkHandlePosition(this.customValues.length-this.colorRange[n].end-1):this.checkHandlePosition(this.colorRange[n].start),s.style.width=o-r+"px",s.style.left=t+"px"):(e=sl,t=this.checkHandlePosition(this.colorRange[n].start),s.style.height=o-r+"px",s.style.bottom=t+"px"),s.classList.add(e),this.sliderTrack.appendChild(s)}},e.prototype.getModuleName=function(){return"slider"},La([Hi(null)],e.prototype,"value",void 0),La([Hi(null)],e.prototype,"customValues",void 0),La([Hi(1)],e.prototype,"step",void 0),La([Hi(null)],e.prototype,"width",void 0),La([Hi(0)],e.prototype,"min",void 0),La([Hi(100)],e.prototype,"max",void 0),La([Hi(!1)],e.prototype,"readonly",void 0),La([Hi("Default")],e.prototype,"type",void 0),La([Fi([{}],Ta)],e.prototype,"colorRange",void 0),La([_i({},Ia)],e.prototype,"ticks",void 0),La([_i({},Aa)],e.prototype,"limits",void 0),La([Hi(!0)],e.prototype,"enabled",void 0),La([_i({},Ba)],e.prototype,"tooltip",void 0),La([Hi(!1)],e.prototype,"showButtons",void 0),La([Hi(!0)],e.prototype,"enableAnimation",void 0),La([Hi("Horizontal")],e.prototype,"orientation",void 0),La([Hi("")],e.prototype,"cssClass",void 0),La([Hi(!1)],e.prototype,"enableHtmlSanitizer",void 0),La([Ui()],e.prototype,"created",void 0),La([Ui()],e.prototype,"change",void 0),La([Ui()],e.prototype,"changed",void 0),La([Ui()],e.prototype,"renderingTicks",void 0),La([Ui()],e.prototype,"renderedTicks",void 0),La([Ui()],e.prototype,"tooltipChange",void 0),e=La([Gi],e)}(un),Rl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),zl=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},jl="e-switch-ctrl-btn",Nl="e-hide-hex-value",Hl="e-hide-switchable-value",_l="e-hide-value",Vl="e-hsv-color",Fl="e-selected-value",Wl="e-mode-switch-btn",Ul="e-nocolor-item",Gl="e-opacity-value",ql="e-preview-container",Xl="e-show-value",Yl="e-selected",Zl="e-tile",Kl=["#000000","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"],Jl=function(t){function e(e,i){return t.call(this,e,i)||this}return Rl(e,t),e.prototype.preRender=function(){var t=this.element;this.formElement=pi(this.element,"form"),this.formElement&&ee.add(this.formElement,"reset",this.formResetHandler,this);this.l10n=new Ln("colorpicker",{Apply:"Apply",Cancel:"Cancel",ModeSwitcher:"Switch Mode"},this.locale),t.getAttribute("ejs-for")&&!t.getAttribute("name")&&t.setAttribute("name",t.id)},e.prototype.render=function(){this.initWrapper(),this.inline?this.createWidget():this.createSplitBtn(),this.enableOpacity||ti([this.container.parentElement],"e-hide-opacity"),this.renderComplete()},e.prototype.initWrapper=function(){var t=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"});this.element.parentNode.insertBefore(t,this.element),t.appendChild(this.element),hi(this.element,{tabindex:"-1",spellcheck:"false"}),this.container=this.createElement("div",{className:"e-container"}),this.getWrapper().appendChild(this.container);var e=this.value?this.roundValue(this.value).toLowerCase():"#008000ff";this.noColor&&"Palette"===this.mode&&""===this.value&&(e="");var i=e.slice(0,7);F(this.initialInputValue)&&(this.initialInputValue=i),this.element.value=i,this.enableOpacity?this.setProperties({value:e},!0):this.setProperties({value:i},!0),this.enableRtl&&t.classList.add("e-rtl"),this.cssClass&&ti([t],this.cssClass.split(" ")),this.tileRipple=Qi(this.container,{selector:"."+Zl}),this.ctrlBtnRipple=Qi(this.container,{selector:".e-btn"})},e.prototype.getWrapper=function(){return this.element.parentElement},e.prototype.createWidget=function(){"Palette"===this.mode?(this.createPalette(),this.inline||this.firstPaletteFocus()):(this.createPicker(),this.inline||this.getDragHandler().focus()),this.isRgb=!0,this.createInput(),this.createCtrlBtn(),this.disabled||this.wireEvents(),this.inline&&this.disabled&&this.toggleDisabled(!0),te.isDevice&&this.refreshPopupPos()},e.prototype.createSplitBtn=function(){var t=this,e=this.createElement("button",{className:"e-split-colorpicker"});this.getWrapper().appendChild(e),this.splitBtn=new ga({iconCss:"e-selected-color",target:this.container,disabled:this.disabled,enableRtl:this.enableRtl,open:this.onOpen.bind(this),click:function(e){t.trigger("change",{currentValue:{hex:t.value.slice(0,7),rgba:t.convertToRgbString(t.hexToRgb(t.value))},previousValue:{hex:null,rgba:null},value:t.value})}}),this.splitBtn.createElement=this.createElement,this.splitBtn.appendTo(e);var i=this.createElement("span",{className:"e-split-preview"});ci(".e-selected-color",e).appendChild(i),i.style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value));var n=this.getPopupEle();if(ti([n],"e-colorpicker-popup"),this.cssClass&&ti([n],this.cssClass.split(" ")),te.isDevice){var r=this.getPopupInst();r.relateTo=document.body,r.position={X:"center",Y:"center"},r.targetType="container",r.collision={X:"fit",Y:"fit"},r.offsetY=4,n.style.zIndex=po(this.splitBtn.element).toString()}this.bindCallBackEvent()},e.prototype.onOpen=function(t){this.trigger("open",{element:this.container})},e.prototype.getPopupInst=function(){return et(this.getPopupEle(),ho)},e.prototype.bindCallBackEvent=function(){var t=this;this.splitBtn.beforeOpen=function(e){var i=new ma;return t.trigger("beforeOpen",e,function(n){if(!n.cancel){var r=t.getPopupEle();r.style.top=J(0+pageYOffset),r.style.left=J(0+pageXOffset),r.style.display="block",t.createWidget(),r.style.display="",te.isDevice&&(t.modal=t.createElement("div"),t.modal.className="e-"+t.getModuleName()+" e-modal",t.modal.style.display="none",document.body.insertBefore(t.modal,r),document.body.className+=" e-colorpicker-overflow",t.modal.style.display="block",t.modal.style.zIndex=(Number(r.style.zIndex)-1).toString())}e.cancel=n.cancel,i.resolve(n)}),i},this.splitBtn.beforeClose=function(e){var i=new ma;if(F(e.event))i.resolve(e);else{var n={element:t.container,event:e.event,cancel:!1};t.trigger("beforeClose",n,function(n){te.isDevice&&e.event.target===t.modal&&(n.cancel=!0),n.cancel||t.onPopupClose(),e.cancel=n.cancel,i.resolve(n)})}return i}},e.prototype.onPopupClose=function(){this.unWireEvents(),this.destroyOtherComp(),this.container.style.width="",ci(".e-split-preview",this.splitBtn.element).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value)),this.container.innerHTML="",ei([this.container],["e-color-picker","e-color-palette"]),te.isDevice&&this.modal&&(ei([document.body],"e-colorpicker-overflow"),this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},e.prototype.createPalette=function(){if(mi(this.container,["e-color-palette"],["e-color-picker"]),this.presetColors){var t=this.createElement("div",{className:"e-custom-palette"});this.appendElement(t);var e=Object.keys(this.presetColors);if(1===e.length)this.appendPalette(this.presetColors[e[0]],e[0],t);else for(var i=0,n=e.length;i<n;i++)this.appendPalette(this.presetColors[e[i]],e[i],t);di(".e-row",t).length>10&&ti([t],"e-palette-group")}else this.appendPalette(Kl,"default");"Palette"===this.mode&&!this.modeSwitcher&&this.noColor&&this.setNoColor();var r=parseInt(getComputedStyle(this.container).borderBottomWidth,10);this.container.style.width=J(this.container.children[0].offsetWidth+r+r),this.rgb=this.hexToRgb(this.roundValue(this.value)),this.hsv=this.rgbToHsv.apply(this,this.rgb)},e.prototype.firstPaletteFocus=function(){ci("."+Yl,this.container.children[0])||di(".e-palette",this.container)[0].focus()},e.prototype.appendPalette=function(t,e,i){var n,r,o,s=this.createElement("div",{className:"e-palette",attrs:{tabindex:"0"}});i?i.appendChild(s):this.appendElement(s);for(var a=0,l=t.length;a<l;a++)0!==a&&a%this.columns!=0||(n=this.createElement("div",{className:"e-row",attrs:{role:"row"}}),s.appendChild(n)),o=this.roundValue(t[a]).toLowerCase(),r=this.createElement("span",{className:Zl,attrs:{role:"gridcell","aria-label":o,"aria-selected":"false"}}),this.trigger("beforeTileRender",{element:r,presetName:e,value:t[a]}),n.appendChild(r),this.value===o&&(this.addTileSelection(r),s.focus()),r.style.backgroundColor=this.convertToRgbString(this.hexToRgb(o))},e.prototype.setNoColor=function(){var t=this.container.querySelector(".e-row").children[0];t.classList.add(Ul),this.value||(t.classList.add(Yl),pi(t,".e-palette").focus()),["aria-selected","aria-label"].forEach(function(e){t.removeAttribute(e)}),t.style.backgroundColor=""},e.prototype.appendElement=function(t,e){void 0===e&&(e=0);var i=this.container.children[e];i?this.container.insertBefore(t,i):this.container.appendChild(t)},e.prototype.addTileSelection=function(t){t.classList.add(Yl),t.setAttribute("aria-selected","true")},e.prototype.createPicker=function(){mi(this.container,["e-color-picker"],["e-color-palette"]);var t=this.createElement("div",{className:"e-hsv-container"});this.appendElement(t),t.appendChild(this.createElement("div",{className:Vl}));var e=this.createElement("span",{className:"e-handler",attrs:{tabindex:"0"}});t.appendChild(e),this.rgb=this.hexToRgb(this.value),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHsvContainerBg(),this.setHandlerPosition(),this.createSlider(),this.createDragTooltip()},e.prototype.setHsvContainerBg=function(t){void 0===t&&(t=this.hsv[0]),this.getHsvContainer().style.backgroundColor=this.convertToRgbString(this.hsvToRgb(t,100,100,1))},e.prototype.getHsvContainer=function(){return ci(".e-hsv-container",this.container)},e.prototype.setHandlerPosition=function(){var t=this.getDragHandler(),e=ci("."+Vl,this.container);this.enableRtl?t.style.left=J(e.offsetWidth*Math.abs(100-this.hsv[1])/100):t.style.left=J(e.offsetWidth*this.hsv[1]/100),t.style.top=J(e.offsetHeight*(100-this.hsv[2])/100)},e.prototype.createSlider=function(){var t=this.createElement("div",{className:"e-slider-preview"});this.appendElement(t,1),this.createPreview(t);var e=this.createElement("div",{className:"e-colorpicker-slider"});t.insertBefore(e,t.children[0]);var i=this.createElement("div",{className:"e-hue-slider"});e.appendChild(i),this.hueSlider=new Dl({value:this.hsv[0],min:0,max:359,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.hueChange.bind(this)}),this.hueSlider.createElement=this.createElement,this.hueSlider.appendTo(i),this.enableOpacity&&(i=this.createElement("div",{className:"e-opacity-slider"}),e.appendChild(i),this.createOpacitySlider(i))},e.prototype.createOpacitySlider=function(t){this.opacitySlider=new Dl({value:100*this.rgb[3],min:0,max:100,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.opacityChange.bind(this)}),this.opacitySlider.createElement=this.createElement,this.opacitySlider.appendTo(t);var e=this.createElement("div",{className:"e-opacity-empty-track"});t.appendChild(e),this.updateOpacitySliderBg()},e.prototype.updateOpacitySliderBg=function(){var t=this.enableRtl?"to left":"to right";ci(".e-slider-track",this.opacitySlider.element).style.background="linear-gradient("+t+", rgba("+this.rgb.slice(0,3)+", 0) 0%, "+this.convertToRgbString(this.rgb.slice(0,3))+" 100%)"},e.prototype.hueChange=function(t){this.hsv[0]=t.value,this.setHsvContainerBg(),this.convertToOtherFormat()},e.prototype.opacityChange=function(t){var e=t.value,i=this.rgbToHex(this.rgb);this.hsv[3]=e/100,this.rgb[3]=e/100;var n=this.rgbToHex(this.rgb);this.updateOpacityInput(e);var r=this.convertToRgbString(this.rgb);this.updatePreview(r),this.triggerEvent(n,i,r)},e.prototype.updateOpacityInput=function(t){if(!this.getWrapper().classList.contains(_l)){var e=et(ci("."+Gl,this.container),Oa);e.value=t,e.dataBind()}},e.prototype.createPreview=function(t){var e=this.createElement("div",{className:ql});t.appendChild(e);var i=this.createElement("span",{className:"e-preview e-current"});e.appendChild(i);var n=this.convertToRgbString(this.rgb);i.style.backgroundColor=n,i=this.createElement("span",{className:"e-preview e-previous"}),e.appendChild(i),i.style.backgroundColor=n},e.prototype.isPicker=function(){return!this.container.classList.contains("e-color-palette")},e.prototype.getPopupEle=function(){return this.container.parentElement},e.prototype.createNumericInput=function(t,e,i,n){var r=this,o=new Oa({value:e,placeholder:i,min:0,max:n,format:"###.##",showSpinButton:!1,floatLabelType:"Always",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker(),change:function(t){t.event&&r.inputHandler(t.event)}});o.createElement=this.createElement,o.appendTo(t)},e.prototype.createInput=function(){var t=this.isPicker(),e=this.getWrapper();if(t&&!e.classList.contains(_l)||!t&&e.classList.contains(Xl)){var i=this.createElement("div",{className:Fl});t?this.appendElement(i,2):this.appendElement(i,1);var n=this.createElement("div",{className:"e-input-container"});if(i.appendChild(n),e.classList.contains("e-hide-valueswitcher")||this.appendValueSwitchBtn(i),!e.classList.contains(Nl)){var r=this.createElement("input",{className:"e-hex",attrs:{maxlength:"7",spellcheck:"false"}});n.appendChild(r),ya.createInput({element:r,floatLabelType:"Always",properties:{placeholder:"HEX",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker()}},this.createElement),ya.setValue(this.value.slice(0,7),r),r.addEventListener("input",this.inputHandler.bind(this))}if(!e.classList.contains(Hl)){var o=void 0,s=void 0;this.isRgb?(o="RGB",s=this.rgb):(o="HSV",s=this.hsv);for(var a=["rh","gs","bv"],l=0;l<3;l++)this.createNumericInput(n.appendChild(this.createElement("input",{className:"e-"+a[l]+"-value"})),s[l],o[l],255);this.enableOpacity&&this.appendOpacityValue(n)}}},e.prototype.appendOpacityValue=function(t){this.createNumericInput(t.appendChild(this.createElement("input",{className:Gl})),100*this.rgb[3],"A",100)},e.prototype.appendValueSwitchBtn=function(t){var e=this.createElement("button",{className:"e-icons e-css e-btn e-flat e-icon-btn e-value-switch-btn"});t.appendChild(e),this.isPicker()&&!this.getWrapper().classList.contains(Hl)&&e.addEventListener("click",this.formatSwitchHandler.bind(this))},e.prototype.createCtrlBtn=function(){if(this.modeSwitcher||this.showButtons){this.l10n.setLocale(this.locale);var t=this.createElement("div",{className:jl});if(this.container.appendChild(t),this.showButtons){var e=this.createElement("div",{className:"e-ctrl-btn"});t.appendChild(e);var i=this.l10n.getConstant("Apply");e.appendChild(this.createElement("button",{innerHTML:i,className:"e-btn e-css e-flat e-primary e-small e-apply",attrs:{title:i}}));var n=this.l10n.getConstant("Cancel");e.appendChild(this.createElement("button",{innerHTML:n,className:"e-btn e-css e-flat e-small e-cancel",attrs:{title:n}}))}this.modeSwitcher&&this.appendModeSwitchBtn()}},e.prototype.appendModeSwitchBtn=function(){var t=this.createElement("button",{className:"e-icons e-btn e-flat e-icon-btn "+Wl,attrs:{title:this.l10n.getConstant("ModeSwitcher")}});ci("."+jl,this.container).insertBefore(t,ci(".e-ctrl-btn",this.container))},e.prototype.createDragTooltip=function(){var t=this,e=new vs({opensOn:"Custom",showTipPointer:!1,cssClass:"e-color-picker-tooltip",beforeOpen:function(e){t.tooltipEle=e.element},animation:{open:{effect:"None"},close:{effect:"None"}}});e.createElement=this.createElement,e.appendTo(this.container),e.open(this.container),this.tooltipEle.style.zIndex=po(this.tooltipEle).toString(),ci(".e-tip-content",this.tooltipEle).appendChild(this.createElement("div",{className:"e-tip-transparent"}))},e.prototype.getTooltipInst=function(){return et(this.container,vs)},e.prototype.setTooltipOffset=function(t){this.getTooltipInst().offsetY=t},e.prototype.toggleDisabled=function(t){t?this.getWrapper().classList.add("e-disabled"):this.getWrapper().classList.remove("e-disabled"),this.showButtons&&[].slice.call(di(".e-btn",this.container)).forEach(function(e){t?hi(e,{disabled:""}):e.removeAttribute("disabled")})},e.prototype.convertToRgbString=function(t){return t.length?4===t.length?"rgba("+t.join()+")":"rgb("+t.join()+")":""},e.prototype.convertToHsvString=function(t){return 4===t.length?"hsva("+t.join()+")":"hsv("+t.join()+")"},e.prototype.updateHsv=function(){this.hsv[1]=this.hsv[1]>100?100:this.hsv[1],this.hsv[2]=this.hsv[2]>100?100:this.hsv[2],this.setHandlerPosition()},e.prototype.convertToOtherFormat=function(t){void 0===t&&(t=!1);var e=this.rgbToHex(this.rgb);this.rgb=this.hsvToRgb.apply(this,this.hsv);var i=this.rgbToHex(this.rgb),n=this.convertToRgbString(this.rgb);this.updatePreview(n),this.updateInput(i),this.triggerEvent(i,e,n,t)},e.prototype.updateInput=function(t){var e=this.getWrapper();e.classList.contains(_l)||(e.classList.contains(Nl)||ya.setValue(t.substr(0,7),ci(".e-hex",this.container)),e.classList.contains(Hl)||(this.isRgb?this.updateValue(this.rgb,!1):this.updateValue(this.hsv,!1)))},e.prototype.updatePreview=function(t){this.enableOpacity&&this.updateOpacitySliderBg(),ci(".e-tip-transparent",this.tooltipEle).style.backgroundColor=t,ci("."+ql+" .e-current",this.container).style.backgroundColor=t,ci("."+ql+" .e-previous",this.container).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value))},e.prototype.getDragHandler=function(){return ci(".e-handler",this.container)},e.prototype.removeTileSelection=function(){[].slice.call(di("."+Yl,this.container.children[0])).forEach(function(t){t.classList.remove(Yl),t.setAttribute("aria-selected","false")})},e.prototype.convertRgbToNumberArray=function(t){return t.slice(t.indexOf("(")+1,t.indexOf(")")).split(",").map(function(t,e){return 3!==e?parseInt(t,10):parseFloat(t)})},e.prototype.getValue=function(t,e){if(t||(t=this.value),e=e?e.toLowerCase():"hex","r"===t[0]){var i=this.convertRgbToNumberArray(t);if("hex"===e||"hexa"===e){var n=this.rgbToHex(i);return"hex"===e?n.slice(0,7):n}return"hsv"===e?this.convertToHsvString(this.rgbToHsv.apply(this,i.slice(0,3))):"hsva"===e?this.convertToHsvString(this.rgbToHsv.apply(this,i)):"null"}if("h"===t[0]){i=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(t));if("rgba"===e)return this.convertToRgbString(i);if("hex"===e||"hexa"===e){n=this.rgbToHex(i);return"hex"===e?n.slice(0,7):n}return"rgb"===e?this.convertToRgbString(i.slice(0,3)):"null"}t=this.roundValue(t);var r=this.hexToRgb(t);return"rgb"!==e&&"hsv"!==e||(r=r.slice(0,3)),"rgba"===e||"rgb"===e?this.convertToRgbString(r):"hsva"===e||"hsv"===e?this.convertToHsvString(this.rgbToHsv.apply(this,r)):"hex"===e?t.slice(0,7):"a"===e?r[3].toString():"null"},e.prototype.toggle=function(){this.container.parentElement.classList.contains("e-popup-close")?this.splitBtn.toggle():this.closePopup(null)},e.prototype.getModuleName=function(){return"colorpicker"},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.wireEvents=function(){if(this.isPicker()){var t=this.getDragHandler();ee.add(t,"keydown",this.pickerKeyDown,this),ee.add(this.getHsvContainer(),"mousedown touchstart",this.handlerDown,this),(this.modeSwitcher||this.showButtons)&&this.addCtrlSwitchEvent(),ee.add(ci(".e-previous",this.container),"click",this.previewHandler,this)}else ee.add(this.container,"click",this.paletteClickHandler,this),ee.add(this.container,"keydown",this.paletteKeyDown,this)},e.prototype.formResetHandler=function(){this.value=this.initialInputValue,hi(this.element,{value:this.initialInputValue})},e.prototype.addCtrlSwitchEvent=function(){ee.add(ci("."+jl,this.container),"click",this.btnClickHandler,this)},e.prototype.pickerKeyDown=function(t){switch(t.keyCode){case 39:this.handlerDragPosition(1,this.enableRtl?-1:1,t);break;case 37:this.handlerDragPosition(1,this.enableRtl?1:-1,t);break;case 38:this.handlerDragPosition(2,1,t);break;case 40:this.handlerDragPosition(2,-1,t);break;case 13:t.preventDefault();var e=this.rgbToHex(this.rgb);this.enterKeyHandler(e,t)}},e.prototype.enterKeyHandler=function(t,e){this.triggerChangeEvent(t),this.inline||(this.closePopup(e),this.splitBtn.element.focus())},e.prototype.closePopup=function(t){var e=this,i={element:this.container,event:t,cancel:!1};this.trigger("beforeClose",i,function(t){t.cancel||(e.splitBtn.toggle(),e.onPopupClose())})},e.prototype.triggerChangeEvent=function(t){var e=t.slice(0,7);this.trigger("change",{currentValue:{hex:e,rgba:this.convertToRgbString(this.rgb)},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:this.enableOpacity?t:e}),this.enableOpacity?this.setProperties({value:t},!0):this.setProperties({value:e},!0),this.element.value=e||"#000000"},e.prototype.handlerDragPosition=function(t,e,i){i.preventDefault(),this.hsv[t]+=e*(i.ctrlKey?1:3),this.hsv[t]<0&&(this.hsv[t]=0),this.updateHsv(),this.convertToOtherFormat(!0)},e.prototype.handlerDown=function(t){t.preventDefault(),"mousedown"===t.type?(this.clientX=Math.abs(t.pageX-pageXOffset),this.clientY=Math.abs(t.pageY-pageYOffset),this.setTooltipOffset(8)):(this.clientX=Math.abs(t.changedTouches[0].pageX-pageXOffset),this.clientY=Math.abs(t.changedTouches[0].pageY-pageYOffset),this.setTooltipOffset(-8)),this.setHsv(this.clientX,this.clientY),this.getDragHandler().style.transition="left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)",this.updateHsv(),this.convertToOtherFormat(),this.getDragHandler().focus(),ee.add(document,"mousemove touchmove",this.handlerMove,this),ee.add(document,"mouseup touchend",this.handlerEnd,this)},e.prototype.handlerMove=function(t){var e,i;"touchmove"!==t.type&&t.preventDefault(),"mousemove"===t.type?(e=Math.abs(t.pageX-pageXOffset),i=Math.abs(t.pageY-pageYOffset)):(e=Math.abs(t.changedTouches[0].pageX-pageXOffset),i=Math.abs(t.changedTouches[0].pageY-pageYOffset)),this.setHsv(e,i);var n=this.getDragHandler();parseInt(n.style.left,10),parseInt(n.style.top,10);this.updateHsv(),this.convertToOtherFormat(),this.getTooltipInst().refresh(n),this.tooltipEle.style.transform||(Math.abs(this.clientX-e)>8||Math.abs(this.clientY-i)>8)&&(ci("."+Vl,this.container).style.cursor="pointer",n.style.transition="none",this.inline||(this.tooltipEle.style.zIndex=(parseInt(this.getPopupEle().style.zIndex,10)+1).toString()),this.tooltipEle.style.transform="rotate(45deg)",n.classList.add("e-hide-handler"))},e.prototype.setHsv=function(t,e){var i=ci("."+Vl,this.container),n=i.getBoundingClientRect();t=this.enableRtl?t>n.right?0:Math.abs(t-n.right):t>n.left?Math.abs(t-n.left):0,e=e>n.top?Math.abs(e-n.top):0,this.hsv[2]=Math.round(10*Number(100*(i.offsetHeight-Math.max(0,Math.min(i.offsetHeight,e-i.offsetTop)))/i.offsetHeight))/10,this.hsv[1]=Math.round(10*Number(100*Math.max(0,Math.min(i.offsetWidth,t-i.offsetLeft))/i.offsetWidth))/10},e.prototype.handlerEnd=function(t){"touchend"!==t.type&&t.preventDefault(),ee.remove(document,"mousemove touchmove",this.handlerMove),ee.remove(document,"mouseup touchend",this.handlerEnd);var e=this.getDragHandler();ci("."+Vl,this.container).style.cursor="",this.tooltipEle.style.transform&&(this.tooltipEle.style.transform="",e.classList.remove("e-hide-handler")),this.inline||this.showButtons||this.closePopup(t)},e.prototype.btnClickHandler=function(t){var e=t.target;pi(e,"."+Wl)?(t.stopPropagation(),this.switchToPalette()):(e.classList.contains("e-apply")||e.classList.contains("e-cancel"))&&this.ctrlBtnClick(e,t)},e.prototype.switchToPalette=function(){this.trigger("beforeModeSwitch",{element:this.container,mode:"Palette"}),this.unWireEvents(),this.destroyOtherComp(),ai(ci(".e-slider-preview",this.container)),this.getWrapper().classList.contains(_l)||li(ci("."+Fl,this.container)),ai(this.getHsvContainer()),this.createPalette(),this.firstPaletteFocus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Palette"})},e.prototype.refreshPopupPos=function(){if(!this.inline){var t=this.getPopupEle();t.style.left=J(0+pageXOffset),t.style.top=J(0+pageYOffset),this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement)}},e.prototype.formatSwitchHandler=function(t){t.target.parentElement;this.isRgb?(this.updateValue(this.hsv,!0,3,[360,100,100]),this.isRgb=!1):(this.updateValue(this.rgb,!0,2),this.isRgb=!0)},e.prototype.updateValue=function(t,e,i,n){for(var r,o=["e-rh-value","e-gs-value","e-bv-value"],s=0,a=o.length;s<a;s++)(r=et(ci("."+o[s],this.container),Oa)).value=Math.round(t[s]),e&&(r.placeholder=o[s].substr(i,1).toUpperCase(),r.max=n?n[s]:255),r.dataBind()},e.prototype.previewHandler=function(t){var e=t.target,i=this.rgbToHex(this.rgb);this.rgb=this.convertRgbToNumberArray(e.style.backgroundColor),this.rgb[3]||(this.rgb[3]=1);var n=this.rgbToHex(this.rgb),r=this.rgbToHsv.apply(this,this.rgb);r[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:r[0]},!0),this.hueSlider.refresh()),this.setHsvContainerBg(r[0]),this.enableOpacity&&r[3]!==this.hsv[3]&&(this.opacitySlider.setProperties({value:100*r[3]},!0),this.opacitySlider.refresh(),this.updateOpacitySliderBg()),this.hsv=r,this.setHandlerPosition(),this.updateInput(n),ci("."+ql+" .e-current",this.container).style.backgroundColor=this.convertToRgbString(this.rgb),this.triggerEvent(n,i,this.convertToRgbString(this.rgb))},e.prototype.paletteClickHandler=function(t){t.preventDefault();var e=t.target;if(e.classList.contains(Zl)){if(this.removeTileSelection(),this.addTileSelection(e),e.classList.contains(Ul))this.noColorTile();else{var i=e.getAttribute("aria-label"),n=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(this.roundValue(i)),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(Xl)&&this.updateInput(i),this.triggerEvent(i,n,this.convertToRgbString(this.rgb))}this.inline||this.showButtons||this.closePopup(t)}else pi(e,"."+Wl)?this.switchToPicker():e.classList.contains("e-apply")||e.classList.contains("e-cancel")?this.ctrlBtnClick(e,t):this.getWrapper().classList.contains(Xl)&&pi(e,".e-value-switch-btn")&&this.formatSwitchHandler(t)},e.prototype.noColorTile=function(t){void 0===t&&(t=!1);var e=this.rgbToHex(this.rgb);this.rgb=[],this.hsv=[],this.triggerEvent("",e,"",t)},e.prototype.switchToPicker=function(){var t=this.getWrapper();this.trigger("beforeModeSwitch",{element:this.container,mode:"Picker"}),this.unWireEvents(),[].slice.call(di(".e-palette",this.container)).forEach(function(t){ai(t)}),t.classList.contains(Xl)&&ai(ci("."+Fl,this.container)),this.container.style.width="";var e=ci(".e-custom-palette",this.container);this.presetColors&&li(e),this.createPicker(),this.getDragHandler().focus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Picker"})},e.prototype.ctrlBtnClick=function(t,e){if(t.classList.contains("e-apply")){var i=this.rgbToHex(this.rgb);this.triggerChangeEvent(i)}this.inline||(this.closePopup(e),this.splitBtn.element.focus())},e.prototype.paletteKeyDown=function(t){var e=t.target;if(e.classList.contains("e-palette")){var i,n,r=[].slice.call(di("."+Zl,e)),o=r.filter(function(t){return t.classList.contains("e-selected")}).pop();switch(!t.altKey&&t.keyCode){case 39:t.preventDefault(),i=o?r[this.tilePosition(r,o,this.enableRtl?-1:1)]:r[this.enableRtl?r.length-1:0],this.keySelectionChanges(i);break;case 37:t.preventDefault(),i=o?r[this.tilePosition(r,o,this.enableRtl?1:-1)]:r[this.enableRtl?0:r.length-1],this.keySelectionChanges(i);break;case 38:t.preventDefault(),i=r[n=o?this.tilePosition(r,o,-this.columns):0]?r[n]:r[n-this.columns],this.keySelectionChanges(i);break;case 40:t.preventDefault(),r[n=o?this.tilePosition(r,o,this.columns):r.length-1]?i=r[n]:(n%=r.length,i=r[n+=r[r.length-1].parentElement.childElementCount]),this.keySelectionChanges(i);break;case 13:if(t.preventDefault(),o){var s=o.getAttribute("aria-label");this.enterKeyHandler(s||"",t)}}}},e.prototype.keySelectionChanges=function(t){if(this.removeTileSelection(),this.addTileSelection(t),t.classList.contains(Ul))this.noColorTile(!0);else{var e=t.getAttribute("aria-label"),i=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(e),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(Xl)&&this.updateInput(e),this.triggerEvent(e,i,this.convertToRgbString(this.rgb),!0)}},e.prototype.tilePosition=function(t,e,i){var n=(t=Array.prototype.slice.call(t)).length,r=this.columns-t[n-1].parentElement.childElementCount,o=t.indexOf(e);return(o+=i)<0?o+=n+r:o%=n+r,o},e.prototype.inputHandler=function(t){var e,i,n=t.target;if(n.value.length)switch(ci(".e-float-text",n.parentElement).textContent){case"HEX":var r="";if(("#"===n.value[0]&&5!==n.value.length||"#"!==n.value[0]&&4!==n.value.length)&&(r=this.roundValue(n.value)),9!==r.length)return;i=this.rgbToHex(this.rgb),this.rgb=this.hexToRgb(r+r.substr(-2)),this.inputValueChange(this.rgbToHsv.apply(this,this.rgb),i,n.value);break;case"R":this.rgb[0]!==Number(n.value)&&(i=this.rgbToHex(this.rgb),this.rgb[0]=Number(n.value),e=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(e,i));break;case"G":this.rgb[1]!==Number(n.value)&&(i=this.rgbToHex(this.rgb),this.rgb[1]=Number(n.value),e=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(e,i));break;case"B":this.rgb[2]!==Number(n.value)&&(i=this.rgbToHex(this.rgb),this.rgb[2]=Number(n.value),e=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(e,i));break;case"H":this.hueSlider.value=Number(n.value);break;case"S":this.hsv[1]!==Number(n.value)&&(this.hsv[1]=Number(n.value),this.updateHsv(),this.convertToOtherFormat());break;case"V":this.hsv[2]!==Number(n.value)&&(this.hsv[2]=Number(n.value),this.updateHsv(),this.convertToOtherFormat());break;case"A":this.opacitySlider.value=Number(n.value)}},e.prototype.inputValueChange=function(t,e,i){t[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:t[0]},!0),this.hueSlider.refresh(),this.setHsvContainerBg(t[0])),this.hsv=t;var n=this.rgbToHex(this.rgb);this.setHandlerPosition(),this.updateInput(i||n);var r=this.convertToRgbString(this.rgb);this.updatePreview(r),this.triggerEvent(n,e,r)},e.prototype.triggerEvent=function(t,e,i,n){void 0===n&&(n=!1);var r=t.slice(0,7);this.showButtons||n?this.trigger("select",{currentValue:{hex:r,rgba:i},previousValue:{hex:e.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(e))}}):(this.trigger("change",{currentValue:{hex:r,rgba:i},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:t}),this.setProperties({value:t},!0),this.element.value=r||"#000000")},e.prototype.destroy=function(){var e=this,i=this.getWrapper();t.prototype.destroy.call(this),["tabindex","spellcheck"].forEach(function(t){e.element.removeAttribute(t)}),this.inline?(this.unWireEvents(),this.destroyOtherComp()):(this.isPopupOpen()&&(this.unWireEvents(),this.destroyOtherComp()),this.splitBtn.destroy(),this.splitBtn=null),this.tileRipple(),this.tileRipple=null,this.ctrlBtnRipple(),this.ctrlBtnRipple=null,this.element.nextElementSibling&&ai(this.element.nextElementSibling),i&&(i.parentElement.insertBefore(this.element,i),ai(i)),this.container=null,this.formElement&&ee.remove(this.formElement,"reset",this.formResetHandler)},e.prototype.destroyOtherComp=function(){if(this.isPicker()){this.hueSlider.destroy(),this.enableOpacity&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.hueSlider=null;var t=this.getTooltipInst();t.close(),t.destroy(),this.tooltipEle=null}},e.prototype.isPopupOpen=function(){return this.getPopupEle().classList.contains("e-popup-open")},e.prototype.unWireEvents=function(){if(this.isPicker()){this.getWrapper();var t=this.getDragHandler();ee.remove(t,"keydown",this.pickerKeyDown),ee.remove(this.getHsvContainer(),"mousedown touchstart",this.handlerDown),(this.modeSwitcher||this.showButtons)&&ee.remove(ci("."+jl,this.container),"click",this.btnClickHandler),ee.remove(ci(".e-previous",this.container),"click",this.previewHandler)}else ee.remove(this.container,"click",this.paletteClickHandler),ee.remove(this.container,"keydown",this.paletteKeyDown)},e.prototype.roundValue=function(t){if(!t)return"";"#"!==t[0]&&(t="#"+t);var e=t.length;if(4===e&&(t+="f",e=5),5===e){for(var i="",n=1,r=t.length;n<r;n++)i+=t.charAt(n)+t.charAt(n);t="#"+i,e=9}return 7===e&&(t+="ff"),t},e.prototype.hexToRgb=function(t){if(!t)return[];9!==(t=t.trim()).length&&(t=this.roundValue(t));var e=Number((parseInt(t.slice(-2),16)/255).toFixed(2));t=t.slice(1,7);var i=parseInt(t,16),n=[];return n.push(i>>16&255),n.push(i>>8&255),n.push(255&i),n.push(e),n},e.prototype.rgbToHsv=function(t,e,i,n){if(this.rgb&&!this.rgb.length)return[];t/=255,e/=255,i/=255;var r,o,s=Math.max(t,e,i),a=Math.min(t,e,i),l=s,h=s-a;if(o=0===s?0:h/s,s===a)r=0;else{switch(s){case t:r=(e-i)/h+(e<i?6:0);break;case e:r=(i-t)/h+2;break;case i:r=(t-e)/h+4}r/=6}var c=[Math.round(360*r),Math.round(1e3*o)/10,Math.round(1e3*l)/10];return F(n)||c.push(n),c},e.prototype.hsvToRgb=function(t,e,i,n){var r,o,s,a,l,h,c,d;if(i/=100,0===(e/=100))return r=o=s=i,[Math.round(255*r),Math.round(255*o),Math.round(255*s),n];switch(h=i*(1-e),c=i*(1-e*(l=(t/=60)-(a=Math.floor(t)))),d=i*(1-e*(1-l)),a){case 0:r=i,o=d,s=h;break;case 1:r=c,o=i,s=h;break;case 2:r=h,o=i,s=d;break;case 3:r=h,o=c,s=i;break;case 4:r=d,o=h,s=i;break;default:r=i,o=h,s=c}var p=[Math.round(255*r),Math.round(255*o),Math.round(255*s)];return F(n)||p.push(n),p},e.prototype.rgbToHex=function(t){return t.length?"#"+this.hex(t[0])+this.hex(t[1])+this.hex(t[2])+(F(t[3])?"":0!==t[3]?(Math.round(255*t[3])+65536).toString(16).substr(-2):"00"):""},e.prototype.hex=function(t){return("0"+t.toString(16)).slice(-2)},e.prototype.changeModeSwitcherProp=function(t){var e=ci("."+jl,this.container);t?e?this.appendModeSwitchBtn():(this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):e&&(this.showButtons?ai(ci("."+Wl,e)):li(e))},e.prototype.changeShowBtnProps=function(t){var e=ci("."+jl,this.container);t?(e&&li(e),this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):this.modeSwitcher?ai(ci(".e-ctrl-btn",e)):li(e)},e.prototype.changeValueProp=function(t){if(this.isPicker())this.rgb=this.hexToRgb(t),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHandlerPosition(),ai(pi(this.hueSlider.element,".e-slider-preview")),this.createSlider(),this.setHsvContainerBg(),this.updateInput(t),4===this.rgb.length&&this.updateOpacityInput(100*this.rgb[3]);else{this.removeTileSelection();var e=ci('span[aria-label="'+this.roundValue(t)+'"]',this.container);e&&this.addTileSelection(e)}},e.prototype.setInputEleProps=function(t){li(ci("."+Fl,this.container)),this.createInput()},e.prototype.changeDisabledProp=function(t){this.isPicker()&&(this.hueSlider.enabled=!t,this.opacitySlider.enabled=!t,this.setInputEleProps(t)),t?(this.toggleDisabled(!0),this.unWireEvents()):(this.toggleDisabled(!1),this.wireEvents())},e.prototype.changeCssClassProps=function(t,e){var i=this.getWrapper(),n=this.getPopupEle();e&&ei([i,n],e.split(" ")),t&&ti([i,n],t.split(" "))},e.prototype.changeRtlProps=function(t){t?ti([this.getWrapper()],"e-rtl"):ei([this.getWrapper()],"e-rtl")},e.prototype.changePaletteProps=function(){ai(this.container.children[0]),this.container.style.width="",this.createPalette()},e.prototype.changeOpacityProps=function(t){var e=this.getWrapper();t?(ei([this.container.parentElement],"e-hide-opacity"),this.createOpacitySlider(ci(".e-colorpicker-slider",this.container).appendChild(this.createElement("div",{className:"e-opacity-slider"}))),e.classList.contains(_l)||e.classList.contains(Hl)||this.appendOpacityValue(ci(".e-input-container",this.container))):(ti([this.container.parentElement],"e-hide-opacity"),this.opacitySlider.destroy(),li(this.opacitySlider.element),this.opacitySlider=null,e.classList.contains(_l)||e.classList.contains(Hl)||li(ci("."+Gl,this.container).parentElement))},e.prototype.onPropertyChanged=function(t,e){var i=this;if(!F(t.value)){var n=this.roundValue(t.value);if(9===n.length){this.element.value=this.roundValue(n).slice(0,7);var r=this.splitBtn&&ci(".e-split-preview",this.splitBtn.element);r&&(r.style.backgroundColor=this.convertToRgbString(this.hexToRgb(t.value)))}else this.value=e.value}if(!this.inline&&F(t.inline)){if(this.splitBtn.setProperties(Jn(t,["disabled","enableRtl"])),!this.isPopupOpen())return this.changeCssClassProps(t.cssClass,e.cssClass),void this.changeRtlProps(t.enableRtl)}for(var o=function(n){switch(n){case"inline":t.inline?(s.getWrapper().appendChild(s.container),s.splitBtn.destroy(),ai(s.element.nextElementSibling),s.container.children.length||s.createWidget()):(s.destroyOtherComp(),s.unWireEvents(),s.container.innerHTML="",s.createSplitBtn());break;case"cssClass":s.changeCssClassProps(t.cssClass,e.cssClass);var r=t.cssClass.split(" ").concat(e.cssClass.split(" "));r=r.reduce(function(t,e){return t.indexOf(e)<0&&t.push(e),t},[]);var o=0;r.forEach(function(t){0!==o||t!==_l&&"e-hide-valueswitcher"!==t&&t!==Xl&&t!==Nl&&t!==Hl||(ci("."+Fl,i.container)&&li(ci("."+Fl,i.container)),i.createInput(),o++)});break;case"enableRtl":s.isPicker()&&(s.hueSlider.enableRtl=t.enableRtl,s.enableOpacity&&(s.opacitySlider.enableRtl=t.enableRtl),s.setInputEleProps(t.enableRtl)),s.changeRtlProps(t.enableRtl);break;case"disabled":s.changeDisabledProp(t.disabled);break;case"value":s.value!==e.value&&s.changeValueProp(t.value);break;case"showButtons":s.changeShowBtnProps(t.showButtons);break;case"mode":"Picker"===t.mode?s.switchToPicker():s.switchToPalette();break;case"modeSwitcher":s.changeModeSwitcherProp(t.modeSwitcher);break;case"columns":case"presetColors":s.isPicker()||s.changePaletteProps();break;case"noColor":t.noColor?"Palette"!==s.mode||s.modeSwitcher||s.setNoColor():s.changePaletteProps();break;case"enableOpacity":s.changeOpacityProps(t.enableOpacity)}},s=this,a=0,l=Object.keys(t);a<l.length;a++){o(l[a])}},e.prototype.focusIn=function(){this.element.parentElement.focus()},zl([Hi("#008000ff")],e.prototype,"value",void 0),zl([Hi("")],e.prototype,"cssClass",void 0),zl([Hi(!1)],e.prototype,"disabled",void 0),zl([Hi("Picker")],e.prototype,"mode",void 0),zl([Hi(!0)],e.prototype,"modeSwitcher",void 0),zl([Hi(null)],e.prototype,"presetColors",void 0),zl([Hi(!0)],e.prototype,"showButtons",void 0),zl([Hi(10)],e.prototype,"columns",void 0),zl([Hi(!1)],e.prototype,"inline",void 0),zl([Hi(!1)],e.prototype,"noColor",void 0),zl([Hi(!1)],e.prototype,"enablePersistence",void 0),zl([Hi(!0)],e.prototype,"enableOpacity",void 0),zl([Ui()],e.prototype,"select",void 0),zl([Ui()],e.prototype,"change",void 0),zl([Ui()],e.prototype,"beforeTileRender",void 0),zl([Ui()],e.prototype,"beforeOpen",void 0),zl([Ui()],e.prototype,"open",void 0),zl([Ui()],e.prototype,"beforeClose",void 0),zl([Ui()],e.prototype,"beforeModeSwitch",void 0),zl([Ui()],e.prototype,"onModeSwitch",void 0),zl([Ui()],e.prototype,"created",void 0),e=zl([Gi],e)}(un),Ql={},$l={},th={},eh={},ih={};Object(I.copy)(Ql,u),Object(I.copy)($l,n),Object(I.copy)(th,o),Object(I.copy)(Ql,f),Object(I.copy)(Ql,p),Object(I.copy)(eh,d),Object(I.copy)(ih,l);var nh="e-menu-item",rh="keydown",oh=function(){function t(t,e,i,n){this.wrapper=t,this.target=e,this.filter=i,this.dotnetRef=n,this.wrapper.blazor__instance=this,this.addContextMenuEvent(),ee.add(this.wrapper,rh,this.keyDownHandler,this)}return t.prototype.addContextMenuEvent=function(t){var e;if(void 0===t&&(t=!0),this.target){var i=di(this.target);if(i.length){for(var n=0,r=i.length;n<r;n++)if(e=i[n],t)te.isIos?new kn(e,{tapHold:this.touchHandler.bind(this)}):ee.add(e,"contextmenu",this.cmenuHandler,this);else if(te.isIos){var o=et(e,kn);o&&o.destroy()}else ee.remove(e,"contextmenu",this.cmenuHandler);if(F(this.targetElement)&&(this.targetElement=e),t){ee.add(this.targetElement,"scroll",this.scrollHandler,this);for(var s=0,a=co(this.targetElement);s<a.length;s++){var l=a[s];ee.add(l,"scroll",this.scrollHandler,this)}}else{var h=void 0;this.targetElement.parentElement?(ee.remove(this.targetElement,"scroll",this.scrollHandler),h=co(this.targetElement)):h=co(e);for(var c=0,d=h;c<d.length;c++){var p=d[c];ee.remove(p,"scroll",this.scrollHandler)}this.targetElement=null}}}},t.prototype.scrollHandler=function(t){this.wrapper.childElementCount&&this.dotnetRef.invokeMethodAsync("CloseMenu",t)},t.prototype.touchHandler=function(t){this.cmenuHandler(t.originalEvent)},t.prototype.keyDownHandler=function(t){if(t.preventDefault(),40===t.keyCode||38===t.keyCode){var e=void 0,i=void 0,n=void 0;t.target.classList.contains("e-menu-parent")?((n=(i=t.target).querySelector(".e-menu-item.e-focused"))?(e=Array.prototype.indexOf.call(i.children,n),e=40===t.keyCode?e===i.childElementCount-1?0:e+1:0===e?i.childElementCount-1:e-1):e=0,e=this.isValidLI(i,0,40===t.keyCode)):t.target.classList.contains(nh)&&(n=(i=t.target.parentElement).querySelector(".e-menu-item.e-focused"),e=Array.prototype.indexOf.call(i.children,n||t.target),e=40===t.keyCode?e===i.childElementCount-1?0:e+1:0===e?i.childElementCount-1:e-1,e=this.isValidLI(i,e,40===t.keyCode)),i&&-1!==e&&i.children[e].focus()}else if(((this.wrapper.classList.contains("e-rtl")?39===t.keyCode:37===t.keyCode)||27===t.keyCode)&&(t.target.classList.contains("e-ul")||t.target.classList.contains(nh)&&!t.target.parentElement.classList.contains("e-contextmenu"))){var r=(i=t.target.classList.contains("e-ul")?t.target:t.target.parentElement).previousElementSibling.querySelector(".e-menu-item.e-selected");r&&r.focus()}},t.prototype.isValidLI=function(t,e,i,n){void 0===n&&(n=0);var r=t.children[e];return n===t.childElementCount?-1:((r.classList.contains("e-separator")||r.classList.contains("e-disabled")||r.classList.contains("e-menu-hide"))&&(e=i?e===t.childElementCount-1?0:e+1:0===e?t.childElementCount-1:e-1,n++),((r=t.children[e]).classList.contains("e-separator")||r.classList.contains("e-disabled")||r.classList.contains("e-menu-hide"))&&(e=this.isValidLI(t,e,i)),e)},t.prototype.cmenuHandler=function(t){if(this.filter){for(var e=!1,i=this.filter.split(" "),n=0,r=i.length;n<r;n++)if(pi(t.target,i[n])){e=!0;break}if(!e)return}t.preventDefault();var o=t.changedTouches?t.changedTouches[0].pageX:t.pageX,s=t.changedTouches?t.changedTouches[0].pageY:t.pageY;this.dotnetRef.invokeMethodAsync("OpenContextMenu",Math.ceil(o),Math.ceil(s),t)},t.prototype.contextMenuPosition=function(t,e,i,n){this.removeEventListener();var r=this.wrapper.firstElementChild;if(!r)return{Left:0,Top:0,ZIndex:0,Width:0};this.wrapper.parentElement!==document.body&&document.body.appendChild(this.wrapper);var o=po(this.wrapper);r.style.visibility="hidden",r.classList.remove("e-transparent");var s=r.getBoundingClientRect(),a=this.getMenuWidth(r,s.width,i);if(n&&te.isDevice)return r.classList.add("e-transparent"),r.style.visibility="",{Width:Math.ceil(a)};var l=this.wrapper.getBoundingClientRect();if(null!=e){if(e-pageYOffset+s.height>document.documentElement.clientHeight){var h=document.documentElement.clientHeight-s.height-20;h>document.documentElement.clientTop&&(e=h+pageYOffset)}e-=l.top+pageYOffset,e=Math.ceil(e+1)}if(null!=t){if(t-pageXOffset+a>document.documentElement.clientWidth){var c=document.documentElement.clientWidth-a-20;c>document.documentElement.clientLeft&&(t=c+pageYOffset)}t-=l.left+pageXOffset,t=Math.ceil(t+1)}return r.classList.add("e-transparent"),null!=e&&(this.wrapper.style.top=e+"px"),null!=t&&(this.wrapper.style.left=t+"px"),r.style.visibility="",r.focus(),this.addEventListener(),{Left:t,Top:e,ZIndex:o,Width:Math.ceil(a)}},t.prototype.getMenuWidth=function(t,e,i){var n=t.getElementsByClassName("e-caret")[0];return n&&(e+=parseInt(getComputedStyle(n)[i?"marginRight":"marginLeft"],10)),e<120?120:e},t.prototype.addEventListener=function(){ee.add(document,"mousedown touchstart",this.mouseDownHandler,this),ee.add(document,"mouseover",this.mouseOverHandler,this)},t.prototype.removeEventListener=function(){ee.remove(document,"mousedown touchstart",this.mouseDownHandler),ee.remove(document,"mouseover",this.mouseOverHandler)},t.prototype.mouseDownHandler=function(t){this.wrapper.childElementCount?pi(t.target,"#"+this.wrapper.id)||this.dotnetRef.invokeMethodAsync("CloseMenu",t):this.removeEventListener()},t.prototype.mouseOverHandler=function(t){if(this.wrapper.childElementCount){if(this.subMenuOpen&&this.wrapper.childElementCount>1&&(pi(t.target,"#"+this.wrapper.id)||this.dotnetRef.invokeMethodAsync("CloseSubMenu",t)),!pi(document.activeElement,"#"+this.wrapper.id)&&this.wrapper.childElementCount){this.openAsMenu&&(this.openAsMenu=!1,ee.remove(document,"mouseover",this.mouseOverHandler));var e=this.wrapper.lastElementChild;e&&e.focus()}}else this.removeEventListener()},t.prototype.subMenuPosition=function(t,e,i){if(!this.wrapper.childElementCount||this.wrapper.childElementCount<2)return{Left:0,Top:0,Width:0};var n=this.wrapper.children[this.wrapper.childElementCount-2].querySelector(".e-menu-item.e-selected").getBoundingClientRect(),r=this.wrapper.getBoundingClientRect(),o=this.wrapper.lastElementChild;o.style.visibility="hidden",o.classList.remove("e-transparent");var s,a,l=o.getBoundingClientRect(),h=this.getMenuWidth(o,l.width,t);t?(a=parseInt(getComputedStyle(o).borderWidth,10),s=n.left-h-r.left):s=n.right-r.left;var c=n.top-r.top;o.classList.add("e-transparent"),o.style.visibility="";var d=o.querySelector(".e-menu-item.e-focused");if(d?d.focus():o.focus(),t)n.left-a-h<document.documentElement.clientLeft&&n.right+h<document.documentElement.clientWidth&&(s=n.right-r.left);else if(n.right+h>document.documentElement.clientWidth){var p=n.left-h;p>document.documentElement.clientLeft&&(s=p-r.left)}if(n.top+l.height>document.documentElement.clientHeight){var u=document.documentElement.clientHeight-l.height-20;u>document.documentElement.clientTop&&(c=u-r.top)}return this.subMenuOpen=!e,i&&(this.openAsMenu=!0,this.removeEventListener(),this.addEventListener()),{Left:Math.ceil(s),Top:Math.ceil(c),Width:Math.ceil(h)}},t.prototype.onPropertyChanged=function(t,e){switch(t){case"Target":this.addContextMenuEvent(!1),this.target=e,this.addContextMenuEvent();break;case"Filter":this.filter=e}},t.prototype.destroy=function(t){this.removeEventListener(),this.addContextMenuEvent(!1),t&&t.parentElement&&t.previousElementSibling!==this.wrapper&&t.parentElement.insertBefore(this.wrapper,t),t&&t.parentElement||!this.wrapper.parentElement||this.wrapper.parentElement!==document.body||document.body.removeChild(this.wrapper)},t}(),sh={initialize:function(t,e,i,n){return t&&new oh(t,e,i,n),te.isDevice},contextMenuPosition:function(t,e,i,n,r){return t.blazor__instance.contextMenuPosition(e,i,n,r)},subMenuPosition:function(t,e,i,n){return t.blazor__instance.subMenuPosition(e,i,n)},onPropertyChanged:function(t,e,i){t.blazor__instance.onPropertyChanged(e,i)},destroy:function(t,e){t.blazor__instance.destroy(e)}},ah={},lh={},hh={};Object(I.copy)(ah,sh),Object(I.copy)(ah,sh),Object(I.copy)(lh,n),Object(I.copy)(hh,a);var ch=function(){function t(t,e,i){this.hasFocusableNode=!1,this.element=t,this.dotNetRef=i,this.updateContext(e),this.element&&(this.element.blazor__instance=this)}return t.prototype.initialize=function(){this.dlgContainer=void 0,this.popupObj=null,this.calculatezIndex=1e3===this.zIndex,this.render(),this.dotNetRef.invokeMethodAsync("CreatedEvent",null),this.visible?this.dotNetRef.invokeMethodAsync("ShowDialog",null):this.isModal&&(this.dlgOverlay.style.display="none"),this.setWidth(),this.setMinHeight(),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.bindEvent(this.element)},t.prototype.updateContext=function(t){V(this,this,t)},t.prototype.setWidth=function(){"100%"===this.width?this.element.style.width="":gi(this.element,{width:J(this.width)})},t.prototype.setHeight=function(){gi(this.element,{height:J(this.height)})},t.prototype.setMinHeight=function(){""!==this.minHeight&&gi(this.element,{minHeight:J(this.minHeight)})},t.prototype.render=function(){var t=this;if(this.checkPositionData(),this.targetEle=this.getTargetEle(this.target),te.isDevice&&ti([this.element],"e-device"),F(this.headerContent)&&(this.headerContent=this.element.querySelector(".e-dlg-header-content")),F(this.contentEle)&&(this.contentEle=this.element.querySelector(".e-dlg-content")),this.setMaxHeight(),1e3===this.zIndex&&this.setzIndex(this.element,!1),this.allowDragging&&!F(this.headerContent)&&this.setAllowDragging(),this.isModal&&F(this.dlgContainer)&&(this.dlgContainer=this.element.parentElement,this.dlgOverlay=this.element.parentElement.getElementsByClassName("e-dlg-overlay")[0]),!F(this.element.parentElement)){var e=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=$e("div",{className:"e-dlg-ref-element"}),e.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}F(this.targetEle)||(this.isModal?this.targetEle.appendChild(this.dlgContainer):this.targetEle.appendChild(this.element)),this.popupObj=new ho(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.getTargetEle(this.target),actionOnScroll:"none",enableRtl:this.enableRtl,open:function(){t.enableResize&&t.resetResizeIcon(),t.dotNetRef.invokeMethodAsync("OpenEvent",null)},close:function(){t.isModal&&(ti([t.dlgOverlay],"e-fade"),t.dlgContainer.style.display="none"),t.hasFocusableNode=!1,t.dotNetRef.invokeMethodAsync("CloseEvent",t.element.classList.toString())}}),this.positionChange(),this.setEnableRTL()},t.prototype.checkPositionData=function(){if(!F(this.position)){if(!F(this.position.X)&&"number"!=typeof this.position.X)this.isNumberValue(this.position.X)&&(this.position.X=parseFloat(this.position.X));if(!F(this.position.Y)&&"number"!=typeof this.position.Y)this.isNumberValue(this.position.Y)&&(this.position.Y=parseFloat(this.position.Y))}},t.prototype.isNumberValue=function(t){return/^[-+]?\d*\.?\d+$/.test(t)},t.prototype.getTargetEle=function(t){var e;return F(t)||"string"!=typeof t||(e=document.querySelector(t)),F(e)?document.body:e},t.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var t=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!F(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=t,te.isIE&&"auto"===this.height&&!F(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},t.prototype.setzIndex=function(t,e){this.zIndex=po(t),e&&(this.popupObj.zIndex=this.zIndex)},t.prototype.updatezIndex=function(){this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.calculatezIndex=this.element.style.zIndex===this.zIndex.toString()},t.prototype.updateTarget=function(){this.targetEle=this.getTargetEle(this.target),this.popupObj.relateTo=this.targetEle,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.targetEle.appendChild(this.dlgContainer),this.enableResize&&this.setResize()},t.prototype.resetResizeIcon=function(){var t=this.getMinHeight();if(this.targetEle.offsetHeight<t){var e=this.element.querySelector("."+this.resizeIconDirection);F(e)||(e.style.bottom="-"+t.toString()+"px")}},t.prototype.getMouseEvtArgs=function(t){return{altKey:t.altKey,button:t.button,buttons:t.buttons,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,detail:t.detail,metaKey:t.metaKey,screenX:t.screenX,screenY:t.screenY,shiftKey:t.shiftKey,type:t.type}},t.prototype.setAllowDragging=function(){var t=this;this.dragObj=new bn(this.element,{clone:!1,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:function(e){t.dotNetRef.invokeMethodAsync("DragStartEvent",{target:{ID:e.target.id},event:t.getMouseEvtArgs(e.event)}),e.bindEvents(e.dragElement)},drag:function(e){t.dotNetRef.invokeMethodAsync("DragEvent",{target:{ID:e.target.id},event:t.getMouseEvtArgs(e.event)})},dragStop:function(e){t.isModal&&(F(t.position)||t.dlgContainer.classList.remove("e-dlg-"+t.position.X+"-"+t.position.Y),t.element.style.position="relative"),t.dotNetRef.invokeMethodAsync("DragStopEvent",{target:{ID:e.target.id},event:t.getMouseEvtArgs(e.event)}),t.element.classList.remove("e-restrict-left")}}),F(this.targetEle)||(this.dragObj.dragArea=this.targetEle)},t.prototype.positionChange=function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},t.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},t.prototype.setEnableRTL=function(){F(this.element.querySelector(".e-resize-handle"))||(ts(),this.setResize())},t.prototype.setResize=function(){if(this.enableResize){if(!F(this.element.querySelector(".e-icons.e-resize-handle")))return;var t=getComputedStyle(this.element).minHeight,e=getComputedStyle(this.element).minWidth;this.isModal&&this.enableRtl?this.element.classList.add("e-restrict-left"):!this.isModal||this.target!==document.body&&"body"!==this.target||this.element.classList.add("e-resize-viewport"),Ho({element:this.element,direction:this.resizeIconDirection,minHeight:parseInt(t.slice(0,e.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(e.slice(0,e.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this})}else ts(),this.isModal?this.element.classList.remove("e-restrict-left"):this.element.classList.remove("e-resize-viewport")},t.prototype.getMinHeight=function(){var t="0px",e="0px";F(this.element.querySelector(".e-dlg-header-content"))||(t=getComputedStyle(this.headerContent).height);var i=ci(".e-footer-content",this.element);F(i)||(e=getComputedStyle(i).height);var n=parseInt(t.slice(0,t.indexOf("p")),10),r=parseInt(e.slice(0,e.indexOf("p")),10);return $o(n+30+r),n+30+r},t.prototype.changePosition=function(t){this.isModal&&this.dlgContainer.classList.contains("e-dlg-"+this.position.X+"-"+this.position.Y)&&this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y),this.updateContext(t),this.checkPositionData(),this.positionChange()},t.prototype.setOverlayZindex=function(t){var e;e=F(t)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:t,this.dlgOverlay.style.zIndex=(e-1).toString(),this.dlgContainer.style.zIndex=e.toString()},t.prototype.focusContent=function(t){var e=this.getAutoFocusNode(t);(F(e)?t:e).focus(),this.hasFocusableNode=!0},t.prototype.getAutoFocusNode=function(t){var e=t.querySelector(".e-dlg-closeicon-btn"),i=t.querySelectorAll("[autofocus]"),n=this.getValidFocusNode(i);if(this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0],F(n)){if(!F(n=this.focusableElements(this.contentEle)))return n;if(!F(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else e=n;return e},t.prototype.getValidFocusNode=function(t){for(var e,i=0;i<t.length;i++)if(((e=t[i]).clientHeight>0||"a"===e.tagName.toLowerCase()&&e.hasAttribute("href"))&&e.tabIndex>-1&&!e.disabled&&!this.disableElement(e,'[disabled],[aria-disabled="true"],[type="hidden"]'))return e;return e},t.prototype.disableElement=function(t,e){var i=t?t.matches||t.webkitMatchesSelector||t.msMatchesSelector:null;if(i)for(;t;t=t.parentNode)if(t instanceof Element&&i.call(t,e))return t;return null},t.prototype.focusableElements=function(t){if(!F(t)){var e=t.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(e)}return null},t.prototype.getMaxHeight=function(t){return t.style.maxHeight},t.prototype.OnPropertyChanged=function(t,e){this.updateContext(t);for(var i=0,n=e;i<n.length;i++){switch(n[i]){case"width":this.setWidth();break;case"height":this.setHeight();break;case"minHeight":this.setMinHeight();break;case"target":this.updateTarget();break;case"zIndex":this.updatezIndex();break;case"allowDragging":this.setAllowDragging();break;case"destroyDraggable":this.destroyDraggable();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize()}}},t.prototype.fullScreen=function(t){if(t){ti([this.element],"e-dlg-fullscreen");var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=F(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=e,ti([document.body],["e-dlg-target","e-scroll-disabled"]),this.allowDragging&&!F(this.dragObj)&&(this.dragObj.destroy(),this.dragObj=void 0)}else ei([this.element],"e-dlg-fullscreen"),ei([document.body],["e-dlg-target","e-scroll-disabled"]),this.allowDragging&&!F(this.headerContent)&&this.setAllowDragging()},t.prototype.show=function(t,e,i){if(this.updateContext(i),!this.element.classList.contains("e-popup-open")||!F(t)){F(t)||this.fullScreen(t),this.element.style.maxHeight!==e&&(this.allowMaxHeight=!1,this.element.style.maxHeight=e),this.storeActiveElement=document.activeElement,this.element.tabIndex=-1,this.isModal&&F(this.dlgOverlay)&&(this.dlgOverlay=this.element.parentElement.querySelector(".e-dlg-overlay")),this.isModal&&!F(this.dlgOverlay)&&(this.dlgOverlay.style.display="block",this.dlgContainer.style.display="flex",ei([this.dlgOverlay],"e-fade"),F(this.targetEle)?ti([document.body],["e-dlg-target","e-scroll-disabled"]):(this.targetEle===document.body?this.dlgContainer.style.position="fixed":this.dlgContainer.style.position="absolute",this.dlgOverlay.style.position="absolute",this.element.style.position="relative",ti([this.targetEle],["e-dlg-target","e-scroll-disabled"])));var n={name:this.animationSettings.effect+"In",duration:this.animationSettings.duration,delay:this.animationSettings.delay},r=this.isModal?this.element.parentElement:this.element;this.calculatezIndex&&(this.setzIndex(r,!0),gi(this.element,{zIndex:this.zIndex}),this.isModal&&this.setOverlayZindex(this.zIndex)),"None"===this.animationSettings.effect?this.popupObj.show():this.popupObj.show(n)}},t.prototype.hide=function(){this.isModal&&(F(this.targetEle)?ei([document.body],["e-dlg-target","e-scroll-disabled"]):ei([this.targetEle],["e-dlg-target","e-scroll-disabled"]));var t={name:this.animationSettings.effect+"Out",duration:this.animationSettings.duration,delay:this.animationSettings.delay};"None"===this.animationSettings.effect?this.popupObj.hide():this.popupObj.hide(t)},t.prototype.refreshPosition=function(){this.popupObj.refreshPosition()},t.prototype.destroyDraggable=function(){F(this.dragObj)||(this.dragObj.destroy(),this.dragObj=void 0)},t.prototype.destroy=function(t){this.updateContext(t);var e=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(!F(this.cssClass)&&""!==this.cssClass){var i=this.cssClass.split(" ");ei([this.element],i)}if(te.isDevice&&ei([this.element],"e-device"),ei([this.getTargetEle(this.target)],["e-dlg-target","e-scroll-disabled"]),this.unBindEvent(this.element),this.element.classList.contains("e-dlg-fullscreen")&&ei([document.body],["e-dlg-target","e-scroll-disabled"]),this.isModal&&ei([F(this.targetEle)?document.body:this.targetEle],"e-scroll-disabled"),this.element.classList.contains("e-dlg-resizable")&&(ts(),this.element.classList.remove("e-dlg-resizable")),this.element.classList.contains("e-draggable")&&(this.dragObj.destroy(),this.dragObj=void 0),this.element.classList.contains("e-popup")&&(this.popupObj.destroy(),this.popupObj=void 0),F(this.refElement)||F(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),ai(this.refElement),this.refElement=void 0),!F(this.element.children))for(var n=0;n<=this.element.children.length;n++)n-=n,ai(this.element.children[n]);for(n=0;n<e.length;n++)this.element.removeAttribute(e[n]);if(this.isModal){ai(this.element.nextElementSibling);var r=this.element.parentElement;r.removeAttribute("class"),r.removeAttribute("style")}this.element.classList.remove("e-dialog")},t.prototype.bindEvent=function(t){ee.add(t,"keydown",this.keyDown,this)},t.prototype.unBindEvent=function(t){ee.remove(t,"keydown",this.keyDown)},t.prototype.popupCloseHandler=function(){var t=document.activeElement;F(t)||F(t.blur)||t.blur(),F(this.storeActiveElement)||F(this.storeActiveElement.focus)||this.storeActiveElement.focus()},t.prototype.onResizeStart=function(t,e){var i=this.getMouseEvtArgs(t);this.dotNetRef.invokeMethodAsync("ResizeStartEvent",i)},t.prototype.onResizing=function(t,e){this.dotNetRef.invokeMethodAsync("ResizingEvent",this.getMouseEvtArgs(t))},t.prototype.onResizeComplete=function(t,e){this.dotNetRef.invokeMethodAsync("ResizeStopEvent",this.getMouseEvtArgs(t))},t.prototype.keyDown=function(t){var e=this;if(9===t.keyCode&&this.isModal){var i=void 0,n=this.element.querySelector(".e-footer-content"),r=n.querySelectorAll("button");if(r.length>0&&(i=r[r.length-1]),F(i)&&n.childNodes.length>0){var o=n.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');i=o[o.length-1]}F(i)||document.activeElement!==i||t.shiftKey||(t.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&t.shiftKey&&(t.preventDefault(),F(i)||i.focus())}if(27===t.keyCode&&this.closeOnEscape&&this.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:t.altKey,ctrlKey:t.ctrlKey,code:t.code,key:t.key,location:t.location,repeat:t.repeat,shiftKey:t.shiftKey,metaKey:t.metaKey,type:t.type}),this.hasFocusableNode){var s=document.activeElement,a=["input","textarea"].indexOf(s.tagName.toLowerCase())>-1,l=!1;a||(l=s.hasAttribute("contenteditable")&&"true"===s.getAttribute("contenteditable")),(13===t.keyCode&&!t.ctrlKey&&"textarea"!==s.tagName.toLowerCase()&&a&&!F(this.primaryButtonEle)||13===t.keyCode&&t.ctrlKey&&("textarea"===s.tagName.toLowerCase()||l)&&!F(this.primaryButtonEle))&&setTimeout(function(){e.element.querySelector(".e-footer-content button.e-btn.e-primary").click()})}},t}(),dh={initialize:function(t,e,i){t&&(new ch(t,e,i),t.blazor__instance.initialize())},getClassList:function(t){return t.classList.toString()},getMaxHeight:function(t){return t?t.blazor__instance.getMaxHeight(t):null},changePosition:function(t){t.element.blazor__instance.changePosition(t)},focusContent:function(t){t.blazor__instance.focusContent(t)},refreshPosition:function(t){t.blazor__instance.refreshPosition()},popupCloseHandler:function(t){t.blazor__instance.popupCloseHandler()},propertyChanged:function(t,e){t.element.blazor__instance.OnPropertyChanged(t,e)},show:function(t,e,i){i.element&&i.element.blazor__instance.show(t,e,i)},hide:function(t){t.blazor__instance.hide()},destroy:function(t){F(t.element)||t.element.blazor__instance.destroy(t)}},ph={},uh={},fh={},gh={};Object(I.copy)(ph,dh),Object(I.copy)(uh,n),Object(I.copy)(fh,o),Object(I.copy)(gh,a);var mh=function(){function t(t,e,i){this.element=t,this.dotNetRef=i,this.popup=e,this.element.blazor__instance=this}return t.prototype.calculatePosition=function(){var t=this.element.getBoundingClientRect(),e=t.left+pageXOffset,i=t.bottom+pageYOffset;this.popup.style.visibility="hidden",this.popup.style.top=pageYOffset?pageYOffset+"px;":"0",this.popup.style.left=pageXOffset?pageXOffset+"px;":"0",this.popup.classList.remove("e-transparent");var n=this.popup.getBoundingClientRect();this.popup.classList.add("e-transparent"),this.popup.style.visibility="";var r=po(this.element);return t.bottom+n.height>document.documentElement.clientHeight&&i-t.height-n.height>document.documentElement.clientTop&&(i=i-t.height-n.height),t.left+n.width>document.documentElement.clientWidth&&t.right-n.width>document.documentElement.clientLeft&&(e=e+t.width-n.width),e=Math.ceil(e),i=Math.ceil(i),document.body.appendChild(this.popup),this.popup.firstElementChild&&this.popup.firstElementChild.focus(),ee.remove(document,"mousedown touchstart",this.mouseDownHandler),this.addEventListener(),{Left:e,Top:i,ZIndex:r}},t.prototype.mouseDownHandler=function(t){this.popup.parentElement?pi(t.target,"#"+this.getDropDownButton().id)||pi(t.target,"#"+this.popup.id)||(this.dotNetRef.invokeMethodAsync("BtnClick",null),this.removeEventListener()):this.removeEventListener()},t.prototype.keydownHandler=function(t){var e=this.getElement();if(t.altKey)38===t.keyCode&&(t.stopPropagation(),t.preventDefault(),this.dotNetRef.invokeMethodAsync("BtnClick",null),e.focus(),this.removeEventListener());else{var i=this.popup.firstElementChild;if(27!==t.keyCode&&9!==t.keyCode||(t.stopPropagation(),this.dotNetRef.invokeMethodAsync("BtnClick",null),27===t.keyCode&&t.preventDefault(),e.focus(),this.removeEventListener()),!i||!i.classList.contains("e-dropdown-menu"))return;if(13===t.keyCode)return t.preventDefault(),void(t.target.classList.contains("e-item")&&t.target.classList.contains("e-focused")?(e.focus(),this.removeEventListener()):t.stopPropagation());38!==t.keyCode&&40!==t.keyCode||(t.target.classList.contains("e-dropdown-menu")&&t.stopPropagation(),t.preventDefault(),Qn(i,t.keyCode))}},t.prototype.getElement=function(){return this.element.classList.contains("e-split-btn-wrapper")?this.element.firstElementChild:this.element},t.prototype.getDropDownButton=function(){return this.element.classList.contains("e-split-btn-wrapper")?this.element.getElementsByClassName("e-dropdown-btn")[0]:this.element},t.prototype.clickHandler=function(t){pi(t.target,".e-item")&&(this.removeEventListener(),this.getElement().focus())},t.prototype.addEventListener=function(t){if(ee.add(document,"mousedown touchstart",this.mouseDownHandler,this),ee.add(this.popup,"click",this.clickHandler,this),ee.add(this.popup,"keydown",this.keydownHandler,this),t&&this.popup.firstElementChild){var e=this.popup.querySelector(".e-focused");e?e.focus():this.popup.firstElementChild.focus()}},t.prototype.removeEventListener=function(t){ee.remove(document,"mousedown touchstart",this.mouseDownHandler),this.popup.parentElement&&(ee.remove(this.popup,"click",this.clickHandler),ee.remove(this.popup,"keydown",this.keydownHandler),t&&this.element.parentElement&&this.element.appendChild(this.popup))},t}(),yh={calculatePosition:function(t,e,i){return F(t.blazor__instance)?(new mh(t,e,i),t.blazor__instance.calculatePosition()):(t.blazor__instance.popup=e,t.blazor__instance.calculatePosition())},addEventListener:function(t){t.blazor__instance.removeEventListener(),t.blazor__instance.addEventListener(!0)},removeEventListener:function(t){t.blazor__instance.removeEventListener(!0)}},vh={},bh={},wh={};Object(I.copy)(vh,yh),Object(I.copy)(vh,yh),Object(I.copy)(bh,n),Object(I.copy)(wh,a);var Sh;new(function(){return function(){}}()),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),new RegExp("^[0-9]*$"),new RegExp("^[+]?[0-9]{9,13}$"),new RegExp("^\\d{13,16}$");!function(t){t[t.Message=0]="Message",t[t.Label=1]="Label"}(Sh||(Sh={}));var xh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ch=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Ph="e-upload-file-list",Oh="e-file-status",Eh="e-file-remove-btn",Lh="e-file-delete-btn",Ih="e-file-abort-btn",Th="e-file-reload-btn",Ah="e-upload-progress-wrap",Bh="e-upload-progress-bar",kh="e-upload-success",Mh="e-upload-fails",Dh="e-file-pause-btn",Rh=["title","style","class"],zh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xh(e,t),Ch([Hi("")],e.prototype,"name",void 0),Ch([Hi(null)],e.prototype,"size",void 0),Ch([Hi("")],e.prototype,"type",void 0),e}(ln),jh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xh(e,t),Ch([Hi("Browse...")],e.prototype,"browse",void 0),Ch([Hi("Upload")],e.prototype,"upload",void 0),Ch([Hi("Clear")],e.prototype,"clear",void 0),e}(ln),Nh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xh(e,t),Ch([Hi("")],e.prototype,"saveUrl",void 0),Ch([Hi("")],e.prototype,"removeUrl",void 0),Ch([Hi(0)],e.prototype,"chunkSize",void 0),Ch([Hi(3)],e.prototype,"retryCount",void 0),Ch([Hi(500)],e.prototype,"retryAfterDelay",void 0),e}(ln),Hh=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.initialAttr={accept:null,multiple:!1,disabled:!1},n.uploadedFilesData=[],n.base64String=[],n.isForm=!1,n.allTypes=!1,n.pausedData=[],n.uploadMetaData=[],n.tabIndex="0",n.btnTabIndex="0",n.disableKeyboardNavigation=!1,n.count=-1,n.actionCompleteCount=0,n.flag=!0,n.selectedFiles=[],n.uploaderName="UploadFiles",n.fileStreams=[],n.newFileRef=0,n.fileList=[],n.filesData=[],n.uploaderOptions=e,n}return xh(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"allowedExtensions":this.setExtensions(this.allowedExtensions),this.clearAll();break;case"enabled":this.setControlStatus();break;case"multiple":this.setMultipleSelection();break;case"enableRtl":this.setRTL(),this.reRenderFileList();break;case"buttons":this.buttons.browse=F(this.buttons.browse)?"":this.buttons.browse,this.buttons.clear=F(this.buttons.clear)?"":this.buttons.clear,this.buttons.upload=F(this.buttons.upload)?"":this.buttons.upload,this.renderButtonTemplates();break;case"dropArea":this.unBindDropEvents(),this.updateDropArea();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHTMLAttributes(!0);break;case"files":this.renderPreLoadFiles();break;case"directoryUpload":this.updateDirectoryAttributes();break;case"template":this.isServerBlazor||this.clearAll();break;case"minFileSize":case"maxFileSize":case"autoUpload":case"sequentialUpload":this.clearAll();break;case"locale":this.l10n.setLocale(this.locale),this.setLocalizedTexts(),this.preLocaleObj=R("currentLocale",this.l10n);break;case"cssClass":this.setCSSClass(e.cssClass)}}},e.prototype.setLocalizedTexts=function(){F(this.template)&&("string"==typeof this.buttons.browse&&(this.browseButton.innerText="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText),this.uploadWrapper&&!F(this.uploadWrapper.querySelector(".e-file-drop"))&&(this.uploadWrapper.querySelector(".e-file-drop").innerHTML=this.localizedTexts("dropFilesHint"))),this.updateFileList())},e.prototype.getKeyValue=function(t){for(var e,i=0,n=Object.keys(this.preLocaleObj);i<n.length;i++){var r=n[i];this.preLocaleObj[r]===t&&(e=r)}return e},e.prototype.updateFileList=function(){if(this.fileList.length>0&&!F(this.uploadWrapper.querySelector(".e-upload-files")))for(var t=0;t<this.fileList.length;t++)this.fileList[t].querySelector(".e-file-status").innerHTML=this.localizedTexts(this.getKeyValue(this.filesData[t].status)),this.filesData[t].status=this.localizedTexts(this.getKeyValue(this.filesData[t].status)),this.fileList[t].classList.contains(kh)&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("delete")),this.fileList[t].querySelector(".e-file-play-btn")&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("resume")),this.fileList[t].querySelector(".e-file-remove-btn")&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("remove")),this.fileList[t].querySelector(".e-file-reload-btn")&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("retry")),this.autoUpload||(this.uploadButton.innerText="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.localizedTexts("Upload")),this.clearButton.innerText="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.localizedTexts("Clear")))},e.prototype.reRenderFileList=function(){this.listParent&&(ai(this.listParent),this.listParent=null,this.fileList=[],this.createFileList(this.filesData),this.actionButtons&&(this.removeActionButtons(),this.renderActionButtons(),this.checkActionButtonStatus()))},e.prototype.preRender=function(){if(this.localeText={Browse:"Browse...",Clear:"Clear",Upload:"Upload",dropFilesHint:"Or drop files here",invalidMaxFileSize:"File size is too large",invalidMinFileSize:"File size is too small",invalidFileType:"File type is not allowed",uploadFailedMessage:"File failed to upload",uploadSuccessMessage:"File uploaded successfully",removedSuccessMessage:"File removed successfully",removedFailedMessage:"Unable to remove file",inProgress:"Uploading",readyToUploadMessage:"Ready to upload",abort:"Abort",remove:"Remove",cancel:"Cancel",delete:"Delete file",pauseUpload:"File upload paused",pause:"Pause",resume:"Resume",retry:"Retry",fileUploadCancel:"File upload canceled",invalidFileSelection:"Invalid files selected",totalFiles:"Total files",size:"Size"},this.l10n=new Ln("uploader",this.localeText,this.locale),this.preLocaleObj=R("currentLocale",this.l10n),this.isServerBlazor=!(!$()||!this.isServerRendered),this.isBlazorTemplate=!(!this.isServerBlazor||""===this.template||F(this.template)),this.isBlazorSaveUrl=!(!this.isServerRendered||""!==this.asyncSettings.saveUrl&&!F(this.asyncSettings.saveUrl)),this.isBlazorSaveUrl&&this.sequentialUpload&&(this.sequentialUpload=!1),this.formRendered(),!this.isServerBlazor){this.updateHTMLAttrToElement(),this.checkHTMLAttributes(!1);var t=R("ej2_instances",this.element);if("EJS-UPLOADER"===this.element.tagName){for(var e=this.createElement("input",{attrs:{type:"file"}}),i=0;i<this.element.attributes.length;i++)e.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),e.innerHTML=this.element.innerHTML;e.hasAttribute("name")||e.setAttribute("name","UploadFiles"),this.element.appendChild(e),this.element=e,z("ej2_instances",t,this.element)}t[0].isPureReactComponent&&(F(t[0].props.name)?!F(t[0].props.id)&&F(t[0].props.name)?this.element.setAttribute("name",t[0].props.id):this.element.setAttribute("name","UploadFiles"):this.element.setAttribute("name",t[0].props.name)),F(this.element.getAttribute("name"))&&this.element.setAttribute("name",this.element.getAttribute("id")),this.element.hasAttribute("type")||this.element.setAttribute("type","file"),this.updateDirectoryAttributes()}this.keyConfigs={enter:"enter"},this.element.hasAttribute("tabindex")&&(this.tabIndex=this.element.getAttribute("tabindex")),this.browserName=te.info.name,this.uploaderName=this.element.getAttribute("name")},e.prototype.formRendered=function(){var t=pi(this.element,"form");if(!F(t))for(;t&&t!==document.documentElement;t=t.parentElement)"FORM"===t.tagName&&(this.isForm=!0,this.formElement=t,t.setAttribute("enctype","multipart/form-data"),t.setAttribute("encoding","multipart/form-data"))},e.prototype.getPersistData=function(){return this.addOnPersist(["filesData"])},e.prototype.getModuleName=function(){return"uploader"},e.prototype.updateDirectoryAttributes=function(){this.directoryUpload?(this.element.setAttribute("directory","true"),this.element.setAttribute("webkitdirectory","true")):(this.element.removeAttribute("directory"),this.element.removeAttribute("webkitdirectory"))},e.prototype.render=function(){this.isServerBlazor?(this.dropAreaWrapper=pi(this.element,".e-file-select-wrap"),this.uploadWrapper=pi(this.element,".e-upload.e-control-wrapper"),this.browseButton=this.dropAreaWrapper.querySelector("button.e-upload-browse-btn"),this.setDropArea(),this.renderPreLoadFiles(),this.wireEvents()):(this.renderBrowseButton(),this.initializeUpload(),this.updateHTMLAttrToWrapper(),this.wireEvents(),this.setMultipleSelection(),this.setExtensions(this.allowedExtensions),this.setRTL(),this.renderPreLoadFiles(),this.setControlStatus(),this.setCSSClass()),this.renderComplete()},e.prototype.renderBrowseButton=function(){this.browseButton=this.createElement("button",{className:"e-css e-btn",attrs:{type:"button"}}),this.browseButton.setAttribute("tabindex",this.tabIndex),"string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText)):this.browseButton.appendChild(this.buttons.browse),this.element.setAttribute("aria-label","Uploader")},e.prototype.renderActionButtons=function(){this.element.setAttribute("tabindex","-1"),this.isBlazorSaveUrl||this.isBlazorTemplate||(this.actionButtons=this.createElement("div",{className:"e-upload-actions"}),this.uploadButton=this.createElement("button",{className:"e-file-upload-btn e-css e-btn e-flat e-primary",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.clearButton=this.createElement("button",{className:"e-file-clear-btn e-css e-btn e-flat",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.actionButtons.appendChild(this.clearButton),this.actionButtons.appendChild(this.uploadButton),this.renderButtonTemplates(),this.uploadWrapper.appendChild(this.actionButtons),this.browseButton.blur(),this.uploadButton.focus(),this.wireActionButtonEvents())},e.prototype.serverActionButtonsEventBind=function(t){t&&!this.isForm&&(this.browseButton.blur(),this.actionButtons=t,this.uploadButton=this.actionButtons.querySelector(".e-file-upload-btn"),this.clearButton=this.actionButtons.querySelector(".e-file-clear-btn"),this.uploadButton.focus(),this.unwireActionButtonEvents(),this.wireActionButtonEvents(),this.checkActionButtonStatus())},e.prototype.serverUlElement=function(t){t&&(this.isBlazorSaveUrl||this.isBlazorTemplate)&&(this.listParent=t,this.fileList=[].slice.call(this.listParent.querySelectorAll("li")),this.serverRemoveIconBindEvent(),this.isForm||this.checkAutoUpload(this.filesData))},e.prototype.wireActionButtonEvents=function(){ee.add(this.uploadButton,"click",this.uploadButtonClick,this),ee.add(this.clearButton,"click",this.clearButtonClick,this)},e.prototype.unwireActionButtonEvents=function(){ee.remove(this.uploadButton,"click",this.uploadButtonClick),ee.remove(this.clearButton,"click",this.clearButtonClick)},e.prototype.removeActionButtons=function(){this.actionButtons&&(this.unwireActionButtonEvents(),this.isBlazorSaveUrl||this.isBlazorTemplate||ai(this.actionButtons),this.actionButtons=null)},e.prototype.renderButtonTemplates=function(){if("string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.textContent)):(this.browseButton.innerHTML="",this.browseButton.appendChild(this.buttons.browse)),this.uploadButton){var t;t=F(this.buttons.upload)?"Upload":this.buttons.upload,this.buttons.upload=t,"string"==typeof this.buttons.upload?(this.uploadButton.textContent="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.uploadButton.textContent)):(this.uploadButton.innerHTML="",this.uploadButton.appendChild(this.buttons.upload))}if(this.clearButton){var e;e=F(this.buttons.clear)?"Clear":this.buttons.clear,this.buttons.clear=e,"string"==typeof this.buttons.clear?(this.clearButton.textContent="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.clearButton.textContent)):(this.clearButton.innerHTML="",this.clearButton.appendChild(this.buttons.clear))}},e.prototype.initializeUpload=function(){this.element.setAttribute("tabindex","-1");var t=this.createElement("span",{className:"e-file-select"});this.element.parentElement.insertBefore(t,this.element),this.dropAreaWrapper=this.createElement("div",{className:"e-file-select-wrap"}),this.element.parentElement.insertBefore(this.dropAreaWrapper,this.element),t.appendChild(this.element),this.dropAreaWrapper.appendChild(this.browseButton),this.dropAreaWrapper.appendChild(t),this.uploadWrapper=this.createElement("div",{className:"e-upload e-control-wrapper"}),this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper,this.dropAreaWrapper),this.uploadWrapper.appendChild(this.dropAreaWrapper),this.setDropArea()},e.prototype.renderPreLoadFiles=function(){if(this.files.length){if(this.enablePersistence&&this.filesData.length)return void this.createFileList(this.filesData);if(F(this.files[0].size))return;var t=[].slice.call(this.files),e=[];this.multiple||(this.clearData(),t=[t[0]]);for(var i=0,n=t;i<n.length;i++){var r=n[i],o={name:r.name+"."+r.type.split(".")[r.type.split(".").length-1],rawFile:"",size:r.size,status:this.localizedTexts("uploadSuccessMessage"),type:r.type,validationMessages:{minSize:"",maxSize:""},statusCode:"2"};e.push(o),this.filesData.push(o)}this.createFileList(e),this.autoUpload||!this.listParent||this.actionButtons||this.isForm&&!this.allowUpload()||!this.showFileList||this.renderActionButtons(),this.checkActionButtonStatus(),this.sequentialUpload&&(this.count=this.filesData.length-1)}},e.prototype.checkActionButtonStatus=function(){if(this.actionButtons){var t=this.uploadWrapper.querySelectorAll(".e-validation-fails").length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span."+kh).length+this.uploadWrapper.querySelectorAll("span.e-upload-progress").length;t>0&&t===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},e.prototype.setDropArea=function(){var t=this.dropAreaWrapper.querySelector(".e-file-drop");if(this.dropArea){this.dropZoneElement="string"!=typeof this.dropArea?this.dropArea:document.querySelector(this.dropArea);for(var e=this.element,i=!1;e.parentNode;)(e=e.parentNode)===this.dropZoneElement&&(i=!0,t?this.isServerBlazor||(t.innerHTML=this.localizedTexts("dropFilesHint")):this.createDropTextHint());!i&&t&&t.remove()}else F(this.uploaderOptions)||void 0!==this.uploaderOptions.dropArea||(this.createDropTextHint(),this.dropZoneElement=this.uploadWrapper,this.setProperties({dropArea:this.uploadWrapper},!0));this.bindDropEvents()},e.prototype.updateDropArea=function(){if(this.dropArea)this.setDropArea();else{this.dropZoneElement=null;var t=this.dropAreaWrapper.querySelector(".e-file-drop");t&&t.remove()}},e.prototype.createDropTextHint=function(){if(!this.isServerBlazor){var t=this.createElement("span",{className:"e-file-drop"});t.innerHTML=this.localizedTexts("dropFilesHint"),this.dropAreaWrapper.appendChild(t)}},e.prototype.updateHTMLAttrToElement=function(){if(!F(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];Rh.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[i])}},e.prototype.updateHTMLAttrToWrapper=function(){if(!F(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if(Rh.indexOf(i)>-1)if("class"===i){var n=this.htmlAttributes[i].replace(/\s+/g," ").trim();""!==n&&ti([this.uploadWrapper],n.split(" "))}else if("style"===i){var r=this.uploadWrapper.getAttribute(i);r=F(r)?this.htmlAttributes[i]:r+this.htmlAttributes[i],this.uploadWrapper.setAttribute(i,r)}else this.uploadWrapper.setAttribute(i,this.htmlAttributes[i])}},e.prototype.setMultipleSelection=function(){if(this.multiple&&!this.element.hasAttribute("multiple")){var t=document.createAttribute("multiple");t.value="multiple",this.element.setAttributeNode(t)}else this.multiple||this.element.removeAttribute("multiple")},e.prototype.checkAutoUpload=function(t){this.autoUpload?(this.sequentialUpload?this.sequenceUpload(t):this.upload(t),this.removeActionButtons()):this.actionButtons||this.renderActionButtons(),this.checkActionButtonStatus()},e.prototype.sequenceUpload=function(t){if(this.filesData.length-t.length==0||"1"!==this.filesData[this.filesData.length-t.length-1].statusCode){++this.count;var e=!this.showFileList;"object"==typeof this.filesData[this.count]?(this.upload(this.filesData[this.count],e),"0"===this.filesData[this.count].statusCode&&this.sequenceUpload(t)):--this.count}},e.prototype.setCSSClass=function(t){var e=this.cssClass;F(this.cssClass)||""===this.cssClass||(e=this.cssClass.replace(/\s+/g," ").trim()),F(this.cssClass)||""===e||ti([this.uploadWrapper],e.split(e.indexOf(",")>-1?",":" "));var i=t;F(t)||(i=t.replace(/\s+/g," ").trim()),F(t)||""===i||ei([this.uploadWrapper],i.split(" "))},e.prototype.wireEvents=function(){ee.add(this.browseButton,"click",this.browseButtonClick,this),ee.add(this.element,"change",this.onSelectFiles,this),ee.add(document,"click",this.removeFocus,this),this.keyboardModule=new En(this.uploadWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.isForm&&ee.add(this.formElement,"reset",this.resetForm,this)},e.prototype.unWireEvents=function(){ee.remove(this.browseButton,"click",this.browseButtonClick),ee.remove(this.element,"change",this.onSelectFiles),ee.remove(document,"click",this.removeFocus),this.isForm&&ee.remove(this.formElement,"reset",this.resetForm),this.keyboardModule.destroy()},e.prototype.resetForm=function(){this.clearAll()},e.prototype.keyActionHandler=function(t){var e=t.target;switch(t.action){case"enter":if(t.target===this.clearButton)this.clearButtonClick();else if(t.target===this.uploadButton)this.uploadButtonClick();else if(t.target===this.browseButton)this.browseButtonClick();else if(e.classList.contains(Dh)){(i=this.getCurrentMetaData(null,t)).file.statusCode="4",i.file.status=this.localizedTexts("pauseUpload"),this.abortUpload(i,!1)}else if(e.classList.contains("e-file-play-btn"))this.resumeUpload(this.getCurrentMetaData(null,t),t);else if(e.classList.contains(Th)){var i;if(F(i=this.getCurrentMetaData(null,t))){var n=t.target.parentElement,r=this.filesData[this.fileList.indexOf(n)];this.retry(r)}else i.file.statusCode="1",i.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(i.file)}else this.removeFiles(t),e.classList.contains(Ih)||this.browseButton.focus();t.preventDefault(),t.stopPropagation()}},e.prototype.getCurrentMetaData=function(t,e){var i,n;if(F(t)){var r=e.target.parentElement;i=this.filesData[this.fileList.indexOf(r)]}else i=t;for(var o=0;o<this.uploadMetaData.length;o++)this.uploadMetaData[o].file.name===i.name&&(n=this.uploadMetaData[o]);return n},e.prototype.removeFocus=function(){this.uploadWrapper&&this.listParent&&this.listParent.querySelector(".e-clear-icon-focus")&&(document.activeElement.blur(),this.listParent.querySelector(".e-clear-icon-focus").classList.remove("e-clear-icon-focus"))},e.prototype.browseButtonClick=function(){this.element.click()},e.prototype.uploadButtonClick=function(){this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData)},e.prototype.clearButtonClick=function(){this.clearAll(),this.sequentialUpload&&(this.count=-1),this.actionCompleteCount=0},e.prototype.bindDropEvents=function(){this.dropZoneElement&&(ee.add(this.dropZoneElement,"drop",this.dropElement,this),ee.add(this.dropZoneElement,"dragover",this.dragHover,this),ee.add(this.dropZoneElement,"dragleave",this.onDragLeave,this),ee.add(this.dropZoneElement,"paste",this.onPasteFile,this))},e.prototype.unBindDropEvents=function(){this.dropZoneElement&&(ee.remove(this.dropZoneElement,"drop",this.dropElement),ee.remove(this.dropZoneElement,"dragover",this.dragHover),ee.remove(this.dropZoneElement,"dragleave",this.onDragLeave))},e.prototype.onDragLeave=function(t){this.dropZoneElement.classList.remove("e-upload-drag-hover")},e.prototype.dragHover=function(t){this.enabled&&(this.dropZoneElement.classList.add("e-upload-drag-hover"),"Default"!==this.dropEffect&&(t.dataTransfer.dropEffect=this.dropEffect.toLowerCase()),t.preventDefault(),t.stopPropagation())},e.prototype.dropElement=function(t){this.dropZoneElement.classList.remove("e-upload-drag-hover"),this.onSelectFiles(t),t.preventDefault(),t.stopPropagation()},e.prototype.onPasteFile=function(t){var e=t.clipboardData.items;if(1===e.length){var i=[].slice.call(e)[0];"file"===i.kind&&i.type.match("^image/")&&this.renderSelectedFiles(t,[i.getAsFile()],!1,!0)}},e.prototype.getSelectedFiles=function(t){for(var e=[],i=this.fileList[t],n=this.getFilesData(),r=+i.getAttribute("data-files-count"),o=0,s=0;s<t;s++)o+=+this.fileList[s].getAttribute("data-files-count");for(var a=o;a<o+r;a++)e.push(n[a]);return e},e.prototype.removeFiles=function(t){if(this.enabled){var e=t.target.parentElement;this.isBlazorSaveUrl&&(this.fileList=[].slice.call(this.uploadWrapper.querySelectorAll("li")));var i=this.fileList.indexOf(e),n=this.fileList[i],r=this.isFormUpload(),o=r?this.getSelectedFiles(i):this.getFilesInArray(this.filesData[i]);if(!F(o)){if(t.target.classList.contains(Ih)&&!r){if(o[0].statusCode="5",!F(n)){var s=n.querySelector("."+Ih);_s({target:s,width:"20px"}),$s(s)}this.sequentialUpload&&this.uploadSequential(),n.classList.contains("e-restrict-retry")||this.checkActionComplete(!0)}else pi(t.target,".e-spinner-pane")||this.remove(o,!1,!1,!0,t);this.element.value="",this.checkActionButtonStatus()}}},e.prototype.removeFilesData=function(t,e){var i;if(e)this.showFileList||(i=this.filesData.indexOf(t),this.filesData.splice(i,1));else{var n=this.getLiElement(t);F(n)||(this.isBlazorSaveUrl||ai(n),i=this.fileList.indexOf(n),this.fileList.splice(i,1),this.filesData.splice(i,1),this.isBlazorSaveUrl?this.interopAdaptor.invokeMethodAsync("removeFileData",i):(0!==this.fileList.length||F(this.listParent)||(ai(this.listParent),this.listParent=null,this.removeActionButtons()),this.sequentialUpload&&i<=this.count&&--this.count))}},e.prototype.removeUploadedFile=function(t,e,i,n){var r=this,o=t,s=new Ut(this.asyncSettings.removeUrl,"POST",!0,null);s.emitError=!1;var a=new FormData;if(s.beforeSend=function(n){e.currentRequest=s.httpRequest,$()&&(r.currentRequestHeader&&r.updateCustomheader(s.httpRequest,r.currentRequestHeader),r.customFormDatas&&r.updateFormData(a,r.customFormDatas)),i?r.removingEventCallback(e,a,o,t):r.trigger("removing",e,function(e){e.cancel?n.cancel=!0:r.removingEventCallback(e,a,o,t)})},this.isServerBlazor){var l=this.element.getAttribute("name");F(o.rawFile)||""===o.rawFile?a.append(l,o.name):a.append(l,o.rawFile,o.name)}s.onLoad=function(t){return r.removeCompleted(t,o,n),{}},s.onError=function(t){return r.removeFailed(t,o,n),{}},s.send(a)},e.prototype.removingEventCallback=function(t,e,i,n){var r=this.element.getAttribute("name"),o=this.getLiElement(n);if(!(F(o)||F(o.querySelector("."+Lh))&&F(o.querySelector("."+Eh)))){var s;_s({target:s=o.querySelector("."+Lh)?o.querySelector("."+Lh):o.querySelector("."+Eh),width:"20px"}),$s(s)}this.isServerBlazor||(t.postRawFile&&!F(i.rawFile)&&""!==i.rawFile?e.append(r,i.rawFile,i.name):e.append(r,i.name),this.updateFormData(e,t.customFormData))},e.prototype.updateFormData=function(t,e){if(e.length>0&&e[0])for(var i=function(i){var n=e[i],r=Object.keys(n).map(function(t){return n[t]});t.append(Object.keys(n)[0],r)},n=0;n<e.length;n++)i(n)},e.prototype.updateCustomheader=function(t,e){if(e.length>0&&e[0])for(var i=function(i){var n=e[i],r=Object.keys(n).map(function(t){return n[t]});t.setRequestHeader(Object.keys(n)[0],r)},n=0;n<e.length;n++)i(n)},e.prototype.removeCompleted=function(t,e,i){var n={e:t,response:t&&t.currentTarget?this.getResponse(t):null,operation:"remove",file:this.updateStatus(e,this.localizedTexts("removedSuccessMessage"),"2")};this.trigger("success",n),this.removeFilesData(e,i);var r=this.uploadedFilesData.indexOf(e);this.uploadedFilesData.splice(r,1),this.trigger("change",{files:this.uploadedFilesData})},e.prototype.removeFailed=function(t,e,i){var n={e:t,response:t&&t.currentTarget?this.getResponse(t):null,operation:"remove",file:this.updateStatus(e,this.localizedTexts("removedFailedMessage"),"0")};if(!i){var r=this.filesData.indexOf(e),o=this.fileList[r];if(o){var s=o.querySelector("."+Oh);o.classList.remove(kh),s.classList.remove(kh),o.classList.add(Mh),s.classList.add(Mh)}this.checkActionButtonStatus()}this.trigger("failure",n);var a=this.getLiElement(e);F(a)||F(a.querySelector("."+Lh))||(ea(a.querySelector("."+Lh)),ai(a.querySelector(".e-spinner-pane")))},e.prototype.getFilesFromFolder=function(t){var e;if(this.filesEntries=[],e=this.multiple?t.dataTransfer.items:[t.dataTransfer.items[0]],this.checkDirectoryUpload(e))for(var i=function(i){var r=e[i].webkitGetAsEntry();if(r.isFile){var o=[];r.file(function(t){var e=r.fullPath;o.push({path:e,file:t})}),n.renderSelectedFiles(t,o,!0)}else r.isDirectory&&n.traverseFileTree(r,t)},n=this,r=0;r<e.length;r++)i(r)},e.prototype.checkDirectoryUpload=function(t){for(var e=0;t&&e<t.length;e++){if(t[e].webkitGetAsEntry().isDirectory)return!0}return!1},e.prototype.traverseFileTree=function(t,e){if(t.isFile)this.filesEntries.push(t);else if(t.isDirectory){var i=t.createReader();this.readFileFromDirectory(i,e)}},e.prototype.readFileFromDirectory=function(t,e){var i=this;t.readEntries(function(n){for(var r=0;r<n.length;r++)i.traverseFileTree(n[r]);i.pushFilesEntries(e),n.length&&i.readFileFromDirectory(t)})},e.prototype.pushFilesEntries=function(t){for(var e=this,i=[],n=function(n){r.filesEntries[n].file(function(r){if(e.filesEntries){var o=e.filesEntries[n].fullPath;i.push({path:o,file:r}),n===e.filesEntries.length-1&&(e.filesEntries=[],e.renderSelectedFiles(t,i,!0))}})},r=this,o=0;o<this.filesEntries.length;o++)n(o)},e.prototype.onSelectFiles=function(t){var e;if(this.enabled)if("drop"===t.type)if(this.directoryUpload)this.getFilesFromFolder(t);else{var i=this.sortFilesList=t.dataTransfer.files;"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.files=i),e=this.multiple?this.sortFileList(i):[i[0]],this.renderSelectedFiles(t,e)}else e=[].slice.call(t.target.files),this.renderSelectedFiles(t,e)},e.prototype.getBase64=function(t){return new Promise(function(e,i){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(n.result)},n.onerror=function(t){return i(t)}})},e.prototype.renderSelectedFiles=function(t,e,i,n){var r=this;this.base64String=[];var o={event:t,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null};if(e.length<1)return o.isCanceled=!0,void this.trigger("selected",o);this.flag=!0;var s=[];this.multiple||(this.clearData(!0),e=[e[0]]);for(var a=0;a<e.length;a++){var l=i?e[a].file:e[a];this.updateInitialFileDetails(t,e,l,a,s,i,n)}o.filesData=s,this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.allTypes||(s=this.checkExtension(s)),this.trigger("selected",o,function(t){r._internalRenderSelect(t,s)})},e.prototype.updateInitialFileDetails=function(t,e,i,n,r,o,s){var a={name:o?e[n].path.substring(1,e[n].path.length):s?U(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name):this.directoryUpload?e[n].webkitRelativePath:i.name,rawFile:i,size:i.size,status:this.localizedTexts("readyToUploadMessage"),type:this.getFileType(i.name),validationMessages:this.validatedFileSize(i.size),statusCode:"1",id:U(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name)};s&&(a.fileSource="paste"),a.status=""!==a.validationMessages.minSize?this.localizedTexts("invalidMinFileSize"):""!==a.validationMessages.maxSize?this.localizedTexts("invalidMaxFileSize"):a.status,""===a.validationMessages.minSize&&""===a.validationMessages.maxSize||(a.statusCode="0",this.checkActionComplete(!0)),r.push(a)},e.prototype._internalRenderSelect=function(t,e){if(!t.cancel){if($()&&(this.currentRequestHeader=t.currentRequest,this.customFormDatas=t.customFormData),this.selectedFiles=e,this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",this.showFileList){if(t.isModified&&t.modifiedFilesData.length>0){for(var i=0;i<t.modifiedFilesData.length;i++)for(var n=0;n<e.length;n++)t.modifiedFilesData[i].id===e[n].id&&(t.modifiedFilesData[i].rawFile=e[n].rawFile);var r=this.allTypes?t.modifiedFilesData:this.checkExtension(t.modifiedFilesData);this.updateSortedFileList(r),this.filesData=r,this.isForm&&!this.allowUpload()||this.checkAutoUpload(r)}else this.createFileList(e,!0),this.isBlazorSaveUrl||this.isBlazorTemplate||(this.filesData=this.filesData.concat(e)),this.isForm&&!this.allowUpload()||this.isBlazorSaveUrl||this.isBlazorTemplate||this.checkAutoUpload(e);F(t.progressInterval)||""===t.progressInterval||(this.progressInterval=t.progressInterval)}else this.filesData=this.filesData.concat(e),this.isBlazorSaveUrl&&this.interopAdaptor.invokeMethodAsync("updateServerFileData",this.filesData,this.isForm),this.autoUpload&&this.upload(this.filesData,!0);this.raiseActionComplete()}},e.prototype.allowUpload=function(){var t=!1;return this.isForm&&!F(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(t=!0),t},e.prototype.isFormUpload=function(){var t=!1;return!this.isForm||!F(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl||!F(this.asyncSettings.removeUrl)&&""!==this.asyncSettings.removeUrl||(t=!0),t},e.prototype.clearData=function(t){F(this.listParent)||this.isBlazorSaveUrl||this.isBlazorTemplate||(ai(this.listParent),this.listParent=null),"msie"===this.browserName||t||(this.element.value=""),this.fileList=[],this.filesData=[],this.isBlazorSaveUrl||this.isBlazorTemplate?this.interopAdaptor.invokeMethodAsync("clearAll"):this.removeActionButtons()},e.prototype.updateSortedFileList=function(t){var e=this.createElement("div",{id:"clonewrapper"}),i=-1;if(this.listParent){for(var n=0;n<this.listParent.querySelectorAll("li").length;n++){var r=this.listParent.querySelectorAll("li")[n];e.appendChild(r.cloneNode(!0))}for(var o=0,s=this.listParent.querySelectorAll("li");o<s.length;o++){ai(s[o])}this.removeActionButtons();var a=[].slice.call(e.childNodes);ai(this.listParent),this.listParent=null,this.fileList=[],this.createParentUL();for(var l=0;l<t.length;l++){for(var h=0;h<this.filesData.length;h++)this.filesData[h].name===t[l].name&&(this.listParent.appendChild(a[h]),ee.add(a[h].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(a[h]),i=l);i!==l&&this.createFileList([t[l]])}}else this.createFileList(t)},e.prototype.isBlank=function(t){return!t||/^\s*$/.test(t)},e.prototype.checkExtension=function(t){var e=t;if(!this.isBlank(this.allowedExtensions)){for(var i=[],n=0,r=this.allowedExtensions.split(",");n<r.length;n++){var o=r[n];i.push(o.trim().toLocaleLowerCase())}for(var s=0;s<t.length;s++)-1===i.indexOf(("."+t[s].type).toLocaleLowerCase())&&(t[s].status=this.localizedTexts("invalidFileType"),t[s].statusCode="0")}return e},e.prototype.validatedFileSize=function(t){var e="",i="";return t<this.minFileSize?e=this.localizedTexts("invalidMinFileSize"):t>this.maxFileSize?i=this.localizedTexts("invalidMaxFileSize"):(e="",i=""),{minSize:e,maxSize:i}},e.prototype.isPreLoadFile=function(t){for(var e=!1,i=0;i<this.files.length;i++)this.files[i].name===t.name.slice(0,t.name.lastIndexOf("."))&&this.files[i].type===t.type&&(e=!0);return e},e.prototype.createCustomfileList=function(t){this.createParentUL(),Be(this.element.id+"Template");for(var e=0,i=t;e<i.length;e++){var n=i[e],r=this.createElement("li",{className:Ph,attrs:{"data-file-name":n.name}});this.uploadTemplateFn=this.templateComplier(this.template);var o=[].slice.call(this.uploadTemplateFn(n,null,null,this.element.id+"Template",this.isStringTemplate)),s=t.indexOf(n);oi(o,r);var a={element:r,fileInfo:n,index:s,isPreload:this.isPreLoadFile(n)},l={element:r,fileInfo:n,index:s,isPreload:this.isPreLoadFile(n)};this.trigger("rendering",a),this.trigger("fileListRendering",l),this.listParent.appendChild(r),this.fileList.push(r)}Ae(this.element.id+"Template","Template",this,!1)},e.prototype.createParentUL=function(){F(this.listParent)&&(this.listParent=this.createElement("ul",{className:"e-upload-files"}),this.uploadWrapper.appendChild(this.listParent))},e.prototype.formFileList=function(t,e){var i=this.createElement("li",{className:Ph});i.setAttribute("data-files-count",t.length+"");for(var n,r=this.createElement("span",{className:"e-file-container"}),o=0,s=t;o<s.length;o++){var a=s[o],l=this.createElement("span",{className:"e-file-name"});l.innerHTML=this.getFileNameOnly(a.name);var h=this.createElement("span",{className:"e-file-type"});if(h.innerHTML="."+this.getFileType(a.name),this.enableRtl){var c=this.createElement("span",{className:"e-rtl-container"});c.appendChild(h),c.appendChild(l),r.appendChild(c)}else r.appendChild(l),r.appendChild(h);this.truncateName(l),n=this.formValidateFileInfo(a,i)}i.appendChild(r),this.setListToFileInfo(t,i);var d=this.listParent.querySelectorAll("li").length,p=this.createElement("span");if(i.classList.contains("e-file-invalid")?(p.classList.add(Oh),p.classList.add("e-file-invalid"),p.innerText=t.length>1?this.localizedTexts("invalidFileSelection"):n):(p.classList.add(t.length>1?"e-file-information":"e-file-size"),p.innerText=t.length>1?this.localizedTexts("totalFiles")+": "+t.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(t)):this.bytesToSize(t[0].size),this.createFormInput(t)),r.appendChild(p),F(i.querySelector(".e-icons"))){var u=this.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&u.classList.add("e-msie"),u.setAttribute("title",this.localizedTexts("remove")),i.appendChild(r),i.appendChild(u),ee.add(u,"click",this.removeFiles,this),u.classList.add(Eh)}var f={element:i,fileInfo:this.mergeFileInfo(t,i),index:d,isPreload:this.isPreLoadFile(this.mergeFileInfo(t,i))},g={element:i,fileInfo:this.mergeFileInfo(t,i),index:d,isPreload:this.isPreLoadFile(this.mergeFileInfo(t,i))};this.trigger("rendering",f),this.trigger("fileListRendering",g),this.listParent.appendChild(i),this.fileList.push(i)},e.prototype.formValidateFileInfo=function(t,e){var i=t.status,n=this.validatedFileSize(t.size);""===n.minSize&&""===n.maxSize||(this.addInvalidClass(e),i=""!==n.minSize?this.localizedTexts("invalidMinFileSize"):""!==n.maxSize?this.localizedTexts("invalidMaxFileSize"):i);var r=this.checkExtension(this.getFilesInArray(t))[0].status;return r===this.localizedTexts("invalidFileType")&&(this.addInvalidClass(e),i=r),i},e.prototype.addInvalidClass=function(t){t.classList.add("e-file-invalid")},e.prototype.createFormInput=function(t){var e=this.element.cloneNode(!0);e.classList.add("e-hidden-file-input");for(var i=0,n=t;i<n.length;i++){n[i].input=e}e.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector(".e-file-select").appendChild(e),"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")},e.prototype.getFileSize=function(t){for(var e=0,i=0,n=t;i<n.length;i++){e+=n[i].size}return e},e.prototype.mergeFileInfo=function(t,e){for(var i={name:"",rawFile:"",size:0,status:"",type:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1",list:e},n=[],r="",o=0,s=t;o<s.length;o++){var a=s[o];n.push(a.name),r=a.type}return i.name=n.join(", "),i.size=this.getFileSize(t),i.type=r,i.status=this.statusForFormUpload(t,e),i},e.prototype.statusForFormUpload=function(t,e){for(var i,n=!0,r=0,o=t;r<o.length;r++){var s=o[r];i=s.status;var a=this.validatedFileSize(s.size);""===a.minSize&&""===a.maxSize||(n=!1,i=""!==a.minSize?this.localizedTexts("invalidMinFileSize"):""!==a.maxSize?this.localizedTexts("invalidMaxFileSize"):i);var l=this.checkExtension(this.getFilesInArray(s))[0].status;l===this.localizedTexts("invalidFileType")&&(n=!1,i=l)}return n?i=this.localizedTexts("totalFiles")+": "+t.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(t)):(e.classList.add("e-file-invalid"),i=t.length>1?this.localizedTexts("invalidFileSelection"):i),i},e.prototype.formCustomFileList=function(t,e){this.createParentUL(),Be(this.element.id+"Template");var i=this.createElement("li",{className:Ph});i.setAttribute("data-files-count",t.length+""),this.setListToFileInfo(t,i);var n=this.mergeFileInfo(t,i);i.setAttribute("data-file-name",n.name),this.uploadTemplateFn=this.templateComplier(this.template);var r=[].slice.call(this.uploadTemplateFn(n,null,null,this.element.id+"Template",this.isStringTemplate)),o=this.listParent.querySelectorAll("li").length;oi(r,i),i.classList.contains("e-file-invalid")||this.createFormInput(t);var s={element:i,fileInfo:n,index:o,isPreload:this.isPreLoadFile(n)},a={element:i,fileInfo:n,index:o,isPreload:this.isPreLoadFile(n)};this.trigger("rendering",s),this.trigger("fileListRendering",a),this.listParent.appendChild(i),this.fileList.push(i),Ae(this.element.id+"Template","Template",this,!1)},e.prototype.createFileList=function(t,e){if(this.isBlazorSaveUrl||this.isBlazorTemplate){var i=e?this.filesData=this.filesData.concat(t):t;this.interopAdaptor.invokeMethodAsync("createFileList",i,this.isForm)}else if(this.createParentUL(),""===this.template||F(this.template))if(this.isFormUpload())this.uploadWrapper.classList.add("e-form-upload"),this.formFileList(t,this.element.files);else for(var n=0,r=t;n<r.length;n++){var o=r[n],s=this.createElement("li",{className:Ph,attrs:{"data-file-name":o.name,"data-files-count":"1"}}),a=this.createElement("span",{className:"e-file-container"}),l=this.createElement("span",{className:"e-file-name",attrs:{title:o.name}});l.innerHTML=this.getFileNameOnly(o.name);var h=this.createElement("span",{className:"e-file-type"});if(h.innerHTML="."+this.getFileType(o.name),this.enableRtl){var c=this.createElement("span",{className:"e-rtl-container"});c.appendChild(h),c.appendChild(l),a.appendChild(c)}else a.appendChild(l),a.appendChild(h);var d=this.createElement("span",{className:"e-file-size"});d.innerHTML=this.bytesToSize(o.size),a.appendChild(d);var p=this.createElement("span",{className:Oh});a.appendChild(p),p.innerHTML=o.status,s.appendChild(a);var u=this.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&u.classList.add("e-msie"),u.setAttribute("title",this.localizedTexts("remove")),s.appendChild(u),ee.add(u,"click",this.removeFiles,this),"2"===o.statusCode?(p.classList.add(kh),u.classList.add(Lh),u.setAttribute("title",this.localizedTexts("delete"))):"1"!==o.statusCode&&(p.classList.remove(kh),p.classList.add("e-validation-fails")),this.autoUpload&&"1"===o.statusCode&&""!==this.asyncSettings.saveUrl&&(p.innerHTML=""),u.classList.contains(Lh)||u.classList.add(Eh);var f=t.indexOf(o),g={element:s,fileInfo:o,index:f,isPreload:this.isPreLoadFile(o)},m={element:s,fileInfo:o,index:f,isPreload:this.isPreLoadFile(o)};this.trigger("rendering",g),this.trigger("fileListRendering",m),this.listParent.appendChild(s),this.fileList.push(s),this.truncateName(l)}else this.isFormUpload()?(this.uploadWrapper.classList.add("e-form-upload"),this.formCustomFileList(t,this.element.files)):this.createCustomfileList(t)},e.prototype.getSlicedName=function(t){var e;e=t.textContent,t.dataset.tail=e.slice(e.length-10)},e.prototype.setListToFileInfo=function(t,e){for(var i=0,n=t;i<n.length;i++){n[i].list=e}},e.prototype.truncateName=function(t){var e=t;"edge"!==this.browserName&&e.offsetWidth<e.scrollWidth?this.getSlicedName(e):e.offsetWidth+1<e.scrollWidth&&this.getSlicedName(e)},e.prototype.getFileType=function(t){var e,i=t.lastIndexOf(".");return i>=0&&(e=t.substring(i+1)),e||""},e.prototype.getFileNameOnly=function(t){var e=this.getFileType(t);return t.split("."+e)[0]},e.prototype.setInitialAttributes=function(){if(this.initialAttr.accept&&this.element.setAttribute("accept",this.initialAttr.accept),this.initialAttr.disabled&&this.element.setAttribute("disabled","disabled"),this.initialAttr.multiple){var t=document.createAttribute("multiple");this.element.setAttributeNode(t)}},e.prototype.filterfileList=function(t){for(var e=[],i=0;i<t.length;i++)this.getLiElement(t[i]).classList.contains(kh)||e.push(t[i]);return e},e.prototype.updateStatus=function(t,e,i,n){if(void 0===n&&(n=!0),""!==e&&!F(e)&&""!==i&&!F(i))if(this.isBlazorSaveUrl)for(var r=0;r<this.filesData.length;r++)this.filesData[r].name===t.name&&(this.filesData[r].status=e,this.filesData[r].statusCode=i);else t.status=e,t.statusCode=i;if(n){var o=this.getLiElement(t);F(o)||F(o.querySelector("."+Oh))||""===e||F(e)||(o.querySelector("."+Oh).textContent=e)}return t},e.prototype.getLiElement=function(t){for(var e,i=0;i<this.filesData.length;i++)this.filesData[i].name===t.name&&(e=i);return this.fileList[e]},e.prototype.createProgressBar=function(t){var e=this.createElement("span",{className:Ah}),i=this.createElement("progressbar",{className:Bh,attrs:{value:"0",max:"100"}}),n=this.createElement("span",{className:"e-progress-inner-wrap"});i.setAttribute("style","width: 0%");var r=this.createElement("span",{className:"e-progress-bar-text"});r.textContent="0%",n.appendChild(i),e.appendChild(n),e.appendChild(r),t.querySelector(".e-file-container").appendChild(e)},e.prototype.updateProgressbar=function(t,e){if(!isNaN(Math.round(t.loaded/t.total*100))&&!F(e.querySelector("."+Bh)))if(F(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(e,Math.round(t.loaded/t.total*100).toString()+"%");else{var i=Math.round(t.loaded/t.total*100)%parseInt(this.progressInterval,10);0!==i&&100!==i||this.changeProgressValue(e,Math.round(t.loaded/t.total*100).toString()+"%")}},e.prototype.changeProgressValue=function(t,e){t.querySelector("."+Bh).setAttribute("style","width:"+e),t.querySelector(".e-progress-bar-text").textContent=e},e.prototype.uploadInProgress=function(t,e,i,n){var r=this.getLiElement(e);if(!F(r)||i){if(F(r))this.cancelUploadingFile(e,t,n);else{"5"===e.statusCode&&this.cancelUploadingFile(e,t,n,r),r.querySelectorAll("."+Ah).length>0||!r.querySelector("."+Oh)||(r.querySelector("."+Oh).classList.add("e-upload-progress"),this.createProgressBar(r),this.updateProgressBarClasses(r,"e-upload-progress"),r.querySelector("."+Oh).classList.remove(Mh)),this.updateProgressbar(t,r);var o=r.querySelector("."+Eh);F(o)||(o.classList.add(Ih,"e-upload-progress"),o.setAttribute("title",this.localizedTexts("abort")),o.classList.remove(Eh))}var s={e:t,operation:"upload",file:this.updateStatus(e,this.localizedTexts("inProgress"),"3")};this.trigger("progress",s)}},e.prototype.cancelUploadingFile=function(t,e,i,n){var r=this;if("5"===t.statusCode){var o={event:e,fileData:t,cancel:!1};this.trigger("canceling",o,function(e){if(e.cancel){if(t.statusCode="3",!F(n)){var o=n.querySelector("."+Ih);F(o)||(ea(o),ai(n.querySelector(".e-spinner-pane")))}}else{i.emitError=!1,i.httpRequest.abort();var s=new FormData;if("5"===t.statusCode){var a=r.element.getAttribute("name");s.append(a,t.name),s.append("cancel-uploading",t.name);var l=new Ut(r.asyncSettings.removeUrl,"POST",!0,null);l.emitError=!1,l.onLoad=function(e){return r.removecanceledFile(e,t),{}},l.send(s)}}})}},e.prototype.removecanceledFile=function(t,e){var i=this.getLiElement(e);if(!i.querySelector("."+Th)&&!F(i.querySelector("."+Ih))){this.updateStatus(e,this.localizedTexts("fileUploadCancel"),"5"),this.renderFailureState(t,e,i);var n=i.querySelector("."+Eh);F(i)||(ea(n),ai(i.querySelector(".e-spinner-pane")));var r={event:t,response:t&&t.currentTarget?this.getResponse(t):null,operation:"cancel",file:e};this.trigger("success",r)}},e.prototype.renderFailureState=function(t,e,i){var n=this;this.updateProgressBarClasses(i,Mh),this.removeProgressbar(i,"failure"),F(i.querySelector(".e-file-status"))||i.querySelector(".e-file-status").classList.add(Mh);var r=i.querySelector("."+Ih);F(r)||(r.classList.remove(Ih,"e-upload-progress"),r.classList.add(Eh),r.setAttribute("title",this.localizedTexts("remove")),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),r.parentElement.insertBefore(this.pauseButton,r),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),i.querySelector("."+Th).addEventListener("click",function(t){n.reloadcanceledFile(t,e,i,!1)},!1))},e.prototype.reloadcanceledFile=function(t,e,i,n){e.statusCode="1",e.status=this.localizedTexts("readyToUploadMessage"),n||(i.querySelector("."+Oh).classList.remove(Mh),F(i.querySelector("."+Th))||ai(i.querySelector("."+Th)),this.pauseButton=null),i.classList.add("e-restrict-retry"),this.upload([e])},e.prototype.uploadComplete=function(t,e,i){var n=t.target;if(4===n.readyState&&n.status>=200&&n.status<=299){var r=this.getLiElement(e);if(F(r)&&(!i||F(i)))return;if(!F(r)){this.updateProgressBarClasses(r,kh),this.removeProgressbar(r,"success");var o=r.querySelector("."+Ih);F(o)||(o.classList.add(Lh),o.setAttribute("title",this.localizedTexts("delete")),o.classList.remove(Ih),o.classList.remove("e-upload-progress"))}this.raiseSuccessEvent(t,e)}else this.uploadFailed(t,e)},e.prototype.getResponse=function(t){var e=t.currentTarget;return{readyState:e.readyState,statusCode:e.status,statusText:e.statusText,headers:e.getAllResponseHeaders(),withCredentials:e.withCredentials}},e.prototype.serverRemoveIconBindEvent=function(){if(this.uploadWrapper&&this.isBlazorSaveUrl)for(var t=[].slice.call(this.uploadWrapper.querySelectorAll("ul li")),e=0;e<t.length;e++){var i=t[e]?t[e].querySelector(".e-icons"):null;i&&(ee.remove(i,"click",this.removeFiles),ee.add(i,"click",this.removeFiles,this))}},e.prototype.raiseSuccessEvent=function(t,e){var i=this,n=t&&t.currentTarget?this.getResponse(t):null,r=this.localizedTexts("uploadSuccessMessage"),o={e:t,response:n,operation:"upload",file:this.updateStatus(e,r,"2",!1),statusText:r};if(!this.isBlazorSaveUrl){var s=this.getLiElement(e);if(!F(s)){var a=s.querySelector(".e-spinner-pane");F(a)||(ea(s),ai(a))}}this.trigger("success",o,function(t){i.updateStatus(e,t.statusText,"2"),i.uploadedFilesData.push(e),i.isBlazorSaveUrl||i.trigger("change",{file:i.uploadedFilesData}),i.checkActionButtonStatus(),i.fileList.length>0&&(i.getLiElement(e).classList.contains("e-restrict-retry")?i.getLiElement(e).classList.remove("e-restrict-retry"):(i.uploadSequential(),i.checkActionComplete(!0)))})},e.prototype.uploadFailed=function(t,e){var i=this,n=this.getLiElement(e),r=t&&t.currentTarget?this.getResponse(t):null,o=this.localizedTexts("uploadFailedMessage"),s={e:t,response:r,operation:"upload",file:this.updateStatus(e,o,"0",!1),statusText:o};F(n)||this.renderFailureState(t,e,n),this.trigger("failure",s,function(t){i.updateStatus(e,t.statusText,"0"),i.checkActionButtonStatus(),i.uploadSequential(),i.checkActionComplete(!0)})},e.prototype.uploadSequential=function(){this.sequentialUpload&&(this.autoUpload?this.checkAutoUpload(this.filesData):this.uploadButtonClick())},e.prototype.checkActionComplete=function(t){t?++this.actionCompleteCount:--this.actionCompleteCount,this.raiseActionComplete()},e.prototype.raiseActionComplete=function(){if(this.filesData.length===this.actionCompleteCount&&this.flag){this.flag=!1;var t={fileData:[]};t.fileData=this.getSelectedFileStatus(this.selectedFiles),this.trigger("actionComplete",t)}},e.prototype.getSelectedFileStatus=function(t){for(var e=[],i=0,n=0;n<t.length;n++)for(var r=t[n],o=0;o<this.filesData.length;o++)this.filesData[o].name===r.name&&(e[i]=this.filesData[o],++i);return e},e.prototype.updateProgressBarClasses=function(t,e){var i=t.querySelector("."+Bh);F(i)||i.classList.add(e)},e.prototype.removeProgressbar=function(t,e){var i=this;F(t.querySelector("."+Ah))||(this.progressAnimation=new Ji({duration:1250}),this.progressAnimation.animate(t.querySelector("."+Ah),{name:"FadeOut"}),this.progressAnimation.animate(t.querySelector(".e-progress-bar-text"),{name:"FadeOut"}),setTimeout(function(){i.animateProgressBar(t,e)},750))},e.prototype.animateProgressBar=function(t,e){"success"===e?(t.classList.add(kh),F(t.querySelector("."+Oh))||(t.querySelector("."+Oh).classList.remove("e-upload-progress"),this.progressAnimation.animate(t.querySelector("."+Oh),{name:"FadeIn"}),t.querySelector("."+Oh).classList.add(kh))):F(t.querySelector("."+Oh))||(t.querySelector("."+Oh).classList.remove("e-upload-progress"),this.progressAnimation.animate(t.querySelector("."+Oh),{name:"FadeIn"}),t.querySelector("."+Oh).classList.add(Mh)),t.querySelector("."+Ah)&&ai(t.querySelector("."+Ah))},e.prototype.setExtensions=function(t){""===t||F(t)?this.element.removeAttribute("accept"):this.element.setAttribute("accept",t)},e.prototype.templateComplier=function(t){if(t){try{if(document.querySelectorAll(t).length)return Te(document.querySelector(t).innerHTML.trim())}catch(e){return Te(t)}}},e.prototype.setRTL=function(){this.enableRtl?ti([this.uploadWrapper],"e-rtl"):ei([this.uploadWrapper],"e-rtl")},e.prototype.localizedTexts=function(t){return this.l10n.setLocale(this.locale),this.l10n.getConstant(t)},e.prototype.setControlStatus=function(){this.enabled?(this.uploadWrapper.classList.contains("e-disabled")&&this.uploadWrapper.classList.remove("e-disabled"),!F(this.browseButton)&&this.element.hasAttribute("disabled")&&(this.element.removeAttribute("disabled"),this.browseButton.removeAttribute("disabled")),!F(this.clearButton)&&this.clearButton.hasAttribute("disabled")&&this.clearButton.removeAttribute("disabled"),!F(this.uploadButton)&&this.uploadButton.hasAttribute("disabled")&&this.uploadButton.hasAttribute("disabled")):(this.uploadWrapper.classList.add("e-disabled"),this.element.setAttribute("disabled","disabled"),this.browseButton.setAttribute("disabled","disabled"),F(this.clearButton)||this.clearButton.setAttribute("disabled","disabled"),F(this.uploadButton)||this.uploadButton.setAttribute("disabled","disabled"))},e.prototype.checkHTMLAttributes=function(t){for(var e=0,i=t?F(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["accept","multiple","disabled"];e<i.length;e++){var n=i[e];if(!F(this.element.getAttribute(n)))switch(n){case"accept":(F(this.uploaderOptions)||void 0===this.uploaderOptions.allowedExtensions||t)&&(this.setProperties({allowedExtensions:this.element.getAttribute("accept")},!t),this.initialAttr.accept=this.allowedExtensions);break;case"multiple":if(F(this.uploaderOptions)||void 0===this.uploaderOptions.multiple||t){var r="multiple"===this.element.getAttribute(n)||""===this.element.getAttribute(n)||"true"===this.element.getAttribute(n);this.setProperties({multiple:r},!t),this.initialAttr.multiple=!0}break;case"disabled":if(F(this.uploaderOptions)||void 0===this.uploaderOptions.enabled||t){var o="disabled"!==this.element.getAttribute(n)&&""!==this.element.getAttribute(n)&&"true"!==this.element.getAttribute(n);this.setProperties({enabled:o},!t),this.initialAttr.disabled=!0}}}},e.prototype.chunkUpload=function(t,e,i){var n=Math.min(this.asyncSettings.chunkSize,t.size),r={chunkIndex:0,blob:t.rawFile.slice(0,n),file:t,start:0,end:n,retryCount:0,request:null};this.sendRequest(t,r,e,i)},e.prototype.sendRequest=function(t,e,i,n){var r=this,o=new FormData,s=t.rawFile.slice(e.start,e.end);o.append("chunkFile",s,t.name),o.append(this.uploaderName,s,t.name),o.append("chunk-index",e.chunkIndex.toString()),o.append("chunkIndex",e.chunkIndex.toString());var a=Math.max(Math.ceil(t.size/this.asyncSettings.chunkSize),1);o.append("total-chunk",a.toString()),o.append("totalChunk",a.toString());var l=new Ut({url:this.asyncSettings.saveUrl,type:"POST",async:!0,contentType:null});l.emitError=!1,l.onLoad=function(t){return r.chunkUploadComplete(t,e,i),{}},l.onUploadProgress=function(t){return r.chunkUploadInProgress(t,e,i),{}};var h={fileData:t,customFormData:[],cancel:!1,chunkSize:0===this.asyncSettings.chunkSize?null:this.asyncSettings.chunkSize};l.beforeSend=function(i){h.currentRequest=l.httpRequest,h.currentChunkIndex=e.chunkIndex,$()&&(r.currentRequestHeader&&r.updateCustomheader(l.httpRequest,r.currentRequestHeader),r.customFormDatas&&r.updateFormData(o,r.customFormDatas)),0===h.currentChunkIndex?r.trigger("uploading",h,function(e){r.uploadingEventCallback(o,e,i,t)}):r.trigger("chunkUploading",h,function(e){r.uploadingEventCallback(o,e,i,t)})},l.onError=function(t){return r.chunkUploadFailed(t,e,i),{}},l.send(o),e.request=l},e.prototype.uploadingEventCallback=function(t,e,i,n){e.cancel?this.eventCancelByArgs(i,e,n):this.updateFormData(t,e.customFormData)},e.prototype.eventCancelByArgs=function(t,e,i){var n=this;if(t.cancel=!0,"5"!==e.fileData.statusCode){var r=this.getLiElement(e.fileData);r.querySelector("."+Oh).innerHTML=this.localizedTexts("fileUploadCancel"),r.querySelector("."+Oh).classList.add(Mh),e.fileData.statusCode="5",e.fileData.status=this.localizedTexts("fileUploadCancel"),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});var o=r.querySelector("."+Eh);o.parentElement.insertBefore(this.pauseButton,o),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.addEventListener("click",function(t){n.reloadcanceledFile(t,i,r)},!1),this.checkActionButtonStatus()}},e.prototype.checkChunkUpload=function(){return!(this.asyncSettings.chunkSize<=0||F(this.asyncSettings.chunkSize))},e.prototype.chunkUploadComplete=function(t,e,i){var n,r=this,o=t.target;if(4===o.readyState&&o.status>=200&&o.status<300){var s=t&&t.currentTarget?this.getResponse(t):null,a=Math.max(Math.ceil(e.file.size/this.asyncSettings.chunkSize),1),l={event:t,file:e.file,chunkIndex:e.chunkIndex,totalChunk:a,chunkSize:this.asyncSettings.chunkSize,response:s};if(this.trigger("chunkSuccess",l),!F(i)&&i||(n=this.getLiElement(e.file)),this.updateMetaData(e),e.end===e.file.size&&(e.file.statusCode="3"),"5"===e.file.statusCode){var h={event:t,fileData:e.file,cancel:!1};this.trigger("canceling",h,function(t){if(t.cancel){e.file.statusCode="3";var s=n.querySelector("."+Ih);F(n)||F(s)||(ea(s),ai(n.querySelector(".e-spinner-pane"))),r.sendNextRequest(e)}else{e.request.emitError=!1,o.abort();var a=new FormData,l=r.element.getAttribute("name");a.append(l,e.file.name),a.append("cancel-uploading",e.file.name),a.append("cancelUploading",e.file.name);var h=new Ut(r.asyncSettings.removeUrl,"POST",!0,null);h.emitError=!1,h.onLoad=function(t){return r.removeChunkFile(t,e,i),{}},h.send(a)}})}else{if(a-1===e.chunkIndex&&a>e.chunkIndex){var c=this.pausedData.indexOf(e);return c>=0&&this.pausedData.splice(c,1),F(this.template)&&(F(i)||!i)&&n&&(n&&ai(n.querySelector("."+Dh)),this.removeChunkProgressBar(e)),void this.raiseSuccessEvent(t,e.file)}this.sendNextRequest(e)}}else this.chunkUploadFailed(t,e)},e.prototype.sendNextRequest=function(t){t.start=t.end,t.end+=this.asyncSettings.chunkSize,t.end=Math.min(t.end,t.file.size),t.chunkIndex+=1,this.sendRequest(t.file,t)},e.prototype.removeChunkFile=function(t,e,i){if(F(this.template)&&F(i)&&!i){var n=this.getLiElement(e.file),r=n.querySelector("."+Ih),o=r;this.updateStatus(e.file,this.localizedTexts("fileUploadCancel"),"5"),this.updateProgressBarClasses(n,Mh),this.removeProgressbar(n,"failure"),r.classList.remove(Ih),r.classList.add(Eh),r.setAttribute("title",this.localizedTexts("remove"));var s=n.querySelector("."+Dh);s.classList.add(Th),s.classList.remove(Dh),s.setAttribute("title",this.localizedTexts("retry")),F(n)||F(r)||(ea(o),ai(n.querySelector(".e-spinner-pane")))}},e.prototype.pauseUpload=function(t,e,i){t.file.statusCode="4",t.file.status=this.localizedTexts("pause"),this.updateMetaData(t);var n={event:e||null,file:t.file,chunkIndex:t.chunkIndex,chunkCount:Math.round(t.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.abortUpload(t,i,n)},e.prototype.abortUpload=function(t,e,i){t.request.emitError=!1,t.request.httpRequest.abort();var n=this.getLiElement(t.file);if(F(this.template)&&(F(e)||!e)){var r=n.querySelector("."+Dh);r.classList.remove(Dh),r.classList.add("e-file-play-btn"),r.setAttribute("title",this.localizedTexts("resume")),r.nextElementSibling.classList.add(Eh),r.nextElementSibling.classList.remove(Ih),r.nextElementSibling.setAttribute("title",this.localizedTexts("remove"))}for(var o=0;o<this.pausedData.length;o++)this.pausedData[o].file.name===t.file.name&&this.pausedData.splice(o,1);this.pausedData.push(t),this.trigger("pausing",i)},e.prototype.resumeUpload=function(t,e,i){var n,r=this.getLiElement(t.file);F(r)||(n=r.querySelector(".e-file-play-btn")),F(n)||!F(i)&&i||(n.classList.remove("e-file-play-btn"),n.classList.add(Dh),n.setAttribute("title",this.localizedTexts("pause")),n.nextElementSibling.classList.remove(Eh),n.nextElementSibling.classList.add(Ih),n.nextElementSibling.setAttribute("title",this.localizedTexts("abort"))),t.file.status=this.localizedTexts("inProgress"),t.file.statusCode="3",this.updateMetaData(t);var o={event:e||null,file:t.file,chunkIndex:t.chunkIndex,chunkCount:Math.round(t.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.trigger("resuming",o);for(var s=0;s<this.pausedData.length;s++)this.pausedData[s].end===this.pausedData[s].file.size?this.chunkUploadComplete(e,t,i):this.pausedData[s].file.name===t.file.name&&(this.pausedData[s].start=this.pausedData[s].end,this.pausedData[s].end=this.pausedData[s].end+this.asyncSettings.chunkSize,this.pausedData[s].end=Math.min(this.pausedData[s].end,this.pausedData[s].file.size),this.pausedData[s].chunkIndex=this.pausedData[s].chunkIndex+1,this.sendRequest(this.pausedData[s].file,this.pausedData[s],i))},e.prototype.updateMetaData=function(t){-1===this.uploadMetaData.indexOf(t)?this.uploadMetaData.push(t):(this.uploadMetaData.splice(this.uploadMetaData.indexOf(t),1),this.uploadMetaData.push(t))},e.prototype.removeChunkProgressBar=function(t){var e=this.getLiElement(t.file);if(!F(e)){this.updateProgressBarClasses(e,kh),this.removeProgressbar(e,"success");var i=e.querySelector("."+Ih);F(i)||(i.classList.add(Lh),i.setAttribute("title",this.localizedTexts("delete")),i.classList.remove(Ih,"e-upload-progress"))}},e.prototype.chunkUploadFailed=function(t,e,i){var n,r=this,o=Math.max(Math.ceil(e.file.size/this.asyncSettings.chunkSize),1);!F(this.template)||!F(i)&&i||(n=this.getLiElement(e.file));var s=t&&t.currentTarget?this.getResponse(t):null,a={event:t,file:e.file,chunkIndex:e.chunkIndex,totalChunk:o,chunkSize:this.asyncSettings.chunkSize,cancel:!1,response:s};this.trigger("chunkFailure",a,function(o){if(!o.cancel)if(e.retryCount<r.asyncSettings.retryCount)setTimeout(function(){r.retryRequest(n,e,i)},r.asyncSettings.retryAfterDelay);else{if(!F(n)){var a=n.querySelector("."+Dh)?n.querySelector("."+Dh):n.querySelector(".e-file-play-btn");F(a)||(a.classList.add(Th),a.classList.remove(Dh,"e-file-play-btn")),r.updateProgressBarClasses(n,Mh),r.removeProgressbar(n,"failure"),n.querySelector(".e-icons").classList.remove("e-upload-progress");var l=n.querySelector("."+Ih)?n.querySelector("."+Ih):n.querySelector("."+Eh);l.classList.remove(Ih),F(n.querySelector("."+Dh))||ai(n.querySelector("."+Dh)),e.start>0?(l.classList.add(Lh),l.setAttribute("title",r.localizedTexts("delete"))):(l.classList.add(Eh),l.setAttribute("title",r.localizedTexts("remove")))}e.retryCount=0;var h=e.file,c=r.localizedTexts("uploadFailedMessage"),d={e:t,response:s,operation:"upload",file:r.updateStatus(h,c,"0",!1),statusText:c};r.trigger("failure",d,function(t){r.updateStatus(h,t.statusText,"0"),r.uploadSequential(),r.checkActionComplete(!0)})}})},e.prototype.retryRequest=function(t,e,i){F(this.template)&&(F(i)||!i)&&t&&this.updateProgressBarClasses(t,Mh),e.retryCount+=1,this.sendRequest(e.file,e)},e.prototype.checkPausePlayAction=function(t){var e=t.target,i=t.target.parentElement,n=this.fileList.indexOf(i),r=this.filesData[n],o=this.getCurrentMetaData(r);e.classList.contains(Dh)?this.pauseUpload(o,t):e.classList.contains("e-file-play-btn")?this.resumeUpload(o,t):e.classList.contains(Th)&&(o.file.status===this.localizedTexts("fileUploadCancel")?this.retryUpload(o,!1):this.retryUpload(o,!0))},e.prototype.retryUpload=function(t,e){e?(t.end=t.end+this.asyncSettings.chunkSize,t.start=t.start+this.asyncSettings.chunkSize,this.sendRequest(t.file,t)):(t.file.statusCode="1",t.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(t.file)),this.getLiElement(t.file).classList.add("e-restrict-retry")},e.prototype.chunkUploadInProgress=function(t,e,i){var n=this;if("4"!==e.file.statusCode){"4"!==e.file.statusCode&&"5"!==e.file.statusCode&&(e.file.statusCode="3",e.file.status=this.localizedTexts("inProgress")),this.updateMetaData(e);var r=this.getLiElement(e.file);if(!F(r)){var o=r.querySelector("."+Th);if(F(o)||(o.classList.add(Dh),o.setAttribute("title",this.localizedTexts("pause")),o.classList.remove(Th)),!F(r)){if(!(r.querySelectorAll("."+Ah).length>0)){var s=r.querySelector("."+Oh);F(this.template)&&(s.classList.add("e-upload-progress"),s.classList.remove(Mh),this.createProgressBar(r),this.updateProgressBarClasses(r,"e-upload-progress"));var a=r.querySelector("."+Eh)?r.querySelector("."+Eh):r.querySelector("."+Lh);F(a)||(a.classList.add(Ih),a.setAttribute("title",this.localizedTexts("abort")),a.classList.remove(Eh))}if(!isNaN(Math.round(t.loaded/t.total*100))&&F(this.template)&&"4"!==e.file.statusCode){var l=e.chunkIndex*this.asyncSettings.chunkSize,h=Math.min((l+t.loaded)/e.file.size*100,100);this.changeProgressValue(r,Math.round(h).toString()+"%")}0===e.chunkIndex&&this.checkActionButtonStatus()}if(F(r.querySelector("."+Dh))&&F(this.template)){this.pauseButton=this.createElement("span",{className:"e-icons e-file-pause-btn",attrs:{tabindex:this.btnTabIndex}}),"msie"===this.browserName&&this.pauseButton.classList.add("e-msie");var c=r.querySelector("."+Ih);c.parentElement.insertBefore(this.pauseButton,c),this.pauseButton.setAttribute("title",this.localizedTexts("pause")),this.pauseButton.addEventListener("click",function(t){n.checkPausePlayAction(t)},!1)}}}},e.prototype.bytesToSize=function(t){var e=-1;if(!t)return"0.0 KB";do{t/=1024,e++}while(t>99);return e>=2&&(t*=1024,e=1),Math.max(t,0).toFixed(1)+" "+["KB","MB"][e]},e.prototype.sortFileList=function(t){for(var e=t=t||this.sortFilesList,i=[],n=0;n<e.length;n++)i.push(e[n].name);for(var r=[],o=0,s=i.sort();o<s.length;o++){var a=s[o];for(n=0;n<e.length;n++)a===e[n].name&&r.push(e[n])}return r},e.prototype.destroy=function(){this.element.value=null,this.isBlazorSaveUrl||this.isBlazorTemplate||this.clearAll(),this.unWireEvents(),this.unBindDropEvents(),this.multiple&&this.element.removeAttribute("multiple"),this.enabled||this.element.removeAttribute("disabled"),this.element.removeAttribute("accept"),this.setInitialAttributes();for(var e=0,i=["aria-label","directory","webkitdirectory","tabindex"];e<i.length;e++){var n=i[e];this.element.removeAttribute(n)}this.isServerBlazor?this.uploadWrapper=null:(F(this.uploadWrapper)||(this.uploadWrapper.parentElement.appendChild(this.element),ai(this.uploadWrapper)),this.uploadWrapper=null,t.prototype.destroy.call(this))},e.prototype.upload=function(t,e){var i=this;t=t||this.filesData;var n=this.getFilesInArray(t);this.trigger("beforeUpload",{customFormData:[],currentRequest:null,cancel:!1},function(t){t.cancel||($()&&(i.currentRequestHeader=t.currentRequest?t.currentRequest:i.currentRequestHeader,i.customFormDatas=t.customFormData&&t.customFormData.length>0?t.customFormData:i.customFormDatas),i.uploadFiles(n,e))})},e.prototype.getFilesInArray=function(t){var e=[];return t instanceof Array?e=t:e.push(t),e},e.prototype.serverReadFileBase64=function(t,e,i){var n=this;return new Promise(function(r,o){var s,a=n.fileStreams[t].rawFile;try{var l=new FileReader;l.onload=(s=l,function(){try{var t=s.result,e=t?t.split(";base64,")[1]:null;r(e)}catch(t){o(t)}}),l.readAsDataURL(a.slice(e,e+i))}catch(t){o(t)}})},e.prototype.uploadFileCount=function(t){var e=this.filesData;return e&&0!==e.length?e.length:-1},e.prototype.getFileRead=function(t,e){var i=this.filesData;if(!i||0===i.length)return-1;var n=i[t],r=this.newFileRef++;return this.fileStreams[r]=n,r},e.prototype.getFileInfo=function(t,e){var i=this.filesData;return i&&0!==i.length&&i[t]?this.filesData[t]:null},e.prototype.uploadFiles=function(t,e){var i=this,n=[];if(""===this.asyncSettings.saveUrl||F(this.asyncSettings.saveUrl))this.isServerBlazor&&this.interopAdaptor.invokeMethodAsync("GetFileDetails",t);else{if(!e||F(e))if(this.multiple)n=this.filterfileList(t);else{var r=[];r.push(t[0]),n=this.filterfileList(r)}else n=t;for(var o=function(t){s.isServerBlazor&&!s.checkChunkUpload()?n[t]&&n[t].rawFile instanceof File&&s.getBase64(n[t].rawFile).then(function(r){i.base64String.push(r),i.uploadFilesRequest(n,t,e)}):s.uploadFilesRequest(n,t,e)},s=this,a=0;a<n.length;a++)o(a)}},e.prototype.uploadFilesRequest=function(t,e,i){var n,r=this,o=[],s=this.checkChunkUpload(),a=new Ut(this.asyncSettings.saveUrl,"POST",!0,null);a.emitError=!1,this.isServerBlazor&&(n=t.slice(0),o.push(n[e].rawFile));var l={fileData:this.isServerBlazor?n[e]:t[e],customFormData:[],cancel:!1},h=new FormData;if(a.beforeSend=function(i){l.currentRequest=a.httpRequest,$()&&(l.fileData.rawFile=s?l.fileData.rawFile:r.base64String[e],r.currentRequestHeader&&r.updateCustomheader(a.httpRequest,r.currentRequestHeader),r.customFormDatas&&r.updateFormData(h,r.customFormDatas)),r.trigger("uploading",l,function(n){r.isServerBlazor&&!s&&(t[e].rawFile=n.fileData.rawFile=o[e]),n.cancel&&r.eventCancelByArgs(i,n,t[e]),r.updateFormData(h,n.customFormData)})},"1"===t[e].statusCode){var c=this.element.getAttribute("name");h.append(c,t[e].rawFile,t[e].name),s&&t[e].size>this.asyncSettings.chunkSize?this.chunkUpload(t[e],i,e):(a.onLoad=function(n){return l.cancel&&r.isServerBlazor?{}:(r.uploadComplete(n,t[e],i),{})},a.onUploadProgress=function(n){return l.cancel&&r.isServerBlazor?{}:(r.uploadInProgress(n,t[e],i,a),{})},a.onError=function(i){return r.uploadFailed(i,t[e]),{}},a.send(h))}},e.prototype.spliceFiles=function(t){for(var e=this.fileList[t],i=this.getFilesData(),n=+e.getAttribute("data-files-count"),r=0,o=0;o<t;o++)r+=+this.fileList[o].getAttribute("data-files-count");for(var s=r+n-1;s>=r;s--)i.splice(s,1)},e.prototype.remove=function(t,e,i,n,r){var o=this;F(n)&&(n=!0);var s={event:r,cancel:!1,filesData:[],customFormData:[],postRawFile:n,currentRequest:null};this.trigger("beforeRemove",{cancel:!1,customFormData:[],currentRequest:null},function(n){if(!n.cancel){$()&&(o.currentRequestHeader=n.currentRequest,o.customFormDatas=n.customFormData);var r=void 0;if(o.isFormUpload()&&!o.isBlazorSaveUrl)s.filesData=t,o.trigger("removing",s,function(e){if(!e.cancel)for(var i=!1,n=void 0,r=0,s=o.getFilesInArray(t);r<s.length;r++){var a=s[r];if(i||(n=o.fileList.indexOf(a.list)),n>-1){var l=F(a.input)?null:a.input;l&&ai(l),o.spliceFiles(n),ai(o.fileList[n]),o.fileList.splice(n,1),i=!0,n=-1}}});else if(!o.isForm||!F(o.asyncSettings.removeUrl)&&""!==o.asyncSettings.removeUrl||o.isBlazorSaveUrl){var a=[];(t=F(t)?o.filesData:t)instanceof Array?a=t:a.push(t),s.filesData=a;for(var l=o.asyncSettings.removeUrl,h=""!==l&&!F(l),c=function(t){r=o.filesData.indexOf(t),"2"!==t.statusCode&&"4"!==t.statusCode||!h?i?o.removeFilesData(t,e):o.trigger("removing",s,function(i){i.cancel||o.removeFilesData(t,e)}):o.removeUploadedFile(t,s,i,e),o.sequentialUpload?r<=o.actionCompleteCount&&o.checkActionComplete(!1):o.checkActionComplete(!1)},d=0,p=a;d<p.length;d++){c(p[d])}}else s.filesData=o.getFilesData(),o.trigger("removing",s,function(t){t.cancel||o.clearAll()})}})},e.prototype.clearAll=function(){var t=this;if(F(this.listParent)&&!this.isBlazorSaveUrl&&!this.isBlazorTemplate)return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);var e={cancel:!1,filesData:this.filesData};this.trigger("clearing",e,function(e){e.cancel||(t.clearData(),t.actionCompleteCount=0,t.count=-1)})},e.prototype.getFilesData=function(t){if(this.isServerBlazor){for(var e=0;e<this.filesData.length;e++)this.filesData[e].rawFile=this.base64String[e];return this.filesData}return F(t)?this.filesData:this.getSelectedFiles(t)},e.prototype.pause=function(t,e){t=t||this.filesData;var i=this.getFilesInArray(t);this.pauseUploading(i,e)},e.prototype.pauseUploading=function(t,e){for(var i=this.getFiles(t),n=0;n<i.length;n++)"3"===i[n].statusCode&&this.pauseUpload(this.getCurrentMetaData(i[n],null),null,e)},e.prototype.getFiles=function(t){var e=[];return F(t)||t instanceof Array?e=t:e.push(t),e},e.prototype.resume=function(t,e){t=t||this.filesData;var i=this.getFilesInArray(t);this.resumeFiles(i,e)},e.prototype.resumeFiles=function(t,e){for(var i=this.getFiles(t),n=0;n<i.length;n++)"4"===i[n].statusCode&&this.resumeUpload(this.getCurrentMetaData(i[n],null),null,e)},e.prototype.retry=function(t,e,i){t=t||this.filesData;var n=this.getFilesInArray(t);this.retryFailedFiles(n,e,i)},e.prototype.retryFailedFiles=function(t,e,i){for(var n=this.getFiles(t),r=0;r<n.length;r++)if("5"===n[r].statusCode||"0"===n[r].statusCode)if(this.asyncSettings.chunkSize>0)this.retryUpload(this.getCurrentMetaData(n[r],null),e);else{var o=void 0;i||(o=this.fileList[this.filesData.indexOf(n[r])]),this.reloadcanceledFile(null,n[r],o,i)}},e.prototype.cancel=function(t){t=t||this.filesData;var e=this.getFilesInArray(t);this.cancelUpload(e)},e.prototype.cancelUpload=function(t){var e=this.getFiles(t);if(this.asyncSettings.chunkSize>0){for(var i=0;i<e.length;i++)if("3"===e[i].statusCode){var n=this.getCurrentMetaData(e[i],null);n.file.statusCode="5",n.file.status=this.localizedTexts("fileUploadCancel"),this.updateMetaData(n),this.showHideUploadSpinner(e[i])}}else for(i=0;i<e.length;i++)"3"===e[i].statusCode&&(e[i].statusCode="5",e[i].status=this.localizedTexts("fileUploadCancel"),this.showHideUploadSpinner(e[i]))},e.prototype.showHideUploadSpinner=function(t){var e=this.getLiElement(t);if(!F(e)&&F(this.template)){var i=e.querySelector("."+Ih);_s({target:i,width:"20px"}),$s(i)}},Ch([_i({saveUrl:"",removeUrl:""},Nh)],e.prototype,"asyncSettings",void 0),Ch([Hi(!1)],e.prototype,"sequentialUpload",void 0),Ch([Hi({})],e.prototype,"htmlAttributes",void 0),Ch([Hi("")],e.prototype,"cssClass",void 0),Ch([Hi(!0)],e.prototype,"enabled",void 0),Ch([Hi(null)],e.prototype,"template",void 0),Ch([Hi(!0)],e.prototype,"multiple",void 0),Ch([Hi(!0)],e.prototype,"autoUpload",void 0),Ch([_i({},jh)],e.prototype,"buttons",void 0),Ch([Hi("")],e.prototype,"allowedExtensions",void 0),Ch([Hi(0)],e.prototype,"minFileSize",void 0),Ch([Hi(3e7)],e.prototype,"maxFileSize",void 0),Ch([Hi(null)],e.prototype,"dropArea",void 0),Ch([Fi([{}],zh)],e.prototype,"files",void 0),Ch([Hi(!0)],e.prototype,"showFileList",void 0),Ch([Hi(!1)],e.prototype,"directoryUpload",void 0),Ch([Hi("Default")],e.prototype,"dropEffect",void 0),Ch([Ui()],e.prototype,"created",void 0),Ch([Ui()],e.prototype,"actionComplete",void 0),Ch([Ui()],e.prototype,"rendering",void 0),Ch([Ui()],e.prototype,"beforeUpload",void 0),Ch([Ui()],e.prototype,"fileListRendering",void 0),Ch([Ui()],e.prototype,"selected",void 0),Ch([Ui()],e.prototype,"uploading",void 0),Ch([Ui()],e.prototype,"success",void 0),Ch([Ui()],e.prototype,"failure",void 0),Ch([Ui()],e.prototype,"removing",void 0),Ch([Ui()],e.prototype,"beforeRemove",void 0),Ch([Ui()],e.prototype,"clearing",void 0),Ch([Ui()],e.prototype,"progress",void 0),Ch([Ui()],e.prototype,"change",void 0),Ch([Ui()],e.prototype,"chunkSuccess",void 0),Ch([Ui()],e.prototype,"chunkFailure",void 0),Ch([Ui()],e.prototype,"chunkUploading",void 0),Ch([Ui()],e.prototype,"canceling",void 0),Ch([Ui()],e.prototype,"pausing",void 0),Ch([Ui()],e.prototype,"resuming",void 0),e=Ch([Gi],e)}(un),_h=(function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),""),Vh="",Fh=[],Wh="e-active",Uh="";var Gh,qh=function(){function t(t){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"==typeof t?this.fromTable=t:t&&t instanceof Array&&(this.lookups=t),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this}return t.prototype.setKey=function(t){return this.key=t,this},t.prototype.using=function(t){return this.dataManager=t,this},t.prototype.execute=function(t,e,i,n){return(t=t||this.dataManager)?t.executeQuery(this,e,i,n):Zh.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},t.prototype.executeLocal=function(t){return(t=t||this.dataManager)?t.executeLocal(this):Zh.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},t.prototype.clone=function(){var e=new t;return e.queries=this.queries.slice(0),e.key=this.key,e.isChild=this.isChild,e.dataManager=this.dataManager,e.fromTable=this.fromTable,e.params=this.params.slice(0),e.expands=this.expands.slice(0),e.sortedColumns=this.sortedColumns.slice(0),e.groupedColumns=this.groupedColumns.slice(0),e.subQuerySelector=this.subQuerySelector,e.subQuery=this.subQuery,e.fKey=this.fKey,e.isCountRequired=this.isCountRequired,e.distincts=this.distincts.slice(0),e},t.prototype.from=function(t){return this.fromTable=t,this},t.prototype.addParams=function(t,e){return"function"==typeof e?this.params.push({key:t,fn:e}):this.params.push({key:t,value:e}),this},t.prototype.distinct=function(t){return this.distincts="string"==typeof t?[].slice.call([t],0):t.slice(0),this},t.prototype.expand=function(t){return this.expands="string"==typeof t?[].slice.call([t],0):t.slice(0),this},t.prototype.where=function(t,e,i,n,r){e=e?e.toLowerCase():null;var o=null;return"string"==typeof t?o=new Xh(t,e,i,n,r):t instanceof Xh&&(o=t),this.queries.push({fn:"onWhere",e:o}),this},t.prototype.search=function(t,e,i,n,r){"string"==typeof e&&(e=[e]),i&&"none"!==i||(i="contains");var o=Zh.fnOperators[i];return this.queries.push({fn:"onSearch",e:{fieldNames:e,operator:i,searchKey:t,ignoreCase:n,ignoreAccent:r,comparer:o}}),this},t.prototype.sortBy=function(e,i,n){var r,o,s="ascending";if("string"==typeof e&&Zh.endsWith(e.toLowerCase()," desc")&&(e=e.replace(/ desc$/i,""),i="descending"),i&&"string"!=typeof i||(s=i?i.toLowerCase():"ascending",i=Zh.fnSort(i)),n){r=t.filterQueries(this.queries,"onSortBy");for(var a=0;a<r.length;a++)if("string"==typeof(o=r[a].e.fieldName)){if(o===e)return this}else if(o instanceof Array)for(var l=0;l<o.length;l++)if(o[l]===e||e.toLowerCase()===o[l]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:i,direction:s}}),this},t.prototype.sortByDesc=function(t){return this.sortBy(t,"descending")},t.prototype.group=function(t,e,i){return this.sortBy(t,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:t,comparer:e||null,format:i||null}}),this},t.prototype.page=function(t,e){return this.queries.push({fn:"onPage",e:{pageIndex:t,pageSize:e}}),this},t.prototype.range=function(t,e){return this.queries.push({fn:"onRange",e:{start:t,end:e}}),this},t.prototype.take=function(t){return this.queries.push({fn:"onTake",e:{nos:t}}),this},t.prototype.skip=function(t){return this.queries.push({fn:"onSkip",e:{nos:t}}),this},t.prototype.select=function(t){return"string"==typeof t&&(t=[].slice.call([t],0)),this.queries.push({fn:"onSelect",e:{fieldNames:t}}),this},t.prototype.hierarchy=function(t,e){return this.subQuerySelector=e,this.subQuery=t,this},t.prototype.foreignKey=function(t){return this.fKey=t,this},t.prototype.requiresCount=function(){return this.isCountRequired=!0,this},t.prototype.aggregate=function(t,e){return this.queries.push({fn:"onAggregates",e:{field:e,type:t}}),this},t.filterQueries=function(t,e){return t.filter(function(t){return t.fn===e})},t.filterQueryLists=function(t,e){for(var i=t.filter(function(t){return-1!==e.indexOf(t.fn)}),n={},r=0;r<i.length;r++)n[i[r].fn]||(n[i[r].fn]=i[r].e);return n},t}(),Xh=function(){function t(e,i,n,r,o){return void 0===r&&(r=!1),this.ignoreAccent=!1,this.isComplex=!1,"string"==typeof e?(this.field=e,this.operator=i.toLowerCase(),this.value=n,this.ignoreCase=r,this.ignoreAccent=o,this.isComplex=!1,this.comparer=Zh.fnOperators.processOperator(this.operator)):(e instanceof t&&n instanceof t||n instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[e],n instanceof Array?[].push.apply(this.predicates,n):this.predicates.push(n)),this}return t.and=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.combinePredicates([].slice.call(e,0),"and")},t.prototype.and=function(e,i,n,r,o){return t.combine(this,e,i,n,"and",r,o)},t.or=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.combinePredicates([].slice.call(e,0),"or")},t.prototype.or=function(e,i,n,r,o){return t.combine(this,e,i,n,"or",r,o)},t.fromJson=function(t){if(t instanceof Array){for(var e=[],i=0,n=t.length;i<n;i++)e.push(this.fromJSONData(t[i]));return e}var r=t;return this.fromJSONData(r)},t.prototype.validate=function(t){var e,i,n=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.comparer.call(this,Zh.getObject(this.field,t),this.value,this.ignoreCase,this.ignoreAccent);e="and"===this.condition;for(var r=0;r<n.length;r++)if(i=n[r].validate(t),e){if(!i)return!1}else if(i)return!0;return e},t.prototype.toJson=function(){var t,e;if(this.isComplex){t=[],e=this.predicates;for(var i=0;i<e.length;i++)t.push(e[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:t}},t.combinePredicates=function(e,i){if(1===e.length){if(!(e[0]instanceof Array))return e[0];e=e[0]}return new t(e[0],i,e.slice(1))},t.combine=function(e,i,n,r,o,s,a){return i instanceof t?t[o](e,i):"string"==typeof i?t[o](e,new t(i,n,r,s,a)):Zh.throwError("Predicate - "+o+" : invalid arguments")},t.fromJSONData=function(e){for(var i=e.predicates||[],n=i.length,r=[],o=0;o<n;o++)r.push(this.fromJSONData(i[o]));return e.isComplex?new t(r[0],e.condition,r.slice(1)):new t(e.field,e.operator,e.value,e.ignoreCase,e.ignoreAccent)},t}(),Yh={GroupGuid:"{271bbba0-1ee7}"},Zh=function(){function t(){}return t.getValue=function(t,e){return"function"==typeof t?t.call(e||{}):t},t.endsWith=function(t,e){return t.slice&&t.slice(-e.length)===e},t.startsWith=function(t,e){return t.slice(0,e.length)===e},t.fnSort=function(e){return"ascending"===(e=e?t.toLowerCase(e):"ascending")?this.fnAscending:this.fnDescending},t.fnAscending=function(t,e){return F(t)&&F(e)?-1:null==e?-1:"string"==typeof t?t.localeCompare(e):null==t?1:t-e},t.fnDescending=function(t,e){return F(t)&&F(e)?-1:null==e?1:"string"==typeof t?-1*t.localeCompare(e):null==t?-1:e-t},t.extractFields=function(t,e){for(var i={},n=0;n<e.length;n++)i=this.setValue(e[n],this.getObject(e[n],t),i);return i},t.select=function(t,e){for(var i=[],n=0;n<t.length;n++)i.push(this.extractFields(t[n],e));return i},t.group=function(e,i,n,r,o,s){r=r||1;var a=e;if(a.GroupGuid===Yh.GroupGuid){for(var l=function(t){if(F(o))a[t].items=h.group(a[t].items,i,n,a.level+1,null,s),a[t].count=a[t].items.length;else{var e,r=o.filter(function(e){return e.key===a[t].key});e=o.indexOf(r[0]),a[t].items=h.group(a[t].items,i,n,a.level+1,o[e].items,s),a[t].count=o[e].count}},h=this,c=0;c<a.length;c++)l(c);return a.childLevels+=1,a}var d={},p=[];p.GroupGuid=Yh.GroupGuid,p.level=r,p.childLevels=0,p.records=a;for(var u=function(t){var e=f.getVal(a,t,i);if(F(s)||(e=s(e,i)),!d[e]&&(d[e]={key:e,count:0,items:[],aggregates:{},field:i},p.push(d[e]),!F(o))){var n=o.filter(function(t){return t.key===d[e].key});d[e].count=n[0].count}d[e].count=F(o)?d[e].count+=1:d[e].count,d[e].items.push(a[t])},f=this,g=0;g<a.length;g++)u(g);if(n&&n.length){var m=function(e){for(var i={},r=void 0,s=n,a=0;a<n.length;a++)if(r=t.aggregates[n[a].type],F(o))r&&(i[s[a].field+" - "+s[a].type]=r(p[e].items,s[a].field));else{var l=o.filter(function(t){return t.key===p[e].key});r&&(i[s[a].field+" - "+s[a].type]=r(l[0].items,s[a].field))}p[e].aggregates=i};for(g=0;g<p.length;g++)m(g)}return a.length&&p||a},t.buildHierarchy=function(t,e,i,n,r){var o,s={};for(n.result&&(n=n.result),n.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),o=0;o<n.length;o++){(s[a=this.getObject(t,n[o])]||(s[a]=[])).push(n[o])}for(o=0;o<i.length;o++){var a=this.getObject(r||t,i[o]);i[o][e]=s[a]}},t.getFieldList=function(t,e,i){if(void 0===i&&(i=""),null==e)return this.getFieldList(t,[],i);for(var n=t,r=0,o=Object.keys(t);r<o.length;r++){var s=o[r];"object"!=typeof n[s]||n[s]instanceof Array?e.push(i+s):this.getFieldList(n[s],e,i+s+".")}return e},t.getObject=function(t,e){if(!t)return e;if(e){if(-1===t.indexOf("."))return e[t];for(var i=e,n=t.split("."),r=0;r<n.length&&null!=i;r++)i=i[n[r]];return i}},t.setValue=function(t,e,i){var n,r,o=t.toString().split("."),s=i||{},a=s,l=o.length;for(n=0;n<l;n++)r=o[n],n+1===l?a[r]=void 0===e?void 0:e:F(a[r])&&(a[r]={}),a=a[r];return s},t.sort=function(t,e,i){if(t.length<=1)return t;var n=parseInt((t.length/2).toString(),10),r=t.slice(0,n),o=t.slice(n);return r=this.sort(r,e,i),o=this.sort(o,e,i),this.merge(r,o,e,i)},t.ignoreDiacritics=function(e){return"string"!=typeof e?e:e.split("").map(function(e){return e in t.diacritics?t.diacritics[e]:e}).join("")},t.merge=function(t,e,i,n){for(var r,o=[];t.length>0||e.length>0;)r=t.length>0&&e.length>0?n?n(this.getVal(t,0,i),this.getVal(e,0,i),t[0],e[0])<=0?t:e:t[0][i]<t[0][i]?t:e:t.length>0?t:e,o.push(r.shift());return o},t.getVal=function(t,e,i){return i?this.getObject(i,t[e]):t[e]},t.toLowerCase=function(t){return t?"string"==typeof t?t.toLowerCase():t.toString():0===t||!1===t?t.toString():""},t.callAdaptorFunction=function(t,e,i,n){if(e in t){var r=t[e](i,n);F(r)||(i=r)}return i},t.getAddParams=function(e,i,n){var r={};return t.callAdaptorFunction(e,"addParams",{dm:i,query:n,params:n.params,reqParams:r}),r},t.isPlainObject=function(t){return!!t&&t.constructor===Object},t.isCors=function(){var t=null;try{t=new window.XMLHttpRequest}catch(t){}return!!t&&"withCredentials"in t},t.getGuid=function(t){var e;return(t||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(t,i){if("crypto"in window&&"getRandomValues"in crypto){var n=new Uint8Array(1);window.crypto.getRandomValues(n),e=n[0]%16|0}else e=16*Math.random()|0;return"0123456789abcdef"[19===i?3&e|8:e]})},t.isNull=function(t){return null==t},t.getItemFromComparer=function(e,i,n){var r,o,s,a=0,l="string"==typeof t.getVal(e,0,i);if(e.length)for(;F(r)&&a<e.length;)r=t.getVal(e,a,i),s=e[a++];for(;a<e.length;a++)F(o=t.getVal(e,a,i))||(l&&(r=+r,o=+o),n(r,o)>0&&(r=o,s=e[a]));return s},t.distinct=function(e,i,n){n=!F(n)&&n;var r,o=[],s={};return e.forEach(function(a,l){(r="object"==typeof e[l]?t.getVal(e,l,i):e[l])in s||(o.push(n?e[l]:r),s[r]=1)}),o},t.serverTimezoneOffset=null,t.timeZoneHandling=!0,t.throwError=function(t){try{throw new Error(t)}catch(t){throw t.message+"\n"+t.stack}},t.aggregates={sum:function(e,i){for(var n,r=0,o="number"!=typeof t.getVal(e,0,i),s=0;s<e.length;s++)n=t.getVal(e,s,i),isNaN(n)||null===n||(o&&(n=+n),r+=n);return r},average:function(e,i){return t.aggregates.sum(e,i)/e.length},min:function(e,i){var n;return"function"==typeof i&&(n=i,i=null),t.getObject(i,t.getItemFromComparer(e,i,n||t.fnAscending))},max:function(e,i){var n;return"function"==typeof i&&(n=i,i=null),t.getObject(i,t.getItemFromComparer(e,i,n||t.fnDescending))},truecount:function(t,e){return new sc(t).executeLocal((new qh).where(e,"equal",!0,!0)).length},falsecount:function(t,e){return new sc(t).executeLocal((new qh).where(e,"equal",!1,!0)).length},count:function(t,e){return t.length}},t.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},t.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},t.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},t.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains"},t.diacritics={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"},t.fnOperators={equal:function(e,i,n,r){return r&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?t.toLowerCase(e)===t.toLowerCase(i):e===i},notequal:function(e,i,n,r){return r&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),!t.fnOperators.equal(e,i,n)},lessthan:function(e,i,n){return n?t.toLowerCase(e)<t.toLowerCase(i):e<i},greaterthan:function(e,i,n){return n?t.toLowerCase(e)>t.toLowerCase(i):e>i},lessthanorequal:function(e,i,n){return n?t.toLowerCase(e)<=t.toLowerCase(i):e<=i},greaterthanorequal:function(e,i,n){return n?t.toLowerCase(e)>=t.toLowerCase(i):e>=i},contains:function(e,i,n,r){return r&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?!F(e)&&!F(i)&&-1!==t.toLowerCase(e).indexOf(t.toLowerCase(i)):!F(e)&&!F(i)&&-1!==e.toString().indexOf(i)},notnull:function(t){return null!==t},isnull:function(t){return null===t},startswith:function(e,i,n,r){return r&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?e&&i&&t.startsWith(t.toLowerCase(e),t.toLowerCase(i)):e&&i&&t.startsWith(e,i)},endswith:function(e,i,n,r){return r&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?e&&i&&t.endsWith(t.toLowerCase(e),t.toLowerCase(i)):e&&i&&t.endsWith(e,i)},processSymbols:function(e){var i=t.operatorSymbols[e];return i?t.fnOperators[i]:t.throwError("Query - Process Operator : Invalid operator")},processOperator:function(e){var i=t.fnOperators[e];return i||t.fnOperators.processSymbols(e)}},t.parse={parseJson:function(e){return"string"==typeof e?e=JSON.parse(e,t.parse.jsonReviver):e instanceof Array?t.parse.iterateAndReviveArray(e):"object"==typeof e&&null!==e&&t.parse.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var i=0;i<e.length;i++)"object"==typeof e[i]&&null!==e[i]?t.parse.iterateAndReviveJson(e[i]):"string"!=typeof e[i]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(e[i])?e[i]=t.parse.parseJson(e[i]):e[i]=t.parse.jsonReviver("",e[i])},iterateAndReviveJson:function(e){for(var i,n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];t.startsWith(o,"__")||("object"==typeof(i=e[o])?i instanceof Array?t.parse.iterateAndReviveArray(i):i&&t.parse.iterateAndReviveJson(i):e[o]=t.parse.jsonReviver(e[o],i))}},jsonReviver:function(e,i){if("string"==typeof i){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i),r=t.timeZoneHandling?t.serverTimezoneOffset:null;if(n)return t.dateParse.toTimeZone(new Date(parseInt(n[1],10)),r,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var o=i.indexOf("Z")>-1||i.indexOf("z")>-1,s=i.split(/[^0-9.]/);if(o)i=t.dateParse.toTimeZone(new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10),parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10)),t.serverTimezoneOffset,!1);else{var a=new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10),parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10)),l=parseInt(s[6],10),h=parseInt(s[7],10);if(isNaN(l)&&isNaN(h))return a;i.indexOf("+")>-1?a.setHours(a.getHours()-l,a.getMinutes()-h):a.setHours(a.getHours()+l,a.getMinutes()+h),i=t.dateParse.toTimeZone(a,t.serverTimezoneOffset,!1)}null==t.serverTimezoneOffset&&(i=t.dateParse.addSelfOffset(i))}}return i},isJson:function(e){return"string"==typeof e[0]?e:t.parse.parseJson(e)},isGuid:function(t){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(t)},replacer:function(e,i){return t.isPlainObject(e)?t.parse.jsonReplacer(e,i):e instanceof Array?t.parse.arrayReplacer(e):e instanceof Date?t.parse.jsonReplacer({val:e},i).val:e},jsonReplacer:function(e,i){for(var n,r=0,o=Object.keys(e);r<o.length;r++){var s=o[r];if((n=e[s])instanceof Date){var a=n;null==t.serverTimezoneOffset?e[s]=t.dateParse.toTimeZone(a,null).toJSON():(a=new Date(+a+36e5*t.serverTimezoneOffset),e[s]=t.dateParse.toTimeZone(t.dateParse.addSelfOffset(a),null).toJSON())}}return e},arrayReplacer:function(e){for(var i=0;i<e.length;i++)t.isPlainObject(e[i])?e[i]=t.parse.jsonReplacer(e[i]):e[i]instanceof Date&&(e[i]=t.parse.jsonReplacer({date:e[i]}).date);return e},jsonDateReplacer:function(e,i){if("value"===e&&i){if("string"==typeof i){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i);if(n)i=t.dateParse.toTimeZone(new Date(parseInt(n[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var r=i.split(/[^0-9]/);i=t.dateParse.toTimeZone(new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10),parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10)),null,!0)}}if(i instanceof Date)return i=t.dateParse.addSelfOffset(i),null===t.serverTimezoneOffset?t.dateParse.toTimeZone(t.dateParse.addSelfOffset(i),null).toJSON():(i=t.dateParse.toTimeZone(i,i.getTimezoneOffset()/60*2-t.serverTimezoneOffset,!1)).toJSON()}return i}},t.dateParse={addSelfOffset:function(t){return new Date(+t-6e4*t.getTimezoneOffset())},toUTC:function(t){return new Date(+t+6e4*t.getTimezoneOffset())},toTimeZone:function(e,i,n){if(null===i)return e;var r=n?t.dateParse.toUTC(e):e;return new Date(+r-36e5*i)},toLocalTime:function(t){var e=t,i=-e.getTimezoneOffset(),n=i>=0?"+":"-",r=function(t){var e=Math.floor(Math.abs(t));return(e<10?"0":"")+e};return e.getFullYear()+"-"+r(e.getMonth()+1)+"-"+r(e.getDate())+"T"+r(e.getHours())+":"+r(e.getMinutes())+":"+r(e.getSeconds())+n+r(i/60)+":"+r(i%60)}},t}(),Kh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Jh=function(){function t(e){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=t,this.dataSource=e,this.pvt={}}return t.prototype.processResponse=function(t,e,i,n){return t},t}(),Qh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Kh(e,t),e.prototype.processQuery=function(t,e){for(var i,n,r=t.dataSource.json.slice(0),o=r.length,s=!0,a={},l=0;l<e.queries.length;l++)i=this[(n=e.queries[l]).fn].call(this,r,n.e,e),"onAggregates"===n.fn?a[n.e.field+" - "+n.e.type]=i:r=void 0!==i?i:r,"onPage"!==n.fn&&"onSkip"!==n.fn&&"onTake"!==n.fn&&"onRange"!==n.fn||(s=!1),s&&(o=r.length);return e.isCountRequired&&(r={result:r,count:o,aggregates:a}),r},e.prototype.batchRequest=function(t,e,i){var n,r=e.deletedRecords.length;for(n=0;n<e.addedRecords.length;n++)this.insert(t,e.addedRecords[n]);for(n=0;n<e.changedRecords.length;n++)this.update(t,i.key,e.changedRecords[n]);for(n=0;n<r;n++)this.remove(t,i.key,e.deletedRecords[n]);return e},e.prototype.onWhere=function(t,e){return t&&t.length?t.filter(function(t){if(e)return e.validate(t)}):t},e.prototype.onAggregates=function(t,e){var i=Zh.aggregates[e.type];return t&&i&&0!==t.length?i(t,e.field):null},e.prototype.onSearch=function(t,e){return t&&t.length?(0===e.fieldNames.length&&Zh.getFieldList(t[0],e.fieldNames),t.filter(function(t){for(var i=0;i<e.fieldNames.length;i++)if(e.comparer.call(t,Zh.getObject(e.fieldNames[i],t),e.searchKey,e.ignoreCase,e.ignoreAccent))return!0;return!1})):t},e.prototype.onSortBy=function(t,e,i){if(!t||!t.length)return t;var n,r=Zh.getValue(e.fieldName,i);if(!r)return t.sort(e.comparer);if(r instanceof Array){for(var o=(r=r.slice(0)).length-1;o>=0;o--)r[o]&&(n=e.comparer,Zh.endsWith(r[o]," desc")&&(n=Zh.fnSort("descending"),r[o]=r[o].replace(" desc","")),t=Zh.sort(t,r[o],n));return t}return Zh.sort(t,r,e.comparer)},e.prototype.onGroup=function(t,e,i){if(!t||!t.length)return t;var n=qh.filterQueries(i.queries,"onAggregates"),r=[];if(n.length)for(var o=void 0,s=0;s<n.length;s++)o=n[s].e,r.push({type:o.type,field:Zh.getValue(o.field,i)});return Zh.group(t,Zh.getValue(e.fieldName,i),r,null,null,e.comparer)},e.prototype.onPage=function(t,e,i){var n=Zh.getValue(e.pageSize,i),r=(Zh.getValue(e.pageIndex,i)-1)*n,o=r+n;return t&&t.length?t.slice(r,o):t},e.prototype.onRange=function(t,e){return t&&t.length?t.slice(Zh.getValue(e.start),Zh.getValue(e.end)):t},e.prototype.onTake=function(t,e){return t&&t.length?t.slice(0,Zh.getValue(e.nos)):t},e.prototype.onSkip=function(t,e){return t&&t.length?t.slice(Zh.getValue(e.nos)):t},e.prototype.onSelect=function(t,e){return t&&t.length?Zh.select(t,Zh.getValue(e.fieldNames)):t},e.prototype.insert=function(t,e,i,n,r){return F(r)?t.dataSource.json.push(e):t.dataSource.json.splice(r,0,e)},e.prototype.remove=function(t,e,i,n){var r,o=t.dataSource.json;for("object"!=typeof i||i instanceof Date||(i=Zh.getObject(e,i)),r=0;r<o.length&&Zh.getObject(e,o[r])!==i;r++);return r!==o.length?o.splice(r,1):null},e.prototype.update=function(t,e,i,n){var r,o,s=t.dataSource.json;for(F(e)||(o=R(e,i)),r=0;r<s.length&&(F(e)||R(e,s[r])!==o);r++);return r<s.length?_(s[r],i):null},e}(Jh),$h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Kh(e,t),e.prototype.processQuery=function(t,e,i){var n,r,o=this.getQueryRequest(e),s=qh.filterQueryLists(e.queries,["onSelect","onPage","onSkip","onTake","onRange"]),a=e.params,l=t.dataSource.url,h=null,c=this.options,d={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in s?(n=s.onPage,r=((r=Zh.getValue(n.pageIndex,e))-1)*(h=Zh.getValue(n.pageSize,e))):"onRange"in s&&(r=(n=s.onRange).start,h=n.end-n.start);for(var p=0;p<o.sorts.length;p++)n=Zh.getValue(o.sorts[p].e.fieldName,e),d.sorts.push(Zh.callAdaptorFunction(this,"onEachSort",{name:n,direction:o.sorts[p].e.direction},e));i&&(n=this.getFiltersFrom(i,e))&&d.filters.push(Zh.callAdaptorFunction(this,"onEachWhere",n.toJson(),e));for(p=0;p<o.filters.length;p++){d.filters.push(Zh.callAdaptorFunction(this,"onEachWhere",o.filters[p].e.toJson(),e));for(var u=0,f="object"==typeof d.filters[p]?Object.keys(d.filters[p]):[];u<f.length;u++){var g=f[u];Zh.isNull(d[g])&&delete d[g]}}for(p=0;p<o.searches.length;p++)n=o.searches[p].e,d.searches.push(Zh.callAdaptorFunction(this,"onEachSearch",{fields:n.fieldNames,operator:n.operator,key:n.searchKey,ignoreCase:n.ignoreCase},e));for(p=0;p<o.groups.length;p++)d.groups.push(Zh.getValue(o.groups[p].e.fieldName,e));for(p=0;p<o.aggregates.length;p++)n=o.aggregates[p].e,d.aggregates.push({type:n.type,field:Zh.getValue(n.field,e)});var m={};this.getRequestQuery(c,e,s,d,m),Zh.callAdaptorFunction(this,"addParams",{dm:t,query:e,params:a,reqParams:m});for(var y=0,v=Object.keys(m);y<v.length;y++){g=v[y];(Zh.isNull(m[g])||""===m[g]||0===m[g].length)&&delete m[g]}c.skip in m&&c.take in m||null===h||(m[c.skip]=Zh.callAdaptorFunction(this,"onSkip",r,e),m[c.take]=Zh.callAdaptorFunction(this,"onTake",h,e));var b=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(m,Zh.parse.jsonDateReplacer),url:l,pvtData:b,type:"POST",contentType:"application/json; charset=utf-8"}:(n=this.convertToQueryString(m,e,t),{type:"GET",url:(n=(-1!==t.dataSource.url.indexOf("?")?"&":"/")+n).length?l.replace(/\/*$/,n):l,pvtData:b})},e.prototype.getRequestQuery=function(t,e,i,n,r){var o=r;o[t.from]=e.fromTable,t.apply&&e.distincts.length&&(o[t.apply]="onDistinct"in this?Zh.callAdaptorFunction(this,"onDistinct",e.distincts):""),!e.distincts.length&&t.expand&&(o[t.expand]="onExpand"in this&&"onSelect"in i?Zh.callAdaptorFunction(this,"onExpand",{selects:Zh.getValue(i.onSelect.fieldNames,e),expands:e.expands},e):e.expands),o[t.select]="onSelect"in i&&!e.distincts.length?Zh.callAdaptorFunction(this,"onSelect",Zh.getValue(i.onSelect.fieldNames,e),e):"",o[t.count]=e.isCountRequired?Zh.callAdaptorFunction(this,"onCount",e.isCountRequired,e):"",o[t.search]=n.searches.length?Zh.callAdaptorFunction(this,"onSearch",n.searches,e):"",o[t.skip]="onSkip"in i?Zh.callAdaptorFunction(this,"onSkip",Zh.getValue(i.onSkip.nos,e),e):"",o[t.take]="onTake"in i?Zh.callAdaptorFunction(this,"onTake",Zh.getValue(i.onTake.nos,e),e):"",o[t.where]=n.filters.length||n.searches.length?Zh.callAdaptorFunction(this,"onWhere",n.filters,e):"",o[t.sortBy]=n.sorts.length?Zh.callAdaptorFunction(this,"onSortBy",n.sorts,e):"",o[t.group]=n.groups.length?Zh.callAdaptorFunction(this,"onGroup",n.groups,e):"",o[t.aggregates]=n.aggregates.length?Zh.callAdaptorFunction(this,"onAggregates",n.aggregates,e):"",o.param=[]},e.prototype.convertToQueryString=function(t,e,i){return""},e.prototype.processResponse=function(t,e,i,n,r,o){if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("application/json")){var s=Zh.timeZoneHandling;e&&!e.timeZoneHandling&&(Zh.timeZoneHandling=!1),t=Zh.parse.parseJson(t),Zh.timeZoneHandling=s}var a=r,l=a.pvtData||{},h=t?t.groupDs:[];if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("xml"))return i.isCountRequired?{result:[],count:0}:[];var c=JSON.parse(a.data);if(c&&"batch"===c.action&&t&&t.addedRecords)return o.addedRecords=t.addedRecords,o;t&&t.d&&(t=t.d);var d={};return t&&"count"in t&&(d.count=t.count),d.result=t&&t.result?t.result:t,this.getAggregateResult(l,t,d,h,i),Zh.isNull(d.count)?d.result:{result:d.result,count:d.count,aggregates:d.aggregates}},e.prototype.onGroup=function(t){return this.pvt.groups=t,t},e.prototype.onAggregates=function(t){this.pvt.aggregates=t},e.prototype.batchRequest=function(t,e,i,n,r){return{type:"POST",url:t.dataSource.batchUrl||t.dataSource.crudUrl||t.dataSource.removeUrl||t.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(V({},{changed:e.changedRecords,added:e.addedRecords,deleted:e.deletedRecords,action:"batch",table:i[void 0],key:i[void 0]},Zh.getAddParams(this,t,n)))}},e.prototype.beforeSend=function(t,e){},e.prototype.insert=function(t,e,i,n){return{url:t.dataSource.insertUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(V({},{value:e,table:i,action:"insert"},Zh.getAddParams(this,t,n)))}},e.prototype.remove=function(t,e,i,n,r){return{type:"POST",url:t.dataSource.removeUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(V({},{key:i,keyColumn:e,table:n,action:"remove"},Zh.getAddParams(this,t,r)))}},e.prototype.update=function(t,e,i,n,r){return{type:"POST",url:t.dataSource.updateUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(V({},{value:i,action:"update",keyColumn:e,key:Zh.getObject(e,i),table:n},Zh.getAddParams(this,t,r)))}},e.prototype.getFiltersFrom=function(t,e){var i,n=e.fKey,r=n,o=e.key,s=[];"object"!=typeof t[0]&&(r=null);for(var a=0;a<t.length;a++)i="object"==typeof t[0]?Zh.getObject(o||r,t[a]):t[a],s.push(new Xh(n,"equal",i));return Xh.or(s)},e.prototype.getAggregateResult=function(t,e,i,n,r){var o=e;if(e&&e.result&&(o=e.result),t&&t.aggregates&&t.aggregates.length){var s=t.aggregates,a=void 0,l=o,h={};e.aggregate&&(l=e.aggregate);for(var c=0;c<s.length;c++)(a=Zh.aggregates[s[c].type])&&(h[s[c].field+" - "+s[c].type]=a(l,s[c].field));i.aggregates=h}if(t&&t.groups&&t.groups.length){var d=t.groups;for(c=0;c<d.length;c++){F(n)||(n=Zh.group(n,d[c]));var p=qh.filterQueries(r.queries,"onGroup")[c].e;o=Zh.group(o,d[c],t.aggregates,null,n,p.comparer)}i.result=o}return i},e.prototype.getQueryRequest=function(t){var e={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return e.sorts=qh.filterQueries(t.queries,"onSortBy"),e.groups=qh.filterQueries(t.queries,"onGroup"),e.filters=qh.filterQueries(t.queries,"onWhere"),e.searches=qh.filterQueries(t.queries,"onSearch"),e.aggregates=qh.filterQueries(t.queries,"onAggregates"),e},e.prototype.addParams=function(t){var e=t.reqParams;t.params.length&&(e.params={});for(var i=0,n=t.params;i<n.length;i++){var r=n[i];if(e[r.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");e[r.key]=r.value,r.fn&&(e[r.key]=r.fn.call(t.query,r.key,t.query,t.dm)),e.params[r.key]=e[r.key]}},e}(Jh),tc=function(t){function e(e){var i=t.call(this)||this;return i.options=V({},i.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),V(i.options,e||{}),i}return Kh(e,t),e.prototype.getModuleName=function(){return"ODataAdaptor"},e.prototype.onPredicate=function(t,i,n){var r,o,s="",a=t.value,l=typeof a,h=t.field?e.getField(t.field):null;if(a instanceof Date&&(a="datetime'"+Zh.parse.replacer(a)+"'"),"string"===l&&(a="'"+(a=encodeURIComponent(a))+"'",n&&(h="cast("+h+", 'Edm.String')"),Zh.parse.isGuid(a)&&(o="guid"),t.ignoreCase&&(o||(h="tolower("+h+")"),a=a.toLowerCase())),r=Zh.odBiOperator[t.operator])return s+=h,s+=r,o&&(s+=o),s+a;if("substringof"===(r=F(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?Zh.odUniOperator[t.operator]:Zh.odv4UniOperator[t.operator])){var c=a;a=h,h=c}return s+=r+"(",s+=h+",",o&&(s+=o),s+=a+")"},e.prototype.addParams=function(e){t.prototype.addParams.call(this,e),delete e.reqParams.params},e.prototype.onComplexPredicate=function(t,e,i){for(var n=[],r=0;r<t.predicates.length;r++)n.push("("+this.onEachWhere(t.predicates[r],e,i)+")");return n.join(" "+t.condition+" ")},e.prototype.onEachWhere=function(t,e,i){return t.isComplex?this.onComplexPredicate(t,e,i):this.onPredicate(t,e,i)},e.prototype.onWhere=function(t){return this.pvt.search&&t.push(this.onEachWhere(this.pvt.search,null,!0)),t.join(" and ")},e.prototype.onEachSearch=function(t){t.fields&&0===t.fields.length&&Zh.throwError("Query() - Search : oData search requires list of field names to search");for(var e=this.pvt.search||[],i=0;i<t.fields.length;i++)e.push(new Xh(t.fields[i],t.operator,t.key,t.ignoreCase));this.pvt.search=e},e.prototype.onSearch=function(t){return this.pvt.search=Xh.or(this.pvt.search),""},e.prototype.onEachSort=function(t){var i=[];if(t.name instanceof Array)for(var n=0;n<t.name.length;n++)i.push(e.getField(t.name[n])+("descending"===t.direction?" desc":""));else i.push(e.getField(t.name)+("descending"===t.direction?" desc":""));return i.join(",")},e.prototype.onSortBy=function(t){return t.reverse().join(",")},e.prototype.onGroup=function(t){return this.pvt.groups=t,[]},e.prototype.onSelect=function(t){for(var i=0;i<t.length;i++)t[i]=e.getField(t[i]);return t.join(",")},e.prototype.onAggregates=function(t){return this.pvt.aggregates=t,""},e.prototype.onCount=function(t){return!0===t?"allpages":""},e.prototype.beforeSend=function(t,e,i){Zh.endsWith(i.url,this.options.batch)&&"post"===i.type.toLowerCase()?(e.setRequestHeader("Accept",this.options.multipartAccept),e.setRequestHeader("DataServiceVersion","2.0"),e.overrideMimeType("text/plain; charset=x-user-defined")):e.setRequestHeader("Accept",this.options.accept),e.setRequestHeader("DataServiceVersion","2.0"),e.setRequestHeader("MaxDataServiceVersion","2.0")},e.prototype.processResponse=function(t,e,i,n,r,o){if(r&&"GET"===r.type&&!this.rootUrl&&t["odata.metadata"]){var s=t["odata.metadata"].split("/$metadata#");this.rootUrl=s[0],this.resourceTableName=s[1]}if(!F(t.d)){var a=i&&i.isCountRequired?t.d.results:t.d;if(!F(a))for(var l=0;l<a.length;l++)F(a[l].__metadata)||delete a[l].__metadata}var h=r&&r.pvtData,c=this.processBatchResponse(t,i,n,r,o);if(c)return c;var d=n&&r.getResponseHeader("DataServiceVersion"),p=null,u=d&&parseInt(d,10)||2;if(i&&i.isCountRequired){(t.__count||t["odata.count"])&&(p=t.__count||t["odata.count"]),t.d&&(t=t.d),(t.__count||t["odata.count"])&&(p=t.__count||t["odata.count"])}3===u&&t.value&&(t=t.value),t.d&&(t=t.d),u<3&&t.results&&(t=t.results);var f={};return f.count=p,f.result=t,this.getAggregateResult(h,t,f,null,i),Zh.isNull(p)?f.result:{result:f.result,count:f.count,aggregates:f.aggregates}},e.prototype.convertToQueryString=function(t,e,i){var n=[],r=t.table||"";delete t.table,i.dataSource.requiresFormat&&(t.$format="json");for(var o=0,s=Object.keys(t);o<s.length;o++){var a=s[o];n.push(a+"="+t[a])}return n=n.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!r?n:n.length?r+"?"+n:r||""},e.prototype.localTimeReplacer=function(t,e){for(var i=0,n=F(e)?[]:Object.keys(e);i<n.length;i++){var r=n[i];e[r]instanceof Date&&(e[r]=Zh.dateParse.toLocalTime(e[r]))}return e},e.prototype.insert=function(t,e,i){return{url:(t.dataSource.insertUrl||t.dataSource.url).replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(e,this.options.localTime?this.localTimeReplacer:null)}},e.prototype.remove=function(t,e,i,n){var r;return r="string"!=typeof i||Zh.parse.isGuid(i)?"("+i+")":"('"+i+"')",{type:"DELETE",url:(t.dataSource.removeUrl||t.dataSource.url).replace(/\/*$/,n?"/"+n:"")+r}},e.prototype.update=function(t,e,i,n,r,o){var s;return"PATCH"!==this.options.updateType||F(o)||(i=this.compareAndRemove(i,o,e)),s="string"!=typeof i[e]||Zh.parse.isGuid(i[e])?"("+i[e]+")":"('"+i[e]+"')",{type:this.options.updateType,url:(t.dataSource.updateUrl||t.dataSource.url).replace(/\/*$/,n?"/"+n:"")+s,data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},e.prototype.batchRequest=function(t,e,i,n,r){var o=i.guid=Zh.getGuid(this.options.batchPre),s=this.rootUrl?this.rootUrl+"/"+this.options.batch:t.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;var a={url:i.url,key:i.key,cid:1,cSet:Zh.getGuid(this.options.changeSet)},l="--"+o+"\n";return l+="Content-Type: multipart/mixed; boundary="+a.cSet.replace("--","")+"\n",this.pvt.changeSet=0,l+=this.generateInsertRequest(e.addedRecords,a,t),l+=this.generateUpdateRequest(e.changedRecords,a,t,r?r.changedRecords:[]),l+=this.generateDeleteRequest(e.deletedRecords,a,t),l+=a.cSet+"--\n",{type:"POST",url:s,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+o,data:l+="--"+o+"--"}},e.prototype.generateDeleteRequest=function(t,e,i){if(!t)return"";var n={method:"DELETE ",url:function(t,e,i){var n=Zh.getObject(i,t[e]);return"number"==typeof n||Zh.parse.isGuid(n)?"("+n+")":n instanceof Date?"("+t[e][i].toJSON()+")":"('"+n+"')"},data:function(t,e){return""}};return this.generateBodyContent(t,e,n,i)+"\n"},e.prototype.generateInsertRequest=function(t,e,i){if(!t)return"";var n={method:"POST ",url:function(t,e,i){return""},data:function(t,e){return JSON.stringify(t[e])+"\n\n"}};return this.generateBodyContent(t,e,n,i)},e.prototype.generateUpdateRequest=function(t,e,i,n){var r=this;if(!t)return"";t.forEach(function(t){return t=r.compareAndRemove(t,n.filter(function(i){return Zh.getObject(e.key,i)===Zh.getObject(e.key,t)})[0],e.key)});var o={method:this.options.updateType+" ",url:function(t,e,i){return"number"==typeof t[e][i]||Zh.parse.isGuid(t[e][i])?"("+t[e][i]+")":t[e][i]instanceof Date?"("+t[e][i].toJSON()+")":"('"+t[e][i]+"')"},data:function(t,e){return JSON.stringify(t[e])+"\n\n"}};return this.generateBodyContent(t,e,o,i)},e.getField=function(t){return t.replace(/\./g,"/")},e.prototype.generateBodyContent=function(t,e,i,n){for(var r="",o=0;o<t.length;o++)r+="\n"+e.cSet+"\n",r+=this.options.changeSetContent+"\n\n",r+=i.method,"POST "===i.method?r+=(n.dataSource.insertUrl||n.dataSource.crudUrl||e.url)+i.url(t,o,e.key)+" HTTP/1.1\n":"PUT "===i.method||"PATCH "===i.method?r+=(n.dataSource.updateUrl||n.dataSource.crudUrl||e.url)+i.url(t,o,e.key)+" HTTP/1.1\n":"DELETE "===i.method&&(r+=(n.dataSource.removeUrl||n.dataSource.crudUrl||e.url)+i.url(t,o,e.key)+" HTTP/1.1\n"),r+="Accept: "+this.options.accept+"\n",r+="Content-Id: "+this.pvt.changeSet+++"\n",r+=this.options.batchChangeSetContentType+"\n",F(t[o]["@odata.etag"])?r+="\n":(r+="If-Match: "+t[o]["@odata.etag"]+"\n\n",delete t[o]["@odata.etag"]),r+=i.data(t,o);return r},e.prototype.processBatchResponse=function(t,e,i,n,r){if(i&&i.getResponseHeader("Content-Type")&&-1!==i.getResponseHeader("Content-Type").indexOf("xml"))return e.isCountRequired?{result:[],count:0}:[];if(n&&this.options.batch&&Zh.endsWith(n.url,this.options.batch)&&"post"===n.type.toLowerCase()){var o=i.getResponseHeader("Content-Type"),s=void 0,a=void 0,l=t+"";if(o=o.substring(o.indexOf("=batchresponse")+1),(l=l.split(o)).length<2)return{};l=l[1];var h=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(l);h&&l.replace(h[0],"");for(var c=h?h[1]:"",d=(l=l.split(c)).length;d>-1;d--)/\bContent-ID:/i.test(l[d])&&/\bHTTP.+201/.test(l[d])&&(s=parseInt(/\bContent-ID: (\d+)/i.exec(l[d])[1],10),r.addedRecords[s]&&(a=Zh.parse.parseJson(/^\{.+\}/m.exec(l[d])[0]),V({},r.addedRecords[s],this.processResponse(a))));return r}return null},e.prototype.compareAndRemove=function(t,e,i){var n=this;return F(e)?t:(Object.keys(t).forEach(function(r){r!==i&&"@odata.etag"!==r&&(Zh.isPlainObject(t[r])?(n.compareAndRemove(t[r],e[r]),0===Object.keys(t[r]).filter(function(t){return"@odata.etag"!==t}).length&&delete t[r]):t[r]===e[r]?delete t[r]:t[r]&&e[r]&&t[r].valueOf()===e[r].valueOf()&&delete t[r])}),t)},e}($h),ec=function(t){function e(e){var i=t.call(this,e)||this;return i.options=V({},i.options,{requestType:"get",accept:"application/json, text/javascript, */*; q=0.01",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PATCH",localTime:!1,apply:"$apply"}),V(i.options,e||{}),i}return Kh(e,t),e.prototype.getModuleName=function(){return"ODataV4Adaptor"},e.prototype.onCount=function(t){return!0===t?"true":""},e.prototype.onPredicate=function(e,i,n){var r="",o=e.value,s=o instanceof Date;if(i instanceof qh)for(var a=this.getQueryRequest(i),l=0;l<a.filters.length;l++)a.filters[l].e.key===e.value&&(n=!0);return r=t.prototype.onPredicate.call(this,e,i,n),s&&(r=r.replace(/datetime'(.*)'$/,"$1")),Zh.parse.isGuid(o)&&(r=r.replace("guid","").replace(/'/g,"")),r},e.prototype.onEachSearch=function(t){var e=this.pvt.searches||[];e.push(t.key),this.pvt.searches=e},e.prototype.onSearch=function(t){return this.pvt.searches.join(" OR ")},e.prototype.onExpand=function(t){var e=this,i={},n={},r=t.expands.slice(),o=[];return t.selects.filter(function(t){return t.indexOf(".")>-1}).forEach(function(t){var e=t.split(".");e[0]in i||(i[e[0]]=[]),i[e[0]].push(e[1])}),Object.keys(i).forEach(function(t){-1===r.indexOf(t)&&r.push(t)}),r.forEach(function(t){n[t]=t in i?t+"("+e.options.select+"="+i[t].join(",")+")":t}),Object.keys(n).forEach(function(t){return o.push(n[t])}),o.join(",")},e.prototype.onDistinct=function(t){return"groupby(("+t.map(function(t){return tc.getField(t)}).join(",")+"))"},e.prototype.onSelect=function(e){return t.prototype.onSelect.call(this,e.filter(function(t){return-1===t.indexOf(".")}))},e.prototype.beforeSend=function(t,e,i){"POST"!==i.type&&"PUT"!==i.type&&"PATCH"!==i.type||e.setRequestHeader("Prefer","return=representation"),e.setRequestHeader("Accept",this.options.accept)},e.prototype.processResponse=function(e,i,n,r,o,s){if(o&&"GET"===o.type&&!this.rootUrl&&e["@odata.context"]){var a=e["@odata.context"].split("/$metadata#");this.rootUrl=a[0],this.resourceTableName=a[1]}var l=o&&o.pvtData,h=t.prototype.processBatchResponse.call(this,e,n,r,o,s);if(h)return h;var c=null;n&&n.isCountRequired&&"@odata.count"in e&&(c=e["@odata.count"]),e=F(e.value)?e:e.value;var d={};return d.count=c,d.result=e,this.getAggregateResult(l,e,d,null,n),Zh.isNull(c)?d.result:{result:d.result,count:c,aggregates:d.aggregates}},e}(tc),ic=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Kh(e,t),e.prototype.getModuleName=function(){return"WebApiAdaptor"},e.prototype.insert=function(t,e,i){return{type:"POST",url:t.dataSource.url,data:JSON.stringify(e)}},e.prototype.remove=function(t,e,i,n){return{type:"DELETE",url:t.dataSource.url+"/"+i,data:JSON.stringify(i)}},e.prototype.update=function(t,e,i,n){return{type:"PUT",url:t.dataSource.url,data:JSON.stringify(i)}},e.prototype.batchRequest=function(t,e,i){var n=this,r=i.guid=Zh.getGuid(this.options.batchPre),o=t.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;for(var s=[],a=function(n,o){e.addedRecords.forEach(function(o,a){var l=function(t,e,i){return""};s.push("--"+r),s.push("Content-Type: application/http; msgtype=request",""),s.push("POST /api/"+(t.dataSource.insertUrl||t.dataSource.crudUrl||i.url)+l(e.addedRecords,n,i.key)+" HTTP/1.1"),s.push("Content-Type: application/json; charset=utf-8"),s.push("Host: "+location.host),s.push("",o?JSON.stringify(o):"")})},l=0,h=e.addedRecords.length;l<h;l++)a(l);var c=function(o,a){e.changedRecords.forEach(function(a,l){n.options.updateType;var h=function(t,e,i){return""};s.push("--"+r),s.push("Content-Type: application/http; msgtype=request",""),s.push("PUT /api/"+(t.dataSource.updateUrl||t.dataSource.crudUrl||i.url)+h(e.changedRecords,o,i.key)+" HTTP/1.1"),s.push("Content-Type: application/json; charset=utf-8"),s.push("Host: "+location.host),s.push("",a?JSON.stringify(a):"")})};for(l=0,h=e.changedRecords.length;l<h;l++)c(l);var d=function(n,o){e.deletedRecords.forEach(function(o,a){var l=function(t,e,i){var n=Zh.getObject(i,t[e]);return"number"==typeof n||Zh.parse.isGuid(n)?"/"+n:n instanceof Date?"/"+t[e][i].toJSON():"/'"+n+"'"};s.push("--"+r),s.push("Content-Type: application/http; msgtype=request",""),s.push("DELETE /api/"+(t.dataSource.removeUrl||t.dataSource.crudUrl||i.url)+l(e.deletedRecords,n,i.key)+" HTTP/1.1"),s.push("Content-Type: application/json; charset=utf-8"),s.push("Host: "+location.host),s.push("",o?JSON.stringify(o):"")})};for(l=0,h=e.deletedRecords.length;l<h;l++)d(l);return s.push("--"+r+"--",""),{type:"POST",url:o,contentType:"multipart/mixed; boundary="+r,data:s.join("\r\n")}},e.prototype.beforeSend=function(t,e,i){e.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01")},e.prototype.processResponse=function(t,e,i,n,r,o){var s=r&&r.pvtData,a=null,l={};if(r&&"post"!==r.type.toLowerCase()){var h=n&&r.getResponseHeader("DataServiceVersion"),c=h&&parseInt(h,10)||2;i&&i.isCountRequired&&(Zh.isNull(t.Count)||(a=t.Count)),c<3&&t.Items&&(t=t.Items),l.count=a,l.result=t,this.getAggregateResult(s,t,l,null,i)}return l.result=l.result||t,Zh.isNull(a)?l.result:{result:l.result,count:l.count,aggregates:l.aggregates}},e}(tc),nc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Kh(e,t),e.prototype.processQuery=function(t,e,i){var n=(new $h).processQuery(t,e,i),r=Zh.parse.parseJson(n.data),o={};if(r.param)for(var s=0;s<r.param.length;s++){var a=r.param[s],l=Object.keys(a)[0];o[l]=a[l]}o.value=r;return{data:JSON.stringify(o),url:n.url,pvtData:n.pvtData,type:"POST",contentType:"application/json; charset=utf-8"}},e}($h),rc=function(t){function e(){var e=t.call(this)||this;return z("beforeSend",$h.prototype.beforeSend,e),e}return Kh(e,t),e.prototype.insert=function(t,e,i,n,r){return this.pvt.position=r,this.updateType="add",{url:t.dataSource.insertUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(V({},{value:e,table:i,action:"insert"},Zh.getAddParams(this,t,n)))}},e.prototype.remove=function(e,i,n,r,o){return t.prototype.remove.call(this,e,i,n),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(V({},{key:n,keyColumn:i,table:r,action:"remove"},Zh.getAddParams(this,e,o)))}},e.prototype.update=function(t,e,i,n,r){return this.updateType="update",this.updateKey=e,{type:"POST",url:t.dataSource.updateUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(V({},{value:i,action:"update",keyColumn:e,key:i[e],table:n},Zh.getAddParams(this,t,r)))}},e.prototype.processResponse=function(e,i,n,r,o,s,a){var l;if("add"===this.updateType&&t.prototype.insert.call(this,i,e,null,null,this.pvt.position),"update"===this.updateType&&t.prototype.update.call(this,i,this.updateKey,e),this.updateType=void 0,e.added)for(l=0;l<e.added.length;l++)t.prototype.insert.call(this,i,e.added[l]);if(e.changed)for(l=0;l<e.changed.length;l++)t.prototype.update.call(this,i,a.key,e.changed[l]);if(e.deleted)for(l=0;l<e.deleted.length;l++)t.prototype.remove.call(this,i,a.key,e.deleted[l]);return e},e.prototype.batchRequest=function(t,e,i,n,r){return{type:"POST",url:t.dataSource.batchUrl||t.dataSource.crudUrl||t.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(V({},{changed:e.changedRecords,added:e.addedRecords,deleted:e.deletedRecords,action:"batch",table:i.url,key:i.key},Zh.getAddParams(this,t,n)))}},e.prototype.addParams=function(t){(new $h).addParams(t)},e}(Qh),oc=function(t){function e(e,i,n){var r=t.call(this)||this;r.isCrudAction=!1,r.isInsertAction=!1,F(e)||(r.cacheAdaptor=e),r.pageSize=n,r.guidId=Zh.getGuid("cacheAdaptor");window.localStorage.setItem(r.guidId,JSON.stringify({keys:[],results:[]}));var o=r.guidId;return F(i)||setInterval(function(){var t;t=Zh.parse.parseJson(window.localStorage.getItem(o));for(var e=[],n=0;n<t.results.length;n++){var r=+new Date,s=+new Date(t.results[n].timeStamp);t.results[n].timeStamp=r-s,r-s>i&&e.push(n)}for(n=0;n<e.length;n++)t.results.splice(e[n],1),t.keys.splice(e[n],1);window.localStorage.removeItem(o),window.localStorage.setItem(o,JSON.stringify(t))},i),r}return Kh(e,t),e.prototype.generateKey=function(t,e){var i=this.getQueryRequest(e),n=qh.filterQueryLists(e.queries,["onSelect","onPage","onSkip","onTake","onRange"]),r=t;"onPage"in n&&(r+=n.onPage.pageIndex),i.sorts.forEach(function(t){r+=t.e.direction+t.e.fieldName}),i.groups.forEach(function(t){r+=t.e.fieldName}),i.searches.forEach(function(t){r+=t.e.searchKey});for(var o=0;o<i.filters.length;o++){var s=i.filters[o];if(s.e.isComplex){var a=e.clone();a.queries=[];for(var l=0;l<s.e.predicates.length;l++)a.queries.push({fn:"onWhere",e:s.e.predicates[l],filter:e.queries.filter});r+=s.e.condition+this.generateKey(t,a)}else r+=s.e.field+s.e.operator+s.e.value}return r},e.prototype.processQuery=function(t,e,i){var n,r=this.generateKey(t.dataSource.url,e),o=(n=Zh.parse.parseJson(window.localStorage.getItem(this.guidId)))?n.results[n.keys.indexOf(r)]:null;return null==o||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):o},e.prototype.processResponse=function(t,e,i,n,r,o){if(this.isInsertAction||r&&this.cacheAdaptor.options.batch&&Zh.endsWith(r.url,this.cacheAdaptor.options.batch)&&"post"===r.type.toLowerCase())return this.cacheAdaptor.processResponse(t,e,i,n,r,o);t=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var s=i?this.generateKey(e.dataSource.url,i):e.dataSource.url,a={},l=(a=Zh.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(s);for(-1!==l&&(a.results.splice(l,1),a.keys.splice(l,1)),a.results[a.keys.push(s)-1]={keys:s,result:t.result,timeStamp:new Date,count:t.count};a.results.length>this.pageSize;)a.results.splice(0,1),a.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(a)),t},e.prototype.beforeSend=function(t,e,i){!F(this.cacheAdaptor.options.batch)&&Zh.endsWith(i.url,this.cacheAdaptor.options.batch)&&"post"===i.type.toLowerCase()&&e.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),t.dataSource.crossDomain||e.setRequestHeader("Accept",this.cacheAdaptor.options.accept)},e.prototype.update=function(t,e,i,n){return this.isCrudAction=!0,this.cacheAdaptor.update(t,e,i,n)},e.prototype.insert=function(t,e,i){return this.isInsertAction=!0,this.cacheAdaptor.insert(t,e,i)},e.prototype.remove=function(t,e,i,n){return this.isCrudAction=!0,this.cacheAdaptor.remove(t,e,i,n)},e.prototype.batchRequest=function(t,e,i){return this.cacheAdaptor.batchRequest(t,e,i)},e}($h),sc=function(){function t(t,e,i){var n,r=this;return this.dateParse=!0,this.timeZoneHandling=!0,this.requests=[],t||this.dataSource||(t=[]),i=i||t.adaptor,t&&!1===t.timeZoneHandling&&(this.timeZoneHandling=t.timeZoneHandling),t instanceof Array?n={json:t,offline:!0}:"object"==typeof t?(t.json||(t.json=[]),n={url:t.url,insertUrl:t.insertUrl,removeUrl:t.removeUrl,updateUrl:t.updateUrl,crudUrl:t.crudUrl,batchUrl:t.batchUrl,json:t.json,headers:t.headers,accept:t.accept,data:t.data,timeTillExpiration:t.timeTillExpiration,cachingPageSize:t.cachingPageSize,enableCaching:t.enableCaching,requestType:t.requestType,key:t.key,crossDomain:t.crossDomain,jsonp:t.jsonp,dataType:t.dataType,offline:void 0!==t.offline?t.offline:!(t.adaptor instanceof rc)&&!t.url,requiresFormat:t.requiresFormat}):Zh.throwError("DataManager: Invalid arguments"),void 0!==n.requiresFormat||Zh.isCors()||(n.requiresFormat=!!F(n.crossDomain)||n.crossDomain),void 0===n.dataType&&(n.dataType="json"),this.dataSource=n,this.defaultQuery=e,n.url&&n.offline&&!n.json.length?(this.isDataAvailable=!1,this.adaptor=i||new tc,this.dataSource.offline=!1,this.ready=this.executeQuery(e||new qh),this.ready.then(function(t){r.dataSource.offline=!0,r.isDataAvailable=!0,n.json=t.result,r.adaptor=new Qh})):this.adaptor=n.offline?new Qh:new tc,!n.jsonp&&this.adaptor instanceof tc&&(n.jsonp="callback"),this.adaptor=i||this.adaptor,n.enableCaching&&(this.adaptor=new oc(this.adaptor,n.timeTillExpiration,n.cachingPageSize)),this}return t.prototype.setDefaultQuery=function(t){return this.defaultQuery=t,this},t.prototype.executeLocal=function(e){this.defaultQuery||e instanceof qh||Zh.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||Zh.throwError("DataManager - executeLocal() : Json data is required to execute"),e=e||this.defaultQuery;var i=this.adaptor.processQuery(this,e);if(e.subQuery){var n=e.subQuery.fromTable,r=e.subQuery.lookups,o=e.isCountRequired?i.result:i;r&&r instanceof Array&&Zh.buildHierarchy(e.subQuery.fKey,n,o,r,e.subQuery.key);for(var s=0;s<o.length;s++)o[s][n]instanceof Array&&(o[s]=V({},{},o[s]),o[s][n]=this.adaptor.processResponse(e.subQuery.using(new t(o[s][n].slice(0))).executeLocal(),this,e))}return this.adaptor.processResponse(i,this,e)},t.prototype.executeQuery=function(e,i,n,r){var o=this;"function"==typeof e&&(r=n,n=i,i=e,e=null),e||(e=this.defaultQuery),e instanceof qh||Zh.throwError("DataManager - executeQuery() : A query is required to execute");var s=new ac,a={query:e};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!F(this.adaptor.makeRequest)){var l=this.adaptor.processQuery(this,e);F(this.adaptor.makeRequest)?F(l.url)?(a=t.getDeferedArgs(e,l,a),s.resolve(a)):this.makeRequest(l,s,a,e):this.adaptor.makeRequest(l,s,a,e)}else t.nextTick(function(){var i=o.executeLocal(e);a=t.getDeferedArgs(e,i,a),s.resolve(a)});return(i||n)&&s.promise.then(i,n),r&&s.promise.then(r,r),s.promise},t.getDeferedArgs=function(t,e,i){return t.isCountRequired?(i.result=e.result,i.count=e.count,i.aggregates=e.aggregates):i.result=e,i},t.nextTick=function(t){(window.setImmediate||window.setTimeout)(t,0)},t.prototype.extendRequest=function(t,e,i){return V({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:e,onFailure:i},t)},t.prototype.makeRequest=function(t,e,i,n){var r=this,o=!!n.subQuerySelector,s=function(t){i.error=t,e.reject(i)},a=function(t,n,r,o,s,a,l){i.xhr=r,i.count=n?parseInt(n.toString(),10):0,i.result=t,i.request=o,i.aggregates=a,i.actual=s,i.virtualSelectRecords=l,e.resolve(i)},l=function(t,e){var l=new ac,h={parent:i};n.subQuery.isChild=!0;var c=r.adaptor.processQuery(r,n.subQuery,t?r.adaptor.processResponse(t):e),d=r.makeRequest(c,l,h,n.subQuery);return o||l.then(function(e){t&&(Zh.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,t,e,n.subQuery.key),a(t,e.count,e.xhr))},s),d},h=this.extendRequest(t,function(t,e){-1===e.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&r.dateParse&&(t=Zh.parse.parseJson(t));var i=r.adaptor.processResponse(t,r,n,e.httpRequest,e),s=0,h=null,c=t.virtualSelectRecords;n.isCountRequired&&(s=i.count,h=i.aggregates,i=i.result),n.subQuery?o||l(i,e):a(i,s,e.httpRequest,e.type,t,h,c)},s),c=new Ut(h);if(c.beforeSend=function(){r.beforeSend(c.httpRequest,c)},(h=c.send()).catch(function(t){return!0}),this.requests.push(c),o){var d=n.subQuerySelector.call(this,{query:n.subQuery,parent:n});d&&d.length?Promise.all([h,l(null,d)]).then(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],s=r.adaptor.processResponse(i[0],r,n,r.requests[0].httpRequest,r.requests[0]),l=0;n.isCountRequired&&(l=s.count,s=s.result);var h=r.adaptor.processResponse(i[1],r,n.subQuery,r.requests[1].httpRequest,r.requests[1]);l=0,n.subQuery.isCountRequired&&(l=h.count,h=h.result),Zh.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,s,h,n.subQuery.key),o=!1,a(s,l,r.requests[0].httpRequest)}):o=!1}return h},t.prototype.beforeSend=function(t,e){this.adaptor.beforeSend(this,t,e);for(var i,n=this.dataSource.headers,r=0;n&&r<n.length;r++){i=[];for(var o=0,s=Object.keys(n[r]);o<s.length;o++){var a=s[o];i.push(a),t.setRequestHeader(a,n[r][a])}}},t.prototype.saveChanges=function(t,e,i,n,r){var o=this;i instanceof qh&&(n=i,i=null);var s={url:i,key:e||this.dataSource.key},a=this.adaptor.batchRequest(this,t,s,n||new qh,r);if(this.dataSource.offline)return a;if(F(this.adaptor.doAjaxRequest)){var l=new ac,h=new Ut(a);return h.beforeSend=function(){o.beforeSend(h.httpRequest,h)},h.onSuccess=function(e,i){l.resolve(o.adaptor.processResponse(e,o,null,i.httpRequest,i,t,s))},h.onFailure=function(t){l.reject([{error:t}])},h.send().catch(function(t){return!0}),l.promise}return this.adaptor.doAjaxRequest(a)},t.prototype.insert=function(t,e,i,n){e instanceof qh&&(i=e,e=null);var r=this.adaptor.insert(this,t,e,i,n);return this.dataSource.offline?r:F(this.adaptor.doAjaxRequest)?this.doAjaxRequest(r):this.adaptor.doAjaxRequest(r)},t.prototype.remove=function(t,e,i,n){"object"==typeof e&&(e=Zh.getObject(t,e)),i instanceof qh&&(n=i,i=null);var r=this.adaptor.remove(this,t,e,i,n);return this.dataSource.offline?r:F(this.adaptor.doAjaxRequest)?this.doAjaxRequest(r):this.adaptor.doAjaxRequest(r)},t.prototype.update=function(t,e,i,n,r){i instanceof qh&&(n=i,i=null);var o=this.adaptor.update(this,t,e,i,n,r);return this.dataSource.offline?o:F(this.adaptor.doAjaxRequest)?this.doAjaxRequest(o):this.adaptor.doAjaxRequest(o)},t.prototype.doAjaxRequest=function(t){var e=this,i=new ac;t=V({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},t);var n=new Ut(t);return n.beforeSend=function(){e.beforeSend(n.httpRequest,n)},n.onSuccess=function(t,n){try{Zh.parse.parseJson(t)}catch(e){t=[]}t=e.adaptor.processResponse(Zh.parse.parseJson(t),e,null,n.httpRequest,n),i.resolve(t)},n.onFailure=function(t){i.reject([{error:t}])},n.send().catch(function(t){return!0}),i.promise},t}(),ac=function(){return function(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}(),lc={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};function hc(t,e){var i={};if(F(t)||"string"==typeof t||"number"==typeof t||!F(t.isHeader))return t;for(var n=0,r=Object.keys(e);n<r.length;n++){var o=e[r[n]],s=F(o)||"string"!=typeof o?void 0:R(o,t);F(s)||(i[o]=s)}return i}!function(t){t.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null};var e={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},i={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:t.defaultMappedFields,ariaAttributes:e,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function n(t,e,i,n){return b(t,r(t,e,i,n),null,n)}function r(t,e,n,r){var o=[],s=V({},i,r);lc=m(s.moduleName);for(var a=u(),l=0;l<e.length;l++)if(!F(e[l])){var h=void 0;if(s.itemCreating&&"function"==typeof s.itemCreating){var c={dataSource:e,curData:e[l],text:e[l],options:s};s.itemCreating(c)}if(h=n?g(t,e[l],void 0,null,null,[],null,a,l,r):v(t,e[l],void 0,null,null,r),s.itemCreated&&"function"==typeof s.itemCreated){c={dataSource:e,curData:e[l],text:e[l],item:h,options:s};s.itemCreated(c)}o.push(h)}return o}function o(n,r,o,s,a){var l=V({},i,o);lc=m(l.moduleName);var h,p=V({},t.defaultMappedFields,l.fields),y=V({},e,l.ariaAttributes),b=[];s&&(y.level=s);var w,S,x=[];r&&r.length&&!F(c(r).item)&&!c(r).item.hasOwnProperty(p.id)&&(h=u());for(var C=0;C<r.length;C++){var P=hc(r[C],p);if(!F(r[C])){if(l.itemCreating&&"function"==typeof l.itemCreating){var O={dataSource:r,curData:r[C],text:P[p.text],options:l,fields:p};l.itemCreating(O)}var E=r[C];l.itemCreating&&"function"==typeof l.itemCreating&&(P=hc(r[C],p)),P.hasOwnProperty(p.id)&&!F(P[p.id])&&(h=P[p.id]);var L=[];if(l.showCheckBox&&(l.itemNavigable&&(P[p.url]||P[p.urlAttributes])?b.push(n("input",{className:lc.check,attrs:{type:"checkbox"}})):L.push(n("input",{className:lc.check,attrs:{type:"checkbox"}}))),!0===a)l.showIcon&&P.hasOwnProperty(p.iconCss)&&!F(P[p.iconCss])&&L.push(n("span",{className:lc.icon+" "+P[p.iconCss]})),S=(w=g(n,E,P,p,l.itemClass,L,!(!E.hasOwnProperty("isHeader")||!E.isHeader),h,C,o)).querySelector("."+lc.anchorWrap),l.itemNavigable&&b.length&&ri(b,w.firstElementChild);else{if((w=v(n,E,P,p,l.itemClass,o)).classList.add(lc.level+"-"+y.level),w.setAttribute("aria-level",y.level.toString()),S=w.querySelector("."+lc.anchorWrap),P.hasOwnProperty(p.tooltip)&&w.setAttribute("title",P[p.tooltip]),P.hasOwnProperty(p.htmlAttributes)&&P[p.htmlAttributes]&&d(w,P[p.htmlAttributes]),P.hasOwnProperty(p.enabled)&&!1===P[p.enabled]&&w.classList.add(lc.disabled),P.hasOwnProperty(p.isVisible)&&!1===P[p.isVisible]&&(w.style.display="none"),P.hasOwnProperty(p.imageUrl)&&!F(P[p.imageUrl])&&!l.template){var I={src:P[p.imageUrl]};_(I,P[p.imageAttributes]);var T=n("img",{className:lc.image,attrs:I});S?S.insertAdjacentElement("afterbegin",T):ri([T],w.firstElementChild)}if(l.showIcon&&P.hasOwnProperty(p.iconCss)&&!F(P[p.iconCss])&&!l.template){var A;A=n("div",{className:lc.icon+" "+P[p.iconCss]}),S?S.insertAdjacentElement("afterbegin",A):ri([A],w.firstElementChild)}L.length&&ri(L,w.firstElementChild),l.itemNavigable&&b.length&&ri(b,w.firstElementChild),f(n,P,p,r,l,w,y.level)}if(S&&ti([w],[lc.navigable]),l.itemCreated&&"function"==typeof l.itemCreated){O={dataSource:r,curData:r[C],text:P[p.text],item:w,options:l,fields:p};l.itemCreated(O)}b=[],x.push(w)}}return x}function s(t,e,n,r,s){var a=V({},i,n);return b(t,o(t,e,n,r,s),a.listClass,n)}function a(t,e){if(e&&t){return Array.prototype.slice.call(e).indexOf(t)}}function l(t,e,i){if(void 0===i&&(i=new qh),"Ascending"===t)i.sortBy(e,"ascending",!0);else if("Descending"===t)i.sortBy(e,"descending",!0);else for(var n=0;n<i.queries.length;n++)"onSortBy"===i.queries[n].fn&&i.queries.splice(n,1);return i}function h(t,e){return new sc(t).executeLocal(e)}function c(t){for(var e={typeof:null,item:null},i=0;i<t.length;i++)if(!F(t[i]))return{typeof:typeof t[i],item:t[i]};return e}function d(t,e){var i={};_(i,e),i.class&&(ti([t],i.class.split(" ")),delete i.class),hi(t,i)}function p(t){for(var e={},i=t.attributes,n=0;n<i.length;n++)e[i[n].nodeName]=i[n].nodeValue;return e}function u(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function f(t,e,i,n,r,o,a){var l=e[i.child]||[],h=e[i.hasChildren];if(l.length&&(h=!0,o.classList.add(lc.hasChild),r.processSubChild)){var c=s(t,l,r,++a);o.appendChild(c)}r.expandCollapse&&h&&!r.template&&(o.firstElementChild.classList.add(lc.iconWrapper),("Left"===r.expandIconPosition?ri:oi)([t("div",{className:"e-icons "+r.expandIconClass})],o.querySelector("."+lc.textContent)))}function g(t,n,r,o,s,a,l,h,c,p){var u,f,g=V({},i,p),m=V({},e,g.ariaAttributes),v=n,b=n;"string"!=typeof n&&"number"!=typeof n&&"boolean"!=typeof n&&(u=n,v="boolean"==typeof r[o.text]||"number"==typeof r[o.text]?r[o.text]:r[o.text]||"",b=r[o.value]),f=F(u)||F(r[o.id])||""===r[o.id]?h+"-"+c:h;var w=t("li",{className:(!0===l?lc.group:lc.li)+" "+(F(s)?"":s),id:f,attrs:""!==m.groupItemRole&&""!==m.itemRole?{role:!0===l?m.groupItemRole:m.itemRole}:{}});return u&&r.hasOwnProperty(o.enabled)&&"false"===r[o.enabled].toString()&&w.classList.add(lc.disabled),l?w.innerText=v:(w.setAttribute("data-value",F(b)?"null":b),w.setAttribute("role","option"),u&&r.hasOwnProperty(o.htmlAttributes)&&r[o.htmlAttributes]&&d(w,r[o.htmlAttributes]),a.length&&!g.itemNavigable&&oi(a,w),u&&(r[o.url]||r[o.urlAttributes]&&r[o.urlAttributes].href)?w.appendChild(y(t,u,o,v,a,g.itemNavigable)):(a.length&&g.itemNavigable&&oi(a,w),w.appendChild(document.createTextNode(v)))),w}function m(t){return{li:"e-"+t+"-item",ul:"e-"+t+"-parent e-ul",group:"e-"+t+"-group-item",icon:"e-"+t+"-icon",text:"e-"+t+"-text",check:"e-"+t+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+t+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+t+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function y(t,e,i,n,r,o){var s,a=hc(e,i),l={href:a[i.url]};if(a.hasOwnProperty(i.urlAttributes)&&a[i.urlAttributes]&&(_(l,a[i.urlAttributes]),l.href=a[i.url]?a[i.url]:a[i.urlAttributes].href),o){s=t("a",{className:lc.text+" "+lc.url});var h=t("div",{className:lc.anchorWrap});r&&r.length&&oi(r,h),h.appendChild(document.createTextNode(n)),oi([h],s)}else s=t("a",{className:lc.text+" "+lc.url,innerHTML:n});return d(s,l),s}function v(t,n,r,o,s,a){var l,h,c,d=V({},i,a),p=V({},e,d.ariaAttributes),f=n;"string"!=typeof n&&"number"!=typeof n&&(c=n,f=r[o.text]||"",l=F(r._id)?r[o.id]:r._id,h=!(!n.hasOwnProperty("isHeader")||!n.isHeader)),a&&a.enableHtmlSanitizer&&(f=zn.sanitize(f));var g=t("li",{className:(!0===h?lc.group:lc.li)+" "+(F(s)?"":s),attrs:""!==p.groupItemRole&&""!==p.itemRole?{role:!0===h?p.groupItemRole:p.itemRole}:{}});F(l)?g.setAttribute("data-uid",u()):g.setAttribute("data-uid",l);if(a&&a.removeBlazorID&&"object"==typeof n&&n.hasOwnProperty("BlazId")&&delete n.BlazId,h&&a&&a.groupTemplate)oi(Te(a.groupTemplate)(n,null,null,d.groupTemplateID,!!d.isStringTemplate),g);else if(!h&&a&&a.template){oi(Te(a.template)(n,null,null,d.templateID,!!d.isStringTemplate),g)}else{var m=t("div",{className:lc.textContent,attrs:""!==p.wrapperRole?{role:p.wrapperRole}:{}});if(c&&(r[o.url]||r[o.urlAttributes]&&r[o.urlAttributes].href))m.appendChild(y(t,c,o,f,null,d.itemNavigable));else{var v=t("span",{className:lc.text,attrs:""!==p.itemText?{role:p.itemText}:{}});a&&a.enableHtmlSanitizer?v.innerText=zn.sanitize(f):v.innerHTML=f,m.appendChild(v)}g.appendChild(m)}return g}function b(t,n,r,o){var s=V({},i,o),a=V({},e,s.ariaAttributes),l=t("ul",{className:(lc=m(s.moduleName)).ul+" "+(F(r)?"":r),attrs:""!==a.listRole?{role:a.listRole}:{}});return oi(n,l),l}t.createList=function(t,r,o,a){var l=V({},i,o),h=V({},e,l.ariaAttributes),d=c(r).typeof;return"string"===d||"number"===d?n(t,r,a,o):s(t,r,o,h.level,a)},t.createListFromArray=n,t.createListItemFromArray=r,t.createListItemFromJson=o,t.createListFromJson=s,t.getSiblingLI=function(t,e,n){if(lc=m(i.moduleName),t&&t.length){var r,o,s=Array.prototype.slice.call(t);for(r=s[(o=e?a(e,s):!0===n?s.length:-1)+(!0===n?-1:1)];r&&(!ni(r)||r.classList.contains(lc.disabled));)r=s[o+=!0===n?-1:1];return r}},t.indexOf=a,t.groupDataSource=function(e,i,n){void 0===n&&(n="None");var r=V({},t.defaultMappedFields,i),o=(new qh).group(r.groupBy),s=h(e,o=l(n,"key",o));e=[];for(var a=0;a<s.length;a++){var c=s[a].items,d={};d[r.text]=s[a].key,d.isHeader=!0;var p=r.text;"id"===p&&(d[p="text"]=s[a].key),d._id="group-list-item-"+(s[a].key?s[a].key.toString().trim():"undefined"),d.items=c,e.push(d);for(var u=0;u<c.length;u++)e.push(c[u])}return e},t.addSorting=l,t.getDataSource=h,t.createJsonFromElement=function e(n,r){var o=V({},i,r),s=V({},t.defaultMappedFields,o.fields),a=n.cloneNode(!0),l=[];a.classList.add("json-parent");var h=a.querySelectorAll(".json-parent>li");a.classList.remove("json-parent");for(var c=0;c<h.length;c++){for(var d=h[c],f=d.querySelector("a"),g=d.querySelector("ul"),m={},y=f?f.childNodes:d.childNodes,v=Object.keys(y),b=0;b<y.length;b++)y[Number(v[b])].hasChildNodes()||(m[s.text]=y[Number(v[b])].textContent);var w=p(d);w.id?(m[s.id]=w.id,delete w.id):m[s.id]=u(),Object.keys(w).length&&(m[s.htmlAttributes]=w),f&&(w=p(f),Object.keys(w).length&&(m[s.urlAttributes]=w)),g&&(m[s.child]=e(g,r)),l.push(m)}return l},t.renderContentTemplate=function(e,n,r,o,s){for(var a=e("ul",{className:(lc=m(i.moduleName)).ul,attrs:{role:"presentation"}}),l=V({},i,s),h=V({},t.defaultMappedFields,o),c=Te(n),d=[],p=u(),f=0;f<r.length;f++){var g=hc(r[f],h),y=r[f],v=y.isHeader,b=g[h.value];if(l.itemCreating&&"function"==typeof l.itemCreating){var w={dataSource:r,curData:y,text:b,options:l,fields:h};l.itemCreating(w)}l.itemCreating&&"function"==typeof l.itemCreating&&(b=(g=hc(r[f],h))[h.value]);var S=e("li",{id:p+"-"+f,className:v?lc.group:lc.li,attrs:{role:"presentation"}});v?S.innerText=g[h.text]:(oi(c(y,null,null,v?l.groupTemplateID:l.templateID,!!l.isStringTemplate),S),S.setAttribute("data-value",F(b)?"null":b),S.setAttribute("role","option")),l.itemCreated&&"function"==typeof l.itemCreated&&(w={dataSource:r,curData:y,text:b,item:S,options:l,fields:h},l.itemCreated(w)),d.push(S)}return oi(d,a),a},t.renderGroupTemplate=function(e,n,r,o,s){for(var a=Te(e),l=V({},t.defaultMappedFields,r),h=V({},i,s),c=l.groupBy,d=0,p=o;d<p.length;d++){var u=p[d],f={};f[c]=u.textContent,u.innerHTML="",oi(a(f,null,null,h.groupTemplateID,!!h.isStringTemplate),u)}return o},t.generateId=u,t.generateUL=b,t.generateIcon=function(t,e,n,r){var o=V({},i,r);return lc=m(o.moduleName),("Left"===o.expandIconPosition?ri:oi)([t("div",{className:"e-icons "+o.expandIconClass+" "+(F(n)?"":n)})],e.querySelector("."+lc.textContent)),e}}(Gh||(Gh={}));var cc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dc=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},pc={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},uc={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},fc={root:"e-listview",hover:"e-hover",selected:"e-active",focused:"e-focused",parentItem:"e-list-parent",listItem:"e-list-item",listIcon:"e-list-icon",textContent:"e-text-content",listItemText:"e-list-text",groupListItem:"e-list-group-item",hasChild:"e-has-child",view:"e-view",header:"e-list-header",headerText:"e-headertext",headerTemplateText:"e-headertemplate-text",text:"e-text",disable:"e-disabled",content:"e-content",icon:"e-icons",backIcon:"e-icon-back",checkboxWrapper:"e-checkbox-wrapper",checkbox:"e-checkbox",checked:"e-check",checklist:"e-checklist",checkboxIcon:"e-frame",checkboxRight:"e-checkbox-right",checkboxLeft:"e-checkbox-left",listviewCheckbox:"e-listview-checkbox",itemCheckList:"e-checklist",virtualElementContainer:"e-list-virtualcontainer"},gc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cc(e,t),dc([Hi("id")],e.prototype,"id",void 0),dc([Hi("text")],e.prototype,"text",void 0),dc([Hi("isChecked")],e.prototype,"isChecked",void 0),dc([Hi("isVisible")],e.prototype,"isVisible",void 0),dc([Hi("enabled")],e.prototype,"enabled",void 0),dc([Hi("iconCss")],e.prototype,"iconCss",void 0),dc([Hi("child")],e.prototype,"child",void 0),dc([Hi("tooltip")],e.prototype,"tooltip",void 0),dc([Hi("groupBy")],e.prototype,"groupBy",void 0),dc([Hi("text")],e.prototype,"sortBy",void 0),dc([Hi("htmlAttributes")],e.prototype,"htmlAttributes",void 0),dc([Hi("tableName")],e.prototype,"tableName",void 0),e}(ln),mc=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.itemReRender=!1,n.previousSelectedItems=[],n.hiddenItems=[],n.enabledItems=[],n.disabledItems=[],n}return cc(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"htmlAttributes":this.setHTMLAttribute();break;case"cssClass":this.setCSSClass(e.cssClass);break;case"enable":this.setEnable();break;case"width":case"height":this.setSize();break;case"enableRtl":this.setEnableRTL();break;case"fields":this.listBaseOption.fields=this.fields.properties,this.enableVirtualization?this.isServerRendered&&$()||this.virtualizationModule.reRenderUiVirtualization():($()&&this.isServerRendered&&!this.enableVirtualization&&(this.itemReRender=!0),this.reRender());break;case"headerTitle":this.curDSLevel.length||this.header(this.headerTitle,!1);break;case"query":this.enableVirtualization?$()&&this.isServerRendered||this.virtualizationModule.reRenderUiVirtualization():($()&&this.isServerRendered&&!this.enableVirtualization&&(this.itemReRender=!0),this.reRender());break;case"showHeader":this.header(this.headerTitle,!1);break;case"enableVirtualization":F(this.contentContainer)||ai(this.contentContainer),this.refresh();break;case"showCheckBox":case"checkBoxPosition":$()&&this.isServerRendered||(this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.setCheckbox());break;case"dataSource":this.enableVirtualization?this.isServerRendered&&$()||this.virtualizationModule.reRenderUiVirtualization():($()&&this.isServerRendered&&!this.enableVirtualization&&(this.itemReRender=!0),this.reRender());break;case"sortOrder":case"showIcon":$()&&this.isServerRendered?this.interopAdaptor.invokeMethodAsync("ItemSorting"):this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():(this.listBaseOption.showIcon=this.showIcon,this.curViewDS=this.getSubDS(),this.resetCurrentList())}}},e.prototype.setHTMLAttribute=function(){Object.keys(this.htmlAttributes).length&&hi(this.element,this.htmlAttributes)},e.prototype.setCSSClass=function(t){this.cssClass&&ti([this.element],this.cssClass.split(" ").filter(function(t){return t})),t&&ei([this.element],t.split(" ").filter(function(t){return t}))},e.prototype.setSize=function(){this.element.style.height=J(this.height),this.element.style.width=J(this.width),this.isWindow=!this.element.clientHeight},e.prototype.setEnable=function(){this.enableElement(this.element,this.enable)},e.prototype.setEnableRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},e.prototype.enableElement=function(t,e){e?t.classList.remove(fc.disable):t.classList.add(fc.disable)},e.prototype.header=function(t,e){if($()&&this.isServerRendered){var i={HeaderText:t,BackButton:e};this.interopAdaptor.invokeMethodAsync("HeaderTitle",i)}else if(void 0===this.headerEle&&this.showHeader){this.enableHtmlSanitizer&&this.setProperties({headerTitle:zn.sanitize(this.headerTitle)},!0),this.headerEle=this.createElement("div",{className:fc.header});var n=this.createElement("span",{className:fc.headerText,innerHTML:this.headerTitle}),r=this.createElement("div",{className:fc.text,innerHTML:n.outerHTML}),o=this.createElement("div",{className:fc.icon+" "+fc.backIcon+" e-but-back",attrs:{style:"display:none;"}});if(this.headerEle.appendChild(o),this.headerEle.appendChild(r),this.headerTemplate){var s=Te(this.headerTemplate),a=this.createElement("div",{className:fc.headerTemplateText});oi(s({},null,null,this.LISTVIEW_HEADERTEMPLATE_ID),a),oi([a],this.headerEle),this.updateBlazorTemplates(!1,!0,!0)}this.headerTemplate&&this.headerTitle&&r.classList.add("header"),this.element.classList.add("e-has-header"),ri([this.headerEle],this.element)}else if(this.headerEle)if(this.showHeader){this.headerEle.style.display="";r=this.headerEle.querySelector("."+fc.headerText),o=this.headerEle.querySelector("."+fc.backIcon);this.enableHtmlSanitizer&&(t=zn.sanitize(t)),r.innerHTML=t,this.headerTemplate&&e&&(r.parentElement.classList.remove("header"),this.headerEle.querySelector("."+fc.headerTemplateText).classList.add("nested-header")),this.headerTemplate&&!e&&(r.parentElement.classList.add("header"),this.headerEle.querySelector("."+fc.headerTemplateText).classList.remove("nested-header"),this.headerEle.querySelector("."+fc.headerTemplateText).classList.add("header")),o.style.display=!0===e?"":"none"}else this.headerEle.style.display="none"},e.prototype.switchView=function(t,e,i){var n=this;if(t&&e){var r=t.style.position,o="hidden"!==this.element.style.overflow?this.element.style.overflow:"";t.style.position="absolute",t.classList.add("e-view");var s=void 0,a=this.animation.duration;if(this.animation.effect)s=this.enableRtl?uc[this.animation.effect]:pc[this.animation.effect];else{s=pc.SlideLeft,i=this.enableRtl,a=0}this.element.style.overflow="hidden",this.aniObj.animate(t,{name:!0===i?s[0]:s[1],duration:a,timingFunction:this.animation.easing,end:function(e){t.style.display="none",n.element.style.overflow=o,t.style.position=r,t.classList.remove("e-view")}}),e.style.display="",this.aniObj.animate(e,{name:!0===i?s[2]:s[3],duration:a,timingFunction:this.animation.easing,end:function(){n.trigger("actionComplete")}}),this.curUL=e}},e.prototype.preRender=function(){this.listBaseOption={template:this.template,headerTemplate:this.headerTemplate,groupTemplate:this.groupTemplate,expandCollapse:!0,listClass:"",ariaAttributes:{itemRole:"option",listRole:"presentation",itemText:"",groupItemRole:"group",wrapperRole:"presentation"},fields:this.fields.properties,sortOrder:this.sortOrder,showIcon:this.showIcon,itemCreated:this.renderCheckbox.bind(this),templateID:this.element.id+"Template",groupTemplateID:this.element.id+"GroupTemplate",enableHtmlSanitizer:this.enableHtmlSanitizer,removeBlazorID:!0},this.initialization()},e.prototype.updateLiElementHeight=function(){var t=this.element.querySelector("."+fc.virtualElementContainer);t.children[0]&&(this.liElementHeight=t.children[0].getBoundingClientRect().height,this.interopAdaptor.invokeMethodAsync("LiElementHeight",this.liElementHeight))},e.prototype.initialization=function(){if($()&&this.isServerRendered&&this.enableVirtualization){var t=this.element.querySelector("."+fc.virtualElementContainer);null!==t&&(""===this.height&&(this.interopAdaptor.invokeMethodAsync("SetComponentHeight",window.innerHeight),this.isWindow=!0,t.scrollIntoView()),t.children[0]&&(this.liElementHeight=t.children[0].getBoundingClientRect().height,this.interopAdaptor.invokeMethodAsync("LiElementHeight",this.liElementHeight)))}this.curDSLevel=[],this.animateOptions={},this.curViewDS=[],this.currentLiElements=[],this.isNestedList=!1,this.selectedData=[],this.selectedId=[],this.LISTVIEW_TEMPLATE_ID=this.element.id+"Template",this.LISTVIEW_GROUPTEMPLATE_ID=this.element.id+"GroupTemplate",this.LISTVIEW_HEADERTEMPLATE_ID=this.element.id+"HeaderTemplate",this.aniObj=new Ji(this.animateOptions),this.removeElement(this.curUL),this.removeElement(this.ulElement),this.removeElement(this.headerEle),this.removeElement(this.contentContainer),this.curUL=this.ulElement=this.liCollection=this.headerEle=this.contentContainer=void 0},e.prototype.renderCheckbox=function(t){if(t.item.classList.contains(fc.hasChild)&&(this.isNestedList=!0),this.showCheckBox&&this.isValidLI(t.item)){var e=void 0;(e=ir(this.createElement,!1,{checked:!1,enableRtl:this.enableRtl,cssClass:fc.listviewCheckbox})).setAttribute("role","checkbox");var i=e.querySelector("."+fc.checkboxIcon);t.item.classList.add(fc.itemCheckList),t.item.firstElementChild.classList.add(fc.checkbox),"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?hc(t.curData,this.listBaseOption.fields)[this.listBaseOption.fields.isChecked]&&this.checkInternally(t,e):"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]||-1===this.selectedData.indexOf(t.text)||this.checkInternally(t,e),e.setAttribute("aria-checked",i.classList.contains(fc.checked)?"true":"false"),"Left"===this.checkBoxPosition?(e.classList.add(fc.checkboxLeft),t.item.firstElementChild.classList.add(fc.checkboxLeft),t.item.firstElementChild.insertBefore(e,t.item.firstElementChild.childNodes[0])):(e.classList.add(fc.checkboxRight),t.item.firstElementChild.classList.add(fc.checkboxRight),t.item.firstElementChild.appendChild(e)),this.currentLiElements.push(t.item),"Left"===this.checkBoxPosition?this.virtualCheckBox=t.item.firstElementChild.children[0]:this.virtualCheckBox=t.item.firstElementChild.lastElementChild}},e.prototype.checkInternally=function(t,e){t.item.classList.add(fc.selected),t.item.setAttribute("aria-selected","true"),e.querySelector("."+fc.checkboxIcon).classList.add(fc.checked),e.setAttribute("aria-checked","true")},e.prototype.checkItem=function(t){this.toggleCheckBase(t,!0)},e.prototype.toggleCheckBase=function(t,e){if(this.showCheckBox){var i=t;if(t instanceof Object&&t.constructor!==HTMLLIElement&&(i=this.getLiFromObjOrElement(t)),!F(i)){var n=i.querySelector("."+fc.checkboxIcon);e?i.classList.add(fc.selected):i.classList.remove(fc.selected),i.setAttribute("aria-selected",e?"true":"false"),e?n.classList.add(fc.checked):n.classList.remove(fc.checked),n.parentElement.setAttribute("aria-checked",e?"true":"false")}this.setSelectedItemData(i)}},e.prototype.uncheckItem=function(t){this.toggleCheckBase(t,!1)},e.prototype.checkAllItems=function(){this.toggleAllCheckBase(!0)},e.prototype.uncheckAllItems=function(){this.toggleAllCheckBase(!1)},e.prototype.toggleAllCheckBase=function(t){if(this.showCheckBox){for(var e=0;e<this.liCollection.length;e++){var i=this.liCollection[e].querySelector("."+fc.checkboxIcon);i&&(t?i.classList.contains(fc.checked)||this.checkItem(this.liCollection[e]):i.classList.contains(fc.checked)&&this.uncheckItem(this.liCollection[e]))}this.enableVirtualization&&this.virtualizationModule.checkedItem(t)}},e.prototype.setCheckbox=function(){if(this.showCheckBox)for(var t=Array.prototype.slice.call(this.element.querySelectorAll("."+fc.listItem)),e={item:void 0,curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:""},i=0;i<t.length;i++){var n=t[i];e.item=n,e.curData=this.getItemData(n),n.querySelector("."+fc.checkboxWrapper)&&this.removeElement(n.querySelector("."+fc.checkboxWrapper)),this.renderCheckbox(e),e.item.classList.contains(fc.selected)&&this.checkInternally(e,e.item.querySelector("."+fc.checkboxWrapper))}else{for(t=Array.prototype.slice.call(this.element.querySelectorAll("."+fc.itemCheckList)),i=0;i<t.length;i++){(n=t[i]).classList.remove(fc.selected),n.firstElementChild.classList.remove(fc.checkbox),this.removeElement(n.querySelector("."+fc.checkboxWrapper))}this.selectedItems&&this.selectedItems.item.classList.add(fc.selected)}},e.prototype.refreshItemHeight=function(){this.virtualizationModule.refreshItemHeight()},e.prototype.clickHandler=function(t){var e,i=t.target,n=i.classList;if(n.contains(fc.backIcon)||n.contains(fc.headerText))this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();else{var r=pi(i.parentNode,"."+fc.listItem);if(null===r&&(r=i),this.removeFocus(),this.enable&&this.showCheckBox&&this.isValidLI(r))if(t.target.classList.contains(fc.checkboxIcon)){if(r.classList.add(fc.focused),F(r.querySelector("."+fc.checked))){var o={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:r};this.checkInternally(o,o.item.querySelector("."+fc.checkboxWrapper))}else this.uncheckItem(r),r.classList.add(fc.focused);if(this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(r,t),t){var s=this.selectEventData(r,t);_(s,{isChecked:r.querySelector("."+fc.checkboxIcon).classList.contains(fc.checked)}),this.trigger("select",s)}}else r.classList.contains(fc.hasChild)?(this.removeHover(),this.removeSelect(),this.removeSelect(r),this.setSelectLI(r,t),r.classList.remove(fc.selected)):this.setCheckboxLI(r,t);else this.setSelectLI(r,t);void 0!==(e=pi(t.target,"li"))&&e.classList.contains("e-has-child")&&!t.target.parentElement.classList.contains("e-listview-checkbox")&&e.classList.add(fc.disable)}if($()&&this.isServerRendered&&this.enableVirtualization){var a=this.element.querySelector("."+fc.virtualElementContainer);if(a.querySelector(".e-active")){var l=a.querySelectorAll(".e-active");if(this.showCheckBox)for(var h=0;h<l.length;h++)this.previousSelectedItems.includes(l[h].getAttribute("data-uid"))||this.previousSelectedItems.push(l[h].getAttribute("data-uid"));else this.previousSelectedItems[0]=a.querySelector(".e-active").getAttribute("data-uid")}if(a.querySelector(".e-focused")){var c=a.querySelector(".e-focused");if(!c.classList.contains("e-active")){var d=c.getAttribute("data-uid");if(this.previousSelectedItems.includes(d)){var p=this.previousSelectedItems.slice(0,this.previousSelectedItems.indexOf(d)),u=this.previousSelectedItems.slice(this.previousSelectedItems.indexOf(d)+1,this.previousSelectedItems.length);this.previousSelectedItems=p.concat(u)}}}}},e.prototype.removeElement=function(t){return t&&t.parentNode&&t.parentNode.removeChild(t)},e.prototype.hoverHandler=function(t){var e=pi(t.target.parentNode,"."+fc.listItem);this.setHoverLI(e)},e.prototype.leaveHandler=function(t){this.removeHover()},e.prototype.homeKeyHandler=function(t,e){if(Object.keys(this.dataSource).length&&this.curUL){this.selectedItems&&this.selectedItems.item.setAttribute("aria-selected","false");var i=this.curUL.querySelectorAll("."+fc.listItem),n=this.curUL.querySelector("."+fc.focused)||this.curUL.querySelector("."+fc.selected);n&&(n.classList.remove(fc.focused),this.showCheckBox||n.classList.remove(fc.selected));var r=e?i.length-1:0;i[r].classList.contains(fc.hasChild)||this.showCheckBox?i[r].classList.add(fc.focused):this.setSelectLI(i[r],t),i[r]?this.element.setAttribute("aria-activedescendant",i[r].id.toString()):this.element.removeAttribute("aria-activedescendant")}},e.prototype.onArrowKeyDown=function(t,e){var i,n;return!F(this.curUL.querySelector("."+fc.hasChild))||this.showCheckBox?(n=this.curUL.querySelector("."+fc.focused)||this.curUL.querySelector("."+fc.selected),F(i=Gh.getSiblingLI(this.curUL.querySelectorAll("."+fc.listItem),n,e))||(n&&(n.classList.remove(fc.focused),this.showCheckBox||n.classList.remove(fc.selected)),i.classList.contains(fc.hasChild)||this.showCheckBox?i.classList.add(fc.focused):this.setSelectLI(i,t))):(n=this.curUL.querySelector("."+fc.selected),i=Gh.getSiblingLI(this.curUL.querySelectorAll("."+fc.listItem),n,e),this.setSelectLI(i,t)),i?this.element.setAttribute("aria-activedescendant",i.id.toString()):this.element.removeAttribute("aria-activedescendant"),i},e.prototype.arrowKeyHandler=function(t,e){var i=this;if(t.preventDefault(),Object.keys(this.dataSource).length&&this.curUL){var n=this.onArrowKeyDown(t,e),r=this.element.getBoundingClientRect().top,o=this.element.getBoundingClientRect().height,s=this.curUL.querySelector("."+fc.listItem).getBoundingClientRect(),a=void 0,l=void 0;if(this.fields.groupBy&&(l=this.curUL.querySelector("."+fc.groupListItem).getBoundingClientRect()),n){var h=n.getBoundingClientRect().top,c=n.getBoundingClientRect().height;if(e)(a=this.isWindow?h:h-r)<0&&(this.isWindow?window.scroll(0,pageYOffset+a):this.element.scrollTop=this.element.scrollTop+a);else{var d=this.isWindow?window.innerHeight:o;(a=this.isWindow?h+c:h-r+c)>d&&(this.isWindow?window.scroll(0,pageYOffset+(a-d)):this.element.scrollTop=this.element.scrollTop+(a-d))}}else if(this.enableVirtualization&&e&&this.virtualizationModule.uiFirstIndex)this.onUIScrolled=function(){i.onArrowKeyDown(t,e),i.onUIScrolled=void 0},a=this.virtualizationModule.listItemHeight,this.isWindow?window.scroll(0,pageYOffset-a):this.element.scrollTop=this.element.scrollTop-a;else if(e)if(this.showHeader&&this.headerEle){var p=l?l.top:s.top,u=this.headerEle.getBoundingClientRect();a=u.top<0?u.height-p:0,this.isWindow?window.scroll(0,pageYOffset-a):this.element.scrollTop=0}else this.fields.groupBy&&(a=this.isWindow?l.top<0?l.top:0:r-s.top+l.height,this.isWindow?window.scroll(0,pageYOffset+a):this.element.scrollTop=this.element.scrollTop-a)}},e.prototype.enterKeyHandler=function(t){if(Object.keys(this.dataSource).length&&this.curUL){var e=!F(this.curUL.querySelector("."+fc.hasChild)),i=this.curUL.querySelector("."+fc.focused);e&&i&&(i.classList.remove(fc.focused),this.showCheckBox&&(this.removeSelect(),this.removeSelect(i),this.removeHover()),this.setSelectLI(i,t))}},e.prototype.spaceKeyHandler=function(t){if(this.enable&&this.showCheckBox&&Object.keys(this.dataSource).length&&this.curUL){var e=this.curUL.querySelector("."+fc.focused);if(!F(e)&&F(e.querySelector("."+fc.checked))){var i={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:e};this.checkInternally(i,i.item.querySelector("."+fc.checkboxWrapper))}else this.uncheckItem(e)}},e.prototype.keyActionHandler=function(t){switch(t.keyCode){case 36:this.homeKeyHandler(t);break;case 35:this.homeKeyHandler(t,!0);break;case 40:this.arrowKeyHandler(t);break;case 38:this.arrowKeyHandler(t,!0);break;case 13:this.enterKeyHandler(t);break;case 8:this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();break;case 32:this.spaceKeyHandler(t)}},e.prototype.swipeActionHandler=function(t){"Right"===t.swipeDirection&&t.velocity>.5&&"touchend"===t.originalEvent.type&&(this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back())},e.prototype.focusout=function(){if(Object.keys(this.dataSource).length&&this.curUL){var t=this.curUL.querySelector("."+fc.focused),e=this.curUL.querySelector("[aria-selected = true]");t&&(t.classList.remove(fc.focused),e&&!this.showCheckBox&&e.classList.add(fc.selected))}},e.prototype.wireEvents=function(){ee.add(this.element,"keydown",this.keyActionHandler,this),ee.add(this.element,"click",this.clickHandler,this),this.enableVirtualization||(ee.add(this.element,"mouseover",this.hoverHandler,this),ee.add(this.element,"mouseout",this.leaveHandler,this)),ee.add(this.element,"focusout",this.focusout,this),this.touchModule=new kn(this.element,{swipe:this.swipeActionHandler.bind(this)})},e.prototype.unWireEvents=function(){ee.remove(this.element,"click",this.clickHandler),this.enableVirtualization||(ee.remove(this.element,"mouseover",this.hoverHandler),ee.remove(this.element,"mouseout",this.leaveHandler)),ee.remove(this.element,"mouseover",this.hoverHandler),ee.remove(this.element,"mouseout",this.leaveHandler),this.touchModule.destroy()},e.prototype.removeFocus=function(){for(var t=0,e=this.element.querySelectorAll("."+fc.focused);t<e.length;t++){e[t].classList.remove(fc.focused)}},e.prototype.removeHover=function(){var t=this.element.querySelector("."+fc.hover);t&&t.classList.remove(fc.hover)},e.prototype.removeSelect=function(t){if(F(t))for(var e=0,i=this.element.querySelectorAll("."+fc.selected);e<i.length;e++){var n=i[e];this.showCheckBox&&n.querySelector("."+fc.checked)||(n.setAttribute("aria-selected","false"),n.classList.remove(fc.selected))}else t.classList.remove(fc.selected),t.setAttribute("aria-selected","false")},e.prototype.isValidLI=function(t){return t&&t.classList.contains(fc.listItem)&&!t.classList.contains(fc.groupListItem)&&!t.classList.contains(fc.disable)},e.prototype.setCheckboxLI=function(t,e){if(this.isValidLI(t)&&this.enable&&this.showCheckBox){this.curUL.querySelector("."+fc.focused)&&this.curUL.querySelector("."+fc.focused).classList.remove(fc.focused),t.classList.add(fc.focused);var i=t.querySelector("."+fc.checkboxWrapper),n=i.querySelector("."+fc.checkboxIcon+"."+fc.icon);this.removeHover(),n.classList.contains(fc.checked)?(n.classList.remove(fc.checked),t.classList.remove(fc.selected),t.setAttribute("aria-selected","false")):(n.classList.add(fc.checked),t.classList.add(fc.selected),t.setAttribute("aria-selected","true")),i.setAttribute("aria-checked",n.classList.contains(fc.checked)?"true":"false");var r=this.selectEventData(t,e);_(r,{isChecked:n.classList.contains(fc.checked)}),this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(t,e),this.trigger("select",r),this.setSelectedItemData(t),this.renderSubList(t)}},e.prototype.selectEventData=function(t,e){var i=this.getItemData(t),n=hc(i,this.listBaseOption.fields),r={};return _(r,!F(i)&&"string"==typeof this.dataSource[0]||"number"==typeof this.dataSource[0]?{item:t,text:t&&t.innerText.trim(),data:this.dataSource}:{item:t,text:n&&n[this.listBaseOption.fields.text],data:i}),e&&_(r,{isInteracted:!0,event:e,index:this.curUL&&Array.prototype.indexOf.call(this.curUL.children,t)}),r},e.prototype.setSelectedItemData=function(t){var e=this.getItemData(t),i=hc(e,this.listBaseOption.fields);F(e)||"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?this.selectedItems={item:t,text:i&&i[this.listBaseOption.fields.text],data:e}:this.selectedItems={item:t,text:t&&t.innerText.trim(),data:this.dataSource}},e.prototype.setSelectLI=function(t,e){if(this.isValidLI(t)&&!t.classList.contains(fc.selected)&&this.enable){this.showCheckBox||this.removeSelect(),t.classList.add(fc.selected),t.setAttribute("aria-selected","true"),this.removeHover(),this.setSelectedItemData(t),this.enableVirtualization&&this.virtualizationModule.setSelectLI(t,e);var i=this.selectEventData(t,e);this.trigger("select",i),this.selectedLI=t,this.renderSubList(t)}},e.prototype.setHoverLI=function(t){if(this.isValidLI(t)&&!t.classList.contains(fc.hover)&&this.enable){var e=this.element.querySelectorAll("."+fc.hover);e&&e.length&&ei(e,fc.hover),t.classList.contains(fc.selected)&&!this.showCheckBox||t.classList.add(fc.hover)}},e.prototype.getSubDS=function(){var t=this.curDSLevel;if(t.length){for(var e=this.localData,i=0,n=t;i<n.length;i++){var r=n[i],o={};o[this.fields.id]=r,this.curDSJSON=this.findItemFromDS(e,o);var s=hc(this.curDSJSON,this.listBaseOption.fields);e=this.curDSJSON?s[this.fields.child]:e}return e}return this.localData},e.prototype.getItemData=function(t){var e,i=this.dataSource instanceof sc?this.localData:this.dataSource,n=this.getElementUID(t);return e=F(this.element.querySelector("."+fc.hasChild))&&this.fields.groupBy?this.curViewDS:i,this.findItemFromDS(e,n)},e.prototype.findItemFromDS=function(t,e,i){var n,r=this;return t&&t.length&&e?t.some(function(o){var s=hc(o,r.listBaseOption.fields);if(!e[r.fields.id]&&!e[r.fields.text]||e[r.fields.id]&&(!F(s[r.fields.id])&&s[r.fields.id].toString())!==e[r.fields.id].toString()||e[r.fields.text]&&s[r.fields.text]!==e[r.fields.text])if("object"!=typeof o&&-1!==t.indexOf(o))n=i?t:o;else if(!F(e[r.fields.id])&&F(s[r.fields.id])){var a=r.element.querySelector('[data-uid="'+e[r.fields.id]+'"]');a&&a.innerText.trim()===s[r.fields.text]&&(n=o)}else s.hasOwnProperty(r.fields.child)&&s[r.fields.child].length&&(n=r.findItemFromDS(s[r.fields.child],e,i));else n=i?t:o;return!!n}):n=t,n},e.prototype.getQuery=function(){var t=[],e=this.query?this.query:new qh;if(!this.query){for(var i=0,n=Object.keys(this.fields.properties);i<n.length;i++){var r=n[i];"tableName"!==r&&this.fields[r]&&this.fields[r]!==Gh.defaultMappedFields[r]&&-1===t.indexOf(this.fields[r])&&t.push(this.fields[r])}e.select(t),this.fields.properties.hasOwnProperty("tableName")&&e.from(this.fields.tableName)}return e},e.prototype.setViewDataSource=function(t){void 0===t&&(t=this.localData),t&&this.fields.groupBy?"None"!==this.sortOrder?this.curViewDS=Gh.groupDataSource(Gh.getDataSource(t,Gh.addSorting(this.sortOrder,this.fields.sortBy)),this.listBaseOption.fields,this.sortOrder):this.curViewDS=Gh.groupDataSource(t,this.listBaseOption.fields,this.sortOrder):t&&"None"!==this.sortOrder?this.curViewDS=Gh.getDataSource(t,Gh.addSorting(this.sortOrder,this.fields.sortBy)):this.curViewDS=t},e.prototype.isInAnimation=function(){return this.curUL.classList.contains(".e-animate")},e.prototype.setLocalData=function(){var t=this;this.trigger("actionBegin");var e=this;if(this.dataSource instanceof sc)this.dataSource.executeQuery(this.getQuery()).then(function(i){t.isDestroyed||(t.localData=i.result,t.isServerRendered&&$()||e.removeElement(e.contentContainer),t.renderList(),t.trigger("actionComplete",i))}).catch(function(e){t.isDestroyed||t.trigger("actionFailure",e)});else if(this.dataSource&&this.dataSource.length)this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData});else{var i=this.element.querySelector("ul");i&&(li(i),this.setProperties({dataSource:Gh.createJsonFromElement(i)},!0),this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData}))}},e.prototype.reRender=function(){$()&&this.isServerRendered&&!this.enableVirtualization||(this.resetBlazorTemplates(),this.removeElement(this.headerEle),this.removeElement(this.ulElement),this.removeElement(this.contentContainer),-1===Object.keys(window).indexOf("ejsInterop")&&(this.element.innerHTML=""),this.headerEle=this.ulElement=this.liCollection=void 0,this.header()),this.setLocalData()},e.prototype.resetCurrentList=function(){this.resetBlazorTemplates(),this.setViewDataSource(this.curViewDS),this.contentContainer.innerHTML="",this.createList(),this.renderIntoDom(this.curUL)},e.prototype.setAttributes=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.classList.contains("e-list-item")&&(i.setAttribute("id",this.element.id+"_"+i.getAttribute("data-uid")),i.setAttribute("aria-selected","false"),i.setAttribute("tabindex","-1"))}},e.prototype.createList=function(){this.currentLiElements=[],this.isNestedList=!1,this.ulElement=this.curUL=Gh.createList(this.createElement,this.curViewDS,this.listBaseOption),this.liCollection=this.curUL.querySelectorAll("."+fc.listItem),this.setAttributes(this.liCollection),this.updateBlazorTemplates(!0)},e.prototype.resetBlazorTemplates=function(){var t=Le;this.template&&(t[this.LISTVIEW_TEMPLATE_ID]=[],Be(this.LISTVIEW_TEMPLATE_ID)),this.groupTemplate&&(t[this.LISTVIEW_GROUPTEMPLATE_ID]=[],Be(this.LISTVIEW_GROUPTEMPLATE_ID)),this.headerTemplate&&Be(this.LISTVIEW_HEADERTEMPLATE_ID)},e.prototype.updateBlazorTemplates=function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===i&&(i=!1),this.template&&t&&!this.enableVirtualization&&Ae(this.LISTVIEW_TEMPLATE_ID,"Template",this,i),this.groupTemplate&&t&&!this.enableVirtualization&&Ae(this.LISTVIEW_GROUPTEMPLATE_ID,"GroupTemplate",this,i),this.headerTemplate&&e&&Ae(this.LISTVIEW_HEADERTEMPLATE_ID,"HeaderTemplate",this,i)},e.prototype.exceptionEvent=function(t){this.trigger("actionFailure",t)},e.prototype.UpdateCurrentUL=function(){this.ulElement=this.curUL=this.element.querySelector("."+fc.parentItem),this.curUL&&(this.liCollection=this.curUL.querySelectorAll("."+fc.listItem))},e.prototype.removeActiveClass=function(){var t=this;setTimeout(function(){for(var e=t.element.querySelector("."+fc.virtualElementContainer),i=0;i<e.childElementCount;i++){var n=e.children[i],r=void 0,o=void 0;if(t.showCheckBox)if(t.previousSelectedItems.length>0)for(var s=0;s<t.previousSelectedItems.length;s++)n.getAttribute("data-uid")===t.previousSelectedItems[s]?(n.classList.add("e-active"),n.setAttribute("aria-selected","true"),n.querySelector(".e-frame.e-icons")&&n.querySelector(".e-frame.e-icons").classList.add("e-check"),r=i):r!==i&&(n.classList.remove("e-active"),n.removeAttribute("aria-selected"),n.querySelector(".e-check")&&n.querySelector(".e-check").classList.remove("e-check"));else n.classList.remove("e-active"),n.removeAttribute("aria-selected"),n.querySelector(".e-check")&&n.querySelector(".e-check").classList.remove("e-check");else n.getAttribute("data-uid")===t.previousSelectedItems[0]?(n.classList.add("e-active"),n.setAttribute("aria-selected","true")):(n.classList.remove("e-active"),n.removeAttribute("aria-selected"));if(t.hiddenItems.length>0)for(var a=0;a<t.hiddenItems.length;a++)n.getAttribute("data-uid")===t.previousSelectedItems[a]?(n.style.display="none",o=i):o!==i&&(n.style.display=null);if(t.enabledItems.length>0)for(var l=0;l<t.enabledItems.length;l++)n.getAttribute("data-uid")===t.enabledItems[l]&&n.classList.contains("e-disabled")&&n.classList.remove("e-disabled");if(t.disabledItems.length>0)for(var h=0;h<t.disabledItems.length;h++)n.getAttribute("data-uid")===t.disabledItems[h]&&(n.classList.contains("e-disabled")||n.classList.add("e-disabled"))}},200)},e.prototype.renderingNestedList=function(){var t=pi(this.liElement.parentNode,"."+fc.parentItem),e=this.element.id,i=document.getElementById(e),n=i.getElementsByTagName("UL")[i.getElementsByTagName("UL").length-1];this.switchView(t,n),this.liElement=null},e.prototype.renderSubList=function(t){this.liElement=t;var e=t.getAttribute("data-uid");if(t.classList.contains(fc.hasChild)&&e){var i=pi(t.parentNode,"."+fc.parentItem),n=this.element.querySelector("[pid='"+e+"']");if(this.curDSLevel.push(e),this.setViewDataSource(this.getSubDS()),!n){var r=this.curViewDS;if($()&&this.isServerRendered)this.interopAdaptor.invokeMethodAsync("ListChildDataSource",r);else{var o=(n=Gh.createListFromJson(this.createElement,r,this.listBaseOption,this.curDSLevel.length)).querySelectorAll("."+fc.listItem);this.setAttributes(o),n.setAttribute("pID",e),n.style.display="none",this.renderIntoDom(n),this.updateBlazorTemplates(!0)}}if($()&&this.isServerRendered&&!this.enableVirtualization||this.switchView(i,n),this.liCollection=this.curUL.querySelectorAll("."+fc.listItem),this.selectedItems){var s=hc(this.selectedItems.data,this.listBaseOption.fields);this.header(s[this.listBaseOption.fields.text],!0)}this.selectedLI=void 0}},e.prototype.renderIntoDom=function(t){this.contentContainer.appendChild(t)},e.prototype.renderList=function(t){this.setViewDataSource(t),$()&&this.isServerRendered&&!this.enableVirtualization||(this.enableVirtualization?(Object.keys(this.dataSource).length&&($()&&this.isServerRendered||!this.template&&!this.groupTemplate||this.virtualizationModule.isNgTemplate()||(this.listBaseOption.template=null,this.listBaseOption.groupTemplate=null,this.listBaseOption.itemCreated=this.virtualizationModule.createUIItem.bind(this.virtualizationModule))),this.virtualizationModule.uiVirtualization()):(this.createList(),this.contentContainer=this.createElement("div",{className:fc.content}),this.element.appendChild(this.contentContainer),this.renderIntoDom(this.ulElement)))},e.prototype.getElementUID=function(t){var e={};return t instanceof Element?e[this.fields.id]=t.getAttribute("data-uid"):e=t,e},e.prototype.render=function(){$()&&this.isServerRendered?this.initBlazor(!0):(this.element.classList.add(fc.root),hi(this.element,{role:"list",tabindex:"0"}),this.setCSSClass(),this.setEnableRTL(),this.setEnable(),this.setSize(),this.wireEvents(),this.header(),this.setLocalData(),this.setHTMLAttribute()),this.rippleFn=Qi(this.element,{selector:"."+fc.listItem}),this.renderComplete()},e.prototype.initBlazor=function(t){null===t&&(t=!1),this.setLocalData(),this.setViewDataSource(this.localData),this.contentContainer=this.element.querySelector("."+fc.content),t&&this.wireEvents()},e.prototype.destroy=function(){this.resetBlazorTemplates(),this.unWireEvents();var e=[fc.root,fc.disable,"e-rtl","e-has-header","e-lib"].concat(this.cssClass.split(" ").filter(function(t){return t}));ei([this.element],e),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex"),this.curUL=this.ulElement=this.liCollection=this.headerEle=void 0,$()&&this.isServerRendered?this.element.style.display="none":(this.element.innerHTML="",t.prototype.destroy.call(this))},e.prototype.back=function(){var t=this.curDSLevel[this.curDSLevel.length-1];if(void 0!==t&&!this.isInAnimation()){this.curDSLevel.pop(),this.setViewDataSource(this.getSubDS());var e=this.element.querySelector("[data-uid='"+t+"']"),i=this.curUL;e?e=$()&&this.isServerRendered&&this.enableVirtualization?e.parentElement.parentElement.parentElement:e.parentElement:(this.createList(),this.renderIntoDom(this.ulElement),e=this.curUL);var n=hc(this.curDSJSON,this.listBaseOption.fields)[this.fields.text];this.switchView(i,e,!0),this.removeFocus();var r=this.element.querySelector("[data-uid='"+t+"']");r.classList.remove(fc.disable),r.classList.add(fc.focused),this.showCheckBox&&r.querySelector("."+fc.checkboxIcon).classList.contains(fc.checked)?r.setAttribute("aria-selected","true"):(r.classList.remove(fc.selected),r.setAttribute("aria-selected","false")),this.liCollection=this.curUL.querySelectorAll("."+fc.listItem),this.enableHtmlSanitizer&&this.setProperties({headerTitle:zn.sanitize(this.headerTitle)},!0),this.header(this.curDSLevel.length?n:this.headerTitle,!!this.curDSLevel.length)}},e.prototype.selectItem=function(t){this.enableVirtualization?this.virtualizationModule.selectItem(t):this.showCheckBox?this.setCheckboxLI(this.getLiFromObjOrElement(t)):F(t)?this.removeSelect():this.setSelectLI(this.getLiFromObjOrElement(t))},e.prototype.getLiFromObjOrElement=function(t){var e,i=this.dataSource instanceof sc?this.localData:this.dataSource;if(!F(t))if("string"==typeof i[0]||"number"==typeof i[0])if(t instanceof Element){for(var n=t.getAttribute("data-uid").toString(),r=0;r<this.liCollection.length;r++)if(this.liCollection[r].getAttribute("data-uid").toString()===n){e=this.liCollection[r];break}}else Array.prototype.some.call(this.curUL.querySelectorAll("."+fc.listItem),function(i){return i.innerText.trim()===t.toString()&&(e=i,!0)});else{var o=this.getItemData(t),s=hc(o,this.listBaseOption.fields);if(o&&(e=this.element.querySelector('[data-uid="'+s[this.fields.id]+'"]'),!this.enableVirtualization&&F(e))){var a=this.element.querySelectorAll("."+fc.listItem);for(r=0;r<a.length;r++)a[r].innerText.trim()===s[this.fields.text]&&(e=a[r])}}return e},e.prototype.selectMultipleItems=function(t){if(!F(t))for(var e=0;e<t.length;e++)F(t[e])||this.selectItem(t[e])},e.prototype.getParentId=function(){var t=[];if(this.isNestedList)for(var e=this.curDSLevel.length-1;e>=0;e--)t.push(this.curDSLevel[e]);return t},e.prototype.getSelectedItems=function(){var t,e=!1;this.selectedId=[];var i=this.dataSource instanceof sc?this.localData:this.dataSource;if(this.enableVirtualization&&!e)t=this.virtualizationModule.getSelectedItems(),e=!0;else if(this.showCheckBox&&!e){var n=this.curUL.getElementsByClassName(fc.selected),r=[],o=[];this.selectedId=[];for(var s=[],a=0;a<n.length;a++)if("string"==typeof i[0]||"number"==typeof i[0])r.push(n[a].innerText.trim());else{var l=this.getItemData(n[a]),h=hc(l,this.listBaseOption.fields);this.isNestedList?s.push({data:l,parentId:this.getParentId()}):o.push(l),h?(r.push(h[this.listBaseOption.fields.text]),this.selectedId.push(h[this.listBaseOption.fields.id])):(r.push(void 0),this.selectedId.push(void 0))}"string"!=typeof i[0]&&"number"!=typeof i[0]||e||(t={item:n,data:i,text:r},e=!0),this.isNestedList&&!e?(t={item:n,data:s,text:r},e=!0):e||(t={item:n,data:o,text:r},e=!0)}else if(!e){var c=this.element.getElementsByClassName(fc.selected)[0];h=hc(this.getItemData(c),this.listBaseOption.fields);"string"!=typeof i[0]&&"number"!=typeof i[0]||e?e||(F(h)||F(c)?(t=void 0,e=!0):(this.selectedId.push(h[this.listBaseOption.fields.id]),t={text:h[this.listBaseOption.fields.text],item:c,data:this.getItemData(c)},e=!0)):(t=F(c)?void 0:{item:c,data:i,text:c.innerText.trim()},e=!0)}return $()?this.blazorGetSelectedItems(t):t},e.prototype.blazorGetSelectedItems=function(t){var e={data:[],index:[],parentId:[],text:[]};if(!F(t)){if(!F(t.data))if(this.showCheckBox&&this.isNestedList){for(var i=0;i<t.data.length;i++)e.data.push(t.data[i].data);F(t.data[0])||F(t.data[0].parentId)||(e.parentId=t.data[0].parentId)}else e.data=this.convertItemsToArray(t.data);F(t.text)||(e.text=this.convertItemsToArray(t.text)),F(t.index)||(e.index=this.convertItemsToArray(t.index))}return e},e.prototype.convertItemsToArray=function(t){return Array.isArray(t)?t.slice():[t]},e.prototype.findItem=function(t){return this.getItemData(t)},e.prototype.enableItem=function(t){this.setItemState(t,!0),this.enableVirtualization&&this.virtualizationModule.enableItem(t)},e.prototype.disableItem=function(t){this.setItemState(t,!1),this.enableVirtualization&&this.virtualizationModule.disableItem(t)},e.prototype.setItemState=function(t,e){var i=this.getItemData(t),n=hc(i,this.listBaseOption.fields);if(i){var r=this.element.querySelector('[data-uid="'+n[this.fields.id]+'"]');e?(r&&r.classList.remove(fc.disable),delete i[this.fields.enabled]):e||(r&&r.classList.add(fc.disable),i[this.fields.enabled]=!1)}},e.prototype.showItem=function(t){this.showHideItem(t,!1,""),this.enableVirtualization&&this.virtualizationModule.showItem(t)},e.prototype.hideItem=function(t){this.showHideItem(t,!0,"none"),this.enableVirtualization&&this.virtualizationModule.hideItem(t)},e.prototype.showHideItem=function(t,e,i){var n=this.getItemData(t),r=hc(n,this.listBaseOption.fields);if(n){var o=this.element.querySelector('[data-uid="'+r[this.fields.id]+'"]');o&&(o.style.display=i),e?n[this.fields.isVisible]=!1:delete n[this.fields.isVisible]}},e.prototype.addItem=function(t,e){void 0===e&&(e=void 0);var i=this.dataSource instanceof sc?this.localData:this.dataSource;this.addItemInternally(t,e,i)},e.prototype.addItemInternally=function(t,e,i){if(t instanceof Array)if(this.enableVirtualization)this.virtualizationModule.addItem(t,e,i);else{var n=this.findItemFromDS(i,e),r=void 0;if(n)(r=hc(n,this.listBaseOption.fields)[this.fields.child])||(r=[]),r=r.concat(t);if(n instanceof Array){for(var o=0;o<t.length;o++){i.push(t[o]),this.setViewDataSource(i);var s=this.contentContainer?this.contentContainer.children[0]:null;this.contentContainer&&s?this.addItemIntoDom(t[o],s,this.curViewDS):this.reRender()}this.curUL&&this.updateBlazorTemplates(!0),this.liCollection=this.curUL.querySelectorAll("."+fc.listItem)}else n&&(n[this.fields.child]=r,this.addItemInNestedList(n,t))}},e.prototype.addItemInNestedList=function(t,e){var i=t[this.fields.id],n=t[this.fields.child],r=this.element.querySelector("[pid='"+i+"']"),o=this.element.querySelector("[data-uid='"+i+"']"),s=r||(o?pi(o,"ul"):null),a=r?n:[t],l=!1;if(!!o&&!o.classList.contains(fc.hasChild)){var h=Gh.createListItemFromJson(this.createElement,a,this.listBaseOption);this.setAttributes(h),s.insertBefore(h[0],o),ai(o),l=!0}if(r&&e){for(var c=0;c<e.length;c++)a.push(e[c]),this.addItemIntoDom(e[c],s,a);l=!0}l&&this.updateBlazorTemplates(!0)},e.prototype.addItemIntoDom=function(t,e,i){var n=i.indexOf(t);this.addListItem(t,n,e,i);var r=i[n-1];r&&r.isHeader&&1===r.items.length&&this.addListItem(r,n-1,e,i)},e.prototype.addListItem=function(t,e,i,n){var r=this.getLiFromObjOrElement(n[e+1])||this.getLiFromObjOrElement(n[e+2])||null,o=Gh.createListItemFromJson(this.createElement,[t],this.listBaseOption);this.setAttributes(o),i.insertBefore(o[0],r)},e.prototype.removeItem=function(t){var e=this.dataSource instanceof sc?this.localData:this.dataSource;this.enableVirtualization?this.virtualizationModule.removeItem(t):(this.removeItemFromList(t,e),this.updateBlazorTemplates(!0))},e.prototype.removeItemFromList=function(t,e){var i,n=this,r=this.curViewDS,o=t instanceof Element?this.getElementUID(t):t;if(i=this.findItemFromDS(e,o,!0)){var s;s=this.findItemFromDS(i,o);var a=r.indexOf(s),l=this.getLiFromObjOrElement(t),h=void 0;this.validateNestedView(l),this.fields.groupBy&&this.curViewDS[a-1]&&r[a-1].isHeader&&1===r[a-1].items.length&&l&&l.previousElementSibling.classList.contains(fc.groupListItem)&&(F(l.nextElementSibling)||l.nextElementSibling&&l.nextElementSibling.classList.contains(fc.groupListItem))&&(h=l.previousElementSibling),l&&ai(l),h&&ai(h);var c=i.length-1<=0?this.findParent(this.localData,this.fields.id,function(t){return t===s[n.fields.id]},null):null,d=i.indexOf(s);if(i.splice(d,1),this.setViewDataSource(e),c&&c.parent&&Array.isArray(c.parent[this.fields.child])&&c.parent[this.fields.child].length<=0){var p=this.getLiFromObjOrElement(c.parent);if(p){var u=Gh.createListItemFromJson(this.createElement,[c.parent],this.listBaseOption);this.setAttributes(u),p.parentElement.insertBefore(u[0],p),p.parentElement.removeChild(p)}}i.length<=0&&this.back(),this.liCollection=Array.prototype.slice.call(this.element.querySelectorAll("."+fc.listItem))}},e.prototype.validateNestedView=function(t){var e=t?t.getAttribute("data-uid").toString().toLowerCase():null;if(e&&this.curDSLevel&&this.curDSLevel.length>0)for(;this.curDSLevel.some(function(t){return t.toString().toLowerCase()===e});)this.back()},e.prototype.removeMultipleItems=function(t){if(t.length){for(var e=0;e<t.length;e++)this.removeItem(t[e]);this.updateBlazorTemplates(!0)}},e.prototype.findParent=function(t,e,i,n){if(t.hasOwnProperty(e)&&!0===i(t[e]))return V({},t);for(var r=0;r<Object.keys(t).length;r++)if(t[Object.keys(t)[r]]&&"object"==typeof t[Object.keys(t)[r]]){var o=this.findParent(t[Object.keys(t)[r]],e,i,t);if(null!=o)return o.parent||(o.parent=n),o}return null},e.prototype.getModuleName=function(){return"listview"},e.prototype.requiredModules=function(){var t=[];return this.enableVirtualization&&t.push({args:[this],member:"virtualization"}),t},e.prototype.getPersistData=function(){return this.addOnPersist(["cssClass","enableRtl","htmlAttributes","enable","fields","animation","headerTitle","sortOrder","showIcon","height","width","showCheckBox","checkBoxPosition"])},dc([Hi("")],e.prototype,"cssClass",void 0),dc([Hi(!1)],e.prototype,"enableVirtualization",void 0),dc([Hi({})],e.prototype,"htmlAttributes",void 0),dc([Hi(!0)],e.prototype,"enable",void 0),dc([Hi([])],e.prototype,"dataSource",void 0),dc([Hi()],e.prototype,"query",void 0),dc([_i(Gh.defaultMappedFields,gc)],e.prototype,"fields",void 0),dc([Hi({effect:"SlideLeft",duration:400,easing:"ease"})],e.prototype,"animation",void 0),dc([Hi("None")],e.prototype,"sortOrder",void 0),dc([Hi(!1)],e.prototype,"showIcon",void 0),dc([Hi(!1)],e.prototype,"showCheckBox",void 0),dc([Hi("Left")],e.prototype,"checkBoxPosition",void 0),dc([Hi("")],e.prototype,"headerTitle",void 0),dc([Hi(!1)],e.prototype,"showHeader",void 0),dc([Hi(!1)],e.prototype,"enableHtmlSanitizer",void 0),dc([Hi("")],e.prototype,"height",void 0),dc([Hi("")],e.prototype,"width",void 0),dc([Hi(null)],e.prototype,"template",void 0),dc([Hi(null)],e.prototype,"headerTemplate",void 0),dc([Hi(null)],e.prototype,"groupTemplate",void 0),dc([Ui()],e.prototype,"select",void 0),dc([Ui()],e.prototype,"actionBegin",void 0),dc([Ui()],e.prototype,"actionComplete",void 0),dc([Ui()],e.prototype,"actionFailure",void 0),e=dc([Gi],e)}(un),yc=function(){function t(t){this.elementDifference=0,this.listViewInstance=t}return t.prototype.isNgTemplate=function(){return!F(this.listViewInstance.templateRef)&&"string"!=typeof this.listViewInstance.templateRef},t.prototype.uiVirtualization=function(){this.wireScrollEvent(!1);var t=this.listViewInstance.curViewDS,e=t.slice(0,1);$()||this.listViewInstance.isServerRendered||(this.listViewInstance.ulElement=this.listViewInstance.curUL=Gh.createList(this.listViewInstance.createElement,e,this.listViewInstance.listBaseOption),this.listViewInstance.contentContainer=this.listViewInstance.createElement("div",{className:fc.content}),this.listViewInstance.element.appendChild(this.listViewInstance.contentContainer),this.listViewInstance.contentContainer.appendChild(this.listViewInstance.ulElement)),this.listItemHeight=this.listViewInstance.ulElement.firstElementChild.getBoundingClientRect().height,this.expectedDomItemCount=this.ValidateItemCount(1e4),this.domItemCount=this.ValidateItemCount(Object.keys(this.listViewInstance.curViewDS).length),this.uiFirstIndex=0,this.uiLastIndex=this.domItemCount-1;var i=t.slice(1,this.domItemCount);$()||this.listViewInstance.isServerRendered?(this.listViewInstance.contentContainer=this.listViewInstance.element.querySelector(".e-content"),this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li")):(oi(Gh.createListItemFromJson(this.listViewInstance.createElement,i,this.listViewInstance.listBaseOption),this.listViewInstance.ulElement),this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li"),this.topElement=this.listViewInstance.createElement("div"),this.listViewInstance.ulElement.insertBefore(this.topElement,this.listViewInstance.ulElement.firstElementChild),this.bottomElement=this.listViewInstance.createElement("div"),this.listViewInstance.ulElement.insertBefore(this.bottomElement,null),this.totalHeight=Object.keys(t).length*this.listItemHeight-this.domItemCount*this.listItemHeight,this.topElement.style.height="0px",this.bottomElement.style.height=this.totalHeight+"px",this.topElementHeight=0,this.bottomElementHeight=this.totalHeight);this.listDiff=0,this.uiIndicesInitialization()},t.prototype.wireScrollEvent=function(t){t?(this.listViewInstance.isWindow?window.removeEventListener("scroll",this.onVirtualScroll):ee.remove(this.listViewInstance.element,"scroll",this.onVirtualUiScroll),this.listViewInstance.isWindow?window.removeEventListener("scroll",this.updateUl):ee.remove(this.listViewInstance.element,"scroll",this.updateUlContainer)):$()&&this.listViewInstance.isServerRendered?this.listViewInstance.isWindow?(this.onVirtualScroll=G(this.onVirtualUiScroll.bind(this),350),this.updateUl=this.updateUlContainer.bind(this),window.addEventListener("scroll",this.onVirtualScroll),window.addEventListener("scroll",this.updateUl)):(ee.add(this.listViewInstance.element,"scroll",G(this.onVirtualUiScroll,350),this),ee.add(this.listViewInstance.element,"scroll",this.updateUlContainer,this)):this.listViewInstance.isWindow?(this.onVirtualScroll=this.onVirtualUiScroll.bind(this),window.addEventListener("scroll",this.onVirtualScroll)):ee.add(this.listViewInstance.element,"scroll",this.onVirtualUiScroll,this)},t.prototype.updateUlContainer=function(t){var e,i=this.listViewInstance.ulElement.querySelector("."+fc.virtualElementContainer);F(this.listViewInstance.liElementHeight)&&this.listViewInstance.updateLiElementHeight(),((e=this.listViewInstance.isWindow?Math.round(t.target.documentElement.scrollTop/this.listViewInstance.liElementHeight)-2:Math.round(t.target.scrollTop/this.listViewInstance.liElementHeight)-2)-1)*this.listViewInstance.liElementHeight<0?i.style.top="0px":i.style.top=e*this.listViewInstance.liElementHeight+"px"},t.prototype.ValidateItemCount=function(t){var e=parseFloat(J(this.listViewInstance.height)),i=this.listViewInstance.isWindow?Math.round(window.innerHeight/this.listItemHeight*3):Math.round(e/this.listItemHeight*1.5);return i>t&&(i=t),i},t.prototype.uiIndicesInitialization=function(){this.uiIndices={activeIndices:[],disabledItemIndices:[],hiddenItemIndices:[]};for(var t=this.listViewInstance.curViewDS,e=0;e<t.length;e++)this.listViewInstance.showCheckBox&&t[e][this.listViewInstance.fields.isChecked]&&this.uiIndices.activeIndices.push(e),F(t[e][this.listViewInstance.fields.enabled])||t[e][this.listViewInstance.fields.enabled]||this.uiIndices.disabledItemIndices.push(e);if(this.isNgTemplate())for(var i=this.listViewInstance.element.querySelectorAll("."+fc.listItem),n=0;n<i.length;n++)i[n].context=this.listViewInstance.viewContainerRef.get(n).context},t.prototype.refreshItemHeight=function(){if(this.listViewInstance.curViewDS.length){var t=this.listViewInstance.curViewDS;$()&&this.listViewInstance.isServerRendered?this.listViewInstance.ulElement.children[0].style.height=this.listViewInstance.liElementHeight*Object.keys(t).length+"px":(this.listItemHeight=this.topElement.nextSibling.getBoundingClientRect().height,this.totalHeight=Object.keys(t).length*this.listItemHeight-this.domItemCount*this.listItemHeight,this.bottomElementHeight=this.totalHeight,this.bottomElement.style.height=this.totalHeight+"px")}},t.prototype.getscrollerHeight=function(t){return this.listViewInstance.isWindow?pageYOffset-t<=0?0:pageYOffset-t:this.listViewInstance.element.scrollTop-t<=0?0:this.listViewInstance.element.scrollTop-t},t.prototype.onVirtualUiScroll=function(t){var e,i;i=this.listViewInstance.isWindow?this.listViewInstance.ulElement.getBoundingClientRect().top-document.documentElement.getBoundingClientRect().top:this.listViewInstance.headerEle?this.listViewInstance.headerEle.getBoundingClientRect().height:0,this.scrollPosition=F(this.scrollPosition)?0:this.scrollPosition;var n=this.getscrollerHeight(i);if(this.topElementHeight=this.listItemHeight*Math.floor(n/this.listItemHeight),this.bottomElementHeight=this.totalHeight-this.topElementHeight,e=n<=this.totalHeight?[this.topElementHeight,this.bottomElementHeight]:[this.totalHeight,0],this.topElementHeight=e[0],this.bottomElementHeight=e[1],$()&&this.listViewInstance.isServerRendered){var r=void 0;if(F(this.listViewInstance.liElementHeight)&&this.listViewInstance.updateLiElementHeight(),(r=this.listViewInstance.isWindow?Math.round(document.documentElement.scrollTop/this.listViewInstance.liElementHeight):Math.round(t.target.scrollTop/this.listViewInstance.liElementHeight))-2-this.elementDifference>=3||r-2-this.elementDifference<=-1){var o={listDiff:r-2,selectedItems:this.listViewInstance.previousSelectedItems};this.listViewInstance.interopAdaptor.invokeMethodAsync("VirtalScrolling",o),this.listViewInstance.ulElement.querySelector(".e-focused")&&this.listViewInstance.ulElement.querySelector(".e-focused").classList.remove("e-focused"),this.elementDifference=r-2}}else{if(this.topElementHeight!==parseFloat(this.topElement.style.height))if(this.topElement.style.height=this.topElementHeight+"px",this.bottomElement.style.height=this.bottomElementHeight+"px",n>this.scrollPosition)(r=Math.round(this.topElementHeight/this.listItemHeight-this.listDiff))>this.expectedDomItemCount+5?this.onLongScroll(r,!0):this.onNormalScroll(r,!0);else(r=Math.round(this.listDiff-this.topElementHeight/this.listItemHeight))>this.expectedDomItemCount+5?this.onLongScroll(r,!1):this.onNormalScroll(r,!1);this.listDiff=Math.round(this.topElementHeight/this.listItemHeight),"function"==typeof this.listViewInstance.onUIScrolled&&this.listViewInstance.onUIScrolled()}this.scrollPosition=n},t.prototype.onLongScroll=function(t,e){for(var i=e?this.uiFirstIndex+t:this.uiFirstIndex-t,n=this.listViewInstance.ulElement.querySelectorAll("li"),r=0;r<n.length;r++)this.updateUI(n[r],i),i++;this.uiLastIndex=e?this.uiLastIndex+t:this.uiLastIndex-t,this.uiFirstIndex=e?this.uiFirstIndex+t:this.uiFirstIndex-t},t.prototype.onNormalScroll=function(t,e){if(e)for(var i=0;i<t;i++){var n=++this.uiLastIndex;this.updateUI(this.topElement.nextElementSibling,n,this.bottomElement),this.uiFirstIndex++}else for(i=0;i<t;i++){n=--this.uiFirstIndex;var r=this.topElement.nextSibling;this.updateUI(this.bottomElement.previousElementSibling,n,r),this.uiLastIndex--}},t.prototype.updateUiContent=function(t,e){var i=this.listViewInstance.curViewDS;if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0]?(t.dataset.uid=Gh.generateId(),t.getElementsByClassName(fc.listItemText)[0].innerHTML=this.listViewInstance.curViewDS[e].toString()):(t.dataset.uid=i[e][this.listViewInstance.fields.id]?i[e][this.listViewInstance.fields.id].toString():Gh.generateId(),t.getElementsByClassName(fc.listItemText)[0].innerHTML=i[e][this.listViewInstance.fields.text].toString()),this.listViewInstance.showIcon&&(t.querySelector("."+fc.listIcon)&&ai(t.querySelector("."+fc.listIcon)),this.listViewInstance.curViewDS[e][this.listViewInstance.fields.iconCss])){var n=t.querySelector("."+fc.textContent),r=this.listViewInstance.createElement("div",{className:fc.listIcon+" "+this.listViewInstance.curViewDS[e][this.listViewInstance.fields.iconCss]});n.insertBefore(r,t.querySelector("."+fc.listItemText))}if(this.listViewInstance.showCheckBox&&this.listViewInstance.fields.groupBy){this.checkListWrapper||(this.checkListWrapper=this.listViewInstance.curUL.querySelector("."+fc.checkboxWrapper).cloneNode(!0));n=t.querySelector("."+fc.textContent);this.listViewInstance.curViewDS[e].isHeader?t.querySelector("."+fc.checkboxWrapper)&&(t.classList.remove(fc.checklist),n.classList.remove(fc.checkbox),ai(t.querySelector("."+fc.checkboxWrapper))):t.querySelector("."+fc.checkboxWrapper)||(t.classList.add(fc.checklist),n.classList.add(fc.checkbox),n.insertBefore(this.checkListWrapper.cloneNode(!0),t.querySelector("."+fc.listItemText)))}},t.prototype.changeElementAttributes=function(t,e){if(t.classList.remove(fc.disable),this.uiIndices.disabledItemIndices.length&&-1!==this.uiIndices.disabledItemIndices.indexOf(e)&&t.classList.add(fc.disable),t.style.display="",this.uiIndices.hiddenItemIndices.length&&-1!==this.uiIndices.hiddenItemIndices.indexOf(e)&&(t.style.display="none"),this.listViewInstance.showCheckBox){var i=t.querySelector("."+fc.checkboxWrapper);t.classList.remove(fc.selected),t.classList.remove(fc.focused),i&&(i.removeAttribute("aria-checked"),i.firstElementChild.classList.remove(fc.checked)),this.uiIndices.activeIndices.length&&-1!==this.uiIndices.activeIndices.indexOf(e)&&!this.listViewInstance.curUL.querySelector(fc.selected)&&(t.classList.add(fc.selected),i.firstElementChild.classList.add(fc.checked),i.setAttribute("aria-checked","true"),this.activeIndex===e&&t.classList.add(fc.focused))}else t.classList.remove(fc.selected),t.removeAttribute("aria-selected"),F(this.activeIndex)||this.activeIndex!==e||this.listViewInstance.curUL.querySelector(fc.selected)||(t.classList.add(fc.selected),t.setAttribute("aria-selected","true"));this.listViewInstance.fields.groupBy&&(this.listViewInstance.curViewDS[e].isHeader?t.classList.contains(fc.listItem)&&(t.classList.remove(fc.listItem),t.setAttribute("role","group"),t.classList.add(fc.groupListItem)):t.classList.contains(fc.groupListItem)&&(t.classList.remove(fc.groupListItem),t.setAttribute("role","listitem"),t.classList.add(fc.listItem)))},t.prototype.findDSAndIndexFromId=function(t,e){var i=this,n={};return F(e=this.listViewInstance.getElementUID(e))||t.some(function(t,r){return!!(e[i.listViewInstance.fields.id]&&e[i.listViewInstance.fields.id].toString()===(t[i.listViewInstance.fields.id]&&t[i.listViewInstance.fields.id].toString())||e===t)&&(n.index=r,n.data=t,!0)}),n},t.prototype.getSelectedItems=function(){var t=this;if(!F(this.activeIndex)||this.listViewInstance.showCheckBox&&this.uiIndices.activeIndices.length){var e=[],i=[];if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0]){var n=this.listViewInstance.curViewDS;if(this.listViewInstance.showCheckBox){for(var r=this.uiIndices.activeIndices,o=0;o<r.length;o++)e.push(n[r[o]]);return{text:e,data:e,index:this.uiIndices.activeIndices.map(function(e){return t.listViewInstance.dataSource.indexOf(n[e])})}}return{text:n[this.activeIndex],data:n[this.activeIndex],index:this.listViewInstance.dataSource.indexOf(n[this.activeIndex])}}if($()&&this.listViewInstance.isServerRendered){var s=Math.round(this.listViewInstance.element.scrollTop/this.listViewInstance.liElementHeight)-2;s<0&&(s=0),this.activeIndex+=s}var a=this.listViewInstance.curViewDS,l=this.listViewInstance.fields.text;if(this.listViewInstance.showCheckBox){var h=this.uiIndices.activeIndices;for(o=0;o<h.length;o++)i.push(a[h[o]][l]),e.push(a[h[o]]);var c=this.listViewInstance.dataSource instanceof sc?a:this.listViewInstance.dataSource;return{text:i,data:e,index:this.uiIndices.activeIndices.map(function(t){return c.indexOf(a[t])})}}var d=this.listViewInstance.dataSource instanceof sc?a:this.listViewInstance.dataSource;return{text:a[this.activeIndex][this.listViewInstance.fields.text],data:a[this.activeIndex],index:d.indexOf(a[this.activeIndex])}}},t.prototype.selectItem=function(t){var e=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,t);if(Object.keys(e).length){var i=this.activeIndex===e.index,n=void 0;if(this.activeIndex=e.index,this.listViewInstance.showCheckBox&&(-1===this.uiIndices.activeIndices.indexOf(e.index)?(n=!0,this.uiIndices.activeIndices.push(e.index)):(n=!1,this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(e.index),1)),this.listViewInstance.curUL.querySelector("."+fc.focused)&&this.listViewInstance.curUL.querySelector("."+fc.focused).classList.remove(fc.focused)),this.listViewInstance.getLiFromObjOrElement(t))this.listViewInstance.showCheckBox?this.listViewInstance.setCheckboxLI(this.listViewInstance.getLiFromObjOrElement(t)):this.listViewInstance.setSelectLI(this.listViewInstance.getLiFromObjOrElement(t));else{var r=void 0;if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0])r={text:this.listViewInstance.curViewDS[this.activeIndex],data:this.listViewInstance.curViewDS[this.activeIndex],index:this.activeIndex};else{var o=this.listViewInstance.curViewDS;r={text:o[this.activeIndex][this.listViewInstance.fields.text],data:o[this.activeIndex],index:this.activeIndex}}this.listViewInstance.showCheckBox?(r.isChecked=n,this.listViewInstance.trigger("select",r)):i||(this.listViewInstance.removeSelect(),this.listViewInstance.trigger("select",r))}}else F(t)&&!this.listViewInstance.showCheckBox&&(this.listViewInstance.removeSelect(),this.activeIndex=void 0);if($()&&this.listViewInstance.isServerRendered){var s=e.data[this.listViewInstance.fields.id];if(this.listViewInstance.showCheckBox)if(this.listViewInstance.previousSelectedItems.includes(s)){var a=this.listViewInstance.previousSelectedItems.indexOf(s);a>-1&&this.listViewInstance.previousSelectedItems.splice(a,1)}else this.listViewInstance.previousSelectedItems.push(s);else this.listViewInstance.previousSelectedItems[0]=s;this.listViewInstance.removeActiveClass()}},t.prototype.enableItem=function(t){var e=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,t);if($()&&this.listViewInstance.isServerRendered){var i=e.data[this.listViewInstance.fields.id];if(this.listViewInstance.enabledItems.includes(i)||(this.listViewInstance.enabledItems.push(i),this.listViewInstance.removeActiveClass()),this.listViewInstance.disabledItems.includes(i)){var n=this.listViewInstance.disabledItems.indexOf(i);n>-1&&this.listViewInstance.disabledItems.splice(n,1)}}else Object.keys(e).length&&this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(e.index),1)},t.prototype.disableItem=function(t){var e=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,t);if($()&&this.listViewInstance.isServerRendered){var i=e.data[this.listViewInstance.fields.id];if(this.listViewInstance.disabledItems.includes(i)||(this.listViewInstance.disabledItems.push(i),this.listViewInstance.removeActiveClass()),this.listViewInstance.enabledItems.includes(i)){var n=this.listViewInstance.enabledItems.indexOf(i);n>-1&&this.listViewInstance.enabledItems.splice(n,1)}}else Object.keys(e).length&&-1===this.uiIndices.disabledItemIndices.indexOf(e.index)&&this.uiIndices.disabledItemIndices.push(e.index)},t.prototype.showItem=function(t){var e=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,t);if($()&&this.listViewInstance.isServerRendered){var i=e.data[this.listViewInstance.fields.id];if(this.listViewInstance.hiddenItems.includes(i)){var n=this.listViewInstance.hiddenItems.indexOf(i);n>-1&&(this.listViewInstance.previousSelectedItems.splice(n,1),this.listViewInstance.removeActiveClass())}}else Object.keys(e).length&&this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(e.index),1)},t.prototype.hideItem=function(t){var e=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,t);if($()&&this.listViewInstance.isServerRendered){var i=e.data[this.listViewInstance.fields.id];this.listViewInstance.hiddenItems.includes(i)||(this.listViewInstance.hiddenItems.push(i),this.listViewInstance.removeActiveClass())}else Object.keys(e).length&&-1===this.uiIndices.hiddenItemIndices.indexOf(e.index)&&this.uiIndices.hiddenItemIndices.push(e.index)},t.prototype.removeItem=function(t){var e,i=this.listViewInstance.curViewDS,n=this.findDSAndIndexFromId(i,t);$()&&this.listViewInstance.isServerRendered&&void 0!==n.index&&this.listViewInstance.interopAdaptor.invokeMethodAsync("RemoveItemPosition",n.index),Object.keys(n).length&&(e=n.data,i[n.index-1]&&i[n.index-1].isHeader&&1===i[n.index-1].items.length?(this.removeUiItem(n.index-1),this.removeUiItem(n.index-1)):$()&&this.listViewInstance.isServerRendered||this.removeUiItem(n.index));var r=this.listViewInstance.dataSource instanceof sc?this.listViewInstance.localData:this.listViewInstance.dataSource,o=r.indexOf(e);-1!==o&&(r.splice(o,1),this.listViewInstance.setViewDataSource(r)),this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li")},t.prototype.setCheckboxLI=function(t,e){$()&&this.listViewInstance.isServerRendered&&(this.uiFirstIndex=Math.round(this.listViewInstance.element.scrollTop/36)-4,this.uiFirstIndex<0&&(this.uiFirstIndex=0));var i=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),t)+this.uiFirstIndex;this.activeIndex=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),t)+this.uiFirstIndex,t.classList.contains(fc.selected)?-1===this.uiIndices.activeIndices.indexOf(i)&&this.uiIndices.activeIndices.push(i):this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(i),1)},t.prototype.setSelectLI=function(t,e){this.activeIndex=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),t)+this.uiFirstIndex},t.prototype.checkedItem=function(t){if(t){this.uiIndices.activeIndices=[],this.activeIndex=void 0;for(var e=this.listViewInstance.curViewDS,i=0;i<e.length;i++)e[i].isHeader||this.uiIndices.activeIndices.push(i)}else this.activeIndex=void 0,this.uiIndices.activeIndices=[]},t.prototype.addUiItem=function(t){var e=this.listViewInstance.curViewDS;if(this.changeUiIndices(t,!0),this.activeIndex&&this.activeIndex>=t&&this.activeIndex++,this.listViewInstance.showCheckBox&&e[t][this.listViewInstance.fields.isChecked]&&this.uiIndices.activeIndices.push(t),parseFloat(this.bottomElement.style.height)||parseFloat(this.topElement.style.height)||(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)+this.listItemHeight+"px"),parseFloat(this.bottomElement.style.height)){var i=this.listViewInstance.curUL.lastElementChild.previousSibling;(n=this.listViewInstance.getLiFromObjOrElement(e[t+1])||this.listViewInstance.getLiFromObjOrElement(e[t+2]))&&(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)+this.listItemHeight+"px",this.updateUI(i,t,n))}else{i=this.listViewInstance.curUL.firstElementChild.nextSibling;var n=void 0;n=Object.keys(this.listViewInstance.curViewDS).length-1===t?this.listViewInstance.curUL.lastElementChild:this.listViewInstance.getLiFromObjOrElement(e[t+1])||this.listViewInstance.getLiFromObjOrElement(e[t+2]),this.topElement.style.height=parseFloat(this.topElement.style.height)+this.listItemHeight+"px",this.uiFirstIndex++,this.uiLastIndex++,n&&(this.updateUI(i,t,n),this.listViewInstance.isWindow?window.scrollTo(0,pageYOffset+this.listItemHeight):this.listViewInstance.element.scrollTop+=this.listItemHeight)}this.totalHeight+=this.listItemHeight,this.listDiff=Math.round(parseFloat(this.topElement.style.height)/this.listItemHeight)},t.prototype.removeUiItem=function(t){this.totalHeight-=this.listItemHeight;var e=this.listViewInstance.curViewDS[t],i=this.listViewInstance.getLiFromObjOrElement(e);if(this.listViewInstance.curViewDS.splice(t,1),this.activeIndex&&this.activeIndex>=t&&this.activeIndex--,i)if(this.domItemCount>Object.keys(this.listViewInstance.curViewDS).length)ai(i),this.domItemCount--,this.uiLastIndex--,this.totalHeight=0;else{if(i.classList.contains(fc.disable)&&(i.classList.remove(fc.disable),this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(t),1)),"none"===i.style.display&&(i.style.display="",this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(t),1)),this.listViewInstance.showCheckBox&&i.classList.contains(fc.selected)){this.listViewInstance.removeSelect(),this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(t),1);var n=i.querySelector("."+fc.checkboxWrapper);n.removeAttribute("aria-checked"),n.firstElementChild.classList.remove(fc.checked),i.classList.contains(fc.focused)&&(i.classList.remove(fc.focused),this.activeIndex=void 0)}else i.classList.contains(fc.selected)&&(this.listViewInstance.removeSelect(),this.activeIndex=void 0);parseFloat(this.bottomElement.style.height)||parseFloat(this.topElement.style.height)?parseFloat(this.bottomElement.style.height)?(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)-this.listItemHeight+"px",this.updateUI(i,this.uiLastIndex,this.bottomElement)):(this.topElement.style.height=parseFloat(this.topElement.style.height)-this.listItemHeight+"px",this.updateUI(i,this.uiFirstIndex-1,this.topElement.nextSibling),this.uiLastIndex--,this.uiFirstIndex--):this.updateUI(i,this.uiLastIndex,this.bottomElement)}this.changeUiIndices(t,!1),this.listDiff=Math.round(parseFloat(this.topElement.style.height)/this.listItemHeight)},t.prototype.changeUiIndices=function(t,e){for(var i=Object.keys(this.uiIndices),n=0;n<i.length;n++)this.uiIndices[i[n]]=this.uiIndices[i[n]].map(function(i){return i>=t?e?++i:--i:i})},t.prototype.addItem=function(t,e,i){for(var n=0;n<t.length;n++){var r=t[n];if(i.push(r),this.listViewInstance.setViewDataSource(i),this.domItemCount)if(this.domItemCount<this.expectedDomItemCount){if(this.listViewInstance.findItemFromDS(i,e)instanceof Array){if(this.listViewInstance.ulElement){var o=this.listViewInstance.curViewDS.indexOf(r);this.createAndInjectNewItem(r,o),(s=this.listViewInstance.curViewDS[o-1])&&s.isHeader&&1===s.items.length&&(--o,this.createAndInjectNewItem(s,o))}this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li")}}else{var s;o=this.listViewInstance.curViewDS.indexOf(r);this.addUiItem(o),(s=this.listViewInstance.curViewDS[o-1])&&s.isHeader&&1===s.items.length&&this.addUiItem(o-1)}else!this.listViewInstance.template&&!this.listViewInstance.groupTemplate||this.isNgTemplate()||(this.listViewInstance.listBaseOption.template=null,this.listViewInstance.listBaseOption.groupTemplate=null,this.listViewInstance.listBaseOption.itemCreated=this.createUIItem.bind(this)),this.uiVirtualization()}},t.prototype.createAndInjectNewItem=function(t,e){var i,n=Gh.createListItemFromJson(this.listViewInstance.createElement,[t],this.listViewInstance.listBaseOption);i=Object.keys(this.listViewInstance.curViewDS).length-1===e?this.listViewInstance.curUL.lastElementChild:this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[e+1])||this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[e+2]),this.listViewInstance.ulElement.insertBefore(n[0],i),this.domItemCount++,this.bottomElementHeight<=0&&this.uiLastIndex++,this.refreshItemHeight()},t.prototype.createUIItem=function(t){var e=this.listViewInstance.template,i=this.listViewInstance.createElement("div"),n='<div class="e-text-content" role="presentation"> <span class="e-list-text"> ${'+this.listViewInstance.fields.text+"} </span></div>";if(this.listViewInstance.showCheckBox){if(this.listViewInstance.renderCheckbox(t),!F(this.listViewInstance.virtualCheckBox)&&!F(this.listViewInstance.virtualCheckBox.outerHTML)){var r=document.createElement("div");r.innerHTML=this.listViewInstance.template||n,r.children[0].classList.add("e-checkbox"),"Left"===this.listViewInstance.checkBoxPosition?r.children[0].classList.add("e-checkbox-left"):r.children[0].classList.add("e-checkbox-right"),"Left"===this.listViewInstance.checkBoxPosition?r.children[0].insertBefore(this.listViewInstance.virtualCheckBox,r.childNodes[0].children[0]):r.children[0].appendChild(this.listViewInstance.virtualCheckBox),this.listViewInstance.template=r.innerHTML}i.innerHTML=this.listViewInstance.template,this.listViewInstance.template=e}else i.innerHTML=this.listViewInstance.template||n;var o=i.getElementsByTagName("*"),s=this.listViewInstance.createElement("div");this.listViewInstance.fields.groupBy&&(s.innerHTML=this.listViewInstance.groupTemplate||n);var a=s.getElementsByTagName("*");t.curData.isHeader&&(this.headerData=t.curData),this.templateData=t.curData.isHeader?t.curData.items[0]:t.curData,t.item.innerHTML="",t.item.context={data:t.curData,nodes:{flatTemplateNodes:[],groupTemplateNodes:[]}};for(var l=0;l<o.length;l++)this.compileTemplate(o[l],t.item,!1);for(l=0;l<a.length;l++)this.compileTemplate(a[l],t.item,!0);t.item.context.template=t.curData.isHeader?i.firstElementChild:s.firstElementChild,t.item.context.type=t.curData.isHeader?"flatList":"groupList";var h=t.curData.isHeader?s:i;t.item.insertBefore(h.firstElementChild,null)},t.prototype.compileTemplate=function(t,e,i){this.textProperty(t,e,i),this.classProperty(t,e,i),this.attributeProperty(t,e,i)},t.prototype.onChange=function(t,e){e.context.data=t;var i=e.context.nodes.groupTemplateNodes,n=e.context.nodes.flatTemplateNodes;if(!F(t.isHeader)&&t.isHeader&&"groupList"===e.context.type){var r=e.firstElementChild;ai(e.firstElementChild),e.insertBefore(e.context.template,null),e.context.template=r,e.context.type="flatList";for(var o=0;o<i.length;o++)i[o].onChange(t)}else if(t.isHeader||"flatList"!==e.context.type)if(t.isHeader)for(o=0;o<i.length;o++)i[o].onChange(t);else for(o=0;o<n.length;o++)n[o].onChange(t);else{r=e.firstElementChild;ai(e.firstElementChild),e.insertBefore(e.context.template,null),e.context.template=r,e.context.type="groupList";for(var o=0;o<n.length;o++)n[o].onChange(t)}},t.prototype.updateContextData=function(t,e,i){i?t.context.nodes.groupTemplateNodes.push(e):t.context.nodes.flatTemplateNodes.push(e)},t.prototype.classProperty=function(t,e,i){for(var n,r=new RegExp("\\${([^}]*)}","g"),o=[];null!==n;){var s=r.exec(t.className);o.push(s),null===(n=s)&&o.pop()}if(o&&o.length)for(var a=function(n){var r,s=o[n];r=-1!==s[1].indexOf("?")&&-1!==s[1].indexOf(":")?new Function("data","return "+s[1].replace(/\$/g,"data.")):new Function("data","return data."+s[1]);var a={};a.bindedvalue=r(i?l.headerData:l.templateData),a.onChange=function(e){a.bindedvalue&&ei([t],a.bindedvalue.split(" ").filter(function(t){return t}));var i=r(e);i&&ti([t],i.split(" ").filter(function(t){return t})),a.bindedvalue=i};for(var h=s[0].split(" "),c=0;c<h.length;c++)t.classList.remove(h[c]);a.bindedvalue&&ti([t],a.bindedvalue.split(" ").filter(function(t){return t})),l.updateContextData(e,a,i)},l=this,h=0;h<o.length;h++)a(h)},t.prototype.attributeProperty=function(t,e,i){for(var n=[],r=0;r<t.attributes.length;r++)n.push(t.attributes[r].nodeName);-1!==n.indexOf("class")&&n.splice(n.indexOf("class"),1);var o=function(r){var o,a,l=n[r],h=new RegExp("\\${([^}]*)}","g").exec(l)||[],c=new RegExp("\\${([^}]*)}","g").exec(t.getAttribute(l))||[];if(h.length||c.length){h[1]&&(o=new Function("data","return data."+h[1])),c[1]&&(a=-1!==c[1].indexOf("?")&&-1!==c[1].indexOf(":")?new Function("data","return "+c[1].replace(/\$/g,"data.")):new Function("data","return data."+c[1]));var d={};d.bindedvalue=i?[void 0===h[1]?void 0:o(s.headerData),void 0===c[1]?void 0:a(s.headerData)]:[void 0===h[1]?void 0:o(s.templateData),void 0===c[1]?void 0:a(s.templateData)],d.attrName=void 0===d.bindedvalue[0]?l:d.bindedvalue[0],d.onChange=function(e){var i=void 0===d.bindedvalue[1]?t.getAttribute(d.attrName):a(e);t.removeAttribute(d.attrName),d.attrName=void 0===d.bindedvalue[0]?d.attrName:o(e),t.setAttribute(d.attrName,i),d.bindedvalue=[void 0===d.bindedvalue[0]?void 0:o(e),void 0===d.bindedvalue[1]?void 0:a(e)]};var p=void 0===d.bindedvalue[1]?t.getAttribute(l):d.bindedvalue[1];t.removeAttribute(l),t.setAttribute(d.attrName,p),s.updateContextData(e,d,i)}},s=this;for(r=0;r<n.length;r++)o(r)},t.prototype.textProperty=function(t,e,i){for(var n,r=new RegExp("\\${([^}]*)}","g"),o=[];null!==n;){var s=r.exec(t.innerText);o.push(s),null===(n=s)&&o.pop()}var a=Array.prototype.some.call(t.children,function(t){return!!new RegExp("\\${([^}]*)}","g").exec(t.innerText)});if(o&&o.length&&!a)for(var l=function(n){var r,s=o[n],a={};r=-1!==s[1].indexOf("?")&&-1!==s[1].indexOf(":")?new Function("data","return "+s[1].replace(/\$/g,"data.")):new Function("data","return data."+s[1]),a.bindedvalue=r(i?h.headerData:h.templateData),a.onChange=function(e){t.innerText=t.innerText.replace(a.bindedvalue,r(e)),a.bindedvalue=r(e)},t.innerText=t.innerText.replace(s[0],a.bindedvalue),h.updateContextData(e,a,i)},h=this,c=0;c<o.length;c++)l(c)},t.prototype.reRenderUiVirtualization=function(){this.wireScrollEvent(!0),this.listViewInstance.contentContainer&&ai(this.listViewInstance.contentContainer),this.listViewInstance.preRender(),this.domItemCount=0,this.listViewInstance.header(),this.listViewInstance.setLocalData()},t.prototype.updateUI=function(t,e,i){var n=this.isNgTemplate()?this.onNgChange:this.onChange;if(this.listViewInstance.template||this.listViewInstance.groupTemplate){var r=this.listViewInstance.curViewDS[e];t.dataset.uid=r[this.listViewInstance.fields.id]?r[this.listViewInstance.fields.id].toString():Gh.generateId(),n(r,t,this)}else this.updateUiContent(t,e);this.changeElementAttributes(t,e),i&&this.listViewInstance.ulElement.insertBefore(t,i)},t.prototype.onNgChange=function(t,e,i){for(var n=Te(i.listViewInstance.template)(t);e.lastChild;)e.removeChild(e.lastChild);e.appendChild(n[0])},t.prototype.getModuleName=function(){return"virtualization"},t.prototype.destroy=function(){this.wireScrollEvent(!0)},t}();!function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}();var vc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bc=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},wc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vc(e,t),bc([Hi()],e.prototype,"text",void 0),bc([Hi()],e.prototype,"value",void 0),bc([Hi()],e.prototype,"iconCss",void 0),bc([Hi()],e.prototype,"groupBy",void 0),bc([Hi()],e.prototype,"htmlAttributes",void 0),e}(ln),Sc="e-dropdownbase",xc="e-rtl",Cc="e-content",Pc="e-active",Oc="e-hover",Ec="e-nodata",Lc="e-fixed-head",Ic="e-item-focus",Tc="e-list-item",Ac="e-list-group-item",Bc="e-disabled",kc="e-dd-group",Mc=function(t){function e(e,i){return t.call(this,e,i)||this}return vc(e,t),e.prototype.getPropObject=function(t,e,i){var n=new Object,r=new Object,o=function(t){return t};n[o(t)]=e[o(t)],r[o(t)]=i[o(t)];var s=new Object;return s.newProperty=n,s.oldProperty=r,s},e.prototype.getValueByText=function(t,e,i){var n=null;return F(this.listData)||(n=e?this.checkValueCase(t,!0,i):this.checkValueCase(t,!1,i)),n},e.prototype.checkValueCase=function(t,e,i,n){var r=this,o=null;n&&(o=t);var s=this.listData,a=this.fields,l=this.typeOfData(s).typeof;if("string"===l||"number"===l||"boolean"===l)for(var h=0,c=s;h<c.length;h++){var d=c[h];F(d)||(i?o=this.checkingAccent(String(d),t,e):e?this.checkIgnoreCase(String(d),t)&&(o=this.getItemValue(String(d),t,e)):this.checkNonIgnoreCase(String(d),t)&&(o=this.getItemValue(String(d),t,e,n)))}else e?s.filter(function(e){!F(R(a.value,e))&&r.checkIgnoreCase(R(a.text,e).toString(),t)&&(o=R(a.value,e))}):n?s.filter(function(t){var e=R(a.value,t);F(e)||F(o)||e.toString()!==o.toString()||(o=R(a.text,t))}):s.filter(function(e){r.checkNonIgnoreCase(R(a.text,e),t)&&(o=R(a.value,e))});return o},e.prototype.checkingAccent=function(t,e,i){var n=Zh.ignoreDiacritics(String(t)),r=Zh.ignoreDiacritics(e.toString()),o=null;return i?this.checkIgnoreCase(n,r)&&(o=this.getItemValue(String(t),e,i)):this.checkNonIgnoreCase(String(t),e)&&(o=this.getItemValue(String(t),e,i)),o},e.prototype.checkIgnoreCase=function(t,e){return String(t).toLowerCase()===e.toString().toLowerCase()},e.prototype.checkNonIgnoreCase=function(t,e){return String(t)===e.toString()},e.prototype.getItemValue=function(t,e,i,n){var r=this.listData,o=this.typeOfData(r).typeof;return n?t.toString():i?"string"===o?String(t):this.getFormattedValue(String(t)):"string"===o?e:this.getFormattedValue(e)},e.prototype.templateCompiler=function(t){var e=!1;if(t){try{e=!!document.querySelectorAll(t).length}catch(t){e=!1}}return e},e.prototype.l10nUpdate=function(t){var e="listbox"===this.getModuleName()?this.ulElement:this.list;if("No records found"!==this.noRecordsTemplate||"Request failed"!==this.actionFailureTemplate){this.DropDownBaseresetBlazorTemplates(!1,!1,!0,!0);var i=t?this.actionFailureTemplate:this.noRecordsTemplate,n=t?this.actionFailureTemplateId:this.noRecordsTemplateId;e.innerHTML="";for(var r=0,o=Te(this.templateCompiler(i)?document.querySelector(i).innerHTML.trim():i)({},null,null,n,this.isStringTemplate);r<o.length;r++){var s=o[r];e.appendChild(s)}this.DropDownBaseupdateBlazorTemplates(!1,!1,!t,t,!1,!1,!1,!1)}else{var a=new Ln(this.getLocaleName(),{},this.locale);""!==a.getConstant("actionFailureTemplate")?this.l10n=a:this.l10n=new Ln("listbox"===this.getModuleName()?"listbox":"dropdowns",{noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},this.locale);var l=t?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate");if("listbox"===this.getModuleName()){var h=this.createElement("li");h.textContent=l,e.appendChild(h),h.classList.add("e-list-nrt")}else e.innerHTML=l}},e.prototype.getLocaleName=function(){return"drop-down-base"},e.prototype.getTextByValue=function(t){return this.checkValueCase(t,!1,!1,!0)},e.prototype.getFormattedValue=function(t){if(this.listData&&this.listData.length){var e=this.typeOfData(this.listData);if($()&&F(t)||"null"===t)return null;if("number"==typeof R(this.fields.value?this.fields.value:"value",e.item)||"number"===e.typeof)return parseFloat(t);if("boolean"==typeof R(this.fields.value?this.fields.value:"value",e.item)||"boolean"===e.typeof)return"true"===t}return t},e.prototype.setEnableRtl=function(){this.list&&this.enableRtlElements.push(this.list),this.enableRtl?ti(this.enableRtlElements,xc):ei(this.enableRtlElements,xc)},e.prototype.initialize=function(){if(this.bindEvent=!0,this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate","UL"===this.element.tagName){var t=Gh.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(t,this.fields)}else if("SELECT"===this.element.tagName){(this.dataSource instanceof Array?this.dataSource.length>0:!F(this.dataSource))||this.renderItemsBySelect()}else this.setListData(this.dataSource,this.fields,this.query)},e.prototype.DropDownBaseupdateBlazorTemplates=function(t,e,i,n,r,o,s,a){this.isStringTemplate||(this.itemTemplate&&t&&Ae(this.itemTemplateId,"ItemTemplate",this,a),this.groupTemplate&&e&&Ae(this.groupTemplateId,"GroupTemplate",this,a),this.noRecordsTemplate&&i&&Ae(this.noRecordsTemplateId,"NoRecordsTemplate",this,a),this.actionFailureTemplate&&n&&Ae(this.actionFailureTemplateId,"ActionFailureTemplate",this,a),r&&Ae(this.valueTemplateId,"ValueTemplate",this,a),o&&Ae(this.headerTemplateId,"HeaderTemplate",this),s&&Ae(this.footerTemplateId,"FooterTemplate",this))},e.prototype.DropDownBaseresetBlazorTemplates=function(t,e,i,n,r,o,s){this.isStringTemplate||(this.itemTemplate&&t&&Be(this.itemTemplateId),this.groupTemplate&&e&&Be(this.groupTemplateId),this.noRecordsTemplate&&i&&Be(this.noRecordsTemplateId),this.actionFailureTemplate&&n&&Be(this.actionFailureTemplateId),r&&Be(this.valueTemplateId),o&&Be(this.headerTemplateId),s&&Be(this.footerTemplateId))},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},e.prototype.updateDataAttribute=function(t){for(var e=["class","style","id","type"],i={},n=0;n<this.element.attributes.length;n++)-1!==e.indexOf(this.element.attributes[n].name)||"dropdownlist"===this.getModuleName()&&"readonly"===this.element.attributes[n].name||(i[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name));V(i,t,i),this.setProperties({htmlAttributes:i},!0)},e.prototype.renderItemsBySelect=function(){var t=this.element,e={value:"value",text:"text"},i=[],n=t.querySelectorAll("select>optgroup"),r=t.querySelectorAll("select>option");if(this.getJSONfromOption(i,r,e),n.length){for(var o=0;o<n.length;o++){var s=n[o],a={};a[e.text]=s.label,a.isHeader=!0;var l=s.querySelectorAll("option");i.push(a),this.getJSONfromOption(i,l,e)}t.querySelectorAll("select>option")}this.fields.text=e.text,this.fields.value=e.value,this.resetList(i,e)},e.prototype.getJSONfromOption=function(t,e,i){for(var n=0,r=e;n<r.length;n++){var o=r[n],s={};s[i.text]=o.innerText,s[i.value]=o.getAttribute(i.value)?o.getAttribute(i.value):o.innerText,t.push(s)}},e.prototype.preRender=function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=this.element.id+"ItemTemplate",this.valueTemplateId=this.element.id+"ValueTemplate",this.groupTemplateId=this.element.id+"GroupTemplate",this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate"},e.prototype.setListData=function(t,e,i){var n,r=this;e=e||this.fields,this.isActive=!0;var o={cancel:!1,data:t,query:i};this.trigger("actionBegin",o,function(i){if(!i.cancel)if(r.showSpinner(),t instanceof sc){if(r.isRequested=!0,r.isDataFetched)return void r.emptyDataRequest(e);i.data.executeQuery(r.getQuery(i.query)).then(function(t){r.trigger("actionComplete",t,function(t){if(!t.cancel){var i=t.result;0===i.length&&(r.isDataFetched=!0),n=r.renderItems(i,e),r.onActionComplete(n,i,t),r.groupTemplate&&r.renderGroupTemplate(n),r.isRequested=!1,r.bindChildItems(i,n,e,t)}})}).catch(function(t){r.isRequested=!1,r.onActionFailure(t),r.hideSpinner()})}else{var o=new sc(i.data),s={cancel:!1,result:r.getQuery(i.query).executeLocal(o)};r.trigger("actionComplete",s,function(t){t.cancel||(n=r.renderItems(t.result,e),r.onActionComplete(n,t.result),r.groupTemplate&&r.renderGroupTemplate(n),r.bindChildItems(t.result,n,e))})}})},e.prototype.bindChildItems=function(t,e,i,n){var r=this;t.length>=100&&"autocomplete"===this.getModuleName()?setTimeout(function(){oi(r.remainingItems(r.sortedData,i),e),r.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1),r.liCollections=r.list.querySelectorAll("."+Tc),r.updateListValues(),r.raiseDataBound(t,n)},0):this.raiseDataBound(t,n)},e.prototype.updateListValues=function(){},e.prototype.findListElement=function(t,e,i,n){var r=null;if(t)for(var o=[].slice.call(t.querySelectorAll(e)),s=0;s<o.length;s++)if(o[s].getAttribute(i)===n+""){r=o[s];break}return r},e.prototype.raiseDataBound=function(t,e){this.hideSpinner();var i={items:t,e:e};this.trigger("dataBound",i)},e.prototype.remainingItems=function(t,e){var i=new sc(t).executeLocal((new qh).skip(100));if(this.itemTemplate){var n=this.templateListItem(i,e);return[].slice.call(n.childNodes)}var r=this.typeOfData(i).typeof;return"string"===r||"number"===r||"boolean"===r?Gh.createListItemFromArray(this.createElement,i,!0,this.listOption(i,e)):Gh.createListItemFromJson(this.createElement,i,this.listOption(i,e),1,!0)},e.prototype.emptyDataRequest=function(t){var e=[];this.onActionComplete(this.renderItems(e,t),e),this.isRequested=!1,this.hideSpinner()},e.prototype.showSpinner=function(){},e.prototype.hideSpinner=function(){},e.prototype.onActionFailure=function(t){this.liCollections=[],this.trigger("actionFailure",t),this.l10nUpdate(!0),ti([this.list],Ec)},e.prototype.onActionComplete=function(t,e,i){this.listData=e,$()&&this.isServerRendered&&"listbox"===this.getModuleName()?(li(this.list.querySelector(".e-list-parent")),li(this.list.querySelector(".e-hidden-select"))):this.list.innerHTML="",this.fixedHeaderElement=F(this.fixedHeaderElement)?this.fixedHeaderElement:null,this.list.appendChild(t),this.liCollections=this.list.querySelectorAll("."+Tc),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,e,this.bindEvent)},e.prototype.postRender=function(t,e,i){var n=t.querySelector("."+Tc),r=t.querySelector("."+Pc);n&&!r&&n.classList.add(Ic),e.length<=0?(this.l10nUpdate(),ti([t],Ec)):t.classList.remove(Ec)},e.prototype.getQuery=function(t){return t||(this.query?this.query:new qh)},e.prototype.renderGroupTemplate=function(t){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector("."+Ac)){var e=this.dataSource,i={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},n=t.querySelectorAll("."+Ac);if(this.templateCompiler(this.groupTemplate)){var r=document.querySelector(this.groupTemplate).innerHTML.trim();Gh.renderGroupTemplate(r,e,this.fields.properties,n,i)}else Gh.renderGroupTemplate(this.groupTemplate,e,this.fields.properties,n,i);this.DropDownBaseupdateBlazorTemplates(!1,!0,!1,!1,!1,!1,!1,!1)}},e.prototype.createListItems=function(t,e){t&&e.groupBy||this.element.querySelector("optgroup")?(e.groupBy&&("None"!==this.sortOrder&&(t=this.getSortedDataSource(t)),t=Gh.groupDataSource(t,e.properties,this.sortOrder)),ti([this.list],kc)):t=this.getSortedDataSource(t);var i=this.listOption(t,e),n=t.length>100?new sc(t).executeLocal((new qh).take(100)):t;return this.sortedData=t,Gh.createList(this.createElement,"autocomplete"===this.getModuleName()?n:t,i,!0)},e.prototype.listOption=function(t,e){var i=!F(e.iconCss),n=F(e.properties)?e:e.properties;return V({},null!==e.text||null!==e.value?{fields:n,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},e,!0)},e.prototype.setFloatingHeader=function(t){F(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:Lc}),this.list.querySelector("li").classList.contains(Ac)||(this.fixedHeaderElement.style.display="none"),ri([this.fixedHeaderElement],this.list),this.setFixedHeader()),F(this.fixedHeaderElement)||"0"!==this.fixedHeaderElement.style.zIndex||this.setFixedHeader(),this.scrollStop(t)},e.prototype.scrollStop=function(t){for(var e=t.target,i=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10),n=Math.round(e.scrollTop/i),r=this.list.querySelectorAll("li"),o=n;o>-1;o--){if(!F(r[o])&&r[o].classList.contains(Ac)){var s=r[o];this.fixedHeaderElement.innerHTML=s.innerHTML,this.fixedHeaderElement.style.top=t.target.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}},e.prototype.renderItems=function(t,e){var i;if(this.itemTemplate&&t){var n=t;n&&e.groupBy?("None"!==this.sortOrder&&(n=this.getSortedDataSource(n)),n=Gh.groupDataSource(n,e.properties,this.sortOrder)):n=this.getSortedDataSource(n),this.sortedData=n;var r=n.length>100?new sc(n).executeLocal((new qh).take(100)):n;i=this.templateListItem("autocomplete"===this.getModuleName()?r:n,e);var o="listbox"===this.getModuleName();this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1,!1,!1,!1,o)}else i=this.createListItems(t,e);return i},e.prototype.templateListItem=function(t,e){this.DropDownBaseresetBlazorTemplates(!0,!1,!1,!1);var i=this.listOption(t,e);if(i.templateID=this.itemTemplateId,i.isStringTemplate=this.isStringTemplate,this.templateCompiler(this.itemTemplate)){var n=document.querySelector(this.itemTemplate).innerHTML.trim();return Gh.renderContentTemplate(this.createElement,n,t,e.properties,i)}return Gh.renderContentTemplate(this.createElement,this.itemTemplate,t,e.properties,i)},e.prototype.typeOfData=function(t){for(var e={typeof:null,item:null},i=0;!F(t)&&i<t.length;i++){if(!F(t[i]))if(!F("string"==typeof t[i]||"number"==typeof t[i]||"boolean"==typeof t[i]?t[i]:R(this.fields.value?this.fields.value:"value",t[i])))return{typeof:typeof t[i],item:t[i]}}return e},e.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var t=0;this.list&&this.list.parentElement&&(t=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10));var e=this.liCollections[0].offsetWidth-t;this.fixedHeaderElement.style.width=e.toString()+"px",gi(this.fixedHeaderElement,{zIndex:10});var i=this.ulElement.querySelector("."+Ac);this.fixedHeaderElement.innerHTML=i.innerHTML},e.prototype.getSortedDataSource=function(t){if(t&&"None"!==this.sortOrder){var e=this.fields.text?this.fields.text:"text";t=Gh.getDataSource(t,Gh.addSorting(this.sortOrder,e))}return t},e.prototype.getIndexByValue=function(t){for(var e,i=this.getItems(),n=0;n<i.length;n++)if(!F(t)&&i[n].getAttribute("data-value")===t.toString()){e=n;break}return e},e.prototype.dispatchEvent=function(t,e){var i=document.createEvent("HTMLEvents");i.initEvent(e,!1,!0),t.dispatchEvent(i)},e.prototype.setFields=function(){this.fields.value&&!this.fields.text?this.fields.text=this.fields.value:!this.fields.value&&this.fields.text?this.fields.value=this.fields.text:this.fields.value||this.fields.text||(this.fields.value=this.fields.text="text")},e.prototype.resetList=function(t,e,i){if(this.list){if("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0)!(t instanceof Array?t.length>0:!F(t))&&this.selectData&&this.selectData.length>0&&(t=this.selectData);this.setListData(t,e,i)}},e.prototype.updateSelectElementData=function(t){t&&F(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)},e.prototype.updateSelection=function(){},e.prototype.renderList=function(){this.render()},e.prototype.updateDataSource=function(t){this.resetList(this.dataSource)},e.prototype.setUpdateInitial=function(t,e){this.isDataFetched=!1;for(var i={},n=0;t.length>n;n++)e[t[n]]&&"fields"===t[n]?this.setFields():e[t[n]]&&(i[t[n]]=e[t[n]]);Object.keys(i).length>0&&(-1===Object.keys(i).indexOf("dataSource")&&(i.dataSource=this.dataSource),this.updateDataSource(i))},e.prototype.onPropertyChanged=function(t,e){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],t),this.setUpdateInitial(["sortOrder","itemTemplate"],t);for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnabled();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){var r=this.ulElement.querySelector("."+Ac);this.fixedHeaderElement.innerHTML=r.innerHTML}break;case"locale":this.list&&!F(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:t.zIndex},!0),this.setZIndex()}}},e.prototype.render=function(t){this.list=this.createElement("div",{className:Cc,attrs:{tabindex:"0"}}),this.list.classList.add(Sc),this.setFields();var e={duration:300,selector:"."+Tc};this.rippleFun=Qi(this.list,e);var i=this.element.querySelector("select>optgroup");if(!this.fields.groupBy&&F(i)||this.isGroupChecking||ee.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),ei([this.element],Sc),this.element.style.display="none";var n=this.createElement("div");this.element.parentElement.insertBefore(n,this.element),n.appendChild(this.element),n.appendChild(this.list)}this.setEnableRtl(),this.setEnabled(),t||this.initialize()},e.prototype.getModuleName=function(){return"dropdownbase"},e.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+Tc)},e.prototype.addItem=function(t,e){if((!this.list||this.list.textContent===this.noRecordsTemplate&&"listbox"!==this.getModuleName())&&this.renderList(),"None"!==this.sortOrder&&F(e)){var i=[].slice.call(this.listData);i.push(t),e=(i=this.getSortedDataSource(i)).indexOf(t)}this.DropDownBaseresetBlazorTemplates(!0,!1,!1,!1);var n,r=this.getItems().length,o=this.list.querySelector("."+Pc);t=t instanceof Array?t:[t],n=F(e)||e<0||e>r-1?r:e;var s=this.fields;t&&s.groupBy&&(t=Gh.groupDataSource(t,s.properties));for(var a=[],l=0;l<t.length;l++){var h=t[l],c=h.isHeader,d=this.createElement("li",{className:c?Ac:Tc,id:"option-add-"+l}),p=h instanceof Object?R(s.text,h):h;if(c&&(d.innerText=p),this.itemTemplate&&!c)oi(Te(this.itemTemplate)(h,null,null,this.itemTemplateId,this.isStringTemplate),d),this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1);else c||d.appendChild(document.createTextNode(p));d.setAttribute("data-value",h instanceof Object?R(s.value,h):h),d.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:d}),a.push(d),this.listData.push(h),this.updateActionCompleteData(d,h),this.trigger("beforeItemRender",{element:d,item:h})}if(0===r&&F(this.list.querySelector("ul")))this.list.innerHTML="",this.list.classList.remove(Ec),this.list.appendChild(this.ulElement),this.liCollections=a,oi(a,this.ulElement),this.updateAddItemList(this.list,r);else{"listbox"===this.getModuleName()&&0===r&&(this.ulElement.innerHTML="");var u=[];for(l=0;l<t.length;l++){for(var f=this.ulElement.querySelectorAll(".e-list-group-item"),g=0;g<f.length;g++)u[g]=f[g].innerText;if(u.indexOf(a[l].innerText)>-1&&s.groupBy){for(g=0;g<f.length;g++)if(u[g]===a[l].innerText){this.ulElement.insertBefore(a[l+1],f[g+1]),l+=1;break}}else this.liCollections[n]?this.liCollections[n].parentNode.insertBefore(a[l],this.liCollections[n]):this.ulElement.appendChild(a[l]);var m=[].slice.call(this.liCollections);m.splice(n,0,a[l]),this.liCollections=m,n+=1,"multiselect"===this.getModuleName()&&this.updateDataList()}}(o||0===e)&&this.updateSelection()},e.prototype.validationAttribute=function(t,e){var i=t.getAttribute("name")?t.getAttribute("name"):t.getAttribute("id");e.setAttribute("name",i),t.removeAttribute("name");for(var n=["required","aria-required","form"],r=0;r<n.length;r++)if(t.getAttribute(n[r])){var o=t.getAttribute(n[r]);e.setAttribute(n[r],o),t.removeAttribute(n[r])}},e.prototype.setZIndex=function(){},e.prototype.updateActionCompleteData=function(t,e){},e.prototype.updateAddItemList=function(t,e){},e.prototype.updateDataList=function(){},e.prototype.getDataByValue=function(t){if(!F(this.listData)){var e=this.typeOfData(this.listData).typeof;if("string"===e||"number"===e||"boolean"===e)for(var i=0,n=this.listData;i<n.length;i++){if(!F(s=n[i])&&s===t)return s}else for(var r=0,o=this.listData;r<o.length;r++){var s;if(!F(s=o[r])&&R(this.fields.value?this.fields.value:"value",s)===t)return s}}return null},e.prototype.destroy=function(){document.body.contains(this.list)&&(ee.remove(this.list,"scroll",this.setFloatingHeader),F(this.rippleFun)||this.rippleFun(),ai(this.list)),t.prototype.destroy.call(this)},bc([_i({text:null,value:null,iconCss:null,groupBy:null},wc)],e.prototype,"fields",void 0),bc([Hi(!1)],e.prototype,"enablePersistence",void 0),bc([Hi(null)],e.prototype,"itemTemplate",void 0),bc([Hi(null)],e.prototype,"groupTemplate",void 0),bc([Hi("No records found")],e.prototype,"noRecordsTemplate",void 0),bc([Hi("Request failed")],e.prototype,"actionFailureTemplate",void 0),bc([Hi("None")],e.prototype,"sortOrder",void 0),bc([Hi(!0)],e.prototype,"enabled",void 0),bc([Hi([])],e.prototype,"dataSource",void 0),bc([Hi(null)],e.prototype,"query",void 0),bc([Hi("StartsWith")],e.prototype,"filterType",void 0),bc([Hi(!0)],e.prototype,"ignoreCase",void 0),bc([Hi(1e3)],e.prototype,"zIndex",void 0),bc([Hi(!1)],e.prototype,"ignoreAccent",void 0),bc([Hi()],e.prototype,"locale",void 0),bc([Ui()],e.prototype,"actionBegin",void 0),bc([Ui()],e.prototype,"actionComplete",void 0),bc([Ui()],e.prototype,"actionFailure",void 0),bc([Ui()],e.prototype,"select",void 0),bc([Ui()],e.prototype,"dataBound",void 0),bc([Ui()],e.prototype,"created",void 0),bc([Ui()],e.prototype,"destroyed",void 0),e=bc([Gi],e)}(un),Dc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Rc=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},zc={root:"e-dropdownlist",hover:Oc,selected:Pc,rtl:xc,li:Tc,disable:Bc,base:Sc,focus:Ic,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"},jc={container:null,buttons:[]},Nc=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.previousValue=null,n}return Dc(e,t),e.prototype.preRender=function(){var e=$()&&this.isServerRendered;this.isServerBlazor=!!e,this.isServerBlazor?this.initializeData():(this.element.style.opacity="0",this.initializeData(),t.prototype.preRender.call(this)),this.activeIndex=this.index,this.queryString=""},e.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"}},e.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},e.prototype.renderList=function(e){this.isServerBlazor?this.interopAdaptor.invokeMethodAsync("OnServerRenderList",this.beforePopupOpen,!1):(t.prototype.render.call(this,e),this.wireListEvents())},e.prototype.floatLabelChange=function(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){var t=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?mi(t,["e-label-top"],["e-label-bottom"]):mi(t,["e-label-bottom"],["e-label-top"])}},e.prototype.resetHandler=function(t){t.preventDefault(),this.clearAll(t)},e.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!F(this.ulElement)){var t=this.ulElement.querySelector("."+zc.li);t&&t.classList.add(zc.focus)}},e.prototype.clearAll=function(t,e){!F(e)&&(F(e)||!F(e.dataSource)&&(e.dataSource instanceof sc||0!==e.dataSource.length))||(this.isActive=!0,this.resetSelection(e));var i=this.getItemData();this.previousValue!==i.value&&this.onChangeEvent(t)},e.prototype.resetSelection=function(t){if(this.list)if(F(t)||!F(t.dataSource)&&(t.dataSource instanceof sc||0!==t.dataSource.length)){if(this.allowFiltering&&"autocomplete"!==this.getModuleName()&&!F(this.actionCompleteData.ulElement)&&!F(this.actionCompleteData.list)){var e=this.actionCompleteData.ulElement.querySelector("li"),i=this.ulElement&&this.ulElement.querySelector("li");"EJS-COMBOBOX"===this.element.tagName&&e&&i&&e.childElementCount>0&&i.childElementCount>0&&e.textContent!==i.textContent&&this.itemTemplate&&this.cloneElements(),this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list)}this.resetFocusElement()}else this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(t.dataSource);this.isServerBlazor||(this.hiddenElement.innerHTML=""),this.inputElement.value="",this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(ai(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()},e.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if("class"===i){var n=this.htmlAttributes[i].replace(/\s+/g," ").trim();""!==n&&ti([this.inputWrapper.container],n.split(" "))}else if("disabled"===i&&"disabled"===this.htmlAttributes[i])this.enabled=!1,this.setEnable();else if("readonly"!==i||F(this.htmlAttributes[i]))if("style"===i)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[i]);else{var r=["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"];"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||r.push("tabindex"),0===i.indexOf("data")||["name","required"].indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[i]):r.indexOf(i)>-1?"placeholder"===i?ya.setPlaceholder(this.htmlAttributes[i],this.inputElement):this.inputElement.setAttribute(i,this.htmlAttributes[i]):this.inputWrapper.container.setAttribute(i,this.htmlAttributes[i])}else this.readonly=!0,this.dataBind()}"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.inputWrapper.container.removeAttribute("tabindex")},e.prototype.getAriaAttributes=function(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-live":"polite","aria-labelledby":this.hiddenElement.id}},e.prototype.setEnableRtl=function(){ya.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},e.prototype.setEnable=function(){ya.setEnabled(this.enabled,this.inputElement),this.enabled?(ei([this.inputWrapper.container],zc.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),ti([this.inputWrapper.container],zc.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.getLocaleName=function(){return"drop-down-list"},e.prototype.preventTabIndex=function(t){"dropdownlist"===this.getModuleName()&&(t.tabIndex=-1)},e.prototype.targetElement=function(){return this.inputWrapper.container},e.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},e.prototype.getElementByText=function(t){return this.getElementByValue(this.getValueByText(t))},e.prototype.getElementByValue=function(t){for(var e,i=0,n=this.getItems();i<n.length;i++){var r=n[i];if(this.getFormattedValue(r.getAttribute("data-value"))===t){e=r;break}}return e},e.prototype.initValue=function(){this.renderList(),this.dataSource instanceof sc?this.initRemoteRender=!0:this.updateValues()},e.prototype.updateValues=function(){if(F(this.value))if(this.text&&F(this.value)){var t=this.getElementByText(this.text);if(F(t))return void this.setProperties({text:null});this.setSelection(t,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else this.setSelection(this.getElementByValue(this.value),null);this.setHiddenValue(),ya.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.onBlur=function(t){if(this.enabled){var e=t.relatedTarget,i=t.target,n=this.isPreventBlur;this.isPreventBlur=!1,!n||this.isDocumentClick||!this.isPopupOpen||F(i)&&(this.isFilterLayout()||!F(e))?this.isDocumentClick||!F(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(zc.mobileFilter)?this.beforePopupOpen||(this.isDocumentClick=!1):(("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&e!==this.inputElement&&(document.activeElement!==e||document.activeElement===e&&i.classList.contains(zc.inputFocus))||F(e)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&i!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(e)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(t),this.isTabKey=!1),!this.isRequested||this.isPopupOpen||this.isPreventBlur||(this.isActive=!1,this.beforePopupOpen=!1)):"dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus()}},e.prototype.focusOutAction=function(t){this.isInteracted=!1,this.focusOut(t),this.onFocusOut()},e.prototype.onFocusOut=function(){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&ti([this.inputWrapper.clearButton],zc.clearIconHide),this.trigger("blur"))},e.prototype.onFocus=function(t){if(!this.isInteracted){this.isInteracted=!0;var e={isInteracted:!!t,event:t};this.trigger("focus",e)}this.updateIconState()},e.prototype.resetValueHandler=function(t){var e=pi(this.inputElement,"form");if(e&&t.target===e){var i=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=i}},e.prototype.wireEvent=function(){ee.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),ee.add(this.inputWrapper.container,"focus",this.focusIn,this),ee.add(this.inputWrapper.container,"keypress",this.onSearch,this),this.bindCommonEvent()},e.prototype.bindCommonEvent=function(){ee.add(this.targetElement(),"blur",this.onBlur,this);var t=pi(this.inputElement,"form");t&&ee.add(t,"reset",this.resetValueHandler,this),te.isDevice?this.keyboardModule=new En(this.targetElement(),{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.keyboardModule=new En(this.targetElement(),{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()},e.prototype.bindClearEvent=function(){this.showClearButton&&ee.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},e.prototype.unBindCommonEvent=function(){ee.remove(this.targetElement(),"blur",this.onBlur);var t=pi(this.inputElement,"form");t&&ee.remove(t,"reset",this.resetValueHandler),te.isDevice||this.keyboardModule.destroy(),this.showClearButton&&ee.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},e.prototype.updateIconState=function(){this.showClearButton&&(""===this.inputElement.value||this.readonly?ti([this.inputWrapper.clearButton],zc.clearIconHide):ei([this.inputWrapper.clearButton],zc.clearIconHide))},e.prototype.wireListEvents=function(){ee.add(this.list,"click",this.onMouseClick,this),ee.add(this.list,"mouseover",this.onMouseOver,this),ee.add(this.list,"mouseout",this.onMouseLeave,this)},e.prototype.onSearch=function(t){32!==t.charCode&&13!==t.charCode&&(void 0===this.list&&(this.isServerBlazor?(this.isServerIncrementalSearch=!0,this.interopAdaptor.invokeMethodAsync("OnServerRenderList",!0,!1)):this.renderList()),this.searchKeyEvent=t,this.onServerIncrementalSearch(t))},e.prototype.onServerIncrementalSearch=function(t){this.isRequested||F(this.list)||F(this.list.querySelector("li"))||!this.enabled||this.readonly||this.incrementalSearch(t)},e.prototype.onMouseClick=function(t){var e=t.target,i=(e.classList,pi(e,"."+Tc));if(this.isValidLI(i))if(this.setSelection(i,t),te.isDevice&&this.isFilterLayout())history.back();else{this.closePopup(100)}},e.prototype.onMouseOver=function(t){var e=pi(t.target,"."+Tc);this.setHover(e)},e.prototype.setHover=function(t){this.enabled&&this.isValidLI(t)&&!t.classList.contains(Oc)&&(this.removeHover(),ti([t],Oc))},e.prototype.onMouseLeave=function(t){this.removeHover()},e.prototype.removeHover=function(){if(this.list){var t=this.isServerBlazor&&this.popupObj&&this.popupObj.element?this.popupObj.element.querySelectorAll("."+Oc):this.list.querySelectorAll("."+Oc);t&&t.length&&ei(t,Oc)}},e.prototype.isValidLI=function(t){return t&&t.hasAttribute("role")&&"option"===t.getAttribute("role")},e.prototype.incrementalSearch=function(t){if(this.liCollections.length>0){var e=function(t,e,i,n,r,o){var s;if(_h+=String.fromCharCode(t),setTimeout(function(){_h=""},1e3),_h=n?_h.toLowerCase():_h,Uh===r&&Vh===_h){for(var a=0;a<Fh.length;a++)if(Fh[a].classList.contains(Wh)){s=a;break}return Fh[s+=1]}var l=e,h=_h.length,c=void 0;a=i=i?i+1:0,Fh=[];do{a===l.length&&(a=-1),c=l[s=-1===a?0:a],(o?n?c.textContent.trim().toLowerCase():c.textContent.trim():n?c.innerText.toLowerCase():c.innerText).substr(0,h)===_h&&Fh.push(l[s]),a++}while(a!==i);return Vh=_h,Uh=r,Fh[0]}(t.charCode,this.liCollections,this.activeIndex,!0,this.element.id,this.isServerBlazor);F(e)||(this.setSelection(e,t),this.setScrollPosition())}},e.prototype.hideSpinner=function(){F(this.spinnerElement)||(ea(this.spinnerElement),ei([this.spinnerElement],zc.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},e.prototype.showSpinner=function(){F(this.spinnerElement)&&(this.spinnerElement=te.isDevice&&!F(this.filterInputObj)&&this.filterInputObj.buttons[1]||!F(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],ti([this.spinnerElement],zc.disableIcon),_s({target:this.spinnerElement,width:te.isDevice?"16px":"14px"},this.createElement),$s(this.spinnerElement))},e.prototype.keyActionHandler=function(t){if(this.enabled){var e="pageUp"===t.action||"pageDown"===t.action,i="dropdownlist"!==this.getModuleName()&&("home"===t.action||"end"===t.action);this.isEscapeKey="escape"===t.action,this.isTabKey=!this.isPopupOpen&&"tab"===t.action;var n="down"===t.action||"up"===t.action||"home"===t.action||"end"===t.action,r="down"===t.action||"up"===t.action||"pageUp"===t.action||"pageDown"===t.action||"home"===t.action||"end"===t.action;if((!(this.isEditTextBox()||e||i)||this.isPopupOpen)&&!this.readonly){var o="tab"===t.action||"close"===t.action;if(void 0!==this.list||this.isRequested||o||"escape"===t.action||(this.searchKeyEvent=t,this.renderList()),((!this.isServerBlazor||"open"!==t.action&&"space"!==t.action)&&F(this.list)||!F(this.liCollections)&&r&&0===this.liCollections.length||this.isRequested)&&(!this.isServerBlazor||!n))return;switch((o&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===t.action)&&t.preventDefault(),this.isSelected="escape"!==t.action&&this.isSelected,this.isTyped=!r&&"escape"!==t.action&&this.isTyped,t.action){case"down":case"up":this.updateUpDownAction(t);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),t),t.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),t),t.preventDefault();break;case"home":case"end":this.updateHomeEndAction(t);break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||this.showPopup());break;case"open":this.showPopup();break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(t),this.focusDropDown(t);break;case"enter":this.selectCurrentItem(t);break;case"tab":this.selectCurrentValueOnTab(t);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(t),this.focusDropDown(t))}}}},e.prototype.updateUpDownAction=function(t){if(this.isServerBlazor&&F(this.list))this.isServerNavigation=!0,this.interopAdaptor.invokeMethodAsync("OnServerRenderList",!0,!1);else{this.isServerNavigation=!1;var e=this.list.querySelector("."+zc.focus);if(this.isSelectFocusItem(e))this.setSelection(e,t);else{var i,n="down"===t.action?this.activeIndex+1:this.activeIndex-1,r=0;"autocomplete"===this.getModuleName()&&(r="down"===t.action&&F(this.activeIndex)?0:this.liCollections.length-1,n=n<0?this.liCollections.length-1:n===this.liCollections.length?0:n),i=F(this.activeIndex)?this.liCollections[r]:this.liCollections[n],F(i)||this.setSelection(i,t)}t.preventDefault()}},e.prototype.updateHomeEndAction=function(t){if("dropdownlist"===this.getModuleName())if(this.isServerBlazor&&F(this.list))this.isServerNavigation=!0,this.interopAdaptor.invokeMethodAsync("OnServerRenderList",!0,!1);else{this.isServerNavigation=!1;var e=0;if(e="home"===t.action?0:this.getItems().length-1,t.preventDefault(),this.activeIndex===e)return;this.setSelection(this.liCollections[e],t)}},e.prototype.selectCurrentValueOnTab=function(t){"autocomplete"===this.getModuleName()?this.selectCurrentItem(t):this.isPopupOpen&&(this.hidePopup(t),this.focusDropDown(t))},e.prototype.mobileKeyActionHandler=function(t){if(this.enabled&&(!this.isEditTextBox()||this.isPopupOpen)&&!this.readonly){if(void 0!==this.list||this.isRequested||(this.searchKeyEvent=t,this.renderList()),F(this.list)||!F(this.liCollections)&&0===this.liCollections.length||this.isRequested)return;"enter"===t.action&&this.selectCurrentItem(t)}},e.prototype.selectCurrentItem=function(t){if(this.isPopupOpen){var e=this.list.querySelector("."+zc.focus);e&&(this.setSelection(e,t),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(t)),this.hidePopup(),this.focusDropDown(t)}else this.showPopup()},e.prototype.isSelectFocusItem=function(t){return!F(t)},e.prototype.getPageCount=function(){var t=this.list.classList.contains(Ec)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(t,10))},e.prototype.pageUpSelection=function(t,e){var i=t>=0?this.liCollections[t+1]:this.liCollections[0];this.setSelection(i,e)},e.prototype.pageDownSelection=function(t,e){var i=this.getItems(),n=t<=i.length?this.liCollections[t-1]:this.liCollections[i.length-1];this.setSelection(n,e)},e.prototype.unWireEvent=function(){ee.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),ee.remove(this.inputWrapper.container,"keypress",this.onSearch),ee.remove(this.inputWrapper.container,"focus",this.focusIn),this.unBindCommonEvent()},e.prototype.unWireListEvents=function(){ee.remove(this.list,"click",this.onMouseClick),ee.remove(this.list,"mouseover",this.onMouseOver),ee.remove(this.list,"mouseout",this.onMouseLeave)},e.prototype.checkSelector=function(t){return"#"+t.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")},e.prototype.onDocumentClick=function(t){var e=t.target;if(!F(this.popupObj)&&pi(e,this.checkSelector(this.popupObj.element.id))||this.inputWrapper.container.contains(t.target))e===this.inputElement||this.allowFiltering&&e===this.filterInput||"combobox"===this.getModuleName()&&!this.allowFiltering&&te.isDevice&&e===this.inputWrapper.buttons[0]||(this.isPreventBlur=(te.isIE||"edge"===te.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),t.preventDefault());else if(this.inputWrapper.container.classList.contains(zc.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var i=this.isRequested;this.isInteracted=!1,this.hidePopup(t),i||(this.onFocusOut(),this.inputWrapper.container.classList.remove(zc.inputFocus))}},e.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(zc.inputFocus))},e.prototype.focusDropDown=function(t){!this.initial&&this.isFilterLayout()&&this.focusIn(t)},e.prototype.dropDownClick=function(t){if(3!==t.which&&2!==t.button&&!this.targetElement().classList.contains(zc.disable)&&this.inputWrapper.clearButton!==t.target){var e=t.target;if(e===this.inputElement||this.allowFiltering&&e===this.filterInput||"combobox"===this.getModuleName()||t.preventDefault(),this.readonly)this.focusIn(t);else{this.isPopupOpen?(this.hidePopup(),this.isFilterLayout()&&this.focusDropDown(t)):(this.focusIn(t),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup());var i=this,n=$()?1e3:this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(function(){i.cloneElements(),i.isSecondClick=!0},n)}}},e.prototype.cloneElements=function(){if(this.list){var t=this.list.querySelector("ul");t&&(t=t.cloneNode?t.cloneNode(!0):t,this.actionCompleteData.ulElement=t)}},e.prototype.updateSelectedItem=function(t,e,i,n){var r=this;this.removeSelection(),t.classList.add(Pc),this.removeHover();var o=this.getFormattedValue(t.getAttribute("data-value")),s=this.getDataByValue(o);if(this.initial||i||F(e))this.selectEventCallback(t,e,i,s,o),this.isServerBlazor&&this.interopAdaptor.invokeMethodAsync("OnServerItemData",this.itemData),n&&this.setSelectOptions(t,e);else{var a=this.detachChanges(s);this.isSelected=!0;var l={e:e,item:t,itemData:a,isInteracted:!!e,cancel:!1};this.trigger("select",l,function(a){a.cancel?t.classList.remove(Pc):(r.selectEventCallback(t,e,i,s,o),r.isServerBlazor&&r.interopAdaptor.invokeMethodAsync("OnServerItemData",r.itemData),n&&r.setSelectOptions(t,e))})}},e.prototype.selectEventCallback=function(t,e,i,n,r){this.previousItemData=F(this.itemData)?null:this.itemData,this.item=t,this.itemData=n;var o=this.list.querySelector("."+Ic);o&&ei([o],Ic),t.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(r)},e.prototype.activeItem=function(t){this.isValidLI(t)&&!t.classList.contains(Pc)&&(this.removeSelection(),t.classList.add(Pc),this.removeHover(),t.setAttribute("aria-selected","true"))},e.prototype.setValue=function(t){var e=this.getItemData();return null===e.value?$()&&null!==e.text||""!==e.text?ya.setValue(e.text,this.inputElement,this.floatLabelType,this.showClearButton):ya.setValue(null,this.inputElement,this.floatLabelType,this.showClearButton):ya.setValue(e.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isServerBlazor&&this.interopAdaptor.invokeMethodAsync("OnServerValueTemplate",e),this.valueTemplate&&null!==this.itemData&&!this.isServerBlazor?(this.DropDownBaseresetBlazorTemplates(!1,!1,!1,!1,!0),this.setValueTemplate()):this.inputElement.previousSibling===this.valueTempElement&&(ai(this.valueTempElement),this.inputElement.style.display="block"),this.previousValue===e.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)},e.prototype.setSelection=function(t,e){this.isValidLI(t)&&(!t.classList.contains(Pc)||this.isPopupOpen&&this.isSelected&&t.classList.contains(Pc))?this.updateSelectedItem(t,e,!1,!0):this.setSelectOptions(t,e)},e.prototype.setSelectOptions=function(t,e){this.list&&this.removeHover(),this.previousSelectedLI=F(this.selectedLI)?null:this.selectedLI,this.selectedLI=t,this.setValue(e)||(this.isPopupOpen&&(hi(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null}),this.isFilterLayout()&&this.filterInput&&hi(this.filterInput,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})),(!this.isPopupOpen&&!F(t)||this.isPopupOpen&&!F(e)&&("keydown"!==e.type||"keydown"===e.type&&"enter"===e.action))&&(this.isSelectCustom=!1,this.onChangeEvent(e)),!this.isPopupOpen||F(this.selectedLI)||null===this.itemData||e&&"click"===e.type||this.setScrollPosition(e),"mozilla"!==te.info.name&&(hi(this.inputElement,{"aria-label":this.inputElement.value}),hi(this.targetElement(),{"aria-describedby":this.inputElement.id}),this.targetElement().removeAttribute("aria-live")))},e.prototype.dropdownCompiler=function(t){var e=!1;if(t){try{e=!!document.querySelectorAll(t).length}catch(t){e=!1}}return e},e.prototype.setValueTemplate=function(){this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:zc.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.valueTempElement.innerHTML="";for(var t=$()?JSON.parse(JSON.stringify(this.itemData)):this.itemData,e=0,i=Te(this.dropdownCompiler(this.valueTemplate)?document.querySelector(this.valueTemplate).innerHTML.trim():this.valueTemplate)(t,null,null,this.valueTemplateId,this.isStringTemplate);e<i.length;e++){var n=i[e];this.valueTempElement.appendChild(n)}this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!0,!0,!0)},e.prototype.removeSelection=function(){if(this.list){var t=this.list.querySelectorAll("."+Pc);t.length&&(ei(t,Pc),t[0].removeAttribute("aria-selected"))}},e.prototype.getItemData=function(){var t,e,i,n=this.fields;return F(t=this.itemData)||(e=R(n.value,t),i=R(n.text,t)),{value:F(t)||W(e)?t:e,text:F(t)||W(e)?t:i}},e.prototype.onChangeEvent=function(t){var e=this.getItemData(),i=this.isSelectCustom?null:this.activeIndex;this.setProperties({index:i,text:e.text,value:e.value},!0),this.detachChangeEvent(t)},e.prototype.detachChanges=function(t){return"string"==typeof t||"boolean"==typeof t||"number"==typeof t?Object.defineProperties({},{value:{value:t,enumerable:!0},text:{value:t,enumerable:!0}}):t},e.prototype.detachChangeEvent=function(t){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=F(this.text)?"":this.text,!this.initial){var e=this.detachChanges(this.itemData),i=void 0;i="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue();var n={e:t,item:this.item,itemData:e,previousItem:this.previousSelectedLI,previousItemData:i,isInteracted:!!t,value:this.value,element:this.element};this.trigger("change",n),this.isServerBlazor&&this.enablePersistence&&this.interopAdaptor.invokeMethodAsync("ServerChange")}!F(this.value)&&""!==this.value||"Always"===this.floatLabelType||ei([this.inputWrapper.container],"e-valid-input")},e.prototype.setHiddenValue=function(){if(F(this.value))this.isServerBlazor||(this.hiddenElement.innerHTML="");else if(this.isServerBlazor&&this.hiddenElement.querySelector("option"))(t=this.hiddenElement.querySelector("option")).textContent=this.text,t.setAttribute("value",this.value.toString());else if(!this.isServerBlazor){var t;this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>",(t=this.hiddenElement.querySelector("option")).setAttribute("value",this.value.toString())}},e.prototype.onFilterUp=function(t){if(t.ctrlKey&&86===t.keyCode||!this.isValidKey&&40!==t.keyCode&&38!==t.keyCode)this.isValidKey=!1;else switch(this.isValidKey=!1,t.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(t)),this.preventAltUp=!1,t.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0?(this.preventAutoFill=!0,this.searchLists(t)):""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(t)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"autocomplete"===this.getModuleName()&&this.hidePopup()),t.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(t)}},e.prototype.onFilterDown=function(t){switch(t.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,t.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&t.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}},e.prototype.removeFillSelection=function(){if(this.isInteracted){var t=this.getSelectionPoints();this.inputElement.setSelectionRange(t.end,t.end)}},e.prototype.getQuery=function(t){var e;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){e=t?t.clone():this.query?this.query.clone():new qh;var i=""===this.typedString?"contains":this.filterType,n=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof sc||"string"!==n)&&"number"!==n){var r=this.fields.text?this.fields.text:"";e.where(r,i,this.typedString,this.ignoreCase,this.ignoreAccent)}else e.where("",i,this.typedString,this.ignoreCase,this.ignoreAccent)}else e=t||(this.query?this.query:new qh);return e},e.prototype.getSelectionPoints=function(){var t=this.inputElement;return{start:Math.abs(t.selectionStart),end:Math.abs(t.selectionEnd)}},e.prototype.searchLists=function(t){var e=this;(this.isTyped=!0,this.activeIndex=null,this.filterInput.parentElement.querySelector("."+zc.clearIcon))&&(this.filterInput.parentElement.querySelector("."+zc.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible");if(this.isDataFetched=!1,this.isFiltering())if(this.isServerBlazor)this.beforePopupOpen="combobox"===this.getModuleName()&&this.isFiltering()&&!this.beforePopupOpen?!this.beforePopupOpen:this.beforePopupOpen,""===this.filterInput.value&&"dropdownlist"!==this.getModuleName()?this.interopAdaptor.invokeMethodAsync("OnServerRenderList",this.beforePopupOpen,!1):this.interopAdaptor.invokeMethodAsync("OnServerFilter",this.filterInput.value);else{var i={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(t,n,r){i.cancel||(e.isCustomFilter=!0,e.filteringAction(t,n,r))},baseEventArgs:t,cancel:!1};this.trigger("filtering",i,function(t){t.cancel||e.isCustomFilter||t.preventDefaultAction||e.filteringAction(e.dataSource,null,e.fields)})}},e.prototype.filter=function(t,e,i){this.isCustomFilter=!0,this.filteringAction(t,e,i)},e.prototype.filteringAction=function(t,e,i){F(this.filterInput)||(this.beforePopupOpen=!0,""!==this.filterInput.value.trim()||this.itemTemplate?(this.isNotSearchList=!1,e=""===this.filterInput.value.trim()?null:e,this.resetList(t,i,e)):(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,F(this.actionCompleteData.ulElement)||F(this.actionCompleteData.list)||this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list),this.isTyped=!0,F(this.itemData)||"dropdownlist"!==this.getModuleName()||(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0))},e.prototype.setSearchBox=function(t){if(this.isFiltering()){var e=t.querySelector("."+zc.filterParent)?t.querySelector("."+zc.filterParent):this.createElement("span",{className:zc.filterParent});this.isServerBlazor&&(e.innerHTML=""),this.filterInput=this.createElement("input",{attrs:{type:"text"},className:zc.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var i=!1;return te.isDevice&&(i=!0),this.filterInputObj=ya.createInput({element:this.filterInput,buttons:i?[zc.backIcon,zc.filterBarClearIcon]:[zc.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),F(this.cssClass)||(-1!==this.cssClass.split(" ").indexOf("e-outline")?ti([this.filterInputObj.container],"e-outline"):-1!==this.cssClass.split(" ").indexOf("e-filled")&&ti([this.filterInputObj.container],"e-filled")),oi([this.filterInputObj.container],e),ri([e],t),hi(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":this.selectedLI?this.selectedLI.id:null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+zc.clearIcon),!te.isDevice&&this.clearIconElement&&(ee.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),te.isDevice?this.searchKeyModule=new En(this.filterInput,{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.searchKeyModule=new En(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),ee.add(this.filterInput,"input",this.onInput,this),ee.add(this.filterInput,"keyup",this.onFilterUp,this),ee.add(this.filterInput,"keydown",this.onFilterDown,this),ee.add(this.filterInput,"blur",this.onBlur,this),ee.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}return jc},e.prototype.onInput=function(t){this.isValidKey=!0,te.isDevice&&"mozilla"===te.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(t))},e.prototype.pasteHandler=function(t){var e=this;setTimeout(function(){e.typedString=e.filterInput.value,e.searchLists(t)})},e.prototype.onActionFailure=function(e){t.prototype.onActionFailure.call(this,e),this.beforePopupOpen&&this.renderPopup()},e.prototype.onActionComplete=function(e,i,n,r){var o=this;if(this.isNotSearchList)this.isNotSearchList=!1;else if(this.isActive){var s=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(t.prototype.onActionComplete.call(this,e,i,n),this.updateSelectElementData(this.allowFiltering),this.isRequested&&!F(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!F(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,F(e)||hi(e,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender&&(this.initial=!0,this.activeIndex=this.index,this.updateValues(),this.initRemoteRender=!1,this.initial=!1,this.value&&this.dataSource instanceof sc)){var a=F(this.fields.value)?this.fields.text:this.fields.value;i.some(function(t){return t[a]===o.value})||this.dataSource.executeQuery(this.getQuery(this.query).where(new Xh(a,"equal",this.value))).then(function(t){t.result.length>0&&(o.addItem(t.result,i.length),o.updateValues())})}"autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped&&(this.actionCompleteData.isUpdated&&(this.isCustomFilter||this.isFilterFocus||!(this.dataSource instanceof sc||!F(this.dataSource)&&!F(this.dataSource.length)&&0!==this.dataSource.length))||(this.actionCompleteData={ulElement:e.cloneNode(!0),list:i,isUpdated:!0}),this.addNewItem(i,s),F(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup()}},e.prototype.addNewItem=function(t,e){var i=this;if(!F(this.itemData)&&!F(e)){var n=this.getItemData().value;t.some(function(t){return("string"==typeof t||"number"==typeof t)&&t===n||R(i.fields.value,t)===n})||this.addItem(this.itemData)}},e.prototype.updateActionCompleteData=function(t,e){"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.actionCompleteData.ulElement.appendChild(t.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list.indexOf(e)<0&&this.actionCompleteData.list.push(e))},e.prototype.focusIndexItem=function(){var t=this.getItemData().value;this.activeIndex=this.getIndexByValue(t);var e=this.findListElement(this.list,"li","data-value",t);this.selectedLI=e,this.activeItem(e),this.removeFocus()},e.prototype.updateSelection=function(){var t=this.list.querySelector("."+Pc);t?(this.setProperties({index:this.getIndexByValue(t.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+Tc).classList.add(zc.focus))},e.prototype.removeFocus=function(){var t=this.list.querySelectorAll("."+zc.focus);t&&t.length&&ei(t,zc.focus)},e.prototype.renderPopup=function(){var t=this;if(this.popupObj&&document.body.contains(this.popupObj.element))this.refreshPopup();else{this.trigger("beforeOpen",{cancel:!1},function(e){if(e.cancel)t.beforePopupOpen=!1;else{var i=t.serverPopupEle?t.serverPopupEle:t.createElement("div",{id:t.element.id+"_popup",className:"e-ddl e-popup "+(null!=t.cssClass?t.cssClass:"")}),n=t.setSearchBox(i);if(t.listHeight=J(t.popupHeight),t.headerTemplate&&!t.isServerBlazor&&t.setHeaderTemplate(i),oi([t.list],i),t.footerTemplate&&!t.isServerBlazor&&t.setFooterTemplate(i),t.isServerRendered&&i&&i.querySelector(".e-ddl-footer")&&i.appendChild(i.querySelector(".e-ddl-footer")),document.body.appendChild(i),t.updateServerPopup(i),i.style.visibility="hidden","auto"!==t.popupHeight){if(t.searchBoxHeight=0,F(n.container)||(t.searchBoxHeight=n.container.parentElement.getBoundingClientRect().height,t.listHeight=(parseInt(t.listHeight,10)-t.searchBoxHeight).toString()+"px"),t.headerTemplate||t.isServerRendered&&i&&i.querySelector(".e-ddl-header")){t.header=t.header?t.header:i.querySelector(".e-ddl-header");var r=Math.round(t.header.getBoundingClientRect().height);t.listHeight=(parseInt(t.listHeight,10)-(r+t.searchBoxHeight)).toString()+"px"}if(t.footerTemplate||t.isServerRendered&&i&&i.querySelector(".e-ddl-footer")){t.footer=t.footer?t.footer:i.querySelector(".e-ddl-footer");r=Math.round(t.footer.getBoundingClientRect().height);t.listHeight=(parseInt(t.listHeight,10)-(r+t.searchBoxHeight)).toString()+"px"}t.list.style.maxHeight=(parseInt(t.listHeight,10)-2).toString()+"px",i.style.maxHeight=J(t.popupHeight)}else i.style.height="auto";var o=0,s=void 0;if(!F(t.selectedLI)&&!F(t.activeIndex)&&t.activeIndex>=0?t.setScrollPosition():t.list.scrollTop=0,te.isDevice&&!t.allowFiltering&&("dropdownlist"===t.getModuleName()||t.isDropDownClick&&"combobox"===t.getModuleName())){o=t.getOffsetValue(i);var a=t.isEmptyList()?t.list:t.liCollections[0];s=-(parseInt(getComputedStyle(a).textIndent,10)-parseInt(getComputedStyle(t.inputElement).paddingLeft,10)+parseInt(getComputedStyle(t.inputElement.parentElement).borderLeftWidth,10))}t.getFocusElement(),t.createPopup(i,o,s),t.checkCollision(i),te.isDevice&&(t.popupObj.element.classList.add(zc.device),("dropdownlist"===t.getModuleName()||"combobox"===t.getModuleName()&&!t.allowFiltering&&t.isDropDownClick)&&(t.popupObj.collision={X:"fit",Y:"fit"}),t.isFilterLayout()&&(t.popupObj.element.classList.add(zc.mobileFilter),t.popupObj.position={X:0,Y:0},t.popupObj.dataBind(),hi(t.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),ti([document.body,t.popupObj.element],zc.popupFullScreen),t.setSearchBoxPosition(),t.backIconElement=n.container.querySelector(".e-back-icon"),t.clearIconElement=n.container.querySelector("."+zc.clearIcon),ee.add(t.backIconElement,"click",t.clickOnBackIcon,t),ee.add(t.clearIconElement,"click",t.clearText,t))),i.style.visibility="visible",ti([i],"e-popup-close");for(var l=0,h=t.popupObj.getScrollableParent(t.inputWrapper.container);l<h.length;l++){var c=h[l];ee.add(c,"scroll",t.scrollHandler,t)}te.isDevice&&t.isFilterLayout()&&ee.add(t.list,"scroll",t.listScroll,t),hi(t.targetElement(),{"aria-expanded":"true"}),ti([t.isFiltering()?t.filterInput.parentElement:t.inputWrapper.container],[zc.inputFocus]);t.beforePopupOpen=!0;var d={popup:$()&&t.isServerRendered?null:t.popupObj,cancel:!1,animation:{name:"FadeIn",duration:100}};t.trigger("open",d,function(e){e.cancel?(t.beforePopupOpen=!1,t.destroyPopup()):(t.serverBlazorUpdateSelection(),t.bindServerScrollEvent(),ti([t.inputWrapper.container],[zc.iconAnimation]),t.popupObj.show(new Ji(e.animation),1e3===t.zIndex?t.element:null))})}})}},e.prototype.checkCollision=function(t){(!te.isDevice||te.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick)&&(Hr(t).length>0&&(t.style.marginTop=-parseInt(getComputedStyle(t).marginTop,10)+"px"),this.popupObj.resolveCollision())},e.prototype.serverBlazorUpdateSelection=function(){(this.isServerBlazor&&(null!==this.value||null!==this.index||null!==this.text)||"dropdownlist"!==this.getModuleName()&&!this.isTyped)&&("dropdownlist"===this.getModuleName()&&(this.removeSelection(),this.removeFocus(),this.removeHover(),this.updateValues()),"combobox"===this.getModuleName()&&this.ulElement&&this.findListElement(this.ulElement,"li","data-value",this.value)&&!this.isTyped&&this.updateValues(),this.isServerBlazor&&"dropdownlist"!==this.getModuleName()&&(""===this.text||null===this.text)&&this.ulElement&&(this.ulElement.querySelector("li").classList.contains(Oc)||ti([this.ulElement.querySelector("li")],Oc)))},e.prototype.bindServerScrollEvent=function(){this.isServerBlazor&&this.list&&this.fields.groupBy&&!this.isGroupChecking&&(ee.remove(this.list,"scroll",this.setFloatingHeader),ee.add(this.list,"scroll",this.setFloatingHeader,this))},e.prototype.updateServerPopup=function(t){this.isServerBlazor&&(t&&t.querySelector("li")&&ei([t.querySelector(".e-content")],["e-nodata"]),this.initial=!1,t.removeAttribute("style"))},e.prototype.getOffsetValue=function(t){var e=getComputedStyle(t),i=parseInt(e.borderTopWidth,10),n=parseInt(e.borderBottomWidth,10);return this.setPopupPosition(i+n)},e.prototype.createPopup=function(t,e,i){var n=this;this.popupObj=new ho(t,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:{X:"flip",Y:"flip"},offsetY:e,enableRtl:this.enableRtl,offsetX:i,position:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){n.isDocumentClick||n.focusDropDown();var t="autocomplete"===n.getModuleName();n.DropDownBaseresetBlazorTemplates(t,t,!0,!0,!1,!0,!0),n.isNotSearchList=!1,n.isDocumentClick=!1,n.destroyPopup();var e=pi(n.inputElement,"form");n.isFiltering()&&e&&n.actionCompleteData.list&&n.actionCompleteData.list[0]&&(n.isActive=!0,n.onActionComplete(n.actionCompleteData.ulElement,n.actionCompleteData.list,null,!0))},open:function(){ee.add(document,"mousedown",n.onDocumentClick,n),n.isPopupOpen=!0;var t=n.actionCompleteData&&n.actionCompleteData.ulElement&&n.actionCompleteData.ulElement.querySelector("li"),e=n.list.querySelector("ul li");n.isFiltering()&&n.itemTemplate&&n.element.tagName===n.getNgDirective()&&t&&e&&t.textContent!==e.textContent&&n.cloneElements(),n.isFilterLayout()&&(ei([n.inputWrapper.container],[zc.inputFocus]),n.isFilterFocus=!0,n.filterInput.focus(),n.inputWrapper.clearButton&&ti([n.inputWrapper.clearButton],zc.clearIconHide)),n.activeStateChange()},targetExitViewport:function(){te.isDevice||n.hidePopup()}})},e.prototype.isEmptyList=function(){return!F(this.liCollections)&&0===this.liCollections.length},e.prototype.getFocusElement=function(){},e.prototype.isFilterLayout=function(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering},e.prototype.scrollHandler=function(){te.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.hidePopup()},e.prototype.setSearchBoxPosition=function(){var t=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-t+"px",this.list.style.height=window.innerHeight-t+"px";var e=this.filterInput.parentElement.querySelector("."+zc.clearIcon);ai(this.filterInput),e.parentElement.insertBefore(this.filterInput,e)},e.prototype.setPopupPosition=function(t){var e,i=t,n=this.list.querySelector("."+zc.focus)||this.selectedLI,r=this.isEmptyList()?this.list:this.liCollections[0],o=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],s=r.getBoundingClientRect().height,a=this.list.offsetHeight/2,l=F(n)?r.offsetTop:n.offsetTop;if(o.offsetTop-a<l&&!F(this.liCollections)&&this.liCollections.length>0&&!F(n)){var h=this.list.offsetHeight/s,c=parseInt(getComputedStyle(this.list).paddingBottom,10);e=(h-(this.liCollections.length-this.activeIndex))*s-i+c,this.list.scrollTop=n.offsetTop}else l>a?(e=a-s/2,this.list.scrollTop=l-a+s/2):e=l;return-(e=e+s+i-(s-this.inputWrapper.container.offsetHeight)/2)},e.prototype.setWidth=function(){var t=J(this.popupWidth);t.indexOf("%")>-1&&(t=(this.inputWrapper.container.offsetWidth*parseFloat(t)/100).toString()+"px");if(te.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){var e=this.isEmptyList()?this.list:this.liCollections[0];t=parseInt(t,10)+2*(parseInt(getComputedStyle(e).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return t},e.prototype.scrollBottom=function(t){if(!F(this.selectedLI)){var e=this.list.offsetHeight,i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop,n=this.list.scrollTop+i-e;n=t?n+2*parseInt(getComputedStyle(this.list).paddingTop,10):n;var r=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;r=this.fields.groupBy&&!F(this.fixedHeaderElement)?r-this.fixedHeaderElement.offsetHeight:r,0===this.activeIndex?this.list.scrollTop=0:(i>e||!(r>0&&this.list.offsetHeight>r))&&(this.list.scrollTop=n)}},e.prototype.scrollTop=function(){if(!F(this.selectedLI)){var t=this.selectedLI.offsetTop-this.list.scrollTop;this.selectedLI.offsetTop,this.selectedLI.offsetHeight,this.list.scrollTop;t=this.fields.groupBy&&!F(this.fixedHeaderElement)?t-this.fixedHeaderElement.offsetHeight:t;var e=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:t<0?this.list.scrollTop=this.list.scrollTop+t:e>0&&this.list.offsetHeight>e||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!F(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},e.prototype.isEditTextBox=function(){return!1},e.prototype.isFiltering=function(){return this.allowFiltering},e.prototype.isPopupButton=function(){return!0},e.prototype.setScrollPosition=function(t){if(F(t))this.scrollBottom(!0);else switch(t.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}},e.prototype.clearText=function(){this.filterInput.value="",this.searchLists(null)},e.prototype.listScroll=function(){this.filterInput.blur()},e.prototype.setEleWidth=function(t){F(t)||("number"==typeof t?this.inputWrapper.container.style.width=J(t):"string"==typeof t&&(this.inputWrapper.container.style.width=t.match(/px|%|em/)?t:J(t)))},e.prototype.closePopup=function(t){var e=this;if(this.isTyped=!1,this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen){ee.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var i=0,n=this.popupObj.getScrollableParent(this.inputWrapper.container);i<n.length;i++){var r=n[i];ee.remove(r,"scroll",this.scrollHandler)}te.isDevice&&this.isFilterLayout()&&(ei([document.body,this.popupObj.element],zc.popupFullScreen),ee.remove(this.list,"scroll",this.listScroll)),this.isFilterLayout()&&(te.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&ee.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(ee.remove(this.backIconElement,"click",this.clickOnBackIcon),ee.remove(this.clearIconElement,"click",this.clearText)),ee.remove(this.filterInput,"input",this.onInput),ee.remove(this.filterInput,"keyup",this.onFilterUp),ee.remove(this.filterInput,"keydown",this.onFilterDown),ee.remove(this.filterInput,"blur",this.onBlur),ee.remove(this.filterInput,"paste",this.pasteHandler),this.filterInput=null),hi(this.targetElement(),{"aria-expanded":"false","aria-activedescendant":null}),this.inputWrapper.container.classList.remove(zc.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1;var o={name:"FadeOut",duration:100,delay:t||0},s={popup:$()&&this.isServerRendered?null:this.popupObj,cancel:!1,animation:o};this.trigger("close",s,function(t){if(!F(e.popupObj)&&!F(e.popupObj.element.querySelector(".e-fixed-head"))){var i=e.popupObj.element.querySelector(".e-fixed-head");i.parentNode.removeChild(i),e.fixedHeaderElement=null}t.cancel||("autocomplete"!==e.getModuleName()||e.isServerBlazor||e.rippleFun(),e.isPopupOpen?e.popupObj.hide(new Ji(t.animation)):e.destroyPopup())})}},e.prototype.destroyPopup=function(){var t=document.querySelector("#"+this.element.id+"_popup_holder");this.isServerBlazor&&this.serverPopupEle&&t&&t.appendChild(this.serverPopupEle),this.isServerBlazor&&this.interopAdaptor.invokeMethodAsync("OnServerClosePopup"),this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj.destroy(),ai(this.popupObj.element)},e.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},e.prototype.render=function(){if(this.isServerBlazor)this.inputElement=this.element,this.inputWrapper={container:this.element.parentElement},this.hiddenElement=this.inputWrapper.container.querySelector("select"),this.inputWrapper.buttons=[this.inputWrapper.container.querySelector(".e-input-group-icon.e-ddl-icon")],this.showClearButton&&(this.inputWrapper.clearButton=this.inputWrapper.container.querySelector(".e-clear-icon"),ya.wireClearBtnEvents(this.element,this.inputWrapper.clearButton,this.inputWrapper.container)),"Auto"===this.floatLabelType&&ya.wireFloatingEvents(this.element),ya.bindInitialEvent({element:this.element,buttons:null,customTag:null,floatLabelType:this.floatLabelType,properties:this.properties}),this.setFields(),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.enabled||(this.targetElement().tabIndex=-1),this.element.hasAttribute("autofocus")&&this.focusIn();else{"INPUT"===this.element.tagName?(this.inputElement=this.element,F(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","textbox"),F(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text")):(this.inputElement=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));var t=this.cssClass;F(this.cssClass)||""===this.cssClass||(t=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=ya.createInput({element:this.inputElement,buttons:this.isPopupButton()?[zc.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:t,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:zc.hiddenElement}}),ri([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setFields(),this.inputWrapper.container.style.width=J(this.width),this.inputWrapper.container.classList.add("e-ddl"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var e=this.element.getAttribute("id")?this.element.getAttribute("id"):U("ej2_dropdownlist");if(this.element.id=e,this.hiddenElement.id=e+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),hi(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),null!==this.value||null!==this.activeIndex||null!==this.text)this.initValue();else if("SELECT"===this.element.tagName&&this.element.options[0]){var i=this.element;this.value=i.options[i.selectedIndex].value,this.text=F(this.value)?null:i.options[i.selectedIndex].textContent,this.initValue()}this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(t){t.stopImmediatePropagation()},this.inputElement.onchange=function(t){t.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),F(this.text)||this.inputElement.setAttribute("value",this.text)}this.renderComplete()},e.prototype.setFooterTemplate=function(t){this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),ti([this.footer],zc.footer));for(var e=0,i=Te(this.dropdownCompiler(this.footerTemplate)?document.querySelector(this.footerTemplate).innerHTML.trim():this.footerTemplate)({},null,null,this.footerTemplateId,this.isStringTemplate);e<i.length;e++){var n=i[e];this.footer.appendChild(n)}this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!1,!0),oi([this.footer],t)},e.prototype.setHeaderTemplate=function(t){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),ti([this.header],zc.header));for(var e=0,i=Te(this.dropdownCompiler(this.headerTemplate)?document.querySelector(this.headerTemplate).innerHTML.trim():this.headerTemplate)({},null,null,this.headerTemplateId,this.isStringTemplate);e<i.length;e++){var n=i[e];this.header.appendChild(n)}this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!0,!1);var r=t.querySelector("div.e-content");t.insertBefore(this.header,r)},e.prototype.setOldText=function(t){this.text=t},e.prototype.setOldValue=function(t){this.value=t},e.prototype.refreshPopup=function(){F(this.popupObj)||!document.body.contains(this.popupObj.element)||(!this.allowFiltering||te.isDevice&&this.isFilterLayout())&&"autocomplete"!==this.getModuleName()||(ei([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())},e.prototype.checkDatasource=function(t){t.dataSource&&!F(Object.keys(t.dataSource))&&this.itemTemplate&&this.allowFiltering&&(this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1});var e=-1!==Object.keys(t).indexOf("value")&&F(t.value),i=-1!==Object.keys(t).indexOf("text")&&F(t.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(e||i)&&(this.itemData=null)},e.prototype.updateDataSource=function(t){""===this.inputElement.value&&(F(t)||!F(t.dataSource)&&(t.dataSource instanceof sc||0!==t.dataSource.length))||this.clearAll(null,t),(F(t)||!F(t.dataSource)&&(t.dataSource instanceof sc||0!==t.dataSource.length)||t.dataSource!==[])&&this.resetList(this.dataSource),this.isCustomFilter||this.isFilterFocus||document.activeElement===this.filterInput||this.checkCustomValue()},e.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var t=this.getItemData();this.setProperties({value:t.value,text:t.text})},e.prototype.updateInputFields=function(){"dropdownlist"===this.getModuleName()&&ya.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.onPropertyChanged=function(e,i){"dropdownlist"===this.getModuleName()&&(this.isServerBlazor||(this.checkDatasource(e),this.setUpdateInitial(["fields","query","dataSource"],e)));for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];switch(o){case"query":case"dataSource":break;case"htmlAttributes":this.setHTMLAttributes();break;case"width":this.setEleWidth(e.width);break;case"placeholder":ya.setPlaceholder(e.placeholder,this.inputElement);break;case"filterBarPlaceholder":this.filterInput&&ya.setPlaceholder(e.filterBarPlaceholder,this.filterInput);break;case"readonly":"dropdownlist"!==this.getModuleName()&&ya.setReadonly(e.readonly,this.inputElement);break;case"cssClass":this.setCssClass(e.cssClass,i.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnable();break;case"text":if(null===e.text){this.clearAll();break}if(this.list||(this.dataSource instanceof sc&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var s=this.getElementByText(e.text);this.checkValidLi(s)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(e.text,i.text,"text"):this.isServerBlazor||this.setOldText(i.text)),this.updateInputFields()}break;case"value":if(null===e.value){this.clearAll();break}if(this.notify("beforeValueChange",{newProp:e}),this.list||(this.dataSource instanceof sc&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var a=this.getElementByValue(e.value);this.checkValidLi(a)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(e.value,i.value,"value"):this.isServerBlazor||this.setOldValue(i.value)),this.updateInputFields()}break;case"index":if(null===e.index){this.clearAll();break}if(this.list||(this.dataSource instanceof sc&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender&&this.liCollections){var l=this.liCollections[e.index];this.checkValidLi(l)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(e.index,i.index,"index"):this.isServerBlazor||(this.index=i.index)),this.updateInputFields()}break;case"footerTemplate":this.popupObj&&this.setFooterTemplate(this.popupObj.element);break;case"headerTemplate":this.popupObj&&this.setHeaderTemplate(this.popupObj.element);break;case"valueTemplate":F(this.itemData)||null==this.valueTemplate||this.setValueTemplate();break;case"allowFiltering":this.allowFiltering&&(this.actionCompleteData={ulElement:this.ulElement,list:this.listData,isUpdated:!0},this.updateSelectElementData(this.allowFiltering));break;case"floatLabelType":ya.removeFloating(this.inputWrapper),ya.addFloating(this.inputElement,e.floatLabelType,this.placeholder,this.createElement);break;case"showClearButton":ya.setClearButton(e.showClearButton,this.inputElement,this.inputWrapper,null,this.createElement),this.bindClearEvent();break;default:var h;h=this.getPropObject(o,e,i),t.prototype.onPropertyChanged.call(this,h.newProperty,h.oldProperty)}}},e.prototype.checkValidLi=function(t){return!!this.isValidLI(t)&&(this.setSelection(t,null),!0)},e.prototype.setSelectionData=function(t,e,i){var n,r=this;this.updateListValues=function(){"text"===i?(n=r.getElementByText(t),r.checkValidLi(n)||r.setOldText(e)):"value"===i?(n=r.getElementByValue(t),r.checkValidLi(n)||r.setOldValue(e)):"index"===i&&(n=r.liCollections[t],r.checkValidLi(n)||(r.index=e))}},e.prototype.setCssClass=function(t,e){F(e)||(e=e.replace(/\s+/g," ").trim()),F(t)||(t=t.replace(/\s+/g," ").trim()),ya.setCssClass(t,[this.inputWrapper.container],e),this.popupObj&&ya.setCssClass(t,[this.popupObj.element],e)},e.prototype.getModuleName=function(){return"dropdownlist"},e.prototype.showPopup=function(){if(this.enabled)if($()&&this.itemTemplate&&this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1),this.beforePopupOpen)this.refreshPopup();else{this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):F(this.list)||!W(this.list)&&this.list.classList.contains(Ec)?this.renderList():this.isFiltering()&&this.isServerBlazor&&this.renderList(),this.isServerBlazor||this.invokeRenderPopup();var t=!this.isFiltering()||document.querySelector("#"+this.element.id+"_popup_holder"),e="dropdownlist"===this.getModuleName()||!this.isFiltering();this.isServerBlazor&&t&&!F(this.list)&&e&&this.invokeRenderPopup()}},e.prototype.invokeRenderPopup=function(){if(te.isDevice&&this.isFilterLayout()){var t=this;window.onpopstate=function(){t.hidePopup()},history.pushState({},"")}F(this.list.children[0])&&!this.list.classList.contains(Ec)||this.renderPopup(),hi(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})},e.prototype.clientRenderPopup=function(t,e){e?(this.serverPopupEle=e,this.list=e.querySelector(".e-dropdownbase.e-content")?e.querySelector(".e-dropdownbase.e-content"):this.list,this.ulElement=this.list.querySelector("ul"),F(this.ulElement)&&!this.list.classList.contains(Ec)&&ti([this.list],[Ec]),this.liCollections=this.ulElement?this.ulElement.querySelectorAll("."+Tc):[],this.listData=t,"autocomplete"===this.getModuleName()&&this.liCollections.length>0&&this.renderHightSearch(),this.initRemoteRender=!1,this.isPopupOpen||this.serverBlazorUpdateSelection(),this.unWireListEvents(),this.wireListEvents(),this.isServerIncrementalSearch&&this.searchKeyEvent&&(this.isServerIncrementalSearch=!1,this.initial=!1,this.onServerIncrementalSearch(this.searchKeyEvent)),this.isServerNavigation&&this.searchKeyEvent&&("down"===this.searchKeyEvent.action||"up"===this.searchKeyEvent.action?(this.isServerNavigation=!1,this.updateUpDownAction(this.searchKeyEvent)):"home"!==this.searchKeyEvent.action&&"end"!==this.searchKeyEvent.action||(this.isServerNavigation=!1,this.updateHomeEndAction(this.searchKeyEvent))),this.beforePopupOpen&&this.invokeRenderPopup(),"dropdownlist"!==this.getModuleName()&&this.onActionComplete(this.ulElement,this.listData)):null!=t&&this.listData!==t&&(this.listData=t,this.initRemoteRender=!1)},e.prototype.renderHightSearch=function(){},e.prototype.updateclientItemData=function(t){this.listData=t},e.prototype.initValueItemData=function(t){this.itemData=t,this.previousValue=this.value,this.initial=!1},e.prototype.serverUpdateListElement=function(t,e){this.listData=t,this.ulElement&&(this.liCollections=this.ulElement.querySelectorAll("."+Tc))},e.prototype.hidePopup=function(t){var e=!!this.headerTemplate,i=!!this.headerTemplate;if(this.DropDownBaseresetBlazorTemplates(!1,!1,!1,!1,!1,e,i),this.isEscapeKey&&"dropdownlist"===this.getModuleName())if(ya.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,F(this.index))this.resetSelection();else{var n=this.findListElement(this.ulElement,"li","data-value",this.value);this.selectedLI=this.liCollections[this.index]||n,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}this.closePopup();var r=this.getItemData(),o=this.isServerBlazor?!F(this.value):!F(this.selectedLI);""===this.inputElement.value.trim()&&!this.isInteracted&&(this.isSelectCustom||o&&this.inputElement.value!==r.text)&&(this.isSelectCustom=!1,this.clearAll(t))},e.prototype.focusIn=function(t){if(this.enabled&&!this.targetElement().classList.contains(zc.disable)){var e=!1;this.preventFocus&&te.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,e=!0),e||this.targetElement().focus(),ti([this.inputWrapper.container],[zc.inputFocus]),this.onFocus(t)}},e.prototype.focusOut=function(t){this.enabled&&(this.isTyped=!0,this.hidePopup(t),this.targetElement().blur(),ei([this.inputWrapper.container],[zc.inputFocus]))},e.prototype.destroy=function(){if(this.isActive=!1,(!this.isServerBlazor||this.popupObj&&document.body.contains(this.popupObj.element))&&this.hidePopup(),this.unWireEvent(),this.list&&(this.unWireListEvents(),this.isServerBlazor&&this.fields.groupBy&&!this.isGroupChecking&&ee.remove(this.list,"scroll",this.setFloatingHeader)),!this.isServerBlazor){if(this.element&&!this.element.classList.contains("e-"+this.getModuleName()))return;for(var e=["readonly","aria-disabled","aria-placeholder","placeholder","aria-owns","aria-labelledby","aria-haspopup","aria-expanded","aria-activedescendant","autocomplete","aria-readonly","autocorrect","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"],i=0;i<e.length;i++)this.inputElement.removeAttribute(e[i]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),ya.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()?ai(this.inputWrapper.container):(this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),ai(this.inputWrapper.container)),t.prototype.destroy.call(this)}},e.prototype.getItems=function(){return this.list||(this.dataSource instanceof sc&&(this.initRemoteRender=!0),this.renderList()),this.ulElement?t.prototype.getItems.call(this):[]},e.prototype.getDataByValue=function(e){return t.prototype.getDataByValue.call(this,e)},e.prototype.clear=function(){this.value=null},Rc([Hi(null)],e.prototype,"cssClass",void 0),Rc([Hi("100%")],e.prototype,"width",void 0),Rc([Hi("300px")],e.prototype,"popupHeight",void 0),Rc([Hi("100%")],e.prototype,"popupWidth",void 0),Rc([Hi(null)],e.prototype,"placeholder",void 0),Rc([Hi(null)],e.prototype,"filterBarPlaceholder",void 0),Rc([Hi({})],e.prototype,"htmlAttributes",void 0),Rc([Hi(null)],e.prototype,"query",void 0),Rc([Hi(null)],e.prototype,"valueTemplate",void 0),Rc([Hi(null)],e.prototype,"headerTemplate",void 0),Rc([Hi(null)],e.prototype,"footerTemplate",void 0),Rc([Hi(!1)],e.prototype,"allowFiltering",void 0),Rc([Hi(!1)],e.prototype,"readonly",void 0),Rc([Hi(null)],e.prototype,"text",void 0),Rc([Hi(null)],e.prototype,"value",void 0),Rc([Hi(null)],e.prototype,"index",void 0),Rc([Hi("Never")],e.prototype,"floatLabelType",void 0),Rc([Hi(!1)],e.prototype,"showClearButton",void 0),Rc([Ui()],e.prototype,"filtering",void 0),Rc([Ui()],e.prototype,"change",void 0),Rc([Ui()],e.prototype,"beforeOpen",void 0),Rc([Ui()],e.prototype,"open",void 0),Rc([Ui()],e.prototype,"close",void 0),Rc([Ui()],e.prototype,"blur",void 0),Rc([Ui()],e.prototype,"focus",void 0),e=Rc([Gi],e)}(Mc),Hc={},_c={},Vc={},Fc={},Wc={},Uc={},Gc={};Object(I.copy)(Hc,v),Object(I.copy)(_c,n),Object(I.copy)(Vc,m),Object(I.copy)(Fc,y),Object(I.copy)(Wc,p),Object(I.copy)(Uc,o),Object(I.copy)(Gc,a);var qc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xc=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Yc=function(t){function e(e,i){return t.call(this,e,i)||this}return qc(e,t),e.prototype.preRender=function(){this.browser=te.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=te.isDevice,this.customStep=!0;var t=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===t.id&&(t.id=U("hscroll"),this.uniqueId=!0),t.style.display="block",this.enableRtl&&t.classList.add("e-rtl")},e.prototype.render=function(){this.touchModule=new kn(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),ee.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},e.prototype.setScrollState=function(){F(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},e.prototype.initialize=function(){var t=this.createElement("div",{className:"e-hscroll-content"}),e=this.createElement("div",{className:"e-hscroll-bar"});e.setAttribute("tabindex","-1");for(var i=this.element,n=0,r=[].slice.call(i.children);n<r.length;n++){var o=r[n];t.appendChild(o)}e.appendChild(t),i.appendChild(e),e.style.overflowX="hidden",this.scrollEle=e,this.scrollItems=t},e.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},e.prototype.getModuleName=function(){return"hScroll"},e.prototype.destroy=function(){var e=this.element;e.style.display="",e.classList.remove("e-hscroll"),e.classList.remove("e-scroll-device");var i=di(".e-"+e.id+"_nav.e-scroll-nav",e),n=di(".e-scroll-overlay",e);[].slice.call(n).forEach(function(t){ai(t)});for(var r=0,o=[].slice.call(this.scrollItems.children);r<o.length;r++){var s=o[r];e.appendChild(s)}this.uniqueId&&this.element.removeAttribute("id"),ai(this.scrollEle),i.length>0&&(ai(i[0]),F(i[1])||ai(i[1])),ee.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,t.prototype.destroy.call(this)},e.prototype.disable=function(t){var e=di(".e-scroll-nav:not(.e-overlay)",this.element);t?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(e).forEach(function(e){e.setAttribute("tabindex",t?"-1":"0")})},e.prototype.createOverlay=function(t){var e=t.id.concat("_nav"),i=this.createElement("div",{className:"e-scroll-overlay e-scroll-right-overlay"}),n="e-"+t.id.concat("_nav e-scroll-nav e-scroll-right-nav"),r=this.createElement("div",{id:e.concat("_right"),className:n}),o=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"});r.appendChild(o);var s=this.createElement("div",{className:"e-scroll-overlay e-scroll-left-overlay"});this.ieCheck&&r.classList.add("e-ie-align"),t.appendChild(i),t.appendChild(r),t.insertBefore(s,t.firstChild),this.eventBinding([r])},e.prototype.createNavIcon=function(t){var e=t.id.concat("_nav"),i="e-"+t.id.concat("_nav e-scroll-nav e-scroll-right-nav"),n=this.createElement("div",{id:e.concat("_right"),className:i});n.setAttribute("aria-disabled","false");var r=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),o="e-"+t.id.concat("_nav e-scroll-nav e-scroll-left-nav"),s=this.createElement("div",{id:e.concat("_left"),className:o+" e-overlay"});s.setAttribute("aria-disabled","true");var a=this.createElement("div",{className:"e-nav-left-arrow e-nav-arrow e-icons"});s.appendChild(a),n.appendChild(r),t.appendChild(n),t.insertBefore(s,t.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),s.classList.add("e-ie-align")),this.eventBinding([n,s])},e.prototype.onKeyPress=function(t){var e=this;if("Enter"===t.key){this.keyTimer=window.setTimeout(function(){e.keyTimeout=!0,e.eleScrolling(10,t.target,!0)},100)}},e.prototype.onKeyUp=function(t){"Enter"===t.key&&(this.keyTimeout?this.keyTimeout=!1:t.target.click(),clearTimeout(this.keyTimer))},e.prototype.eventBinding=function(t){var e=this;[].slice.call(t).forEach(function(t){new kn(t,{tapHold:e.tabHoldHandler.bind(e),tapHoldThreshold:500}),t.addEventListener("keydown",e.onKeyPress.bind(e)),t.addEventListener("keyup",e.onKeyUp.bind(e)),t.addEventListener("mouseup",e.repeatScroll.bind(e)),t.addEventListener("touchend",e.repeatScroll.bind(e)),t.addEventListener("contextmenu",function(t){t.preventDefault()}),ee.add(t,"click",e.clickEventHandler,e)})},e.prototype.repeatScroll=function(){clearInterval(this.timeout)},e.prototype.tabHoldHandler=function(t){var e=this,i=t.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval(function(){e.eleScrolling(10,i,!0)},50)},e.prototype.contains=function(t,e){return t.classList.contains(e)},e.prototype.eleScrolling=function(t,e,i){var n=this.scrollEle,r=this.element,o=e.classList;o.contains("e-scroll-nav")&&(o=e.querySelector(".e-nav-arrow").classList),this.contains(r,"e-rtl")&&this.browserCheck&&(t=-t);n.scrollLeft;!this.contains(r,"e-rtl")||this.browserCheck||this.ieCheck?o.contains("e-nav-right-arrow")?this.frameScrollRequest(t,"add",i):this.frameScrollRequest(t,"",i):o.contains("e-nav-left-arrow")?this.frameScrollRequest(t,"add",i):this.frameScrollRequest(t,"",i)},e.prototype.clickEventHandler=function(t){this.eleScrolling(this.scrollStep,t.target,!1)},e.prototype.swipeHandler=function(t){var e,i=this.scrollEle;e=t.velocity<=1?t.distanceX/(10*t.velocity):t.distanceX/t.velocity;var n=.5,r=function(){var o=Math.sin(n);o<=0?window.cancelAnimationFrame(o):("Left"===t.swipeDirection?i.scrollLeft+=e*o:"Right"===t.swipeDirection&&(i.scrollLeft-=e*o),n-=.5,window.requestAnimationFrame(r))};r()},e.prototype.scrollUpdating=function(t,e){"add"===e?this.scrollEle.scrollLeft+=t:this.scrollEle.scrollLeft-=t},e.prototype.frameScrollRequest=function(t,e,i){var n=this;if(i)this.scrollUpdating(t,e);else{this.customStep||[].slice.call(di(".e-scroll-overlay",this.element)).forEach(function(e){t-=e.offsetWidth});var r=function(){var i,o;n.contains(n.element,"e-rtl")&&n.browserCheck?(i=-t,o=-10):(i=t,o=10),i<10?window.cancelAnimationFrame(o):(n.scrollUpdating(o,e),t-=o,window.requestAnimationFrame(r))};r()}},e.prototype.touchHandler=function(t){var e,i=this.scrollEle;e=t.distanceX,this.ieCheck&&this.contains(this.element,"e-rtl")&&(e=-e),"Left"===t.scrollDirection?i.scrollLeft=i.scrollLeft+e:"Right"===t.scrollDirection&&(i.scrollLeft=i.scrollLeft-e)},e.prototype.arrowDisabling=function(t,e){if(this.isDevice){var i=(F(t)?e:t).querySelector(".e-nav-arrow");F(t)?mi(i,["e-nav-right-arrow"],["e-nav-left-arrow"]):mi(i,["e-nav-left-arrow"],["e-nav-right-arrow"])}else t.classList.add("e-overlay"),t.setAttribute("aria-disabled","true"),t.removeAttribute("tabindex"),e.classList.remove("e-overlay"),e.setAttribute("aria-disabled","false"),e.setAttribute("tabindex","0");this.repeatScroll()},e.prototype.scrollHandler=function(t){var e=t.target,i=e.offsetWidth,n=this.element,r=this.element.querySelector(".e-scroll-left-nav"),o=this.element.querySelector(".e-scroll-right-nav"),s=this.element.querySelector(".e-scroll-left-overlay"),a=this.element.querySelector(".e-scroll-right-overlay"),l=e.scrollLeft;if(l<=0&&(l=-l),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(s=this.element.querySelector(".e-scroll-right-overlay"),a=this.element.querySelector(".e-scroll-left-overlay")),s.style.width=l<40?l+"px":"40px",e.scrollWidth-Math.ceil(i+l)<40?a.style.width=e.scrollWidth-Math.ceil(i+l)+"px":a.style.width="40px"),0===l)!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(r,o):this.arrowDisabling(o,r);else if(Math.ceil(i+l+.1)>=e.scrollWidth)!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(o,r):this.arrowDisabling(r,o);else{var h=this.element.querySelector(".e-scroll-nav.e-overlay");h&&(h.classList.remove("e-overlay"),h.setAttribute("aria-disabled","false"),h.setAttribute("tabindex","0"))}},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":t.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},Xc([Hi(null)],e.prototype,"scrollStep",void 0),e=Xc([Gi],e)}(un),Zc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kc=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Jc=function(t){function e(e,i){return t.call(this,e,i)||this}return Zc(e,t),e.prototype.preRender=function(){this.browser=te.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=te.isDevice,this.customStep=!0;var t=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===t.id&&(t.id=U("vscroll"),this.uniqueId=!0),t.style.display="block",this.enableRtl&&t.classList.add("e-rtl")},e.prototype.render=function(){this.touchModule=new kn(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),ee.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),ee.add(this.element,"wheel",this.wheelEventHandler,this)},e.prototype.setScrollState=function(){F(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},e.prototype.initialize=function(){var t=$e("div",{className:"e-vscroll-content"}),e=$e("div",{className:"e-vscroll-bar"});e.setAttribute("tabindex","-1");for(var i=this.element,n=0,r=[].slice.call(i.children);n<r.length;n++){var o=r[n];t.appendChild(o)}e.appendChild(t),i.appendChild(e),e.style.overflowY="hidden",this.scrollEle=e,this.scrollItems=t},e.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},e.prototype.getModuleName=function(){return"vScroll"},e.prototype.destroy=function(){var e=this.element;e.style.display="",ei([this.element],["e-vscroll","e-scroll-device"]);var i=di(".e-"+e.id+"_nav.e-scroll-nav",e),n=di(".e-scroll-overlay",e);[].slice.call(n).forEach(function(t){ai(t)});for(var r=0,o=[].slice.call(this.scrollItems.children);r<o.length;r++){var s=o[r];e.appendChild(s)}this.uniqueId&&this.element.removeAttribute("id"),ai(this.scrollEle),i.length>0&&(ai(i[0]),F(i[1])||ai(i[1])),ee.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,t.prototype.destroy.call(this)},e.prototype.disable=function(t){var e=di(".e-scroll-nav:not(.e-overlay)",this.element);t?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(e).forEach(function(e){e.setAttribute("tabindex",t?"-1":"0")})},e.prototype.createOverlayElement=function(t){var e=t.id.concat("_nav"),i=$e("div",{className:"e-scroll-overlay e-scroll-down-overlay"}),n="e-"+t.id.concat("_nav e-scroll-nav e-scroll-down-nav"),r=$e("div",{id:e.concat("down"),className:n}),o=$e("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"});r.appendChild(o);var s=$e("div",{className:"e-scroll-overlay e-scroll-up-overlay"});this.ieCheck&&r.classList.add("e-ie-align"),t.appendChild(i),t.appendChild(r),t.insertBefore(s,t.firstChild),this.eventBinding([r])},e.prototype.createNavIcon=function(t){var e=t.id.concat("_nav"),i="e-"+t.id.concat("_nav e-scroll-nav e-scroll-down-nav"),n=$e("div",{id:e.concat("_down"),className:i});n.setAttribute("aria-disabled","false");var r=$e("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),o="e-"+t.id.concat("_nav e-scroll-nav e-scroll-up-nav"),s=$e("div",{id:e.concat("_up"),className:o+" e-overlay"});s.setAttribute("aria-disabled","true");var a=$e("div",{className:"e-nav-up-arrow e-nav-arrow e-icons"});s.appendChild(a),n.appendChild(r),n.setAttribute("tabindex","0"),t.appendChild(n),t.insertBefore(s,t.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),s.classList.add("e-ie-align")),this.eventBinding([n,s])},e.prototype.onKeyPress=function(t){var e=this;if("Enter"===t.key){this.keyTimer=window.setTimeout(function(){e.keyTimeout=!0,e.eleScrolling(10,t.target,!0)},100)}},e.prototype.onKeyUp=function(t){"Enter"===t.key&&(this.keyTimeout?this.keyTimeout=!1:t.target.click(),clearTimeout(this.keyTimer))},e.prototype.eventBinding=function(t){var e=this;[].slice.call(t).forEach(function(t){new kn(t,{tapHold:e.tabHoldHandler.bind(e),tapHoldThreshold:500}),t.addEventListener("keydown",e.onKeyPress.bind(e)),t.addEventListener("keyup",e.onKeyUp.bind(e)),t.addEventListener("mouseup",e.repeatScroll.bind(e)),t.addEventListener("touchend",e.repeatScroll.bind(e)),t.addEventListener("contextmenu",function(t){t.preventDefault()}),ee.add(t,"click",e.clickEventHandler,e)})},e.prototype.repeatScroll=function(){clearInterval(this.timeout)},e.prototype.tabHoldHandler=function(t){var e=this,i=t.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval(function(){e.eleScrolling(10,i,!0)},50)},e.prototype.contains=function(t,e){return t.classList.contains(e)},e.prototype.eleScrolling=function(t,e,i){this.element;var n=e.classList;n.contains("e-scroll-nav")&&(n=e.querySelector(".e-nav-arrow").classList),n.contains("e-nav-down-arrow")?this.frameScrollRequest(t,"add",i):n.contains("e-nav-up-arrow")&&this.frameScrollRequest(t,"",i)},e.prototype.clickEventHandler=function(t){this.eleScrolling(this.scrollStep,t.target,!1)},e.prototype.wheelEventHandler=function(t){t.preventDefault(),this.frameScrollRequest(this.scrollStep,t.deltaY>0?"add":"",!1)},e.prototype.swipeHandler=function(t){var e,i=this.scrollEle;e=t.velocity<=1?t.distanceY/(10*t.velocity):t.distanceY/t.velocity;var n=.5,r=function(){var o=Math.sin(n);o<=0?window.cancelAnimationFrame(o):("Up"===t.swipeDirection?i.scrollTop+=e*o:"Down"===t.swipeDirection&&(i.scrollTop-=e*o),n-=.02,window.requestAnimationFrame(r))};r()},e.prototype.scrollUpdating=function(t,e){"add"===e?this.scrollEle.scrollTop+=t:this.scrollEle.scrollTop-=t},e.prototype.frameScrollRequest=function(t,e,i){var n=this;if(i)this.scrollUpdating(t,e);else{this.customStep||[].slice.call(di(".e-scroll-overlay",this.element)).forEach(function(e){t-=e.offsetHeight});var r=function(){t<10?window.cancelAnimationFrame(10):(n.scrollUpdating(10,e),t-=10,window.requestAnimationFrame(r))};r()}},e.prototype.touchHandler=function(t){var e,i=this.scrollEle;e=t.distanceY,"Up"===t.scrollDirection?i.scrollTop=i.scrollTop+e:"Down"===t.scrollDirection&&(i.scrollTop=i.scrollTop-e)},e.prototype.arrowDisabling=function(t,e){if(this.isDevice){var i=(F(t)?e:t).querySelector(".e-nav-arrow");F(t)?mi(i,["e-nav-down-arrow"],["e-nav-up-arrow"]):mi(i,["e-nav-up-arrow"],["e-nav-down-arrow"])}else t.classList.add("e-overlay"),t.setAttribute("aria-disabled","true"),t.removeAttribute("tabindex"),e.classList.remove("e-overlay"),e.setAttribute("aria-disabled","false"),e.setAttribute("tabindex","0");this.repeatScroll()},e.prototype.scrollEventHandler=function(t){var e=t.target,i=e.offsetHeight,n=(this.element,this.element.querySelector(".e-scroll-up-nav")),r=this.element.querySelector(".e-scroll-down-nav"),o=this.element.querySelector(".e-scroll-up-overlay"),s=this.element.querySelector(".e-scroll-down-overlay"),a=e.scrollTop;if(a<=0&&(a=-a),this.isDevice&&(o.style.height=a<40?a+"px":"40px",e.scrollHeight-Math.ceil(i+a)<40?s.style.height=e.scrollHeight-Math.ceil(i+a)+"px":s.style.height="40px"),0===a)this.arrowDisabling(n,r);else if(Math.ceil(i+a+.1)>=e.scrollHeight)this.arrowDisabling(r,n);else{var l=this.element.querySelector(".e-scroll-nav.e-overlay");l&&(l.classList.remove("e-overlay"),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":t.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},Kc([Hi(null)],e.prototype,"scrollStep",void 0),e=Kc([Gi],e)}(un),Qc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$c=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},td="e-menu-header",ed=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qc(e,t),$c([Hi("id")],e.prototype,"itemId",void 0),$c([Hi("parentId")],e.prototype,"parentId",void 0),$c([Hi("text")],e.prototype,"text",void 0),$c([Hi("iconCss")],e.prototype,"iconCss",void 0),$c([Hi("url")],e.prototype,"url",void 0),$c([Hi("separator")],e.prototype,"separator",void 0),$c([Hi("items")],e.prototype,"children",void 0),e}(ln),id=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qc(e,t),$c([Hi(null)],e.prototype,"iconCss",void 0),$c([Hi("")],e.prototype,"id",void 0),$c([Hi(!1)],e.prototype,"separator",void 0),$c([Fi([],e)],e.prototype,"items",void 0),$c([Hi("")],e.prototype,"text",void 0),$c([Hi("")],e.prototype,"url",void 0),e}(ln),nd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qc(e,t),$c([Hi("SlideDown")],e.prototype,"effect",void 0),$c([Hi(400)],e.prototype,"duration",void 0),$c([Hi("ease")],e.prototype,"easing",void 0),e}(ln),rd=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.navIdx=[],n.animation=new Ji({}),n.isTapHold=!1,n.tempItem=[],n}return Qc(e,t),e.prototype.preRender=function(){if(!this.isMenu){var t=void 0;if("EJS-CONTEXTMENU"===this.element.tagName){t=this.createElement("ul",{id:U(this.getModuleName()),className:"e-control e-lib e-"+this.getModuleName()});var e=R("ej2_instances",this.element);ei([this.element],["e-control","e-lib","e-"+this.getModuleName()]),this.clonedElement=this.element,this.element=t,z("ej2_instances",e,this.element)}else{t=this.createElement("ul",{id:U(this.getModuleName())}),oi([].slice.call(this.element.cloneNode(!0).children),t);var i=this.element.nextElementSibling;i?this.element.parentElement.insertBefore(t,i):this.element.parentElement.appendChild(t),this.clonedElement=t}this.clonedElement.style.display="none"}if("EJS-MENU"===this.element.tagName){for(var n=this.element,r=R("ej2_instances",n),o=(t=this.createElement("ul"),this.createElement("EJS-MENU",{className:"e-"+this.getModuleName()+"-wrapper"})),s=0,a=n.attributes.length;s<a;s++)t.setAttribute(n.attributes[s].nodeName,n.attributes[s].nodeValue);n.parentNode.insertBefore(o,n),ai(n),n=t,o.appendChild(n),z("ej2_instances",r,n),this.clonedElement=o,this.element=n,this.element.id||(this.element.id=U(this.getModuleName()))}},e.prototype.render=function(){if(this.initialize(),this.renderItems(),this.isMenu&&this.template&&$()){var t=this.element.id+"Template";Be(t),Object.keys(Le).length&&V(this.tempItem,Le[t],[],!0),Ae(t,"Template",this)}this.wireEvents(),this.renderComplete()},e.prototype.initialize=function(){var t=this.getWrapper();t||(t=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.isMenu?this.element.parentElement.insertBefore(t,this.element):document.body.appendChild(t)),this.cssClass&&ti([t],this.cssClass.split(" ")),this.enableRtl&&t.classList.add("e-rtl"),t.appendChild(this.element),this.isMenu&&this.hamburgerMode&&(this.target||this.createHeaderContainer(t))},e.prototype.renderItems=function(){if(!this.items.length){var t=Gh.createJsonFromElement(this.element,{fields:{child:"items"}});this.setProperties({items:t},!0),$()?this.element=this.removeChildElement(this.element):this.element.innerHTML=""}var e=this.createItems(this.items);if(oi(Array.prototype.slice.call(e.children),this.element),this.element.classList.add("e-menu-parent"),this.isMenu){var i=this.getWrapper();this.element.classList.contains("e-vertical")?this.addScrolling(i,this.element,"vscroll",i.offsetHeight,this.element.offsetHeight):this.addScrolling(i,this.element,"hscroll",i.offsetWidth,this.element.offsetWidth)}},e.prototype.wireEvents=function(){var t=this.getWrapper();if(this.target){for(var e=void 0,i=di(this.target),n=0,r=i.length;n<r;n++)e=i[n],this.isMenu?ee.add(e,"click",this.menuHeaderClickHandler,this):te.isIos?new kn(e,{tapHold:this.touchHandler.bind(this)}):ee.add(e,"contextmenu",this.cmenuHandler,this);if(this.targetElement=e,!this.isMenu){ee.add(this.targetElement,"scroll",this.scrollHandler,this);for(var o=0,s=co(this.targetElement);o<s.length;o++){var a=s[o];ee.add(a,"scroll",this.scrollHandler,this)}}}te.isDevice||(this.delegateMoverHandler=this.moverHandler.bind(this),this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),ee.add(this.isMenu?document:t,"mouseover",this.delegateMoverHandler,this),ee.add(document,"mousedown",this.delegateMouseDownHandler,this)),this.delegateClickHandler=this.clickHandler.bind(this),ee.add(document,"click",this.delegateClickHandler,this),this.wireKeyboardEvent(t),this.rippleFn=Qi(t,{selector:".e-menu-item"})},e.prototype.wireKeyboardEvent=function(t){var e={downarrow:"downarrow",uparrow:"uparrow",enter:"enter",leftarrow:"leftarrow",rightarrow:"rightarrow",escape:"escape"};this.isMenu&&(e.home="home",e.end="end"),new En(t,{keyAction:this.keyBoardHandler.bind(this),keyConfigs:e})},e.prototype.mouseDownHandler=function(t){pi(t.target,".e-"+this.getModuleName()+"-wrapper")===this.getWrapper()||pi(t.target,".e-"+this.getModuleName()+"-popup")||this.closeMenu(this.isMenu?null:this.navIdx.length,t)},e.prototype.keyBoardHandler=function(t){var e="",i=t.target,n=this.isMenu&&!this.hamburgerMode&&!this.element.classList.contains("e-vertical")&&this.navIdx.length<1;if(t.preventDefault(),this.enableScrolling&&13===t.keyCode&&i.classList.contains("e-scroll-nav")&&this.removeLIStateByClass(["e-focused","e-selected"],[pi(i,".e-"+this.getModuleName()+"-wrapper")]),n)switch(t.action){case"rightarrow":e="rightarrow",t.action="downarrow";break;case"leftarrow":e="leftarrow",t.action="uparrow";break;case"downarrow":e="downarrow",t.action="rightarrow";break;case"uparrow":e="uparrow",t.action=""}else if(this.enableRtl)switch(t.action){case"leftarrow":n=!0,e="leftarrow",t.action="rightarrow";break;case"rightarrow":n=!0,e="rightarrow",t.action="leftarrow"}switch(t.action){case"downarrow":case"uparrow":case"end":case"home":this.upDownKeyHandler(t);break;case"rightarrow":this.rightEnterKeyHandler(t);break;case"leftarrow":this.leftEscKeyHandler(t);break;case"enter":this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(t):this.rightEnterKeyHandler(t);break;case"escape":this.leftEscKeyHandler(t)}n&&(t.action=e)},e.prototype.upDownKeyHandler=function(t){var e=this.getUlByNavIdx(),i="downarrow"===t.action||"home"===t.action?0:e.childElementCount-1,n=i,r=this.getLIByClass(e,"e-focused");r&&("end"!==t.action&&"home"!==t.action&&(n=this.getIdx(e,r)),r.classList.remove("e-focused"),"end"!==t.action&&"home"!==t.action&&("downarrow"===t.action?n++:n--,n===("downarrow"===t.action?e.childElementCount:-1)&&(n=i)));var o=e.children[n];n=this.isValidLI(o,n,t.action),e.children[n].classList.add("e-focused"),e.children[n].focus()},e.prototype.isValidLI=function(t,e,i){this.getWrapper();var n=this.getUlByNavIdx();return(t.classList.contains("e-separator")||t.classList.contains("e-disabled")||t.classList.contains("e-menu-hide"))&&("downarrow"===i||"rightarrow"===i?e++:e--),((t=n.children[e]).classList.contains("e-separator")||t.classList.contains("e-disabled")||t.classList.contains("e-menu-hide"))&&(e=this.isValidLI(t,e,i)),e},e.prototype.getUlByNavIdx=function(t){if(void 0===t&&(t=this.navIdx.length),this.isMenu){var e=[this.getWrapper()].concat([].slice.call(di(".e-menu-popup")))[t];return F(e)?null:ci(".e-menu-parent",e)}return this.getWrapper().children[t]},e.prototype.rightEnterKeyHandler=function(t){var e,i=this.getUlByNavIdx(),n=this.getLIByClass(i,"e-focused");if(n){var r=this.getIdx(i,n),o=this.navIdx.concat(r),s=this.getItem(o);s.items.length?(this.navIdx.push(r),this.keyType="right",this.action=t.action,this.openMenu(n,s,-1,-1,t)):"enter"===t.action&&(this.isMenu&&0===this.navIdx.length?this.removeLIStateByClass(["e-selected"],[this.getWrapper()]):n.classList.remove("e-focused"),n.classList.add("e-selected"),e={element:n,item:s,event:t},this.trigger("select",e),this.closeMenu(null,t))}},e.prototype.leftEscKeyHandler=function(t){this.navIdx.length?(this.keyType="left",this.closeMenu(this.navIdx.length,t)):"escape"===t.action&&this.closeMenu(null,t)},e.prototype.scrollHandler=function(t){this.closeMenu(null,t)},e.prototype.touchHandler=function(t){this.isTapHold=!0,this.cmenuHandler(t.originalEvent)},e.prototype.cmenuHandler=function(t){t.preventDefault(),this.isCMenu=!0,this.pageX=t.changedTouches?t.changedTouches[0].pageX+1:t.pageX+1,this.pageY=t.changedTouches?t.changedTouches[0].pageY+1:t.pageY+1,this.closeMenu(null,t),this.isCMenu&&(this.canOpen(t.target)&&this.openMenu(null,null,this.pageY,this.pageX,t),this.isCMenu=!1)},e.prototype.closeMenu=function(t,e){var i=this;if(void 0===t&&(t=0),void 0===e&&(e=null),this.isMenuVisible()){var n,r,o,s=void 0,a=void 0,l=this.getWrapper(),h=this.getPopups(),c=!1,d=this.isMenu?h.length+1:l.childElementCount;if(n=this.isMenu&&1!==d?ci(".e-ul",h[d-2]):di(".e-menu-parent",l)[d-1],this.isMenu&&n.classList.contains("e-menu")&&((s=this.getLIByClass(n,"e-selected"))&&s.classList.remove("e-selected"),c=!0),!c){var p=e&&e.target&&this.getLI(e.target);r=this.navIdx.length?this.getItem(this.navIdx):null,o=r?r.items:this.items,a={element:n,parentItem:this.isMenu&&$()?this.getMenuItemModel(r,t):r,items:o,event:e,cancel:!1},this.trigger("beforeClose",a,function(s){var a,l,h,c,d,u,f="",g=!s.cancel;(g||i.isCMenu)&&(i.isMenu?(a=pi(n,".e-menu-popup"),i.hamburgerMode&&(a.parentElement.style.minHeight="",pi(n,".e-menu-item").setAttribute("aria-expanded","false")),i.unWireKeyboardEvent(a),i.destroyScrollObj(et(a.children[0],Jc),a.children[0]),(h=et(a,ho)).hide(),f=a.id,h.destroy(),ai(a)):i.toggleAnimation(n,!1),l={element:n,parentItem:r,items:o},i.trigger("onClose",l),i.navIdx.pop());var m=i.getWrapper()&&i.getUlByNavIdx();i.isCMenu&&(i.canOpen(e.target)&&i.openMenu(null,null,i.pageY,i.pageX,e),i.isCMenu=!1),i.isMenu&&m&&f.length&&(c=new RegExp("(.*)-ej2menu-"+i.element.id+"-popup").exec(f)[1],d=m.querySelector('[id="'+c+'"]'),u=p&&m.querySelector('[id="'+p.id+'"]'));var y=p&&p.querySelectorAll(".e-menu-item");if(g&&i.hamburgerMode&&t&&!y.length)i.afterCloseMenu(e);else if(g&&!i.hamburgerMode&&i.navIdx.length&&d&&!u)i.closeMenu(i.navIdx[i.navIdx.length-1],e);else if(g&&!t&&(i.hamburgerMode&&i.navIdx.length||1===i.navIdx.length))i.closeMenu(null,e);else if(g&&F(t)&&i.navIdx.length)i.closeMenu(null,e);else if(!g||i.isMenu||t||0!==i.navIdx.length||i.isMenusClosed)if(g&&i.isMenu&&e&&e.target&&0!==i.navIdx.length&&pi(e.target,".e-menu-parent.e-control"))i.closeMenu(0,e);else if(!g||"right"!==i.keyType&&"click"!==i.keyType){var v=i.getUlByNavIdx(),b=i.getLIByClass(v,"e-selected");if(b&&(b.setAttribute("aria-expanded","false"),b.classList.remove("e-selected"),p&&(b.classList.add("e-focused"),b.focus())),!g&&i.hamburgerMode&&p&&"false"===p.getAttribute("aria-expanded")&&"true"===p.getAttribute("aria-haspopup")){pi(p,".e-menu-parent.e-control")?i.navIdx=[]:i.navIdx.pop(),i.navIdx.push(i.cliIdx);var w=i.getItem(i.navIdx);p.setAttribute("aria-expanded","true"),i.openMenu(p,w,-1,-1,e)}}else i.afterCloseMenu(e);else i.isMenusClosed=!0,i.closeMenu(0,e);i.removeStateWrapper()})}}},e.prototype.getMenuItemModel=function(t,e){F(e)&&(e=0);var i=this.getFields(e);return{text:t[i.text],id:t[i.id],items:t[i.child],separator:t[i.separator],iconCss:t[i.iconCss],url:t[i.url]}},e.prototype.destroyScrollObj=function(t,e){t&&(t.destroy(),e.parentElement.appendChild(ci(".e-menu-parent",e)),ai(e))},e.prototype.getPopups=function(){var t=this,e=[];return[].slice.call(document.querySelectorAll(".e-menu-popup")).forEach(function(i){t.getIndex(i.querySelector(".e-menu-item").id,!0).length&&e.push(i)}),e},e.prototype.isMenuVisible=function(){return this.navIdx.length>0||this.element.classList.contains("e-contextmenu")&&ni(this.element).valueOf()},e.prototype.canOpen=function(t){var e=!0;if(this.filter){e=!1;for(var i=this.filter.split(" "),n=0,r=i.length;n<r;n++)if(pi(t,"."+i[n])){e=!0;break}}return e},e.prototype.openMenu=function(t,e,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=this.targetElement);var s=this.getWrapper();this.lItem=t;var a=""!==this.element.id?this.element.id:"menu";if(this.isMenusClosed=!1,F(i)&&(i=-1),F(n)&&(n=-1),t){if(this.uList=this.createItems(e[this.getField("children",this.navIdx.length-1)]),!this.isMenu&&te.isDevice){s.lastChild.style.display="none";var l={text:e[this.getField("text")].toString(),iconCss:"e-icons e-previous"},h=new id(this.items[0],"items",l,!0),c=this.createItems([h]).children[0];c.classList.add(td),this.uList.insertBefore(c,this.uList.children[0])}this.isMenu?(this.popupWrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper e-menu-popup",id:t.id+"-ej2menu-"+a+"-popup"}),this.hamburgerMode?(i=t.offsetHeight,t.appendChild(this.popupWrapper)):document.body.appendChild(this.popupWrapper),this.isNestedOrVertical=this.element.classList.contains("e-vertical")||1!==this.navIdx.length,this.popupObj=this.generatePopup(this.popupWrapper,this.uList,t,this.isNestedOrVertical),this.hamburgerMode?this.calculateIndentSize(this.uList,t):(this.cssClass&&ti([this.popupWrapper],this.cssClass.split(" ")),this.popupObj.hide()),this.triggerBeforeOpen(t,this.uList,e,r,0,0,"menu")):(this.uList.style.zIndex=this.element.style.zIndex,s.appendChild(this.uList),this.triggerBeforeOpen(t,this.uList,e,r,i,n,"none"))}else this.uList=this.element,this.uList.style.zIndex=po(o||this.element).toString(),this.triggerBeforeOpen(t,this.uList,e,r,i,n,"none");if(this.isMenu&&this.template&&$()){var d=this.element.id+"Template";if(Object.keys(Le).length){var p=Le[d];this.tempItem=this.tempItem.concat(p),Le[d]=this.tempItem}Ae(d,"Template",this)}},e.prototype.calculateIndentSize=function(t,e){var i=getComputedStyle(e),n=parseInt(i.textIndent,10);this.navIdx.length<2&&!e.classList.contains("e-blankicon")?n*=2:n+=n/4,t.style.textIndent=n+"px";var r=t.querySelectorAll(".e-blankicon");if(r&&r.length)for(var o=t.querySelector(".e-menu-icon"),s=getComputedStyle(o),a=parseInt(s.marginRight,10)+o.offsetWidth+n,l=0;l<r.length;l++)r[l].style.textIndent=a+"px"},e.prototype.generatePopup=function(t,e,i,n){var r=this,o=new ho(t,{actionOnScroll:this.hamburgerMode?"none":"reposition",relateTo:i,collision:this.hamburgerMode?{X:"none",Y:"none"}:{X:n||this.enableRtl?"none":"flip",Y:"fit"},position:n&&!this.hamburgerMode?{X:"right",Y:"top"}:{X:"left",Y:"bottom"},targetType:"relative",enableRtl:this.enableRtl,content:e,open:function(){var t=ci(".e-menu-vscroll",o.element);t&&(t.style.height="inherit",t.style.maxHeight="");var e=ci(".e-ul",o.element);o.element.style.maxHeight="",e.focus(),r.triggerOpen(e)}});return o},e.prototype.createHeaderContainer=function(t){t=t||this.getWrapper();var e=this.createElement("span",{className:"e-"+this.getModuleName()+"-header"}),i=this.enableHtmlSanitizer?zn.sanitize(this.title):this.title,n=this.createElement("span",{className:"e-"+this.getModuleName()+"-title",innerHTML:i}),r=this.createElement("span",{className:"e-icons e-"+this.getModuleName()+"-icon",attrs:{tabindex:"0"}});e.appendChild(n),e.appendChild(r),t.insertBefore(e,this.element)},e.prototype.openHamburgerMenu=function(t){if(this.hamburgerMode){this.triggerBeforeOpen(null,this.element,null,t,0,0,"hamburger")}},e.prototype.closeHamburgerMenu=function(t){var e=this;if(this.hamburgerMode){var i;i={element:this.element,parentItem:null,event:t,items:this.items,cancel:!1},this.trigger("beforeClose",i,function(i){i.cancel||(e.closeMenu(null,t),e.element.classList.add("e-hide-menu"),e.trigger("onClose",{element:e.element,parentItem:null,items:e.items}))})}},e.prototype.callFit=function(t,e,i,n,r){return Nr(t,null,{X:e,Y:i},{top:n,left:r})},e.prototype.triggerBeforeOpen=function(t,e,i,n,r,o,s){var a,l=this,h=(this.getIndex(t?t.id:null,!0),t?i[this.getField("children",this.navIdx.length-1)]:this.items),c={element:e,items:h,parentItem:this.isMenu&&$()?this.getMenuItemModel(i,this.navIdx.length-1):i,event:n,cancel:!1,top:r,left:o},d=s;this.trigger("beforeOpen",c,function(r){switch(d){case"menu":if(l.hamburgerMode||(l.top=r.top,l.left=r.left),l.popupWrapper.style.display="block",l.hamburgerMode||(l.popupWrapper.style.maxHeight=l.popupWrapper.getBoundingClientRect().height+"px",l.addScrolling(l.popupWrapper,l.uList,"vscroll",l.popupWrapper.offsetHeight,l.uList.offsetHeight),l.checkScrollOffset(n)),l.hamburgerMode||l.left||l.top)l.popupObj.collision={X:"none",Y:"none"};else{if(l.popupObj.refreshPosition(l.lItem,!0),l.left=parseInt(l.popupWrapper.style.left,10),l.top=parseInt(l.popupWrapper.style.top,10),l.enableRtl&&(l.left=l.isNestedOrVertical?l.left-l.popupWrapper.offsetWidth-l.lItem.parentElement.offsetWidth+2:l.left-l.popupWrapper.offsetWidth+l.lItem.offsetWidth),a=Hr(l.popupWrapper,null,l.left,l.top),(l.isNestedOrVertical||l.enableRtl)&&(a.indexOf("right")>-1||a.indexOf("left")>-1)){l.popupObj.collision.X="none";var o=pi(l.lItem,".e-"+l.getModuleName()+"-wrapper").offsetWidth;l.left=l.enableRtl?Lr(l.lItem,l.isNestedOrVertical?"right":"left","top").left:l.left-l.popupWrapper.offsetWidth-o+2}((a=Hr(l.popupWrapper,null,l.left,l.top)).indexOf("left")>-1||a.indexOf("right")>-1)&&(l.left=l.callFit(l.popupWrapper,!0,!1,l.top,l.left).left),l.popupWrapper.style.left=l.left+"px"}l.popupWrapper.style.display="";break;case"none":l.top=r.top,l.left=r.left;break;case"hamburger":r.cancel||(l.element.classList.remove("e-hide-menu"),l.triggerOpen(l.element))}if("hamburger"!==d)if(r.cancel)l.isMenu?(l.popupObj.destroy(),ai(l.popupWrapper)):e.className.indexOf("e-ul")>-1&&ai(e),l.navIdx.pop();else if(l.isMenu)if(l.hamburgerMode)l.popupWrapper.style.top=l.top+"px",l.popupWrapper.style.left="0px",l.toggleAnimation(l.popupWrapper);else{l.wireKeyboardEvent(l.popupWrapper),Qi(l.popupWrapper,{selector:".e-menu-item"}),l.popupWrapper.style.left=l.left+"px",l.popupWrapper.style.top=l.top+"px";var s="None"!==l.animationSettings.effect?{name:l.animationSettings.effect,duration:l.animationSettings.duration,timingFunction:l.animationSettings.easing}:null;l.popupObj.show(s,l.lItem)}else l.setPosition(l.lItem,l.uList,l.top,l.left),l.toggleAnimation(l.uList);if("right"===l.keyType){var h=l.getUlByNavIdx();t.classList.remove("e-focused");var c;if(l.isMenu&&1===l.navIdx.length&&l.removeLIStateByClass(["e-selected"],[l.getWrapper()]),t.classList.add("e-selected"),"enter"===l.action){var p={element:t,item:i,event:n};l.trigger("select",p)}t.focus(),h=l.getUlByNavIdx(),c=l.isValidLI(h.children[0],0,l.action),h.children[c].classList.add("e-focused"),h.children[c].focus()}})},e.prototype.checkScrollOffset=function(t){var e=this.getWrapper();if(e.children[0].classList.contains("e-menu-hscroll")&&1===this.navIdx.length){var i,n,r=F(t)?this.element:pi(t.target,".e-menu-item"),o=ci(".e-hscroll-bar",e);o.scrollLeft>r.offsetLeft&&(o.scrollLeft-=o.scrollLeft-r.offsetLeft),(i=o.scrollLeft+o.offsetWidth)<(n=r.offsetLeft+r.offsetWidth)&&(o.scrollLeft+=n-i)}},e.prototype.addScrolling=function(t,e,i,n,r){if(this.enableScrolling&&n<r){var o=this.createElement("div",{className:"e-menu-"+i});t.appendChild(o),o.appendChild(e),o.style.maxHeight=t.style.maxHeight;t.style.overflow="hidden","vscroll"===i?new Jc({enableRtl:this.enableRtl},o).scrollStep=ci(".e-"+i+"-bar",t).offsetHeight/2:new Yc({enableRtl:this.enableRtl},o).scrollStep=ci(".e-"+i+"-bar",t).offsetWidth}},e.prototype.setPosition=function(t,e,i,n){if(this.toggleVisiblity(e),e===this.element||n>-1&&i>-1){if((o=Hr(e,null,n,i)).indexOf("right")>-1&&(n-=e.offsetWidth),o.indexOf("bottom")>-1)i=(r=this.callFit(e,!1,!0,i,n)).top-20;if((o=Hr(e,null,n,i)).indexOf("left")>-1)n=(r=this.callFit(e,!0,!1,i,n)).left}else if(te.isDevice)i=Number(this.element.style.top.replace("px","")),n=Number(this.element.style.left.replace("px",""));else{var r;i=(r=Lr(t,this.enableRtl?"left":"right","top")).top,n=r.left;var o,s=(o=Hr(e,null,this.enableRtl?n-e.offsetWidth:n,i)).indexOf("left")>-1||o.indexOf("right")>-1;s&&(n=(r=Lr(t,this.enableRtl?"right":"left","top")).left),(this.enableRtl||s)&&(n=this.enableRtl&&s?n:n-e.offsetWidth),o.indexOf("bottom")>-1&&(i=(r=this.callFit(e,!1,!0,i,n)).top)}this.toggleVisiblity(e,!1),e.style.top=i+"px",e.style.left=n+"px"},e.prototype.toggleVisiblity=function(t,e){void 0===e&&(e=!0),t.style.visibility=e?"hidden":"",t.style.display=e?"block":"none"},e.prototype.createItems=function(t){var e=this,i=this.navIdx?this.navIdx.length:0,n=this.getFields(i);if($()&&this.template&&t.length&&t[0].properties){var r=[];t.forEach(function(t,e){r.push({}),r[e][n.text]=t[n.text],t[n.id]||(t[n.id]=U("menuitem")),r[e][n.id]=t[n.id],r[e][n.iconCss]=t[n.iconCss],r[e][n.url]=t[n.url],r[e][n.child]=t[n.child],r[e][n.separator]=t[n.separator]}),t=r}var o=this.hasField(t,this.getField("iconCss",i)),s={showIcon:o,moduleName:"menu",fields:n,template:this.template,itemNavigable:!0,itemCreating:function(t){t.curData[t.fields[n.id]]||(t.curData[t.fields[n.id]]=U("menuitem")),t.curData.htmlAttributes={role:"menuitem",tabindex:"-1"},e.isMenu&&!t.curData[e.getField("separator",i)]&&(t.curData.htmlAttributes["aria-label"]=t.curData[t.fields.text]),""===t.curData[t.fields[n.iconCss]]&&(t.curData[t.fields[n.iconCss]]=null)},itemCreated:function(t){if(t.curData[e.getField("separator",i)]&&(t.item.classList.add("e-separator"),t.item.removeAttribute("role")),!o||t.curData[t.fields.iconCss]||t.curData[e.getField("separator",i)]||t.item.classList.add("e-blankicon"),t.curData[t.fields.child]&&t.curData[t.fields.child].length){var n=e.createElement("span",{className:"e-icons e-caret"});t.item.appendChild(n),t.item.setAttribute("aria-haspopup","true"),t.item.setAttribute("aria-expanded","false"),e.isMenu||t.item.removeAttribute("role"),t.item.classList.add("e-menu-caret-icon")}e.isMenu&&e.template&&(t.item.setAttribute("id",t.curData[t.fields.id].toString()),t.item.removeAttribute("data-uid"),t.item.classList.contains("e-level-1")&&t.item.classList.remove("e-level-1"),t.item.classList.contains("e-has-child")&&t.item.classList.remove("e-has-child"));var r={item:t.curData,element:t.item};e.trigger("beforeItemRender",r)}};this.setProperties({items:this.items},!0),this.isMenu&&(s.templateID=this.element.id+"Template");var a=Gh.createList(this.createElement,t,s,!this.template);return a.setAttribute("tabindex","0"),this.isMenu&&a.setAttribute("role","menu"),a},e.prototype.moverHandler=function(t){var e=t.target;this.liTrgt=e;var i=this.getLI(e),n=i?pi(i,".e-"+this.getModuleName()+"-wrapper"):this.getWrapper(),r=this.getWrapper(),o=new RegExp("-ej2menu-(.*)-popup"),s=!1;if(n){if((""!==n.id?o.exec(n.id)[1]:n.querySelector("ul").id)!==this.element.id){if(this.removeLIStateByClass(["e-focused","e-selected"],[this.getWrapper()]),!this.navIdx.length)return;s=!0}i&&pi(i,".e-"+this.getModuleName()+"-wrapper")&&!s?(this.removeLIStateByClass(["e-focused"],this.isMenu?[n].concat(this.getPopups()):[n]),this.removeLIStateByClass(["e-focused"],this.isMenu?[r].concat(this.getPopups()):[r]),i.classList.add("e-focused"),this.showItemOnClick||this.clickHandler(t)):this.isMenu&&this.showItemOnClick&&!s&&this.removeLIStateByClass(["e-focused"],[n].concat(this.getPopups())),this.isMenu&&(this.showItemOnClick||e.parentElement===n||pi(e,".e-"+this.getModuleName()+"-popup")||i&&(!i||this.getIndex(i.id,!0).length)?s&&!this.showItemOnClick&&this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,t)):(this.removeLIStateByClass(["e-focused"],[n]),this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,t))),this.isClosed||this.removeStateWrapper(),this.isClosed=!1)}},e.prototype.removeStateWrapper=function(){if(this.liTrgt){var t=pi(this.liTrgt,".e-menu-vscroll");"DIV"===this.liTrgt.tagName&&t&&this.removeLIStateByClass(["e-focused","e-selected"],[t])}},e.prototype.removeLIStateByClass=function(t,e){for(var i,n=function(n){t.forEach(function(t){(i=ci("."+t,e[n]))&&i.classList.remove(t)})},r=0;r<e.length;r++)n(r)},e.prototype.getField=function(t,e){void 0===e&&(e=0);var i=this.fields[t];return"string"==typeof i?i:i[e]?i[e].toString():i[i.length-1].toString()},e.prototype.getFields=function(t){return void 0===t&&(t=0),{id:this.getField("itemId",t),iconCss:this.getField("iconCss",t),text:this.getField("text",t),url:this.getField("url",t),child:this.getField("children",t),separator:this.getField("separator",t)}},e.prototype.hasField=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i][e])return!0;return!1},e.prototype.menuHeaderClickHandler=function(t){pi(t.target,".e-menu-wrapper").querySelector("ul.e-menu-parent").id===this.element.id&&(this.element.classList.contains("e-hide-menu")?this.openHamburgerMenu(t):this.closeHamburgerMenu(t))},e.prototype.clickHandler=function(t){if(this.isTapHold)this.isTapHold=!1;else{var e=this.getWrapper(),i=t.target,n=this.cli=this.getLI(i),r=new RegExp("-ej2menu-(.*)-popup"),o=n?pi(n,".e-"+this.getModuleName()+"-wrapper"):null,s=n&&o&&(this.isMenu?this.getIndex(n.id,!0).length>0:e.firstElementChild.id===o.firstElementChild.id);if(te.isDevice&&this.isMenu&&(this.removeLIStateByClass(["e-focused"],[e].concat(this.getPopups())),this.mouseDownHandler(t)),n&&o&&this.isMenu){var a=o.id?r.exec(o.id)[1]:o.querySelector(".e-menu-parent").id;if(this.element.id!==a)return}if(s&&"click"===t.type&&!n.classList.contains(td)){this.setLISelected(n);var l=this.getIndex(n.id,!0),h={element:n,item:this.getItem(l),event:t};this.trigger("select",h)}if(s&&("mouseover"===t.type||te.isDevice||this.showItemOnClick)){var c=void 0;if(n.classList.contains(td))c=e.children[this.navIdx.length-1],this.toggleAnimation(c),(p=this.getLIByClass(c,"e-selected"))&&p.classList.remove("e-selected"),ai(n.parentNode),this.navIdx.pop();else if(!n.classList.contains("e-separator")){this.showSubMenu=!0;var d=n.parentNode;if(this.cliIdx=this.getIdx(d,n),this.isMenu||!te.isDevice){var p,u=this.isMenu?Array.prototype.indexOf.call([e].concat(this.getPopups()),pi(d,".e-"+this.getModuleName()+"-wrapper")):this.getIdx(e,d);if(this.navIdx[u]===this.cliIdx&&(this.showSubMenu=!1),u!==this.navIdx.length&&("mouseover"!==t.type||this.showSubMenu))(p=this.getLIByClass(d,"e-selected"))&&p.classList.remove("e-selected"),this.isClosed=!0,this.keyType="click",this.closeMenu(u+1,t),this.showItemOnClick&&this.setLISelected(n)}this.isClosed||this.afterCloseMenu(t),this.isClosed=!1}}else if(this.isMenu&&"DIV"===i.tagName&&this.navIdx.length&&pi(i,".e-menu-vscroll")){var f=pi(i,".e-menu-popup"),g=Array.prototype.indexOf.call(this.getPopups(),f)+1;g<this.navIdx.length&&(this.closeMenu(g+1,t),this.removeLIStateByClass(["e-focused","e-selected"],[f]))}else this.isMenu&&this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(t):"UL"===i.tagName&&(this.isMenu?!i.parentElement.classList.contains("e-menu-wrapper")||this.getIndex(i.querySelector(".e-menu-item").id,!0).length:i.parentElement===e)||(n||this.removeLIStateByClass(["e-selected"],[e]),n&&n.querySelector(".e-caret")||this.closeMenu(null,t))}},e.prototype.afterCloseMenu=function(t){if(this.showSubMenu){var e=this.navIdx.concat(this.cliIdx),i=this.getItem(e);i&&i[this.getField("children",e.length-1)]&&i[this.getField("children",e.length-1)].length?(("mouseover"===t.type||te.isDevice&&this.isMenu)&&this.setLISelected(this.cli),(!this.hamburgerMode||this.hamburgerMode&&"false"===this.cli.getAttribute("aria-expanded"))&&(this.cli.setAttribute("aria-expanded","true"),this.navIdx.push(this.cliIdx),this.openMenu(this.cli,i,null,null,t))):"mouseover"!==t.type&&this.closeMenu(null,t)}this.keyType=""},e.prototype.setLISelected=function(t){var e=this.getLIByClass(t.parentElement,"e-selected");e&&e.classList.remove("e-selected"),this.isMenu||t.classList.remove("e-focused"),t.classList.add("e-selected")},e.prototype.getLIByClass=function(t,e){for(var i=0,n=t.children.length;i<n;i++)if(t.children[i].classList.contains(e))return t.children[i];return null},e.prototype.getItemIndex=function(t,e){var i;i="string"==typeof t?t:t.id;var n=!1!==e;return this.getIndex(i,n)},e.prototype.setItem=function(t,e,i){var n=e||t.id,r=!1!==i,o=this.getIndex(n,r),s=this.getItem(o);s.iconCss=t.iconCss,s.id=t.id,s.text=t.text,s.url=t.url,s.separator=t.separator,s.items=t.items},e.prototype.getItem=function(t){var e=(t=t.slice()).pop();return this.getItems(t)[e]},e.prototype.getItems=function(t){for(var e=this.items,i=0;i<t.length;i++)e=e[t[i]][this.getField("children",i)];return e},e.prototype.setItems=function(t,e){var i=this.getItems(e);i.splice(0,i.length);for(var n=0;n<t.length;n++)i.splice(n,0,t[n])},e.prototype.getIdx=function(t,e,i){void 0===i&&(i=!0);var n=Array.prototype.indexOf.call(t.querySelectorAll("li"),e);return n=this.isMenu&&this.template&&$()?Array.prototype.indexOf.call(t.querySelectorAll(e.tagName),e):Array.prototype.indexOf.call(t.children,e),i&&t.children[0].classList.contains(td)&&n--,n},e.prototype.getLI=function(t){return"LI"===t.tagName&&t.classList.contains("e-menu-item")?t:pi(t,"li.e-menu-item")},e.prototype.updateItemsByNavIdx=function(){for(var t=this.items,e=0,i=0;i<this.navIdx.length&&(t=t[i].items);i++){e++;var n=this.getUlByNavIdx(e);if(!n)break;this.updateItem(n,t)}},e.prototype.removeChildElement=function(t){for(;t.firstElementChild;)t.removeChild(t.firstElementChild);return t},e.prototype.onPropertyChanged=function(t,e){for(var i=this,n=this.getWrapper(),r=function(r){switch(r){case"cssClass":e.cssClass&&ei([n],e.cssClass.split(" ")),t.cssClass&&ti([n],t.cssClass.split(" "));break;case"enableRtl":n.classList.toggle("e-rtl");break;case"showItemOnClick":o.unWireEvents(),o.showItemOnClick=t.showItemOnClick,o.wireEvents();break;case"enableScrolling":if(t.enableScrolling){var s;o.element.classList.contains("e-vertical")?o.addScrolling(n,o.element,"vscroll",n.offsetHeight,o.element.offsetHeight):o.addScrolling(n,o.element,"hscroll",n.offsetWidth,o.element.offsetWidth),o.getPopups().forEach(function(t){s=ci(".e-ul",t),i.addScrolling(t,s,"vscroll",t.offsetHeight,s.offsetHeight)})}else{var a=n.children[0];o.element.classList.contains("e-vertical")?o.destroyScrollObj(et(a,Jc),a):o.destroyScrollObj(et(a,Yc),a),n.style.overflow="",n.appendChild(o.element),o.getPopups().forEach(function(t){a=t.children[0],i.destroyScrollObj(et(a,Jc),a),t.style.overflow=""})}break;case"items":var l=void 0,h=void 0,c=void 0;if(Object.keys(e.items).length){var d=Object.keys(t.items);for(p=0;p<d.length;p++)(h=o.getChangedItemIndex(t,[],Number(d[p]))).length<=o.getWrapper().children.length&&(l=h.pop(),c=o.getItems(h),o.insertAfter([c[l]],c[l].text),o.removeItem(c,h,l),o.setItems(c,h)),h.length=0}else{o.updateItem(o.element,o.items);for(var p=1,u=n.childElementCount;p<u;p++)ai(n.lastElementChild);o.isMenu&&$()?o.updateItemsByNavIdx():o.navIdx=[]}}},o=this,s=0,a=Object.keys(t);s<a.length;s++){r(a[s])}},e.prototype.updateItem=function(t,e){$()?t=this.removeChildElement(t):t.innerHTML="",[].slice.call(this.createItems(e).children).forEach(function(e){t.appendChild(e)})},e.prototype.getChangedItemIndex=function(t,e,i){e.push(i);var n=Object.keys(t.items[i]).pop();if("items"===n){var r=t.items[i],o=Object.keys(r.items).pop();o&&this.getChangedItemIndex(r,e,Number(o))}else"isParentArray"===n&&e.length>1&&e.pop();return e},e.prototype.removeItem=function(t,e,i){t.splice(i,1);var n=this.getWrapper().children;e.length<n.length&&ai(n[e.length].children[i])},e.prototype.unWireEvents=function(t){void 0===t&&(t=this.target);var e=this.getWrapper();if(t){for(var i=void 0,n=void 0,r=di(t),o=0,s=r.length;o<s;o++)i=r[o],this.isMenu?ee.remove(i,"click",this.menuHeaderClickHandler):te.isIos?(n=et(i,kn))&&n.destroy():ee.remove(i,"contextmenu",this.cmenuHandler);if(!this.isMenu){ee.remove(this.targetElement,"scroll",this.scrollHandler);for(var a=0,l=co(this.targetElement);a<l.length;a++){var h=l[a];ee.remove(h,"scroll",this.scrollHandler)}}}te.isDevice||(ee.remove(this.isMenu?document:e,"mouseover",this.delegateMoverHandler),ee.remove(document,"mousedown",this.delegateMouseDownHandler)),ee.remove(document,"click",this.delegateClickHandler),this.unWireKeyboardEvent(e),this.rippleFn()},e.prototype.unWireKeyboardEvent=function(t){var e=et(t,En);e&&e.destroy()},e.prototype.toggleAnimation=function(t,e){var i,n,r=this;void 0===e&&(e=!0),"None"!==this.animationSettings.effect&&e?this.animation.animate(t,{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing,begin:function(t){r.hamburgerMode?(n=t.element.parentElement,t.element.style.position="absolute",i=n.offsetHeight,t.element.style.maxHeight=t.element.offsetHeight+"px",n.style.maxHeight=""):(t.element.style.display="block",t.element.style.maxHeight=t.element.getBoundingClientRect().height+"px")},progress:function(t){r.hamburgerMode&&(n.style.minHeight=i+t.element.offsetHeight+"px")},end:function(t){r.hamburgerMode?(t.element.style.position="",t.element.style.maxHeight="",n.style.minHeight="",t.element.style.top="0px",t.element.children[0].focus(),r.triggerOpen(t.element.children[0])):r.end(t.element,e)}}):this.end(t,e)},e.prototype.triggerOpen=function(t){var e=this.navIdx.length?this.getItem(this.navIdx):null,i={element:t,parentItem:e,items:e?e.items:this.items};this.trigger("onOpen",i)},e.prototype.end=function(t,e){if(e)if(t.style.display="block",t.style.maxHeight="",this.triggerOpen(t),t.querySelector(".e-focused"))t.querySelector(".e-focused").focus();else{var i=void 0;(i=this.getWrapper().children[this.getIdx(this.getWrapper(),t)-1])?i.querySelector(".e-selected").focus():this.element.focus()}else if(t===this.element){var n=this.getLIByClass(this.element,"e-focused");n&&n.classList.remove("e-focused");var r=this.getLIByClass(this.element,"e-selected");r&&r.classList.remove("e-selected"),t.style.display="none"}else ai(t)},e.prototype.getPersistData=function(){return""},e.prototype.getWrapper=function(){return pi(this.element,".e-"+this.getModuleName()+"-wrapper")},e.prototype.getIndex=function(t,e,i,n,r,o){var s;void 0===i&&(i=this.items),void 0===n&&(n=[]),void 0===r&&(r=!1),void 0===o&&(o=0),o=r?o+1:0;for(var a=0,l=i.length;a<l;a++){if(s=i[a],(e?s[this.getField("itemId",o)]:s[this.getField("text",o)])===t){n.push(a);break}if(s[this.getField("children",o)]&&s[this.getField("children",o)].length){if(-1!==(n=this.getIndex(t,e,s[this.getField("children",o)],n,!0,o))[n.length-1]){n.unshift(a);break}a!==l-1&&n.pop()}else a===l-1&&n.push(-1)}return r||-1!==n[0]?n:[]},e.prototype.enableItems=function(t,e,i){var n,r,o;void 0===e&&(e=!0);for(var s,a="e-disabled",l=0;l<t.length;l++){if(o=this.getIndex(t[l],i),this.navIdx.length){if(1!==o.length){s=!1;for(var h=0,c=o.length-1;h<c;h++)if(o[h]!==this.navIdx[h]){s=!0;break}if(s)continue}}else if(1!==o.length)continue;r=o.pop(),(n=this.getUlByNavIdx(o.length))&&(e?this.isMenu?(n.children[r].classList.remove(a),n.children[r].removeAttribute("aria-disabled")):te.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.remove(a):n.children[r].classList.remove(a):this.isMenu?(n.children[r].classList.add(a),n.children[r].setAttribute("aria-disabled","true")):te.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.add(a):n.children[r].classList.add(a))}},e.prototype.showItems=function(t,e){this.showHideItems(t,!1,e)},e.prototype.hideItems=function(t,e){this.showHideItems(t,!0,e)},e.prototype.showHideItems=function(t,e,i){for(var n,r,o,s=0;s<t.length;s++)r=(o=this.getIndex(t[s],i)).pop(),(n=this.getUlByNavIdx(o.length))&&(e?te.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.add("e-menu-hide"):n.children[r].classList.add("e-menu-hide"):te.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.remove("e-menu-hide"):n.children[r].classList.remove("e-menu-hide"))},e.prototype.removeItems=function(t,e){for(var i,n,r,o=0;o<t.length;o++)i=(n=this.getIndex(t[o],e)).pop(),r=this.getItems(n),this.removeItem(r,n,i)},e.prototype.insertAfter=function(t,e,i){this.insertItems(t,e,i)},e.prototype.insertBefore=function(t,e,i){this.insertItems(t,e,i,!1)},e.prototype.insertItems=function(t,e,i,n){var r,o,s,a,l;void 0===n&&(n=!0);for(var h=0;h<t.length;h++){o=(s=this.getIndex(e,i)).pop(),a=this.getItems(s),l=new id(a[0],"items",t[h],!0),a.splice(n?o+1:o,0,l);var c=this.isMenu?[this.getWrapper()].concat(this.getPopups()):[].slice.call(this.getWrapper().children);if(s.length<c.length){o=n?o+1:o,this.hasField(a,this.getField("iconCss",s.length-1)),r=this.createItems(a).children[o];var d=this.isMenu?ci(".e-menu-parent",c[s.length]):c[s.length];d.insertBefore(r,d.children[o])}}},e.prototype.removeAttributes=function(){var t=this;["top","left","display","z-index"].forEach(function(e){t.element.style.removeProperty(e)}),["role","tabindex","class","style"].forEach(function(e){"class"===e&&t.element.classList.contains("e-menu-parent")&&t.element.classList.remove("e-menu-parent"),-1!==["class","style"].indexOf(e)&&t.element.getAttribute(e)||t.element.removeAttribute(e),t.isMenu&&"class"===e&&t.element.classList.contains("e-vertical")&&t.element.classList.remove("e-vertical")})},e.prototype.destroy=function(){var e=this.getWrapper();if(e){if(this.unWireEvents(),this.isMenu)this.closeMenu(),$()?this.element=this.removeChildElement(this.element):this.element.innerHTML="",this.removeAttributes(),e.parentNode.insertBefore(this.element,e);else{if(this.clonedElement.style.display="","EJS-CONTEXTMENU"===this.clonedElement.tagName)ti([this.clonedElement],["e-control","e-lib","e-"+this.getModuleName()]),this.element=this.clonedElement;else if(this.refreshing&&this.clonedElement.childElementCount&&"LI"===this.clonedElement.children[0].tagName&&this.setProperties({items:[]},!0),document.getElementById(this.clonedElement.id)){var i=this.clonedElement.nextElementSibling;i&&i!==e?this.clonedElement.parentElement.insertBefore(this.element,i):this.clonedElement.parentElement.appendChild(this.element),$()?this.element=this.removeChildElement(this.element):this.element.innerHTML="",oi([].slice.call(this.clonedElement.children),this.element),ai(this.clonedElement),this.removeAttributes()}this.clonedElement=null}this.isMenu&&this.clonedElement?(ai(this.element),e.style.display="",e.classList.remove("e-"+this.getModuleName()+"-wrapper"),e.removeAttribute("data-ripple")):ai(e),t.prototype.destroy.call(this)}},$c([Ui()],e.prototype,"beforeItemRender",void 0),$c([Ui()],e.prototype,"beforeOpen",void 0),$c([Ui()],e.prototype,"onOpen",void 0),$c([Ui()],e.prototype,"beforeClose",void 0),$c([Ui()],e.prototype,"onClose",void 0),$c([Ui()],e.prototype,"select",void 0),$c([Ui()],e.prototype,"created",void 0),$c([Hi("")],e.prototype,"cssClass",void 0),$c([Hi(!1)],e.prototype,"showItemOnClick",void 0),$c([Hi("")],e.prototype,"target",void 0),$c([Hi("")],e.prototype,"filter",void 0),$c([Hi(null)],e.prototype,"template",void 0),$c([Hi(!1)],e.prototype,"enableScrolling",void 0),$c([Hi(!1)],e.prototype,"enableHtmlSanitizer",void 0),$c([_i({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},ed)],e.prototype,"fields",void 0),$c([Fi([],id)],e.prototype,"items",void 0),$c([_i({duration:400,easing:"ease",effect:"SlideDown"},nd)],e.prototype,"animationSettings",void 0),e=$c([Gi],e)}(un),od=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sd=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},ad="e-vertical",ld=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.tempItems=[],n}return od(e,t),e.prototype.getModuleName=function(){return"menu"},e.prototype.preRender=function(){if(this.isMenu=!0,this.element.id=this.element.id||U("ej2-menu"),this.template)try{document.querySelectorAll(this.template).length&&(this.template=document.querySelector(this.template).innerHTML.trim(),this.clearChanges())}catch(t){}else this.updateMenuItems(this.items);t.prototype.preRender.call(this)},e.prototype.initialize=function(){t.prototype.initialize.call(this),hi(this.element,{role:"menubar",tabindex:"0"}),"Vertical"===this.orientation?(this.element.classList.add(ad),this.hamburgerMode&&!this.target&&this.element.previousElementSibling.classList.add(ad),this.element.setAttribute("aria-orientation","vertical")):te.isDevice&&!this.enableScrolling&&this.element.parentElement.classList.add("e-scrollable"),this.hamburgerMode&&(this.element.parentElement.classList.add("e-hamburger"),"Horizontal"===this.orientation&&this.element.classList.add("e-hide-menu"))},e.prototype.updateMenuItems=function(t){this.tempItems=t,this.items=[],this.tempItems.map(this.createMenuItems,this),this.setProperties({items:this.items},!0),this.tempItems=[]},e.prototype.onPropertyChanged=function(e,i){for(var n=0,r=Object.keys(e);n<r.length;n++){switch(r[n]){case"orientation":"Vertical"===e.orientation?(this.element.classList.add(ad),this.hamburgerMode&&(this.target||this.element.previousElementSibling.classList.add(ad),this.element.classList.remove("e-hide-menu")),this.element.setAttribute("aria-orientation","vertical")):(this.element.classList.remove(ad),this.hamburgerMode&&(this.target||this.element.previousElementSibling.classList.remove(ad),this.element.classList.add("e-hide-menu")),this.element.removeAttribute("aria-orientation"));break;case"items":Object.keys(i.items).length||this.updateMenuItems(e.items);break;case"hamburgerMode":this.element.previousElementSibling||t.prototype.createHeaderContainer.call(this),e.hamburgerMode?this.element.parentElement.classList.add("e-hamburger"):this.element.parentElement.classList.remove("e-hamburger"),"Vertical"===this.orientation?(this.target||this.element.previousElementSibling.classList.add(ad),this.element.classList.remove("e-hide-menu")):(this.target?this.element.previousElementSibling.classList.add(ad):this.element.previousElementSibling.classList.remove(ad),this.element.classList[e.hamburgerMode?"add":"remove"]("e-hide-menu"));break;case"title":this.hamburgerMode&&this.element.previousElementSibling&&(e.title=this.enableHtmlSanitizer?zn.sanitize(e.title):e.title,this.element.previousElementSibling.querySelector(".e-menu-title").innerHTML=e.title);break;case"target":this.hamburgerMode&&(this.unWireEvents(i.target),this.wireEvents(),"Horizontal"===this.orientation&&(e.target?this.element.previousElementSibling.classList.add(ad):(this.element.previousElementSibling||t.prototype.createHeaderContainer.call(this),this.element.previousElementSibling.classList.remove(ad)),this.element.classList.add("e-hide-menu")))}}t.prototype.onPropertyChanged.call(this,e,i)},e.prototype.createMenuItems=function(t){var e,i,n,r=this.items;if(t[e=this.getField("parentId")]){for(i=this.getIndex(t[e].toString(),!0),n=0;n<i.length;n++)r[i[n]].items||(r[i[n]].items=[]),r=r[i[n]].items;r.push(t)}else this.items.push(t)},e.prototype.open=function(){t.prototype.openHamburgerMenu.call(this)},e.prototype.close=function(){t.prototype.closeHamburgerMenu.call(this)},sd([Hi("Horizontal")],e.prototype,"orientation",void 0),sd([Hi("")],e.prototype,"target",void 0),sd([Hi(null)],e.prototype,"template",void 0),sd([Hi(!1)],e.prototype,"enableScrolling",void 0),sd([Hi(!1)],e.prototype,"hamburgerMode",void 0),sd([Hi("Menu")],e.prototype,"title",void 0),sd([Hi(!1)],e.prototype,"enableHtmlSanitizer",void 0),sd([_i({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},ed)],e.prototype,"fields",void 0),e=sd([Gi],e)}(rd),hd={},cd={},dd={},pd={};Object(I.copy)(hd,S),Object(I.copy)(cd,n),Object(I.copy)(dd,y),Object(I.copy)(pd,a),Object(I.copy)(hd,b),Object(I.copy)(hd,w);var ud=new RegExp("^(-)?(\\d*)$"),fd=function(){function t(t,e,i,n){this.wrapperElement=t,this.element=e,this.options=n,this.element.blazor__instance=this,this.dotNetRef=i}return t.prototype.initialize=function(){this.spinButtonEvents(),ee.add(this.element,"focus",this.focusHandler,this),ee.add(this.element,"blur",this.focusOutHandler,this),ee.add(this.element,"keypress",this.keyPressHandler,this),ee.add(this.element,"keydown",this.keyDownHandler,this)},t.prototype.keyPressHandler=function(t){if(!this.options.enabled||this.options.readonly)return!0;var e=t.keyCode;if(!te.isDevice&&"11.0"===te.info.version&&13===e){var i=this.element.value,n=new kt(this.options.locale).getNumberParser({format:"n"})(i);return this.dotNetRef.invokeMethodAsync("ServerupdateValue",n,t),!0}if(0===t.which||t.metaKey||t.ctrlKey||8===e||13===e)return!0;var r=String.fromCharCode(t.which),o=this.element.value,s=this.element;return o=o.substring(0,s.selectionStart)+r+o.substring(s.selectionEnd),!!this.numericRegex().test(o)||(t.preventDefault(),t.stopPropagation(),!1)},t.prototype.keyDownHandler=function(t){this.options.readonly||(38===t.keyCode?(t.preventDefault(),this.dotNetRef.invokeMethodAsync("ServerAction","increment",t)):40===t.keyCode&&(t.preventDefault(),this.dotNetRef.invokeMethodAsync("ServerAction","decrement",t)))},t.prototype.numericRegex=function(){var t=R("decimal",jt(this.options.locale)),e="*";return"."===t&&(t="\\"+t),0===this.options.decimals&&this.options.validateDecimalOnType?ud:(this.options.decimals&&this.options.validateDecimalOnType&&(e="{0,"+this.options.decimals+"}"),new RegExp("^(-)?(((\\d+("+t+"\\d"+e+")?)|("+t+"\\d"+e+")))?$"))},t.prototype.mouseWheel=function(t){var e;t.preventDefault();var i=t;i.wheelDelta?e=i.wheelDelta/120:i.detail&&(e=-i.detail/3),e>0?this.dotNetRef.invokeMethodAsync("ServerAction","increment",t):e<0&&this.dotNetRef.invokeMethodAsync("ServerAction","decrement",t)},t.prototype.focusHandler=function(t){this.isFocused=!0,te.isDevice||ee.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)},t.prototype.focusOutHandler=function(t){this.isFocused=!1,t.preventDefault(),te.isDevice||ee.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)},t.prototype.mouseDownOnSpinner=function(t){var e=this;this.isFocused&&(this.isPrevFocused=!0,t.preventDefault());var i=t.currentTarget,n=i.classList.contains("e-spin-up")?"increment":"decrement";ee.add(i,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(function(){e.isCalled=!0,e.dotNetRef.invokeMethodAsync("ServerAction",n,t)},150),ee.add(document,"mouseup",this.mouseUpClick,this)},t.prototype.mouseUpOnSpinner=function(t){if(this.isPrevFocused&&(this.element.focus(),te.isDevice||(this.isPrevFocused=!1)),te.isDevice||t.preventDefault(),this.getElementData(t)){var e=t.currentTarget,i=e.classList.contains("e-spin-up")?"increment":"decrement";ee.remove(e,"mouseleave",this.mouseUpClick),this.isCalled||this.dotNetRef.invokeMethodAsync("ServerAction",i,t),this.isCalled=!1,ee.remove(document,"mouseup",this.mouseUpClick)}},t.prototype.touchMoveOnSpinner=function(t){document.elementFromPoint(t.clientX,t.clientY).classList.contains("e-input-group-icon")||clearInterval(this.timeOut)},t.prototype.getElementData=function(t){return!(t.which&&3===t.which||t.button&&2===t.button||!this.options.enabled||this.options.readonly)&&(clearInterval(this.timeOut),!0)},t.prototype.mouseUpClick=function(t){t.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,ee.remove(this.spinUp,"mouseleave",this.mouseUpClick),ee.remove(this.spinDown,"mouseleave",this.mouseUpClick)},t.prototype.selectRange=function(t){var e=this;if(te.isDevice||"11.0"!==te.info.version){var i=te.isDevice&&te.isIos?600:10;setTimeout(function(){e.element.setSelectionRange(0,t.length)},i)}else this.element.setSelectionRange(0,t.length)},t.prototype.isDevice=function(){return te.isDevice},t.prototype.spinButtonEvents=function(){this.spinDown=this.wrapperElement?this.wrapperElement.querySelector(".e-spin-down"):null,this.spinUp=this.wrapperElement?this.wrapperElement.querySelector(".e-spin-up"):null,this.spinDown&&this.spinUp&&(this.unBindSpinButton(),this.bindSpinButton())},t.prototype.bindSpinButton=function(){ee.add(this.spinUp,te.touchStartEvent,this.mouseDownOnSpinner,this),ee.add(this.spinDown,te.touchStartEvent,this.mouseDownOnSpinner,this),ee.add(this.spinUp,te.touchEndEvent,this.mouseUpOnSpinner,this),ee.add(this.spinDown,te.touchEndEvent,this.mouseUpOnSpinner,this),ee.add(this.spinUp,te.touchMoveEvent,this.touchMoveOnSpinner,this),ee.add(this.spinDown,te.touchMoveEvent,this.touchMoveOnSpinner,this)},t.prototype.unBindSpinButton=function(){ee.remove(this.spinUp,te.touchStartEvent,this.mouseDownOnSpinner),ee.remove(this.spinDown,te.touchStartEvent,this.mouseDownOnSpinner),ee.remove(this.spinUp,te.touchEndEvent,this.mouseUpOnSpinner),ee.remove(this.spinDown,te.touchEndEvent,this.mouseUpOnSpinner),ee.remove(this.spinUp,te.touchMoveEvent,this.touchMoveOnSpinner),ee.remove(this.spinDown,te.touchMoveEvent,this.touchMoveOnSpinner)},t}(),gd={initialize:function(t,e,i,n){new fd(t,e,i,n),e.blazor__instance.initialize()},isDevice:function(t){return t.blazor__instance.isDevice()},selectRange:function(t,e){t.blazor__instance.selectRange(e)},propertyChanges:function(t,e){t.blazor__instance.options=e},focusIn:function(t){t.focus()},focusOut:function(t){t.blur()},spinButtonEvents:function(t){t.blazor__instance.spinButtonEvents()}},md={},yd={};Object(I.copy)(md,gd),Object(I.copy)(yd,n);var vd={},bd={},wd={};Object(I.copy)(vd,f),Object(I.copy)(bd,n),Object(I.copy)(wd,l);var Sd={},xd={};Object(I.copy)(Sd,h),Object(I.copy)(xd,n);var Cd={},Pd={},Od={};Object(I.copy)(Cd,yh),Object(I.copy)(Pd,n),Object(I.copy)(Od,a);var Ed="e-toolbar-items",Ld="e-blazor-toolbar-items",Id="e-toolbar-popup",Td=function(){function t(t,e,i){this.resizeContext=this.resize.bind(this),this.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},this.element=t,this.element.blazor__instance=this,this.dotNetRef=i,this.options=e}return t.prototype.destroy=function(){var t=this;this.unwireEvents(),this.resetServerItems();for(var e=0,i=[].slice.call(this.element.children);e<i.length;e++){var n=i[e];n.classList.contains(Ld)||this.element.removeChild(n)}this.clearProperty(),this.popObj=null,this.tbarAlign=null,ei([this.element],"e-toolpop"),this.options.cssClass&&ei([this.element],this.options.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","aria-haspopup","role"].forEach(function(e){return t.element.removeAttribute(e)}),ei([this.element],["e-toolbar"])},t.prototype.wireEvents=function(){ee.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.options.allowKeyboard&&this.wireKeyboardEvent()},t.prototype.wireKeyboardEvent=function(){this.keyModule=new En(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),ee.add(this.element,"keydown",this.docKeyDown,this),this.element.setAttribute("tabIndex","0")},t.prototype.unwireKeyboardEvent=function(){this.keyModule&&(ee.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},t.prototype.docKeyDown=function(t){if("INPUT"!==t.target.tagName){var e=!F(this.popObj)&&ni(this.popObj.element)&&"Extended"!==this.options.overflowMode;9===t.keyCode&&!0===t.target.classList.contains("e-hor-nav")&&e&&this.popObj.hide({name:"FadeOut",duration:100}),(40===t.keyCode||38===t.keyCode||35===t.keyCode||36===t.keyCode)&&t.preventDefault()}},t.prototype.unwireEvents=function(){ee.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),ee.remove(document,"scroll",this.docEvent),ee.remove(document,"click",this.docEvent)},t.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},t.prototype.docEvent=function(t){var e=pi(t.target,".e-popup");this.popObj&&ni(this.popObj.element)&&!e&&"Popup"===this.options.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},t.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&ti([this.scrollModule.element],"e-tbar-pos"),this.scrollModule.destroy(),this.scrollModule=null)},t.prototype.destroyMode=function(){this.scrollModule&&(ei([this.scrollModule.element],"e-rtl"),this.destroyScroll()),ei([this.element],"e-tbar-extended"),ei([this.element],"e-extended-toolbar");var t=this.element.querySelector(".e-toolbar-multirow");t&&ei([t],"e-toolbar-multirow"),this.popObj&&this.popupRefresh(this.popObj.element,!0)},t.prototype.elementFocus=function(t){var e=t.firstElementChild;e?(e.focus(),this.activeEleSwitch(t)):t.focus()},t.prototype.clstElement=function(t,e){return t&&this.popObj&&ni(this.popObj.element)?this.popObj.element.querySelector(".e-toolbar-item"):this.element===e||t?this.element.querySelector(".e-toolbar-item:not(.e-overlay ):not(.e-separator ):not(.e-hidden )"):pi(e,".e-toolbar-item")},t.prototype.keyHandling=function(t,e,i,n,r){var o=this.popObj,s=this.element,a={name:"FadeOut",duration:100};switch(e.action){case"moveRight":if(this.options.isVertical)return;s===i?this.elementFocus(t):n||this.eleFocus(t,"next");break;case"moveLeft":if(this.options.isVertical)return;n||this.eleFocus(t,"previous");break;case"home":case"end":var l=void 0,h=void 0;if(t){var c=pi(t,".e-popup");c?ni(this.popObj.element)&&(h=[].slice.call(c.children),l="home"===e.action?h[0]:h[h.length-1]):(h=this.element.querySelectorAll("."+Ed+" .e-toolbar-item"),l="home"===e.action?h[0]:h[h.length-1]),l&&this.elementFocus(l)}break;case"moveUp":case"moveDown":var d="moveUp"===e.action?"previous":"next";if(this.options.isVertical)"moveUp"===e.action?this.eleFocus(t,"previous"):this.eleFocus(t,"next");else if(o&&pi(i,".e-popup")){var p=o.element,u=p.firstElementChild;if("previous"===d&&u===t||"next"===d&&p.lastElementChild===t)return;this.eleFocus(t,d)}else"moveDown"===e.action&&o&&ni(o.element)&&this.elementFocus(t);break;case"tab":if(!r&&!n){var f=t.firstElementChild;s===i&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(f),f.focus()),this.element.removeAttribute("tabindex"))}break;case"popupClose":o&&"Extended"!==this.options.overflowMode&&o.hide(a);break;case"popupOpen":if(!n)return;o&&!ni(o.element)?(o.element.style.top=s.offsetHeight+"px",o.show({name:"FadeIn",duration:100})):o.hide(a)}},t.prototype.keyActionHandler=function(t){var e=t.target;if("INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&!this.element.classList.contains("e-overlay")){var i;t.preventDefault();var n=e.classList.contains("e-hor-nav"),r=e.classList.contains("e-scroll-nav");((i=this.clstElement(n,e))||r)&&this.keyHandling(i,t,e,n,r)}},t.prototype.eleContains=function(t){return t.classList.contains("e-separator")||t.classList.contains("e-overlay")||t.getAttribute("disabled")||t.classList.contains("e-hidden")||!ni(t)},t.prototype.eleFocus=function(t,e){var i=Object(t)[e+"ElementSibling"];if(i){if(this.eleContains(i))return void this.eleFocus(i,e);this.elementFocus(i)}else if(this.tbarAlign){var n=Object(t.parentElement)[e+"ElementSibling"];if(F(n)||0!==n.children.length||(n=Object(n)[e+"ElementSibling"]),!F(n)&&n.children.length>0)if("next"===e){var r=n.querySelector(".e-toolbar-item");this.eleContains(r)?this.eleFocus(r,e):(r.firstElementChild.focus(),this.activeEleSwitch(r))}else{r=n.lastElementChild;this.eleContains(r)?this.eleFocus(r,e):this.elementFocus(r)}}},t.prototype.clickHandler=function(t){var e,i=t.target,n=i.classList,r=this.element,o=!F(pi(i,".e-toolbar-pop")),s=n.contains("e-close-icon"),a=pi(i,".e-hor-nav");a||(a=i),r.children[0].classList.contains("e-hscroll")||r.children[0].classList.contains("e-vscroll")||!n.contains("e-hor-nav")||(n=i.querySelector(".e-icons").classList),(n.contains("e-popup-up-icon")||n.contains("e-popup-down-icon"))&&this.popupClickHandler(r,a,"e-rtl");var l=pi(t.target,".e-toolbar-item");(!F(l)&&!l.classList.contains("e-overlay")||a.classList.contains("e-hor-nav"))&&(F(l)||(e=parseInt(l.getAttribute("data-index"),10)),this.dotNetRef.invokeMethodAsync("TriggerClickEvent",t,o,s,e))},t.prototype.popupClickHandler=function(t,e,i){var n=this.popObj;ni(n.element)?(e.classList.remove("e-nav-active"),n.hide({name:"FadeOut",duration:100})):((t.classList.contains(i)||this.options.isVerticalLeft)&&(t.classList.contains(i)&&(n.enableRtl=!0),n.position={X:"left",Y:"top"}),0!==n.offsetX||t.classList.contains(i)||this.options.isVerticalLeft||(n.enableRtl=!1,n.position={X:"right",Y:"top"}),n.dataBind(),n.refreshPosition(),n.element.style.top=this.getElementOffsetY()+"px","Extended"===this.options.overflowMode&&(n.element.style.minHeight="0px"),e.classList.add("e-nav-active"),n.show({name:"FadeIn",duration:100}))},t.prototype.render=function(){this.scrollModule=null,this.popObj=null,this.isExtendedOpen=!1,this.popupPriCount=0;var t=J(this.options.width),e=J(this.options.height);"msie"===te.info.name&&"auto"===this.options.height||gi(this.element,{height:e}),gi(this.element,{width:t}),this.element.setAttribute("aria-haspopup","false"),this.renderControl(),this.wireEvents()},t.prototype.renderControl=function(){this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},t.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},t.prototype.itemsAlign=function(t,e){var i,n;this.tbarEle||(this.tbarEle=[]);for(var r=0;r<t.length;r++){(i=this.element.querySelector("."+Ld).querySelector('.e-toolbar-item[data-index="'+r+'"]'))&&("Show"!==t[r].overflow&&t[r].showAlwaysInPopup&&!i.classList.contains("e-separator")&&this.popupPriCount++,t[r].htmlAttributes&&this.setAttr(t[r].htmlAttributes,i),"Button"===t[r].type&&(ee.clearEvents(i),ee.add(i,"click",this.itemClick,this)),-1===this.tbarEle.indexOf(i)&&this.tbarEle.push(i),this.tbarAlign||this.tbarItemAlign(t[r],e,r),(n=e.querySelector(".e-toolbar-"+t[r].align.toLowerCase()))?(t[r].showAlwaysInPopup&&"Show"!==t[r].overflow||this.tbarAlgEle[(t[r].align+"s").toLowerCase()].push(i),n.appendChild(i)):e.appendChild(i))}},t.prototype.serverItemsRefresh=function(){this.element.querySelector("."+Ld).children.length>0&&(this.itemsAlign(this.options.items,this.element.querySelector("."+Ed)),this.renderLayout(),this.refreshOverflow())},t.prototype.resetServerItems=function(){var t=this.element.querySelector("."+Ld);oi([].slice.call(di("."+Ed+" .e-toolbar-item",this.element)),t),this.clearProperty()},t.prototype.changeOrientation=function(){this.options.isVertical?(this.element.classList.add("e-vertical"),this.element.setAttribute("aria-orientation","vertical"),gi(this.element,{height:J(this.options.height),width:J(this.options.width)})):(this.element.classList.remove("e-vertical"),this.element.setAttribute("aria-orientation","horizontal"),"auto"!==this.options.height&&"100%"!==this.options.height||(this.element.style.height=this.options.height)),this.destroyMode(),this.refreshOverflow()},t.prototype.initScroll=function(t,e){!this.scrollModule&&this.checkOverflow(t,e[0])&&(this.tbarAlign&&this.element.querySelector("."+Ed+" .e-toolbar-center").removeAttribute("style"),this.options.isVertical?this.scrollModule=new Jc({scrollStep:this.options.scrollStep,enableRtl:this.options.enableRtl},e[0]):this.scrollModule=new Yc({scrollStep:this.options.scrollStep,enableRtl:this.options.enableRtl},e[0]),ei([this.scrollModule.element],"e-tbar-pos"),gi(this.element,{overflow:"hidden"}))},t.prototype.itemWidthCal=function(t){var e,i=this,n=0;return[].slice.call(di(".e-toolbar-item",t)).forEach(function(t){ni(t)&&(e=window.getComputedStyle(t),n+=i.options.isVertical?t.offsetHeight:t.offsetWidth,n+=parseFloat(i.options.isVertical?e.marginTop:e.marginRight),n+=parseFloat(i.options.isVertical?e.marginBottom:e.marginLeft))}),n},t.prototype.getScrollCntEle=function(t){var e=this.options.isVertical?".e-vscroll-content":".e-hscroll-content";return t.querySelector(e)},t.prototype.checkOverflow=function(t,e){if(F(t)||F(e)||!ni(t))return!1;var i=this.options.isVertical?t.offsetHeight:t.offsetWidth,n=this.options.isVertical?e.offsetHeight:e.offsetWidth;(this.tbarAlign||this.scrollModule||i===n)&&(n=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(e):e));var r=t.querySelector(".e-hor-nav"),o=t.querySelector(".e-scroll-nav"),s=0;return r?s=this.options.isVertical?r.offsetHeight:r.offsetWidth:o&&(s=this.options.isVertical?2*o.offsetHeight:2*o.offsetWidth),n>i-s},t.prototype.refreshOverflow=function(){this.resize()},t.prototype.toolbarAlign=function(t){this.tbarAlign&&(ti([t],"e-tbar-pos"),this.itemPositioning())},t.prototype.renderOverflowMode=function(){var t=this.element,e=t.querySelector("."+Ed),i=this.popupPriCount>0;if(t&&t.children.length>0)switch(this.offsetWid=t.offsetWidth,ei([this.element],"e-toolpop"),"msie"===te.info.name&&"auto"===this.options.height&&(t.style.height=""),this.options.overflowMode){case"Scrollable":F(this.scrollModule)&&this.initScroll(t,[].slice.call(t.getElementsByClassName(Ed)));break;case"Popup":ti([this.element],"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(t,e)||i)&&this.setOverflowAttributes(t),this.toolbarAlign(e);break;case"MultiRow":ti([e],"e-toolbar-multirow"),this.checkOverflow(t,e)&&this.tbarAlign&&(this.removePositioning(),ti([e],"e-multirow-pos")),"hidden"===t.style.overflow&&(t.style.overflow=""),"msie"!==te.info.name&&"auto"===t.style.height||(t.style.height="auto");break;case"Extended":ti([this.element],"e-extended-toolbar"),(this.checkOverflow(t,e)||i)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(t)),this.toolbarAlign(e)}},t.prototype.setOverflowAttributes=function(t){this.createPopupEle(t,[].slice.call(di("."+Ed+" .e-toolbar-item",t))),this.element.querySelector(".e-hor-nav").setAttribute("tabIndex","0"),this.element.querySelector(".e-hor-nav").setAttribute("role","list")},t.prototype.separator=function(){var t,e=this.element,i=[].slice.call(e.querySelectorAll(".e-separator")),n=e.querySelector(".e-multirow-separator"),r=e.querySelector(".e-extended-separator");null!==(t="MultiRow"===this.options.overflowMode?n:r)&&("MultiRow"===this.options.overflowMode?t.classList.remove("e-multirow-separator"):"Extended"===this.options.overflowMode&&t.classList.remove("e-extended-separator"));for(var o=0;o<=i.length-1;o++)i[o].offsetLeft<30&&0!==i[o].offsetLeft&&("MultiRow"===this.options.overflowMode?i[o].classList.add("e-multirow-separator"):"Extended"===this.options.overflowMode&&i[o].classList.add("e-extended-separator"))},t.prototype.createPopupEle=function(t,e){var i=t.querySelector(".e-hor-nav"),n=this.options.isVertical;i||this.createPopupIcon(t),i=t.querySelector(".e-hor-nav");var r=n?i.offsetHeight:i.offsetWidth,o=(n?t.offsetHeight:t.offsetWidth)-r;this.element.classList.remove("e-rtl"),gi(this.element,{direction:"initial"}),this.checkPriority(t,e,o,!0),this.options.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},t.prototype.pushingPoppedEle=function(t,e,i,n,r){var o=this.element,s=di(".e-overflow-show",i),a=0,l=[].slice.call(di("."+Id,o.querySelector("."+Ed))),h=0;l.forEach(function(o,l){s=di(".e-overflow-show",i),o.classList.contains("e-overflow-show")&&s.length>0?t.tbResize&&s.length>l?(i.insertBefore(o,s[l]),++h):(i.insertBefore(o,i.children[s.length]),++h):o.classList.contains("e-overflow-show")?(i.insertBefore(o,i.firstChild),++h):t.tbResize&&o.classList.contains("e-overflow-hide")&&i.children.length>0&&0===s.length?(i.insertBefore(o,i.firstChild),++h):o.classList.contains("e-overflow-hide")?e.push(o):t.tbResize?(i.insertBefore(o,i.childNodes[a+h]),++a):i.appendChild(o),o.classList.contains("e-separator")?gi(o,{display:"",height:r+"px"}):gi(o,{display:"",height:n+"px"})}),e.forEach(function(t){i.appendChild(t)});for(var c=di(".e-toolbar-item",o.querySelector("."+Ed)),d=c.length-1;d>=0;d--){var p=c[d];if(!p.classList.contains("e-separator")||"Extended"===this.options.overflowMode)break;gi(p,{display:"none"})}},t.prototype.createPopup=function(){var t,e,i,n,r,o=this.element;"Extended"===this.options.overflowMode&&(n=o.querySelector(".e-separator:not(."+Id+")"),i="auto"===o.style.height||""===o.style.height?null:n&&n.offsetHeight),e=o.querySelector(".e-toolbar-item:not(.e-separator):not(."+Id+")"),t="auto"===o.style.height||""===o.style.height?null:e&&e.offsetHeight;if(o.querySelector("#"+o.id+"_popup.e-toolbar-pop"))r=o.querySelector("#"+o.id+"_popup.e-toolbar-pop");else{var s=$e("div",{id:o.id+"_popup",className:"e-toolbar-pop e-toolbar-extended"}),a=$e("div",{id:o.id+"_popup",className:"e-toolbar-pop"});r="Extended"===this.options.overflowMode?s:a}this.pushingPoppedEle(this,[],r,t,i),this.popupInit(o,r)},t.prototype.getElementOffsetY=function(){return"Extended"===this.options.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},t.prototype.popupInit=function(t,e){if(this.popObj){var i=this.popObj.element;gi(i,{maxHeight:"",display:"block"}),gi(i,{maxHeight:i.offsetHeight+"px",display:""})}else{t.appendChild(e),gi(this.element,{overflow:""});var n=window.getComputedStyle(this.element),r=new ho(null,{relateTo:this.element,offsetY:this.options.isVertical?0:this.getElementOffsetY(),enableRtl:this.options.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.options.enableCollision?"flip":"none"},position:this.options.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if(r.appendTo(e),"Extended"===this.options.overflowMode&&(r.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth),r.offsetX=0),ee.add(document,"scroll",this.docEvent.bind(this)),ee.add(document,"click ",this.docEvent.bind(this)),r.element.style.maxHeight=r.element.offsetHeight+"px",this.options.isVertical&&(r.element.style.visibility="hidden"),this.isExtendedOpen){var o=this.element.querySelector(".e-hor-nav");o.classList.add("e-nav-active"),mi(o.firstElementChild,["e-popup-up-icon"],["e-popup-down-icon"]),this.element.querySelector(".e-toolbar-extended").classList.add("e-popup-open")}else r.hide();this.popObj=r,this.element.setAttribute("aria-haspopup","true")}},t.prototype.tbarPopupHandler=function(t){"Extended"===this.options.overflowMode&&(t?ti([this.element],"e-tbar-extended"):ei([this.element],"e-tbar-extended"))},t.prototype.popupOpen=function(t){var e=this.popObj;this.options.isVertical||(e.offsetY=this.getElementOffsetY(),e.dataBind());var i=this.popObj.element,n=this.popObj.element.parentElement,r=n.querySelector(".e-hor-nav");gi(e.element,{height:"auto",maxHeight:""}),e.element.style.maxHeight=e.element.offsetHeight+"px","Extended"===this.options.overflowMode&&(e.element.style.minHeight="");var o=i.offsetTop+i.offsetHeight+Lr(n).top,s=r.firstElementChild;r.classList.add("e-nav-active"),mi(s,["e-popup-up-icon"],["e-popup-down-icon"]),this.tbarPopupHandler(!0);var a=F(window.scrollY)?0:window.scrollY;if(!this.options.isVertical&&window.innerHeight+a<o&&this.element.offsetTop<i.offsetHeight){var l=i.offsetHeight-(o-window.innerHeight-a+5);e.height=l+"px";for(var h=0;h<=i.childElementCount;h++){var c=i.children[h];if(c.offsetTop+c.offsetHeight>l){l=c.offsetTop;break}}gi(e.element,{maxHeight:l+"px"})}else if(this.options.isVertical){var d=this.element.getBoundingClientRect();gi(e.element,{maxHeight:d.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}e&&e.refreshPosition()},t.prototype.popupClose=function(t){var e=this.element.querySelector(".e-hor-nav"),i=e.firstElementChild;e.classList.remove("e-nav-active"),mi(i,["e-popup-down-icon"],["e-popup-up-icon"]),this.tbarPopupHandler(!1)},t.prototype.checkPriority=function(t,e,i,n){for(var r,o=this.popupPriCount>0,s=i,a=0,l=0,h=0,c=function(t,e){var i=!1;return e.forEach(function(e){t.classList.contains(e)&&(i=!0)}),i},d=e.length-1;d>=0;d--){var p=void 0,u=window.getComputedStyle(e[d]);this.options.isVertical?(p=parseFloat(u.marginTop),p+=parseFloat(u.marginBottom)):(p=parseFloat(u.marginRight),p+=parseFloat(u.marginLeft));var f=e[d]===this.tbarEle[0];f&&(this.tbarEleMrgn=p),r=this.options.isVertical?e[d].offsetHeight:e[d].offsetWidth;var g=f?r+p:r;if(c(e[d],["e-popup-alone"])&&o&&(e[d].classList.add(Id),this.options.isVertical?gi(e[d],{display:"none",minHeight:g+"px"}):gi(e[d],{display:"none",minWidth:g+"px"}),h++),this.options.isVertical?e[d].offsetTop+e[d].offsetHeight+p>i:e[d].offsetLeft+e[d].offsetWidth+p>i){if(e[d].classList.contains("e-separator")){if("Extended"===this.options.overflowMode){if(l===h)c(m=e[d],["e-separator","e-ignore"])&&(e[d].classList.add(Id),h++);l++}else if("Popup"===this.options.overflowMode){var m;if(a>0&&l===h)c(m=e[d+l+(a-1)],["e-separator","e-ignore"])&&gi(m,{display:"none"});a++,l=0,h=0}}else l++;e[d].classList.contains("e-overflow-show")&&n?i-=(this.options.isVertical?e[d].offsetHeight:e[d].offsetWidth)+p:c(e[d],["e-separator","e-ignore"])?i-=(this.options.isVertical?e[d].offsetHeight:e[d].offsetWidth)+p:(e[d].classList.add(Id),this.options.isVertical?gi(e[d],{display:"none",minHeight:g+"px"}):gi(e[d],{display:"none",minWidth:g+"px"}),h++)}}if(n){var y=di(".e-toolbar-item:not(."+Id+")",this.element);this.checkPriority(t,y,s,!1)}},t.prototype.createPopupIcon=function(t){var e=t.id.concat("_nav"),i="e-"+t.id.concat("_nav e-hor-nav"),n=$e("div",{id:e,className:i="Extended"===this.options.overflowMode?i+" e-expended-nav":i});"msie"!==te.info.name&&"edge"!==te.info.name||n.classList.add("e-ie-align");var r=$e("div",{className:"e-popup-down-icon e-icons"});n.appendChild(r),n.setAttribute("tabindex","0"),n.setAttribute("role","list"),t.appendChild(n)},t.prototype.tbarPriRef=function(t,e,i,n,r,o,s,a){var l=a,h=this.popObj.element,c=di("."+Id+":not(.e-overflow-show)",h).length,d=function(t,e){return t.classList.contains(e)};if(0===di(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",t).length){var p=t.children[e-(e-i)-1],u=!F(p)&&d(p,"e-ignore");if(!F(p)&&d(p,"e-separator")&&!ni(p)||u){p.style.display="inherit";var f=p.offsetWidth+2*parseFloat(window.getComputedStyle(p).marginRight),g=p.previousElementSibling;o+f<s||r?(t.insertBefore(n,t.children[e+l-(e-i)]),F(g)||(g.style.display="")):g.classList.contains("e-separator")&&(g.style.display="none"),p.style.display=""}else t.insertBefore(n,t.children[e+l-(e-i)])}else t.insertBefore(n,t.children[e+l-c])},t.prototype.popupRefresh=function(t,e){var i=this,n=this.element,r=this.options.isVertical,o=n.querySelector(".e-hor-nav"),s=n.querySelector("."+Ed);if(!F(o)){var a;s.removeAttribute("style"),t.style.display="block",a=r?n.offsetHeight-(o.offsetHeight+s.offsetHeight):n.offsetWidth-(o.offsetWidth+s.offsetWidth);var l=0;[].slice.call(t.children).forEach(function(t){l+=i.popupEleWidth(t),gi(t,{position:""})}),a+(r?o.offsetHeight:o.offsetWidth)>l&&0===this.popupPriCount&&(e=!0),this.popupEleRefresh(a,t,e),t.style.display="",0===t.children.length&&o&&this.popObj&&(ai(o),o=null,this.popObj.destroy(),ai(this.popObj.element),this.popObj=null,n.setAttribute("aria-haspopup","false"))}},t.prototype.ignoreEleFetch=function(t,e){var i=[].slice.call(e.querySelectorAll(".e-ignore")),n=[],r=0;return i.length>0?(i.forEach(function(t){n.push([].slice.call(e.children).indexOf(t))}),n.forEach(function(e){e<=t&&r++}),r):0},t.prototype.checkPopupRefresh=function(t,e){e.style.display="block";var i=this.popupEleWidth(e.firstElementChild);e.firstElementChild.style.removeProperty("Position");var n=t.offsetWidth-t.querySelector(".e-hor-nav").offsetWidth,r=t.querySelector("."+Ed).offsetWidth;return e.style.removeProperty("display"),n>i+r},t.prototype.popupEleWidth=function(t){t.style.position="absolute";var e=this.options.isVertical?t.offsetHeight:t.offsetWidth,i=t.querySelector(".e-tbar-btn-text");if(t.classList.contains("e-tbtn-align")||t.classList.contains("e-popup-text")){var n=t.children[0];!F(i)&&t.classList.contains("e-popup-text")?i.style.display="none":!F(i)&&t.classList.contains("e-toolbar-text")&&(i.style.display="block"),n.style.minWidth="0%",e=parseFloat(this.options.isVertical?t.style.minHeight:t.style.minWidth),n.style.minWidth="",n.style.minHeight="",F(i)||(i.style.display="")}return e},t.prototype.popupEleRefresh=function(t,e,i){for(var n,r,o=this.popupPriCount>0,s=this.tbarEle,a=this.element.querySelector("."+Ed),l=0,h=function(e){if(e.classList.contains("e-popup-alone")&&o&&!i)return"continue";var h=c.popupEleWidth(e);if(e===c.tbarEle[0]&&(h+=c.tbarEleMrgn),e.style.position="",!(h<t||i))return"break";if(gi(e,{minWidth:"",height:"",minHeight:""}),e.classList.contains("e-overflow-hide")||e.classList.remove(Id),r=c.tbarEle.indexOf(e),c.tbarAlign){var d=c.options.items[r].align;r=c.tbarAlgEle[(d+"s").toLowerCase()].indexOf(e),s=c.tbarAlgEle[(d+"s").toLowerCase()],a=c.element.querySelector("."+Ed+" .e-toolbar-"+d.toLowerCase())}var p=0;"Extended"!==c.options.overflowMode&&s.slice(0,r).forEach(function(e){(e.classList.contains("e-overflow-show")||e.classList.contains("e-separator"))&&(e.classList.contains("e-separator")&&(e.style.display="",t-=e.offsetWidth),p++)}),l=c.ignoreEleFetch(r,a),e.classList.contains("e-overflow-show")?(c.tbarPriRef(a,r,p,e,i,h,t,l),t-=e.offsetWidth):0===r?(a.insertBefore(e,a.firstChild),t-=e.offsetWidth):(n=di(".e-overflow-show",c.popObj.element).length,a.insertBefore(e,a.children[r+l-n]),t-=e.offsetWidth),e.style.height=""},c=this,d=0,p=[].slice.call(e.children);d<p.length;d++){if("break"===h(p[d]))break}this.checkOverflow(this.element,this.element.getElementsByClassName(Ed)[0])&&!i&&this.renderOverflowMode()},t.prototype.removePositioning=function(){var t=this.element.querySelector("."+Ed);if(!F(t)&&t.classList.contains("e-tbar-pos")){ei([t],"e-tbar-pos");var e=[].slice.call(t.childNodes);e[1].removeAttribute("style"),e[2].removeAttribute("style")}},t.prototype.refreshPositioning=function(){ti([this.element.querySelector("."+Ed)],"e-tbar-pos"),this.itemPositioning()},t.prototype.itemPositioning=function(){var t,e=this.element.querySelector("."+Ed);if(!F(e)&&e.classList.contains("e-tbar-pos")){var i,n=this.element.querySelector(".e-hor-nav");if(this.scrollModule){var r=this.options.isVertical?"e-vscroll-content":"e-hscroll-content";i=[].slice.call(e.querySelector("."+r).children)}else i=[].slice.call(e.childNodes);t=this.options.isVertical?i[0].offsetHeight+i[2].offsetHeight:i[0].offsetWidth+i[2].offsetWidth;var o=this.options.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(n){o-=this.options.isVertical?n.offsetHeight:n.offsetWidth;var s=(this.options.isVertical?n.offsetHeight:n.offsetWidth)+"px";i[2].removeAttribute("style"),this.options.isVertical?this.options.enableRtl?i[2].style.top=s:i[2].style.bottom=s:this.options.enableRtl?i[2].style.left=s:i[2].style.right=s}if(!(o<=t)){var a=(o-t-(this.options.isVertical?i[1].offsetHeight:i[1].offsetWidth))/2;i[1].removeAttribute("style");var l=(this.options.isVertical?i[0].offsetHeight:i[0].offsetWidth)+a+"px";this.options.isVertical?this.options.enableRtl?i[1].style.marginBottom=l:i[1].style.marginTop=l:this.options.enableRtl?i[1].style.marginRight=l:i[1].style.marginLeft=l}}},t.prototype.tbarItemAlign=function(t,e,i){var n=this;if(!t.showAlwaysInPopup||"Show"===t.overflow){var r=[];if(r.push($e("div",{className:"e-toolbar-left"})),r.push($e("div",{className:"e-toolbar-center"})),r.push($e("div",{className:"e-toolbar-right"})),0===i&&"Left"!==t.align)r.forEach(function(t){e.appendChild(t)}),this.tbarAlign=!0,ti([e],"e-tbar-pos");else if("Left"!==t.align){var o=e.childNodes,s=r[0];[].slice.call(o).forEach(function(t){n.tbarAlgEle.lefts.push(t),s.appendChild(t)}),e.appendChild(s),e.appendChild(r[1]),e.appendChild(r[2]),this.tbarAlign=!0,ti([e],"e-tbar-pos")}}},t.prototype.renderItems=function(){var t=this.element,e=this.options.items;if(t&&e.length>0){var i=t.querySelector("."+Ed);i||(i=$e("div",{className:Ed})),this.itemsAlign(e,i),F(t.firstElementChild)?t.appendChild(i):t.insertBefore(i,t.firstElementChild)}},t.prototype.setAttr=function(t,e){for(var i,n=Object.keys(t),r=0;r<n.length;r++)"class"===(i=n[r])?ti([e],t[i]):e.setAttribute(i,t[i])},t.prototype.itemClick=function(t){this.activeEleSwitch(t.currentTarget)},t.prototype.activeEleSwitch=function(t){this.activeEleRemove(t.firstElementChild),this.activeEle.focus()},t.prototype.activeEleRemove=function(t){F(this.activeEle)||this.activeEle.setAttribute("tabindex","-1"),this.activeEle=t,F(this.trgtEle)&&!t.parentElement.classList.contains("e-template")?t.removeAttribute("tabindex"):this.activeEle.setAttribute("tabindex","0")},t.prototype.resize=function(){var t=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.options.overflowMode&&this.popObj.hide();var e=this.checkOverflow(t,t.getElementsByClassName(Ed)[0]);if(!e){this.destroyScroll();var i=t.querySelector("."+Ed);F(i)||(ei([i],"e-multirow-pos"),this.tbarAlign&&ti([i],"e-tbar-pos"))}if(!e||!this.scrollModule||this.offsetWid!==t.offsetWidth){if((this.offsetWid>t.offsetWidth||e)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.options.overflowMode){var n=window.getComputedStyle(this.element);this.popObj.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.offsetWid=t.offsetWidth,this.tbResize=!1,this.separator()}},t.prototype.extendedOpen=function(){var t=this.element.querySelector(".e-toolbar-extended");"Extended"===this.options.overflowMode&&t&&(this.isExtendedOpen=t.classList.contains("e-popup-open"))},t.prototype.disable=function(t){var e=this.element;t?e.classList.add("e-overlay"):e.classList.remove("e-overlay"),e.setAttribute("tabindex",t?"-1":"0"),this.activeEle&&this.activeEle.setAttribute("tabindex",t?"-1":"0"),this.scrollModule&&this.scrollModule.disable(t),this.popObj&&(ni(this.popObj.element)&&"Extended"!==this.options.overflowMode&&this.popObj.hide(),e.querySelector("#"+e.id+"_nav").setAttribute("tabindex",t?"-1":"0"))},t.prototype.setCssClass=function(t){this.extendedOpen(),this.options.cssClass&&ei([this.element],this.options.cssClass.split(" ")),t&&ti([this.element],t.split(" ")),this.options.cssClass=t},t}(),Ad={initialize:function(t,e,i){0===e.scrollStep&&(e.scrollStep=null);var n=new Td(t,e,i);n.render(),n.dotNetRef.invokeMethodAsync("CreatedEvent",null)},hidePopup:function(t){t&&t.blazor__instance&&!F(t.blazor__instance.popObj)&&t.blazor__instance.popObj.hide({name:"FadeOut",duration:100})},setCssClass:function(t,e){t.blazor__instance&&t.blazor__instance.setCssClass(e)},setWidth:function(t,e){if(t.blazor__instance){t.blazor__instance.options.width=e,t.blazor__instance.extendedOpen();var i=t.offsetWidth;gi(t,{width:J(e)}),t.blazor__instance.renderOverflowMode(),t.blazor__instance.popObj&&i<t.offsetWidth&&t.blazor__instance.popupRefresh(t.blazor__instance.popObj.element,!1)}},setHeight:function(t,e){t.blazor__instance&&(t.blazor__instance.options.height=e,t.blazor__instance.extendedOpen(),gi(t,{height:J(e)}))},setOverflowMode:function(t,e){t.blazor__instance&&(t.blazor__instance.options.overflowMode=e,t.blazor__instance.extendedOpen(),t.blazor__instance.destroyMode(),t.blazor__instance.renderOverflowMode(),t.blazor__instance.options.enableRtl&&ti([t],"e-rtl"),t.blazor__instance.refreshOverflow())},setEnableRTL:function(t,e){t.blazor__instance&&(t.blazor__instance.options.enableRtl=e,t.blazor__instance.extendedOpen(),e?ti([t],"e-rtl"):ei([t],"e-rtl"),F(t.blazor__instance.scrollModule)||(e?ti([t.blazor__instance.scrollModule.element],"e-rtl"):ei([t.blazor__instance.scrollModule.element],"e-rtl")),F(t.blazor__instance.popObj)||(e?ti([t.blazor__instance.popObj.element],"e-rtl"):ei([t.blazor__instance.popObj.element],"e-rtl")),t.blazor__instance.tbarAlign&&t.blazor__instance.itemPositioning())},setScrollStep:function(t,e){t.blazor__instance&&(t.blazor__instance.options.scrollStep=e,t.blazor__instance.extendedOpen(),t.blazor__instance.scrollModule&&(t.blazor__instance.scrollModule.scrollStep=e))},setEnableCollision:function(t,e){t.blazor__instance&&(t.blazor__instance.options.enableCollision=e,t.blazor__instance.extendedOpen(),t.blazor__instance.popObj&&(t.blazor__instance.popObj.collision={Y:e?"flip":"none"}))},setAllowKeyboard:function(t,e){t.blazor__instance&&(t.blazor__instance.options.allowKeyboard=e,t.blazor__instance.extendedOpen(),t.blazor__instance.unwireKeyboardEvent(),e&&t.blazor__instance.wireKeyboardEvent())},serverItemsRerender:function(t,e){!F(t)&&t.blazor__instance&&(t.blazor__instance.options.items=e,t.blazor__instance.destroyMode(),t.blazor__instance.resetServerItems(),t.blazor__instance.serverItemsRefresh())},hideItem:function(t,e){t.blazor__instance&&(t.blazor__instance.options.items=e,t.blazor__instance.refreshOverflow())},disable:function(t,e){t.blazor__instance&&t.blazor__instance.disable(e)},refreshOverflow:function(t){t.blazor__instance&&t.blazor__instance.refreshOverflow()},destroy:function(t){t.blazor__instance&&t.blazor__instance.destroy()},refresh:function(t,e){0===e.scrollStep&&(e.scrollStep=null),t.blazor__instance&&(t.blazor__instance.options=e,t.blazor__instance.destroyMode(),t.blazor__instance.resetServerItems(),t.blazor__instance.serverItemsRefresh())}},Bd={},kd={},Md={},Dd={};Object(I.copy)(Bd,Ad),Object(I.copy)(Bd,Ad),Object(I.copy)(kd,n),Object(I.copy)(Md,a);var Rd="e-tip-bottom",zd=function(){function t(t,e,i,n){this.popupObj=null,this.isPositionUpdate=!1,this.isOffsetXUpdate=!1,this.isOffsetYUpdate=!1,this.tipClass=Rd,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isContiniousOpen=!1,this.isRestrictUpdate=!1,this.contentTargetValue=null,this.contentEvent=null,this.contentAnimation=null,this.beforeCloseAnimation=null,this.isPopupHidden=!0,this.element=t,this.ctrlId=this.element.id,this.properties=i,this.dotnetRef=e,this.element.blazor__instance=this,this.element.eventList=n}return t.prototype.getTriggerList=function(t){return"Auto"===t&&(t=te.isDevice?"Hover":"Hover Focus"),t.split(" ")},t.prototype.formatPosition=function(){var t,e;0===this.properties.position.indexOf("Top")||0===this.properties.position.indexOf("Bottom")?(t=this.properties.position.split(/(?=[A-Z])/),this.tooltipPositionY=t[0],this.tooltipPositionX=t[1]):(e=this.properties.position.split(/(?=[A-Z])/),this.tooltipPositionX=e[0],this.tooltipPositionY=e[1])},t.prototype.wireEvents=function(t){for(var e=0,i=this.getTriggerList(t);e<i.length;e++){var n=i[e];if("Custom"===n)return;"Focus"===n&&this.wireFocusEvents(),"Click"===n&&ee.add(this.element,te.touchStartEvent,this.targetClick,this),"Hover"===n&&(te.isDevice?(this.touchModule=new kn(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),ee.add(this.element,te.touchEndEvent,this.touchEndHandler,this)):(ee.add(this.element,"mouseover",this.targetHover,this),this.properties.isSticky||ee.add(this.element,"mouseleave",this.onMouseOut,this)))}ee.add(document,"touchend",this.touchEnd,this),ee.add(document,"scroll wheel",this.scrollHandler,this),ee.add(document,"keydown",this.keyDown,this),window.addEventListener("resize",this.onWindowResize.bind(this))},t.prototype.onWindowResize=function(){this.isHidden()||this.reposition(this.findTarget())},t.prototype.wireFocusEvents=function(){if(F(this.properties.target))ee.add(this.element,"focus",this.targetHover,this);else for(var t=0,e=[].slice.call(this.element.querySelectorAll(this.properties.target));t<e.length;t++){var i=e[t];ee.add(i,"focus",this.targetHover,this)}},t.prototype.wireMouseEvents=function(t,e){this.tooltipEle&&(this.properties.isSticky||"focus"===t.type&&ee.add(e,"blur",this.onMouseOut,this),this.properties.mouseTrail&&ee.add(e,"mousemove touchstart mouseenter",this.onMouseMove,this))},t.prototype.unwireEvents=function(t){for(var e=0,i=this.getTriggerList(t);e<i.length;e++){var n=i[e];if("Custom"===n)return;"Focus"===n&&this.unwireFocusEvents(),"Click"===n&&ee.remove(this.element,te.touchStartEvent,this.targetClick),"Hover"===n&&(te.isDevice?(this.touchModule&&this.touchModule.destroy(),ee.remove(this.element,te.touchEndEvent,this.touchEndHandler)):(ee.remove(this.element,"mouseover",this.targetHover),this.properties.isSticky||ee.remove(this.element,"mouseleave",this.onMouseOut)))}ee.remove(document,"touchend",this.touchEnd),ee.remove(document,"scroll wheel",this.scrollHandler),ee.remove(document,"keydown",this.keyDown),window.removeEventListener("resize",this.onWindowResize.bind(this))},t.prototype.unwireFocusEvents=function(){if(F(this.properties.target))ee.remove(this.element,"focus",this.targetHover);else for(var t=0,e=[].slice.call(this.element.querySelectorAll(this.properties.target));t<e.length;t++){var i=e[t];ee.remove(i,"focus",this.targetHover)}},t.prototype.unwireMouseEvents=function(t){if(!this.properties.isSticky)for(var e=0,i=this.getTriggerList(this.properties.opensOn);e<i.length;e++){"Focus"===i[e]&&ee.remove(t,"blur",this.onMouseOut)}this.properties.mouseTrail&&ee.remove(t,"mousemove touchstart mouseenter",this.onMouseMove)},t.prototype.findTarget=function(){return document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]")},t.prototype.addDescribedBy=function(t,e){var i=(fi(t,"aria-describedby",null)||"").split(/\s+/);i.indexOf(e)<0&&i.push(e),hi(t,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":e})},t.prototype.removeDescribedBy=function(t){var e=fi(t,"data-tooltip-id",null),i=(fi(t,"aria-describedby",null)||"").split(/\s+/),n=i.indexOf(e);-1!==n&&i.splice(n,1),t.removeAttribute("data-tooltip-id");var r=i.join(" ").trim();r?hi(t,{"aria-describedby":r}):t.removeAttribute("aria-describedby")},t.prototype.clear=function(){if(this.tooltipEle&&(ei([this.tooltipEle],"e-popup-close"),ti([this.tooltipEle],"e-popup-open")),this.isPopupHidden){if(this.popupObj&&this.popupObj.destroy(),this.tooltipEle){gi(this.tooltipEle,{display:"none"});var t=document.getElementById(this.ctrlId+"_content_placeholder");t&&t.appendChild(this.tooltipEle),this.dotnetRef.invokeMethodAsync("CreateTooltip",JSON.stringify(!1))}this.tooltipEle=null,this.popupObj=null}},t.prototype.tapHoldHandler=function(t){this.targetHover(t.originalEvent)},t.prototype.touchEndHandler=function(t){this.properties.isSticky||this.hideTooltip(this.properties.animation.close)},t.prototype.targetClick=function(t){var e=this.properties.target?pi(t.target,this.properties.target):this.element;F(e)||(null===fi(e,"data-tooltip-id",null)?this.targetHover(t):this.properties.isSticky||this.hideTooltip(this.properties.animation.close,t,e))},t.prototype.restoreElement=function(t){this.unwireMouseEvents(t),F(fi(t,"data-content",null))||(hi(t,{title:fi(t,"data-content",null)}),t.removeAttribute("data-content")),this.removeDescribedBy(t)},t.prototype.targetHover=function(t){var e=this.properties.target?pi(t.target,this.properties.target):this.element;if(!F(e)&&null===fi(e,"data-tooltip-id",null)){for(var i=0,n=[].slice.call(document.querySelectorAll("[data-tooltip-id= "+this.ctrlId+"_content]"));i<n.length;i++){var r=n[i];this.restoreElement(r)}this.showTooltip(e,this.properties.animation.open,t)}},t.prototype.isHidden=function(){return!this.tooltipEle||!this.tooltipEle.classList.contains("e-popup-open")},t.prototype.showTooltip=function(t,e,i){this.isContiniousOpen=!F(this.tooltipEle),this.tooltipEventArgs={type:i?i.type.toString():null,cancel:!1,target:this.getDomObject("target",t),event:i||null,element:this.getDomObject("tooltipElement",this.tooltipEle),isInteracted:!F(i),name:"beforeRender"},this.contentTargetValue=t,this.contentEvent=i,this.contentAnimation=e,this.isRestrictUpdate=this.element.eventList.beforeRender&&!this.isHidden(),this.element.eventList.beforeRender?this.triggerEvent("TriggerBeforeRenderEvent",this.tooltipEventArgs):this.beforeRenderCallBack(!1)},t.prototype.triggerEvent=function(t,e){this.dotnetRef.invokeMethodAsync(t,JSON.stringify(e))},t.prototype.beforeRenderCallBack=function(t){t?(this.isPopupHidden=!0,this.clear()):(this.isPopupHidden=!1,F(this.tooltipEle)?this.dotnetRef.invokeMethodAsync("CreateTooltip",JSON.stringify(!0)):this.isContiniousOpen&&!this.isRestrictUpdate?this.contentUpdated():this.isRestrictUpdate=!1)},t.prototype.checkCollision=function(t,e,i){var n={left:e,top:i,position:this.properties.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},r=Hr(this.tooltipEle,this.properties.target?this.element:null,e,i);return r.length>0&&(n.horizontal=r.indexOf("left")>=0?"Right":r.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=r.indexOf("top")>=0?"Bottom":r.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},t.prototype.collisionFlipFit=function(t,e,i){var n=this.checkCollision(t,e,i),r=n.position;if(this.tooltipPositionY!==n.vertical&&(r=0===this.properties.position.indexOf("Bottom")||0===this.properties.position.indexOf("Top")?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(0===r.indexOf("Left")&&(n.vertical="LeftTop"===r||"LeftCenter"===r?"Top":"Bottom",r=n.vertical+"Left"),0===r.indexOf("Right")&&(n.vertical="RightTop"===r||"RightCenter"===r?"Top":"Bottom",r=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:this.getDomObject("target",t),event:null,isInteracted:!1,element:this.getDomObject("tooltipElement",this.tooltipEle),collidedPosition:r,name:"beforeCollision"},this.isRestrictUpdate=this.element.eventList.beforeCollision&&!this.isHidden(),this.element.eventList.beforeCollision&&this.triggerEvent("TriggerBeforeCollisionEvent",this.tooltipEventArgs),n.position!==r){var o=Lr(t,n.horizontal,n.vertical);this.adjustArrow(t,r,n.horizontal,n.vertical);var s=this.calculateTooltipOffset(r);s.top-=-1!=="TopBottom".indexOf(this.properties.position.split(/(?=[A-Z])/)[0])&&-1!=="TopBottom".indexOf(r.split(/(?=[A-Z])/)[0])?2*this.properties.offsetY:0,s.left-=-1!=="RightLeft".indexOf(this.properties.position.split(/(?=[A-Z])/)[0])&&-1!=="RightLeft".indexOf(r.split(/(?=[A-Z])/)[0])?2*this.properties.offsetX:0,n.position=r,n.left=o.left+s.left,n.top=o.top+s.top}else this.adjustArrow(t,r,n.horizontal,n.vertical);var a={left:n.left,top:n.top},l=Nr(this.tooltipEle,this.properties.target?this.element:null,{X:!0,Y:!1},a).left;if(gi(this.tooltipEle,{display:"block"}),this.properties.showTipPointer&&(0===r.indexOf("Bottom")||0===r.indexOf("Top"))){var h=this.tooltipEle.querySelector(".e-arrow-tip"),c=parseInt(h.style.left,10)-(l-n.left);c<0?c=0:c+h.offsetWidth>this.tooltipEle.clientWidth&&(c=this.tooltipEle.clientWidth-h.offsetWidth),gi(h,{left:c.toString()+"px"})}return gi(this.tooltipEle,{display:""}),a.left=l,a},t.prototype.hideTooltip=function(t,e,i){var n;n=e?this.properties.target?i||e.target:this.element:document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]"),this.tooltipEventArgs={type:e?e.type.toString():null,cancel:!1,target:this.getDomObject("target",n),event:e||null,element:this.getDomObject("tooltipElement",this.tooltipEle),isInteracted:!F(e),name:"beforeClose",collidedPosition:null},this.beforeCloseTarget=n,this.beforeCloseAnimation=t,this.isRestrictUpdate=this.element.eventList.beforeClose&&!this.isHidden(),this.element.eventList.beforeClose?this.triggerEvent("TriggerBeforeCloseEvent",this.tooltipEventArgs):this.beforeCloseCallBack(!1)},t.prototype.beforeCloseCallBack=function(t){t?this.isPopupHidden=!1:this.popupHide(this.beforeCloseAnimation,this.beforeCloseTarget)},t.prototype.popupHide=function(t,e){var i=this;e&&this.restoreElement(e),this.isPopupHidden=!0;var n={name:t.effect,duration:t.duration,delay:t.delay,timingFunction:"easeIn"};if("None"===t.effect&&(n=void 0),this.properties.closeDelay>0){setTimeout(function(){i.popupObj&&i.popupObj.hide(n)},this.properties.closeDelay)}else this.popupObj&&this.popupObj.hide(n)},t.prototype.calculateTooltipOffset=function(t){var e={top:0,left:0},i=this.tooltipEle.offsetWidth,n=this.tooltipEle.offsetHeight,r=this.tooltipEle.querySelector(".e-arrow-tip"),o=r?r.offsetWidth:0,s=r?r.offsetHeight:0,a=this.properties.showTipPointer?0:8,l=s/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),h=o/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.properties.mouseTrail&&(a+=2),t){case"RightTop":e.left+=o+a,e.top-=n-l;break;case"RightCenter":e.left+=o+a,e.top-=n/2;break;case"RightBottom":e.left+=o+a,e.top-=l;break;case"BottomRight":e.top+=s+a,e.left-=h;break;case"BottomCenter":e.top+=s+a,e.left-=i/2;break;case"BottomLeft":e.top+=s+a,e.left-=i-h;break;case"LeftBottom":e.left-=o+i+a,e.top-=l;break;case"LeftCenter":e.left-=o+i+a,e.top-=n/2;break;case"LeftTop":e.left-=o+i+a,e.top-=n-l;break;case"TopLeft":e.top-=n+s+a,e.left-=i-h;break;case"TopRight":e.top-=n+s+a,e.left-=h;break;default:e.top-=n+s+a,e.left-=i/2}return e.left+=this.properties.offsetX,e.top+=this.properties.offsetY,e},t.prototype.setTipClass=function(t){0===t.indexOf("Right")?this.tipClass="e-tip-left":0===t.indexOf("Bottom")?this.tipClass="e-tip-top":0===t.indexOf("Left")?this.tipClass="e-tip-right":this.tipClass=Rd},t.prototype.updateTipPosition=function(t){var e=this.tooltipEle.querySelectorAll(".e-arrow-tip,.e-arrow-tip-outer,.e-arrow-tip-inner");ei(e,[Rd,"e-tip-top","e-tip-left","e-tip-right"]),this.setTipClass(t),ti(e,this.tipClass)},t.prototype.adjustArrow=function(t,e,i,n){if(!1!==this.properties.showTipPointer){var r,o;this.updateTipPosition(e),gi(this.tooltipEle,{display:"block"});var s,a=this.tooltipEle.clientWidth,l=this.tooltipEle.clientHeight,h=this.tooltipEle.querySelector(".e-arrow-tip"),c=this.tooltipEle.querySelector(".e-arrow-tip-inner"),d=h.offsetWidth,p=h.offsetHeight;if(gi(this.tooltipEle,{display:""}),this.tipClass===Rd||"e-tip-top"===this.tipClass){if(this.tipClass===Rd?(o="99.9%",gi(c,{top:"-"+(p-2)+"px"})):(o=-(p-1)+"px",gi(c,{top:"-"+(p-6)+"px"})),t)r=(s="Center"!==i||a>t.offsetWidth||this.properties.mouseTrail)&&"Left"===i||!s&&"End"===this.properties.tipPointerPosition?a-d-2+"px":s&&"Right"===i||!s&&"Start"===this.properties.tipPointerPosition?"2px":a/2-d/2+"px"}else"e-tip-right"===this.tipClass?(r="99.9%",gi(c,{left:"-"+(d-2)+"px"})):(r=-(d-1)+"px",gi(c,{left:d-2-d+"px"})),o=(s="Center"!==n||l>t.offsetHeight||this.properties.mouseTrail)&&"Top"===n||!s&&"End"===this.properties.tipPointerPosition?l-p-2+"px":s&&"Bottom"===n||!s&&"Start"===this.properties.tipPointerPosition?"2px":l/2-p/2+"px";gi(h,{top:o,left:r})}},t.prototype.onMouseOut=function(t){var e=t.relatedTarget;if(e&&!this.properties.mouseTrail){var i=pi(e,".e-tooltip-wrap.e-lib.e-popup");i?(ee.add(i,"mouseleave",this.tooltipElementMouseOut,this),this.unwireMouseEvents(t.target)):(this.hideTooltip(this.properties.animation.close,t,this.findTarget()),0===this.properties.closeDelay&&this.clear())}else this.hideTooltip(this.properties.animation.close,t,this.findTarget()),this.clear()},t.prototype.tooltipElementMouseOut=function(t){this.hideTooltip(this.properties.animation.close,t,this.findTarget()),ee.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},t.prototype.onMouseMove=function(t){var e=0,i=0;t.type.indexOf("touch")>-1?(t.preventDefault(),e=t.touches[0].pageX,i=t.touches[0].pageY):(e=t.pageX,i=t.pageY),Ji.stop(this.tooltipEle),ei([this.tooltipEle],"e-popup-close"),ti([this.tooltipEle],"e-popup-open"),this.adjustArrow(t.target,this.properties.position,this.tooltipPositionX,this.tooltipPositionY);var n=this.calculateTooltipOffset(this.properties.position),r=e+n.left+this.properties.offsetX,o=i+n.top+this.properties.offsetY,s=this.checkCollision(t.target,r,o);if(this.tooltipPositionX!==s.horizontal||this.tooltipPositionY!==s.vertical){var a=0===this.properties.position.indexOf("Bottom")||0===this.properties.position.indexOf("Top")?s.vertical+s.horizontal:s.horizontal+s.vertical;s.position=a,this.adjustArrow(t.target,s.position,s.horizontal,s.vertical);var l=this.calculateTooltipOffset(s.position);s.left=e+l.left-this.properties.offsetX,s.top=i+l.top-this.properties.offsetY}gi(this.tooltipEle,{left:s.left+"px",top:s.top+"px"})},t.prototype.keyDown=function(t){this.tooltipEle&&27===t.keyCode&&this.hideTooltip(this.properties.animation.close)},t.prototype.touchEnd=function(t){this.tooltipEle&&null===pi(t.target,".e-tooltip")&&this.hideTooltip(this.properties.animation.close)},t.prototype.scrollHandler=function(t){this.tooltipEle&&(pi(t.target,".e-tooltip-wrap.e-lib.e-popup")||this.hideTooltip(this.properties.animation.close))},t.prototype.renderContent=function(t){(t&&!F(fi(t,"title",null))&&(hi(t,{"data-content":fi(t,"title",null)}),t.removeAttribute("title")),this.properties.content)||(this.tooltipEle.querySelector(".e-tip-content").innerText=t.getAttribute("data-content"))},t.prototype.setHeigthWidth=function(t,e,i){this.tooltipEle&&gi(this.tooltipEle,{height:e,width:t}),i&&"auto"!==this.tooltipEle.style.width&&(this.tooltipEle.style.maxWidth=t)},t.prototype.contentUpdated=function(){if(F(this.tooltipEle)){if(this.ctrlId=this.element.id,this.tooltipEle=document.querySelector("#"+this.ctrlId+"_content"),this.tooltipEle&&(gi(this.tooltipEle,{position:"absolute"}),this.setHeigthWidth(J(this.properties.width),J(this.properties.height),this.contentTargetValue),this.contentTargetValue)){te.isDevice&&ti([this.tooltipEle],"e-bigger"),document.body.appendChild(this.tooltipEle),ei([this.tooltipEle],"e-hidden"),this.addDescribedBy(this.contentTargetValue,this.ctrlId+"_content"),this.renderContent(this.contentTargetValue),ti([this.tooltipEle],"e-popup-open"),this.renderPopup(this.contentTargetValue);var t=this.properties.position;this.adjustArrow(this.contentTargetValue,t,this.tooltipPositionX,this.tooltipPositionY),Ji.stop(this.tooltipEle),this.reposition(this.contentTargetValue),this.afterContentRender()}}else{if(!this.isContiniousOpen||this.isRestrictUpdate)return;if(ti([this.tooltipEle],"e-popup-open"),document.body.appendChild(this.tooltipEle),this.contentTargetValue){this.renderPopup(this.contentTargetValue);t=this.properties.position;this.adjustArrow(this.contentTargetValue,t,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(this.contentTargetValue,this.ctrlId+"_content"),this.renderContent(this.contentTargetValue),Ji.stop(this.tooltipEle),this.reposition(this.contentTargetValue),this.afterContentRender()}}},t.prototype.afterContentRender=function(){ei([this.tooltipEle],"e-popup-open"),ti([this.tooltipEle],"e-popup-close"),this.tooltipEventArgs={type:this.contentEvent?this.contentEvent.type.toString():null,isInteracted:!F(this.contentEvent),target:this.getDomObject("target",this.contentTargetValue),name:"beforeOpen",cancel:!1,event:this.contentEvent?this.contentEvent:null,element:this.getDomObject("tooltipElement",this.tooltipEle)},this.isRestrictUpdate=this.element.eventList.beforeOpen&&!this.isHidden(),this.element.eventList.beforeOpen?this.triggerEvent("TriggerBeforeOpenEvent",this.tooltipEventArgs):this.beforeOpenCallBack(!1)},t.prototype.beforeOpenCallBack=function(t){var e=this;if(t)this.isPopupHidden=!0,this.clear(),this.restoreElement(this.contentTargetValue);else{var i={name:this.contentAnimation.effect,duration:this.contentAnimation.duration,delay:this.contentAnimation.delay,timingFunction:"easeOut"};if("None"===this.contentAnimation.effect&&(i=void 0),this.properties.openDelay>0){setTimeout(function(){e.popupObj&&e.popupObj.show(i,e.contentTargetValue)},this.properties.openDelay)}else this.popupObj&&this.popupObj.show(i,this.contentTargetValue)}this.contentEvent&&this.wireMouseEvents(this.contentEvent,this.contentTargetValue),this.contentTargetValue=this.contentEvent=this.contentAnimation=null},t.prototype.reposition=function(t){if(this.tooltipEle){var e=this.getTooltipPosition(t);this.popupObj.position={X:e.left,Y:e.top},this.popupObj.dataBind()}},t.prototype.renderPopup=function(t){var e=this.properties.mouseTrail?{top:0,left:0}:this.getTooltipPosition(t);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new ho(this.tooltipEle,{height:this.properties.height,width:this.properties.width,position:{X:e.left,Y:e.top},enableRtl:this.properties.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},t.prototype.openPopupHandler=function(){this.properties.mouseTrail||this.reposition(this.findTarget()),this.tooltipEventArgs.name="Opened",this.isRestrictUpdate=this.element.eventList.opened&&!this.isHidden(),this.element.eventList.opened&&this.triggerEvent("TriggerOpenedEvent",this.tooltipEventArgs)},t.prototype.closePopupHandler=function(){this.clear(),this.tooltipEventArgs.name="Closed",this.isRestrictUpdate=this.element.eventList.closed&&!this.isHidden(),this.element.eventList.closed&&this.triggerEvent("TriggerClosedEvent",this.tooltipEventArgs)},t.prototype.getTooltipPosition=function(t){gi(this.tooltipEle,{display:"block"});var e=Lr(t,this.tooltipPositionX,this.tooltipPositionY),i=this.calculateTooltipOffset(this.properties.position),n=this.collisionFlipFit(t,e.left+i.left,e.top+i.top);return gi(this.tooltipEle,{display:""}),n},t.prototype.getDomObject=function(t,e){return e?window.sfBlazor.getDomObject(t,e):null},t.prototype.destroy=function(){if(this.tooltipEle){var t=document.querySelector("#"+this.ctrlId+"_content_placeholder");t&&t.appendChild(this.tooltipEle)}this.popupObj&&this.popupObj.destroy(),ei([this.element],"e-tooltip"),this.unwireEvents(this.properties.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null},t}(),jd={wireEvents:function(t,e,i,n){this.updateAnimation(i.animation),new zd(t,e,i,n),t.blazor__instance.formatPosition(),t.blazor__instance.wireEvents(i.opensOn),window.sfBlazor.renderComplete(t)},contentUpdated:function(t){t.blazor__instance.contentUpdated()},updateAnimation:function(t){t.open.duration=t.open.duration?t.open.duration:void 0,t.close.duration=t.close.duration?t.close.duration:void 0},beforeRenderCallBack:function(t,e){t.blazor__instance.beforeRenderCallBack(e)},beforeOpenCallBack:function(t,e){t.blazor__instance.beforeOpenCallBack(e)},beforeCloseCallBack:function(t,e){t.blazor__instance.beforeCloseCallBack(e)},showTooltip:function(t,e,i,n){null!==n&&""!==n&&t.blazor__instance.element.querySelector(n)&&(e=t.blazor__instance.element.querySelector(n)),t.blazor__instance.showTooltip(e,i,null)},hideTooltip:function(t,e){t.blazor__instance.hideTooltip(e)},destroy:function(t){t.blazor__instance.destroy()},refreshPosition:function(t,e,i){var n=t.blazor__instance;null===e&&(e=null!==i&&""!==i?n.element.querySelector(i):n.element),n.reposition(e)},updateProperties:function(t,e,i){var n=t.blazor__instance,r=t.blazor__instance.properties;if(n.isRestrictUpdate=!0,i.animation&&this.updateAnimation(i.animation),this.updateAnimation(e.animation),i.opensOn||!F(i.isSticky))n.unwireEvents(n.properties.opensOn),n.properties=e,n.wireEvents(n.properties.opensOn);else{var o=n.findTarget();if(i.height||i.width?n.setHeigthWidth(J(i.width),J(i.height),o):i.position?n.isPositionUpdate=!0:i.offsetX?n.isOffsetXUpdate=!0:i.offsetX&&(n.isOffsetYUpdate=!0),n.tooltipEle){if(n.isPositionUpdate){var s=n.tooltipEle.querySelector(".e-arrow-tip-inner"),a=n.tooltipEle.querySelector(".e-arrow-tip");ei([a],[n.tipClass]),n.properties=e,n.formatPosition(),n.setTipClass(i.position),ti([a],[n.tipClass]),gi(s,{top:null,left:null})}if(n.isOffsetXUpdate){var l=parseInt(n.tooltipEle.style.left,10)+(i.offsetX-r.offsetX);gi(n.tooltipEle,{left:l.toString()+"px"})}if(n.isOffsetYUpdate){l=parseInt(n.tooltipEle.style.top,10)+(i.offsetY-r.offsetY);gi(n.tooltipEle,{top:l.toString()+"px"})}n.properties=e,n.reposition(o)}else n.properties=e,n.isPositionUpdate&&n.formatPosition();n.isOffsetYUpdate=!1,n.isOffsetXUpdate=!1,n.isPositionUpdate=!1,n.isRestrictUpdate=!1}}},Nd={},Hd={},_d={};Object(I.copy)(Nd,jd),Object(I.copy)(Hd,n),Object(I.copy)(_d,c);var Vd={},Fd={};Object(I.copy)(Vd,g),Object(I.copy)(Fd,n);var Wd=function(){function t(t,e){this.width=t,this.height=e}return t.prototype.isEmpty=function(){return 0===this.height&&0===this.width},t.prototype.clone=function(){return new t(this.width,this.height)},t}(),Ud=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Gd=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},qd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ud(e,t),e.equals=function(t,e){return t===e||!(!t||!e)&&(!t||!e||t.x===e.x&&t.y===e.y)},e.isEmptyPoint=function(t){return!t.x||!t.y},e.transform=function(t,e,i){var n={x:0,y:0};return n.x=Math.round(100*(t.x+i*Math.cos(e*Math.PI/180)))/100,n.y=Math.round(100*(t.y+i*Math.sin(e*Math.PI/180)))/100,n},e.findLength=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},e.findAngle=function(t,e){var i=Math.atan2(e.y-t.y,e.x-t.x);return i=180*i/Math.PI,(i%=360)<0&&(i+=360),i},e.distancePoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},e.getLengthFromListOfPoints=function(t){for(var e=0,i=0;i<t.length-1;i++)e+=this.distancePoints(t[i],t[i+1]);return e},e.adjustPoint=function(t,e,i,n){var r,o=i?{x:t.x,y:t.y}:{x:e.x,y:e.y};return t.x===e.x?t.y<e.y&&i||t.y>e.y&&!i?o.y+=n:o.y-=n:t.y===e.y?t.x<e.x&&i||t.x>e.x&&!i?o.x+=n:o.x-=n:i?(r=this.findAngle(t,e),o=this.transform(t,r,n)):(r=this.findAngle(e,t),o=this.transform(e,r,n)),o},e.direction=function(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?t.x<e.x?"Right":"Left":t.y<e.y?"Bottom":"Top"},e.prototype.getClassName=function(){return"Point"},Gd([Hi(0)],e.prototype,"x",void 0),Gd([Hi(0)],e.prototype,"y",void 0),e}(ln);function Xd(t){var e,i=[],n=function(t){var e=/([a-z]+)|([+-]?(?:\d+\.?\d*|\.\d+))/gi,i=[],n=[],r={};e.lastIndex=0;var o=!1;r=e.exec(t);for(;r;){if("e"===r[1]){o=!0}else r[1]?("zm"===r[1].toLowerCase()?(i.length&&n.push(i),n.push(["Z"]),i=[r[1].substring(1,2)]):(i.length&&n.push(i),i=[r[1]]),o=!1):(i.length||(i=[]),o||i.push(Number(r[2])),o=!1);r=e.exec(t)}i.length&&n.push(i);return n}(t);if(n.length>0)for(var r=0;r<n.length;r++){var o=n[r],s="";switch((s=o[0]).toLowerCase()){case"m":for(e=1;e<o.length;e++)i.push({command:s,x:o[e],y:o[e+1]}),e+=1,"m"===s?s="l":"M"===s&&(s="L");break;case"l":case"t":for(e=1;e<o.length;e++)i.push({command:s,x:o[e],y:o[e+1]}),e+=1;break;case"h":for(e=1;e<o.length;e++)i.push({command:s,x:o[e]});break;case"v":for(e=1;e<o.length;e++)i.push({command:s,y:o[e]});break;case"z":i.push({command:s});break;case"c":for(e=1;e<o.length;e++)i.push({command:s,x1:o[e],y1:o[e+1],x2:o[e+2],y2:o[e+3],x:o[e+4],y:o[e+5]}),e+=5;break;case"s":for(e=1;e<o.length;e++)i.push({command:s,x2:o[e],y2:o[e+1],x:o[e+2],y:o[e+3]}),e+=3;break;case"q":for(e=1;e<o.length;e++)i.push({command:s,x1:o[e],y1:o[e+1],x:o[e+2],y:o[e+3]}),e+=3;break;case"a":for(e=1;e<o.length;e++)i.push({command:s,r1:o[e],r2:o[e+1],angle:o[e+2],largeArc:o[e+3],sweep:o[e+4],x:o[e+5],y:o[e+6]}),e+=6}}return i}function Yd(t){var e,i,n="";for(n="M"+t[0].x+" "+t[0].y,i=1;i<t.length;i++)n+="L"+(e=t[i]).x+" "+e.y;return n+="Z"}function Zd(t){var e,i,n,r,o,s,a,l,h,c,d=[];for(a=0,l=0,c=0,h=t.length;c<h;++c){var p,u=t[c];p=u.command,"y1"in u&&(r=u.y1),"y2"in u&&(s=u.y2),"x1"in u&&(n=u.x1),"x2"in u&&(o=u.x2),"x"in u&&(a=u.x),"y"in u&&(l=u.y);var f=d[d.length-1];switch(p){case"M":d.push({command:"M",x:a,y:l});break;case"L":d.push({command:"L",x0:e,y0:i,x:a,y:l});break;case"H":d.push({command:"L",x0:e,y0:i,x:a,y:i});break;case"V":d.push({command:"L",x0:e,y0:i,x:e,y:l});break;case"C":d.push({command:"C",x0:e,y0:i,x1:n,y1:r,x2:o,y2:s,x:a,y:l});break;case"S":if(f){var g=void 0,m={x:2*e-(g="C"===f.command||"S"===f.command?{x:f.x2,y:f.y2}:{x:e,y:i}).x,y:2*i-g.y};d.push({command:"C",x0:e,y0:i,x1:m.x,y1:m.y,x2:o,y2:s,x:a,y:l})}break;case"Q":d.push({command:"Q",x0:e,y0:i,x1:n,y1:r,x:a,y:l});break;case"T":if(f){g=void 0,m={x:2*e-(g="Q"===f.command?{x:f.x1,y:f.y1}:{x:e,y:i}).x,y:2*i-g.y};d.push({command:"Q",x0:e,y0:i,x1:m.x,y1:m.y,x:a,y:l})}break;case"A":var y=u;y.command="A",d.push(y);break;case"Z":case"z":d.push({command:"Z"}),a=e,l=i}"M"!==p&&"m"!==p||(a,l),e=a,i=l}return d}function Kd(t,e,i,n,r,o,s,a){var l,h,c,d,p,u,f,g,m;for(p=0,u=0,g=0,f=t.length;g<f;++g){var y=t[g],v=y.command;"x"in y&&(p=y.x),"y"in y&&(u=y.y),"y1"in y&&(h=y.y1),"y2"in y&&(d=y.y2),"x1"in y&&(l=y.x1),"x2"in y&&(c=y.x2),n?(void 0!==p&&(p=Qd(p,e,r,s)),void 0!==u&&(u=Qd(u,i,o,a)),void 0!==l&&(l=Qd(l,e,r,s)),void 0!==h&&(h=Qd(h,i,o,a)),void 0!==c&&(c=Qd(c,e,r,s)),void 0!==d&&(d=Qd(d,i,o,a))):(void 0!==p&&(p=Number((p+e).toFixed(2))),void 0!==u&&(u=Number((u+i).toFixed(2))),void 0!==l&&(l=Number((l+e).toFixed(2))),void 0!==h&&(h=Number((h+i).toFixed(2))),void 0!==c&&(c=Number((c+e).toFixed(2))),void 0!==d&&(d=Number((d+i).toFixed(2)))),(m=Jd(y,v,{x:p,y:u,x1:l,y1:h,x2:c,y2:d,r1:y.r1,r2:y.r2},n,e,i))&&(t[g]=m),"M"!==v&&"m"!==v||(p,u)}return tp(t)}function Jd(t,e,i,n,r,o){switch(e){case"M":case"L":t.x=i.x,t.y=i.y;break;case"H":t.x=i.x;break;case"V":t.y=i.y;break;case"C":t.x=i.x,t.y=i.y,t.x1=i.x1,t.y1=i.y1,t.x2=i.x2,t.y2=i.y2;break;case"S":t.x=i.x,t.y=i.y,t.x2=i.x2,t.y2=i.y2;break;case"Q":t.x=i.x,t.y=i.y,t.x1=i.x1,t.y1=i.y1;break;case"T":t.x=i.x,t.y=i.y;break;case"A":var s=i.r1,a=i.r2;n&&(i.r1=s*=r,i.r2=a*=o),t.x=i.x,t.y=i.y,t.r1=i.r1,t.r2=i.r2;break;case"z":case"Z":t={command:"Z"}}return t}function Qd(t,e,i,n){return t!==i?t=n!==i?t*e-(Number(i)*e-Number(i))+(n-Number(i)):Number(t)*e-(Number(i)*e-Number(i)):n!==i&&(t=n),Number(t.toFixed(2))}function $d(t){var e,i,n,r,o,s,a,l,h,c;for(a=0,l=0,c=0,h=t.length;c<h;++c){var d=t[c],p=d.command;if(/[MLHVCSQTA]/.test(p))"x"in d&&(d.x=a=d.x),"y"in d&&(d.y=l=d.y);else{"x1"in d&&(d.x1=n=a+d.x1),"x2"in d&&(d.x2=o=a+d.x2),"y1"in d&&(d.y1=r=l+d.y1),"y2"in d&&(d.y2=s=l+d.y2),"x"in d&&(d.x=a+=d.x),"y"in d&&(d.y=l+=d.y);var u=void 0;switch(p){case"m":case"M":u={command:"M",x:a,y:l};break;case"l":case"L":u={command:"L",x:a,y:l};break;case"h":case"H":u={command:"H",x:a};break;case"v":case"V":u={command:"V",y:l};break;case"c":case"C":u={command:"C",x:a,y:l,x1:n,y1:r,x2:o,y2:s};break;case"s":case"S":u={command:"S",x:a,y:l,x2:o,y2:s};break;case"q":case"Q":u={command:"Q",x:a,y:l,x1:n,y1:r};break;case"t":case"T":u={command:"T",x:a,y:l};break;case"a":case"A":(u={command:"A",x:a,y:l}).r1=d.r1,u.r2=d.r2,u.angle=d.angle,u.largeArc=d.largeArc,u.sweep=d.sweep;break;case"z":case"Z":u={command:"Z"},a=e,l=i,u=t[c]}u&&(t[c]=u)}"M"!==p&&"m"!==p||(e=a,i=l)}return t}function tp(t){var e,i="";for(e=0;e<t.length;e++)i+=0===e?ep(t[e]):" "+ep(t[e]);return i}function ep(t){var e="";switch(t.command){case"Z":case"z":e=t.command;break;case"M":case"m":case"L":case"l":e=t.command+" "+t.x+" "+t.y;break;case"C":case"c":e=t.command+" "+t.x1+" "+t.y1+" "+t.x2+" "+t.y2+" "+t.x+" "+t.y;break;case"Q":case"q":e=t.command+" "+t.x1+" "+t.y1+" "+t.x+" "+t.y;break;case"A":case"a":var i=t.command,n=t.angle,r=t.largeArc?"1":"0",o=t.sweep?"1":"0";e=i+" "+t.r1+" "+t.r2+" "+n+" "+r+" "+o+" "+t.x+" "+t.y;break;case"H":case"h":e=t.command+" "+t.x;break;case"V":case"v":e=t.command+" "+t.y;break;case"S":case"s":e=t.command+" "+t.x2+" "+t.y2+" "+t.x+" "+t.y;break;case"T":case"t":e=t.command+" "+t.x+" "+t.y}return e}var ip,np=function(){function t(t,e,i,n){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===t||void 0===e?(t=e=Number.MAX_VALUE,i=n=0):(void 0===i&&(i=0),void 0===n&&(n=0)),this.x=t,this.y=e,this.width=i,this.height=n}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return{x:this.left,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return{x:this.right,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return{x:this.left,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return{x:this.right,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"middleLeft",{get:function(){return{x:this.left,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"middleRight",{get:function(){return{x:this.right,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topCenter",{get:function(){return{x:this.x+this.width/2,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomCenter",{get:function(){return{x:this.x+this.width/2,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),t.prototype.equals=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},t.prototype.uniteRect=function(t){var e=Math.max(Number.NaN===this.right||this.x===Number.MAX_VALUE?t.right:this.right,t.right),i=Math.max(Number.NaN===this.bottom||this.y===Number.MAX_VALUE?t.bottom:this.bottom,t.bottom);return this.x=Math.min(this.left,t.left),this.y=Math.min(this.top,t.top),this.width=e-this.x,this.height=i-this.y,this},t.prototype.unitePoint=function(t){if(this.x===Number.MAX_VALUE)return this.x=t.x,void(this.y=t.y);var e=Math.min(this.left,t.x),i=Math.min(this.top,t.y),n=Math.max(this.right,t.x),r=Math.max(this.bottom,t.y);this.x=e,this.y=i,this.width=n-this.x,this.height=r-this.y},t.prototype.Inflate=function(t){return this.x-=t,this.y-=t,this.width+=2*t,this.height+=2*t,this},t.prototype.intersects=function(t){return!(this.right<t.left||this.left>t.right||this.top>t.bottom||this.bottom<t.top)},t.prototype.containsRect=function(t){return this.left<=t.left&&this.right>=t.right&&this.top<=t.top&&this.bottom>=t.bottom},t.prototype.containsPoint=function(t,e){return void 0===e&&(e=0),this.left-e<=t.x&&this.right+e>=t.x&&this.top-e<=t.y&&this.bottom+e>=t.y},t.toBounds=function(e){for(var i=new t,n=0,r=e;n<r.length;n++){var o=r[n];i.unitePoint(o)}return i},t.empty=new t(Number.MAX_VALUE,Number.MIN_VALUE,0,0),t}();!function(t){t[t.Identity=0]="Identity",t[t.Translation=1]="Translation",t[t.Scaling=2]="Scaling",t[t.Unknown=4]="Unknown"}(ip||(ip={}));var rp=function(){return function(t,e,i,n,r,o,s){this.m11=t,this.m12=e,this.m21=i,this.m22=n,this.offsetX=r,this.offsetY=o,this.type=s}}();function op(){return new rp(1,0,0,1,0,0,ip.Identity)}function sp(t,e){var i=function(t,e,i){switch(t.type){case ip.Identity:break;case ip.Translation:e+=t.offsetX,i+=t.offsetY;break;case ip.Scaling:e*=t.m11,i*=t.m22;break;case ip.Translation|ip.Scaling:e*=t.m11,e+=t.offsetX,i*=t.m22,i+=t.offsetY;break;default:var n=i*t.m21+t.offsetX,r=e*t.m12+t.offsetY;e*=t.m11,e+=n,i*=t.m22,i+=r}return{x:e,y:i}}(t,e.x,e.y);return{x:Math.round(100*i.x)/100,y:Math.round(100*i.y)/100}}function ap(t,e,i,n){cp(t,function(t,e,i){var n=op(),r=Math.sin(t),o=Math.cos(t),s=e*(1-o)+i*r,a=i*(1-o)-e*r;return n.type=ip.Unknown,dp(n,o,r,-r,o,s,a),n}(.017453292519943295*(e%=360),i||0,n||0))}function lp(t,e,i,n,r){void 0===n&&(n=0),void 0===r&&(r=0),cp(t,function(t,e,i,n){var r=op();return r.type=i||n?ip.Scaling|ip.Translation:ip.Scaling,dp(r,t,0,0,e,i-t*i,n-e*n),r}(e,i,n,r))}function hp(t,e,i){return t.type&ip.Identity?(t.type=ip.Translation,void dp(t,1,0,0,1,e,i)):t.type&ip.Unknown?(t.offsetX+=e,void(t.offsetY+=i)):(t.offsetX+=e,t.offsetY+=i,void(t.type|=ip.Translation))}function cp(t,e){var i=t.type,n=e.type;if(n!==ip.Identity){if(i===ip.Identity)return pp(t,e),void(t.type=e.type);if(n===ip.Translation)return t.offsetX+=e.offsetX,t.offsetY+=e.offsetY,void(i!==ip.Unknown&&(t.type|=ip.Translation));if(i!==ip.Translation){var r=i<<4|n;switch(r){case 34:return t.m11*=e.m11,void(t.m22*=e.m22);case 35:return t.m11*=e.m11,t.m22*=e.m22,t.offsetX=e.offsetX,t.offsetY=e.offsetY,void(t.type=ip.Translation|ip.Scaling);case 36:break;default:switch(r){case 50:return t.m11*=e.m11,t.m22*=e.m22,t.offsetX*=e.m11,void(t.offsetY*=e.m22);case 51:return t.m11*=e.m11,t.m22*=e.m22,t.offsetX=e.m11*t.offsetX+e.offsetX,void(t.offsetY=e.m22*t.offsetY+e.offsetY);case 52:break;default:switch(r){case 66:case 67:case 68:break;default:return}}}var o=op();return dp(o,t.m11*e.m11+t.m12*e.m21,t.m11*e.m12+t.m12*e.m22,t.m21*e.m11+t.m22*e.m21,t.m21*e.m12+t.m22*e.m22,t.offsetX*e.m11+t.offsetY*e.m21+e.offsetX,t.offsetX*e.m12+t.offsetY*e.m22+e.offsetY),o.m21||o.m12?o.type=ip.Unknown:((o.m11&&1!==o.m11||o.m22&&1!==o.m22)&&(o.type=ip.Scaling),(o.offsetX||o.offsetY)&&(o.type|=ip.Translation),(o.type&(ip.Translation|ip.Scaling))===ip.Identity&&(o.type=ip.Identity),o.type=ip.Scaling|ip.Translation),pp(t,o),void(t.type=o.type)}var s=t.offsetX,a=t.offsetY;t.offsetX=s*e.m11+a*e.m21+e.offsetX,t.offsetY=s*e.m12+a*e.m22+e.offsetY,n!==ip.Unknown?t.type=ip.Translation|ip.Scaling:t.type=ip.Unknown}}function dp(t,e,i,n,r,o,s){t.m11=e,t.m12=i,t.m21=n,t.m22=r,t.offsetX=o,t.offsetY=s}function pp(t,e){t.m11=e.m11,t.m12=e.m12,t.m21=e.m21,t.m22=e.m22,t.offsetX=e.offsetX,t.offsetY=e.offsetY,t.type=e.type}var up,fp,gp,mp,yp,vp,bp,wp,Sp,xp,Cp,Pp,Op,Ep,Lp,Ip,Tp,Ap,Bp,kp,Mp,Dp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Rp=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},zp=function(t){if(t){if($())return Fp;switch(t.type){case"Linear":return Wp;case"Radial":return Up;default:return Wp}}return Wp},jp=function(){return function(t,e,i,n){this.left=t,this.right=e,this.top=i,this.bottom=n}}(),Np=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dp(e,t),Rp([Hi(0)],e.prototype,"left",void 0),Rp([Hi(0)],e.prototype,"right",void 0),Rp([Hi(0)],e.prototype,"top",void 0),Rp([Hi(0)],e.prototype,"bottom",void 0),e}(ln),Hp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dp(e,t),Rp([Hi(45)],e.prototype,"angle",void 0),Rp([Hi(5)],e.prototype,"distance",void 0),Rp([Hi(.7)],e.prototype,"opacity",void 0),Rp([Hi("lightgrey")],e.prototype,"color",void 0),e}(ln),_p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dp(e,t),e.prototype.getClassName=function(){return"Stop"},Rp([Hi("")],e.prototype,"color",void 0),Rp([Hi(0)],e.prototype,"offset",void 0),Rp([Hi(1)],e.prototype,"opacity",void 0),e}(ln),Vp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dp(e,t),Rp([Fi([],_p)],e.prototype,"stops",void 0),Rp([Hi("None")],e.prototype,"type",void 0),Rp([Hi("")],e.prototype,"id",void 0),e}(ln),Fp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dp(e,t),Rp([Hi(0)],e.prototype,"x1",void 0),Rp([Hi(0)],e.prototype,"x2",void 0),Rp([Hi(0)],e.prototype,"y1",void 0),Rp([Hi(0)],e.prototype,"y2",void 0),Rp([Hi(0)],e.prototype,"cx",void 0),Rp([Hi(0)],e.prototype,"cy",void 0),Rp([Hi(0)],e.prototype,"fx",void 0),Rp([Hi(0)],e.prototype,"fy",void 0),Rp([Hi(50)],e.prototype,"r",void 0),e}(Vp),Wp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dp(e,t),Rp([Hi(0)],e.prototype,"x1",void 0),Rp([Hi(0)],e.prototype,"x2",void 0),Rp([Hi(0)],e.prototype,"y1",void 0),Rp([Hi(0)],e.prototype,"y2",void 0),e}(Vp),Up=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dp(e,t),Rp([Hi(0)],e.prototype,"cx",void 0),Rp([Hi(0)],e.prototype,"cy",void 0),Rp([Hi(0)],e.prototype,"fx",void 0),Rp([Hi(0)],e.prototype,"fy",void 0),Rp([Hi(50)],e.prototype,"r",void 0),e}(Vp),Gp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dp(e,t),Rp([Hi("white")],e.prototype,"fill",void 0),Rp([Hi("black")],e.prototype,"strokeColor",void 0),Rp([Hi("")],e.prototype,"strokeDashArray",void 0),Rp([Hi(1)],e.prototype,"strokeWidth",void 0),Rp([Hi(1)],e.prototype,"opacity",void 0),Rp([Vi(zp)],e.prototype,"gradient",void 0),e}(ln),qp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dp(e,t),Rp([Hi("transparent")],e.prototype,"fill",void 0),e}(Gp),Xp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dp(e,t),Rp([Hi("black")],e.prototype,"color",void 0),Rp([Hi("Arial")],e.prototype,"fontFamily",void 0),Rp([Hi(12)],e.prototype,"fontSize",void 0),Rp([Hi(!1)],e.prototype,"italic",void 0),Rp([Hi(!1)],e.prototype,"bold",void 0),Rp([Hi("CollapseSpace")],e.prototype,"whiteSpace",void 0),Rp([Hi("WrapWithOverflow")],e.prototype,"textWrapping",void 0),Rp([Hi("Center")],e.prototype,"textAlign",void 0),Rp([Hi("None")],e.prototype,"textDecoration",void 0),Rp([Hi("Wrap")],e.prototype,"textOverflow",void 0),Rp([Hi("transparent")],e.prototype,"fill",void 0),e}(Gp);!function(t){t[t.Default=0]="Default",t[t.expandNode=2]="expandNode",t[t.interaction=4]="interaction"}(up||(up={})),function(t){t[t.Visible=1]="Visible",t[t.Hidden=2]="Hidden",t[t.Hover=4]="Hover",t[t.Connect=8]="Connect"}(fp||(fp={})),function(t){t[t.None=0]="None",t[t.ShowHorizontalLines=1]="ShowHorizontalLines",t[t.ShowVerticalLines=2]="ShowVerticalLines",t[t.ShowLines=3]="ShowLines",t[t.SnapToHorizontalLines=4]="SnapToHorizontalLines",t[t.SnapToVerticalLines=8]="SnapToVerticalLines",t[t.SnapToLines=12]="SnapToLines",t[t.SnapToObject=16]="SnapToObject",t[t.All=31]="All"}(gp||(gp={})),function(t){t[t.None=1]="None",t[t.ConnectorSourceThumb=2]="ConnectorSourceThumb",t[t.ConnectorTargetThumb=4]="ConnectorTargetThumb",t[t.ResizeSouthEast=8]="ResizeSouthEast",t[t.ResizeSouthWest=16]="ResizeSouthWest",t[t.ResizeNorthEast=32]="ResizeNorthEast",t[t.ResizeNorthWest=64]="ResizeNorthWest",t[t.ResizeEast=128]="ResizeEast",t[t.ResizeWest=256]="ResizeWest",t[t.ResizeSouth=512]="ResizeSouth",t[t.ResizeNorth=1024]="ResizeNorth",t[t.Rotate=2048]="Rotate",t[t.UserHandle=4096]="UserHandle",t[t.ToolTip=8192]="ToolTip",t[t.ResizeAll=2046]="ResizeAll",t[t.All=16382]="All"}(mp||(mp={})),function(t){t[t.None=1]="None",t[t.Select=2]="Select",t[t.Delete=4]="Delete",t[t.Drag=8]="Drag",t[t.DragSourceEnd=16]="DragSourceEnd",t[t.DragTargetEnd=32]="DragTargetEnd",t[t.DragSegmentThumb=64]="DragSegmentThumb",t[t.AllowDrop=128]="AllowDrop",t[t.Bridging=256]="Bridging",t[t.BridgeObstacle=512]="BridgeObstacle",t[t.InheritBridging=1024]="InheritBridging",t[t.PointerEvents=2048]="PointerEvents",t[t.Tooltip=4096]="Tooltip",t[t.InheritTooltip=8192]="InheritTooltip",t[t.Interaction=4218]="Interaction",t[t.ReadOnly=16384]="ReadOnly",t[t.LineRouting=32768]="LineRouting",t[t.InheritLineRouting=65536]="InheritLineRouting",t[t.ConnectToNearByNode=131072]="ConnectToNearByNode",t[t.ConnectToNearByPort=262144]="ConnectToNearByPort",t[t.ConnectToNearByElement=393216]="ConnectToNearByElement",t[t.Default=470590]="Default"}(yp||(yp={})),function(t){t[t.ReadOnly=2]="ReadOnly",t[t.InheritReadOnly=4]="InheritReadOnly",t[t.Select=8]="Select",t[t.Drag=16]="Drag",t[t.Resize=32]="Resize",t[t.Rotate=64]="Rotate",t[t.Interaction=120]="Interaction",t[t.None=0]="None"}(vp||(vp={})),function(t){t[t.None=0]="None",t[t.Select=2]="Select",t[t.Drag=4]="Drag",t[t.Rotate=8]="Rotate",t[t.Shadow=16]="Shadow",t[t.PointerEvents=32]="PointerEvents",t[t.Delete=64]="Delete",t[t.InConnect=128]="InConnect",t[t.OutConnect=256]="OutConnect",t[t.Individual=512]="Individual",t[t.Expandable=1024]="Expandable",t[t.AllowDrop=2048]="AllowDrop",t[t.Inherit=78]="Inherit",t[t.ResizeNorthEast=4096]="ResizeNorthEast",t[t.ResizeEast=8192]="ResizeEast",t[t.ResizeSouthEast=16384]="ResizeSouthEast",t[t.ResizeSouth=32768]="ResizeSouth",t[t.ResizeSouthWest=65536]="ResizeSouthWest",t[t.ResizeWest=131072]="ResizeWest",t[t.ResizeNorthWest=262144]="ResizeNorthWest",t[t.ResizeNorth=524288]="ResizeNorth",t[t.Resize=1044480]="Resize",t[t.AspectRatio=1048576]="AspectRatio",t[t.Tooltip=2097152]="Tooltip",t[t.InheritTooltip=4194304]="InheritTooltip",t[t.ReadOnly=8388608]="ReadOnly",t[t.HideThumbs=16777216]="HideThumbs",t[t.AllowMovingOutsideLane=33554432]="AllowMovingOutsideLane",t[t.Default=5240814]="Default"}(bp||(bp={})),function(t){t[t.None=0]="None",t[t.ElementIsPort=2]="ElementIsPort",t[t.ElementIsGroup=4]="ElementIsGroup"}(wp||(wp={})),function(t){t[t.Rotate=2]="Rotate",t[t.ConnectorSource=4]="ConnectorSource",t[t.ConnectorTarget=8]="ConnectorTarget",t[t.ResizeNorthEast=16]="ResizeNorthEast",t[t.ResizeEast=32]="ResizeEast",t[t.ResizeSouthEast=64]="ResizeSouthEast",t[t.ResizeSouth=128]="ResizeSouth",t[t.ResizeSouthWest=256]="ResizeSouthWest",t[t.ResizeWest=512]="ResizeWest",t[t.ResizeNorthWest=1024]="ResizeNorthWest",t[t.ResizeNorth=2048]="ResizeNorth",t[t.Default=4094]="Default"}(Sp||(Sp={})),function(t){t[t.None=1]="None",t[t.Bridging=2]="Bridging",t[t.UndoRedo=4]="UndoRedo",t[t.Tooltip=8]="Tooltip",t[t.UserInteraction=16]="UserInteraction",t[t.ApiUpdate=32]="ApiUpdate",t[t.PageEditable=48]="PageEditable",t[t.Zoom=64]="Zoom",t[t.PanX=128]="PanX",t[t.PanY=256]="PanY",t[t.Pan=384]="Pan",t[t.ZoomTextEdit=512]="ZoomTextEdit",t[t.Virtualization=1024]="Virtualization",t[t.LineRouting=2048]="LineRouting",t[t.Default=500]="Default"}(xp||(xp={})),function(t){t[t.None=0]="None",t[t.SingleSelect=1]="SingleSelect",t[t.MultipleSelect=2]="MultipleSelect",t[t.ZoomPan=4]="ZoomPan",t[t.DrawOnce=8]="DrawOnce",t[t.ContinuousDraw=16]="ContinuousDraw",t[t.Default=3]="Default"}(Cp||(Cp={})),function(t){t[t.Self=1]="Self",t[t.Parent=2]="Parent"}(Pp||(Pp={})),function(t){t[t.Canvas=0]="Canvas",t[t.Svg=1]="Svg"}(Op||(Op={})),function(t){t[t.None=0]="None",t[t.Control=1]="Control",t[t.Meta=1]="Meta",t[t.Alt=2]="Alt",t[t.Shift=4]="Shift"}(Ep||(Ep={})),function(t){t[t.None=null]="None",t[t.Number0=0]="Number0",t[t.Number1=1]="Number1",t[t.Number2=2]="Number2",t[t.Number3=3]="Number3",t[t.Number4=4]="Number4",t[t.Number5=5]="Number5",t[t.Number6=6]="Number6",t[t.Number7=7]="Number7",t[t.Number8=8]="Number8",t[t.Number9=9]="Number9",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.Left=37]="Left",t[t.Up=38]="Up",t[t.Right=39]="Right",t[t.Down=40]="Down",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.Delete=46]="Delete",t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.BackSpace=8]="BackSpace",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.Star=56]="Star",t[t.Plus=187]="Plus",t[t.Minus=189]="Minus"}(Lp||(Lp={})),function(t){t[t.Render=2]="Render",t[t.PublicMethod=4]="PublicMethod",t[t.ToolAction=8]="ToolAction",t[t.UndoRedo=16]="UndoRedo",t[t.TextEdit=32]="TextEdit",t[t.Group=64]="Group",t[t.Clear=128]="Clear",t[t.PreventClearSelection=256]="PreventClearSelection",t[t.Interactions=512]="Interactions",t[t.PreventHistory=1024]="PreventHistory",t[t.PreventIconsUpdate=2048]="PreventIconsUpdate",t[t.PreventCollectionChangeOnDragOver=4096]="PreventCollectionChangeOnDragOver",t[t.PreventZIndexOnDragging=8192]="PreventZIndexOnDragging",t[t.isGroupDragging=16384]="isGroupDragging",t[t.DragUsingMouse=32768]="DragUsingMouse",t[t.DecoratorPropertyChange=65536]="DecoratorPropertyChange"}(Ip||(Ip={})),function(t){t[t.None=2]="None",t[t.DrawSelectorBorder=4]="DrawSelectorBorder",t[t.PreventRenderSelector=8]="PreventRenderSelector"}(Tp||(Tp={})),function(t){t[t.None=0]="None",t[t.PreventDrag=2]="PreventDrag",t[t.PreventScale=4]="PreventScale",t[t.PreventDataInit=8]="PreventDataInit",t[t.hScrollbarMoved=16]="hScrollbarMoved",t[t.vScrollbarMoved=32]="vScrollbarMoved",t[t.AnimationClick=64]="AnimationClick",t[t.EnableGroupAction=128]="EnableGroupAction"}(Ap||(Ap={})),function(t){t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Three=3]="Three",t[t.Four=4]="Four",t[t.Five=5]="Five"}(Bp||(Bp={})),function(t){t[t.collectionChange=0]="collectionChange",t[t.rotateChange=1]="rotateChange",t[t.positionChange=2]="positionChange",t[t.propertyChange=3]="propertyChange",t[t.selectionChange=4]="selectionChange",t[t.sizeChange=5]="sizeChange",t[t.drop=6]="drop",t[t.sourcePointChange=7]="sourcePointChange",t[t.targetPointChange=8]="targetPointChange",t[t.connectionChange=9]="connectionChange",t[t.animationComplete=10]="animationComplete",t[t.click=11]="click",t[t.doubleClick=12]="doubleClick",t[t.scrollChange=13]="scrollChange",t[t.dragEnter=14]="dragEnter",t[t.dragLeave=15]="dragLeave",t[t.dragOver=16]="dragOver",t[t.textEdit=17]="textEdit",t[t.paletteSelectionChange=18]="paletteSelectionChange",t[t.historyChange=19]="historyChange",t[t.mouseEnter=20]="mouseEnter",t[t.mouseLeave=21]="mouseLeave",t[t.mouseOver=22]="mouseOver",t[t.expandStateChange=23]="expandStateChange",t[t.segmentCollectionChange=24]="segmentCollectionChange",t[t.commandExecute=25]="commandExecute",t[t.historyStateChange=26]="historyStateChange",t[t.onUserHandleMouseDown=27]="onUserHandleMouseDown",t[t.onUserHandleMouseUp=28]="onUserHandleMouseUp",t[t.onUserHandleMouseEnter=29]="onUserHandleMouseEnter",t[t.onUserHandleMouseLeave=30]="onUserHandleMouseLeave",t[t.onImageLoad=31]="onImageLoad",t[t.onDoBindingInit=32]="onDoBindingInit",t[t.keyUp=33]="keyUp",t[t.keyDown=34]="keyDown"}(kp||(kp={})),function(t){t[t.None=1]="None",t[t.Drag=2]="Drag",t[t.Draw=4]="Draw",t[t.InConnect=8]="InConnect",t[t.OutConnect=16]="OutConnect",t[t.Default=24]="Default"}(Mp||(Mp={}));var Yp=function(){function t(){this.pivot={x:.5,y:.5},this.isDirt=!0,this.isExport=!1,this.exportScaleValue={x:0,y:0},this.exportScaleOffset={x:0,y:0},this.canApplyStyle=!0,this.visible=!0,this.offsetX=0,this.offsetY=0,this.cornerRadius=0,this.minHeight=void 0,this.minWidth=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.width=void 0,this.height=void 0,this.rotateAngle=0,this.margin={left:0,right:0,top:0,bottom:0},this.horizontalAlignment="Auto",this.verticalAlignment="Auto",this.flip="None",this.relativeMode="Point",this.transform=Pp.Self|Pp.Parent,this.style={fill:"white",strokeColor:"black",opacity:1,strokeWidth:1},this.desiredSize=new Wd,this.actualSize=new Wd,this.parentTransform=0,this.preventContainer=!1,this.isSvgRender=!1,this.bounds=new np(0,0,0,0),this.shadow=null,this.description="",this.staticSize=!1,this.isRectElement=!1,this.isCalculateDesiredSize=!0,this.flipOffset={x:0,y:0},this.elementActions=wp.None,this.inversedAlignment=!0,this.position=void 0,this.unitMode=void 0,this.float=!1,this.floatingBounds=void 0}return t.prototype.setOffsetWithRespectToBounds=function(t,e,i){this.unitMode=i,this.position={x:t,y:e}},t.prototype.getAbsolutePosition=function(t){if(void 0!==this.position)return"Absolute"===this.unitMode?this.position:{x:this.position.x*t.width,y:this.position.y*t.height}},Object.defineProperty(t.prototype,"outerBounds",{get:function(){return this.floatingBounds||this.bounds},set:function(t){this.floatingBounds=t},enumerable:!0,configurable:!0}),t.prototype.measure=function(t,e,i){var n=void 0!==this.width?this.width:(t.width||0)-this.margin.left-this.margin.right,r=void 0!==this.height?this.height:(t.height||0)-this.margin.top-this.margin.bottom;return this.desiredSize=new Wd(n,r),this.isCalculateDesiredSize&&(this.desiredSize=this.validateDesiredSize(this.desiredSize,t)),this.desiredSize},t.prototype.arrange=function(t){return this.actualSize=t,this.updateBounds(),this.actualSize},t.prototype.updateBounds=function(){this.bounds=fb(this)},t.prototype.validateDesiredSize=function(t,e){return!this.isRectElement||this.width||this.minWidth||this.maxWidth||(t.width=50),!this.isRectElement||this.height||this.minHeight||this.maxHeight||(t.height=50),(void 0===t||void 0!==this.width&&void 0!==this.height)&&((t=t||new Wd).width=void 0===this.width?(e.width||0)-this.margin.left-this.margin.right:this.width,t.height=void 0===this.height?(e.height||0)-this.margin.top-this.margin.bottom:this.height),void 0!==this.minWidth&&(t.width=Math.max(t.width,this.minWidth)),void 0!==this.minHeight&&(t.height=Math.max(t.height,this.minHeight)),void 0!==this.maxWidth&&0!==this.maxWidth&&(t.width=Math.min(t.width,this.maxWidth)),void 0!==this.maxHeight&&0!==this.maxHeight&&(t.height=Math.min(t.height,this.maxHeight)),t},t}(),Zp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.padding=new jp(0,0,0,0),e.desiredBounds=void 0,e.measureChildren=!0,e.prevRotateAngle=0,e}return Zp(e,t),e.prototype.hasChildren=function(){return void 0!==this.children&&this.children.length>0},e.prototype.measure=function(t,i,n){this.desiredBounds=void 0;var r,o,s=void 0;if(this.hasChildren()){for(var a=0;a<this.children.length;a++){"Stretch"!==(r=this.children[a]).horizontalAlignment||t.width||(t.width=r.bounds.width),"Stretch"!==r.verticalAlignment||t.height||(t.height=r.bounds.height);var l="Stretch"===r.horizontalAlignment||"Stretch"===r.verticalAlignment;(this.measureChildren||l||r instanceof e&&void 0!==r.measureChildren)&&r.measure(t,i,n),o=this.GetChildrenBounds(r),"Stretch"!==r.horizontalAlignment&&"Stretch"!==r.verticalAlignment?void 0===this.desiredBounds?this.desiredBounds=o:this.desiredBounds.uniteRect(o):!this.actualSize||this.actualSize.width||this.actualSize.height||r.preventContainer||"Stretch"!==r.horizontalAlignment||"Stretch"!==r.verticalAlignment||(void 0===this.desiredBounds?this.desiredBounds=r.bounds:this.desiredBounds.uniteRect(r.bounds))}if(void 0!==this.desiredBounds&&0!==this.rotateAngle){var h={x:this.desiredBounds.x+this.desiredBounds.width*this.pivot.x,y:this.desiredBounds.y+this.desiredBounds.height*this.pivot.y},c=Eb(this.rotateAngle,void 0,void 0,h);this.desiredBounds.x=c.x-this.desiredBounds.width*this.pivot.x,this.desiredBounds.y=c.y-this.desiredBounds.height*this.pivot.y}this.desiredBounds&&(s=new Wd(this.desiredBounds.width,this.desiredBounds.height))}return s=this.validateDesiredSize(s,t),this.stretchChildren(s),this.desiredSize=s,s},e.prototype.arrange=function(t){var i,n=this.desiredBounds;if(n){this.offsetX,this.offsetY;if(this.offsetX=n.x+n.width*this.pivot.x,this.offsetY=n.y+n.height*this.pivot.y,this.hasChildren())for(var r=0;r<this.children.length;r++){var o=!1;"Stretch"===(i=this.children[r]).horizontalAlignment&&(i.offsetX=this.offsetX,i.parentTransform=this.parentTransform+this.rotateAngle,this.flip&&this.elementActions&wp.ElementIsGroup&&(i.parentTransform="Horizontal"===this.flip||"Vertical"===this.flip?-i.parentTransform:i.parentTransform),o=!0),"Stretch"===i.verticalAlignment&&(i.offsetY=this.offsetY,i.parentTransform=this.parentTransform+this.rotateAngle,o=!0),(o||this.measureChildren||i instanceof e&&void 0!==i.measureChildren)&&i.arrange(i.desiredSize)}}return this.actualSize=t,this.updateBounds(),this.prevRotateAngle=this.rotateAngle,t},e.prototype.stretchChildren=function(t){if(this.hasChildren())for(var i=0,n=this.children;i<n.length;i++){var r=n[i];"Stretch"!==r.horizontalAlignment&&void 0!==r.desiredSize.width||(r.desiredSize.width=t.width-r.margin.left-r.margin.right),"Stretch"!==r.verticalAlignment&&void 0!==r.desiredSize.height||(r.desiredSize.height=t.height-r.margin.top-r.margin.bottom),r instanceof e&&r.stretchChildren(r.desiredSize)}},e.prototype.applyPadding=function(t){t.width+=this.padding.left+this.padding.right,t.height+=this.padding.top+this.padding.bottom},e.prototype.findChildOffsetFromCenter=function(t,e){var i=function(t,e){var i=t.x+e.desiredSize.width*e.pivot.x,n=t.y+e.desiredSize.height*e.pivot.y;return{x:i,y:n}}({x:e.x-t.desiredSize.width/2,y:e.y-t.desiredSize.height/2},t);i=Eb(t.rotateAngle,e.x,e.y,i),i=Eb(this.rotateAngle+this.parentTransform,this.offsetX,this.offsetY,i),t.offsetX=i.x,t.offsetY=i.y},e.prototype.GetChildrenBounds=function(t){var e;e=t.desiredSize.clone();t.rotateAngle,this.rotateAngle;var i=t.offsetX,n=t.offsetY,r=i-e.width*t.pivot.x,o=n-e.height*t.pivot.y,s=r+e.width,a=o+e.height,l={x:r,y:o},h={x:s,y:o},c={x:r,y:a},d={x:s,y:a};return l=Eb(t.rotateAngle,t.offsetX,t.offsetY,l),h=Eb(t.rotateAngle,t.offsetX,t.offsetY,h),c=Eb(t.rotateAngle,t.offsetX,t.offsetY,c),d=Eb(t.rotateAngle,t.offsetX,t.offsetY,d),0!==this.rotateAngle&&(l=Eb(-this.rotateAngle,void 0,void 0,l),h=Eb(-this.rotateAngle,void 0,void 0,h),c=Eb(-this.rotateAngle,void 0,void 0,c),d=Eb(-this.rotateAngle,void 0,void 0,d)),np.toBounds([l,h,c,d])},e}(Yp),Jp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qp=function(t){function e(){var e=t.call(this)||this;return e.textContent="",e.canMeasure=!0,e.isLaneOrientation=!1,e.canConsiderBounds=!0,e.hyperlink={color:"blue"},e.doWrap=!0,e.textNodes=[],e.style={color:"black",fill:"transparent",strokeColor:"black",strokeWidth:1,fontFamily:"Arial",fontSize:12,whiteSpace:"CollapseSpace",textWrapping:"WrapWithOverflow",textAlign:"Center",italic:!1,bold:!1,textDecoration:"None",strokeDashArray:"",opacity:5,gradient:null,textOverflow:"Wrap"},e.style.fill="transparent",e.style.strokeColor="transparent",e}return Jp(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this.textContent},set:function(t){this.textContent!==t&&(this.textContent=t,this.isDirt=!0,this.doWrap=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.textNodes},set:function(t){this.textNodes=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapBounds",{get:function(){return this.textWrapBounds},set:function(t){this.textWrapBounds=t},enumerable:!0,configurable:!0}),e.prototype.refreshTextElement=function(){this.isDirt=!0},e.prototype.measure=function(t){var e;return e=this.isDirt&&this.canMeasure?function(t,e,i,n,r){var o,s,a=new Wd(0,0),l=function(t,e){var i={fill:t.style.fill,stroke:t.style.strokeColor,angle:t.rotateAngle+t.parentTransform,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:t.style.strokeWidth,dashArray:t.style.strokeDashArray,opacity:t.style.opacity,shadow:t.shadow,gradient:t.style.gradient,visible:t.visible,id:t.id,description:t.description,width:e||t.actualSize.width,height:t.actualSize.height,x:t.offsetX-t.actualSize.width*t.pivot.x+.5,y:t.offsetY-t.actualSize.height*t.pivot.y+.5};return i.fontSize=t.style.fontSize,i.fontFamily=t.style.fontFamily,i.textOverflow=t.style.textOverflow,i.textDecoration=t.style.textDecoration,i.doWrap=t.doWrap,i.whiteSpace=Pb(t.style.whiteSpace,t.style.textWrapping),i.content=t.content,i.textWrapping=t.style.textWrapping,i.breakWord=wb(t.style.textWrapping),i.textAlign=bb(t.style.textAlign),i.color=t.style.color,i.italic=t.style.italic,i.bold=t.style.bold,i.dashArray="",i.strokeWidth=0,i.fill="",i}(t,n);t.childNodes=o=function(t,e,i){var n,r,o=[],s=0,a=e||t.content;if("nowrap"!==t.whiteSpace&&"pre"!==t.whiteSpace)if("breakall"===t.breakWord)for(n="",n+=a[0],s=0;s<a.length;s++)if((r=Sb(n,t))>=t.width&&n.length>0)o[o.length]={text:n,x:0,dy:0,width:r},n="";else{(n+=a[s+1]||"").indexOf("\n")>-1&&(o[o.length]={text:n,x:0,dy:0,width:Sb(n,t)},n="");var l=Sb(n,t);Math.ceil(l)+2>=t.width&&n.length>0&&(o[o.length]={text:n,x:0,dy:0,width:l},n=""),s===a.length-1&&n.length>0&&(o[o.length]={text:n,x:0,dy:0,width:l},n="")}else o=function(t,e,i){var n,r,o,s,a=[],l="",h=0,c=0,d="nowrap"!==t.whiteSpace,p=(e||t.content).split("\n");for(h=0;h<p.length;h++)for(n="NoWrap"!==t.textWrapping?p[h].split(" "):"NoWrap"===t.textWrapping?[p[h]]:p,c=0;c<n.length;c++){l+=((0!==c||1===n.length)&&d&&l.length>0?" ":"")+n[c];var u=Sb(r=l+" "+(n[c+1]||""),t);Math.floor(u)>(i||t.width)-2&&l.length>0?(a[a.length]={text:l,x:0,dy:0,width:r===l?u:l===s?o:Sb(l,t)},l=""):c===n.length-1&&(a[a.length]={text:l,x:0,dy:0,width:u},l=""),s=r,o=u}return a}(t,e,i);else o[o.length]={text:a,x:0,dy:0,width:Sb(a,t)};return o}(l,r,t.isLaneOrientation?n:void 0),t.wrapBounds=s=function(t,e){var i,n,r={x:0,width:0},o=0;for(o=0;o<e.length;o++)i=e[o].width,n=i,i="left"===t.textAlign?0:"center"===t.textAlign?i>t.width&&("Ellipsis"===t.textOverflow||"Clip"===t.textOverflow)?0:-i/2:"right"===t.textAlign?-i:e.length>1?0:-i/2,e[o].dy=1.2*t.fontSize,e[o].x=i,r?(r.x=Math.min(r.x,i),r.width=Math.max(r.width,n)):r={x:i,width:n};return r}(l,o),a.width=s.width,t.wrapBounds.width>=n&&"Wrap"!==l.textOverflow&&(a.width=n);return a.height=o.length*t.style.fontSize*1.2,a}(this,this.style,this.content,this.isLaneOrientation?t.height:this.width||t.width):this.desiredSize,void 0===this.width||void 0===this.height?this.desiredSize=new Wd(e.width,e.height):this.desiredSize=new Wd(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return(t.width!==this.actualSize.width||t.height!==this.actualSize.height||this.isDirt)&&(this.doWrap=!0),this.actualSize=t,this.updateBounds(),this.isDirt=!1,this.actualSize},e}(Yp),$p=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tu=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.measureChildren=void 0,e}return $p(e,t),e.prototype.measure=function(e,i,n){var r=void 0,o=void 0;if(this.hasChildren()){for(var s=0,a=this.children;s<a.length;s++){var l=a[s];l instanceof Qp?l.canMeasure&&(e.width=e.width||this.maxWidth||this.minWidth,l.measure(e)):l instanceof Qp||l.measure(e,i,n);var h=l.desiredSize.clone();0!==l.rotateAngle&&(h=Ob(h,l.rotateAngle));var c=h.width+l.margin.right,d=h.height+l.margin.bottom,p=new np(l.margin.left,l.margin.top,c,d);if(l.float)if(void 0!==l.getAbsolutePosition(h))continue;l instanceof Qp&&!(l instanceof Qp&&l.canConsiderBounds)||(void 0===o?o=p:o.uniteRect(p))}if(o){var u,f;u=Math.max(o.left,0),f=Math.max(o.top,0),r=new Wd(o.width+u,o.height+f)}}return r=t.prototype.validateDesiredSize.call(this,r,e),t.prototype.stretchChildren.call(this,r),r.width+=this.padding.left+this.padding.right,r.height+=this.padding.top+this.padding.bottom,this.desiredSize=r,r},e.prototype.arrange=function(e,i){if(this.outerBounds=new np,this.hasChildren()){var n,r;n=this.offsetY-e.height*this.pivot.y+this.padding.top,r=this.offsetX-e.width*this.pivot.x+this.padding.left;for(var o=0,s=this.children;o<s.length;o++){var a=s[o];if(0!=(a.transform&Pp.Parent)){a.parentTransform=this.parentTransform+this.rotateAngle,("None"!==this.flip||this.elementActions&wp.ElementIsGroup)&&(a.parentTransform="Horizontal"===this.flip||"Vertical"===this.flip?-a.parentTransform:a.parentTransform);var l,h=a.desiredSize.clone(),c=void 0,d=r,p=n;if("Point"===a.relativeMode){var u=a.getAbsolutePosition(e);void 0!==u&&(d+=u.x,p+=u.y)}l={x:(c="Object"===a.relativeMode?this.alignChildBasedOnParent(a,h,e,d,p):this.alignChildBasedOnaPoint(a,d,p)).x+h.width/2,y:c.y+h.height/2},t.prototype.findChildOffsetFromCenter.call(this,a,l)}!i||"Stretch"!==a.horizontalAlignment&&"Stretch"!==a.verticalAlignment?a instanceof Qp&&a.canMeasure?(a.arrange(a.desiredSize),this.outerBounds.uniteRect(a.outerBounds)):a instanceof Qp||(a.arrange(a.desiredSize),this.outerBounds.uniteRect(a.outerBounds)):a.arrange(e)}}return this.actualSize=e,this.updateBounds(),this.outerBounds.uniteRect(this.bounds),e},e.prototype.alignChildBasedOnParent=function(t,e,i,n,r){switch(t.horizontalAlignment){case"Auto":case"Left":n+=t.margin.left;break;case"Right":n+=i.width-e.width-t.margin.right;break;case"Stretch":case"Center":n+=i.width/2-e.width/2}switch(t.verticalAlignment){case"Auto":case"Top":r+=t.margin.top;break;case"Bottom":r+=i.height-e.height-t.margin.bottom;break;case"Stretch":case"Center":r+=i.height/2-e.height/2}return{x:n,y:r}},e.prototype.alignChildBasedOnaPoint=function(t,e,i){switch(e+=t.margin.left-t.margin.right,i+=t.margin.top-t.margin.bottom,t.horizontalAlignment){case"Auto":case"Left":e=t.inversedAlignment?e:e-t.desiredSize.width;break;case"Stretch":case"Center":e-=t.desiredSize.width*t.pivot.x;break;case"Right":e=t.inversedAlignment?e-t.desiredSize.width:e}switch(t.verticalAlignment){case"Auto":case"Top":i=t.inversedAlignment?i:i-t.desiredSize.height;break;case"Stretch":case"Center":i-=t.desiredSize.height*t.pivot.y;break;case"Bottom":i=t.inversedAlignment?i-t.desiredSize.height:i}return{x:e,y:i}},e}(Kp);function eu(t){return iu[t.toString()]}var iu={Rectangle:"M0,0 L50,0 L50,50 L0,50 z",Ellipse:"M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",Hexagon:"M30,0 L60,0 L90,30 L60,60 L30,60 L0,30 L30,0 z",Parallelogram:"M30,0 L60,0 L45,30 L15,30 z",Triangle:"M45,0 L90,45 L0,45 L45,0 z",Plus:"M696.6084,158.2656 L674.8074,158.2656 L674.8074,136.4656 L658.4084,136.4656 L658.4084,158.2656 L636.6084,158.2656L636.6084,174.6646 L658.4084,174.6646 L658.4084,196.4656 L674.8074,196.4656 L674.8074,174.6646 L696.6084,174.6646L696.6084,158.2656 z",Star:"M540.3643,137.9336 L546.7973,159.7016 L570.3633,159.7296 L550.7723,171.9366 L558.9053,194.9966 L540.3643,179.4996L521.8223,194.9966 L529.9553,171.9366 L510.3633,159.7296 L533.9313,159.7016 L540.3643,137.9336 z",Pentagon:"M30,0 L60,30 L50,70 L10,70 L0,30 L30,0 z",Heptagon:"M223.7783,195.7134 L207.1303,174.8364 L213.0713,148.8034 L237.1303,137.2174 L261.1883,148.8034 L267.1303,174.8364L250.4813,195.7134 L223.7783,195.7134 z",Octagon:"M98.7319,196.4653 L81.1579,178.8923 L81.1579,154.0393 L98.7319,136.4653 L123.5849,136.4653L141.1579,154.0393 L141.1579,178.8923 L123.5849,196.4653 L98.7319,196.4653 z",Trapezoid:"M127.2842,291.4492 L95.0322,291.4492 L81.1582,256.3152 L141.1582,256.3152 L127.2842,291.4492 z",Decagon:"M657.3379,302.4141 L642.3369,291.5161 L636.6089,273.8821 L642.3369,256.2481 L657.3379,245.3511 L675.8789,245.3511L690.8789,256.2481 L696.6089,273.8821L690.8789,291.5161 L675.8789,302.4141 L657.3379,302.4141 z",RightTriangle:"M836.293,292.9238 L776.293,292.9238 L776.293,254.8408 L836.293,292.9238 z",Cylinder:"M 542.802,362.009C 542.802,368.452 525.341,373.676 503.802,373.676C 482.263,373.676 464.802,368.452 464.802,362.009L 464.802,466.484C 464.802,472.928 482.263,478.151 503.802,478.151C 525.341,478.151 542.802,472.928 542.802,466.484L 542.802,362.016C 542.802,368.459 525.341,373.534 503.802,373.534C 482.263,373.534 464.802,368.31 464.802,361.867L 464.802,362.016C 464.802,355.572 482.263,350.349 503.802,350.349C 525.341,350.349 542.802,355.572 542.802,362.016",Diamond:"M397.784,287.875 L369.5,316.159 L341.216,287.875 L369.5,259.591 L397.784,287.875 z"},nu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ru=function(t){function e(){var e=t.call(this)||this;return e.pathData="",e.transformPath=!0,e.absolutePath="",e.canMeasurePath=!1,e.absoluteBounds=new np,e}return nu(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this.pathData},set:function(t){this.pathData!==t&&(this.pathData=t,this.isDirt=!0)},enumerable:!0,configurable:!0}),e.prototype.getPoints=function(){var t=this;return this.pointTimer||(this.pointTimer=setTimeout(function(){t.points=null,t.pointTimer=null},200)),this.points=this.points||function(t){var e,i,n=[];window.measureElement.style.visibility="visible";var r=Dv(window.measureElement.children[2])[0];r.setAttributeNS(null,"d",t.data);var o=t.absoluteBounds,s=jv(t,o,t);r.setAttributeNS(null,"d",s);var a=r.getTotalLength();for(i=0;i<=a;i+=10)e=r.getPointAtLength(i),n.push({x:e.x,y:e.y});return window.measureElement.style.visibility="hidden",n}(this),function(t,e){for(var i=[],n=0,r=e;n<r.length;n++){var o=r[n],s={x:t.offsetX-t.actualSize.width*t.pivot.x+o.x,y:t.offsetY-t.actualSize.height*t.pivot.y+o.y},a=void 0,l=t.rotateAngle+t.parentTransform;l&&ap(a=op(),l,t.offsetX,t.offsetY),a&&(s=sp(a,s)),i.push(s)}return i}(this,this.points)},e.prototype.measure=function(t){return this.staticSize&&void 0!==this.width&&void 0!==this.height?this.absoluteBounds=new np(this.offsetX-this.width*this.pivot.x,this.offsetY-this.height*this.pivot.y,this.width,this.height):(!this.isDirt||!this.transformPath&&void 0!==this.width&&void 0!==this.height||this.absoluteBounds&&0!==this.absoluteBounds.height)&&!this.canMeasurePath||(this.absoluteBounds=Rv(this.data?this.data:"")),void 0===this.width?this.desiredSize=new Wd(this.absoluteBounds.width,this.height||this.absoluteBounds.height):void 0===this.height?this.desiredSize=new Wd(this.width||this.absoluteBounds.width,this.absoluteBounds.height):this.desiredSize=new Wd(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.canMeasurePath=!1,this.desiredSize},e.prototype.arrange=function(t){return(this.isDirt||this.actualSize.width!==t.width||this.actualSize.height!==t.height)&&(this.isDirt=!0,this.absolutePath=this.updatePath(this.data,this.absoluteBounds,t),this.staticSize||(this.points=null)),this.actualSize=this.desiredSize,this.updateBounds(),this.isDirt=!1,this.actualSize},e.prototype.updatePath=function(t,e,i){var n=!1,r="",o=-e.x,s=-e.y,a=[];return i.width===e.width&&i.height===e.height||(o=i.width/Number(e.width?e.width:1),s=i.height/Number(e.height?e.height:1),n=!0),a=$d(a=Xd(t)),r=(n||this.isDirt)&&this.transformPath?Kd(a,o,s,n,e.x,e.y,0,0):tp(a),n=!1,r},e}(Yp),ou=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),su=function(t){function e(){var e=t.call(this)||this;return e.imageSource="",e.imageScale="None",e.imageAlign="None",e.stretch="Stretch",e}return ou(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return this.imageSource},set:function(t){this.imageSource=t,this.isDirt=!0},enumerable:!0,configurable:!0}),e.prototype.measure=function(t,e,i){return this.isDirt&&("Stretch"!==this.stretch||void 0===this.width&&void 0===this.height)&&(this.contentSize=function(t,e,i,n){window.measureElement.style.visibility="visible";var r=window.measureElement.children[1];r.setAttribute("src",t);var o=r.getBoundingClientRect(),s=o.width,a=o.height;e=new Wd(s,a),window.measureElement.style.visibility="hidden";var l=document.createElement("img");return l.setAttribute("src",t),sb(l,{id:i+"sf-imageNode",style:"display: none;"}),document.body.appendChild(l),l.onload=function(t){var e=t.currentTarget;n&&n(i,{width:e.width,height:e.height})},e}(this.source,this.contentSize,e,i),this.isDirt=!1),void 0!==this.width&&void 0!==this.height?(this.desiredSize=new Wd(this.width,this.height),this.contentSize=this.desiredSize):this.desiredSize=this.contentSize,this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return this.actualSize=new Wd(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},e}(Yp),au=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lu=function(t){function e(e,i){var n=t.call(this)||this;return n.data="",n.nodeId="",n.diagramId="",n.scale="Stretch",n.diagramId=i,n.nodeId=e,n}return au(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this.data},set:function(t){this.data=t,this.template=nb(this,!1),this.isDirt=!0},enumerable:!0,configurable:!0}),e.prototype.measure=function(t){if(this.isDirt){var e=function(t){window.measureElement.style.visibility="visible";var e=window.measureElement.children[2];e.appendChild(t);var i=t.getBoundingClientRect(),n=e.getBoundingClientRect(),r=i;return r.x=i.left-n.left,r.y=i.top-n.top,e.removeChild(t),window.measureElement.style.visibility="hidden",r}(this.template);this.contentSize=new Wd,this.contentSize.width=e.width,this.contentSize.height=e.height;var i=e.x,n=e.y;this.templatePosition={x:i,y:n},this.isDirt=!1}if(void 0===this.width||void 0===this.height){var r=function(t){window.measureElement.style.visibility="visible";var e=window.measureElement.children[2];e.appendChild(t);var i=e.getBoundingClientRect();return e.removeChild(t),window.measureElement.style.visibility="hidden",i}(this.template);this.desiredSize=new Wd(r.width,r.height)}else this.desiredSize=new Wd(this.width,this.height);return this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return this.actualSize=new Wd(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},e}(Yp),hu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cu=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},du=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.inEdges=[],o.outEdges=[],o}return hu(e,t),cu([Hi("")],e.prototype,"id",void 0),cu([Hi("Center")],e.prototype,"horizontalAlignment",void 0),cu([Hi("Center")],e.prototype,"verticalAlignment",void 0),cu([_i({},Np)],e.prototype,"margin",void 0),cu([Hi(12)],e.prototype,"width",void 0),cu([Hi(12)],e.prototype,"height",void 0),cu([_i({},Gp)],e.prototype,"style",void 0),cu([Hi("Square")],e.prototype,"shape",void 0),cu([Hi(fp.Connect)],e.prototype,"visibility",void 0),cu([Hi("")],e.prototype,"pathData",void 0),cu([Hi(Mp.Default)],e.prototype,"constraints",void 0),cu([Hi()],e.prototype,"addInfo",void 0),cu([Hi()],e.prototype,"outEdges",void 0),cu([Hi()],e.prototype,"inEdges",void 0),e}(ln),pu=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return hu(e,t),e.prototype.getClassName=function(){return"PointPort"},cu([_i({x:.5,y:.5},qd)],e.prototype,"offset",void 0),e}(du),uu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fu=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},gu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return uu(e,t),fu([Hi("blue")],e.prototype,"color",void 0),fu([Hi("")],e.prototype,"content",void 0),fu([Hi("")],e.prototype,"link",void 0),fu([Hi("None")],e.prototype,"textDecoration",void 0),e}(ln),mu=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return n.id||(e.parentObj&&e.parentObj.propName&&"phases"===e.parentObj.propName?o.id=e.parentObj.id:o.id=cb()),o}return uu(e,t),fu([Hi("")],e.prototype,"content",void 0),fu([Hi(void 0)],e.prototype,"template",void 0),fu([Hi("String")],e.prototype,"annotationType",void 0),fu([Hi(!0)],e.prototype,"visibility",void 0),fu([Hi(vp.InheritReadOnly)],e.prototype,"constraints",void 0),fu([_i(void 0,gu)],e.prototype,"hyperlink",void 0),fu([Hi("")],e.prototype,"id",void 0),fu([Hi()],e.prototype,"width",void 0),fu([Hi()],e.prototype,"height",void 0),fu([Hi(0)],e.prototype,"rotateAngle",void 0),fu([_i({strokeWidth:0,strokeColor:"transparent",fill:"transparent"},Xp)],e.prototype,"style",void 0),fu([Hi("Center")],e.prototype,"horizontalAlignment",void 0),fu([Hi("Center")],e.prototype,"verticalAlignment",void 0),fu([_i({},Np)],e.prototype,"margin",void 0),fu([_i({top:void 0,bottom:void 0,left:void 0,right:void 0},Np)],e.prototype,"dragLimit",void 0),fu([Hi("Shape")],e.prototype,"type",void 0),fu([Hi()],e.prototype,"addInfo",void 0),e}(ln),yu=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return uu(e,t),e.prototype.getClassName=function(){return"ShapeAnnotation"},fu([_i({x:.5,y:.5},qd)],e.prototype,"offset",void 0),e}(mu),vu=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return uu(e,t),e.prototype.getClassName=function(){return"PathAnnotation"},fu([Hi(.5)],e.prototype,"offset",void 0),fu([_i({x:0,y:0},qd)],e.prototype,"displacement",void 0),fu([Hi("Center")],e.prototype,"alignment",void 0),fu([Hi(!1)],e.prototype,"segmentAngle",void 0),e}(mu);function bu(t){return wu[t.toString()]}var wu={X:"M14,14 L106,106 M106,14 L14,106",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z",Square:"M0,0 L10,0 L10,10 L0,10 z"},Su={OpenArrow:"M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z",Square:"M0,0 L10,0 L10,10 L0,10 z",Fletch:"M14.8,10c0,0-3.5,6,0.2,12c0,0-2.5-6-10.9-6C4.1,16,11.3,16,14.8,10z",OpenFetch:"M6,17c-0.6,0-1-0.4-1-1s0.4-1,1-1c10.9,0,11-5,11-5c0-0.6,0.4-1,1-1s1,0.4,1,1C19,10.3,18.9,17,6,17C6,17,6,17,6,17z M18,23c-0.5,0-1-0.4-1-1c0-0.2-0.3-5-11-5c-0.6,0-1-0.5-1-1s0.4-1,1-1c0,0,0,0,0,0c12.9,0,13,6.7,13,7    C19,22.6,18.6,23,18,23z",IndentedArrow:"M17,10c0,0-4.5,5.5,0,12L5,16L17,10z",OutdentedArrow:"M14.6,10c0,0,5.4,6,0,12L5,16L14.6,10z",DoubleArrow:"M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z",Arrow:"M15,10 L15,22 L5,16Z",Diamond:"M12,23l-7-7l7-7l6.9,7L12,23z",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z"};function xu(t){return Cu[t.toString()]}var Cu={Process:"M419.511,76.687L359.511,76.687L359.511,43.086L419.511,43.086z",Decision:"M 253.005,115.687L 200.567,146.071L 148.097,115.687L 200.534,85.304L 253.005,115.687 Z",Document:"M 60 31.9 c 0 0 -11 -7.7 -30 0 s -30 0 -30 0 V 0 h 60 V 31.9 Z",PreDefinedProcess:"M 0,0 L 50,0 L 50,50 L 0,50 Z  M 8.334,0 L 8.334,50 M 41.667,0 L 41.667,50",Terminator:"M 269.711,29.33C 269.71,44.061 257.77,56 243.04,56L 158.058,56C 143.33,56 131.39,44.061 131.39,29.33L 131.39,29.33C 131.391,14.6057 143.33,2.669 158.058,2.669L 243.044,2.669C 257.772,2.669 269.711,14.6057 269.711,29.333 Z",PaperTap:"M0.0009,17.2042 L0.0009,47.165 C0.001,47.165 14.403,53.5455 25.00,47.165 C35.599,40.7852 44.403,43.5087 50.00,47.165L50.001,17.2042 M50.001,32.7987 L50.001,2.8405 C50.001,2.8405 35.599,-3.5427 25.001,2.8405C14.403,9.2237 5.599,6.494 0.0009,2.8405 L0.0009,32.7987",DirectData:"M 132.62 0 L 17.38 0 C 7.78 0 0 13.43 0 30 C 0 46.57 7.78 60 17.38 60 L 132.62 60 M 132.62 0C 123.02 0 115.24 13.43 115.24 30 C 115.24 46.57 123.02 60 132.62 60 C 142.22 60 150 46.57 150 30 C 150 13.43 142.22 0 132.62 0 z ",SequentialData:"M0.0029,24.999 C0.0029,11.1922 10.433,0.0021 23.295,0.0021 C36.159,0.00216 46.585,11.1922 46.585,24.999C46.585,38.8057 36.159,49.9979 23.295,49.9979 C10.433,49.9979 0.0029,38.8057 0.0029,24.999 z M23.294,49.999 L50.002,49.999",Sort:"M50.001,24.9971 L25.001,49.9971 L0.00097,24.9971 L25.001,-0.00286865 L50.001,24.9971 z M0.000976562,24.9971 L50.001,24.9971",MultiDocument:"M43.6826,40 C44.8746,40.6183 45.8586,41.3502 46.8366,42.1122 L46.8366,4.74487 L3.09857,4.74487 L3.09857,10.9544 M46.837,35.143 C48.027,35.765 49.025,36.604 50.003,37.369 L50.003,0.002 L6.264,0.002 L6.264,4.744 M43.682,47.113 L43.682,10.765 L0.0025,10.7652 L0.0025,47.1132 C0.0025,47.1132 12.5846,53.6101 21.8426,47.1132 C31.1006,40.6163 38.792,43.393 43.6826,47.1132 z",Collate:"M50.001,0.0028 L25.001,25.0029 L0.00097,0.0028 L50.001,0.002 z M0.0009,50.002 L25.001,25.002L50.001,50.002 L0.0009,50.0029 z",SummingJunction:"M7.3252,42.6768 L42.6772,7.3247 M42.6768,42.6768 L7.3248,7.3247 M0.0009,25.001 C0.0009,11.193 11.197,0.0009 25.001,0.0009 C38.809,0.0009 50.001,11.193 50.001,25.001 C50.001,38.809 38.809,50.001 25.001,50.001 C11.197,50.00 0.0009,38.809 0.0009,25.00 z",Or:"M 0 50 L 100 50 M 50 100 L 50 0.0 M 0 50 C 0 22.384 22.392 0 50 0 C 77.616 0 100 22.384 100 50 C 100 77.616 77.616 100 50 100 C 22.392 100 0 77.616 0 50 Z",InternalStorage:"M 0 3.81946A 2.5,3.81946 0 0,1 2.5,0L 47.5 0A 2.5,3.81946 0 0,1 50,3.81946L 50 45.836A 2.5,3.819446 0 0,1 47.5,49.652778L 2.5 49.652778A 2.5,3.819446 0 0,1 0,45.8336L 0 3.819446ZM 0 11.45834L 50 11.4583334M 12.5 0L 12.5 49.652778",Extract:"M0,35 L30,0 L60,35 Z",ManualOperation:"M46.4,28.8 L14.8,28.8 L0,0 L60,0 Z",Merge:"M60,0 L30,35 L0,0 Z",OffPageReference:"M60,33.3 L30.1,39 L0,33.3 L0,0 L60,0 Z",SequentialAccessStorage:"M 60 30 C 60 13.4 46.6 0 30 0 S 0 13.4 0 30 s 13.4 30 30 30 h 28.6 v -6.5 h -9.9C 55.5 48 60 39.5 60 30 Z",Annotation:"M49.9984,50.0029 L-0.00271199,50.0029 L-0.00271199,0.00286865 L49.9984,0.00286865",Annotation2:"M49.9977,50.0029 L25.416,50.0029 L25.416,0.00286865 L49.9977,0.00286865 M25.4166,25.0029 L-0.00227869,25.0029",Data:"M 10 0 L 40 0 L 30 40 L 0 40 Z",Card:"M275,60 L400,60 L400,110 L260,110 L260,75 Z",Delay:"M0,0 L12.029,0 C14.212999,0 16,1.7869979 16,3.9709952 C16,6.1549926 14.212999,7.9409904 12.029,7.9409904 L0,7.9409904 z",Preparation:"M 1048.17 572 C 1051.06 568.86 1055.17 567.05 1059.5 567 L 1094.51 567 C 1098.84 567.05 1102.95 568.86 1105.84 572 L 1126.43 595 C 1127.01 596.28 1127.01 597.72 1126.43 599 L 1105.84 622 C 1102.95 625.14 1098.84 626.95 1094.51 627 L 1059.5 627 C 1055.17 626.95 1051.06 625.14 1048.17 622 L 1027.58 599 C 1027 597.72 1027 596.28 1027.58 595 L 1048.17 572 Z",Display:"M47.8809,19.2914 L32.7968,-0.00594145 L11.3902,-0.00594145 C7.93166,-0.00594145 0.00124586,11.187 0.00124586,24.9968C0.00124586,38.8032 7.93166,49.9962 11.3902,49.9962 L32.7968,49.99 L47.615,31.038 C47.615,31.0388 52.798,24.9968 47.880,19.2914 z",ManualInput:"M 912 732 L 1006.85 707 C 1008.2 707 1009.5 707.53 1010.46 708.46 C 1011.41 709.4 1011.95 710.67 1011.95 712 L 1011.95 762C 1012 764.41 1010.28 766.52 1007.87 767 L 917.1 767 C 915.75 767 914.45 766.47 913.49 765.54 C 912.54 764.6 912 763.33 912 762 L 912 732 Z",LoopLimit:"M 8 9 L 27 9 L 33 15 L 33 26 C 33 27 33 27 32 27 L 4 27 C 3 27 2 27 2 26 L 2 15 L 8 9 Z",StoredData:"M 5.55 0L 50 0A 1.5,30 0 0,1 50,0A 5.555,25 0 0,0 50,50A 1.5,30 0 0,1 50,50L 5.555 50A 5.55,25 0 0,1 5.555,0Z"};function Pu(t,e){var i;return i=function(t,e,i,n){var r,o,s=t.sourceWrapper,a=t.targetWrapper,l=t.sourcePortWrapper,h=t.targetPortWrapper,c=[],d={corners:void 0,point:e,direction:void 0,margin:{left:5,right:5,bottom:5,top:5}},p={corners:void 0,point:i,direction:void 0,margin:{left:5,right:5,bottom:5,top:5}};void 0!==s&&void 0!==a&&(r=ub(s),o=ub(a),d.corners=s.corners,p.corners=a.corners);if(void 0!==l){var u={x:l.offsetX,y:l.offsetY};d.direction=rf(u,r,s.bounds,!1)}if(void 0!==h){var f={x:h.offsetX,y:h.offsetY};p.direction=rf(f,o,a.bounds,!1)}if(void 0!==s&&void 0!==a)return void 0!==d.direction&&void 0!==p.direction||(n?function(t,e,i){"LeftToRight"===i?(t.direction=t.direction?t.direction:"Right",e.direction=e.direction?e.direction:"Left"):"RightToLeft"===i?(t.direction=t.direction?t.direction:"Left",e.direction=e.direction?e.direction:"Right"):"TopToBottom"===i?(t.direction=t.direction?t.direction:"Bottom",e.direction=e.direction?e.direction:"Top"):"BottomToTop"===i&&(t.direction=t.direction?t.direction:"Top",e.direction=e.direction?e.direction:"Bottom")}(d,p,n):d.corners.top>p.corners.bottom&&Math.abs(d.corners.top-p.corners.bottom)>d.margin.top+d.margin.bottom?(d.direction=d.direction?d.direction:"Top",p.direction=p.direction?p.direction:"Bottom"):d.corners.bottom<p.corners.top&&Math.abs(d.corners.bottom-p.corners.top)>d.margin.bottom+d.margin.top?(d.direction=d.direction?d.direction:"Bottom",p.direction=p.direction?p.direction:"Top"):d.corners.right<p.corners.left&&Math.abs(d.corners.right-p.corners.left)>d.margin.right+d.margin.left||d.corners.right+13<p.corners.left||p.corners.right>=d.corners.left-13&&d.corners.left>p.corners.left?(d.direction=d.direction?d.direction:"Right",p.direction=p.direction?p.direction:"Left"):d.corners.left>p.corners.right&&Math.abs(d.corners.left-p.corners.right)>d.margin.left+d.margin.right||p.corners.right+13<d.corners.left||d.corners.right>=p.corners.left-13&&d.corners.left<p.corners.left?(d.direction=d.direction?d.direction:"Left",p.direction=p.direction?p.direction:"Right"):s.id!==a.id&&!r.equals(r,o)&&o.containsPoint(r.topCenter,d.margin.top)?(d.direction=d.direction?d.direction:"Bottom",p.direction=p.direction?p.direction:"Top"):(d.direction=d.direction?d.direction:"Top",p.direction=p.direction?p.direction:"Bottom")),function(t,e,i,n,r){var o,s=t.sourceWrapper,a=t.targetWrapper,l=t.sourcePortWrapper,h=t.targetPortWrapper,c=[],d=s.corners,p=a.corners,u=(p.center,{corners:d,point:n,direction:e,margin:{left:5,right:5,bottom:5,top:5}}),f={corners:p,point:r,direction:i,margin:{left:5,right:5,bottom:5,top:5}},g=Du(s,d,t.sourceWrapper.bounds),m=Du(a,p,t.targetWrapper.bounds),y=!1;t.sourceWrapper&&t.targetWrapper&&(y=function(t,e,i){for(var n=Mu(t,i.sourcePadding),r=Mu(e,i.targetPadding),o=0;o<n.length-1;o++)for(var s=n[o],a=0;a<r.length-1;a++){var l=r[a];if(qm(s,l).enabled)return!0}return!1}(t.sourceWrapper,t.targetWrapper,t));if(void 0!==l){switch(u.point={x:l.offsetX,y:l.offsetY},u.direction){case"Bottom":case"Top":u.point.y=u.point.y;break;case"Left":case"Right":u.point.x=u.point.x}t.sourcePadding&&!y&&(h&&(f.point={x:h.offsetX,y:h.offsetY}),u.point=ku(t,u,f,!1))}else"Orthogonal"===t.type?(t.segments&&t.segments.length>0&&t.segments[0].direction&&(u.direction=t.segments[0].direction),u.point=Uu(g,u.direction),o=Uu(g,sf(u.direction)),u.point=qu(t,s,u.point,o,!1)):u.point=s.corners.center;if(void 0!==h){switch(f.point={x:h.offsetX,y:h.offsetY},f.direction){case"Bottom":case"Top":f.point.y=f.point.y;break;case"Left":case"Right":f.point.x=f.point.x}t.targetPadding&&!y&&(f.point=ku(t,u,f,!0))}else"Orthogonal"===t.type?(f.point=Uu(m,f.direction),o=Uu(m,sf(f.direction)),f.point=qu(t,a,f.point,o,!0)):f.point=a.corners.center;if("Orthogonal"!==t.type){var v=void 0,b=void 0;if(ju(t),void 0===t.sourcePortWrapper){u.point=u.corners.center,t.segments&&t.segments.length>0&&(b=t.segments[0],v=qd.isEmptyPoint(b.point)?void 0:b);var w=void 0!==v?v.point:f.point;if("Bezier"===t.type&&t.segments.length>0&&t.segments[0].vector1.angle&&t.segments[0].vector1.distance){var S=Math.max(u.corners.width,u.corners.height);w=qd.transform(u.point,t.segments[0].vector1.angle,S/2)}u.point=y?t.sourceWrapper.bounds.center:qu(t,s,u.point,w,!1)}if(void 0===t.targetPortWrapper){f.point=f.corners.center,t.segments&&t.segments.length>1&&(b=t.segments[t.segments.length-2],v=qd.isEmptyPoint(b.point)?void 0:b);var x=v?v.point:u.point;if("Bezier"===t.type&&t.segments.length>0&&t.segments[t.segments.length-1].vector2.angle&&t.segments[t.segments.length-1].vector2.distance){var S=Math.max(u.corners.width,u.corners.height);x=qd.transform(f.point,t.segments[0].vector2.angle,S/2)}f.point=y?t.targetWrapper.bounds.center:qu(t,a,x,f.point,!0)}c=Ru(t,u,f)}else if("Orthogonal"===t.type&&t.segments&&t.segments.length>0&&null!==t.segments[0].direction)c=function(t,e,i,n,r,o,s){var a,l,h,c;ju(t);for(var d=0;d<t.segments.length;d++){if(l=t.segments[d],n&&e.direction===sf(l.direction)&&(l.direction=e.direction),d>0&&t.segments[d-1].direction===l.direction)d=Nu(t,d,e);else if(l.direction)e.point=Ou(e,t.segments[d]);else{var p=t.segments[d-1];e.point=p.points[p.points.length-1]}if(d===t.segments.length-1)if(_u(t,e),Bu(a=void 0===r?Hu(t,e,i):Tu(t,e,i),t,e),l.points=[],a.length>=2)for(h=0;h<a.length;h++)l.points.push(a[h]);else c=d;if(void 0!==c&&(c===t.segments.length-1&&(t.segments[c-1].direction=null,t.segments[c-1].length=null),t.segments.splice(c,1)),n&&0===d){var u=Au(t,n,o);u&&(e.point=u)}}return Vu(t,[])}(t,u,f,l,h,s);else{if(!t.segments[0]){var v=new Df(t,"segments",{type:"Orthogonal"},!0);t.segments.push(v)}t.segments[0].points=c=function(t,e,i,n){var r,o=!1;(o=function(t,e){var i=!1;switch(t){case"Left":switch(e){case"Right":case"Bottom":i=!0}break;case"Top":switch(e){case"Left":case"Right":case"Bottom":i=!0}break;case"Bottom":switch(e){case"Right":i=!0}}return i}(e.direction,i.direction))&&nf(e,i);"Right"===e.direction&&"Left"===i.direction?r=function(t,e,i,n){var r,o=t.sourcePortWrapper,s=(t.targetPortWrapper,Math.round(Math.abs(e.point.y-i.point.y))),a=(Math.round(Math.abs(e.point.x-i.point.x)),{x:Math.max(e.point.x,e.corners.right),y:e.point.y}),l={x:Math.min(i.point.x,i.corners.left),y:i.point.y},h=10;if(n){var c=void 0;c=l,l=a,a=c}e.corners.bottom+h<i.corners.top-h||e.corners.top-h>i.corners.bottom+h||(h=0);e.margin={left:h,right:h,top:h,bottom:h},i.margin={left:h,right:h,top:h,bottom:h},r=0===s&&(e.corners.right<i.corners.left||n&&e.corners.right<i.corners.left)?Bp.One:e.point.x+e.margin.right<i.point.x-i.margin.left?Bp.Three:t.sourceWrapper!==t.targetWrapper&&(ub(t.sourceWrapper).containsPoint(l)||ub(t.targetWrapper).containsPoint(a))?Bp.Three:e.corners.bottom<=i.corners.top?Bp.Five:e.corners.top>=i.corners.top?Bp.Five:void 0!==o&&o.offsetY<=i.corners.top||void 0===o&&e.corners.right<=i.corners.top?Bp.Five:(void 0!==o&&o.offsetY>=i.corners.bottom||void 0===o&&(e.corners.right,i.corners.bottom),Bp.Five);return r}(t,e,i,o):"Right"===e.direction&&"Right"===i.direction?r=function(t,e,i){var n,r=t.sourcePortWrapper,o=t.targetPortWrapper,s=e.point.x-i.point.x,a=e.point.y-i.point.y;i.margin={left:10,right:10,top:10,bottom:10},e.margin={left:10,right:10,top:10,bottom:10},n=e.corners.right>=i.corners.right?void 0!==r&&(r.offsetY<i.corners.top||r.offsetY>i.corners.bottom)||void 0===r&&e.corners.middleRight.y<i.corners.top?Bp.Three:void 0!==r&&r.offsetY>i.corners.bottom+i.margin.bottom&&e.corners.top>i.corners.bottom||void 0===r&&e.corners.middleRight.y>i.corners.bottom?Bp.Three:void 0!==r&&r.offsetY<i.corners.top&&e.corners.bottom>i.corners.top||void 0===r&&e.corners.middleRight.y>i.corners.bottom?Bp.Three:e.corners.right<i.corners.left||i.corners.right<e.corners.left?Bp.Five:0===s||0===a?Bp.One:Bp.Three:void 0!==o&&e.corners.bottom<o.offsetY||void 0===o&&e.corners.bottom<i.corners.middleRight.y?Bp.Three:void 0!==o&&e.corners.top>o.offsetY||void 0===o&&e.corners.top>i.corners.middleRight.y?Bp.Three:void 0!==o&&(void 0!==r&&r.offsetX<i.corners.left&&r.offsetX!==o.offsetX&&r.offsetY!==o.offsetY&&Math.abs(e.corners.right-i.corners.left)<=20||void 0===r&&e.corners.right<i.corners.left&&e.corners.center.x!==i.corners.center.x&&e.corners.center.y!==i.corners.center.y)?Bp.Three:e.corners.right<i.corners.left?Bp.Five:0===s||0===a?Bp.One:Bp.Three;return n}(t,e,i):"Right"===e.direction&&"Top"===i.direction?r=function(t,e,i,n){var r,o=t.targetPortWrapper,s=t.sourcePortWrapper,a={x:Math.max(e.point.x,e.corners.right),y:e.point.y},l={x:i.point.x,y:Math.min(i.point.y,i.corners.top)};if(i.margin={left:5,right:5,top:5,bottom:5},e.margin={top:5,bottom:5,left:5,right:5},n){var h=void 0;h=s,s=o,o=h}r=void 0!==s&&s.offsetY<i.corners.top-i.margin.top||void 0===s&&e.corners.bottom<i.corners.top-i.margin.top?e.corners.bottom<i.corners.top?void 0!==o&&e.corners.right+e.margin.right<o.offsetX||void 0===o&&e.corners.right+e.margin.right<i.corners.topCenter.x?Bp.Two:Bp.Four:void 0!==o&&e.corners.left>o.offsetX||void 0===o&&e.corners.left>i.corners.topCenter.x?Bp.Four:Bp.Two:void 0!==s&&Math.abs(e.corners.right-i.corners.left)<=25&&Math.abs(s.offsetY-i.corners.top)<=25?Bp.Two:void 0!==o&&Math.abs(o.offsetX-e.corners.topCenter.x)>=25&&e.corners.middleRight.y<o.offsetY?Bp.Two:e.corners.right<i.corners.left?Bp.Four:t.sourceWrapper!==t.targetWrapper&&(ub(t.sourceWrapper).containsPoint(l)||ub(t.targetWrapper).containsPoint(a))?Bp.Two:Bp.Four;return r}(t,e,i,o):"Right"===e.direction&&"Bottom"===i.direction?r=function(t,e,i,n){var r;e.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10};var o=t.sourcePortWrapper,s=t.targetPortWrapper;Math.max(e.point.x,e.corners.right),e.point.y,i.point.x,Math.max(i.point.y,i.corners.bottom);if(n){var a=void 0;a=o,o=s,s=a}r=void 0!==o&&o.offsetY>i.corners.bottom+i.margin.bottom||void 0===o&&e.corners.middleRight.y>i.corners.bottom+i.margin.bottom?e.corners.top>i.corners.bottom?void 0!==s&&e.corners.right+e.margin.right<s.offsetX||void 0===s&&e.corners.right+e.margin.right<i.corners.bottomCenter.x?Bp.Two:Bp.Four:void 0!==s&&e.corners.left>s.offsetX||void 0===s&&e.corners.left>i.corners.bottomCenter.x?Bp.Four:Bp.Two:void 0!==o&&Math.abs(e.corners.right-i.corners.left)<=25&&Math.abs(o.offsetY-i.corners.bottom)<=25?Bp.Two:(e.corners.right,i.corners.left,Bp.Four);return r}(t,e,i,o):"Bottom"===e.direction&&"Top"===i.direction?r=function(t,e){var i,n=t.point.x-e.point.x,r=(t.point.y,e.point.y,t.point.x,Math.max(t.point.y,t.corners.bottom),e.point.x,Math.min(e.point.y,e.corners.top),10);t.corners.right+r<e.corners.left-r||t.corners.left-r>e.corners.right+r||(r=0);t.margin={left:r,right:r,top:r,bottom:r},e.margin={left:r,right:r,top:r,bottom:r},i=0===n&&t.corners.bottom<e.corners.top?Bp.One:t.corners.bottom+t.margin.bottom<e.corners.top-e.margin.top?Bp.Three:t.corners.right+t.margin.right<e.corners.left-e.margin.left?Bp.Five:(t.corners.left,t.margin.left,e.corners.right,e.margin.right,Bp.Five);return i}(e,i):"Bottom"===e.direction&&"Bottom"===i.direction?(e.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10},r=function(t,e,i){var n,r=t.sourcePortWrapper,o=t.targetPortWrapper,s=Math.round(Math.abs(e.point.x-i.point.x)),a=Math.round(Math.abs(i.point.y-i.point.y));n=e.corners.bottom<i.corners.bottom?void 0!==r&&r.offsetX<i.corners.left-i.margin.left||void 0===r&&e.corners.bottomCenter.x<i.corners.left-i.margin.left?Bp.Three:void 0!==r&&r.offsetX>i.corners.right+i.margin.right||void 0===r&&e.corners.bottomCenter.x>i.corners.right+i.margin.right?Bp.Three:e.corners.bottom<i.corners.top?Bp.Five:0===s||0===a?Bp.One:Bp.Three:void 0!==o&&e.corners.left>o.offsetX||void 0===o&&e.corners.left>i.corners.left?Bp.Three:void 0!==o&&e.corners.right<o.offsetX||void 0===o&&e.corners.right<i.corners.right?Bp.Three:e.corners.top>i.corners.bottom?Bp.Five:0===s||0===a?Bp.One:Bp.Three;return n}(t,e,i)):"Bottom"===e.direction&&"Left"===i.direction?r=function(t,e,i,n){var r,o=t.sourcePortWrapper,s=t.targetPortWrapper;e.point.x,Math.max(e.point.y,e.corners.bottom),Math.min(i.point.x,i.corners.left),i.point.y;if(n){var a=void 0;a=o,o=s,s=a}r=void 0!==o&&o.offsetX<i.corners.left-i.margin.left||void 0===o&&e.corners.bottomCenter.x<i.corners.bottomLeft.x-i.margin.left?e.corners.right<i.corners.left?void 0!==s&&e.corners.bottom+e.margin.bottom<s.offsetY||void 0===s&&e.corners.bottom+e.margin.bottom<i.corners.middleLeft.y?Bp.Two:Bp.Four:void 0!==s&&e.corners.top>s.offsetY||void 0===s&&e.corners.top>i.corners.middleLeft.y?Bp.Four:Bp.Two:void 0!==s&&Math.abs(e.corners.right-i.corners.left)<=25&&Math.abs(s.offsetY-e.corners.bottom)<=25?Bp.Two:Bp.Four;return r}(t,e,i,o):"Left"===e.direction&&"Left"===i.direction?r=function(t,e,i){var n=t.sourcePortWrapper,r=t.targetPortWrapper;e.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10};var o,s=Math.round(Math.abs(e.point.x-i.point.x)),a=Math.round(Math.abs(e.point.y-i.point.y));o=e.corners.left<i.corners.left?void 0!==r&&e.corners.bottom+e.margin.bottom<r.offsetY||void 0===r&&e.corners.bottom+e.margin.bottom<i.corners.middleLeft.y?Bp.Three:void 0!==r&&e.corners.top-e.margin.top>r.offsetY||void 0===r&&e.corners.top-e.margin.top>i.corners.middleLeft.y?Bp.Three:e.corners.right<i.corners.left||i.corners.right<e.corners.left?Bp.Five:0===s||0===a?Bp.One:Bp.Three:void 0!==n&&n.offsetY<i.corners.top-i.margin.top||void 0===n&&e.corners.middleLeft.y<i.corners.top?Bp.Three:void 0!==n&&n.offsetY>i.corners.bottom+i.margin.bottom||void 0===n&&e.corners.middleLeft.y>i.corners.bottom+i.margin.bottom?Bp.Three:e.corners.left>i.corners.right?Bp.Five:0===s||0===a?Bp.One:Bp.Three;return o}(t,e,i):"Left"===e.direction&&"Top"===i.direction?r=function(t,e,i,n){var r,o=t.sourcePortWrapper,s=t.targetPortWrapper,a={x:Math.min(e.point.x,e.corners.left),y:e.point.y},l={x:i.point.x,y:Math.min(i.point.y,i.corners.top)};if(n){var h=void 0;h=o,o=s,s=h}r=void 0!==o&&o.offsetY<i.corners.top-i.margin.top||void 0===o&&(e.corners.bottom<i.corners.top-i.margin.top||e.corners.middleLeft.y<i.corners.top-i.margin.top)?e.corners.bottom<i.corners.top?void 0!==s&&e.corners.left-e.margin.left>s.offsetX||void 0===s&&e.corners.left-e.margin.left>i.corners.topCenter.x?Bp.Two:Bp.Four:void 0!==s&&e.corners.right<s.offsetX||void 0===s&&e.corners.right<i.corners.topCenter.x?Bp.Four:Bp.Two:void 0!==o&&Math.abs(e.corners.left-i.corners.right)<=25&&Math.abs(o.offsetY-i.corners.top)<=25?Bp.Two:t.sourceWrapper!==t.targetWrapper&&(ub(t.sourceWrapper).containsPoint(l)||ub(t.targetWrapper).containsPoint(a))?Bp.Two:(e.corners.left,i.corners.right,Bp.Four);return r}(t,e,i,o):"Top"===e.direction&&"Top"===i.direction&&(r=function(t,e,i){var n,r=t.sourcePortWrapper,o=t.targetPortWrapper,s=Math.round(Math.abs(e.point.x-i.point.x)),a=Math.round(Math.abs(e.point.y-i.point.y));e.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10},n=e.corners.top<i.corners.top?void 0!==o&&e.corners.left>o.offsetX||void 0===o&&e.corners.left>i.corners.left?Bp.Three:void 0!==o&&e.corners.right<o.offsetX||void 0===o&&e.corners.right<i.corners.right?Bp.Three:e.corners.bottom<i.corners.top?Bp.Five:0===s||0===a?Bp.One:Bp.Three:void 0!==r&&r.offsetX>i.corners.right||void 0===r&&e.corners.left>i.corners.right?Bp.Three:void 0!==r&&r.offsetX<i.corners.left||void 0===r&&e.corners.bottomRight.x<i.corners.left?Bp.Three:e.corners.top>i.corners.bottom?Bp.Five:0===s||0===a?Bp.One:Bp.Three;return n}(t,e,i));o&&nf(e,i);return function(t,e,i,n,r){var o,s=t.sourceWrapper,a=t.targetWrapper,l=(t.targetPortWrapper,s.corners),h=a.corners,c=20;if(!(i.direction===n.direction&&e!==Bp.Five||i.direction!==sf(n.direction)&&e!==Bp.Three))switch(i.direction){case"Left":l.middleLeft.x>h.middleRight.x&&(c=Math.min(c,(l.middleLeft.x-h.middleRight.x)/2));break;case"Right":l.middleRight.x<h.middleLeft.x&&(c=Math.min(c,(h.middleLeft.x-l.middleRight.x)/2));break;case"Top":l.topCenter.y>h.bottomCenter.y&&(c=Math.min(c,(l.topCenter.y-h.bottomCenter.y)/2));break;case"Bottom":l.bottomCenter.y<h.topCenter.y&&(c=Math.min(c,(h.topCenter.y-l.bottomCenter.y)/2))}if(c=Ju(l,i,c),r&&(c=Math.max(c,r)),e===Bp.One&&(o=[i.point,n.point]),e===Bp.Two&&(o=Qu(i,n)),e===Bp.Three&&(o=$u(t,i,n,c)),e===Bp.Four){var d=void 0;o=tf(i,n,d,o,c)}return e===Bp.Five&&(o=function(t,e,i){void 0===i&&(i=20);var n,r,o=i,s=t.corners.left-t.margin.left,a=t.corners.right+t.margin.right,l=t.corners.bottom+t.margin.bottom,h=t.corners.top-t.margin.top,c=e.corners.left-e.margin.left,d=e.corners.right+e.margin.right,p=e.corners.bottom+e.margin.bottom,u=e.corners.top-e.margin.top;switch(t.direction){case"Left":(h>u&&h<p||l<p&&l>u)&&s>c&&s<=d&&i>=20&&(o=t.point.x-e.corners.left+o),r=Gu(t.point,o,180);break;case"Top":(s>c&&s<d||a<d&&a>c)&&h>u&&h<=p&&i>=20&&(o=t.point.y-e.corners.top+o),r=Gu(t.point,o,270);break;case"Right":(h>u&&h<p||l<p&&l>u)&&a<d&&a>=c&&i>=20&&(o=e.corners.right-t.point.x+o),r=Gu(t.point,o,0);break;case"Bottom":(s>c&&s<d||a<d&&a>c)&&l<p&&l>=u&&i>=20&&(o=e.corners.bottom-t.point.y+o),r=Gu(t.point,o,90)}if(n=[t.point,r],"Top"===t.direction||"Bottom"===t.direction){var f=t.direction;t.direction=r.x>e.point.x?"Left":"Right",t.point=r,n=tf(t,e,f,n)}else{var f=t.direction;t.direction=r.y>e.point.y?"Top":"Bottom",t.point=r,n=tf(t,e,f,n)}return n}(i,n,c)),o}(t,r,e,i,n)}(t,u,f)}return c}(t,d.direction,p.direction,d.point,p.point);ju(t),(t.sourceWrapper||t.targetWrapper)&&function(t,e,i){var n,r=t.sourcePortWrapper,o=t.targetPortWrapper,s=t.sourceWrapper,a=e.point,l={left:0,right:0,top:0,bottom:0},h={x:0,y:0},c="Top";s?(a=i.point,l=e.margin):(s=t.targetWrapper,l=i.margin);if("Orthogonal"===t.type)if(t.segments&&t.segments.length>0&&t.sourceWrapper&&t.segments[0].direction)e.direction=t.segments[0].direction,h=Uu(s.corners,e.direction),n=Uu(s.corners,sf(e.direction)),h=qu(t,s,h,n,!1);else{var d={corners:null,direction:null,point:a,margin:l},p={corners:null,direction:null,point:null,margin:null};Fu(s,d,p,t),h=p.point,c=p.direction}else{var u=void 0;t.segments&&t.segments.length>1&&(u=s===t.sourceWrapper?t.segments[0].point:t.segments[t.segments.length-2].point),h=qu(t,s,s.bounds.center,t.segments&&t.segments.length>1?u:a,s===t.targetWrapper)}s===t.sourceWrapper?(e.direction=e.direction||c,e.point=h,t.sourcePortWrapper&&(e.point={x:r.offsetX,y:r.offsetY},t.sourcePadding&&(e.point=ku(t,e,i,!1)))):(i.direction=i.direction||c,i.point=h,t.targetPortWrapper&&(i.point={x:o.offsetX,y:o.offsetY},t.targetPadding&&(i.point=ku(t,e,i,!0))))}(t,d,p);if("Straight"===t.type||"Bezier"===t.type)c=Ru(t,d,p);else if("Orthogonal"===t.type&&t.segments&&t.segments.length>0&&null!==t.segments[0].length&&null!==t.segments[0].direction)c=function(t,e,i,n,r,o,s){var a,l,h,c,d,p=[];if(ju(t),t.segments.length>0){for(var u=0;u<t.segments.length;u++){var f=t.segments[u];if(0===u&&void 0!==t.sourcePortWrapper&&(c={x:o.offsetX,y:o.offsetY},h=rf(c,ub(n),n.bounds,!1),f.direction===sf(h)&&(f.direction=h)),u>0&&t.segments[u-1].direction===f.direction)u=Nu(t,u,e);else{var g=t.segments[u-1];e.point=f.direction?Ou(e,f):g.points[g.points.length-1]}if(u===t.segments.length-1&&(s||r?t.targetWrapper&&void 0===t.targetPortWrapper?(_u(t,e),l=Lu(t,e,i)):l=Tu(t,e,i):l=Eu(t,e,i),l))if(Bu(l,t,e),f.points=[],l.length>=2)for(a=0;a<l.length;a++)f.points.push(l[a]);else d=u;if(o&&0===u){var m=Au(t,o,n);m&&(e.point=m)}}void 0!==d&&(d===t.segments.length-1&&(t.segments[d-1].direction=null,t.segments[d-1].length=null),t.segments.splice(d,1)),p=Vu(t,p)}return p}(t,d,p,s,a,l,h);else{var g=void 0;d.direction?g=Ju(s.bounds,d,20):d.direction=p.direction?void 0!==t.targetPortWrapper?p.direction:sf(p.direction):qd.direction(d.point,p.point),t.segments[0].points=c=$u(t,d,p,g)}return c}(t,"Straight"!==t.type&&t.sourceWrapper?t.sourceWrapper.corners.center:function(t){var e;if(t.sourcePortWrapper){var i=t.sourcePortWrapper,n=t.sourceWrapper,r={x:i.offsetX,y:i.offsetY};rf(r,ub(n),n.bounds,!1);e=r}else if(t.sourceID&&t.sourceWrapper)if(t.targetWrapper){var o=t.sourceWrapper.corners.center,s=t.targetWrapper.corners.center;e=qu(t,t.sourceWrapper,o,s,!1)}else e=t.sourcePoint;else e=t.sourcePoint;return e}(t),t.targetPoint,e),Xu(t,i[0],!1),Xu(t,i[i.length-1],!0),i}function Ou(t,e){var i,n,r;return t.direction=e.direction,e.points=[],e.points.push(t.point),r="Left"===e.direction||"Top"===e.direction?-e.length:e.length,n="Left"===e.direction||"Right"===e.direction?0:90,i=Gu(t.point,r,n),e.points.push(i),i}function Eu(t,e,i){var n,r,o,s;(e.corners=t.sourceWrapper?t.sourceWrapper.corners:void 0,t.sourcePortWrapper)&&(o=rf({x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY},ub(t.sourceWrapper),t.sourceWrapper.bounds,!1),!e.corners||"Bottom"!==e.direction&&"Top"!==e.direction?!e.corners||"Left"!==e.direction&&"Right"!==e.direction||i.point.y>e.corners.top&&i.point.y<e.corners.bottom&&(r=e.point.x>i.point.x?"Left":"Right"):i.point.x>e.corners.left&&i.point.x<e.corners.right&&(r=e.point.y>i.point.y?"Top":"Bottom"));t.sourcePortWrapper&&o===sf(r)?(("Left"===o||"Right"===o)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.center.y&&i.point.y>=e.corners.top&&i.point.y<=e.corners.center.y?(e.direction="Top",s=e.point.y-e.corners.top+20):("Left"===o||"Right"===o)&&e.point.y>e.corners.center.y&&e.point.y<=e.corners.bottom&&i.point.y>e.corners.center.y&&i.point.y<=e.corners.bottom?(e.direction="Bottom",s=e.corners.bottom-e.point.y+20):("Top"===o||"Bottom"===o)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.center.x&&i.point.x>=e.corners.left&&i.point.x<=e.corners.center.x?(e.direction="Left",s=e.point.x-e.corners.left+20):("Top"===o||"Bottom"===o)&&e.point.x<=e.corners.right&&e.point.x>e.corners.center.x&&i.point.x<=e.corners.right&&i.point.x<e.corners.center.x&&(e.direction="Right",s=e.corners.right-e.point.x+20),e.direction&&s&&(n=$u(t,e,i,s,!0))):(e.direction=r||zu(e.direction,e.point,i.point),n=Qu(e,i));return n}function Lu(t,e,i){var n;i.corners=t.targetWrapper.corners,Fu(t.targetWrapper,e,i,t);var r=zu(i.direction,e.point,i.point);e.direction!==i.direction||"Left"!==e.direction&&"Right"!==e.direction?(e.direction=r,n=Qu(e,i)):(e.direction=r,n=$u(t,e,i,t.targetWrapper.width/2+20),e.point=n[1],Fu(t.targetWrapper,e,i,t),n=$u(t,e,i));return n}function Iu(t,e,i){var n,r,o;i.corners=t.targetWrapper.corners,"Left"!==e.direction&&"Right"!==e.direction?i.corners.center.y!==e.point.y||i.corners.left<=e.point.x&&e.point.x<=i.corners.right?i.corners.center.y===e.point.y&&"Bottom"===t.segments[t.segments.length-2].direction||i.corners.center.y>e.point.y&&e.point.y>=i.corners.top?(r="Top",o=e.point.y-i.corners.top+20):i.corners.center.y===e.point.y&&"Top"===t.segments[t.segments.length-2].direction||i.corners.center.y<e.point.y&&e.point.y<=i.corners.bottom?(r="Bottom",o=i.corners.bottom-e.point.y+20):void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&e.corners.top<=e.point.y&&e.point.y<=e.corners.bottom&&(r=e.direction,o=e.point.y>i.point.y?e.point.y-e.corners.top+20:e.corners.bottom-e.point.y+20):(r="Top",o=i.corners.height/2+20):i.corners.center.x!==e.point.x||i.corners.top<e.point.y&&e.point.y<=i.corners.bottom?i.corners.center.x===e.point.x&&"Right"===t.segments[t.segments.length-2].direction||i.corners.center.x>e.point.x&&e.point.x>=i.corners.left?(r="Left",o=e.point.x-i.corners.left+20):i.corners.center.x===e.point.x&&"Left"===t.segments[t.segments.length-2].direction||i.corners.center.x<=e.point.x&&e.point.x<=i.corners.right?(r="Right",o=i.corners.right-e.point.x+20):void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&e.corners.left<=e.point.x&&e.point.x<=e.corners.right&&(r=e.direction,o=e.point.x>i.point.x?e.point.x-e.corners.left+20:e.corners.right-e.point.x+20):(r="Left",o=i.corners.width/2+20);var s="Left"===r||"Top"===r?-o:o,a="Left"===r||"Right"===r?0:90;n=e.point,e.point=Gu(e.point,s,a),e.direction=qd.direction(e.point,i.point),void 0===t.sourcePortWrapper||void 0===t.targetPortWrapper||e.corners.center.x!==i.corners.center.x&&e.corners.center.y!==i.corners.center.y||(e.direction=i.direction);var l=$u(t,e,i);return l.splice(0,0,n),l}function Tu(t,e,i){var n,r;(i.corners=t.targetWrapper.corners,void 0!==t.sourcePortWrapper)&&(r=rf({x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY},ub(t.sourceWrapper),t.sourceWrapper.bounds,!1));var o=function(t,e,i,n){var r=!1;switch(i.direction){case"Left":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&"Right"===n&&e.point.x>i.point.x&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom||("Bottom"===n&&e.point.y>i.point.y||"Top"===n&&e.point.y<i.point.y)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right?(e.direction="Right"===n?e.point.y>i.point.y?"Top":"Bottom":e.point.x<i.point.x?"Right":"Left",r=!0):e.point.x>i.point.x&&(e.point.y>i.point.y||e.point.y<i.point.y)&&!(i.corners.top>e.point.y&&i.corners.bottom<e.point.y)?e.direction="Left":e.point.x<i.point.x&&e.point.y>i.point.y||e.point.x>i.point.x&&e.point.y<=i.point.y&&i.corners.top<e.point.y&&i.corners.center.y>=e.point.y?e.direction="Top":e.point.x<i.point.x&&e.point.y<i.point.y||e.point.x>i.point.x&&e.point.y>i.point.y&&i.corners.bottom<e.point.y&&i.corners.center.y>e.point.y?e.direction="Bottom":e.point.y===i.point.y&&e.point.x<i.point.x&&(e.direction="Right");break;case"Right":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&("Bottom"===n&&e.point.y>i.point.y||"Top"===n&&e.point.y<i.point.y)&&e.point.x>i.point.x&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right?(e.direction=e.point.x>i.point.x?"Left":"Right",r=!0):void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&"Left"===n&&e.point.x<i.point.x&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom?(e.direction=e.point.y>i.point.y?"Top":"Bottom",r=!0):e.point.x<i.point.x&&i.corners.top<=e.point.y&&i.corners.bottom>=e.point.y&&e.point.y===i.point.y?e.direction="Top":e.point.y>i.point.y&&e.point.x>i.point.x?e.direction="Top":e.point.y<i.point.y&&e.point.x>i.point.x?e.direction="Bottom":e.point.x<i.point.x&&(e.point.y>i.point.y||e.point.y<i.point.y)?e.direction="Right":e.point.y===i.point.y&&e.point.x>i.point.x&&(e.direction="Left");break;case"Top":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&"Bottom"===n&&e.point.y>i.point.y&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right||("Right"===n&&e.point.x>i.point.x||"Left"===n&&i.point.y>e.point.y&&i.point.x>e.point.x)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom?(e.direction="Bottom"===n?e.point.x>i.point.x?"Left":"Right":e.point.y<i.point.y?"Bottom":"Top",r=!0):e.point.x===i.point.x&&e.point.y<i.point.y?e.direction="Bottom":e.point.y>i.point.y&&e.point.x>i.corners.left&&e.point.x<i.corners.right?e.direction="Left":e.point.y>=i.point.y?e.direction="Top":e.point.y<i.point.y&&e.point.x>i.point.x?e.direction="Left":e.point.y<i.point.y&&e.point.x<i.point.x&&(e.direction="Right");break;case"Bottom":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&(("Right"===n||"Left"===n&&i.point.x>e.point.x)&&e.point.y>i.point.y&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom||"Top"===n&&e.point.y<i.point.y&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right)?(e.direction="Right"===n||"Left"===n?e.point.y>i.point.y?"Top":"Bottom":e.point.x>i.point.x?"Left":"Right",r=!0):e.point.y<i.point.y&&e.point.x>i.corners.left&&i.corners.right>e.point.x?e.point.y<i.point.y&&e.point.x>i.corners.left&&i.corners.center.x>=e.point.x?e.direction="Left":e.point.y<i.point.y&&e.point.x<i.corners.right&&i.corners.center.x<e.point.x&&(e.direction="Right"):e.point.y>i.point.y&&e.point.x>i.point.x?e.direction="Left":e.point.y>i.point.y&&e.point.x<i.point.x?e.direction="Right":e.point.y<=i.point.y&&(e.point.x>i.point.x||i.point.x>e.point.x)&&(e.direction="Bottom")}return r}(t,e,i,r);return void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&i.direction===sf(r)&&(("Left"===i.direction&&e.point.x>i.point.x||"Right"===i.direction&&e.point.x<i.point.x)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom||"Bottom"===i.direction&&e.point.y<i.point.y&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right)?n=Iu(t,e,i):e.direction===i.direction?n=$u(t,e,i):("Left"===i.direction&&e.point.x>i.point.x||"Right"===i.direction&&e.point.x<i.point.x)&&("Top"===e.direction||"Bottom"===e.direction)&&e.point.y<=i.point.y&&i.corners.top<=e.point.y&&i.corners.bottom>=e.point.y||"Top"===i.direction&&e.point.y>i.point.y||"Bottom"===i.direction&&e.point.y<i.point.y&&i.corners.left<=e.point.x&&i.corners.right>=e.point.x?n=Iu(t,e,i):void 0!==t.sourceWrapper&&void 0!==t.targetWrapper&&void 0!==t.targetPortWrapper&&("Left"===e.direction||"Right"===e.direction)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom&&("Top"===i.direction||"Bottom"===i.direction)&&i.corners.center.x===e.corners.center.x?(e.direction="Top"===i.direction?"Bottom":"Top",n=$u(t,e,i,"Top"===i.direction?e.corners.bottom-e.point.y+20:e.point.y-e.corners.top+20)):void 0!==t.sourceWrapper&&void 0!==t.targetWrapper&&void 0!==t.targetPortWrapper&&("Top"===e.direction||"Bottom"===e.direction)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right&&("Left"===i.direction||"Right"===i.direction)&&i.corners.center.y===e.corners.center.y?(e.direction="Left"===i.direction?"Right":"Left",n=$u(t,e,i,"Left"===i.direction?e.corners.right-e.point.x+20:e.point.x-e.corners.left+20)):n=o?$u(t,e,i,"Left"===e.direction||"Right"===e.direction?"Left"===e.direction?e.point.x-e.corners.left+20:e.corners.right-e.point.x+20:"Top"===e.direction?e.point.y-e.corners.top+20:e.corners.bottom-e.point.y+20):Qu(e,i),n}function Au(t,e,i){var n,r={x:e.offsetX,y:e.offsetY},o=ub(i),s=rf(r,o,i.bounds,!1),a=t.segments[0];return a.direction!==s&&(!function(t,e,i,n,r,o){var s,a,l=[];l.push(n),n.y===r.y&&("Left"===e&&r.x<n.x||"Right"===e&&r.x>n.x)||n.x===r.x&&("Top"===e&&r.y<n.y||"Bottom"===e&&r.y>n.y)||("Top"===e||"Bottom"===e?"Top"===e&&r.y<n.y&&r.y>n.y-13||"Bottom"===e&&r.y>n.y&&r.y<n.y+13?(a="Top"===e?i.top-13:i.bottom+13,l.push({x:n.x,y:a}),l.push({x:n.x+(r.x-n.x)/2,y:a}),l.push({x:n.x+(r.x-n.x)/2,y:r.y})):Math.abs(n.x-r.x)>13&&("Top"===e&&r.y<n.y||"Bottom"===e&&r.y>n.y)?l.push({x:n.x,y:r.y}):(a="Top"===e?i.top-13:i.bottom+13,s=r.x<n.x?i.left-13:i.right+13,l.push({x:n.x,y:a}),l.push({x:r.x,y:a})):"Left"===e&&r.x<n.x&&r.x>n.x-13||"right"===e&&r.x>n.x&&r.x<n.x+13?(s="Left"===e?i.left-13:i.right+13,l.push({x:s,y:n.y}),l.push({x:s,y:n.y+(r.y-n.y)/2}),l.push({x:r.x,y:n.y+(r.y-n.y)/2})):Math.abs(n.y-r.y)>13&&("Left"===e&&r.x<n.x||"Right"===e&&r.x>n.x)?l.push({x:r.x,y:n.y}):(s="Left"===e?i.left-13:i.right+13,l.push({x:s,y:n.y}),l.push({x:s,y:r.y})),o&&(l.push(t.points[0]),l.reverse()),t.points=l)}(a,s,o,a.points[0],a.points[a.points.length-1],!1),n=a.points[a.points.length-1],a.direction=qd.direction(a.points[a.points.length-2],a.points[a.points.length-1])),n}function Bu(t,e,i){var n,r=e.segments[e.segments.length-2],o=r.points[r.points.length-1];("Top"!==r.direction&&"Bottom"!==r.direction||o.x!==t[1].x)&&("Left"!==r.direction&&"Right"!==r.direction||o.y!==t[1].y)||(r.points[r.points.length-1]=t[1],n=qd.direction(r.points[0],r.points[r.points.length-1]),void 0!==e.sourceWrapper&&void 0===e.sourcePortWrapper&&n===sf(r.direction)&&("Left"===r.direction||"Right"===r.direction?r.points[0].x="Right"===r.direction?r.points[0].x-e.sourceWrapper.corners.width:r.points[0].x+e.sourceWrapper.corners.width:r.points[0].y="Bottom"===r.direction?r.points[0].y-e.sourceWrapper.corners.height:r.points[0].y+e.sourceWrapper.corners.height),r.direction=n,r.length=qd.distancePoints(r.points[0],r.points[r.points.length-1]),t.splice(0,1))}function ku(t,e,i,n){var r=t.sourcePortWrapper,o=t.targetPortWrapper,s=n?t.targetPadding:t.sourcePadding,a=n?o:r,l=new np(a.bounds.x-s,a.bounds.y-s,a.actualSize.width+2*s,a.actualSize.height+2*s),h=[l.topLeft,l.topRight,l.bottomRight,l.bottomLeft];h[h.length]=h[0];h.length;var c={x1:e.point.x,y1:e.point.y,x2:i.point.x,y2:i.point.y},d=n?i.point:e.point;return Yu(c,h,!0,d)||d}function Mu(t,e){var i,n,r=[],o=Zm(t,t.corners,e);o.push(o[0]);for(var s=0;s<o.length-1;s++)r.push((i=o[s],n=o[s+1],void 0,{x1:i.x,y1:i.y,x2:n.x,y2:n.y}));return r}function Du(t,e,i){var n,r=t.rotateAngle+t.parentTransform;if(r){if(r<45)return e;if(r<=135)n={width:e.width,height:e.height,topLeft:e.bottomLeft,topCenter:e.middleLeft,topRight:e.topLeft,middleLeft:e.bottomCenter,center:i.center,middleRight:e.topCenter,bottomLeft:e.bottomRight,bottomCenter:e.middleRight,bottomRight:e.topRight,left:i.left,right:i.right,top:i.top,bottom:i.bottom};else if(r<=225)n={width:e.width,height:e.height,topLeft:e.bottomLeft,topCenter:e.bottomCenter,topRight:e.bottomRight,middleLeft:e.middleRight,center:i.center,middleRight:e.middleLeft,bottomLeft:e.topLeft,bottomCenter:e.topCenter,bottomRight:e.topRight,left:i.left,right:i.right,top:i.top,bottom:i.bottom};else{if(!(r<=315))return e;n={width:e.width,height:e.height,topLeft:e.topRight,topCenter:e.middleRight,topRight:e.bottomRight,middleLeft:e.topCenter,center:i.center,middleRight:e.bottomCenter,bottomLeft:e.topLeft,bottomCenter:e.middleLeft,bottomRight:e.bottomLeft,left:i.left,right:i.right,top:i.top,bottom:i.bottom}}return n}return e}function Ru(t,e,i){var n=[];if(t.segments&&t.segments.length>0){var r=void 0,o=[],s=e.point;for(r=0;r<t.segments.length;r++){var a=t.segments[r];if((o=[]).push(s),r!==t.segments.length-1?(o.push(a.point),s=a.point):o.push(i.point),t.segments[r].points=o,t.segments.length>1&&qd.equals(a.points[0],a.points[1])&&t.segments.splice(r,1),a)for(var l=0;l<a.points.length;l++)(l>0||0===r)&&n.push(a.points[l])}}return n}function zu(t,e,i){return"Top"===t||"Bottom"===t?i.x>e.x?"Right":"Left":i.y>e.y?"Bottom":"Top"}function ju(t){if("Straight"===t.type||"Bezier"===t.type){if(0===t.segments.length||t.segments.length>0&&!qd.isEmptyPoint(t.segments[t.segments.length-1].point)){var e=void 0;e="Bezier"===t.type?new Mf(t,"segments",{type:"Bezier"},!0):new kf(t,"segments",{type:"Straight"},!0),t.segments.push(e)}}else if(0===t.segments.length||t.segments[t.segments.length-1].direction){e=new Df(t,"segments",{type:"Orthogonal"},!0);t.segments.push(e)}}function Nu(t,e,i){var n=t.segments[e],r="Left"===n.direction||"Top"===n.direction?-n.length:n.length,o="Left"===n.direction||"Right"===n.direction?0:90,s=Gu(i.point,r,o);return t.segments[e-1].length+=n.length,t.segments[e-1].points[1]=i.point=s,t.segments.splice(e,1),--e}function Hu(t,e,i){var n,r;t.sourcePortWrapper&&(r=rf({x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY},ub(t.sourceWrapper),t.sourceWrapper.bounds,!1));Fu(t.targetWrapper,e,i,t);var o=zu(i.direction,e.point,i.point);if(void 0===t.sourcePortWrapper||e.direction!==i.direction||("Top"!==e.direction&&"Bottom"!==e.direction||e.corners.center.x!==i.corners.center.x)&&("Left"!==e.direction&&"Right"!==e.direction||e.corners.center.y!==i.corners.center.y))if(i.point.x>=e.corners.left&&i.point.x<=e.corners.right&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom){e.direction=i.point.y>e.point.y?"Bottom":"Top",n=$u(t,e,i,"Top"===e.direction?e.point.y-e.corners.top+20:e.corners.bottom-e.point.y+20)}else if(t.sourcePortWrapper&&r===sf(o)){var s;("Left"===r||"Right"===r)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom?(e.direction=i.point.y>e.point.y?"Bottom":"Top",s=e.corners.height/2+20):("Top"===r||"Bottom"===r)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right&&(e.direction=i.point.x>e.point.x?"Right":"Left",s=e.corners.width/2+20),e.direction&&s?n=$u(t,e,i,s,!0):(e.direction=o,n=Qu(e,i))}else if(!t.sourcePortWrapper||r!==i.direction||"Top"!==r&&"Bottom"!==r||e.corners.center.x!==i.corners.center.x)e.direction=o,n=Qu(e,i);else{e.direction=i.point.y>e.point.y?"Bottom":"Top",n=$u(t,e,i,"Bottom"===e.direction?e.corners.bottom-e.point.y+20:e.point.y-e.corners.top+20)}else e.direction=o,n=$u(t,e,i,"Top"===o||"Bottom"===o?t.sourceWrapper.height/2+20:t.sourceWrapper.width/2+20),e.point=n[1],"Left"===o||"Right"===o?(i.direction=o,i.point="Left"===o?i.corners.middleLeft:i.corners.middleRight):Fu(t.targetWrapper,e,i,t),n=$u(t,e,i);return n}function _u(t,e){if(void 0!==t.targetWrapper&&void 0===t.targetPortWrapper&&ub(t.targetWrapper).containsPoint(e.point)){var i=t.targetWrapper,n=t.segments[t.segments.length-2],r=n.points[n.points.length-1],o=sf(n.direction);"Bottom"===o?r.y<i.corners.bottom&&(n.points[n.points.length-1].y=i.corners.bottom+20,n.length=qd.distancePoints(n.points[0],n.points[n.points.length-1])):"Top"===o?r.y>i.corners.top&&(n.points[n.points.length-1].y=i.corners.top-20,n.length=qd.distancePoints(n.points[0],n.points[n.points.length-1])):"Left"===o?r.x>i.corners.left&&(n.points[n.points.length-1].x=i.corners.left-20,n.length=qd.distancePoints(n.points[0],n.points[n.points.length-1])):"Right"===o&&r.x<i.corners.right&&(n.points[n.points.length-1].x=i.corners.right+20,n.length=qd.distancePoints(n.points[0],n.points[n.points.length-1])),e.point=n.points[n.points.length-1]}}function Vu(t,e){for(var i=0;i<t.segments.length;i++)for(var n=t.segments[i],r=0;r<n.points.length;r++)(r>0||0===i)&&e.push(n.points[r]);return e}function Fu(t,e,i,n){var r,o={x:0,y:0},s=Du(t,t.corners,t.bounds),a=e.margin,l=e.point;if(s.bottomCenter.y+a.bottom<l.y)r="Bottom",o=s.bottomCenter;else if(s.topCenter.y-a.top>l.y)r="Top",o=s.topCenter;else if(s.middleLeft.x-a.left>l.x)r="Left",o=s.middleLeft;else if(s.middleRight.x+a.right<l.x)r="Right",o=s.middleRight;else{var h=Math.abs(l.y-s.topCenter.y),c=Math.abs(l.x-s.middleRight.x),d=Math.abs(l.y-s.bottomCenter.y),p=Math.abs(l.x-s.middleLeft.x),u=Number.MAX_VALUE;u=h,r="Top",o=s.topCenter,u>c&&(u=c,r="Right",o=s.middleRight),u>d&&(u=d,r="Bottom",o=s.bottomCenter),u>p&&(r="Left",o=s.middleLeft)}i.point=o,i.direction=r;var f=Uu(s,sf(i.direction));i.point=qu(n,t,i.point,f,t===n.targetWrapper)}function Wu(t,e){var i={x:e.x,y:t.y},n=(qd.findLength(t,i),qd.findLength(i,e)),r=qd.findLength(e,t),o=Math.asin(n/r);return o=180*o/Math.PI,t.x<e.x?t.y>e.y&&(o=360-o):o=t.y<e.y?180-o:180+o,o}function Uu(t,e){var i;switch(e){case"Left":i=t.middleLeft;break;case"Top":i=t.topCenter;break;case"Right":i=t.middleRight;break;case"Bottom":i=t.bottomCenter}return i}function Gu(t,e,i){return qd.transform(t,i,e)}function qu(t,e,i,n,r){i={x:i.x,y:i.y},n={x:n.x,y:n.y};var o,s,a,l=qd.findAngle(n,i),h=r?t.targetWrapper:t.sourceWrapper,c=r?t.targetPadding:t.sourcePadding,d=r||"Orthogonal"===t.type?i:n;qd.transform(i,l,Math.max(h.actualSize.height/2,h.actualSize.width/2));o=h;var p=Eb(-h.parentTransform,h.offsetX,h.offsetY,i),u=Eb(-h.parentTransform,h.offsetX,h.offsetY,n);if("Orthogonal"===t.type){p.x===u.x&&(p.y<u.y?p.y-=5:p.y+=5),p.y===u.y&&(p.x<u.x?p.x-=5:p.x+=5),i=Eb(h.parentTransform,h.offsetX,h.offsetY,p)}else{r?qd.findAngle(i,n):qd.findAngle(n,i);if(r){var f=qd.findAngle(i,n);n=qd.transform({x:n.x,y:n.y},f,Math.max(h.actualSize.width,h.actualSize.height))}else{var g=qd.findAngle(n,i);i=qd.transform({x:i.x,y:i.y},g,Math.max(h.actualSize.width,h.actualSize.height))}}(t.sourcePadding||t.targetPadding)&&(s=new np(h.bounds.x-c,h.bounds.y-c,h.actualSize.width+2*c,h.actualSize.height+2*c)),h instanceof ru&&h.data?(a=s?[s.topLeft,s.topRight,s.bottomRight,s.bottomLeft]:o.getPoints(),o.data.split("m").length-1+(o.data.split("M").length-1)==1&&(a[a.length]=a[0])):(a=s?[s.topLeft,s.topRight,s.bottomRight,s.bottomLeft]:Zm(h,h.corners))[a.length]=a[0];a.length;return Yu({x1:i.x,y1:i.y,x2:n.x,y2:n.y},a,!0,d)||i}function Xu(t,e,i){return e.x=Math.round(100*e.x)/100,e.y=Math.round(100*e.y)/100,i?t.targetPoint=e:t.sourcePoint=e,e}function Yu(t,e,i,n){var r,o=e.length,s={x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y},a=Zu(t,s);if(a&&(r=qd.distancePoints(a,n)),isNaN(r)||r>0)for(var l=1;l<o-1;l++){var h=Zu(t,s={x1:e[l].x,y1:e[l].y,x2:e[l+1].x,y2:e[l+1].y});if(h){var c=qd.distancePoints(h,n);if((isNaN(r)||r>c)&&(r=c,a=h),r>=0&&r<=1)break}}return a}function Zu(t,e){var i,n,r,o,s,a,l,h,c,d,p,u,f,g=t.x1,m=t.y1,y=t.x2,v=t.y2,b=e.x1,w=e.y1,S=e.x2,x=e.y2;return d=(i=v-m)*S+(r=g-y)*x+(s=y*m-g*v),0!==(c=i*b+r*w+s)&&0!==d&&Ku(c,d)?null:(h=(n=x-w)*y+(o=b-S)*v+(a=S*w-b*x),0!==(l=n*g+o*m+a)&&0!==h&&Ku(l,h)?null:0===(p=i*o-n*r)?null:(u=p<0?-p/2:p/2,u=0,{x:(f=r*a-o*s)<0?(f-u)/p:(f+u)/p,y:(f=n*s-i*a)<0?(f-u)/p:(f+u)/p}))}function Ku(t,e){return t*e>=0}function Ju(t,e,i){switch(e.direction){case"Left":e.point.x>t.left&&(i=e.point.x-t.left>i?e.point.x-t.left+i:i);break;case"Right":e.point.x<t.right&&(i=t.right-e.point.x>i?t.right-e.point.x+i:i);break;case"Top":e.point.y>t.top&&(i=e.point.y-t.top>i?e.point.y-t.top+i:i);break;case"Bottom":e.point.y<t.bottom&&(i=t.bottom-e.point.y>i?t.bottom-e.point.y+i:i)}return i}function Qu(t,e){var i;switch(t.direction){case"Left":case"Right":var n={x:e.point.x,y:t.point.y};i=qd.equals(t.point,n)||qd.equals(e.point,n)?[t.point,e.point]:[t.point,n,e.point];break;case"Top":case"Bottom":var r={x:t.point.x,y:e.point.y};i=qd.equals(t.point,r)||qd.equals(e.point,r)?[t.point,e.point]:[t.point,r,e.point]}return i}function $u(t,e,i,n,r){n||(n=20);var o,s,a,l=t.sourcePortWrapper,h=i.point.x-e.point.x,c=i.point.y-e.point.y;if(!r&&(Math.abs(h)<.001||Math.abs(c)<.001)&&void 0===i.direction)return[e.point,i.point];if(void 0===t.targetWrapper&&Math.abs(h)<=31&&Math.abs(c)<=31){if("Left"===e.direction||"Right"===e.direction?Math.abs(c)<12&&(e.direction=e.point.y>i.point.y?"Top":"Bottom"):Math.abs(h)<12&&(e.direction=e.point.x>i.point.x?"Left":"Right"),Math.abs(h)>12||Math.abs(c)>12)return Qu(e,i);n+=5}return"Left"===e.direction||"Right"===e.direction?("Right"===e.direction?(void 0!==i.direction&&"Right"===i.direction&&(n=Math.max(e.point.x,i.point.x)-e.point.x+n),e.point.x>i.point.x&&void 0===l&&(n=-n)):(void 0!==i.direction&&"Left"===i.direction&&(n=e.point.x-Math.min(e.point.x,i.point.x)+n),(e.point.x>i.point.x||void 0!==l||"Left"===e.direction)&&(n=-n)),a=i.point.y-e.point.y,o=Gu(e.point,n,0),0!==(a=i.point.y-o.y)&&(s=Gu(o,i.point.y-o.y,90))):"Top"!==e.direction&&"Bottom"!==e.direction||("Bottom"===e.direction?void 0!==i.direction&&"Bottom"===i.direction&&(n=Math.max(e.point.y,i.point.y)-e.point.y+n):(void 0!==i.direction&&"Top"===i.direction&&(n=e.point.y-Math.min(e.point.y,i.point.y)+n),(e.point.y>i.point.y||void 0!==l||"Top"===e.direction)&&(n=-n)),a=i.point.x-e.point.x,o=(e.direction,Gu(e.point,n,90)),0!==(a=i.point.x-o.x)&&(s=Gu(o,i.point.x-o.x,0))),0===a?[e.point,i.point]:[e.point,o,s,i.point]}function tf(t,e,i,n,r){var o;switch(void 0===r&&(r=20),void 0===i?(t.margin={left:2,right:2,top:2,bottom:2},e.margin={left:0,right:5,top:0,bottom:5}):"Bottom"===t.direction?e.corners.top>t.corners.bottom&&e.corners.top-t.corners.bottom<20&&(r=(e.corners.top-t.corners.bottom)/2):"Top"===t.direction?e.corners.bottom<t.corners.top&&t.corners.top-e.corners.bottom<20&&(r=(t.corners.top-e.corners.bottom)/2):"Right"===t.direction?e.corners.left>t.corners.right&&e.corners.left-t.corners.right<20&&(r=(e.corners.left-t.corners.right)/2):"Left"===t.direction&&e.corners.right<t.corners.left&&t.corners.left-e.corners.right<20&&(r=(t.corners.left-e.corners.right)/2),t.direction){case"Left":r=function(t,e,i,n){t.corners.left-t.margin.left>e.corners.left-e.margin.left&&t.corners.left-t.margin.left<=e.corners.right+e.margin.right?("Bottom"===e.direction&&t.point.y<e.point.y?n+=t.corners.left-e.corners.left:"Top"===e.direction&&t.point.y>e.point.y&&(n+=t.corners.left-e.corners.left),n+=t.point.x-t.corners.left):void 0!==i&&"Top"!==i&&"Bottom"===e.direction&&t.point.y<e.point.y?n+=Math.abs(t.point.x-e.corners.right):void 0!==i&&"Bottom"!==i&&"Top"===e.direction&&e.point.y<t.point.y?n+=Math.abs(t.point.x-e.corners.right):n+=t.point.x-t.corners.left;return n}(t,e,i,r),o=Gu(t.point,r,180);break;case"Right":r=function(t,e,i,n){t.corners.right+t.margin.right<e.corners.right+e.margin.right&&t.corners.right+t.margin.right>=e.corners.left-e.margin.left?("Bottom"===e.direction&&t.point.y<e.point.y?i+=e.corners.right-t.corners.right:"Top"===e.direction&&t.point.y>e.point.y&&(i+=e.corners.right-t.corners.right),i+=t.corners.right-t.point.x):void 0!==n&&"Top"!==n&&"Bottom"===e.direction&&t.point.y<e.point.y?i+=Math.abs(t.point.x-e.corners.right):void 0!==n&&"Bottom"!==n&&"Top"===e.direction&&e.point.y<t.point.y?i+=Math.abs(t.point.x-e.corners.right):i+=t.corners.right-t.point.x;return i}(t,e,r,i),o=Gu(t.point,r,0);break;case"Top":r=function(t,e,i,n){t.corners.top-t.margin.top>e.corners.top+e.margin.top&&t.corners.top-t.margin.top<=e.corners.bottom+e.margin.bottom?("Right"===e.direction&&t.point.x<e.point.x?n+=t.corners.top-e.corners.top:"Left"===e.direction&&t.point.x>e.point.x&&(n+=t.corners.top-e.corners.top),n+=t.point.y-t.corners.top):void 0!==i&&"Left"!==i&&"Right"===e.direction&&t.point.x<e.point.x?n+=Math.abs(t.point.y-e.corners.bottom):void 0!==i&&"Right"!==i&&"Left"===e.direction&&e.point.x<t.point.x?n+=Math.abs(t.point.y-e.corners.bottom):n+=t.point.y-t.corners.top;return n}(t,e,i,r),o=Gu(t.point,r,270);break;case"Bottom":r=function(t,e,i,n){t.corners.bottom+t.margin.bottom<e.corners.bottom+e.margin.bottom&&t.corners.bottom+t.margin.bottom>=e.corners.top-e.margin.top?("Right"===e.direction&&t.point.x<e.point.x?i+=e.corners.bottom-t.corners.bottom:"Left"===e.direction&&t.point.x>e.point.x&&(i+=e.corners.bottom-t.corners.bottom),i+=t.corners.bottom-t.point.y):void 0!==n&&"Left"!==n&&"Right"===e.direction&&t.point.x<e.point.x?i+=Math.abs(t.point.y-e.corners.bottom):void 0!==n&&"Right"!==n&&"Left"===e.direction&&e.point.x<t.point.x?i+=Math.abs(t.point.y-e.corners.bottom):i+=t.corners.bottom-t.point.y;return i}(t,e,r,i),o=Gu(t.point,r,90)}return void 0!==n?n.push(o):n=[t.point,o],"Top"===t.direction||"Bottom"===t.direction?ef(o,"horizontal",t,e,n):"Right"!==t.direction&&"Left"!==t.direction||ef(o,"vertical",t,e,n),n}function ef(t,e,i,n,r){var o,s,a;"horizontal"===e?(i.margin={left:0,right:10,top:0,bottom:10},n.margin={left:0,right:10,top:0,bottom:10}):"vertical"===e&&(i.margin={left:10,right:0,top:10,bottom:0},n.margin={left:10,right:0,top:10,bottom:0});var l=20;if("horizontal"===e){switch(n.direction){case"Left":if(i.corners.right+i.margin.right<n.corners.left-n.margin.left&&(n.corners.left-i.corners.right>l||i.corners.top-i.margin.top<=n.point.y&&i.corners.bottom+i.margin.bottom>=n.point.y)){var h=Math.min(Math.abs(n.corners.left-i.corners.right)/2,20);l=i.corners.right-t.x+h}else l="Top"===i.direction&&t.y>n.point.y||"Bottom"===i.direction&&t.y<n.point.y?Math.min(n.corners.left,t.x)-t.x-20:t.x>=i.corners.left-i.margin.left&&t.x<=i.corners.right+i.margin.right?Math.min(n.corners.left,i.corners.left)-t.x-20:n.corners.left-t.x-20;break;case"Right":if(i.corners.left-i.margin.left>n.corners.right+n.margin.right&&(i.corners.left-n.corners.right>l||i.corners.top-i.margin.top<=n.point.y&&i.corners.bottom+i.margin.bottom>=n.point.y)){h=Math.min(Math.abs(i.corners.left-n.corners.right)/2,20);l=i.corners.left-t.x-h}else l="Top"===i.direction&&t.y>n.point.y||"Bottom"===i.direction&&t.y<n.point.y?Math.max(n.corners.right,t.x)-t.x+20:t.x>=i.corners.left-i.margin.left&&t.x<=i.corners.right+i.margin.right?Math.max(n.corners.right,i.corners.right)-t.x+20:n.corners.right-t.x+20}o=Gu(t,l,0),s=Gu(o,n.point.y-t.y,90),a=n.point}else if("vertical"===e){switch(n.direction){case"Top":if(i.corners.bottom+i.margin.bottom<n.corners.top-n.margin.top&&(n.corners.top-i.corners.bottom>l||i.corners.left-i.margin.left<=n.point.x&&i.corners.right+i.margin.right>=n.point.x)){h=Math.min(Math.abs(n.corners.top-i.corners.bottom)/2,20);l=i.corners.bottom-t.y+h}else l="Left"===i.direction&&t.x>n.point.x||"Right"===i.direction&&t.x<n.point.x?Math.min(n.corners.top,t.y)-t.y-20:t.y>=i.corners.top-i.margin.top&&t.y<=i.corners.bottom+i.margin.bottom?Math.min(n.corners.top,i.corners.top)-t.y-20:n.corners.top-t.y-20;break;case"Bottom":if(i.corners.top-i.margin.top>n.corners.bottom+n.margin.bottom&&(i.corners.top-n.corners.bottom>l||i.corners.left-i.margin.left<=n.point.x&&i.corners.right+i.margin.right>=n.point.x)){h=Math.min(Math.abs(i.corners.top-n.corners.bottom)/2,20);l=i.corners.top-t.y-h}else l="Left"===i.direction&&t.x>n.point.x||"Right"===i.direction&&t.x<n.point.x?Math.max(n.corners.bottom,t.y)-t.y+20:t.y>=i.corners.top-i.margin.top&&t.y<=i.corners.bottom+i.margin.bottom?Math.max(n.corners.bottom,i.corners.bottom)-t.y+20:n.corners.bottom-t.y+20}o=Gu(t,l,90),s=Gu(o,n.point.x-t.x,0),a=n.point}r.push(o),r.push(s),r.push(a)}function nf(t,e){var i=t.direction;t.direction=e.direction,e.direction=i;var n=t.point;t.point=e.point,e.point=n;var r=t.corners;t.corners=e.corners,e.corners=r}function rf(t,e,i,n){var r=void 0===e?i:e,o=r.topLeft,s=r.topRight,a=r.bottomRight,l=r.bottomLeft,h=r.center,c=Wu(h,t),d=Wu(h,a),p=Wu(h,l),u=Wu(h,o),f=Wu(h,s);return c>u&&c<f?"Top":c>=d&&c<p?"Bottom":c>=p&&c<=u?"Left":"Right"}function of(t){var e;return e=t.wrapper.children[0].bounds,"None"!==t.sourceDecorator.shape&&e.uniteRect(t.wrapper.children[1].bounds),"None"!==t.targetDecorator.shape&&e.uniteRect(t.wrapper.children[2].bounds),e}function sf(t){switch(t){case"Top":return"Bottom";case"Bottom":return"Top";case"Left":return"Right";case"Right":return"Left"}return"auto"}var af=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lf=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},hf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return af(e,t),lf([Hi("")],e.prototype,"content",void 0),lf([Hi("TopLeft")],e.prototype,"position",void 0),lf([Hi("Mouse")],e.prototype,"relativeMode",void 0),lf([Hi(!0)],e.prototype,"showTipPointer",void 0),lf([Hi("auto")],e.prototype,"width",void 0),lf([Hi("auto")],e.prototype,"height",void 0),lf([Hi("Auto")],e.prototype,"openOn",void 0),lf([Hi()],e.prototype,"animation",void 0),e}(ln);function cf(t){var e=new vs;e=uf(t.tooltip,e);var i=new vs(e);return i.beforeCollision=pf,i.beforeOpen=df,i.cssClass="e-diagram-tooltip",i.opensOn="custom",i.appendTo("#"+t.element.id),i.close(),i}function df(t){""!==this.content&&void 0!==this.content||(t.element.style.display="none")}function pf(t){t.collidedPosition&&t.collidedPosition!==this.position&&(t.element.style.display="none")}function uf(t,e){return t.content?(e.content=t.content,e.position=t.position,e.showTipPointer=t.showTipPointer,e.width=t.width,e.height=t.height,t.animation?e.animation=t.animation:e.animation={close:{effect:"None"}}):e.close(),e}var ff=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gf=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},mf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ff(e,t),gf([Hi("")],e.prototype,"id",void 0),gf([Hi(-1)],e.prototype,"zIndex",void 0),gf([_i({},Np)],e.prototype,"margin",void 0),gf([Hi(!0)],e.prototype,"visible",void 0),gf([_i({},hf)],e.prototype,"tooltip",void 0),gf([Hi(!1)],e.prototype,"excludeFromLayout",void 0),gf([Hi()],e.prototype,"addInfo",void 0),gf([Hi("None")],e.prototype,"flip",void 0),e}(ln),yf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vf=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.data="",o.nodeId="",o.annotationId="",o.diagramId="",o.diagramId=i,o.nodeId=e,o.annotationId=n,o.templateFn=pb(r),o}return yf(e,t),e.prototype.getNodeTemplate=function(){return this.templateFn},Object.defineProperty(e.prototype,"content",{get:function(){return this.data},set:function(t){this.data=t,this.isTemplate||(this.template=nb(this,!0)),this.isDirt=!0},enumerable:!0,configurable:!0}),e}(Yp),bf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wf=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Sf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bf(e,t),wf([Hi()],e.prototype,"width",void 0),wf([Hi()],e.prototype,"height",void 0),e}(ln),xf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cf=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Pf=function(t){if($())return Uf;if(t)switch(t.type){case"Bpmn":return Af;case"UmlActivity":return Tf;case"UmlClassifier":return Wf;default:return If}return If},Of=function(t){if(t){if($())return Rf;switch(t.type){case"Straight":return kf;case"Bezier":return Mf;case"Orthogonal":return Df;default:return kf}}},Ef=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xf(e,t),Cf([Hi(10)],e.prototype,"width",void 0),Cf([Hi(10)],e.prototype,"height",void 0),Cf([Hi("Arrow")],e.prototype,"shape",void 0),Cf([_i({fill:"black",strokeColor:"black",strokeWidth:1},Gp)],e.prototype,"style",void 0),Cf([_i({x:0,y:.5},qd)],e.prototype,"pivot",void 0),Cf([Hi("")],e.prototype,"pathData",void 0),e}(ln),Lf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xf(e,t),Cf([Hi(0)],e.prototype,"angle",void 0),Cf([Hi(0)],e.prototype,"distance",void 0),e}(ln),If=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xf(e,t),Cf([Hi("None")],e.prototype,"type",void 0),e}(ln),Tf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xf(e,t),Cf([Hi("Object")],e.prototype,"flow",void 0),Cf([Hi(30)],e.prototype,"exceptionFlowHeight",void 0),e}(If),Af=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xf(e,t),Cf([Hi("Sequence")],e.prototype,"flow",void 0),Cf([Hi("Normal")],e.prototype,"sequence",void 0),Cf([Hi("Default")],e.prototype,"message",void 0),Cf([Hi("Default")],e.prototype,"association",void 0),e}(If),Bf=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.points=[],o}return xf(e,t),Cf([Hi("Straight")],e.prototype,"type",void 0),Cf([Hi(!0)],e.prototype,"allowDrag",void 0),e}(ln),kf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xf(e,t),e.prototype.getClassName=function(){return"StraightSegment"},Cf([_i({x:0,y:0},qd)],e.prototype,"point",void 0),e}(Bf),Mf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xf(e,t),e.prototype.getClassName=function(){return"BezierSegment"},Cf([_i({x:0,y:0},qd)],e.prototype,"point1",void 0),Cf([_i({x:0,y:0},qd)],e.prototype,"point2",void 0),Cf([_i({angle:0,distance:0},Lf)],e.prototype,"vector1",void 0),Cf([_i({angle:0,distance:0},Lf)],e.prototype,"vector2",void 0),e}(kf),Df=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xf(e,t),e.prototype.getClassName=function(){return"OrthogonalSegment"},Cf([Hi(null)],e.prototype,"length",void 0),Cf([Hi(null)],e.prototype,"direction",void 0),e}(Bf),Rf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xf(e,t),e.prototype.getClassName=function(){return"DiagramConnectorSegment"},Cf([Hi("Straight")],e.prototype,"type",void 0),Cf([Hi(!0)],e.prototype,"allowDrag",void 0),Cf([_i({x:0,y:0},qd)],e.prototype,"point",void 0),Cf([_i({x:0,y:0},qd)],e.prototype,"point1",void 0),Cf([_i({x:0,y:0},qd)],e.prototype,"point2",void 0),Cf([_i({angle:0,distance:0},Lf)],e.prototype,"vector1",void 0),Cf([_i({angle:0,distance:0},Lf)],e.prototype,"vector2",void 0),Cf([Hi(null)],e.prototype,"length",void 0),Cf([Hi(null)],e.prototype,"direction",void 0),e}(ln);function zf(t,e,i){var n=t.center,r=i?45:180/(2+2/(t.height/t.width)),o=r,s=180-r,a=s+2*r,l=360-r,h=Wu(e,n);return h>o&&h<s?"top":h>s&&h<a?"right":h>a&&h<l?"bottom":"left"}function jf(t){return!t.distance&&!t.angle}function Nf(t,e,i){var n=60,r={x:0,y:0};switch(i||(i=Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?t.x<e.x?"right":"left":t.y<e.y?"bottom":"top"),i){case"bottom":case"top":n=Math.min(.45*Math.abs(t.y-e.y),n),r={x:t.x,y:t.y+("bottom"===i?n:-n)};break;case"right":case"left":n=Math.min(.45*Math.abs(t.x-e.x),n),r={x:t.x+("right"===i?n:-n),y:t.y}}return r}function Hf(t,e,i,n,r){var o=0,s=0,a=0,l=0,h=Number((r.distance(e,t)+r.distance(i,e)+r.distance(n,i))/3);if(0!==h)for(var c=0;c<=h;c++){var d=c/h,p=(1-d)*(1-d)*(1-d)*t.x+3*d*(1-d)*(1-d)*e.x+3*d*d*(1-d)*i.x+d*d*d*n.x,u=(1-d)*(1-d)*(1-d)*t.y+3*d*(1-d)*(1-d)*e.y+3*d*d*(1-d)*i.y+d*d*d*n.y;0===c?(o=a=p,s=l=u):(o=Math.min(p,o),s=Math.min(u,s),a=Math.max(p,a),l=Math.max(u,l))}return{x:o,y:s,width:a-o,height:l-s,left:o,top:s,right:o+(a-o),bottom:s+(l-s),center:{x:(o+(a-o))/2,y:(s+(l-s))/2}}}function _f(t,e,i,n,r,o,s){var a={x:0,y:0},l=o/s,h=(1-l)*(1-l)*(1-l)*e.x+3*l*(1-l)*(1-l)*i.x+3*l*l*(1-l)*n.x+l*l*l*r.x;a.x=h;var c=(1-l)*(1-l)*(1-l)*e.y+3*l*(1-l)*(1-l)*i.y+3*l*l*(1-l)*n.y+l*l*l*r.y;return a.y=c,a}var Vf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xf(e,t),Cf([Hi(!0)],e.prototype,"optional",void 0),Cf([Hi(void 0)],e.prototype,"lowerBounds",void 0),Cf([Hi(void 0)],e.prototype,"upperBounds",void 0),e}(ln),Ff=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xf(e,t),Cf([Hi("OneToOne")],e.prototype,"type",void 0),Cf([_i({},Vf)],e.prototype,"target",void 0),Cf([_i({},Vf)],e.prototype,"source",void 0),e}(ln),Wf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xf(e,t),Cf([Hi("UmlClassifier")],e.prototype,"type",void 0),Cf([Hi("Aggregation")],e.prototype,"relationship",void 0),Cf([Hi("Directional")],e.prototype,"associationType",void 0),Cf([_i({},Ff)],e.prototype,"multiplicity",void 0),e}(If),Uf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xf(e,t),Cf([Hi("None")],e.prototype,"type",void 0),Cf([Hi("Directional")],e.prototype,"associationType",void 0),Cf([Hi("Aggregation")],e.prototype,"relationship",void 0),Cf([_i({},Ff)],e.prototype,"multiplicity",void 0),Cf([Hi("Sequence")],e.prototype,"bpmnFlow",void 0),Cf([Hi("Default")],e.prototype,"message",void 0),Cf([Hi("Normal")],e.prototype,"sequence",void 0),Cf([Hi("Default")],e.prototype,"association",void 0),Cf([Hi("Object")],e.prototype,"umlActivityFlow",void 0),Cf([Hi(30)],e.prototype,"exceptionFlowHeight",void 0),e}(ln),Gf=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.parentId="",o.bridges=[],o.status="None",o.shape&&"UmlActivity"===o.shape.type&&_m(n,o),n&&n.shape&&"None"!==n.shape.type&&Vm(n,o),o}return xf(e,t),e.prototype.init=function(t){var e;this.id||(this.id=cb());var i=new tu,n=new ru;n.id=this.id+"_path";var r,o=new ru,s=new ru;n=this.getSegmentElement(this,n);var a=[];switch(a=this.getConnectorPoints(this.type),a=this.clipDecorators(this,a),r=np.toBounds(a),i.width=r.width,i.height=r.height,i.offsetX=r.x+i.pivot.x*r.width,i.offsetY=r.y+i.pivot.y*r.height,this.shape.type){case"Bpmn":switch($()?this.shape.bpmnFlow:this.shape.flow){case"Sequence":e=this.getBpmnSequenceFlow();break;case"Association":(e=new ru).visible=!1,this.getBpmnAssociationFlow();break;case"Message":e=this.getBpmnMessageFlow(),n=this.getSegmentElement(this,n),this.updateShapePosition(this,e)}break;case"UmlActivity":switch($()?this.shape.umlActivityFlow:this.shape.flow){case"Object":this.getUMLObjectFlow();break;case"Exception":this.getUMLExceptionFlow(n)}break;case"UmlClassifier":this.getConnectorRelation()}var l=this.intermediatePoints;if("Bezier"===this.type){var h=this.segments[0],c=this.segments[this.segments.length-1];l=[qd.isEmptyPoint(c.point2)?c.bezierPoint2:c.point2,qd.isEmptyPoint(h.point1)?h.bezierPoint1:h.point1]}var d=t.getDescription;this.sourceWrapper&&this.sourceWrapper.style.strokeWidth;if(o=this.getDecoratorElement(a[0],l[1],this.sourceDecorator,!0,d),s=this.getDecoratorElement(a[a.length-1],l[l.length-2],this.targetDecorator,!1,d),o.id=this.id+"_srcDec",s.id=this.id+"_tarDec",n.style=this.style,n.style.fill="transparent",void 0!==d){var p=d(this,t);n.description=p||this.id}i.style.strokeColor="transparent",i.style.fill="transparent",i.style.strokeWidth=0,i.children=[n,o,s],i.id=this.id,void 0!==e&&i.children.push(e),i.offsetX=n.offsetX,i.offsetY=n.offsetY,i.width=n.width,i.height=n.height;for(var u=0;this.annotations,u<this.annotations.length;u++)i.children.push(this.getAnnotationElement(this.annotations[u],this.intermediatePoints,r,d,t.element.id,t.annotationTemplate));return this.wrapper=i,i},e.prototype.getConnectorRelation=function(){var t=this.shape;"Association"===t.relationship?(this.segments[0].type="Straight",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"):"Inheritance"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"):"Composition"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="Diamond",this.targetDecorator.shape="None"):"Aggregation"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="Diamond",this.targetDecorator.shape="None"):"Dependency"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="OpenArrow"):"Realization"===t.relationship&&(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"),"BiDirectional"===t.associationType&&(this.sourceDecorator.shape="None",this.targetDecorator.shape="None");var e,i,n,r,o="",s="";t.multiplicity.source&&(t.multiplicity.source.lowerBounds=t.multiplicity.source.lowerBounds,t.multiplicity.source.upperBounds=t.multiplicity.source.upperBounds),t.multiplicity.target&&(t.multiplicity.target.lowerBounds=t.multiplicity.target.lowerBounds,t.multiplicity.target.upperBounds=t.multiplicity.target.upperBounds),i=t.multiplicity.source,n=t.multiplicity.target,r=i.upperBounds?i.lowerBounds+"..."+i.upperBounds:i.lowerBounds,e=n.upperBounds?n.lowerBounds+"..."+n.upperBounds:n.lowerBounds,"ManyToOne"===t.multiplicity.type&&(t.multiplicity.target.optional=!1,o=r||"*",s="1"),"OneToMany"===t.multiplicity.type&&(t.multiplicity.source.optional=!1,s=e||"*",o="1"),"ManyToOne"===t.multiplicity.type&&(o=r||"*",s=e||"*"),"OneToOne"===t.multiplicity.type&&(t.multiplicity.target.optional=!1,t.multiplicity.source.optional=!1,o="1",s="1"),this.annotations=[{id:this.id+"sourcelabel",content:o,offset:0,alignment:"Before",margin:{right:5,bottom:5}},{id:this.id+"targetlabel",content:s,offset:1,alignment:"Before",margin:{right:5,bottom:5}}]},e.prototype.getBpmnSequenceFlow=function(){var t=new ru,e=new ru;if("Normal"===this.shape.sequence&&"Bezier"!==this.type&&(this.targetDecorator.shape="Arrow"),"Default"===this.shape.sequence){t=this.getSegmentElement(this,t);var i=this.intermediatePoints;e=My(i,this),this.targetDecorator.shape="Arrow"}return"Conditional"===this.shape.sequence&&(this.targetDecorator.shape="Arrow",this.sourceDecorator.shape="Diamond",e.id=this.id+this.shape.type),e},e.prototype.getUMLObjectFlow=function(){if(this.annotations)for(var t=0;t<this.annotations.length;t++)this.annotations[t].content="["+this.annotations[t].content+"]"},e.prototype.getUMLExceptionFlow=function(t){this.type="Straight";var e=this.shape.exceptionFlowHeight/2,i={x:(this.targetPoint.x+this.sourcePoint.x)/2,y:(this.targetPoint.y+this.sourcePoint.y)/2},n=i.x-this.sourcePoint.x,r=i.y-this.sourcePoint.y,o=e/Math.sqrt(n*n+r*r),s={x:i.x-n*o,y:i.y-r*o},a={x:i.x+n*o,y:i.y+r*o},l=op();ap(l,315,i.x,i.y),this.segments=[];var h=new kf(this,"segments",{type:"Straight",point:sp(l,a)},!0);this.segments.push(h),h=new kf(this,"segments",{type:"Straight",point:sp(l,s)},!0),this.segments.push(h),t=this.getSegmentElement(this,t)},e.prototype.getBpmnAssociationFlow=function(){"Default"===this.shape.association&&(this.targetDecorator.shape="Arrow"),"Directional"===this.shape.association&&(this.targetDecorator.shape="Arrow"),"BiDirectional"===this.shape.association&&(this.targetDecorator.shape="Arrow",this.sourceDecorator.shape="Arrow")},e.prototype.getBpmnMessageFlow=function(){var t=new ru;return this.targetDecorator.shape="Arrow",this.targetDecorator.width=5,this.targetDecorator.height=10,this.sourceDecorator.shape="Circle","InitiatingMessage"!==this.shape.message&&"NonInitiatingMessage"!==this.shape.message||(t.id=this.id+"_"+this.shape.message,t.width=25,t.height=15,t.data="M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",t.horizontalAlignment="Center",t.verticalAlignment="Center",t.transform=Pp.Self,t.style.fill="NonInitiatingMessage"===this.shape.message?"lightgrey":"white"),t},e.prototype.distance=function(t,e){return zy(t,e)},e.prototype.findPath=function(t,e){return Ry(t,e)},e.prototype.getAnnotationElement=function(t,e,i,n,r,o){var s,a;t.id=t.id||cb(),$()&&"Template"===t.annotationType&&(t.template=t.template?t.template:""),r&&(t.template||"Template"===t.annotationType||o&&""===t.content)?s=hb(s=new vf(this.id,r,t.id,o),t,o):((s=new Qp).content=t.content,s.style.textOverflow="Wrap"),s.constraints=t.constraints,s.visible=t.visibility,s.rotateAngle=t.rotateAngle,s.horizontalAlignment=t.horizontalAlignment,s.verticalAlignment=t.verticalAlignment,s.width=t.width,s.height=t.height,void 0===i.width||t.template||(s.width=(t.width||i.width)-t.margin.left-t.margin.right),s.margin=t.margin,s.id=this.id+"_"+t.id,0===i.width&&(i.width=this.style.strokeWidth),0===i.height&&(i.height=this.style.strokeWidth),s.style=t.style;var l=Lb(n);return l&&(a=l(t,this)),s.description=a||s.id,this.updateAnnotation(t,e,i,s),s},e.prototype.updateAnnotation=function(t,e,i,n,r){var o,s,a,l,h,c,d,p,u={x:0,y:0};n instanceof vf||r||n.refreshTextElement(),n.width=t.width||i.width,s=(o=Qm(e,t,i)).point,t.segmentAngle&&(n.rotateAngle=t.rotateAngle+o.angle,n.rotateAngle=(n.rotateAngle+360)%360),0===i.width&&(i.width=this.style.strokeWidth),0===i.height&&(i.height=this.style.strokeWidth),c={x:(s.x-i.x)/i.width,y:(s.y-i.y)/i.height},u.x=i.width*c.x,u.y=i.height*c.y,a=function(t,e,i){e%=360;var n,r;switch(t.alignment){case"Before":e>=45&&e<=135?(r="right",n=.5===t.offset?"center":"top"):e>=225&&e<=315?(r="left",n=.5===t.offset?"center":"bottom"):e>45&&e<225?(n="top",r=.5===t.offset?"center":"right"):(n="bottom",r=.5===t.offset?"center":"left");break;case"After":e>=45&&e<=135?(r="left",n=.5===t.offset?"center":"top"):e>=225&&e<=315?(r="right",n=.5===t.offset?"center":"bottom"):e>45&&e<225?(n="bottom",r=.5===t.offset?"center":"right"):(n="top",r=.5===t.offset?"center":"left");break;case"Center":r="center",n="center"}if(0===t.offset||1===t.offset){switch(o=i[0],s=i[1],Math.abs(s.x-o.x)>Math.abs(s.y-o.y)?o.x<s.x?"right":"left":o.y<s.y?"bottom":"top"){case"left":r=0===t.offset?"right":"left";break;case"right":r=0===t.offset?"left":"right";break;case"bottom":n=0===t.offset?"top":"bottom";break;case"top":n=0===t.offset?"bottom":"top"}}var o,s;return{hAlign:r,vAlign:n}}(t,o.angle,e),l=a.hAlign,h=a.vAlign,"left"===l?(d="Left",u.x+=t.displacement.x):"right"===l?(d="Right",u.x-=t.displacement.x):"center"===l&&(d="Center"),"top"===h?(p="Top",u.y+=t.displacement.y):"bottom"===h?(p="Bottom",u.y-=t.displacement.y):"center"===h&&(p="Center"),n.horizontalAlignment=d,n.verticalAlignment=p,n.setOffsetWithRespectToBounds(u.x,u.y,"Absolute"),n.relativeMode="Point"},e.prototype.getConnectorPoints=function(t,e,i){Math.abs(this.sourcePoint.x-this.targetPoint.x),Math.abs(this.sourcePoint.y-this.targetPoint.y);var n=Pu(this,i).slice(0);return n&&n.length>0&&(this.sourcePoint=n[0],this.targetPoint=n[n.length-1]),n},e.prototype.clipDecorator=function(t,e,i,n){var r,o,s={x:0,y:0},a=e.length;r=i?e[0]:e[a-1],o=i?e[1]:e[a-2];var l=qd.distancePoints(r,o);l=0===l?1:l;var h=1,c=i?t.sourceWrapper:t.targetWrapper;c&&(h=c.style.strokeWidth,n&&n&Ip.DecoratorPropertyChange&&(h=1));var d=h-1;return s.x=Math.round(r.x+d*(o.x-r.x)/l),s.y=Math.round(r.y+d*(o.y-r.y)/l),(i&&"None"!==t.sourceDecorator.shape||!i&&"None"!==t.targetDecorator.shape)&&(s=qd.adjustPoint(s,o,!0,n&Ip.DecoratorPropertyChange?0:h/2)),s},e.prototype.clipDecorators=function(t,e,i){return"None"!==t.sourceDecorator.shape&&(e[0]=this.clipDecorator(t,e,!0,i)),"None"!==t.targetDecorator.shape&&(e[e.length-1]=this.clipDecorator(t,e,!1,i)),e},e.prototype.updateSegmentElement=function(t,e,i,n){var r,o=new np;if(r=this.getSegmentPath(t,e,n),"Bezier"===t.type){if(this.segments.length>0)for(var s=0;s<this.segments.length;s++){var a=this.segments[s],l=t.segments[s],h=qd.isEmptyPoint(a.point1)?l.bezierPoint1:l.point1,c=qd.isEmptyPoint(a.point2)?l.bezierPoint2:l.point2;o.uniteRect(Hf(a.points[0],h,c,a.points[1],t))}}else o=np.toBounds(e);return i.width=o.width,i.height=o.height,i.offsetX=o.x+i.width/2,i.offsetY=o.y+i.height/2,i.data=r,t.wrapper&&(t.wrapper.offsetX=i.offsetX,t.wrapper.offsetY=i.offsetY,t.wrapper.width=o.width,t.wrapper.height=o.height),i},e.prototype.getSegmentElement=function(t,e,i,n){var r;return Ty(t),r=this.getConnectorPoints(t.type,void 0,i),this.intermediatePoints=r,e.staticSize=!0,e=this.updateSegmentElement(t,r,e,n)},e.prototype.getDecoratorElement=function(t,e,i,n,r){var o=new ru;if(o.transform=Pp.Self,this.updateDecoratorElement(o,t,e,i),void 0!==r){var s=r(i,this);o.description=s||"source"}return o},e.prototype.bridgePath=function(t,e,i){var n=e;if(t.bridges.length>0)if("Straight"===t.type&&t.segments.length<2)for(var r=0;r<t.bridges.length;r++){(o=t.bridges[r]).rendered||(n+=" L"+o.startPoint.x+" "+o.startPoint.y,n+=o.path,o.rendered=!0)}else if("Orthogonal"===t.type||"Straight"===t.type&&t.segments.length>1)for(r=0;r<t.bridges.length;r++){var o;(o=t.bridges[r]).segmentPointIndex===i&&(o.rendered||o.segmentPointIndex===i&&(n+=" L"+o.startPoint.x+" "+o.startPoint.y,n+=o.path,o.rendered=!0))}return n},e.prototype.updateDecoratorElement=function(t,e,i,n){var r,o;t.offsetX=e.x,t.offsetY=e.y,o=qd.findAngle(e,i),r=function(t,e){return"Custom"===t?e.pathData:Su[t]}(n.shape,n);var s=new Wd(n.width,n.height);t.pivot.x=n.pivot.x,t.pivot.y=n.pivot.y,t.style=n.style,t.rotateAngle=o,t.data=r,t.canMeasurePath=!0,t.width=s.width,t.height=s.height},e.prototype.getSegmentPath=function(t,e,i){for(var n,r,o,s="",a=[],l=0;l<e.length;)a.push({x:e[l].x,y:e[l].y}),l++;for(var h=0;h<t.bridges.length;h++){t.bridges[h].rendered=!1}if(a=this.clipDecorators(t,a,i),this.cornerRadius>0&&"Bezier"!==this.type)for(var c=0;c<a.length-1;c++){n=a[c],0===c&&(s="M"+n.x+" "+n.y);var d=qd.distancePoints(a[c],a[c+1]);d>0&&(r=c<a.length-2?d<2*this.cornerRadius?qd.adjustPoint(a[c],a[c+1],!1,d/2):qd.adjustPoint(a[c],a[c+1],!1,this.cornerRadius):a[c+1],c>0&&(d<2*this.cornerRadius?(o=qd.adjustPoint(a[c],a[c+1],!0,d/2),c<a.length-2&&(r=null)):o=qd.adjustPoint(a[c],a[c+1],!0,this.cornerRadius)),o&&(s+="Q"+n.x+" "+n.y+" "+o.x+" "+o.y),r&&(t.bridges.length>0&&(s=this.bridgePath(t,s,c),"Orthogonal"===t.type&&(s=this.bridgePath(t,s,c+1))),s+=" L"+r.x+" "+r.y))}else if("Bezier"===this.type){for(var p=void 0,u=this.segments,f=0;f<u.length;f++)a.length>2&&(u[f].bezierPoint1={x:0,y:0},u[f].bezierPoint2={x:0,y:0}),!qd.isEmptyPoint(u[f].point1)||u[f].vector1.angle||u[f].vector1.distance?u[f].vector1.angle||u[f].vector1.distance?u[f].bezierPoint1=qd.transform(a[f],u[f].vector1.angle,u[f].vector1.distance):u[f].bezierPoint1={x:u[f].point1.x||u[f].bezierPoint1.x,y:u[f].point1.y||u[f].bezierPoint1.y}:((t.sourceID||this.sourcePortID)&&this.sourceWrapper&&(p=zf(this.sourceWrapper.bounds,a[f],!0)),u[f].bezierPoint1=Nf(a[f],a[f+1],p)),!qd.isEmptyPoint(u[f].point2)||u[f].vector2.angle||u[f].vector2.distance?u[f].vector2.angle||u[f].vector2.distance?u[f].bezierPoint2=qd.transform(a[f+1],u[f].vector2.angle,u[f].vector2.distance):u[f].bezierPoint2={x:u[f].point2.x||u[f].bezierPoint2.x,y:u[f].point2.y||u[f].bezierPoint2.y}:((t.targetID||this.targetPortID)&&this.targetWrapper&&(p=zf(this.targetWrapper.bounds,a[f+1],!0)),u[f].bezierPoint2=Nf(a[f+1],a[f],p));a.splice(1,0,{x:u[0].bezierPoint1.x,y:u[0].bezierPoint1.y}),a.splice(a.length-1,0,{x:u[u.length-1].bezierPoint2.x,y:u[u.length-1].bezierPoint2.y}),a=this.clipDecorators(t,a,i);for(var g=0;g<u.length;g++){0===g&&(s="M"+a[0].x+" "+a[0].y);var m=g===u.length-1?a[a.length-1].x+" "+a[a.length-1].y:u[g].points[u[g].points.length-1].x+" "+u[g].points[u[g].points.length-1].y;s+="C"+u[g].bezierPoint1.x+" "+u[g].bezierPoint1.y+" "+u[g].bezierPoint2.x+" "+u[g].bezierPoint2.y+" "+m}}else for(var y=0;y<a.length;y++)n=a[y],0===y&&(s="M"+n.x+" "+n.y),y>0&&(s=this.bridgePath(t,s,y),s+=" L"+n.x+" "+n.y);return s},e.prototype.updateShapeElement=function(t){var e;switch(t.shape.type){case"Bpmn":t.wrapper.children[3]instanceof ru&&(e=t.wrapper.children[3]),("Message"===t.shape.flow||$()&&"Message"===t.shape.bpmnFlow)&&this.updateShapePosition(t,e);break;case"UmlActivity":("Exception"===t.shape.flow||$()&&"Exception"===t.shape.umlActivityFlow)&&this.getUMLExceptionFlow(t.wrapper.children[0])}},e.prototype.updateShapePosition=function(t,e){for(var i,n,r=0,o=this.intermediatePoints,s=0;s<o.length-1;s++){var a=.5*(r+=this.distance(o[s],o[s+1]));r>=a&&(i=Wu(o[s],o[s+1]),n=qd.transform(o[s],i,a))}e.offsetX=n.x,e.offsetY=n.y},e.prototype.scale=function(t,e,i,n,r){var o=0,s=0;if(this.wrapper&&this.wrapper.outerBounds){var a=of(this),l=(this.wrapper.bounds.width||this.style.strokeWidth||1)-2,h=(this.wrapper.bounds.height||this.style.strokeWidth||1)-2;o=a.width-l,s=a.height-h,t=(i-Math.max(o,s))/l,e=(n-Math.max(o,s))/h,o=s=Math.min(o,s)}t=e=Math.min(t,e);var c=op();ap(c,-(r=r||this.wrapper).rotateAngle,r.offsetX,r.offsetY),lp(c,t,e,r.offsetX,r.offsetY),ap(c,r.rotateAngle,r.offsetX,r.offsetY);var d=function(t,e){for(var i=[],n=0,r=e;n<r.length;n++){var o=r[n];i.push(sp(t,o))}return i}(c,this.intermediatePoints);return this.sourcePoint=d[0],this.targetPoint=d[d.length-1],uy(this,d=this.intermediatePoints=Pu(this)),{x:o,y:s}},e.prototype.getClassName=function(){return"Connector"},Cf([Vi(Pf)],e.prototype,"shape",void 0),Cf([Hi(yp.Default)],e.prototype,"constraints",void 0),Cf([Hi(10)],e.prototype,"bridgeSpace",void 0),Cf([Fi([],vu)],e.prototype,"annotations",void 0),Cf([_i({},qd)],e.prototype,"sourcePoint",void 0),Cf([_i({},qd)],e.prototype,"targetPoint",void 0),Cf([Wi(Of)],e.prototype,"segments",void 0),Cf([Hi("")],e.prototype,"sourceID",void 0),Cf([Hi("")],e.prototype,"targetID",void 0),Cf([Hi(10)],e.prototype,"hitPadding",void 0),Cf([Hi(0)],e.prototype,"connectionPadding",void 0),Cf([Hi("Straight")],e.prototype,"type",void 0),Cf([Hi(0)],e.prototype,"cornerRadius",void 0),Cf([_i({shape:"None"},Ef)],e.prototype,"sourceDecorator",void 0),Cf([_i({shape:"Arrow"},Ef)],e.prototype,"targetDecorator",void 0),Cf([_i({},hf)],e.prototype,"tooltip",void 0),Cf([Hi("")],e.prototype,"sourcePortID",void 0),Cf([Hi("")],e.prototype,"targetPortID",void 0),Cf([Hi(0)],e.prototype,"sourcePadding",void 0),Cf([_i({},Sf)],e.prototype,"previewSize",void 0),Cf([_i({},Sf)],e.prototype,"dragSize",void 0),Cf([Hi(0)],e.prototype,"targetPadding",void 0),Cf([_i({strokeWidth:1,strokeColor:"black"},qp)],e.prototype,"style",void 0),Cf([Hi(null)],e.prototype,"wrapper",void 0),e}(mf),qf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xf=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Yf=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.offset=0,n.scale=1,n}return qf(e,t),e.prototype.preRender=function(){this.unWireEvents(),this.wireEvents()},e.prototype.render=function(){this.updateRulerGeometry(),this.renderComplete()},e.prototype.getModuleName=function(){return"Ruler"},e.prototype.destroy=function(){this.unWireEvents(),this.notify("destroy",{}),t.prototype.destroy.call(this),this.element.classList.remove("e-ruler")},e.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"length":case"interval":case"segmentWidth":case"tickAlignment":case"markerColor":case"thickness":this.updateRuler()}}},e.prototype.updateRulerGeometry=function(){this.element.style.textAlign="left",this.renderRulerSpace(),this.updateRuler()},e.prototype.renderRulerSpace=function(){var t=this.getRulerGeometry(),e=document.getElementById(this.element.id+"_ruler_space");return e||(e=Jv("div",{id:this.element.id+"_ruler_space",style:"height:"+t.height+"px;width:"+t.width+"px;cssFloat:left;"}),this.element.appendChild(e)),e},e.prototype.updateRuler=function(){var t=this.getRulerSize(),e=this.getRulerGeometry(),i=0,n=0,r=new Wd,o=this.getRulerSVG(e);if(o&&(i=this.length,r.height=t,n=this.offset,i&&i!==1/0)){var s=i+this.segmentWidth,a=n;this.updateSegments(a,s+Math.abs(a),o,t)}},e.prototype.updateSegments=function(t,e,i,n){for(var r=t,o={trans:0};r<e;){var s=this.getNewSegment(r,i);s&&(i.appendChild(s.segment),r=this.updateSegment(t,e,s,r,o,n))}},e.prototype.updateSegment=function(t,e,i,n,r,o){var s=this.updateSegmentWidth(this.scale);n===t?(this.startValue=Math.floor(t/s)*s/this.scale,this.startValue=this.startValue%1!=0?Number(this.startValue.toFixed(1)):this.startValue,i.label.textContent=this.startValue.toString(),this.defStartValue=n=this.startValue*this.scale,"Horizontal"===this.orientation?this.hRulerOffset=t-n:this.vRulerOffset=t-n):(this.startValue=n/this.scale,this.startValue=this.startValue%1!=0?Number(this.startValue.toFixed(1)):this.startValue,i.label.textContent=this.startValue.toString()),this.updateTickLabel(i,o);var a="Horizontal"===this.orientation?r.trans+.5+",0.5":"0.5,"+(r.trans+.5);return i.segment.setAttribute("transform","translate("+a+")"),r.trans+=s,n+=s},e.prototype.updateTickLabel=function(t,e){var i=t.segment.lastChild.getBBox(),n="Horizontal"===this.orientation,r="RightOrBottom"===this.tickAlignment,o=n?2:0,s=n?r?e/2+5.5-5.5:e/2+5.5:i.height,a=r?-(i.width+2)+","+(e/2-i.height):-(i.width+2)+","+(e/2-i.height/2),l=n?{x:o,y:s}:{x:o,y:s,transform:"rotate(270)translate("+a+")"};rb(t.segment.lastChild,l)},e.prototype.getNewSegment=function(t,e){var i=this.createNewTicks(t,e);return{segment:i,label:this.createTickLabel(e,i)}},e.prototype.createNewTicks=function(t,e){var i,n,r,o=this.updateSegmentWidth(this.scale);r=Qv("g",{class:"e-ruler-segment"});for(var s=0;s<this.interval;s++)n=o/this.interval,i=this.createTick(e,n,s+1,t),r.appendChild(i);return r},e.prototype.getLinePoint=function(t,e,i){var n=this.updateSegmentWidth(this.scale),r=this.getRulerSize();return i=(e*=i-1)%n==0?r:.3*r},e.prototype.createTick=function(t,e,i,n){var r,o,s=this.getLinePoint(t,e,i),a=this.getRulerSize(),l="Horizontal"===this.orientation,h="RightOrBottom"===this.tickAlignment,c=Lb(this.arrangeTick);o={ruler:void 0,tickLength:s,tickInterval:this.segmentWidth/this.interval*(i-1)},c&&c(o),s=o.tickLength;var d=e*(i-1);return(r=Qv("line",{x1:l?d:h?a:0,y1:l?h?a:a-(a-s):d,x2:l?d:h?a-s:a-(a-s),y2:l?h?a-s:0:d,"stroke-width":"1",stroke:"black"})).setAttribute("class","e-ruler-tick"),r},e.prototype.createTickLabel=function(t,e){var i;if(e){i=Qv("text",{class:"e-ruler-tick-label"}),e.appendChild(i)}return i},e.prototype.updateSegmentWidth=function(t){if(100!==this.segmentWidth)return this.segmentWidth;var e,i=1;for(e=100,e=100/Math.pow(2,Math.round(Math.log(t)/Math.log(2)));e>100;)i/=10,e/=10;for(;e<25;)i*=10,e*=10;return e>=25&&e%25!=0&&(e=25*Math.round(e/25)),e*t/i},e.prototype.createMarkerLine=function(t,e,i){var n;return e&&((n=t.getElementById(e.id+"_marker"))&&n.parentNode.removeChild(n),n=Qv("line",i)),n},e.prototype.drawRulerMarker=function(t,e,i){var n,r,o,s,a,l,h,c="Horizontal"===this.orientation,d=t.getElementsByTagName("svg");for(a=0;a<d.length;a++){d[a]&&(n=d[a]);break}if(n){r=this.getRulerSize(),l={id:t.id+"_marker",x1:0,y1:0,x2:c?0:r,y2:c?r:0,stroke:this.markerColor,"stroke-width":1.5,class:"e-d-ruler-marker"},h=this.createMarkerLine(n,t,l),o=this.scale,s=this.offset-this.defStartValue;var p=(c?e.x:e.y)*o+i+s;h.setAttribute("transform","translate("+(c?p+.5+" 0.5":"0.5 "+(p+.5))+")"),n.appendChild(h)}},e.prototype.getRulerGeometry=function(){return new Wd(this.element?this.element.getBoundingClientRect().width:0,this.element?this.element.getBoundingClientRect().height:0)},e.prototype.getRulerSize=function(){return this.thickness},e.prototype.getRulerSVG=function(t){var e,i,n=this.getRulerSize();if(this.element&&(e=document.getElementById(this.element.id+"_ruler_space"))){if(i=Qv("svg",{id:this.element.id+"_Ruler_svg",width:"Horizontal"===this.orientation?t.width+200:n+"px",height:"Horizontal"===this.orientation?n:t.height+200+"px",style:"position:inherit;"}),e.childNodes.length>0)for(var r=e.childNodes.length-1;r>=0;r--)e.childNodes[r].parentNode.removeChild(e.childNodes[r]);e.appendChild(i)}return i},e.prototype.wireEvents=function(){},e.prototype.unWireEvents=function(){},Xf([Hi(5)],e.prototype,"interval",void 0),Xf([Hi(100)],e.prototype,"segmentWidth",void 0),Xf([Hi("Horizontal")],e.prototype,"orientation",void 0),Xf([Hi("RightOrBottom")],e.prototype,"tickAlignment",void 0),Xf([Hi("red")],e.prototype,"markerColor",void 0),Xf([Hi(25)],e.prototype,"thickness",void 0),Xf([Hi(null)],e.prototype,"arrangeTick",void 0),Xf([Hi(400)],e.prototype,"length",void 0),e}(un);function Zf(t,e){var i=document.getElementById(t.element.id+(e?"_hRuler":"_vRuler")),n=Qf(t),r=$f(t),o=e?"margin-left:"+n.width+"px;":"margin-top:"+n.height+"px;";if(!i){var s="height:"+(e?n.height:r.height+100)+"px;overflow:hidden;width:"+(e?r.width+100:n.width)+"px;position:absolute;font-size:11px;"+o;i=Jv("div",{id:t.element.id+(e?"_hRuler":"_vRuler"),style:s})}t.element.insertBefore(i,t.element.firstChild);var a=e?t.rulerSettings.horizontalRuler:t.rulerSettings.verticalRuler,l=new Yf(a);l.orientation=e?"Horizontal":"Vertical",l.length=(e?r.width:r.height)+a.segmentWidth,l.appendTo("#"+t.element.id+(e?"_hRuler":"_vRuler")),e?t.hRuler=l:t.vRuler=l;var h=document.getElementById(t.element.id+(e?"_hRuler":"_vRuler"));e?t.hRuler.element=h:t.vRuler.element=h}function Kf(t){var e=-t.scroller.horizontalOffset,i=-t.scroller.verticalOffset;t&&t.rulerSettings.showRulers?(t.hRuler.length=0,t.vRuler.length=0,void 0!==e&&t.hRuler.element&&tg(t,t.hRuler,e,!0),void 0!==i&&t.vRuler.element&&tg(t,t.vRuler,i,!1)):Jf(t)}function Jf(t){ib(t.element.id+"_hRuler"),ib(t.element.id+"_vRuler"),ib(t.element.id+"_overlapRuler")}function Qf(t){var e=0,i=0;return t.rulerSettings.showRulers&&(e=t.rulerSettings.horizontalRuler.thickness,i=t.rulerSettings.verticalRuler.thickness),new Wd(i,e)}function $f(t){var e=Qf(t),i=t.scroller.viewPortHeight,n=t.scroller.viewPortWidth;return n<t.element.clientWidth-e.width&&(n=t.element.clientWidth-e.width),i<t.element.clientHeight-e.height&&(i=t.element.clientHeight-e.height),t.hRuler&&t.hRuler.length&&(n=t.hRuler.length),t.vRuler&&t.vRuler.length&&(i=t.vRuler.length),new Wd(n,i)}function tg(t,e,i,n){var r=Qf(t),o=$f(t),s=n?t.rulerSettings.horizontalRuler:t.rulerSettings.verticalRuler;!function(t,e,i){var n=document.getElementById(t.element.id+(i?"_hRuler":"_vRuler")),r=i?t.hRuler:t.vRuler;n&&t&&e&&(n.style.width=(i?e.width+r.segmentWidth:r.thickness)+"px",n.style.height=(i?r.thickness:e.height+r.segmentWidth)+"px",(n=document.getElementById(t.element.id+"_overlapRuler"))&&(i?n.style.height=r.thickness+"px":n.style.width=r.thickness+"px"))}(t,o,n),function(t,e,i){var n=document.getElementById(t.element.id+(i?"_hRuler_ruler_space":"_vRuler_ruler_space")),r=i?t.hRuler:t.vRuler;n&&t&&e&&(n.style.width=(i?e.width+2*r.segmentWidth:r.thickness)+"px",n.style.height=(i?r.thickness:e.height+2*r.segmentWidth)+"px")}(t,o,n),e.offset=i,e.scale=t.scroller.currentZoom,e.length=(n?o.width:o.height)+100,e.arrangeTick=Lb(s.arrangeTick),e.dataBind();var a=n?t.hRuler.element:t.vRuler.element;n?a.style.marginLeft=r.width-e.hRulerOffset+"px":a.style.marginTop=r.height-e.vRulerOffset+"px"}function eg(t){if(t){return t instanceof yu||t instanceof vu?t.constraints&vp.Select:t instanceof Gf?t.constraints&yp.Select:t.constraints&bp.Select}return 1}function ig(t){if(t){return t instanceof yu||t instanceof vu?t.constraints&vp.Drag:t instanceof Gf?t.constraints&yp.Drag:t instanceof Mv?1:t.constraints&bp.Drag}return 1}function ng(t){return t.constraints&yp.DragSourceEnd}function rg(t){return t.constraints&yp.DragTargetEnd}function og(t){return t.constraints&yp.DragSegmentThumb}function sg(t){return t instanceof yu||t instanceof vu?t.constraints&vp.Rotate:t.constraints&bp.Rotate}function ag(t){return t.constraints&bp.Shadow}function lg(t){return t instanceof Lv&&t.constraints&bp.InConnect?t.constraints&bp.InConnect:0}function hg(t){return t&&t.constraints&&!(t.constraints&Mp.None)&&t.constraints&Mp.InConnect?t.constraints&Mp.InConnect:0}function cg(t){return t instanceof Lv&&t.constraints&bp.OutConnect?t.constraints&bp.OutConnect:0}function dg(t){return t&&t.constraints&&!(t.constraints&Mp.None)&&t.constraints&Mp.OutConnect?t.constraints&Mp.OutConnect:0}function pg(t,e){var i=0;return t instanceof yu||t instanceof vu?i=t.constraints&vp.Resize:t&&("SouthEast"===e?i=t.constraints&bp.ResizeSouthEast:"East"===e?i=t.constraints&bp.ResizeEast:"NorthEast"===e?i=t.constraints&bp.ResizeNorthEast:"South"===e?i=t.constraints&bp.ResizeSouth:"North"===e?i=t.constraints&bp.ResizeNorth:"SouthWest"===e?i=t.constraints&bp.ResizeSouthWest:"West"===e?i=t.constraints&bp.ResizeWest:"NorthWest"===e&&(i=t.constraints&bp.ResizeNorthWest)),i}function ug(t){return t instanceof Gf?t.constraints&yp.AllowDrop:t.constraints&bp.AllowDrop}function fg(t){return t.constraints&xp.Virtualization}function gg(t){return t.tool&Cp.SingleSelect}function mg(t){return t.tool&Cp.MultipleSelect}function yg(t){return t.tool&Cp.ZoomPan}function vg(t){return t.tool&Cp.ContinuousDraw}function bg(t){return t.tool&Cp.DrawOnce}function wg(t){return t.tool&Cp.SingleSelect||t.tool&Cp.MultipleSelect}function Sg(t){return t.constraints&xp.UserInteraction}function xg(t){return t.constraints&xp.ZoomTextEdit}function Cg(t){return function(t){return t.constraints&xp.ApiUpdate}(t)||t.diagramActions&Ip.ToolAction}function Pg(t,e){return t.constraints&Mp.Draw}function Og(t,e){return t.constraints&Mp.Drag}function Eg(t){return!(t&Tp.DrawSelectorBorder)}function Lg(t){return!!(t&Tp.PreventRenderSelector)}var Ig=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Tg=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Ag=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ig(e,t),e.prototype.getClassName=function(){return"UserHandle"},Tg([Hi("")],e.prototype,"name",void 0),Tg([Hi("")],e.prototype,"pathData",void 0),Tg([Hi("")],e.prototype,"content",void 0),Tg([Hi("")],e.prototype,"source",void 0),Tg([Hi("#000000")],e.prototype,"backgroundColor",void 0),Tg([Hi("Top")],e.prototype,"side",void 0),Tg([Hi("")],e.prototype,"borderColor",void 0),Tg([Hi(.5)],e.prototype,"borderWidth",void 0),Tg([Hi(25)],e.prototype,"size",void 0),Tg([Hi("white")],e.prototype,"pathColor",void 0),Tg([Hi(10)],e.prototype,"displacement",void 0),Tg([Hi(!0)],e.prototype,"visible",void 0),Tg([Hi(0)],e.prototype,"offset",void 0),Tg([_i({},Np)],e.prototype,"margin",void 0),Tg([Hi("Center")],e.prototype,"horizontalAlignment",void 0),Tg([Hi("Center")],e.prototype,"verticalAlignment",void 0),Tg([Hi(!1)],e.prototype,"disableNodes",void 0),Tg([Hi(!1)],e.prototype,"disableConnectors",void 0),Tg([Hi("")],e.prototype,"template",void 0),e}(ln);function Bg(t){return kg[t.toString()]}var kg={Action:"M 90 82.895 C 90 86.819 86.776 90 82.8 90 H 7.2 C 3.224 90 0 86.819 0 82.895 V 7.105 C 0 3.181 3.224 0 7.2 0 h 75.6 C 86.776 0 90 3.181 90 7.105 V 82.895 Z",Decision:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",MergeNode:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",InitialNode:"M10,19.5c-5.238,0-9.5-4.262-9.5-9.5S4.762,0.5,10,0.5s9.5,4.262,9.5,9.5S15.238,19.5,10,19.5z",ForkNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",JoinNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",TimeEvent:"M50.001,0.00286865 L25.001,25.0029 L0.000976562,0.00286865 L50.001,0.00286865 z M0.000976562,50.0029 L25.001,25.0029 L50.001,50.0029 L0.000976562,50.0029 z",AcceptingEvent:"M17.8336 32.164 L29.64 24 L17.32 16 L48.1664 16 L48.5 32 Z",SendSignal:"M48.164 31.8336 L56 23.832 L47.836 16 L16.168 16 L16.1668 31.8336 Z",ReceiveSignal:"M48.1664 31.8336 L39.836 24 L47.836 16 L16.168 16 L16.168 31.836 Z",StructuredNode:"M0,0 L50,0 L50,50 L0,50 z",Note:"M20 12 L4 12 L4 22 L22 22 L22 14 L20 14 L20 12 L22 14 Z"},Mg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Dg=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Rg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Mg(e,t),Dg([Hi()],e.prototype,"key",void 0),Dg([Hi()],e.prototype,"keyModifiers",void 0),e}(ln),zg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Mg(e,t),e.prototype.getClassName=function(){return"Command"},Dg([Hi("")],e.prototype,"name",void 0),Dg([Hi()],e.prototype,"canExecute",void 0),Dg([Hi()],e.prototype,"execute",void 0),Dg([_i({},Rg)],e.prototype,"gesture",void 0),Dg([Hi("")],e.prototype,"parameter",void 0),e}(ln),jg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Mg(e,t),Dg([Fi([],zg)],e.prototype,"commands",void 0),e}(ln),Ng=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Mg(e,t),Dg([Hi()],e.prototype,"show",void 0),Dg([Hi()],e.prototype,"showCustomMenuOnly",void 0),Dg([Hi()],e.prototype,"items",void 0),e}(ln),Hg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.childTable=[],e.cellStyle={},e.desiredRowHeight=[],e.desiredCellWidth=[],e}return Hg(e,t),e.prototype.rowDefinitions=function(){return this.rowDefns},e.prototype.columnDefinitions=function(){return this.colDefns},e.prototype.addObject=function(t,e,i,n,r){if(this.rows.length>=e){var o=this.rows[e];if(o.cells.length>i){r=r||1,n=n||1;var s=o.cells[i];s.columnSpan=Math.max(r,s.columnSpan),s.rowSpan=Math.max(n,s.rowSpan);var a=new Gg;(a=t).rowId=e,a.columnId=i,a.columnSpan=r,this.childTable[a.id]=a,this.addObjectToCell(a,s)}}},e.prototype.addObjectToCell=function(t,e){e.children||(e.children=[]),t.style.strokeColor="black",t.style.strokeWidth=1,t.style.fill="white",e.children.push(t)},e.prototype.updateProperties=function(t,e,i,n){this.offsetX=t,this.offsetY=e,this.width=i,this.height=n},e.prototype.setDefinitions=function(t,e){this.rowDefns=t,this.colDefns=e,this.children=[],this.rows=this.rows||[];for(var i=0;i<t.length;i++){var n=t[i],r=new Wg;r.cells=[];var o=new Fg;o.width=this.width;var s=this.colDefns;(void 0===s||s.length<1)&&(s=[o]),this.addCellInRow(s,n,r),this.rows.push(r)}},e.prototype.addCellInRow=function(t,e,i){for(var n=0;n<t.length;n++){var r=t[n],o=new Ug;o.children=[],this.cellStyle.fill="none",this.cellStyle.strokeColor="none",o.id=cb(),o.style=this.cellStyle,o.desiredCellWidth=o.minWidth=r.width,o.desiredCellHeight=o.minHeight=e.height,i.cells.push(o),this.children.push(o)}},e.prototype.calculateSize=function(){for(var t=this.rows||[],e=0,i=0,n=0;n<t.length;n++){var r=this.rows[n];i=0;for(var o=0;o<r.cells.length;o++)if(i+=r.cells[o].desiredCellWidth,o===r.cells.length-1&&(this.width&&this.width!==i&&(r.cells[o].desiredCellWidth+=this.width-i,r.cells[o].minWidth=r.cells[o].desiredCellWidth,r.cells[o].children&&r.cells[o].children.length&&(r.cells[o].children[0].width=r.cells[o].desiredCellWidth),this.colDefns[o].width=r.cells[o].desiredCellWidth),e+=r.cells[o].desiredCellHeight,n===t.length-1&&this.height&&this.height!==e)){var s=this.height-e;if(s>0){for(var a=0;a<r.cells.length;a++)r.cells[a].desiredCellHeight+=s,r.cells[a].minHeight=r.cells[a].desiredCellHeight=r.cells[a].desiredCellHeight,r.cells[a].children&&r.cells[a].children.length&&(r.cells[a].children[0].height=r.cells[a].desiredCellHeight);this.rowDefns[n].height+=s}}}},e.prototype.updateRowHeight=function(t,e,i,n){var r=this.rows[t];this.rowDefns[t].height=e,void 0!==this.height&&(this.height+=e-r.cells[0].desiredCellHeight);for(var o=0;o<r.cells.length;o++)r.cells[o].desiredCellHeight=r.cells[o].minHeight=e,r.cells[o].children&&r.cells[o].children.length&&(r.cells[o].children[0].height=e,this.setTextRefresh(r.cells[o].children[0]));if(this.desiredRowHeight[t]=e,this.measure(new Wd(this.width,this.height)),this.arrange(this.desiredSize),i){var s=void 0!==n?this.calculateCellHeightBasedOnChildren(t,n):this.calculateCellHeight(t);s>e&&this.updateRowHeight(t,s,!1)}},e.prototype.setTextRefresh=function(t){if(t.children&&t.children.length)for(var e=t.children,i=0;i<e.length;i++)e[i]instanceof Qp&&e[i].refreshTextElement(),e[i]instanceof tu&&this.setTextRefresh(e[i])},e.prototype.updateColumnWidth=function(t,e,i,n){this.colDefns[t].width=e,void 0!==this.width&&(this.width+=e-this.rows[this.rows.length-1].cells[t].desiredCellWidth);for(var r=0;r<this.rows.length;r++)this.setTextRefresh(this.rows[r].cells[0]),this.rows[r].cells[t].desiredCellWidth=this.rows[r].cells[t].minWidth=e,this.rows[r].cells[t].children&&this.rows[r].cells[t].children.length&&(this.rows[r].cells[t].children[0].width=e);if(this.desiredCellWidth[t]=e,this.measure(new Wd(this.width,this.height)),this.arrange(this.desiredSize),i){var o=void 0!==n?this.calculateCellWidthBasedOnChildren(t,n):this.calculateCellWidth(t);o>e&&this.updateColumnWidth(t,o,!1)}},e.prototype.calculateCellWidth=function(t){for(var e,i,n,r=0;r<this.rows.length;r++)1===(n=this.rows[r].cells[t]).columnSpan&&(i=n.outerBounds.width>n.bounds.width&&(0===n.children.length||void 0===n.children[0].maxWidth)?n.outerBounds.width:n.bounds.width,e=e?e<i?i:e:i);return e},e.prototype.calculateCellHeight=function(t){for(var e,i,n,r=this.rows[t],o=0;o<r.cells.length;o++)i=(n=r.cells[o]).outerBounds.height>n.bounds.height?n.outerBounds.height:n.bounds.height,e=e?e<i?i:e:i;return e},e.prototype.calculateCellSizeBasedOnChildren=function(t,e,i,n){var r,o;if((o=t&&t.children.length>0?t.children[0]:void 0)&&1===t.columnSpan){r="Width"===e?o.bounds.right:o.bounds.bottom,n||(n="Width"===e?o.bounds.width:o.bounds.height);for(var s=0;s<o.children.length;s++){var a=o.children[s];if(a instanceof tu&&-1===a.id.indexOf("header")){var l=("Width"===e?a.bounds.right:a.bounds.bottom)+i;if(l>r){var h=l-r+("Width"===e?o.bounds.width:o.bounds.height);n&&(n=n<h?h:n)}}}}return n},e.prototype.calculateCellWidthBasedOnChildren=function(t,e){for(var i,n,r=0;r<this.rows.length;r++)n=this.rows[r].cells[t],i=this.calculateCellSizeBasedOnChildren(n,"Width",e,i);return i},e.prototype.calculateCellHeightBasedOnChildren=function(t,e){for(var i,n,r=this.rows[t],o=0;o<r.cells.length;o++)n=r.cells[o],i=this.calculateCellSizeBasedOnChildren(n,"Height",e,i);return i},e.prototype.addRow=function(t,e,i){this.rowDefns.length>0?this.rowDefns.splice(t,0,e):this.rowDefns.push(e);var n=new Wg;n.cells=[],(new Fg).width=this.width;var r=this.colDefns;this.addCellInRow(r,e,n),t>this.rows.length-1?this.rows.push(n):this.rows.splice(t,0,n),i&&(this.measure(new Wd(this.width,this.height)),this.arrange(this.desiredSize))},e.prototype.addColumn=function(t,e,i){var n,r,o,s,a=this.rows;this.colDefns.length>0?this.colDefns.splice(t,0,e):this.colDefns.push(e),void 0!==this.width&&(this.width+=e.width);for(var l=0;l<a.length;l++)n=a[l],r=this.rowDefns[l],o=e,(s=new Ug).style=this.cellStyle,s.desiredCellWidth=s.minWidth=o.width,s.desiredCellHeight=s.minHeight=r.height,s.children=[],t>n.cells.length-1?n.cells.push(s):n.cells.splice(t,0,s),this.children.push(s);i&&(this.measure(new Wd(this.width,this.height)),this.arrange(this.desiredSize))},e.prototype.removeRow=function(t){var e,i,n=this.rows[t];this.height-=this.rowDefns[t].height;for(var r=0;r<n.cells.length;r++)e=n.cells[r],this.children.splice(this.children.indexOf(e),1),(i=document.getElementById(e.id+"_groupElement"))&&i.parentElement&&i.parentElement.removeChild(i);this.rows.splice(t,1),this.rowDefns.splice(t,1),this.measure(new Wd(this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.removeColumn=function(t){var e,i,n=this.rows;this.width-=this.colDefns[t].width;for(var r=0;r<n.length;r++)e=n[r].cells[t],this.children.splice(this.children.indexOf(e),1),(i=document.getElementById(e.id+"_groupElement"))&&i.parentElement&&i.parentElement.removeChild(i),n[r].cells.splice(t,1);this.colDefns.splice(t,1),this.measure(new Wd(this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.updateRowIndex=function(t,e){this.rows;var i=this.rows[t];this.rows.splice(t,1),this.rows.splice(e,0,i);var n=this.rowDefns[t];this.rowDefns.splice(t,1),this.rowDefns.splice(e,0,n),this.measure(new Wd(this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.updateColumnIndex=function(t,e,i){for(var n,r,o,s=t;s<this.rows.length;s++)n=this.rows[s],r=this.rows[s].cells[e],n.cells.splice(e,1),n.cells.splice(i,0,r);var a=this.colDefns[e];this.colDefns.splice(e,1),this.colDefns.splice(i,0,a),o=this.desiredCellWidth[e],this.desiredCellWidth.splice(e,1),this.desiredCellWidth.splice(i,0,o),this.measure(new Wd(this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.measure=function(e){var i=void 0;if(void 0!==this.rows&&this.rows.length>0){var n=0,r=0;i=new Wd(0,0),this.calculateSize();for(var o=0,s=this.rows;o<s.length;o++){r=0;for(var a=0,l=(u=s[o]).cells;a<l.length;a++){var h=(y=l[a]).measure(new Wd(y.desiredCellWidth,y.desiredCellHeight));1===y.rowSpan&&(0===r||void 0===this.desiredRowHeight[n]?this.desiredRowHeight[n]=h.height:this.desiredRowHeight[n]=Math.max(h.height,this.desiredRowHeight[n])),1===y.columnSpan&&(0===n||void 0===this.desiredCellWidth[r]?this.desiredCellWidth[r]=h.width:this.desiredCellWidth[r]=Math.max(h.width,this.desiredCellWidth[r]),n===this.rows.length-1&&(i.width+=this.desiredCellWidth[r])),r++}i.height+=this.desiredRowHeight[n],n++}n=r=0;for(var c=0,d=0,p=this.rows;d<p.length;d++){var u;r=0;for(var f=0,g=0,m=(u=p[d]).cells;g<m.length;g++){var y;if(1!==(y=m[g]).columnSpan){y.desiredSize.width=0;for(var v=0;v<y.columnSpan;v++)v+r<u.cells.length&&(y.desiredSize.width+=this.desiredCellWidth[v+r],y.minWidth=y.desiredSize.width,y.measure(y.desiredSize));r++}else y.desiredSize.width=this.desiredCellWidth[f],y.measure(y.desiredSize);if(1!==y.rowSpan){y.desiredSize.height=0;for(v=0;v<y.rowSpan;v++)v+c<this.rows.length&&(y.desiredSize.height+=this.desiredRowHeight[v+c],y.minHeight=y.desiredSize.height,y.measure(y.desiredSize))}else y.desiredSize.height=this.desiredRowHeight[c],y.measure(y.desiredSize);n++,f++}c++}}return void 0===i&&(i=t.prototype.validateDesiredSize.call(this,i,e)),t.prototype.stretchChildren.call(this,i),this.desiredSize=i,i},e.prototype.arrange=function(t,e){var i=0,n=0;if(void 0!==this.rows&&this.rows.length>0){for(var r=this.offsetX-t.width*this.pivot.x,o=this.offsetY-t.height*this.pivot.y,s=r,a=0,l=this.rows;a<l.length;a++){s=r,i=0;for(var h=0,c=(f=l[a]).cells;h<c.length;h++){var d=c[h],p=Math.max(this.desiredCellWidth[i],d.desiredSize.width),u=Math.max(this.desiredRowHeight[n],d.desiredSize.height);d.offsetX=s+p*d.pivot.x,d.offsetY=o+u*d.pivot.y,s+=this.desiredCellWidth[i],d.arrange(new Wd(p,u)),i++}o+=this.desiredRowHeight[n],n++}if(e){d=void 0;var f=void 0,g=void 0,m=void 0,y=void 0;for(n=0;n<this.rows.length;n++)for(f=this.rows[n],i=0;i<f.cells.length;i++)if((d=f.cells[i]).columnSpan>1&&this.children.splice(this.children.indexOf(d)+1,d.columnSpan-1),d.rowSpan>1)for(g=n,m=0;g+d.rowSpan-1<this.rows.length&&m<d.rowSpan-1;g++,m++)y=this.rows[g+1].cells[i],this.children.splice(this.children.indexOf(y),1)}}return this.actualSize=t,this.updateBounds(),t},e}(Kp),Vg=function(){return function(){this.height=void 0}}(),Fg=function(){return function(){this.width=void 0}}(),Wg=function(){return function(){this.cells=null}}(),Ug=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.columnSpan=1,e.rowSpan=1,e}return Hg(e,t),e}(tu),Gg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rowId=0,e.columnId=0,e.rowSpan=1,e.columnSpan=1,e}return Hg(e,t),e}(Yp);function qg(t,e,i,n){var r;if(Yg(t,e,!0)){var o=t.isProtectedOnChange;t.protectPropertyChange(!0);var s=(r=t.nameTable[e.parentId]).wrapper;if(r&&"Canvas"===r.container.type&&!(n||s.bounds.x<=i.x&&s.bounds.right>=i.x&&s.bounds.y<=i.y&&s.bounds.bottom>=i.y||e.constraints&bp.AllowMovingOutsideLane)){var a=gb(e);t.clearSelection(),Kg(t,e),e.parentId="";var l={type:"ChildCollectionChanged",category:"Internal",undoObject:a,redoObject:gb(e)};t.addHistoryEntry(l),t.commandHandler.isContainer&&(t.commandHandler.isContainer=!1,t.endGroupAction()),Qg(e,t)}t.protectPropertyChange(o)}}function Xg(t,e){var i,n,r;if(t.enableServerDataBinding(!1),!$()||$()&&t.diagramActions&Ip.ToolAction)if(t.selectedObject.helperObject)r=t.selectedObject.helperObject;else if(t.selectedItems.nodes.length>0||t.selectedItems.connectors.length>0){if(e instanceof Mv&&e.nodes.length+e.connectors.length===1?(i=e.nodes.length>0?e.nodes[0]:e.connectors[0],n=t.selectedItems.wrapper.children[0]):(i=e,n=$()?e===t.selectedItems.nodes[0]?t.selectedItems.wrapper:e.wrapper:t.selectedItems.wrapper),t.selectedObject.actualObject=i,!t.currentSymbol&&(i.isLane&&Rm(i,t)&&Yg(t,i)||!i.isLane&&Yg(t,i)||t.constraints&xp.LineRouting&&t.selectedItems.nodes.length>0))r=function(t,e){for(var i,n={},r=0,o=Object.keys(e);r<o.length;r++){var s=o[r];n[s]=e[s]}return Iy(e)===Lv&&((i=new Lv(t,"nodes",n,!0)).id=e.id,t.initObject(i)),t.updateDiagramObject(i),i}(t,{id:"helper",rotateAngle:n.rotateAngle,offsetX:n.offsetX,offsetY:n.offsetY,minWidth:n.minWidth,minHeight:n.minHeight,maxWidth:n.maxWidth,maxHeight:n.maxHeight,width:n.actualSize.width,height:n.actualSize.height,style:{strokeDashArray:"2 2",fill:"transparent",strokeColor:"#7D7D7D",strokeWidth:2}}),t.selectedObject.helperObject=r}return t.enableServerDataBinding(!0),r}function Yg(t,e,i){var n=i?t.nameTable[e.parentId]:t.nameTable[e.parentId]||e;return!(!n||!n.container)}function Zg(t,e){var i=t.nameTable[e.parentId];"Canvas"===i.container.type&&(e.margin.left=e.offsetX-i.wrapper.bounds.x-e.width/2,e.margin.top=e.offsetY-i.wrapper.bounds.y-e.height/2),t.nodePropertyChange(e,{},{width:e.width,height:e.height,offsetX:e.offsetX,offsetY:e.offsetY,margin:{left:e.margin.left,right:e.margin.right,top:e.margin.top,bottom:e.margin.bottom},rotateAngle:e.rotateAngle}),i.isLane||(i.wrapper.measure(new Wd),i.wrapper.arrange(i.wrapper.desiredSize))}function Kg(t,e){if(e.parentId&&""!==e.parentId){var i=t.nameTable[e.parentId];if(i.isLane&&i.parentId)for(var n=t.nameTable[i.parentId],r=i.id.slice(n.id.length),o=r.substring(0,r.length-1),s=n.shape.lanes,a=void 0,l=0;l<s.length;l++)if(o===(a=s[l]).id)for(var h=0;h<a.children.length;h++)a.children[h].id===e.id&&(a.children.splice(h,1),h--);t.deleteChild(e)}}function Jg(t,e,i,n,r){if(!t.currentSymbol){t.protectPropertyChange(!0);var o=t.nameTable[e.parentId];i=t.getObject(i.id)||i;var s=-1!==t.nodes.indexOf(i)?i.id:i;if("Canvas"!==e.container.type||r){if(o){var a=o.wrapper.bounds,l=e.wrapper.bounds;if("Horizontal"===o.shape.orientation)i.margin.left-=l.x-a.x;else{var h=e.parentId+o.shape.lanes[0].id+"_0_header";i.margin.top-=l.y-a.y-t.nameTable[h].wrapper.bounds.height}}}else{var c=i.wrapper.offsetX-i.wrapper.actualSize.width/2-(e.wrapper.offsetX-e.wrapper.actualSize.width/2),d=i.wrapper.offsetY-i.wrapper.actualSize.height/2-(e.wrapper.offsetY-e.wrapper.actualSize.height/2);i.margin.left=c,i.margin.top=d}var p=t.nameTable[e.id];if(p.children||(p.children=[]),-1===p.children.indexOf(i.id)){Kg(t,i),t.getObject(i.id)&&t.removeElements(i);var u=gb(i);if(t.addChild(p,s),i=t.getObject(i.id),p.isLane&&p.parentId)for(var f=(o=t.nameTable[p.parentId]).shape.lanes,g=p.id.slice(o.id.length),m=g.substring(0,g.length-1),y=0;y<f.length;y++)p.isLane&&m===f[y].id&&(i.parentObj instanceof iS||(i.parentObj=f[y]),f[y].children.push(i));if(t.updateDiagramObject(i),Qg(i,t),p.parentId?n||$g(p,o,i,t):t.updateDiagramObject(p),!(t.diagramActions&Ip.UndoRedo)){var v={type:"ChildCollectionChanged",category:"Internal",undoObject:u,redoObject:gb(i),historyAction:r?"AddNodeToLane":void 0};t.addHistoryEntry(v)}}t.protectPropertyChange(!1)}}function Qg(t,e){var i=Hv(t.id+"_groupElement",e.element.id),n=Hv(t.parentId?t.parentId+"_groupElement":e.element.id+"_diagramLayer",e.element.id);i&&n&&n.appendChild(i)}function $g(t,e,i,n,r){var o,s=gb(t),a=!1,l=e.shape.padding,h=t.wrapper.bounds,c=t.wrapper.outerBounds,d=i.wrapper.bounds;if(e&&"SwimLane"===e.shape.type&&(h.right<d.right+l||h.bottom<d.bottom+l)){var p=e.wrapper.children[0],u=p.bounds.x,f=p.bounds.y,g=void 0;if(h.right<d.right+l&&c.x<=h.x&&(g=d.right-h.right,o=!1,p.updateColumnWidth(t.columnIndex,h.width+g,!0,l)),h.bottom<d.bottom+l&&c.y<=h.y&&(g=d.bottom-h.bottom,o=!0,p.updateRowHeight(t.rowIndex,h.height+g,!0,l)),!(n.diagramActions&Ip.UndoRedo)&&(r&&(n.startGroupAction(),a=!0),void 0!==o)){var m={category:"Internal",type:o?"RowHeightChanged":"ColumnWidthChanged",undoObject:s,redoObject:gb(t)};n.addHistoryEntry(m)}e.width=e.wrapper.width=p.width,e.height=e.wrapper.height=p.height,lm(e),"Horizontal"===e.shape.orientation&&bm(e,n,t.wrapper,t.columnIndex),wm(n,e),n.drag(e,u-p.bounds.x,f-p.bounds.y),um(e,n),pm(e)}return function(t,e,i){var n=t.nameTable[e.parentId];if(n&&n.isLane){var r=t.nameTable[n.parentId],o=r.wrapper.children[0];r.wrapper.bounds.x,r.wrapper.bounds.y;o.updateColumnWidth(n.columnIndex,o.columnDefinitions()[n.columnIndex].width,!0,i),o.updateRowHeight(n.rowIndex,o.rowDefinitions()[n.rowIndex].height,!0,i);var s=n.wrapper,a=void 0;e.margin.left<i&&(e.margin.left=i),e.margin.top<i&&(e.margin.top=i);for(var l=0;l<s.children.length;l++){var h=s.children[l];if(h instanceof tu){var c=t.nameTable[h.id];if(c.isLane){a=c.wrapper,!0;break}}}a&&("Horizontal"===r.shape.orientation?e.margin.left<i+a.actualSize.width&&(e.margin.left=i+a.actualSize.width):e.margin.top<i+a.actualSize.height&&(e.margin.top=i+a.actualSize.height)),r.wrapper.measure(new Wd(r.width,r.height)),r.wrapper.arrange(r.wrapper.desiredSize),e.offsetX=e.wrapper.offsetX,e.offsetY=e.wrapper.offsetY,t.nodePropertyChange(e,{},{margin:{left:e.margin.left,top:e.margin.top}}),o.measure(new Wd(o.width,o.height)),o.arrange(o.desiredSize),r.width=r.wrapper.width=r.wrapper.children[0].actualSize.width,r.height=r.wrapper.height=r.wrapper.children[0].actualSize.height}}(n,i,l),n.updateDiagramElementQuad(),a}function tm(t,e,i,n,r,o){var s=Vv(n.element.id);n.diagramRenderer.renderStackHighlighter(t,s,n.scroller.transform,e,i,r,o)}function em(t,e,i){i.width||0!==i.shape.phases.length||(i.width=100);var n=[],r=[],o=0,s=i.shape,a="Horizontal"===s.orientation;if(s.header&&s.hasHeader&&om(n,s.header.height),function(t,e,i){var n,r=0,o=i.shape;if(t.length>0)for(var s=0;s<t.length;s++)r+=t[s].height;if(e){if(o.phases.length>0&&o.phaseSize&&(r+=o.phaseSize,om(t,o.phaseSize)),o.lanes.length>0)for(var s=0;s<o.lanes.length;s++)n=o.lanes[s].height,r+=n,s===o.lanes.length-1&&r<i.height&&(n+=i.height-r),om(t,n)}else if(o.phases.length>0)for(var a=0,s=0;s<o.phases.length;s++){var l=o.phases[s].offset;a+=0===s?l:l-=a,r+=n=l,s===o.phases.length-1&&r<i.height&&(n+=i.height-r),om(t,n)}else om(t,i.height)}(n,a,i),function(t,e,i){var n,r,o,s,a=0,l=i.shape;if(l.phases.length>0&&"Horizontal"===l.orientation)for(s=0;s<l.phases.length;s++)n=l.phases[s].offset,a+=0===s?n:n-=a,r=sm(n),s===l.phases.length-1&&a<i.width&&(r.width+=i.width-a),t.push(r);else if(e)r=sm(i.width),t.push(r);else{for(l.phaseSize&&l.phases.length>0?l.lanes.length+1:l.lanes.length,l.phaseSize&&l.phases.length>0&&(a+=l.phaseSize,r=sm(l.phaseSize),t.push(r)),o=0;o<l.lanes.length;o++)a+=l.lanes[o].width,r=sm(l.lanes[o].width),o===l.lanes.length-1&&a<i.width&&(r.width+=i.width-a),t.push(r);0===l.phases.length&&0===l.lanes.length&&(r=sm(i.width),t.push(r))}}(r,a,i),t.setDefinitions(n,r),s.header&&s.hasHeader&&(!function(t,e,i){for(var n=0,r=t.columnDefinitions(),o=i.shape,s=0;s<r.length;s++)n+=r[s].width;o.header.id=o.header.id||cb();var a={id:i.id+o.header.id,annotations:[gb(o.header.annotation)],style:o.header.style?o.header.style:void 0,offsetX:i.offsetX,offsetY:i.offsetY,rowIndex:0,columnIndex:0,maxWidth:n,container:{type:"Canvas",orientation:"Horizontal"}};eg(i)||(a.constraints&=~bp.Select);var l=im(e,t,i,a,!0);t.addObject(l,0,0,1,t.columnDefinitions().length)}(t,e,i),o++),s.phases.length>0&&s.phaseSize){for(var l=0;l<s.phases.length;l++)""===s.phases[l].id&&(s.phases[l].id=cb()),nm(t,e,i,o,a,l);o++}if(s.lanes.length>0)for(l=0;l<s.lanes.length;l++)""===s.lanes[l].id&&(s.lanes[l].id=cb()),rm(t,e,i,o,l,a),o++}function im(t,e,i,n,r,o,s,a){var l=new Lv(t,"nodes",n,!0);if(l.parentId=i.id,l.isHeader=!!r,l.isPhase=!!o,l.isLane=!!s,a&&(l[o?"PhaseHeaderParent":"LaneHeaderParent"]=a),l.constraints&=~(bp.InConnect|bp.OutConnect),l.constraints|=bp.HideThumbs,t.initObject(l),t.nodes.push(l),l.wrapper.children.length>0){for(var h=0;h<l.wrapper.children.length;h++){var c=l.wrapper.children[h];c instanceof Yp&&(c.isCalculateDesiredSize=!1),c instanceof Qp&&(c.canConsiderBounds=!1,(!r&&"Vertical"===i.shape.orientation&&o||"Vertical"!==i.shape.orientation&&s)&&(c.isLaneOrientation=!0,c.refreshTextElement()))}l.wrapper.measure(new Wd(void 0,void 0)),l.wrapper.arrange(l.wrapper.desiredSize)}return l.wrapper}function nm(t,e,i,n,r,o){var s,a=0,l=0,h=i.shape;r?(l=o,a=n,s=t.columnDefinitions()[o].width):a=h.header&&h.hasHeader?o+1:o;var c={annotations:[gb(h.phases[o].header.annotation)],maxWidth:s,id:i.id+h.phases[o].id+"_header",offsetX:i.offsetX,offsetY:i.offsetY,style:h.phases[o].style,rowIndex:a,columnIndex:l,container:{type:"Canvas",orientation:r?"Horizontal":"Vertical"}};c.annotations[0].rotateAngle=r?0:270,eg(i)||(c.constraints&=~bp.Select),h.phases[o].header.id=c.id;var d=im(e,0,i,c,!1,!0,!1,h.phases[o].id);t.addObject(d,a,l)}function rm(t,e,i,n,r,o){for(var s,a,l,h,c,d=i.shape,p=d.phases.length||1,u=d.header&&d.hasHeader?1:0,f=0,g=o?n:u,m=d.phaseSize&&d.phases.length>0?1:0,y=0;y<p;y++)f=o?y:r+m,l=t.rows[g].cells[f],h={id:i.id+d.lanes[r].id+y,rowIndex:g,columnIndex:f,width:l.minWidth,height:l.minHeight,offsetX:i.offsetX,offsetY:i.offsetY,style:d.lanes[r].style,constraints:bp.Default|bp.ReadOnly|bp.AllowDrop,container:{type:"Canvas",orientation:o?"Horizontal":"Vertical"}},eg(i)||(h.constraints&=~bp.Select),(a=im(e,0,i,h,!1,!1,!0)).children[0].isCalculateDesiredSize=!1,0===y&&((s={id:i.id+d.lanes[r].id+"_"+y+"_header",style:d.lanes[r].header.style,annotations:[gb(d.lanes[r].header.annotation)],offsetX:i.offsetX,offsetY:i.offsetY,rowIndex:g,columnIndex:f,container:{type:"Canvas",orientation:o?"Horizontal":"Vertical"}}).annotations[0].rotateAngle=o?270:0,d.lanes[r].header.id=s.id,o?s.width=d.lanes[r].header.width:s.height=d.lanes[r].header.height,eg(i)||(s.constraints&=~bp.Select),c=im(e,0,i,s,!1,!1,!0,d.lanes[r].id),a.children.push(c)),t.addObject(a,g,f),o||g++,f=o?y:r+1}function om(t,e){var i=new Vg;i.height=e,t.push(i)}function sm(t){var e=new Fg;return e.width=t,e}function am(t,e,i,n){for(var r,o,s,a,l,h,c,d=[],p=0,u=e.rowDefinitions().length,f=0;f<u;f++)for(h=e.rows[f],a=0;a<h.cells.length;a++)if((l=h.cells[a].children[0])&&l.children&&l.children.length)for(s=1;s<l.children.length;s++)if(r=l.children[s],(o=t.getObject(r.id))&&(o.inEdges.length>0||o.outEdges.length>0))for(c=o.inEdges.concat(o.outEdges),p=0;p<c.length;p++)-1===d.indexOf(c[p])&&d.push(c[p]);return d}function lm(t){var e=t.wrapper;if(e.measure(new Wd(t.width,t.height)),e.children[0]instanceof _g){var i=e.children[0],n=!1;i.width&&i.width<i.desiredSize.width&&(n=!0,i.width=i.desiredSize.width),i.height&&i.height<i.desiredSize.height&&(n=!0,i.height=i.desiredSize.height),n&&i.measure(new Wd(i.width,i.height))}e.arrange(e.desiredSize)}function hm(t,e,i){var n,r,o,s,a,l,h,c,d=e.wrapper.children[0];for(n=i;n<d.rows.length;n++)for(l=d.rows[n],r=0;r<l.cells.length;r++)if((h=l.cells[r]).children&&h.children.length>0)for(o=0;o<h.children.length;o++)c=h.children[o],(s=t.nameTable[c.id]).isLane&&c.children.length>1&&(a=t.nameTable[c.children[1].id])&&a.isLane&&(a.rowIndex=n,a.columnIndex=r),s.rowIndex=n,s.columnIndex=r}function cm(t,e){var i,n,r,o,s,a,l,h,c=e.wrapper.children[0],d=e.shape,p=d.padding,u=d.lanes,f=c.bounds.y,g=d.phaseSize>0?d.phases.length:0,m="Horizontal"===d.orientation,y=m?d.phases.length||1:u.length+1,v=m?(d.header&&d.hasHeader?1:0)+(d.phases.length>0?1:0)+d.lanes.length:(d.header&&d.hasHeader?1:0)+d.phases.length;if(0===g&&!m&&d.lanes.length&&(v+=1),m?(i=(d.header&&d.hasHeader?1:0)+(g>0?1:0),n=0):(i=d.header&&d.hasHeader?1:0,n=g>0?1:0),u.length>0)for(f+=d.header&&d.hasHeader?d.header.height:0,a=0;a<u.length;a++){for(l=0;l<u[a].children.length;l++)if((r=u[a].children[l]).offsetX=u[a].width,r.offsetY=u[a].height,t.initObject(r),t.nodes.push(r),o=r.wrapper,m){for(h=n;h<y;h++)if(s=c.rows[i].cells[h],o.margin.left<s.bounds.right-c.bounds.x){r.parentId=s.children[0].id,h>n?o.margin.left=o.margin.left-(s.bounds.left-c.bounds.left):s.children[0].children[1].actualSize.width+p>=o.margin.left&&(o.margin.left=s.children[0].children[1].actualSize.width+p),o.margin.left<p&&(o.margin.left=p),o.margin.top<p&&(o.margin.top=p),dm(o,r,t);break}}else for(var b=i;b<v;b++)if(s=c.rows[b].cells[n],o.margin.top<s.bounds.bottom-f){r.parentId=s.children[0].id,b>i?o.margin.top=o.margin.top-(s.bounds.top-f):s.children[0].children[1].actualSize.height+p>=o.margin.top&&(o.margin.top=s.children[0].children[1].actualSize.height+p),o.margin.left<p&&(o.margin.left=p),o.margin.top<p&&(o.margin.top=p),dm(o,r,t);break}m?i++:n++}c.measure(new Wd(e.width,e.height)),c.arrange(c.desiredSize),function(t,e){var i,n,r,o,s,a,l=t.columnDefinitions(),h=t.rowDefinitions(),c=vm(e);"Vertical"===e.shape.orientation&&0===c&&(c=e.shape.header&&e.shape.hasHeader?1:0);var d=e.shape.padding;for(i=0;i<l.length;i++)t.updateColumnWidth(i,l[i].width,!0,d);for(i=c;i<h.length;i++)t.updateRowHeight(i,h[i].height,!0,d);for(n=0;n<h.length;n++)for(a=t.rows[n],i=0;i<l.length;i++)if((o=a.cells[i]).children&&o.children.length>0)for(r=0;r<o.children.length;r++)(s=o.children[r]).maxWidth&&(s.maxWidth=o.actualSize.width),s.maxHeight&&(s.maxHeight=o.actualSize.height)}(c,e),e.width=e.wrapper.width=c.width,e.height=e.wrapper.height=c.height,wm(t,e),e.wrapper.measure(new Wd(e.width,e.height)),e.wrapper.arrange(c.desiredSize),function(t){if("SwimLane"===t.shape.type)for(var e=t.shape.lanes,i=void 0,n=void 0,r=0;r<e.length;r++){i=e[r];for(var o=0;o<i.children.length;o++)(n=i.children[o]).offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY}}(e),um(e,t),pm(e)}function dm(t,e,i){t.measure(new Wd(e.width,e.height)),t.arrange(t.desiredSize);var n=i.getObject(e.parentId);i.addChild(n,e.id)}function pm(t){if("SwimLane"===t.shape.type&&!t.shape.isLane&&!t.shape.isPhase){var e=void 0,i=void 0,n=void 0,r=t.shape.lanes,o=vm(t),s=t.wrapper.children[0].rowDefinitions();for(i=0;i<r.length;i++,o++)e=r[i],"Horizontal"===t.shape.orientation?(n=s[o].height,e.height!==n&&(e.height=n)):(n=t.wrapper.children[0].columnDefinitions()[o].width,e.width!==n&&(e.width=n))}}function um(t,e){var i,n,r,o,s=t.shape,a=s.phases,l=s.header&&s.hasHeader?1:0,h=t.wrapper.children[0],c=h.bounds.y+(s.header&&s.hasHeader?s.header.height:0);if("SwimLane"===t.shape.type&&(t=e.getObject(t.id)||t,a.length>0))if(h=t.wrapper.children[0],"Horizontal"===s.orientation)for(r=s.header&&s.hasHeader?h.rows[1]:h.rows[0],i=0;i<a.length;i++)n=(o=r.cells[i].children[0]).bounds.right-h.bounds.x,a[i].offset!==n&&(a[i].offset=n),e.nameTable[o.id].maxWidth=o.maxWidth;else for(i=0;i<a.length;i++)n=(o=h.rows[l+i].cells[0].children[0]).bounds.bottom-c,a[i].offset!==n&&(a[i].offset=n),e.nameTable[o.id].maxWidth=o.maxWidth}function fm(t,e){if(t&&t.length>0){var i=void 0;e.lineRoutingModule&&e.constraints&xp.LineRouting&&e.lineRoutingModule.renderVirtualRegion(e,!0);for(var n=0;n<t.length;n++)i=e.getObject(t[n]),e.lineRoutingModule&&e.constraints&xp.LineRouting&&"Orthogonal"===i.type?e.lineRoutingModule.refreshConnectorSegments(e,i,!0):e.connectorPropertyChange(i,{},{sourceID:i.sourceID,targetID:i.targetID})}}function gm(t,e,i,n){var r,o,s,a,l,h,c,d,p=t.getObject(e.parentId),u=p.shape,f=p.wrapper.children[0],g=u.lanes,m=am(t,f,e.rowIndex);if("Horizontal"===u.orientation&&e.rowIndex!==i.rowIndex||"Vertical"===u.orientation&&e.columnIndex!==i.columnIndex){if("Horizontal"===u.orientation)a=e.rowIndex,l=i.rowIndex,r=(u.header&&u.hasHeader?1:0)+(u.phases.length&&u.phaseSize?1:0),c=e.rowIndex-r,d=i.rowIndex-r,g[c].canMove&&(c<d?n&&i.wrapper.offsetY>n.y&&(l+=d>0?-1:1,d+=d>0?-1:1):n&&i.wrapper.offsetY<n.y&&(l+=1,d+=1),a!==l&&f.updateRowIndex(a,l));else if(a=e.columnIndex,l=i.columnIndex,r=u.phases.length&&u.phaseSize?1:0,c=e.columnIndex-r,d=i.columnIndex-r,u.header&&u.hasHeader?1:0,g[c].canMove&&(c<d?n&&i.wrapper.offsetX>n.x&&(l+=d>0?-1:1,d+=d>0?-1:1):n&&i.wrapper.offsetX<n.x&&(l+=1,d+=1),a!==l)){if(!(0!==u.phaseSize&&0!==u.phases.length||0!==l&&0!==a)&&u.header&&u.hasHeader){var y=0===l?a:l;f.rows[0].cells[y].children=f.rows[0].cells[0].children,f.rows[0].cells[y].columnSpan=f.rows[0].cells[0].columnSpan,f.rows[0].cells[0].children=[]}f.updateColumnIndex(0,a,l)}a!==l&&(h=g[c]).canMove&&(o={target:gb(i),source:gb(e)},h=g[c],g.splice(c,1),g.splice(d,0,h),s={type:"LanePositionChanged",redoObject:{target:gb(o.source),source:gb(o.target)},undoObject:o,category:"Internal"},t.diagramActions&Ip.UndoRedo||t.commandHandler.addHistoryEntry(s),hm(t,p,0),fm(m,t),function(t,e){for(var i,n,r=0;r<t.length;r++){i=t[r];for(var o=0;o<i.children.length;o++)(n=e.nameTable[i.children[o].id]).offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY}}(g,t),p.wrapper.measure(new Wd(p.width,p.height)),p.wrapper.arrange(p.wrapper.desiredSize),t.updateDiagramObject(p))}t.updateDiagramElementQuad()}function mm(t,e,i,n){var r=t.getObject(i.id),o=r.shape,s=o.header&&o.hasHeader?1:0,a=o.lanes,l=o.phases,h=n.wrapper.actualSize.width,c=n.wrapper.actualSize.height,d=e.wrapper.actualSize.width,p=e.wrapper.actualSize.height;"SwimLane"===r.shape.type&&("Horizontal"===o.orientation?e.isPhase?l[e.columnIndex].offset+=h-d:(s=o.phaseSize&&o.phases.length>0?s+1:s,a[e.rowIndex-s].height+=c-p):e.isPhase?l[e.rowIndex-s].offset+=c-p:(s=o.phaseSize&&o.phases.length>0?1:0,a[e.columnIndex-s].width+=h-d))}function ym(t,e){var i,n=t.shape,r=n.header&&n.hasHeader?1:0;return"Horizontal"===n.orientation?(r+=n.phases.length>0?1:0,i=e.rowIndex-r):i=e.columnIndex-(n.phaseSize&&n.phases.length>0?1:0),i}function vm(t){var e=0,i=t.shape;return"Horizontal"===i.orientation&&(e=i.header&&i.hasHeader?1:0),i.phases.length>0&&i.phaseSize&&(e+=1),e}function bm(t,e,i,n){var r=t.shape;if(r.phases.length>0){var o=e.nameTable[r.phases[n].header.id];o&&o.maxWidth<i.outerBounds.width&&(o.maxWidth=i.outerBounds.width,o.wrapper.maxWidth=i.outerBounds.width)}}function wm(t,e){if(e.shape.header&&e.shape.hasHeader){var i=e.wrapper.children[0].rows[0].cells[0].children[0].id,n=t.nameTable[i];n&&n.isHeader&&n.maxWidth<e.width&&(n.maxWidth=e.width,n.wrapper.maxWidth=e.width)}}function Sm(t,e,i,n){var r,o=t.nameTable[e.id];if("SwimLane"===o.shape.type){t.protectPropertyChange(!0);var s,a,l=o.wrapper.children[0],h=l.bounds,c=o.shape,d=void 0,p=!1,u=void 0,f=void 0,g=void 0,m=void 0,y=void 0,v=void 0,b=void 0,w=void 0,S=void 0;if(g=new Tv(c,"lanes",i,!0),f=c.header&&c.hasHeader?1:0,"Horizontal"===c.orientation&&(p=!0,f=c.phases.length>0?f+1:f),s=am(t,l),f+=a=void 0!==n?n:c.lanes.length,r={element:g,cause:t.diagramActions,state:"Changing",type:"Addition",cancel:!1,laneIndex:a},t.triggerEvent(kp.collectionChange,r),!r.cancel){if(p){var x=new Vg;x.height=i.height,l.addRow(f,x,!1),o.height=void 0!==o.height?o.height+i.height:o.height,o.wrapper.height=l.height=o.height}else{var C=new Fg;C.width=i.width,l.addColumn(a+1,C,!1),o.width&&(o.width+=i.width,o.wrapper.width=l.width=o.width),t.diagramActions&Ip.UndoRedo||(l.rows[0].cells[0].columnSpan+=1)}if(t.diagramActions&Ip.UndoRedo||(g.id+=cb()),void 0!==n?c.lanes.splice(n,0,g):c.lanes.push(g),r={element:g,cause:t.diagramActions,state:"Changed",type:"Addition",cancel:!1,laneIndex:a},t.triggerEvent(kp.collectionChange,r),rm(l,t,o,f,a,p),d="Horizontal"===c.orientation?t.nameTable[l.rows[f].cells[0].children[0].id]:c.header&&c.hasHeader?t.nameTable[l.rows[1].cells[f].children[0].id]:t.nameTable[l.rows[0].cells[f].children[0].id],t.diagramActions&Ip.UndoRedo||(u={type:"LaneCollectionChanged",changeType:"Insert",undoObject:gb(g),redoObject:gb(d),category:"Internal"},t.addHistoryEntry(u)),hm(t,o,"Horizontal"===c.orientation?f:c.header&&c.hasHeader?1:0),lm(o),wm(t,o),(m=i.children)&&m.length>0)for(y=0;y<m.length;y++)if(S={x:(w=m[y]).wrapper.offsetX,y:w.wrapper.offsetY},"Horizontal"===c.orientation)for(l.rows[f].cells[v],v=0;v<l.rows[f].cells.length;v++)xm(t,l.rows[f].cells[v],S,w);else for(b=0;b<l.rows.length;b++)xm(t,l.rows[b].cells[f],S,w);fm(s,t),t.drag(o,h.x-l.bounds.x,h.y-l.bounds.y)}t.protectPropertyChange(!1)}}function xm(t,e,i,n){if(e.children&&e.children.length>0){var r=e.children[0],o=t.nameTable[r.id];r.bounds.containsPoint(i)&&t.addChild(o,n)}}function Cm(t,e,i){if("SwimLane"===e.shape.type){var n,r=void 0,o=void 0,s=void 0,a=void 0,l=void 0,h=void 0,c=void 0,d=e.wrapper.bounds.x,p=e.wrapper.bounds.y,u=e.shape,f=u.padding,g=u.phases,m=void 0,y=e.wrapper.children[0],v="Horizontal"===u.orientation;if(r=u.header&&u.hasHeader?0:-1,u.phases.length>0&&(r+=1,0),n=v?u.lanes[0].header.width:u.lanes[0].header.height,i.offset>n){for(c=0;c<g.length;c++)if(s=g[c],a=c>0?g[c-1]:s,s.offset>i.offset){if(m=c>0?i.offset-a.offset:i.offset,v){var b=y.columnDefinitions()[c];b.width-=m,(l=t.nameTable[u.phases[c].header.id]).maxWidth=l.wrapper.maxWidth=b.width,y.updateColumnWidth(c,b.width,!1);var w=new Fg;w.width=m,h=c,y.addColumn(c,w,!1);break}var S=y.rowDefinitions()[c+r];S.height-=m,l=t.nameTable[u.phases[c].header.id],y.updateRowHeight(c+r,S.height,!1);var x=new Vg;x.height=m,h=c,y.addRow(c+r,x,!1);break}if(t.diagramActions&Ip.UndoRedo&&void 0===h)(A=t.historyManager.currentEntry.next).isLastPhase&&function(t,e,i,n,r,o){var s=e.shape.phases[t-2],a=i.previousPhase.offset;if(r){var l=n.columnDefinitions()[t-1],h=new Fg;t>1?(h.width=l.width-(a-s.offset),l.width=a-s.offset):(h.width=l.width-a,l.width=a),n.updateColumnWidth(t-1,l.width,!1),n.addColumn(t,h,!1)}else{var l=n.rowDefinitions()[t],c=new Vg;t>1?(c.height=i.undoObject.offset-a,l.height=a-s.offset):(c.height=l.height-a,l.height=a),n.updateRowHeight(t,l.height,!1),n.addRow(1+t,c,!1)}}(h=g.length,e,A,y,v);var C=new Av(e.shape,"phases",i,!0);if(t.diagramActions&Ip.UndoRedo||(C.id+=cb()),u.phases.splice(h,0,C),nm(y,t,e,r,v,h),v){if(o=t.nameTable[y.rows[r].cells[h].children[0].id],0===h&&u.header&&u.hasHeader){y.rows[0].cells[0].children=y.rows[0].cells[1].children,y.rows[0].cells[1].children=[];for(var P=y.rows[0],O=0;O<P.cells.length;O++)P.cells[O].minWidth=void 0,P.cells[O].columnSpan=0===O?y.rows[0].cells.length:1}!function(t,e,i,n,r){var o,s,a,l,h,c=e.shape,d=vm(e);c.header&&c.hasHeader&&(i.rows[0].cells[0].columnSpan=i.rows[0].cells.length);for(s=d;s<i.rows.length;s++)h=i.rows[s],a=h.cells[n-1],l=h.cells[n],o=h.cells[n+1],Pm(t,e,a,l,o,s,n);hm(t,e,1)}(t,e,y,h);var E=y.columnDefinitions();if(y.updateColumnWidth(h,E[h].width,!0,f),o.maxWidth=o.wrapper.maxWidth=E[h].width,E.length>h+1){var L=t.nameTable[y.rows[r].cells[h+1].children[0].id];y.updateColumnWidth(h+1,E[h+1].width,!0,f),L.maxWidth=L.wrapper.maxWidth=E[h+1].width}e.width=e.wrapper.width=e.wrapper.children[0].width=y.width}else{o=t.nameTable[y.rows[r+h].cells[0].children[0].id];var I=y.rowDefinitions(),T=I[r+h].height;!function(t,e,i,n,r){for(var o,s,a,l=i.rows[n],h=i.rows[n+1],c=i.rows[n-1],d=1;d<l.cells.length;d++)s=l.cells[d],a=h?h.cells[d]:void 0,o=c.cells[d],Pm(t,e,o,s,a,n,d);hm(t,e,1)}(t,e,y,r+h),y.updateRowHeight(r+h,T,!0,f),I.length>r+h+1&&(T=I[r+h+1].height,y.updateRowHeight(r+h+1,T,!0,f)),e.height=e.wrapper.height=e.wrapper.children[0].height=y.actualSize.height}if(lm(e),e.width=e.wrapper.actualSize.width,wm(t,e),t.drag(e,d-e.wrapper.bounds.x,p-e.wrapper.bounds.y),um(e,t),!(t.diagramActions&Ip.UndoRedo)){var A={type:"PhaseCollectionChanged",changeType:"Insert",undoObject:gb(C),redoObject:gb(o),category:"Internal"};t.addHistoryEntry(A)}t.updateDiagramObject(e)}}}function Pm(t,e,i,n,r,o,s){var a,l,h,c,d,p=e.shape,u="Horizontal"===p.orientation,f=e.wrapper.children[0],g=n.desiredCellWidth,m=n.desiredCellHeight,y=u?o:s;if(i?(a=u?i.bounds.x+i.bounds.width:i.bounds.x,l=u?i.bounds.y:i.bounds.y+i.bounds.height):(a=f.bounds.x,l=r.bounds.y),h=new np(a,l,g,m),(c=im(t,0,e,{id:e.id+(u?p.lanes[y-2]:p.lanes[y-1]).id+cb()[0],rowIndex:o,columnIndex:s,width:n.minWidth,height:n.minHeight,style:(u?p.lanes[y-2]:p.lanes[y-1]).style,constraints:bp.Default|bp.AllowDrop,container:{type:"Canvas",orientation:u?"Horizontal":"Vertical"}},!1,!1,!0)).children[0].isCalculateDesiredSize=!1,f.addObject(c,o,s),r&&r.children&&r.children.length)for(d=0;d<r.children.length;d++)u?t.nameTable[r.children[d].id].columnIndex+=1:t.nameTable[r.children[d].id].rowIndex+=1;!function(t,e,i,n,r,o,s){var a,l,h,c=t.nameTable[r.id],d=e||s,p=t.nameTable[c.parentId].shape.padding;if(d.children&&d.children[0].children.length>1)for(var u=1;u<d.children[0].children.length;u++)a=d.children[0].children[u],h=t.nameTable[a.id],l=o?{x:a.bounds.x,y:a.bounds.center.y}:{x:a.bounds.center.x,y:a.bounds.top},n.containsPoint(l)?(i.children[0].children.push(a),d.children[0].children.splice(u,1),u--,t.deleteChild(h),h.isLane||(h.parentId=r.id),c.children||(c.children=[]),e||(o?h.margin.left=h.wrapper.bounds.x-d.children[0].bounds.right:h.margin.top=h.wrapper.bounds.y-d.children[0].bounds.bottom),c.children.push(a.id),h.zIndex=c.zIndex+1,t.removeElements(h)):e&&(o?(h.margin.left-=i.desiredCellWidth,p>h.margin.left&&(h.margin.left=p)):(h.margin.top-=i.desiredCellHeight,p>h.margin.top&&(h.margin.top=p)))}(t,r,n,h,c,u,i)}function Om(t,e,i){if("SwimLane"===e.shape.type&&("ResizeSouth"===i||"ResizeEast"===i)){var n=e.shape,r=e.wrapper.children[0],o=void 0,s=void 0;"ResizeSouth"===i?"Vertical"===n.orientation?o=r.rows[r.rows.length-1].cells[0]:(s=r.rows.length-1,o=r.rows[s].cells[r.rows[s].cells.length-1]):(s=n.header&&n.hasHeader?1:0,o=r.rows[s].cells[r.rows[s].cells.length-1]),t.commandHandler.select(t.nameTable[o.children[0].id])}}function Em(t,e,i,n,r,o){var s,a,l,h,c,d,p,u,f=cb(),g=t.shape,m=g.phases,y=t.offsetX-t.wrapper.actualSize.width/2,v=t.offsetY-t.wrapper.actualSize.height/2;if("Vertical"===g.orientation&&(v+=g.header&&g.hasHeader?g.header.height:0),!o)for(r||(t.id+=f,g&&g.header&&g.hasHeader?g.header.id+=f:g.header=void 0),s=0;m&&s<m.length;s++)m[s].id+=f;for(u=r?[i.childTable[n.id]]:g.lanes,s=0;u&&s<u.length;s++)for(l=u[s],o||(l.id+=f),a=0;l.children&&a<l.children.length;a++)d=(h=l.children[a]).wrapper.offsetX-h.width/2,p=h.wrapper.offsetY-h.height/2,h.zIndex=-1,h.inEdges=h.outEdges=[],(o||i&&(1===i.pasteIndex||0===i.pasteIndex))&&("Vertical"===g.orientation?h.margin.top=p-v:h.margin.left=d-y),o||(h.id+=f);if(!o){if(r)c={shape:{lanes:u,phases:m,phaseSize:g.phaseSize,type:"SwimLane",orientation:g.orientation,header:{annotation:{content:"Title"},height:50}}},"Horizontal"===g.orientation?(c.width=t.wrapper.actualSize.width,c.height=n.wrapper.actualSize.height+g.header.height+g.phaseSize,c.offsetX=t.wrapper.offsetX+10*i.pasteIndex,c.offsetY=n.wrapper.offsetY+10*i.pasteIndex):(c.width=n.wrapper.actualSize.width,c.height=t.wrapper.actualSize.height,c.offsetX=n.wrapper.offsetX+10*i.pasteIndex,c.offsetY=t.wrapper.offsetY+10*i.pasteIndex),t=c;if(0!==i.pasteIndex&&(t.offsetX+=10,t.offsetY+=10),t.zIndex=-1,t=e.add(t),!r)for(var b=0,w=Object.keys(i.childTable);b<w.length;b++){var S=w[b],x=i.childTable[S];x.id+=f,x.sourceID+=f,x.targetID+=f,x.zIndex=-1,e.add(x)}"SVG"!==e.mode&&e.refreshDiagramLayer(),e.select([t])}return t}function Lm(t,e,i,n){var r,o=e.nodes[0];if(n||Yg(t,o,!0)){var s,a,l=void 0,h=void 0,c=void 0,d=new Yp;i&&(c=t.nameTable[i].parentId,l=o=t.nameTable[i]),s=i?l.wrapper:o.wrapper,(a=t.nameTable[c||o.parentId])&&"Grid"===a.container.type&&((r=new tu).children=[],!n&&o.isHeader||("Horizontal"===a.container.orientation&&o.isPhase||"Vertical"===a.container.orientation&&(o.rowIndex>0&&o.columnIndex>0||o.isLane)?(h=function(t,e,i){for(var n=new np,r="SwimLane"===t.shape.type?t.wrapper.children[0].rows:t.wrapper.rows,o=i?1:0;o<r.length;o++)n.uniteRect(r[o].cells[e].bounds);return n}(a,l?l.columnIndex:o.columnIndex,!(!a.shape.header||!a.shape.hasHeader)),r.offsetX=h.center.x,r.offsetY=h.center.y,d.width=h.width,d.height=h.height):(r.offsetX=a.offsetX,r.offsetY=s.offsetY,d.width=a.wrapper.actualSize.width,d.height=s.actualSize.height)),r.children.push(d),r.measure(new Wd),r.arrange(r.desiredSize))}return r}function Im(t,e,i,n,r){r=void 0!==r?r:ym(e,i);for(var o=!1,s=e.shape.lanes[r],a=s.children.length-1;a>=0;a--)n?n.id===s.children[a].id&&s.children.splice(a,1):(t.removeDependentConnector(s.children[a]),t.diagramActions&Ip.UndoRedo||(t.diagramActions=t.diagramActions|Ip.UndoRedo,o=!0),t.remove(s.children[a]),s.children.splice(a,1),o&&(t.diagramActions=t.diagramActions&~Ip.UndoRedo))}function Tm(t){return t.children[0]}function Am(t,e){t.nodes.splice(t.nodes.indexOf(e),1),t.removeFromAQuad(e),t.removeObjectsFromLayer(e),delete t.nameTable[e.id],t.removeElements(e)}function Bm(t,e,i,n){var r;if("SwimLane"===i.shape.type){var o=i.shape,s=void 0;if(1===o.lanes.length)t.remove(i);else{var a=i.wrapper.bounds.x,l=i.wrapper.bounds.y,h=void 0,c=void 0,d=void 0,p=void 0,u=i.wrapper.children[0];if(s=n?o.lanes.indexOf(n):ym(i,e),r={element:e,cause:t.diagramActions,state:"Changing",type:"Removal",cancel:!1,laneIndex:s},t.triggerEvent(kp.collectionChange,r),!r.cancel){var f=gb(o.lanes[s]);if(Im(t,i,e,void 0,s),!(t.diagramActions&Ip.UndoRedo)){var g={type:"LaneCollectionChanged",changeType:"Remove",undoObject:f,redoObject:gb(e),category:"Internal"};t.addHistoryEntry(g)}o.lanes.splice(s,1);var m=e?"Horizontal"===o.orientation?e.rowIndex:e.columnIndex:vm(i)+s;if("Horizontal"===o.orientation){for(h=u.rows[m],c=0;c<h.cells.length;c++)if((d=h.cells[c])&&d.children.length>0)for(p=0;p<d.children.length;p++)km(t,d.children[p]);u.removeRow(m)}else{for(i.width=void 0!==i.width?i.width-u.rows[0].cells[m].actualSize.width:i.width,c=0;c<u.rows.length;c++)if((d=u.rows[c].cells[m])&&d.children.length>0)for(p=0;p<d.children.length;p++)km(t,d.children[p]);u.removeColumn(m)}r={element:e,cause:t.diagramActions,state:"Changed",type:"Removal",cancel:!1,laneIndex:s},t.triggerEvent(kp.collectionChange,r),i.width=i.wrapper.width=u.width,i.height=i.wrapper.height=u.height,lm(i),"Vertical"===i.shape.orientation&&(m=0),hm(t,i,m),t.drag(i,a-i.wrapper.bounds.x,l-i.wrapper.bounds.y),t.updateDiagramObject(i)}}}}function km(t,e){var i,n;if(e instanceof tu){if(e.children.length>0)for(i=0;i<e.children.length;i++)e.children[i]instanceof tu&&km(t,e.children[i]);n=t.getObject(e.id),Am(t,n)}}function Mm(t,e,i,n){t.protectPropertyChange(!0);i.wrapper.bounds.x,i.wrapper.bounds.y;var r,o=!1,s=i.shape,a=i.wrapper.children[0],l=n?s.phases.indexOf(n):function(t,e){var i=e.shape,n=i.header&&i.hasHeader?1:0;return"Horizontal"===i.orientation?t.columnIndex:t.rowIndex-n}(e,i),h=s.phases.length;if(s.phases.length>1){l===h-1&&(o=!0,r=gb(s.phases[l-1]));var c=gb(s.phases[l]);if(s.phases.splice(l,1),!(t.diagramActions&Ip.UndoRedo)){var d={type:"PhaseCollectionChanged",changeType:"Remove",undoObject:c,previousPhase:r,redoObject:gb(e),category:"Internal",isLastPhase:o};t.addHistoryEntry(d)}"Horizontal"===s.orientation?function(t,e,i,n){var r,o,s,a,l,h,c,d,p,u,f,g;for(n=void 0!==n?n:i.columnIndex,c=0;c<e.rows.length;c++)if((r=e.rows[c]).cells.length>1&&(o=r.cells[n],s=r.cells.length-1===n?r.cells[n-1]:r.cells[n+1],l=s.children[0],o.children.length>0))if(a=o.children[0],f=t.nameTable[a.id],0===s.children.length&&o.children.length>0)s.children=o.children,s.columnSpan=o.columnSpan-1;else{for(d=0;d<a.children.length;d++){if((u=a.children[d])instanceof tu){if((g=t.nameTable[u.id]).isLane||(g.parentId=l.id),r.cells.length-1===n&&(g.margin.left=g.wrapper.bounds.x-l.bounds.x,u.margin.left=g.wrapper.bounds.x-l.bounds.x),l.children.push(u),t.nameTable[l.id]){var m=t.nameTable[l.id];m.children||(m.children=[]),m.children.push(u.id)}a.children.splice(d,1),d--,f&&f.children&&-1!==f.children.indexOf(g.id)&&f.children.splice(f.children.indexOf(g.id),1)}if(r.cells.length-1!==n)for(p=0;p<l.children.length;p++){var y=l.children[p];if(y instanceof tu){var v=t.nameTable[y.id];v.margin.left=v.wrapper.bounds.x-a.bounds.x,y.margin.left=v.wrapper.bounds.x-a.bounds.x}}}if(f&&f.isPhase){var b=t.nameTable[l.id];b&&(l.maxWidth=b.wrapper.maxWidth=b.wrapper.maxWidth+=f.wrapper.maxWidth)}Am(t,f)}var w=e.columnDefinitions()[n].width;e.removeColumn(n),n<e.columnDefinitions().length?(h=e.columnDefinitions()[n].width,h+=w,e.updateColumnWidth(n,h,!0)):(h=e.columnDefinitions()[n-1].width,h+=w,e.updateColumnWidth(n-1,h,!0))}(t,a,e,l):function(t,e,i,n,r){var o,s,a,l,h,c,d,p,u,f,g,m=r.shape,y=void 0!==n?m.header?n+1:n:i.rowIndex;o=e.rows[y];var v=r.wrapper.bounds.y,b=m.phases.length;void 0!==m.header&&m.hasHeader&&(v+=e.rowDefinitions()[0].height);for(a=n===b?e.rows[y-1]:e.rows[y+1],h=0;h<o.cells.length;h++)if(s=o.cells[h],p=a.cells[h],u=p.children[0],s.children.length>0){var w=s.children[0],S=t.nameTable[w.id];if(n<b)for(d=0;d<u.children.length;d++)(f=u.children[d])instanceof tu&&((g=t.nameTable[f.id]).margin.top=g.wrapper.bounds.y-(0===n?v:w.bounds.y),f.margin.top=g.wrapper.bounds.y-(0===n?v:w.bounds.y));for(c=0;c<w.children.length;c++)(f=w.children[c])instanceof tu&&((g=t.nameTable[f.id]).parentId=u.id,n===b&&(g.margin.top=g.wrapper.bounds.y-(0===n?v:u.bounds.y),f.margin.top=g.wrapper.bounds.y-(0===n?v:u.bounds.y)),u.children.push(f),w.children.splice(c,1),c--,S.children&&-1!==S.children.indexOf(g.id)&&S.children.splice(S.children.indexOf(g.id),1));Am(t,S)}var x=e.rowDefinitions()[y].height;e.removeRow(y),y<e.rowDefinitions().length?(l=e.rowDefinitions()[y].height,l+=x,e.updateRowHeight(y,l,!0)):(l=e.rowDefinitions()[y-1].height,l+=x,e.updateRowHeight(y-1,l,!0))}(t,a,e,l,i),wm(t,i),hm(t,i,1),um(i,t),t.protectPropertyChange(!1),t.updateDiagramObject(i)}}function Dm(t,e){var i;if(t.isLane){var n=e.getObject(t.parentId);if(n&&"SwimLane"===n.shape.type&&t.isLane){var r=ym(n,t);i=n.shape.lanes[r]}}return i}function Rm(t,e){if(t.isLane&&Dm(t,e).canMove)return!0;return!1}function zm(t,e){for(var i=0;i<t.length;i++)if(t[i].id===e)return!0;return!1}function jm(t,e){e instanceof Lv&&(t.shape.header||(e.shape.hasHeader=!1))}function Nm(t,e,i,n){return n=e?n:void 0!==t[i-1]?t[i-1]+n:0}function Hm(t,e){var i=[];if(e)i=t;else{for(var n=0;n<t.length;n++)i.push(t[n]);i.push(t[i.length-2]),i.push(t[i.length-2])}return i}function _m(t,e){if(e instanceof Lv)switch($()?t.shape.umlActivityShape:t.shape.shape){case"JoinNode":t.width||(e.width=20),t.height||(e.height=90),t.style&&t.style.fill||(e.style.fill="black");break;case"ForkNode":t.width||(e.width=90),t.height||(e.height=20),t.style&&t.style.fill||(e.style.fill="black");break;case"InitialNode":case"FinalNode":t.style&&t.style.fill||(e.style.fill="black")}else switch($()?t.shape.umlActivityFlow:t.shape.flow){case"Object":t.style&&t.style.strokeDashArray||(e.style.strokeDashArray="8 4"),t.style&&t.style.strokeWidth||(e.style.strokeWidth=2),t.targetDecorator&&t.targetDecorator.shape||(e.targetDecorator.shape="OpenArrow");break;case"Control":t.style&&t.style.strokeWidth||(e.style.strokeWidth=2),t.targetDecorator&&t.targetDecorator.shape||(e.targetDecorator.shape="OpenArrow"),t.sourceDecorator&&t.sourceDecorator.shape||(e.sourceDecorator.shape="None")}}function Vm(t,e){switch(t.shape.type){case"Bpmn":switch($()?t.shape.bpmnFlow:t.shape.flow){case"Sequence":("Normal"===t.shape.sequence&&"Bezier"!==t.type||"Default"===t.shape.sequence||"Conditional"===t.shape.sequence)&&(e.targetDecorator&&e.targetDecorator.style&&(e.targetDecorator.style.fill=t.targetDecorator&&t.targetDecorator.style&&t.targetDecorator.style.fill||"black"),"Conditional"===t.shape.sequence&&e.sourceDecorator&&(e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),e.sourceDecorator.width=t.sourceDecorator&&t.sourceDecorator.width||20,e.sourceDecorator.height=t.sourceDecorator&&t.sourceDecorator.width||10));break;case"Association":"Default"!==t.shape.association&&"Directional"!==t.shape.association&&"BiDirectional"!==t.shape.association||(e.targetDecorator&&e.targetDecorator.style&&(e.targetDecorator.style.fill=t.targetDecorator&&t.targetDecorator.style&&t.targetDecorator.style.fill||"black"),"BiDirectional"===t.shape.association&&e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white",e.sourceDecorator.width=t.sourceDecorator&&t.sourceDecorator.width||5,e.sourceDecorator.height=t.sourceDecorator&&t.sourceDecorator.height||10));break;case"Message":e.style&&!e.style.strokeDashArray&&(e.style.strokeDashArray=t.style&&t.style.strokeDashArray||"4 4")}break;case"UmlActivity":switch($()?t.shape.umlActivityFlow:t.shape.flow){case"Exception":"Directional"!==t.shape.association&&"BiDirectional"!==t.shape.association||(e.style.strokeDashArray=t.style&&t.style.strokeDashArray||"2 2")}break;case"UmlClassifier":var i=!1;"Association"===t.shape.relationship?i=!0:"Inheritance"===t.shape.relationship?(e.targetDecorator&&e.targetDecorator.style&&(e.targetDecorator.style.fill=t.targetDecorator&&t.targetDecorator.style&&t.targetDecorator.style.fill||"white"),e.style&&(i=!0,e.style.strokeDashArray=t.style&&t.style.strokeDashArray||"4 4")):"Composition"===t.shape.relationship?(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"black"),i=!0):"Aggregation"===t.shape.relationship||void 0===t.shape.relationship?(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),i=!0):"Dependency"===t.shape.relationship?(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),i=!0,e.style.strokeDashArray="4 4"):"Realization"===t.shape.relationship&&(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),i=!0),i&&(e.style.strokeWidth=t.style&&t.style.strokeWidth||2)}}function Fm(t,e,i){var n;n=qd.findLength(e,t)>qd.findLength(i,t)?i:e;var r=qd.findAngle(e,i),o=qd.findAngle(n,t),s=qd.findLength(n,t),a=o+2*(r-o);return{x:n.x+s*Math.cos(a*Math.PI/180),y:n.y+s*Math.sin(a*Math.PI/180)}}function Wm(t,e,i){if(t&&t.children&&t.children.length>0)for(var n=void 0,r=0;r<t.children.length;r++)return(n=i[t.children[r]]).shape.type===e||Wm(n,e,i);return!1}function Um(t,e,i,n,r){if(i&&(t instanceof Gf||t&&(t.shape&&"SwimLane"!==t.shape.type||void 0===t.shape)))for(var o=void 0,s=0,a=Object.keys(i);s<a.length;s++){var l=a[s];if(o=i[l],"shape"===l&&o.type&&(t.shape={type:o.type}),o)if(Array.isArray(o)&&o.length&&o.length>0&&"annotations"!==r&&"ports"!==r)if(t[l].length>0)for(var h=0;h<=t[l].length;h++)Um(t[l],e?e[l]:void 0,i[l],"annotations"===l||"ports"===l?t:void 0,l);else Um(t[l],e?e[l]:void 0,i[l],"annotations"===l||"ports"===l?t:void 0,l);else if(o instanceof Object&&e&&"annotations"!==r&&"ports"!==r)Um(t[l],e[l],i[l]);else if("annotations"!==r&&"ports"!==r&&e&&!e[l]||!e&&t&&(t[l]||void 0!==t[l]))t[l]=i[l];else{var c=void 0;"annotations"!==r&&"ports"!==r||("annotations"===r?(t[l]&&Um(t[l],e[l],i[l]),t[l]||(Iy(n)===Gf?(c=new vu(n,"annotations",i[l]),n.annotations.push(c)):(c=new yu(n,"annotations",i[l]),n.annotations.push(c)))):t[l]?Um(t[l],e[l],i[l]):(c=new pu(n,"ports",i[l]),n.ports.push(c)))}}}function Gm(t,e){var i;i="Bezier"===t.type?function(t){var e=[];if("Bezier"===t.type)for(var i=0,n=0;n<t.segments.length;n++)for(var r=t.segments[n],o=qd.isEmptyPoint(r.point1)?r.bezierPoint1:r.point1,s=qd.isEmptyPoint(r.point2)?r.bezierPoint2:r.point2,a=Number((t.distance(o,r.points[0])+t.distance(s,o)+t.distance(r.points[1],s))/1.5),l=0;l<a-1;l+=10)e[i]=_f(0,r.points[0],qd.isEmptyPoint(r.point1)?r.bezierPoint1:r.point1,qd.isEmptyPoint(r.point2)?r.bezierPoint2:r.point2,r.points[1],l,a),i++;return e}(t):t.intermediatePoints;for(var n=0;n<i.length-1;n++){var r=i[n],o=i[n+1],s=np.toBounds([r,o]);if(s.Inflate(t.hitPadding),s.containsPoint(e)){var a=Fm(e,r,o),l=qm({x1:r.x,x2:o.x,y1:r.y,y2:o.y},{x1:e.x,x2:a.x,y1:e.y,y2:a.y});if(l.enabled){var h=qd.findLength(e,l.intersectPt);if(Math.abs(h)<t.hitPadding)return!0}else{var c=np.toBounds([e,e]);if(c.Inflate(3),c.containsPoint(r)||c.containsPoint(o))return!0}if(qd.equals(e,a))return!0}}if(t.annotations.length>0){var d=t.wrapper.children;for(n=3;n<d.length;n++){if(d[n].bounds.containsPoint(e))return!0}}return!1}function qm(t,e){var i={x:0,y:0},n=t,r=e,o=(r.y2-r.y1)*(n.x2-n.x1)-(r.x2-r.x1)*(n.y2-n.y1),s=(r.x2-r.x1)*(n.y1-r.y1)-(r.y2-r.y1)*(n.x1-r.x1),a=(n.x2-n.x1)*(n.y1-r.y1)-(n.y2-n.y1)*(n.x1-r.x1);if(0===o)return{enabled:!1,intersectPt:i};var l=s/o,h=a/o;return l>=0&&l<=1&&h>=0&&h<=1?(i.x=n.x1+l*(n.x2-n.x1),i.y=n.y1+l*(n.y2-n.y1),{enabled:!0,intersectPt:i}):{enabled:!1,intersectPt:i}}function Xm(t,e,i,n){var r=qm(Ym(t.x,t.y,e.x,e.y),Ym(i.x,i.y,n.x,n.y));return r.enabled?r.intersectPt:{x:0,y:0}}function Ym(t,e,i,n){return{x1:Number(t)||0,y1:Number(e)||0,x2:Number(i)||0,y2:Number(n)||0}}function Zm(t,e,i){var n=[];i=i||0;var r={x:e.topLeft.x-i,y:e.topLeft.y},o={x:e.topRight.x+i,y:e.topRight.y},s={x:e.bottomRight.x,y:e.bottomRight.y-i},a={x:e.bottomLeft.x,y:e.bottomLeft.y+i};return n.push(r),n.push(o),n.push(s),n.push(a),n}function Km(t,e,i){var n,r=i instanceof Lv?i.constraints&bp.InheritTooltip:i.constraints&yp.InheritTooltip,o=i instanceof Lv?i.constraints&bp.Tooltip:i.constraints&yp.Tooltip;n=function(t,e,i,n){var r={},o=(i.scroller.transform.scale,document.getElementById(i.element.id)),s=t.wrapper.bounds,a=o.getBoundingClientRect();i.scroller.horizontalOffset,i.scroller.verticalOffset;switch(i.tooltipObject.position){case"BottomCenter":r=Jm(e,s.bottomCenter,i,n,a.width/2,a.height);break;case"BottomLeft":case"LeftBottom":r=Jm(e,s.bottomLeft,i,n,0,a.height);break;case"BottomRight":case"RightBottom":r=Jm(e,s.bottomRight,i,n,a.width,a.height);break;case"LeftCenter":r=Jm(e,s.middleLeft,i,n,0,a.height/2);break;case"LeftTop":case"TopLeft":r=Jm(e,s.topLeft,i,n,0,0);break;case"RightCenter":r=Jm(e,s.middleRight,i,n,a.width,a.height/2);break;case"RightTop":case"TopRight":r=Jm(e,s.topRight,i,n,a.width,0);break;case"TopCenter":r=Jm(e,s.topCenter,i,n,a.width/2,0)}return r}(i,e,t,"Mouse"===(!r&&o?i.tooltip.relativeMode:t.tooltip.relativeMode));var s=Qf(t);return{x:n.x+s.width,y:n.y+s.height}}function Jm(t,e,i,n,r,o){var s={},a=i.scroller.transform.scale,l=i.scroller.horizontalOffset,h=i.scroller.verticalOffset;return s.x=(n?t.x:e.x)*a+l-r,s.y=(n?t.y:e.y)*a+h-o,s}function Qm(t,e,i){var n,r,o;r=$m(t,e,i),n=qd.findAngle(t[r.index],t[r.index+1]);var s=function(t){var e=void 0===t.content?10:0,i=0;switch(t.alignment){case"Center":i=0;break;case"Before":i=-(0+e);break;case"After":i=0+e}return i}(e);return o=qd.transform(r.point,n+45,s),r.point=o,r.angle=n,r}function $m(t,e,i){for(var n,r,o,s,a,l=0,h=e.offset,c=[],d=0;d<t.length-1;d++)l+=qd.distancePoints(t[d],t[d+1]),c.push(l);o=h*l;for(var p=0;p<c.length;p++){if(c[p]>=o)return r=qd.findAngle(t[p],t[p+1]),{point:n=qd.transform(t[p],r,o-(s||0)),index:a=p};s=c[p]}return{point:n,index:a}}function ty(t,e){if(t instanceof Lv&&t.children)for(var i=0;i<t.children.length;i++)e.nameTable[t.children[i]].children&&ty(t,e),e.removeFromAQuad(e.nameTable[t.children[i]]),e.removeObjectsFromLayer(e.nameTable[t.children[i]]),delete e.nameTable[t.children[i]]}function ey(t,e){if(t&&t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++){var n=t.children[i];n instanceof tu&&ey(n,e)}return-1===e.indexOf(t.id)&&e.push(t.id),e}function iy(t){var e=function(t){for(var e,i,n=[],r=0;r<t.length;r++)if("SwimLane"===(e=t[r]).shape.type){i=e.wrapper.children[0].childTable;for(var o=0,s=Object.keys(i);o<s.length;o++)n=ey(i[s[o]],n)}return n}(t.nodes),i=gb(t,t.getCustomProperty);return i.selectedItems.nodes=[],i.selectedItems.connectors=[],i.selectedItems.wrapper=null,t.serializationSettings.preventDefaults&&(i=ny(i,t)),function(t,e){var i=e.nodes;if(i)for(var n=0;n<i.length;n++)-1!==t.indexOf(i[n].id)&&(i.splice(n,1),n--)}(e,i),JSON.stringify(i)}function ny(t,e,i,n){i=function(t,e){var i,n=[],r=new iS;if(t.getClassName)switch(t.getClassName()){case"Diagram":i=new iS;break;case"Node":i=new Lv(r,"",n);break;case"Path":i=new tv(r,"",n);break;case"Native":i=new ev(r,"",n);break;case"Html":i=new iv(r,"",n);break;case"Image":i=new nv(r,"",n);break;case"Text":i=new rv(r,"",n);break;case"BasicShape":i=new ov(r,"",n);break;case"FlowShape":i=new sv(r,"",n);break;case"BpmnShape":i=new mv(r,"",n);break;case"UmlActivityShape":i=new yv(r,"",n);break;case"UmlClassifierShape":i=new Ov(r,"",n);break;case"SwimLane":i=new Bv(r,"",n),t.header&&(i.header=new Iv(r,"",n),i.header.style.fill="");break;case"ShapeAnnotation":i=new yu(r,"",n);break;case"PointPort":i=new pu(r,"",n);break;case"BpmnGateway":i=new av(r,"",n);break;case"BpmnDataObject":i=new lv(r,"",n);break;case"BpmnEvent":i=new cv(r,"",n);break;case"BpmnSubEvent":i=new dv(r,"",n);break;case"BpmnActivity":i=new fv(r,"",n);break;case"BpmnAnnotation":i=new gv(r,"",n);break;case"MethodArguments":i=new vv(r,"",n);break;case"UmlClassAttribute":i=new bv(r,"",n);break;case"UmlClassMethod":i=new wv(r,"",n);break;case"UmlClass":i=new Sv(r,"",n);break;case"UmlInterface":i=new xv(r,"",n);break;case"UmlEnumerationMember":i=new Cv(r,"",n);break;case"UmlEnumeration":i=new Pv(r,"",n);break;case"Lane":i=new Tv(r,"",n);break;case"Phase":i=new Av(r,"",n);break;case"ChildContainer":i=new kv;break;case"Connector":i=new Gf(r,"",n);break;case"StraightSegment":i=new kf(r,"",n);break;case"BezierSegment":i=new Mf(r,"",n);break;case"OrthogonalSegment":i=new Df(r,"",n);break;case"PathAnnotation":i=new vu(r,"",n);break;case"Stop":i=new _p(r,"",n);break;case"Point":i=e||new qd(r,"",n);break;case"UserHandle":i=new Ag(r,"",n);break;case"Command":i=new zg(r,"",n)}else i=e;return i}(e,i);for(var r=[],o=0,s=r=r.concat(Object.keys(t));o<s.length;o++){var a=s[o];e instanceof Lv&&(n="shape"===a),t[a]instanceof Array?ry(t,i,e,a):t[a]instanceof Object&&i&&i[a]?"wrapper"!==a&&(t[a]=ny(t[a],e[a],i[a],n)):(i&&t[a]===i[a]||void 0===t[a])&&(n&&"type"===a||e instanceof Bv&&"orientation"===a||delete t[a]),"[]"!==JSON.stringify(t[a])&&"{}"!==JSON.stringify(t[a])&&void 0!==t[a]||delete t[a]}return t}function ry(t,e,i,n){if(0===t[n].length)delete t[n];else if(t[n].every(function(t){return"number"==typeof t})){var r=void 0,o=!0;for(r=0;r<t[n].length;r++)o=!(!o||t[n][r]!==e[n][r]);o&&delete t[n]}else{r=void 0;if("layers"===n&&(t[n].splice(0,1),0===t[n].length&&delete t[n]),t[n])for(r=t[n].length-1;r>=0;r--)"nodes"!==n&&"connectors"!==n||(t[n][r].wrapper=null),"dataManager"!==n&&(t[n][r]=ny(t[n][r],i[n][r],void 0!==e[n]?e[n][r]:void 0),"[]"!==JSON.stringify(t[n][r])&&"{}"!==JSON.stringify(t[n][r])&&void 0!==t[n][r]||t[n].splice(r,1))}}function oy(t,e){e.enableServerDataBinding(!1),e.clear(),e.protectPropertyChange(!0);for(var i=e.dataSourceSettings.doBinding,n=e.setNodeTemplate,r=e.getDescription,o=e.getCustomProperty,s={},a=0,l=e.commandManager.commands;a<l.length;a++){var h=l[a];s[h.name]={execute:h.execute,canExecute:h.canExecute}}var c=e.rulerSettings.horizontalRuler.arrangeTick,d=e.rulerSettings.verticalRuler.arrangeTick,p=e.layout.getLayoutInfo,u=e.layout.getBranch,f=e.getNodeDefaults,g=e.getConnectorDefaults,m=JSON.parse(t);m=function(t){if(t&&(void 0===t.version||t.version<17.1)&&t.nodes)for(var e=t.nodes,i=0,n=e;i<n.length;i++){var r=n[i];if(r&&r.ports&&r.ports.length>0)for(var o=0,s=r.ports;o<s.length;o++){var a=s[o];a&&a.constraints&&a.constraints===Mp.None&&(a.constraints=Mp.Default)}}return t}(m),e.contextMenuSettings=m.contextMenuSettings||{},e.constraints=m.constraints||xp.Default,e.tool=m.tool||Cp.Default,e.bridgeDirection=m.bridgeDirection||"Top",e.pageSettings=m.pageSettings||{},e.drawingObject=m.drawingObject||void 0,e.tooltip=m.tooltip||{},e.addInfo=m.addInfo||void 0,e.getDescription=r,e.scrollSettings=m.scrollSettings||{},e.commandManager=m.commandManager||{},e.layers=m.layers||[],e.rulerSettings.horizontalRuler.arrangeTick=c,e.rulerSettings.verticalRuler.arrangeTick=d;for(var y=0,v=e.commandManager.commands;y<v.length;y++){var b=v[y];s[b.name]&&(b.execute=s[b.name].execute,b.canExecute=s[b.name].canExecute)}if(e.backgroundColor=m.backgroundColor||"transparent",e.basicElements=m.basicElements||[],e.connectors=m.connectors||[],e.dataSourceSettings=m.dataSourceSettings||{},e.dataSourceSettings.doBinding=i,e.height=m.height||"100%",e.setNodeTemplate=n,e.getConnectorDefaults=g,e.getNodeDefaults=f,e.getCustomProperty=o,e.mode=m.mode||"SVG",m.nodes)for(var w=0;w<m.nodes.length;w++)m.nodes[w].shape&&"SwimLane"===m.nodes[w].shape.type&&Em(m.nodes[w],void 0,void 0,void 0,void 0,!0);e.nodes=m.nodes||[],e.rulerSettings=m.rulerSettings||{},e.snapSettings=m.snapSettings||{},e.width=m.width||"100%",e.layout=m.layout||{},e.layout.getLayoutInfo=Lb(p),e.layout.getBranch=Lb(u),e.diagramActions=0,e.isLoading=!0,e.protectPropertyChange(!1);var S;for(w=0;w<e.views.length;w++)(S=e.views[e.views[w]]).refresh(),S instanceof iS&&e.element.classList.add("e-diagram");return m.selectedItems&&(m.selectedItems.nodes=[],m.selectedItems.connectors=[]),e.selectedItems=m.selectedItems,e.enableServerDataBinding(!0),m}function sy(t,e){var i=e.style,n=e;e.canApplyStyle=!0;for(var r=0,o=Object.keys(t);r<o.length;r++){switch(o[r]){case"fill":i.fill=t.fill,i instanceof qp&&(i.fill="transparent");break;case"textOverflow":i.textOverflow=t.textOverflow;break;case"opacity":i.opacity=t.opacity;break;case"strokeColor":i.strokeColor=t.strokeColor;break;case"strokeDashArray":i.strokeDashArray=t.strokeDashArray;break;case"strokeWidth":i.strokeWidth=t.strokeWidth;break;case"bold":i.bold=t.bold;break;case"color":i.color=t.color;break;case"textWrapping":i.textWrapping=t.textWrapping;break;case"fontFamily":i.fontFamily=t.fontFamily;break;case"fontSize":i.fontSize=t.fontSize;break;case"italic":i.italic=t.italic;break;case"textAlign":i.textAlign=t.textAlign;break;case"whiteSpace":i.whiteSpace=t.whiteSpace;break;case"textDecoration":i.textDecoration=t.textDecoration;break;case"gradient":if(i.gradient){ay(t.gradient,i.gradient);break}}}e instanceof Qp&&n.refreshTextElement()}function ay(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"type":e.type=t.type;break;case"x1":e.x1=t.x1;break;case"x2":e.x2=t.x2;break;case"y1":e.y1=t.y1;break;case"y2":e.y2=t.y2;break;case"cx":e.cx=t.cx;break;case"cy":e.cy=t.cy;break;case"fx":e.fx=t.fx;break;case"fy":e.fy=t.fy;break;case"r":e.r=t.r;break;case"stops":e.stops=t.stops}}}function ly(t,e,i){t.width=e.width,t.height=e.height,t.minHeight=e.minHeight,t.maxHeight=e.maxHeight,t.minWidth=e.minWidth,t.maxWidth=e.maxWidth,t.horizontalAlignment=e.wrapper.children[0].horizontalAlignment,t.verticalAlignment=e.wrapper.children[0].verticalAlignment,t.relativeMode=e.wrapper.children[0].relativeMode,t.visible=e.wrapper.children[0].visible,e.shape instanceof rv&&(t.margin=e.shape.margin),t.id=e.wrapper.children[0].id,t.style=e.style;for(var n=0,r=i.views;n<r.length;n++){var o=r[n];ib(e.id+"_groupElement",o),ib(e.id+"_content_groupElement",o),ib(e.id+"_html_element",o)}e.wrapper.children.splice(0,1),e.wrapper.children.splice(0,0,t)}function hy(t,e,i,n){var r=new Yp;switch(t.shape.type){case"Path":var o=new ru;o.data=e.shape.data,ly(r=o,e,n);break;case"Image":var s=new su;s.source=e.shape.source,s.imageAlign=e.shape.align,s.imageScale=e.shape.scale,ly(r=s,e,n);break;case"Text":ly(r=new Qp,e,n);break;case"Basic":var a=void 0;a=($()?"Rectangle"===e.shape.basicShape:"Rectangle"===e.shape.shape)?new Yp:new ru,!$()&&"Polygon"===e.shape.shape||$()&&"Polygon"===e.shape.basicShape?a.data=Yd(e.shape.points):a.data=eu($()?e.shape.basicShape:e.shape.shape),ly(r,e,n),(!$()&&"Rectangle"===e.shape.shape||$()&&"Rectangle"===e.shape.basicShape)&&(a.cornerRadius=e.shape.cornerRadius),r=a;break;case"Flow":var l=new ru,h=$()?e.shape.flowShape:e.shape.shape;l.data=xu(h),ly(r=l,e,n);break;case"Native":var c=new lu(t.id,n.element.id);c.content=e.shape.content,c.scale=e.shape.scale,ly(r=c,e,n);break;case"HTML":var d=new vf(e.id,n.element.id);d.content=e.shape.content,ly(r=d,e,n)}void 0===t.shape.type||t.shape.type===i.shape.type?function(t,e,i){if(Object.keys(t.shape).length>0)if("Path"===e.shape.type&&void 0!==t.shape.data)e.wrapper.children[0].data=t.shape.data;else if("Text"===e.shape.type&&void 0!==t.shape.content)e.wrapper.children[0].content=t.shape.content;else if("Image"===e.shape.type&&void 0!==t.shape.source)e.wrapper.children[0].source=t.shape.source;else if("Native"===e.shape.type){for(var n=void 0,r=0;r<i.views.length;r++)n=Hv(e.wrapper.children[0].id+"_native_element",i.views[r]),void 0!==t.shape.content&&n&&(n.removeChild(n.children[0]),e.wrapper.children[0].content=t.shape.content,n.appendChild(nb(e.wrapper.children[0],!1)));e.wrapper.children[0].scale=t.shape.scale?t.shape.scale:e.wrapper.children[0].scale}else if("HTML"===e.shape.type)for(var o=void 0,r=0;r<i.views.length;r++)(o=Hv(e.wrapper.children[0].id+"_html_element",i.views[r]))&&(o.removeChild(o.children[0]),e.wrapper.children[0].content=t.shape.content,o.appendChild(nb(e.wrapper.children[0],!0)));else if("Flow"===e.shape.type&&($()&&void 0!==t.shape.flowShape||void 0!==t.shape.shape)){e.shape.shape=$()?t.shape.flowShape:t.shape.shape;var s=e.shape.shape,a=xu(s.toString());e.wrapper.children[0].data=a}else if("UmlActivity"===e.shape.type&&($()&&void 0!==t.shape.umlActivityShape||!$()&&void 0!==t.shape.shape))!function(t,e){$()?t.shape.umlActivityShape=e.shape.umlActivityShape:t.shape.shape=e.shape.shape;var i=Bg(($()?t.shape.umlActivityShape:t.shape.shape).toString());$()&&"InitialNode"===t.shape.umlActivityShape||!$()&&"InitialNode"===t.shape.shape?t.wrapper.children[0].style.fill="black":!$()&&("ForkNode"===t.shape.shape||"JoinNode"===t.shape.shape)||$()&&("ForkNode"===t.shape.umlActivityShape||"JoinNode"===t.shape.umlActivityShape)?t.wrapper.children[0].style.fill="black":(!$()&&"FinalNode"===t.shape.shape||$()&&"FinalNode"===t.shape.umlActivityShape)&&(t instanceof Lv&&(t.wrapper=cy(t)),t.wrapper.children[0].data=i)}(e,t);else if(void 0!==t.shape.cornerRadius)e.wrapper.children[0].cornerRadius=t.shape.cornerRadius;else if($()&&void 0!==t.shape.basicShape||void 0!==t.shape.shape){e.shape.shape=$()?t.shape.basicShape:t.shape.shape;var s=e.shape.shape,l=eu(s.toString());e.wrapper.children[0].data=l}e.wrapper.children[0].canMeasurePath=!0}(t,e,n):(r.width=e.wrapper.children[0].width,r.height=e.wrapper.children[0].height,e.shape instanceof rv&&(r.margin=e.shape.margin),r.style=e.style,e.wrapper.children[0]=r)}function cy(t){var e=new tu;e.style.fill="transparent";var i="M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50",n=new ru;n.data=i,n.id=t.id+"_0_finalNode",n.horizontalAlignment="Center",n.verticalAlignment="Center",n.relativeMode="Object",n.style.strokeColor=t.style.strokeColor,n.style.strokeWidth=t.style.strokeWidth;var r=new ru;return r.data=i,r.id=t.id+"_1_finalNode",r.horizontalAlignment="Center",r.verticalAlignment="Center",r.relativeMode="Object",r.style.fill=t.style.fill,r.style.strokeColor=t.style.strokeColor,r.style.strokeWidth=t.style.strokeWidth,e.children=[n,r],e.children[0].width=t.width,e.children[0].height=t.height,e.children[1].height=t.height/1.5,e.children[1].width=t.width/1.5,e.style.strokeWidth=0,e.style.strokeColor="transparent",e}function dy(t){ib(t+"_linear"),ib(t+"_radial")}function py(t,e){var i=t.indexOf(e);i>=0&&t.splice(i,1)}function uy(t,e,i){var n,r,o;if(t.intermediatePoints=e,t.updateSegmentElement(t,e,t.wrapper.children[0],i),t.sourcePoint,r=t.sourceDecorator,"Bezier"===t.type){var s=t.segments[0],a=t.segments[t.segments.length-1];n=[qd.isEmptyPoint(a.point2)?a.bezierPoint2:a.point2,qd.isEmptyPoint(s.point1)?s.bezierPoint1:s.point1]}else n=t.intermediatePoints;e=t.clipDecorators(t,e,i);var l=t.wrapper.children[0];l.canMeasurePath=!0,l=t.wrapper.children[1],t.updateDecoratorElement(l,e[0],n[1],r),t.targetPoint,o=t.targetDecorator,l=t.wrapper.children[2],t.updateDecoratorElement(l,e[e.length-1],n[n.length-2],o),t.updateShapeElement(t)}function fy(t,e,i){var n,r=t.wrapper,o=r.bounds,s=e.offset,a=e.size/i.scale,l=e.margin,h=r.offsetX-r.actualSize.width*r.pivot.x,c=r.offsetY-r.actualSize.height*r.pivot.y;if(n={x:0,y:0},t.nodes.length>0){switch(e.side){case"Top":n.x+=h+o.width*s,n.y+=c-(a/2+12.5);break;case"Bottom":n.x+=h+s*o.width,n.y+=c+r.actualSize.height+(a/2+12.5);break;case"Left":n.x+=h-(a/2+12.5),n.y+=c+s*o.height;break;case"Right":n.x+=h+r.actualSize.width+(a/2+12.5),n.y+=c+s*o.height}n.x+=(l.left-l.right)/i.scale+a/2*("Center"===e.horizontalAlignment?0:"Right"===e.horizontalAlignment?-1:1),n.y+=(l.top-l.bottom)/i.scale+a/2*("Center"===e.verticalAlignment?0:"Top"===e.verticalAlignment?-1:1)}else if(t.connectors.length>0){var d=t.connectors[0],p={offset:s},u=$m(d.intermediatePoints,p),f=u.index;n=u.point;var g,m=Qm(d.intermediatePoints,p,o),y=(d.intermediatePoints,m.angle);ap(g=op(),-y,d.intermediatePoints[f].x,d.intermediatePoints[f].y),(n=sp(g,n)).x+=l.left-l.right+a/2*("Center"===e.horizontalAlignment?0:"Right"===e.horizontalAlignment?-1:1),n.y+=l.top-l.bottom+a/2*("Center"===e.verticalAlignment?0:"Top"===e.verticalAlignment?-1:1),ap(g=op(),y,d.intermediatePoints[f].x,d.intermediatePoints[f].y),n=sp(g,n)}0===r.rotateAngle&&0===r.parentTransform||(ap(g=op(),r.rotateAngle+r.parentTransform,r.offsetX,r.offsetY),n=sp(g,n));return n}function gy(t,e,i,n){if(n.annotation){if(pg(n.annotation))return!0}else if(mp[e]&t&&Sp[e]&i)return!0;return!1}function my(t,e){return!!(mp[e]&t)}function yy(t,e){return t.visibility&e}function vy(t,e){var i;if("Text"===t.shape.type)i=t.shape;else{var n=e.split("_");e=n[n.length-1];for(var r=0;r<t.annotations.length;r++)e===t.annotations[r].id&&(i=t.annotations[r])}return i}function by(t,e){var i=e.split("_");if(e=i[i.length-1],t){t=t;for(var n=0;n<t.ports.length;n++)if(e===t.ports[n].id)return t.ports[n]}}function wy(t,e){var i={},n=0;if(t.ports){var r=t.ports;for(n=0;n<r.length;n++)e?r[n].constraints&Mp.InConnect&&(i=r[n]):r[n].constraints&Mp.OutConnect&&(i=r[n])}return i}function Sy(t,e,i){for(var n=i?t.annotations:t.ports,r=0;r<n.length;r++)if(n[r].id===e)return r.toString();return null}function xy(t,e){var i;for(i=0;i<t.length;i++)if(e===t[i].id)return!0;return!1}function Cy(t,e,i,n,r,o){for(var s,a=t.children,l=0;l<a.length;l++)if(s=n[a[l]])if(s.children)Cy(s,e,i,n,r,o);else if(s.offsetX-=e,s.offsetY-=i,!r){var h,c=void 0;n[s.id]=s,(c=s.initContainer()).children||(c.children=[]),h=s.init(o),c.children.push(h),c.measure(new Wd(s.width,s.height)),c.arrange(c.desiredSize)}}function Py(t,e,i){if(0===i.length)i.push(t);else if(1===i.length)i[0][e]>t[e]?i.splice(0,0,t):i.push(t);else if(i.length>1){for(var n=0,r=i.length-1,o=Math.floor((n+r)/2);o!==n;)i[o][e]<t[e]?(n=o,o=Math.floor((n+r)/2)):i[o][e]>t[e]&&(r=o,o=Math.floor((n+r)/2));i[r][e]<t[e]?i.push(t):i[n][e]>t[e]?i.splice(n,0,t):i[n][e]<t[e]&&i[r][e]>t[e]&&i.splice(r,0,t)}}function Oy(t){var e=document.getElementById(t.diagramId),i="ej2_instances",n=e[i][0].nodes;void 0===n&&(n=function(t){for(var e=[],i=0;i<t.palettes.length;i++)for(var n=t.palettes[i].symbols,r=0;r<n.length;r++)n[r]instanceof Lv&&e.push(n[r]);return e}(e[i][0]));for(var r=0;n&&r<n.length;r++)if(n[r].id===t.nodeId)return Ey(n[r],t);var o=e[i][0].connectors;for(r=0;o&&r<o.length;r++)if(o[r].id===t.nodeId)return Ey(o[r],t);var s=e[i][0].enterObject;return s&&(s.id===t.nodeId||s.children)?s.children&&Wm(s,"HTML",e[i][0].enterTable)?e[i][0].enterTable[t.nodeId]:s:null}function Ey(t,e){var i,n=t.annotations;for(i=0;n&&i<n.length;i++)if(e.annotationId&&n[i].id===e.annotationId)return n[i];return t}function Ly(t,e,i,n){return $()&&(t={cause:t.cause,state:i,type:n,cancel:!1,element:Iy(e)===Gf?{connector:jy(e)}:{node:jy(e)}}),t}var Iy=function(t){return t&&(t=void 0!==t.sourceID||void 0!==t.sourcePoint||void 0!==t.targetID||void 0!==t.targetPoint||void 0!==t.type?Gf:Lv),t},Ty=function(t){if(!t.sourceID&&!t.targetID){var e={x:t.sourcePoint.x,y:t.sourcePoint.y},i={x:t.targetPoint.x,y:t.targetPoint.y};"Horizontal"===t.flip?(t.sourcePoint.x=i.x,t.targetPoint.x=e.x):"Vertical"===t.flip?(t.sourcePoint.y=i.y,t.targetPoint.y=e.y):"Both"===t.flip&&(t.sourcePoint=i,t.targetPoint=e)}},Ay=function(t,e,i){var n=i.offset.x,r=i.offset.y;return"Horizontal"===e?(n=1-i.offset.x,r=i.offset.y):"Vertical"===e?(n=i.offset.x,r=1-i.offset.y):"Both"===e&&(n=1-i.offset.x,r=1-i.offset.y),t.setOffsetWithRespectToBounds(n,r,"Fraction"),t},By=function(t,e,i,n,r){if(t.hasChildren())for(var o=0,s=t.children;o<s.length;o++){var a=s[o],l=e-a.offsetX+e,h=i-a.offsetY+i;"Horizontal"!==r&&"Both"!==r||(a.offsetX=l,a.flipOffset.x=l-a.desiredSize.width/2),"Vertical"!==r&&"Both"!==r||(a.offsetY=h,a.flipOffset.y=h-a.desiredSize.height/2),(a instanceof tu||a instanceof Kp)&&By(a,e,i,n,r),a.measure(new Wd(a.bounds.width,a.bounds.height)),a.arrange(a.desiredSize);var c=n.nameTable[a.id];c&&n.updateConnectorEdges(c)}},ky=function(t){var e=t.selectedItems.nodes,i=t.selectedItems.connectors;t.protectPropertyChange(!0);var n=t.allowServerDataBinding;t.allowServerDataBinding=!1,t.selectedItems.nodes=[],t.selectedItems.connectors=[],t.allowServerDataBinding=n,t.protectPropertyChange(!1);for(var r=gb(t.selectedItems),o=0;o<e.length;o++)t.selectedItems.nodes.push(t.nameTable[e[o].id]);for(o=0;o<i.length;o++)t.selectedItems.connectors.push(t.nameTable[i[o].id]);return r},My=function(t,e){for(var i,n=new ru,r=0;r<t.length-1;r++)i=Ry(t[r],t[r+1]),n.data=i[0],n.id=e.id+"_"+e.shape.sequence,n.offsetX=i[1].x,n.offsetY=i[1].y,n.rotateAngle=45,n.transform=Pp.Self;return n},Dy=function(t,e){for(var i=0;i<t.ports.length;i++)if(t.ports[i].id===e.id.split("_")[1])return!0;return!1},Ry=function(t,e){var i={x:t.x,y:t.y},n=zy(t,e);n=Math.min(30,n/2);var r=Wu(t,e),o=qd.transform({x:i.x,y:i.y},r,n),s=qd.transform({x:o.x,y:o.y},r,-12),a=qd.transform({x:s.x,y:s.y},r,24);return["M"+s.x+" "+s.y+" L"+a.x+" "+a.y,o]},zy=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};function jy(t){return $()&&(t=gb(t)),t}function Ny(){return(navigator.platform.indexOf("Mac")>=0||navigator.platform.indexOf("iPad")>=0||navigator.platform.indexOf("iPhone")>=0||navigator.platform.indexOf("MacIntel")>=0)&&("safari"===te.info.name||"webkit"===te.info.name)}var Hy=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_y=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Vy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hy(e,t),_y([Hi("None")],e.prototype,"shape",void 0),_y([Hi("white")],e.prototype,"fill",void 0),_y([Hi("Auto")],e.prototype,"horizontalAlignment",void 0),_y([Hi("Auto")],e.prototype,"verticalAlignment",void 0),_y([Hi(10)],e.prototype,"width",void 0),_y([Hi(10)],e.prototype,"height",void 0),_y([_i({x:.5,y:1},qd)],e.prototype,"offset",void 0),_y([Hi("#1a1a1a")],e.prototype,"borderColor",void 0),_y([Hi(1)],e.prototype,"borderWidth",void 0),_y([_i({},Np)],e.prototype,"margin",void 0),_y([Hi("")],e.prototype,"pathData",void 0),_y([Hi("")],e.prototype,"content",void 0),_y([Hi(0)],e.prototype,"cornerRadius",void 0),_y([_i({left:2,right:2,top:2,bottom:2},Np)],e.prototype,"padding",void 0),e}(ln),Fy=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wy=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.orientation="Vertical",e.measureChildren=void 0,e}return Fy(e,t),e.prototype.measure=function(t){var e="Horizontal"===this.orientation?this.updateHorizontalStack:this.updateVerticalStack;return this.desiredSize=this.measureStackPanel(t,e),this.desiredSize},e.prototype.arrange=function(t){var e="Horizontal"===this.orientation?this.arrangeHorizontalStack:this.arrangeVerticalStack;return this.actualSize=this.arrangeStackPanel(t,e),this.updateBounds(),this.actualSize},e.prototype.measureStackPanel=function(e,i){var n=void 0;if(void 0!==this.children&&this.children.length>0)for(var r=0,o=this.children;r<o.length;r++){var s=o[r];s.parentTransform=this.rotateAngle+this.parentTransform,this.measureChildren?s.measure(s.desiredSize):s.measure(e);var a=s.desiredSize.clone();this.applyChildMargin(s,a),0!==s.rotateAngle&&(a=Ob(a,s.rotateAngle)),void 0===n?n=a:s.preventContainer||i(a,n)}return n=t.prototype.validateDesiredSize.call(this,n,e),this.stretchChildren(n),this.applyPadding(n),n},e.prototype.arrangeStackPanel=function(e,i){if(void 0!==this.children&&this.children.length>0){var n=void 0,r=void 0;n=this.offsetX-e.width*this.pivot.x+this.padding.left,r=this.offsetY-e.height*this.pivot.y+this.padding.top;for(var o=0,s=this.children;o<s.length;o++){var a=s[o],l=a.desiredSize.clone(),h=l;"Vertical"===this.orientation?r+=a.margin.top:n+=a.margin.left,0!==a.rotateAngle&&(h=Ob(l,a.rotateAngle));var c=i(n,r,a,this,e,h);t.prototype.findChildOffsetFromCenter.call(this,a,c),a.arrange(l,!0),"Vertical"===this.orientation?r+=h.height+a.margin.bottom:n+=h.width+a.margin.right}}return e},e.prototype.updateHorizontalStack=function(t,e){e.height=Math.max(t.height,e.height),e.width+=t.width},e.prototype.updateVerticalStack=function(t,e){e.width=Math.max(t.width,e.width),e.height+=t.height},e.prototype.arrangeHorizontalStack=function(t,e,i,n,r,o){var s=0;if("Top"===i.verticalAlignment)s=e+i.margin.top+o.height/2;else if("Bottom"===i.verticalAlignment){s=n.offsetY+r.height*(1-n.pivot.y)-n.padding.bottom-i.margin.bottom-o.height/2}else s=n.offsetY-r.height*n.pivot.y+r.height/2,i.margin.top&&(s=e+i.margin.top+o.height/2);return{x:t+o.width/2,y:s}},e.prototype.arrangeVerticalStack=function(t,e,i,n,r,o){var s=0;if("Left"===i.horizontalAlignment)s=t+i.margin.left+o.width/2;else if("Right"===i.horizontalAlignment){s=n.offsetX+r.width*(1-n.pivot.x)-n.padding.right-i.margin.right-o.width/2}else s=n.offsetX-r.width*n.pivot.x+r.width/2,i.margin.left&&(s=t+i.margin.left+o.width/2);return{x:s,y:e+o.height/2}},e.prototype.stretchChildren=function(t){if(void 0!==this.children&&this.children.length>0)for(var e=0,i=this.children;e<i.length;e++){var n=i[e];"Vertical"===this.orientation?"Stretch"===n.horizontalAlignment&&(n.desiredSize.width=t.width-(n.margin.left+n.margin.right)):"Stretch"===n.verticalAlignment&&(n.desiredSize.height=t.height-(n.margin.top+n.margin.bottom))}},e.prototype.applyChildMargin=function(t,e){e.height+=t.margin.top+t.margin.bottom,e.width+=t.margin.left+t.margin.right},e}(Kp);function Uy(t,e,i){var n,r="NoWrap";"Class"===e.shape.classifier?n=e.shape.classShape:"Enumeration"===e.shape.classifier?n=e.shape.enumerationShape:"Interface"===e.shape.classifier&&(n=e.shape.interfaceShape);e.container={type:"Stack",orientation:"Vertical"},e.constraints=(bp.Default|bp.HideThumbs)&~(bp.Rotate|bp.Resize),e.style={fill:e.style.fill,strokeColor:e.style.strokeColor,strokeWidth:1.5},e.children=[],e.maxWidth&&(r="Wrap");var o=new Lv(i,"nodes",{id:e.id+"_umlClass_header",annotations:[{id:"name",content:n.name,offset:{x:.5,y:.65},margin:{left:10,right:10},style:{bold:!0,fontSize:14,color:n.style.color,fill:n.style.fill,textWrapping:r}},{content:"<<"+e.shape.classifier+">>",margin:{left:10,right:10},id:"class",style:{fontSize:n.style.fontSize,color:n.style.color,fill:n.style.fill,textWrapping:r},offset:{x:.5,y:.3},constraints:vp.ReadOnly}],constraints:(bp.Default|bp.HideThumbs)&~(bp.Rotate|bp.Drag|bp.Resize),verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:e.style.fill,strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor}},!0);return i.initObject(o),i.nodes.push(o),i.UpdateBlazorDiagramModel(o,"Node"),e.children.push(o.id),function(t,e,i,n){if("Enumeration"===t.shape.classifier){var r=i.members;if(r&&r.length){Gy(t,e);for(var o="",s=0;s<r.length;s++){var a=r[s];if(""!==a.name&&(o+=a.name),s!==r.length){var l=qy(t,a),h=new Lv(e,"nodes",{id:cb()+"_umlMember",annotations:[{id:"name",content:o,offset:{x:0,y:.5},style:{bold:!0,fontSize:l.fontSize,color:l.color,fill:l.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor,textWrapping:n},constraints:(bp.Default|bp.HideThumbs)&~(bp.Rotate|bp.Drag|bp.Resize),minHeight:25},!0);e.initObject(h),e.nodes.push(h),e.UpdateBlazorDiagramModel(h,"Node"),t.children.push(h.id),o="",a.isSeparator&&s!==r.length-1&&Gy(t,e)}}}}else{var c=i.attributes;if(c.length){var d="";Gy(t,e);for(var s=0;s<c.length;s++){var p=void 0,u=c[s];if(p=u.scope&&"Public"===u.scope?" +":u.scope&&"Private"===u.scope?"-":u.scope&&"Protected"===u.scope?"#":"~",""!==u.name&&p&&(d+=p+" "+u.name+" : "+u.type),s!==c.length){var l=qy(t,u),h=new Lv(e,"nodes",{id:cb()+"_umlProperty",style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor},annotations:[{id:"name",content:d,offset:{x:0,y:.5},style:{bold:!0,fontSize:l.fontSize,color:l.color,fill:l.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(bp.Default|bp.HideThumbs)&~(bp.Rotate|bp.Drag|bp.Resize),minHeight:25},!0);e.initObject(h),e.nodes.push(h),e.UpdateBlazorDiagramModel(h,"Node"),t.children.push(h.id),d="",u.isSeparator&&s!==c.length-1&&Gy(t,e)}}}}}(e,i,n,r),function(t,e,i,n){if(i.methods&&i.methods.length){var r=i.methods;Gy(t,e);for(var o="",s="",a=void 0,l=0;l<r.length;l++){var h=r[l];if(a=h.scope&&"Public"===h.scope?" +":h.scope&&"Private"===h.scope?"-":h.scope&&"Protected"===h.scope?"#":"~",h.parameters)for(var c=0;c<h.parameters.length;c++)h.parameters[c].type?o+=h.parameters[c].name+":"+h.parameters[c].type:o+=h.parameters[c].name,c!==h.parameters.length-1&&(o+=",");if(""!==h.name&&a&&(s+=a+" "+h.name+"("+o+") : "+h.type),l!==r.length){var d=qy(t,h),p=new Lv(e,"nodes",{id:cb()+"_umlMethods",verticalAlignment:"Stretch",horizontalAlignment:"Stretch",annotations:[{id:"name",content:s,offset:{x:0,y:.5},style:{bold:!0,fontSize:d.fontSize,color:d.color,fill:d.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor},minHeight:25,constraints:(bp.Default|bp.HideThumbs)&~(bp.Rotate|bp.Drag|bp.Resize)},!0);e.initObject(p),e.nodes.push(p),e.UpdateBlazorDiagramModel(p,"Node"),t.children.push(p.id),s="",h.isSeparator&&l!==r.length-1&&Gy(t,e)}}}}(e,i,n,r),e.offsetX=e.offsetX,e.offsetY=e.offsetY,e.style.fill=e.style.fill,e.borderColor=e.borderColor,i.initObject(e),t}function Gy(t,e){var i=new Lv(e,"nodes",{id:cb()+"_path",height:1,constraints:bp.Default&~bp.Select,verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor}},!0);e.initObject(i),e.nodes.push(i),t.children.push(i.id)}function qy(t,e){var i={},n=e.style;return i.fill="transparent"!==n.fill?n.fill:t.style.fill,i.color=n.color,i.fontSize=12!==n.fontSize?n.fontSize:t.style.fontSize,i.strokeColor="black"!==n.strokeColor?n.strokeColor:t.style.strokeColor,i.strokeWidth=1!==n.strokeWidth?n.strokeWidth:t.style.strokeWidth,i}var Xy=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yy=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Zy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xy(e,t),Yy([Hi("Horizontal")],e.prototype,"orientation",void 0),Yy([Hi("Center")],e.prototype,"type",void 0),Yy([Hi(void 0)],e.prototype,"offset",void 0),Yy([Hi(!1)],e.prototype,"enableRouting",void 0),Yy([Hi([])],e.prototype,"children",void 0),Yy([Hi("")],e.prototype,"assistants",void 0),Yy([Hi("")],e.prototype,"level",void 0),Yy([Hi("")],e.prototype,"hasSubTree",void 0),Yy([Hi("")],e.prototype,"rows",void 0),e}(ln),Ky=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Jy=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Qy=function(t){if(t){if($())return Ev;switch(t.type){case"Basic":return ov;case"Flow":return sv;case"Path":return tv;case"Image":return nv;case"Text":return rv;case"Bpmn":return mv;case"Native":return ev;case"HTML":return iv;case"UmlActivity":return yv;case"UmlClassifier":return Ov;case"SwimLane":return Bv;default:return ov}}return $()?Ev:ov},$y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),Jy([Hi("Basic")],e.prototype,"type",void 0),e}(ln),tv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"Path"},Jy([Hi("Path")],e.prototype,"type",void 0),Jy([Hi("")],e.prototype,"data",void 0),e}($y),ev=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"Native"},Jy([Hi("Native")],e.prototype,"type",void 0),Jy([Hi("")],e.prototype,"content",void 0),Jy([Hi("Stretch")],e.prototype,"scale",void 0),e}($y),iv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"Html"},Jy([Hi("HTML")],e.prototype,"type",void 0),Jy([Hi("")],e.prototype,"content",void 0),e}($y),nv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"Image"},Jy([Hi("Image")],e.prototype,"type",void 0),Jy([Hi("")],e.prototype,"source",void 0),Jy([Hi("None")],e.prototype,"scale",void 0),Jy([Hi("None")],e.prototype,"align",void 0),e}($y),rv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"Text"},Jy([Hi("Text")],e.prototype,"type",void 0),Jy([Hi("")],e.prototype,"content",void 0),Jy([_i({},Np)],e.prototype,"margin",void 0),e}($y),ov=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"BasicShape"},Jy([Hi("Basic")],e.prototype,"type",void 0),Jy([Hi("Rectangle")],e.prototype,"shape",void 0),Jy([Hi(0)],e.prototype,"cornerRadius",void 0),Jy([Fi([],qd)],e.prototype,"points",void 0),e}($y),sv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"FlowShape"},Jy([Hi("Flow")],e.prototype,"type",void 0),Jy([Hi("Terminator")],e.prototype,"shape",void 0),e}($y),av=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"BpmnGateway"},Jy([Hi("None")],e.prototype,"type",void 0),e}(ln),lv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"BpmnDataObject"},Jy([Hi("None")],e.prototype,"type",void 0),Jy([Hi(!1)],e.prototype,"collection",void 0),e}(ln),hv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),Jy([Hi("None")],e.prototype,"type",void 0),Jy([Hi("None")],e.prototype,"loop",void 0),Jy([Hi(!1)],e.prototype,"call",void 0),Jy([Hi(!1)],e.prototype,"compensation",void 0),e}(ln),cv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"BpmnEvent"},Jy([Hi("Start")],e.prototype,"event",void 0),Jy([Hi("None")],e.prototype,"trigger",void 0),e}(ln),dv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"BpmnSubEvent"},Jy([Hi("None")],e.prototype,"trigger",void 0),Jy([Hi("Start")],e.prototype,"event",void 0),Jy([Hi("")],e.prototype,"id",void 0),Jy([_i({},qd)],e.prototype,"offset",void 0),Jy([Fi([],yu)],e.prototype,"annotations",void 0),Jy([Fi([],pu)],e.prototype,"ports",void 0),Jy([Hi()],e.prototype,"width",void 0),Jy([Hi()],e.prototype,"height",void 0),Jy([_i({},Np)],e.prototype,"margin",void 0),Jy([Hi("Center")],e.prototype,"horizontalAlignment",void 0),Jy([Hi("Center")],e.prototype,"verticalAlignment",void 0),Jy([Hi(!0)],e.prototype,"visible",void 0),e}(ln),pv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),Jy([_i({id:"success",event:"End",offset:{x:1,y:.5}},dv)],e.prototype,"success",void 0),Jy([_i({id:"failure",event:"Intermediate",trigger:"Error",offset:{x:.25,y:1}},dv)],e.prototype,"failure",void 0),Jy([_i({id:"cancel",event:"Intermediate",trigger:"Cancel",offset:{x:.75,y:1}},dv)],e.prototype,"cancel",void 0),e}(ln),uv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),Jy([Hi("None")],e.prototype,"type",void 0),Jy([Hi(!1)],e.prototype,"adhoc",void 0),Jy([Hi("Default")],e.prototype,"boundary",void 0),Jy([Hi(!1)],e.prototype,"compensation",void 0),Jy([Hi("None")],e.prototype,"loop",void 0),Jy([Hi(!0)],e.prototype,"collapsed",void 0),Jy([Fi([],dv)],e.prototype,"events",void 0),Jy([_i({},pv)],e.prototype,"transaction",void 0),Jy([Hi(void 0)],e.prototype,"processes",void 0),e}(ln),fv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"BpmnActivity"},Jy([Hi("Task")],e.prototype,"activity",void 0),Jy([_i({},hv)],e.prototype,"task",void 0),Jy([_i({},uv)],e.prototype,"subProcess",void 0),e}(ln),gv=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return Ky(e,t),e.prototype.getClassName=function(){return"BpmnAnnotation"},Jy([Hi("")],e.prototype,"text",void 0),Jy([Hi("")],e.prototype,"id",void 0),Jy([Hi(0)],e.prototype,"angle",void 0),Jy([Hi()],e.prototype,"height",void 0),Jy([Hi()],e.prototype,"width",void 0),Jy([Hi(0)],e.prototype,"length",void 0),e}(ln),mv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"BpmnShape"},Jy([Hi("Bpmn")],e.prototype,"type",void 0),Jy([Hi("Event")],e.prototype,"shape",void 0),Jy([_i({},cv)],e.prototype,"event",void 0),Jy([_i({},av)],e.prototype,"gateway",void 0),Jy([_i({},lv)],e.prototype,"dataObject",void 0),Jy([_i({},fv)],e.prototype,"activity",void 0),Jy([_i({},gv)],e.prototype,"annotation",void 0),Jy([Fi([],gv)],e.prototype,"annotations",void 0),e}($y),yv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"UmlActivityShape"},Jy([Hi("UmlActivity")],e.prototype,"type",void 0),Jy([Hi("Action")],e.prototype,"shape",void 0),e}($y),vv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"MethodArguments"},Jy([Hi("")],e.prototype,"name",void 0),Jy([Hi("")],e.prototype,"type",void 0),Jy([_i({},Xp)],e.prototype,"style",void 0),e}(ln),bv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"UmlClassAttribute"},Jy([Hi("Public")],e.prototype,"scope",void 0),Jy([Hi(!1)],e.prototype,"isSeparator",void 0),e}(vv),wv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"UmlClassMethod"},Jy([Fi([],vv)],e.prototype,"parameters",void 0),e}(bv),Sv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"UmlClass"},Jy([Hi("")],e.prototype,"name",void 0),Jy([Fi([],bv)],e.prototype,"attributes",void 0),Jy([Fi([],wv)],e.prototype,"methods",void 0),Jy([_i({},Xp)],e.prototype,"style",void 0),e}(ln),xv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"UmlInterface"},Jy([Hi(!1)],e.prototype,"isSeparator",void 0),e}(Sv),Cv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"UmlEnumerationMember"},Jy([Hi("")],e.prototype,"name",void 0),Jy([Hi("")],e.prototype,"value",void 0),Jy([Hi(!1)],e.prototype,"isSeparator",void 0),Jy([_i({},Xp)],e.prototype,"style",void 0),e}(ln),Pv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"UmlEnumeration"},Jy([Hi("")],e.prototype,"name",void 0),Jy([Fi([],Cv)],e.prototype,"members",void 0),Jy([_i({},Xp)],e.prototype,"style",void 0),e}(ln),Ov=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"UmlClassifierShape"},Jy([Hi("UmlClassifier")],e.prototype,"type",void 0),Jy([_i({},Sv)],e.prototype,"classShape",void 0),Jy([_i({},xv)],e.prototype,"interfaceShape",void 0),Jy([_i({},Pv)],e.prototype,"enumerationShape",void 0),Jy([Hi("Class")],e.prototype,"classifier",void 0),e}($y),Ev=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"DiagramShape"},Jy([Hi("Basic")],e.prototype,"type",void 0),Jy([Hi("Rectangle")],e.prototype,"basicShape",void 0),Jy([Hi("Terminator")],e.prototype,"flowShape",void 0),Jy([Hi("Event")],e.prototype,"bpmnShape",void 0),Jy([Hi("Action")],e.prototype,"umlActivityShape",void 0),Jy([Hi("")],e.prototype,"data",void 0),Jy([Hi("")],e.prototype,"content",void 0),Jy([Hi("")],e.prototype,"textContent",void 0),Jy([Hi("Stretch")],e.prototype,"scale",void 0),Jy([Hi("")],e.prototype,"source",void 0),Jy([Hi("None")],e.prototype,"align",void 0),Jy([_i({},Np)],e.prototype,"margin",void 0),Jy([Hi(0)],e.prototype,"cornerRadius",void 0),Jy([Fi([],qd)],e.prototype,"points",void 0),Jy([_i({},lv)],e.prototype,"dataObject",void 0),Jy([_i({},cv)],e.prototype,"event",void 0),Jy([_i({},av)],e.prototype,"gateway",void 0),Jy([Fi([],gv)],e.prototype,"annotations",void 0),Jy([_i({},fv)],e.prototype,"activity",void 0),Jy([_i({},gv)],e.prototype,"annotation",void 0),Jy([_i({},Pv)],e.prototype,"enumerationShape",void 0),Jy([Hi("Class")],e.prototype,"classifier",void 0),Jy([_i({},Sv)],e.prototype,"classShape",void 0),Jy([_i({},xv)],e.prototype,"interfaceShape",void 0),e}(ln),Lv=function(t){function e(e,i,n,r){var o,s=t.call(this,e,i,n,r)||this;return s.isCanvasUpdate=!1,s.status="None",s.parentId="",s.processId="",s.umlIndex=-1,s.outEdges=[],s.inEdges=[],s.isHeader=!1,s.isLane=!1,s.isPhase=!1,s.children&&s.children.length>0&&((o=n).style&&o.style.fill||(s.style.fill="transparent"),o.style&&o.style.strokeColor||(s.style.strokeColor="transparent")),s.shape&&"UmlActivity"===s.shape.type&&_m(n,s),s.shape&&"SwimLane"===s.shape.type&&jm(n,s),s}return Ky(e,t),Object.defineProperty(e.prototype,"actualSize",{get:function(){return null!==this.wrapper?this.wrapper.actualSize:new Wd(this.width||0,this.height||0)},enumerable:!0,configurable:!0}),e.prototype.init=function(t){var e,i;e="SwimLane"!=this.shape.type?new Yp:new _g;switch(this.shape.changedProperties={},this.shape.oldProperties={},this.shape.type){case"Path":var n=new ru;n.data=this.shape.data,e=n;break;case"Image":var r=new su;r.source=this.shape.source,r.imageAlign=this.shape.align,r.imageScale=this.shape.scale,e=r;break;case"Text":var o=new Qp;o.content=$()?this.shape.textContent:this.shape.content,e=o,i=this.style,e.style=i;break;case"Basic":if(!$()&&"Rectangle"===this.shape.shape||$()&&"Rectangle"===this.shape.basicShape)(e=a=new Yp).cornerRadius=this.shape.cornerRadius;else if(!$()&&"Polygon"===this.shape.shape||$()&&"Polygon"===this.shape.basicShape){var s=new ru;s.data=Yd(this.shape.points),e=s}else{var a=new ru,l=eu($()?this.shape.basicShape:this.shape.shape);a.data=l,e=a}break;case"Flow":var h=new ru,c=xu($()?this.shape.flowShape:this.shape.shape);h.data=c,e=h;break;case"UmlActivity":e=function(t,e,i){var n=$()?i.shape.umlActivityShape:i.shape.shape,r=Bg(n);switch(t.data=r,e=t,n){case"StructuredNode":if(i.annotations)for(var o=0;o<i.annotations.length;o++)i.annotations[o].content="<<"+i.annotations[o].content+">>";e=t;break;case"FinalNode":e=cy(i)}return e}(new ru,e,this);break;case"Bpmn":if(t.bpmnModule){e=t.bpmnModule.initBPMNContent(e,this,t),this.wrapper.elementActions=this.wrapper.elementActions|wp.ElementIsGroup;var d=this.shape.activity.subProcess;if(d.processes&&d.processes.length)for(var p=0,u=this.shape.activity.subProcess.processes;p<u.length;p++){var f=u[p];!t.nameTable[f]||t.nameTable[f].processId&&t.nameTable[f].processId!==this.id||(t.nameTable[f].processId=this.id,d.collapsed&&t.updateElementVisibility(t.nameTable[f].wrapper,t.nameTable[f],!d.collapsed),e.children.push(t.nameTable[f].wrapper))}}break;case"Native":var g=new lu(this.id,t.element.id);g.content=this.shape.content,g.scale=this.shape.scale,e=g;break;case"HTML":var m=new vf(this.id,t.element.id,void 0,t.nodeTemplate);this.shape.content?m.content=this.shape.content:t.nodeTemplate&&(m.isTemplate=!0,m.template=m.content=nb(m,!0,this)),e=m;break;case"UmlClassifier":e=Uy(e,this,t);break;case"SwimLane":this.annotations=[],this.ports=[],e.cellStyle.fill="none",e.cellStyle.strokeColor="none",this.container={type:"Grid",orientation:this.shape.orientation},e.id=this.id,this.container.orientation=this.shape.orientation,this.constraints|=bp.HideThumbs,em(e,t,this)}return e.id=this.id+"_content",e.relativeMode="Object",void 0!==this.width&&(e.width=this.width),e.horizontalAlignment="Stretch",void 0!==this.height&&(e.height=this.height),void 0!==this.minHeight&&(e.minHeight=this.minHeight),void 0!==this.maxHeight&&(e.maxHeight=this.maxHeight),void 0!==this.minWidth&&(e.minWidth=this.minWidth),void 0!==this.maxWidth&&(e.maxWidth=this.maxWidth),(!$()&&"Rectangle"===this.shape.shape&&!this.shape.cornerRadius||$()&&"Rectangle"===this.shape.basicShape&&"Basic"===this.shape.type&&!this.shape.cornerRadius)&&(e.isRectElement=!0),e.verticalAlignment="Stretch",(this.shape instanceof rv||$()&&"Text"===this.shape.type)&&(e.margin=this.shape.margin),ag(this)&&0!=(this.constraints&bp.Shadow)&&(e.shadow=this.shadow),("Bpmn"!==this.shape.type||!$()&&"Message"===this.shape.shape||$()&&"Message"===this.shape.bpmnShape||!$()&&"DataSource"===this.shape.shape||$()&&"DataSource"===this.shape.bpmnShape)&&("UmlActivity"!==this.shape.type||!$()&&"FinalNode"!==this.shape.shape||$()&&"FinalNode"!==this.shape.umlActivityShape)&&"Text"!==this.shape.type&&(e.style=this.style),(this.wrapper.elementActions&wp.ElementIsGroup||"Horizontal"!==this.flip)&&"Vertical"!==this.flip||(e.flip=this.flip),e},e.prototype.initContainer=function(){var t;if(this.id||(this.id=cb()),!this.container||this.shape instanceof Bv)t=this.children?new Kp:new tu;else switch(this.container.type){case"Canvas":t=new tu;break;case"Stack":t=new Wy;break;case"Grid":(t=new _g).setDefinitions(this.rows,this.columns)}return t.id=this.id,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t.visible=this.visible,t.horizontalAlignment=this.horizontalAlignment,t.verticalAlignment=this.verticalAlignment,this.container&&(t.width=this.width,t.height=this.height,"Stack"===this.container.type&&(t.orientation=this.container.orientation)),t.style.fill=this.backgroundColor,t.style.strokeColor=this.borderColor,t.style.strokeWidth=this.borderWidth,t.rotateAngle=this.rotateAngle,t.minHeight=this.minHeight,t.minWidth=this.minWidth,t.maxHeight=this.maxHeight,t.maxWidth=this.maxWidth,t.pivot=this.pivot,t.margin=this.margin,t.flip=this.flip,this.wrapper=t,t},e.prototype.initPorts=function(t,e){for(var i,n=this.wrapper,r=0;this.ports,r<this.ports.length;r++){(i=this.initPortWrapper(this.ports[r])).elementActions=i.elementActions|wp.ElementIsPort;var o=void 0,s=Lb(t);s&&(o=s(i,this)),i.description=o||i.id,i.inversedAlignment=n.inversedAlignment,e.children.push(i)}},e.prototype.getIconOffet=function(t,e){var i,n;return"BottomToTop"===t.orientation?(i=e.offset.x,n=1-e.offset.y):"LeftToRight"===t.orientation?(i=e.offset.y,n=e.offset.x):"RightToLeft"===t.orientation?(i=1-e.offset.y,n=e.offset.x):(i=e.offset.x,n=e.offset.y),{x:i,y:n}},e.prototype.initIcons=function(t,e,i,n){var r,o=this.wrapper,s=this.isExpanded?this.expandIcon:this.collapseIcon;if("None"!==s.shape){var a=new tu;a.float=!0;a.id=this.id+"_icon_content",a.children=[],a.height=s.height,a.width=s.width,a.style.strokeColor="transparent",a.margin=s.margin,a.horizontalAlignment="Center",a.verticalAlignment="Center",a.visible=this.visible,r=this.getIconOffet(e,s),a.setOffsetWithRespectToBounds(r.x,r.y,"Fraction"),a.relativeMode="Point",this.initIconSymbol(s,a,t,n);var l=void 0,h=Lb(t);h&&(l=h(s,this)),a.description=l||a.id,a.inversedAlignment=o.inversedAlignment,i.children.push(a)}},e.prototype.initAnnotations=function(t,e,i,n,r){for(var o,s=0;this.annotations,s<this.annotations.length;s++){o=this.initAnnotationWrapper(this.annotations[s],i,n,s,r);var a=void 0,l=Lb(t);l&&(a=l(o,this)),o.description=a||o.id,o.inversedAlignment=e.inversedAlignment,e.children.push(o)}},e.prototype.initPortWrapper=function(t){t.id=t.id||cb();var e=new ru;e.height=t.height,e.width=t.width;var i="Custom"===t.shape?t.pathData:bu(t.shape);e.id=this.id+"_"+t.id,e.margin=t.margin,e.data=i;var n=t.style;return e.style={fill:n.fill,strokeColor:n.strokeColor,gradient:null,opacity:n.opacity,strokeDashArray:n.strokeDashArray,strokeWidth:n.strokeWidth},e.horizontalAlignment=t.horizontalAlignment,e.verticalAlignment=t.verticalAlignment,e=Ay(e,this.flip,t),void 0===this.width&&void 0===this.height||(e.float=!0),e.relativeMode="Point",e.visible=!(!yy(t,fp.Visible)||yy(t,fp.Hover)||yy(t,fp.Connect)),e},e.prototype.initAnnotationWrapper=function(t,e,i,n,r){t.id=t.id||n+"annotation"||cb();var o,s=t;if($()&&"Template"===t.annotationType&&(t.template=t.template?t.template:""),e&&(t.template||"Template"===t.annotationType||r&&""===t.content))o=hb(o=new vf(this.id,e,t.id,r),t,r);else{(o=new Qp).canMeasure=!i;var a=t.style,l=t.hyperlink.link?t.hyperlink:void 0;o.style={fill:a.fill,strokeColor:a.strokeColor,strokeWidth:a.strokeWidth,bold:a.bold,textWrapping:a.textWrapping,color:l?l.color||o.hyperlink.color:a.color,whiteSpace:a.whiteSpace,fontFamily:a.fontFamily,fontSize:a.fontSize,italic:a.italic,gradient:null,opacity:a.opacity,strokeDashArray:a.strokeDashArray,textAlign:a.textAlign,textOverflow:t.style.textOverflow,textDecoration:l?l.textDecoration||o.hyperlink.textDecoration:a.textDecoration},o.hyperlink.link=t.hyperlink.link||void 0,o.hyperlink.content=t.hyperlink.content||void 0,o.hyperlink.textDecoration=t.hyperlink.textDecoration||void 0,o.content=l?l.content||o.hyperlink.link:t.content}return o.constraints=t.constraints,o.height=t.height,o.width=t.width,o.visible=t.visibility,o.rotateAngle=t.rotateAngle,o.id=this.id+"_"+t.id,void 0===this.width||t.template||(void 0===t.width||t.width>this.width&&("Wrap"===t.style.textWrapping||"WrapWithOverflow"===t.style.textWrapping))&&(o.width=this.width),o.margin=t.margin,o.horizontalAlignment=t.horizontalAlignment,o.verticalAlignment=t.verticalAlignment,o.setOffsetWithRespectToBounds(s.offset.x,s.offset.y,"Fraction"),void 0===this.width&&void 0===this.height||(o.float=!0),o.relativeMode="Point",o},e.prototype.initIconContainer=function(t,e){var i=new Yp;return i.id=e.id+"_rect",i.height=t.height,i.width=t.width,i.visible=e.visible,i.margin=t.margin,i.cornerRadius=t.cornerRadius,i.style={fill:t.fill,strokeColor:t.borderColor,strokeWidth:t.borderWidth},i.setOffsetWithRespectToBounds(.5,.5,"Fraction"),i.horizontalAlignment="Center",i.verticalAlignment="Center",i.relativeMode="Object",i.description=i.description||"Click here to expand or collapse",i},e.prototype.initIconSymbol=function(t,e,i,n){var r;if(e.children.push(this.initIconContainer(t,e)),"Template"===t.shape)(r=new lu(this.id,n)).content=t.content,r.height=10,r.width=10;else{(r=new ru).data=function(t){var e;switch(t.shape){case"Minus":e="M0,50 L100,50";break;case"Plus":e="M0,-50 L0,50 M-50,0 L50,0";break;case"ArrowUp":e="M0,100 L50,0 L100,100 Z";break;case"ArrowDown":e="M0,0 L50,100 L100,0 Z";break;case"Path":e=t.pathData}return e}(t);var o=Rv(r.data);r.height=o.height<10?o.height:10-(t.padding.bottom+t.padding.top),r.width=o.width<10?o.width:10-(t.padding.left+t.padding.right)}r.id=e.id+"_shape",r.horizontalAlignment="Center",r.verticalAlignment="Center",r.visible=e.visible,r.visible=e.visible,r.style={fill:"black",strokeColor:t.borderColor,strokeWidth:t.borderWidth},r.setOffsetWithRespectToBounds(.5,.5,"Fraction"),r.relativeMode="Object",r.description=e.description||"Click here to expand or collapse",e.children.push(r)},e.prototype.getClassName=function(){return"Node"},Jy([Fi([],yu)],e.prototype,"annotations",void 0),Jy([Hi(0)],e.prototype,"offsetX",void 0),Jy([_i({},Zy)],e.prototype,"layoutInfo",void 0),Jy([Hi(0)],e.prototype,"offsetY",void 0),Jy([Fi([],pu)],e.prototype,"ports",void 0),Jy([Hi(!0)],e.prototype,"isExpanded",void 0),Jy([_i({},Vy)],e.prototype,"expandIcon",void 0),Jy([_i({},Vy)],e.prototype,"collapseIcon",void 0),Jy([_i({x:.5,y:.5},qd)],e.prototype,"pivot",void 0),Jy([Hi()],e.prototype,"width",void 0),Jy([Hi()],e.prototype,"height",void 0),Jy([Hi()],e.prototype,"minWidth",void 0),Jy([Hi()],e.prototype,"minHeight",void 0),Jy([Hi()],e.prototype,"maxWidth",void 0),Jy([Hi()],e.prototype,"maxHeight",void 0),Jy([Hi(0)],e.prototype,"rotateAngle",void 0),Jy([_i({fill:"white"},Xp)],e.prototype,"style",void 0),Jy([Hi("transparent")],e.prototype,"backgroundColor",void 0),Jy([Hi("none")],e.prototype,"borderColor",void 0),Jy([Hi(0)],e.prototype,"borderWidth",void 0),Jy([Hi()],e.prototype,"data",void 0),Jy([Vi(Qy)],e.prototype,"shape",void 0),Jy([_i({},Sf)],e.prototype,"previewSize",void 0),Jy([_i({},Sf)],e.prototype,"dragSize",void 0),Jy([Hi(null)],e.prototype,"wrapper",void 0),Jy([Hi(bp.Default)],e.prototype,"constraints",void 0),Jy([_i({},Hp)],e.prototype,"shadow",void 0),Jy([Hi()],e.prototype,"children",void 0),Jy([Hi(null)],e.prototype,"container",void 0),Jy([Hi("Left")],e.prototype,"horizontalAlignment",void 0),Jy([Hi("Top")],e.prototype,"verticalAlignment",void 0),Jy([Hi()],e.prototype,"rows",void 0),Jy([Hi()],e.prototype,"columns",void 0),Jy([Hi()],e.prototype,"rowIndex",void 0),Jy([Hi()],e.prototype,"columnIndex",void 0),Jy([Hi()],e.prototype,"rowSpan",void 0),Jy([Hi()],e.prototype,"columnSpan",void 0),Jy([Hi("")],e.prototype,"branch",void 0),e}(mf),Iv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),Jy([Hi("")],e.prototype,"id",void 0),Jy([_i({},mu)],e.prototype,"annotation",void 0),Jy([_i({fill:"#E7F4FF",strokeColor:"#CCCCCC"},Gp)],e.prototype,"style",void 0),Jy([Hi(50)],e.prototype,"height",void 0),Jy([Hi(50)],e.prototype,"width",void 0),e}(ln),Tv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"Lane"},Jy([Hi("")],e.prototype,"id",void 0),Jy([_i({fill:"#F9F9F9",strokeColor:"#CCCCCC"},Gp)],e.prototype,"style",void 0),Jy([Fi([],Lv)],e.prototype,"children",void 0),Jy([Hi(100)],e.prototype,"height",void 0),Jy([Hi(100)],e.prototype,"width",void 0),Jy([_i({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},Iv)],e.prototype,"header",void 0),Jy([Hi(!0)],e.prototype,"canMove",void 0),e}(ln),Av=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.getClassName=function(){return"Phase"},Jy([Hi("")],e.prototype,"id",void 0),Jy([_i({strokeColor:"#CCCCCC"},Gp)],e.prototype,"style",void 0),Jy([_i({annotation:{content:"Phase"}},Iv)],e.prototype,"header",void 0),Jy([Hi(100)],e.prototype,"offset",void 0),e}(ln),Bv=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.padding=20,e.hasHeader=!0,e}return Ky(e,t),e.prototype.getClassName=function(){return"SwimLane"},Jy([Hi("SwimLane")],e.prototype,"type",void 0),Jy([Hi(20)],e.prototype,"phaseSize",void 0),Jy([Fi([],Av)],e.prototype,"phases",void 0),Jy([Hi("Horizontal")],e.prototype,"orientation",void 0),Jy([Fi([],Tv)],e.prototype,"lanes",void 0),Jy([_i({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},Iv)],e.prototype,"header",void 0),Jy([Hi(!1)],e.prototype,"isLane",void 0),Jy([Hi(!1)],e.prototype,"isPhase",void 0),e}($y),kv=function(){function t(){}return t.prototype.getClassName=function(){return"ChildContainer"},Jy([Hi("Canvas")],t.prototype,"type",void 0),Jy([Hi("Vertical")],t.prototype,"orientation",void 0),t}(),Mv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ky(e,t),e.prototype.init=function(t){var e=new Kp;e.measureChildren=!1;new Wd;if(e.children=[],this.annotation){var i=this.nodes.length>0?t.nameTable[this.nodes[0].id].wrapper:t.nameTable[this.connectors[0].id].wrapper,n=t.getWrapper(i,this.annotation.id);e.children.push(n)}else if(this.nodes||this.connectors){for(var r=0;r<this.nodes.length;r++){n=t.nameTable[this.nodes[r].id].wrapper;e.children.push(n)}for(var o=0;o<this.connectors.length;o++){n=t.nameTable[this.connectors[o].id].wrapper;e.children.push(n)}}return this.wrapper=e,e},Jy([Hi(null)],e.prototype,"wrapper",void 0),Jy([Fi([],Lv)],e.prototype,"nodes",void 0),Jy([Fi([],Gf)],e.prototype,"connectors",void 0),Jy([Hi()],e.prototype,"width",void 0),Jy([Hi()],e.prototype,"height",void 0),Jy([Hi(0)],e.prototype,"rotateAngle",void 0),Jy([Hi(0)],e.prototype,"offsetX",void 0),Jy([Hi(0)],e.prototype,"offsetY",void 0),Jy([_i({x:.5,y:.5},qd)],e.prototype,"pivot",void 0),Jy([Hi("CompleteIntersect")],e.prototype,"rubberBandSelectionMode",void 0),Jy([Fi([],Ag)],e.prototype,"userHandles",void 0),Jy([Hi(mp.All)],e.prototype,"constraints",void 0),Jy([Hi()],e.prototype,"setTooltipTemplate",void 0),e}(ln);function Dv(t){var e,i=[];if("msie"===te.info.name||"edge"===te.info.name)for(var n=0;n<t.childNodes.length;n++)1===(e=t.childNodes[n]).nodeType&&i.push(e);else i=t.children;return i}function Rv(t){if(t){window.measureElement.style.visibility="visible";var e=Dv(window.measureElement.children[2])[0];e.setAttribute("d",t);var i=e.getBBox(),n=new np(i.x,i.y,i.width,i.height);return window.measureElement.style.visibility="hidden",n}return new np(0,0,0,0)}function zv(t,e,i,n,r){var o=new Wd,s=Jv("span",{style:"display:inline-block; line-height: normal"});return t.bold&&(s.style.fontWeight="bold"),t.italic&&(s.style.fontStyle="italic"),void 0!==i&&(s.style.width=i.toString()+"px"),void 0!==n&&(s.style.height=n.toString()+"px"),void 0!==r&&(s.style.maxWidth=r.toString()+"px"),s.style.fontFamily=t.fontFamily,s.style.fontSize=t.fontSize+"px",s.style.color=t.color,s.textContent=e,s.style.whiteSpace=Pb(t.whiteSpace,t.textWrapping),s.style.wordBreak=void 0!==r?"break-word":wb(t.textWrapping),document.body.appendChild(s),o.width=s.offsetWidth,o.height=s.offsetHeight,document.body.removeChild(s),o}function jv(t,e,i,n){var r,o,s=0,a=0,l=!1;return 0===(r=e).x&&0===r.y||(s=0-Number(r.x),a=0-Number(r.y)),(t.actualSize.width!==r.width||t.actualSize.height!==r.height||n)&&(s=(n&&n.width||t.actualSize.width)/Number(r.width?r.width:1),a=(n&&n.height||t.actualSize.height)/Number(r.height?r.height:1),l=!0),o=Kd($d(Xd(t.data)),s,a,l,r.x,r.y,0,0),l=!1,o}function Nv(t){return Hv(t).getElementsByClassName("e-diagram-layer")[0]}function Hv(t,e){var i;return e&&(i=document.getElementById(e)),"msie"===te.info.name||"edge"===te.info.name?i?i.querySelector("#"+t):document.getElementById(t):i?i.querySelector("#"+CSS.escape(t)):document.getElementById(t)}function _v(t,e,i){var n,r,o,s=void 0,a="";"native"===i?(n=Zv(t),a="_content_groupElement"):"html"===i?(n=Kv(t).childNodes[0],a="_html_element"):(n=Nv(r=t).getElementById(r+"_diagramLayer"),a="_groupElement");for(var l=0;n.childNodes&&l<n.childNodes.length;l++)if((o=n.childNodes[l])&&o.id===e+a){s=l;break}return s}function Vv(t){return Hv(t).getElementsByClassName("e-adorner-layer")[0]}function Fv(t){return Vv(t).getElementById(t+"_SelectorElement")}function Wv(t){return Vv(t).getElementById(t+"_diagramAdorner")}function Uv(t){return Hv(t).getElementsByClassName("e-userHandle-layer")[0]}function Gv(t){return Hv(t).getElementsByClassName("e-native-layer")[0]}function qv(t){return Hv(t).getElementsByClassName("e-grid-layer")[0]}function Xv(t){return Hv(t).getElementsByClassName("e-background-layer")[0].parentNode}function Yv(t){return Hv(t).getElementsByClassName("e-background-layer")[0]}function Zv(t){return Gv(t).getElementById(t+"_nativeLayer")}function Kv(t){var e=null;if(window.domTable[t+"html_layer"])e=window.domTable[t+"html_layer"];else{e=Hv(t).getElementsByClassName("e-html-layer")[0],window.domTable[t+"html_layer"]=e}return e}function Jv(t,e){var i=$e(t);return sb(i,e),i}function Qv(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg",t);return rb(i,e),i}function $v(t,e,i){for(var n=t;n&&(i?n.id!==e:!tb(n,e));)n=n.parentNode;return n}function tb(t,e){return(" "+("object"==typeof t.className?t.className.animVal:t.className)+" ").indexOf(" "+e+" ")>-1}function eb(t,e,i){t=[];for(var n=0,r=i.length;n<r;n++)t.push({pageX:i[n].clientX,pageY:i[n].clientY,pointerId:null});return t}function ib(t,e){var i=Hv(t,e);i&&i.parentNode.removeChild(i)}function nb(t,e,i){var n;if(e){n=Jv("div",{style:"height: 100%; width: 100%"})}else n=document.createElementNS("http://www.w3.org/2000/svg","g");var r,o=Oy(t),s="",a={};if(o instanceof Lv){a=o,"Native"===o.shape.type&&!0;$()&&(s="diagramsf_node_template",a=jy(o))}else a=o,$()&&(a=jy(o),s="diagramsf_annotation_template");if("string"!=typeof t.content||t.isTemplate&&!$())if(t.isTemplate){c=void 0;c=t.getNodeTemplate()(gb(i),void 0,"template",void 0,void 0,!1);for(var l=0;l<c.length;l++)n.appendChild(c[l])}else n.appendChild(t.content);else{var h=document.getElementById(t.content);if(h)n.appendChild(h);else for(var c=void 0,d=0,p=(c=Te(t.content))(a,null,null,s);d<p.length;d++)r=p[d],n.appendChild(r)}return t.isTemplate?n:n.cloneNode(!0)}function rb(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++)"style"!==i[n]?t.setAttribute(i[n],e[i[n]]):ob(t,e[i[n]])}function ob(t,e){for(var i=e.split(";"),n=0;n<i.length;n++){var r=i[n].split(":");2===r.length&&(t.style[r[0].trim()]=r[1].trim())}}function sb(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++)"style"!==i[n]?t.setAttribute(i[n],e[i[n]]):ob(t,e[i[n]])}function ab(){if(window.measureElement)window.measureElement.usageCount+=1;else{var t=Jv("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),e=Jv("span",{style:"display:inline-block ; line-height: normal"});t.appendChild(e);var i;i=Jv("img",{}),t.appendChild(i);var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("xlink","http://www.w3.org/1999/xlink"),t.appendChild(n);var r=document.createElementNS("http://www.w3.org/2000/svg","path");n.appendChild(r);document.createTextNode("");var o=document.createElementNS("http://www.w3.org/2000/svg","text");o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),n.appendChild(o),window.measureElement=t,window.measureElement.usageCount=1,document.body.appendChild(t);window.measureElementCount?window.measureElementCount++:window.measureElementCount=1}}function lb(t,e,i,n){return!(e.length>1&&0===t.x)||"Clip"!==n.textOverflow&&"Ellipsis"!==n.textOverflow||"Wrap"!==n.textWrapping&&"WrapWithOverflow"!==n.textWrapping?t.x:(t.x=e[i-1]?e[i-1].x:-t.width/2,t.x)}function hb(t,e,i){return i&&!e.template?(t.isTemplate=!0,t.template=t.content=nb(t,!0,e)):t.content=e.template,t}function cb(){for(var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",i="",n=0;n<5;n++){if("crypto"in window&&"getRandomValues"in crypto){var r=new Uint16Array(1);t=(window.msCrypto||window.crypto).getRandomValues(r)[0]%(e.length-1)}else t=Math.floor(Math.random()*e.length);0===n&&t<10?n--:i+=e.substring(t,t+1)}return i}function db(t,e){if(t.nodes&&t.nodes.length>0)for(var i=0;i<t.nodes.length;i++)if(t.nodes[i].id===e)return i;if(t.connectors&&t.connectors.length>0)for(i=0;i<t.connectors.length;i++)if(t.connectors[i].id===e)return i;return null}function pb(t){if(t){try{if(document.querySelectorAll(t).length)return Te(document.querySelector(t).innerHTML.trim())}catch(e){return Te(t)}}}function ub(t){new np;var e=t.offsetY-t.actualSize.height*t.pivot.y,i=t.offsetY+t.actualSize.height*(1-t.pivot.y),n=t.offsetX-t.actualSize.width*t.pivot.x,r=t.offsetX+t.actualSize.width*(1-t.pivot.x),o={x:n,y:e},s={x:r,y:e},a={x:n,y:i},l={x:r,y:i};return np.toBounds([o,s,a,l])}function fb(t){var e,i=new np,n=(e=ub(t)).middleLeft,r=e.topCenter,o=e.bottomCenter,s=e.middleRight,a=e.topLeft,l=e.topRight,h=e.bottomLeft,c=e.bottomRight;if(t.corners={topLeft:a,topCenter:r,topRight:l,middleLeft:n,middleRight:s,bottomLeft:h,bottomCenter:o,bottomRight:c},0!==t.rotateAngle||0!==t.parentTransform){var d=op();ap(d,t.rotateAngle+t.parentTransform,t.offsetX,t.offsetY),t.corners.topLeft=a=sp(d,a),t.corners.topCenter=r=sp(d,r),t.corners.topRight=l=sp(d,l),t.corners.middleLeft=n=sp(d,n),t.corners.middleRight=s=sp(d,s),t.corners.bottomLeft=h=sp(d,h),t.corners.bottomCenter=o=sp(d,o),t.corners.bottomRight=c=sp(d,c)}return i=np.toBounds([a,l,h,c]),t.corners.left=i.left,t.corners.right=i.right,t.corners.top=i.top,t.corners.bottom=i.bottom,t.corners.center=i.center,t.corners.width=i.width,t.corners.height=i.height,i}function gb(t,e,i,n){var r={},o="properties";if(t){i=t.propName;var s=t[o]||t,a=[],l=[];if((a=a.concat(Object.keys(s))).push("version"),i){var h=Lb(e);l=h?h(i):[],a=a.concat(l)}var c=function(t){switch(t){case"nodes":case"children":return["inEdges","outEdges","parentId","processId","nodeId","umlIndex","isPhase","isLane"];case"connectors":return["parentId"];case"annotation":case"annotations":return["nodeId"];case"shape":return["hasHeader"]}return[]}(i);a=a.concat(c),n&&(a=function(t,e){var i=[];return e instanceof Lv?i=["width","height","offsetX","offsetY","container","visible","horizontalAlignment","verticalAlignment","backgroundColor","borderColor","borderWidth","rotateAngle","minHeight","minWidth","maxHeight","maxWidth","pivot","margin","flip","wrapper","constraints","style","annotations","ports","isExpanded","expandIcon"]:e instanceof Gf?i=["constraints","sourcePadding","targetPadding","cornerRadius","flip","type","targetDecorator","sourceDecorator","sourceID","shape","bridgeSpace","annotations","segments","hitPadding","tooltip","previewSize","dragSize","style","sourcePortID","targetID","targetPortID","visible"]:e instanceof Ef?i=["height","width","shape","style","pivot","pathData"]:e instanceof $y||e instanceof Vy?(i.push("shape"),e instanceof ov?i.push("cornerRadius"):e instanceof Text?i.push("margin"):e instanceof Image?(i.push("align"),i.push("scale")):e instanceof ev?i.push("scale"):e instanceof mv?(i.push("activity"),i.push("annotations")):e instanceof Vy&&(i.push("borderColor"),i.push("borderWidth"),i.push("cornerRadius"),i.push("fill"))):e instanceof fv?i.push("subProcess"):e instanceof hv?(i.push("call"),i.push("compensation"),i.push("loop")):e instanceof uv?(i.push("adhoc"),i.push("boundary"),i.push("compensation"),i.push("loop"),i.push("processes")):e instanceof du?(i.push("height"),i.push("width"),i.push("visibility"),i.push("horizontalAlignment"),i.push("verticalAlignment"),i.push("shape")):e instanceof mu?(i.push("constraints"),i.push("height"),i.push("horizontalAlignment"),i.push("rotateAngle"),i.push("template"),i.push("verticalAlignment"),i.push("visibility"),i.push("width"),i.push("margin")):e instanceof Np?(i.push("left"),i.push("right"),i.push("top"),i.push("bottom")):e instanceof Xp&&(i=["strokeWidth","strokeDashArray","opacity","gradient","fontSize","fontFamily","textOverflow","textDecoration","whiteSpace","textWrapping","textAlign","italic","bold"]),e instanceof Gp&&(i.push("strokeColor"),i.push("color")),t=t.concat(i)}(a,t));for(var d=0,p=a;d<p.length;d++){var u=p[d];if("historyManager"!==u)if("wrapper"!==u){!(!t[u]||!t.hasOwnProperty("observers"))||(t[u]instanceof Array?r[u]=mb(-1===c.indexOf(u)&&t[o]?t[o][u]:t[u],e,u,n):t[u]instanceof Array==!1&&t[u]instanceof HTMLElement?r[u]=t[u].cloneNode(!0).innerHtml:t[u]instanceof Array==!1&&t[u]instanceof Object?r[u]=gb(-1===c.indexOf(u)&&t[o]?t[o][u]:t[u],void 0,void 0,n):r[u]=t[u])}else t[u]&&(r[u]={actualSize:{width:t[u].actualSize.width,height:t[u].actualSize.height},offsetX:t[u].offsetX,offsetY:t[u].offsetY})}}return r}function mb(t,e,i,n){var r;if(t){r=[];for(var o=0;o<t.length;o++)t[o]instanceof Array?r.push(t[o]):t[o]instanceof Object?r.push(gb(t[o],e,i,n)):r.push(t[o])}return r}function yb(t,e){if(t){e||(e={properties:{}});for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];if(t[r]instanceof Array){var o=vb(t[r],e.properties[r]);e.properties[r]&&e.properties[r].length||(e[r]=o)}else if(t[r]instanceof Array==!1&&t[r]instanceof HTMLElement)e[r]=t[r].cloneNode(!0).innerHtml;else if(t[r]instanceof Array==!1&&t[r]instanceof Object){var s=yb(t[r],e.properties[r]);s.properties&&!Object.keys(s.properties).length&&delete s.properties,e[r]=s}else e[r]=void 0!==e.properties[r]?e[r]:t[r]}}return e}function vb(t,e){var i=[],n=!1;e||(e=[]),e.length||(n=!0);for(var r=0;r<t.length;r++)if(t[r]instanceof Array){vb(t[r],e[r]);n&&i.push(vb)}else if(t[r]instanceof Object){var o=yb(t[r],e[r]);n&&i.push(o)}else i.push(t[r]);return i}function bb(t){var e="";switch(t){case"Center":e="center";break;case"Left":e="left";break;case"Right":e="right"}return e}function wb(t){var e="";switch(t){case"Wrap":e="breakall";break;case"NoWrap":e="keepall";break;case"WrapWithOverflow":e="normal";break;case"LineThrough":e="line-through"}return e}function Sb(t,e){window.measureElement.style.visibility="visible";var i=Dv(window.measureElement.children[2])[1];i.textContent=t,ob(i,"font-size:"+e.fontSize+"px; font-family:"+e.fontFamily+";font-weight:"+(e.bold?"bold":"normal"));var n=i.getBBox().width;return window.measureElement.style.visibility="hidden",n}function xb(t,e){return(t+e)/2}function Cb(t,e){var i,n=0,r=0,o=0,s="";i=t.length;var a=0;do{o>0&&(n=r),r=Math.floor(xb(n,i)),o=Sb(s+=t.substr(n,r),e)}while(o<=e.width);for(s=s.substr(0,n),a=n;a<i;a++)if((o=Sb(s+=t[a],e))>=e.width){t=t.substr(0,s.length-1);break}return"Ellipsis"===e.textOverflow?(t=t.substr(0,t.length-3),t+="..."):t=t.substr(0,t.length),t}function Pb(t,e){if("NoWrap"===e&&"PreserveAll"===t)return"pre";var i="";switch(t){case"CollapseAll":i="nowrap";break;case"CollapseSpace":i="pre-line";break;case"PreserveAll":i="pre-wrap"}return i}function Ob(t,e){var i=op();ap(i,e,0,0);var n=sp(i,{x:0,y:0}),r=sp(i,{x:t.width,y:0}),o=sp(i,{x:0,y:t.height}),s=sp(i,{x:t.width,y:t.height}),a=Math.min(n.x,r.x,o.x,s.x),l=Math.min(n.y,r.y,o.y,s.y),h=Math.max(n.x,r.x,o.x,s.x),c=Math.max(n.y,r.y,o.y,s.y);return new Wd(h-a,c-l)}function Eb(t,e,i,n){if(0!==t){var r=op();return ap(r,t,e,i),sp(r,n)}return n}function Lb(t){return void 0!==t&&"string"==typeof t&&(t=R(t,window)),t}var Ib=function(){function t(){}return t.getContext=function(t){return t.getContext("2d")},t.setCanvasSize=function(t,e,i){t&&(t.setAttribute("width",e.toString()),t.setAttribute("height",i.toString()))},t.prototype.renderGradient=function(t,e,i,n){var r,o,s;if("None"!==t.gradient.type){for(var a=0;a<t.gradient.stops.length;a++)r=void 0!==r?t.gradient.stops[a].offset:Math.max(r,t.gradient.stops[a].offset),o=void 0!==o?t.gradient.stops[a].offset:Math.min(o,t.gradient.stops[a].offset);if("Linear"===t.gradient.type){var l=t.gradient;s=e.createLinearGradient(i+l.x1,n+l.y1,i+l.x2,n+l.y2)}else{var h=t.gradient;s=e.createRadialGradient(i+h.fx,n+h.fy,0,i+h.cx,n+h.cy,h.r)}for(a=0;a<t.gradient.stops.length;a++){var c=t.gradient.stops[a],d=o<0?(r+c.offset)/(2*r):c.offset/r;s.addColorStop(d,c.color)}e.fillStyle=s}return e},t.prototype.renderShadow=function(e,i,n){void 0===n&&(n=null);var r=t.getContext(i);r.save(),r.beginPath(),r.strokeStyle=r.fillStyle=e.shadow.color,r.globalAlpha=e.shadow.opacity;var o=qd.transform({x:0,y:0},e.shadow.angle,e.shadow.distance),s=e.x+o.x,a=e.y+o.y,l=s+e.width*e.pivotX,h=a+e.height*e.pivotY;this.rotateContext(i,e.angle,l,h),n?(r.translate(s,a),this.renderPath(i,e,n),r.translate(-s,-a)):(r.rect(s,a,e.width,e.height),r.fillRect(s,a,e.width,e.height)),r.fill(),r.stroke(),r.closePath(),r.restore()},t.createCanvas=function(t,e,i){var n=Jv("canvas",{id:t});return this.setCanvasSize(n,e,i),n},t.prototype.setStyle=function(e,i){var n=t.getContext(e);"none"===i.fill&&(i.fill="transparent"),"none"===i.stroke&&(i.stroke="transparent"),n.strokeStyle=i.stroke,n.lineWidth=i.strokeWidth,0===i.strokeWidth&&(n.strokeStyle="transparent"),n.globalAlpha=i.opacity;var r=[];i.dashArray&&(r=this.parseDashArray(i.dashArray)),n.setLineDash(r),i.gradient&&"None"!==i.gradient.type?this.renderGradient(i,n,0,0):n.fillStyle=i.fill},t.prototype.rotateContext=function(e,i,n,r){var o=t.getContext(e);o.translate(n,r),o.rotate(i*Math.PI/180),o.translate(-n,-r)},t.prototype.setFontStyle=function(e,i){var n=t.getContext(e),r="";i.italic&&(r+="italic "),i.bold&&(r+="bold "),r+=i.fontSize+"px ",r+=i.fontFamily,n.font=r},t.prototype.parseDashArray=function(t){for(var e=[],i=-1!==t.indexOf(" ")?" ":",",n=0,r=t.split(i);n<r.length;n++){var o=r[n];e.push(Number(o))}return e},t.prototype.drawRectangle=function(e,i){if(!0===i.visible)if(i.cornerRadius)i.data=function(t,e,i){var n,r,o,s="",a=[{x:0+t,y:0},{x:0+i-t,y:0},{x:0+i,y:0+t},{x:0+i,y:0+e-t},{x:0+i-t,y:0+e},{x:0+t,y:0+e},{x:0,y:0+e-t},{x:0,y:0+t}],l=[{x:0+i,y:0},{x:0+i,y:0+e},{x:0,y:0+e},{x:0,y:0}],h=0;for(s="M"+a[0].x+" "+a[0].y,o=0;o<a.length;o+=2)s+="L"+(n=a[o+1]).x+" "+n.y,r=a[o+2]||a[0],s+="Q"+l[h].x+" "+l[h].y+" "+r.x+" "+r.y,h++;return s}(i.cornerRadius,i.height,i.width),this.drawPath(e,i);else{var n=t.getContext(e);i.shadow&&this.renderShadow(i,e),n.save(),n.beginPath();i.cornerRadius;var r=i.x+i.width*i.pivotX,o=i.y+i.height*i.pivotY;this.rotateContext(e,i.angle,r,o),this.setStyle(e,i),n.rect(i.x,i.y,i.width,i.height),n.fillRect(i.x,i.y,i.width,i.height),n.fill(),n.stroke(),n.closePath(),n.restore()}},t.prototype.drawPath=function(e,i){var n=[];n=Zd(n=Xd(i.data)),i.shadow&&this.renderShadow(i,e,n);var r=t.getContext(e);r.save(),r.beginPath();var o=i.y+i.height*i.pivotY,s=i.x+i.width*i.pivotX;"Horizontal"===i.flip||"Vertical"===i.flip?(r.translate(i.x+i.width/2,i.y+i.height/2),r.rotate(-i.angle*Math.PI/180),r.translate(-i.x-i.width/2,-i.y-i.height/2)):this.rotateContext(e,i.angle,s,o),this.setStyle(e,i),r.translate(i.x,i.y),"Horizontal"===i.flip?(r.scale(-1,1),r.translate(-1*i.width,0)):"Vertical"===i.flip?(r.scale(1,-1),r.translate(0,-1*i.height)):"Both"===i.flip&&(r.scale(-1,-1),r.translate(-1*i.width,-1*i.height)),this.renderPath(e,i,n),r.fill(),r.translate(-i.x,-i.y),r.stroke(),r.restore()},t.prototype.renderPath=function(e,i,n){if(!0===i.visible){var r,o=t.getContext(e),s=void 0,a=void 0,l=void 0,h=void 0,c=void 0,d=void 0,p=void 0,u=void 0,f=void 0,g=n;for(p=0,u=0,f=0,r=g.length;f<r;++f){var m=g[f],y=m.command;switch("x1"in m&&(l=m.x1),"x2"in m&&(c=m.x2),"y1"in m&&(h=m.y1),"y2"in m&&(d=m.y2),"x"in m&&(p=m.x),"y"in m&&(u=m.y),y){case"M":o.moveTo(p,u),m.x=p,m.y=u;break;case"L":o.lineTo(p,u),m.x=p,m.y=u;break;case"C":o.bezierCurveTo(l,h,c,d,p,u),m.x=p,m.y=u,m.x1=l,m.y1=h,m.x2=c,m.y2=d;break;case"Q":o.quadraticCurveTo(l,h,p,u),m.x=p,m.y=u,m.x1=l,m.y1=h;break;case"A":var v={x:s,y:a},b=m.r1,w=m.r2,S=m.angle*(Math.PI/180),x=m.largeArc,C=m.sweep,P={x:p,y:u},O={x:Math.cos(S)*(v.x-P.x)/2+Math.sin(S)*(v.y-P.y)/2,y:-Math.sin(S)*(v.x-P.x)/2+Math.cos(S)*(v.y-P.y)/2},E=Math.pow(O.x,2)/Math.pow(b,2)+Math.pow(O.y,2)/Math.pow(w,2);E>1&&(b*=Math.sqrt(E),w*=Math.sqrt(E));var L=Math.pow(w,2)*Math.pow(O.x,2),I=(x===C?-1:1)*Math.sqrt((Math.pow(b,2)*Math.pow(w,2)-Math.pow(b,2)*Math.pow(O.y,2)-L)/(Math.pow(b,2)*Math.pow(O.y,2)+Math.pow(w,2)*Math.pow(O.x,2)));isNaN(I)&&(I=0);var T={x:I*b*O.y/w,y:I*-w*O.x/b},A={x:(v.x+P.x)/2+Math.cos(S)*T.x-Math.sin(S)*T.y,y:(v.y+P.y)/2+Math.sin(S)*T.x+Math.cos(S)*T.y},B=this.a([1,0],[(O.x-T.x)/b,(O.y-T.y)/w]),k=[(O.x-T.x)/b,(O.y-T.y)/w],M=[(-O.x-T.x)/b,(-O.y-T.y)/w],D=this.a(k,M);this.r(k,M)<=-1&&(D=Math.PI),this.r(k,M)>=1&&(D=0);var R=B+(C?1:-1)*(D/2);Math.cos(R),Math.sin(R);if(m.centp=A,m.xAxisRotation=S,m.rx=b,m.ry=w,m.a1=B,m.ad=D,m.sweep=C,null!=o){var z=b>w?b:w,j=b>w?1:b/w,N=b>w?w/b:1;o.save(),o.translate(A.x,A.y),o.rotate(S),o.scale(j,N),o.arc(0,0,z,B,B+D,!C),o.scale(1/j,1/N),o.rotate(-S),o.translate(-A.x,-A.y),o.restore()}break;case"Z":case"z":o.closePath(),p=s,u=a}s=p,a=u}}},t.prototype.drawText=function(e,i,n,r,o,s,a){if(i.content&&!0===i.visible){var l=t.getContext(e);l.save(),this.setStyle(e,i),s&&(i.fontSize*=s);var h=i.x+i.width*i.pivotX,c=i.y+i.height*i.pivotY;this.rotateContext(e,i.angle,h,c),this.setFontStyle(e,i);var d,p=0;d=i.childNodes;var u=i.wrapBounds;if(l.fillStyle=i.color,u){var f=this.labelAlign(i,u,d);for(p=0;p<d.length;p++){var g=d[p];g.x=lb(g,d,p,i);var m=f.x+(s?g.x*s:g.x)-u.x,y=f.y+(s?g.dy*s:g.dy)*p+.8*i.fontSize;if(u.width>i.width&&"Wrap"!==i.textOverflow&&"NoWrap"===i.textWrapping&&(g.text=Cb(g.text,i)),"Clip"!==i.textOverflow&&"Ellipsis"!==i.textOverflow||"Wrap"!==i.textWrapping)l.fillText(g.text,m,y);else if(y<a.actualSize.height+a.bounds.y){if("Ellipsis"===i.textOverflow&&d[p+1]){var v=d[p+1];f.y+v.dy*(p+1)+.8*i.fontSize>a.actualSize.height+a.bounds.y&&(g.text=g.text.slice(0,g.text.length-3),g.text=g.text.concat("..."))}l.fillText(g.text,m,y)}if("Underline"===i.textDecoration||"Overline"===i.textDecoration||"LineThrough"===i.textDecoration){var b=m,w=void 0,S=m+l.measureText(g.text).width,x=void 0;switch(i.textDecoration){case"Underline":w=y+2,x=y+2;break;case"Overline":w=f.y+g.dy*p,x=f.y+g.dy*p;break;case"LineThrough":w=(y+f.y+g.dy*p)/2+2,x=(y+f.y+g.dy*p)/2+2}l.beginPath(),l.moveTo(b,w),l.lineTo(S,x),l.strokeStyle=i.color,l.lineWidth=.08*i.fontSize,l.globalAlpha=i.opacity,l.stroke()}}}l.restore()}},t.prototype.loadImage=function(t,e,i,n,r){this.rotateContext(i,e.angle,n,r);var o=new Image;o.src=e.source,this.image(t,o,e.x,e.y,e.width,e.height,e)},t.prototype.drawImage=function(e,i,n,r){var o=this;if(i.visible){var s=t.getContext(e);s.save();var a=i.x+i.width*i.pivotX,l=i.y+i.height*i.pivotY,h=new Image;h.src=i.source;var c=s.canvas.id.split("_");c[c.length-1];r?h.onload=function(){o.loadImage(s,i,e,a,l)}:this.loadImage(s,i,e,a,l),s.restore()}},t.prototype.image=function(t,e,i,n,r,o,s){t.beginPath();var a=e.width,l=e.height,h=r,c=o,d=0,p=0;if(s&&"None"!==s.alignment){var u=s.alignment.toLowerCase().substr(1,3),f=s.alignment.toLowerCase().substr(5,3);if("Slice"===s.scale){var g=function(){d=h,p=l*h/a},m=function(){d=a*c/l,p=c};h>c?(g(),c>p&&m()):h===c?a>l?m():g():(m(),h>d&&g());var y=this.getSliceOffset(u,d,h,a),v=this.getSliceOffset(f,p,c,l),b=a-y,w=l-v,S=d-y*(d/a),x=p-v*(p/l),C=Jv("canvas",{width:r.toString(),height:o.toString()});C.getContext("2d").drawImage(e,y,v,b,w,0,0,S,x),t.drawImage(C,i,n,r,o)}else if("Meet"===s.scale){var P=l/a,O=c/h;d=O>P?h:c/P,p=O>P?h*P:c,i+=this.getMeetOffset(u,d,h),n+=this.getMeetOffset(f,p,c),t.drawImage(e,0,0,a,l,i,n,d,p)}else t.drawImage(e,i,n,r,o)}else if("None"!==s.flip){var E=1,L=1;"Horizontal"!==s.flip&&"Both"!==s.flip||(i=-i,r=-r,E=-1),"Vertical"!==s.flip&&"Both"!==s.flip||(n=-n,o=-o,L=-1),t.scale(E,L),t.drawImage(e,i,n,r,o)}else t.drawImage(e,i,n,r,o);t.closePath()},t.prototype.getSliceOffset=function(t,e,i,n){switch(t){case"min":return 0;case"mid":return(e-i)/2*n/e;case"max":return(e-i)*n/e;default:return 0}},t.prototype.getMeetOffset=function(t,e,i){var n=Math.max(e,i),r=Math.min(e,i);switch(t){case"min":return 0;case"mid":return(n-r)/2;case"max":return n-r;default:return 0}},t.prototype.m=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},t.prototype.r=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(this.m(t)*this.m(e))},t.prototype.a=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(this.r(t,e))},t.prototype.labelAlign=function(t,e,i){var n=new Wd(e.width,i.length*(1.2*t.fontSize)),r={x:0,y:0},o=t.x,s=t.y,a=.5*t.width,l=.5*t.height;return"left"===t.textAlign?a=0:"center"===t.textAlign?a=e.width>t.width&&("Ellipsis"===t.textOverflow||"Clip"===t.textOverflow)&&"NoWrap"===t.textWrapping?0:.5*t.width:"right"===t.textAlign&&(a=1*t.width),r.x=o+a+(e?e.x:0),r.y=s+l-n.height/2,r},t}(),Tb=function(){function t(){}return t.prototype.renderShadow=function(t,e,i,n){void 0===i&&(i=null);var r,o,s=qd.transform({x:0,y:0},t.shadow.angle,t.shadow.distance),a=t.x+s.x,l=t.y+s.y;t.width,t.pivotX,t.height,t.pivotY;n&&(o=n.getElementById(e.id+"_shadow")),o||(r=i?"path":"rect",o=document.createElementNS("http://www.w3.org/2000/svg",r),e.appendChild(o));var h={id:e.id+"_shadow",fill:t.shadow.color,stroke:t.shadow.color,opacity:t.shadow.opacity.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")translate("+(t.x+s.x)+","+(t.y+s.y)+")"};if(n){var c=n.getElementById(e.id);c&&c.insertBefore(o,c.firstChild)}rb(o,h),i?i&&this.renderPath(o,t,i):rb(o,{width:t.width,height:t.height})},t.prototype.parseDashArray=function(t){return[]},t.prototype.drawRectangle=function(t,e,i,n,r,o,s){var a,l,h;e.shadow&&!n&&this.renderShadow(e,t,void 0,o),a=e.id===t.id?e.id+"_container":e.id,o&&(l=o.getElementById(a)),l&&!r||(l=document.createElementNS("http://www.w3.org/2000/svg","rect"),t.appendChild(l)),o&&!e.shadow&&(h=o.getElementById(e.id+"_groupElement_shadow"))&&h.parentNode.removeChild(h);var c={id:a,x:e.x.toString(),y:e.y.toString(),width:e.width.toString(),height:e.height.toString(),visibility:e.visible?"visible":"hidden",transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")",rx:e.cornerRadius||0,ry:e.cornerRadius||0,opacity:e.opacity,"aria-label":s||""};e.class&&(c.class=e.class);s||(c["pointer-events"]="none"),rb(l,c),this.setSvgStyle(l,e,i)},t.prototype.updateSelectionRegion=function(t,e){var i,n;i=t.parentNode.getElementById(e.id),n={id:e.id,x:e.x.toString(),y:e.y.toString(),width:e.width.toString(),height:e.height.toString(),transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")",class:"e-diagram-selected-region"},i||(i=document.createElementNS("http://www.w3.org/2000/svg","rect"),t.appendChild(i)),this.setSvgStyle(i,e),rb(i,n)},t.prototype.createGElement=function(t,e){return Qv(t,e)},t.prototype.drawLine=function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","line");this.setSvgStyle(i,e);var n=e.x+e.width*e.pivotX,r=e.y+e.height*e.pivotY,o={id:e.id,x1:e.startPoint.x+e.x,y1:e.startPoint.y+e.y,x2:e.endPoint.x+e.x,y2:e.endPoint.y+e.y,stroke:e.stroke,"stroke-width":e.strokeWidth.toString(),opacity:e.opacity.toString(),transform:"rotate("+e.angle+" "+n+" "+r+")",visibility:e.visible?"visible":"hidden"};e.class&&(o.class=e.class),rb(i,o),t.appendChild(i)},t.prototype.drawCircle=function(t,e,i,n){var r=document.createElementNS("http://www.w3.org/2000/svg","circle");this.setSvgStyle(r,e);var o=e.class||"";i||(o+=" e-disabled");var s={id:e.id,cx:e.centerX,cy:e.centerY,r:e.radius,visibility:e.visible?"visible":"hidden",class:o,"aria-label":n?n["aria-label"]:""};r.style.display=e.visible?"block":"none",rb(r,s),t.appendChild(r)},t.prototype.drawPath=function(t,e,i,n,r,o){var s=Math.floor(10*Math.random()+1);t.id,s.toString();var a,l,h=[];h=Zd(h=Xd(e.data)),e.shadow&&this.renderShadow(e,t,h,r),r&&!e.shadow&&(a=r.getElementById(e.id+"_groupElement_shadow"))&&a.parentNode.removeChild(a),r&&(l=r.getElementById(e.id)),l&&!n||(l=document.createElementNS("http://www.w3.org/2000/svg","path"),t.appendChild(l)),this.renderPath(l,e,h);var c={id:e.id,transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")translate("+e.x+","+e.y+")",visibility:e.visible?"visible":"hidden",opacity:e.opacity,"aria-label":o||""};e.class&&(c.class=e.class),rb(l,c),this.setSvgStyle(l,e,i)},t.prototype.renderPath=function(t,e,i){var n,r,o,s,a,l,h,c,d=i,p="";for(a=0,l=0,c=0,h=d.length;c<h;++c){var u=d[c],f=u.command;switch("x1"in u&&(n=u.x1),"x2"in u&&(o=u.x2),"y1"in u&&(r=u.y1),"y2"in u&&(s=u.y2),"x"in u&&(a=u.x),"y"in u&&(l=u.y),f){case"M":p=p+"M"+a.toString()+","+l.toString()+" ";break;case"L":p=p+"L"+a.toString()+","+l.toString()+" ";break;case"C":p=p+"C"+n.toString()+","+r.toString()+","+o.toString()+","+s.toString()+",",p+=a.toString()+","+l.toString()+" ";break;case"Q":p=p+"Q"+n.toString()+","+r.toString()+","+a.toString()+","+l.toString()+" ";break;case"A":p=p+"A"+u.r1.toString()+","+u.r2.toString()+","+u.angle.toString()+",",p+=u.largeArc.toString()+","+u.sweep+","+a.toString()+","+l.toString()+" ";break;case"Z":case"z":p+="Z "}}t.setAttribute("d",p)},t.prototype.setSvgFontStyle=function(t,e){t.style.fontStyle=e.italic?"italic":"normal",t.style.fontWeight=e.bold?"bold":"normal",t.style.fontSize=e.fontSize.toString()+"px",t.style.fontFamily=e.fontFamily},t.prototype.drawText=function(t,e,i,n,r,o,s){if(void 0!==e.content){var a=void 0,l=void 0,h=void 0,c=void 0,d=void 0,p=void 0,u=0,f=0,g=0,m=void 0;if(i&&(m=i.getElementById(e.id+"_text")),m){if(e.doWrap)for(;m.firstChild;)m.removeChild(m.firstChild)}else e.doWrap=!0,m=document.createElementNS("http://www.w3.org/2000/svg","text"),"pre-wrap"===e.whiteSpace&&m.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),t.appendChild(m);var y=e.x+e.width*e.pivotX,v=e.y+e.height*e.pivotY,b=0;if(e.doWrap||"Wrap"!==e.textOverflow){var w=document.getElementById(e.id+"_text");for(w&&(w.innerHTML=""),this.setSvgStyle(m,e,r),this.setSvgFontStyle(m,e),a=document.createTextNode(e.content),l=e.childNodes,h=e.wrapBounds,c=this.svgLabelAlign(e,h,l),h.width>e.width&&"Wrap"!==e.textOverflow&&"NoWrap"===e.textWrapping&&(l[0].text=Cb(e.content,e)),g=0;g<l.length;g++)if(p=document.createElementNS("http://www.w3.org/2000/svg","tspan"),a=document.createTextNode(l[g].text),(d=l[g]).x=lb(d,l,g,e),u=c.x+d.x-h.x,f=c.y+d.dy*g+.8*e.fontSize,"Clip"!==e.textOverflow&&"Ellipsis"!==e.textOverflow||"WrapWithOverflow"!==e.textWrapping&&"Wrap"!==e.textWrapping||!s)this.setText(m,p,d,a,u,f);else{var S=e.isHorizontalLane?s.actualSize.width:s.actualSize.height;if(!(f<S))break;if("Ellipsis"===e.textOverflow&&l[g+1]){var x=l[g+1];c.y+x.dy*(g+1)+.8*e.fontSize>S&&(d.text=d.text.slice(0,d.text.length-3),d.text=d.text.concat("..."),a.data=d.text)}this.setText(m,p,d,a,u,f),b+=d.dy}}b&&e.isHorizontalLane&&(y=e.parentOffsetX+e.pivotX,v=e.parentOffsetY+e.pivotY,e.y=e.parentOffsetY-b*e.pivotY+.5),e.textDecoration&&"LineThrough"===e.textDecoration&&(e.textDecoration=wb(e.textDecoration)),rb(m,{id:e.id+"_text",fill:e.color,visibility:e.visible?"visible":"hidden","text-decoration":e.textDecoration,transform:"rotate("+e.angle+","+y+","+v+")translate("+e.x+","+e.y+")",opacity:e.opacity,"aria-label":n||""})}},t.prototype.setText=function(t,e,i,n,r,o){rb(e,{x:r.toString(),y:o.toString()}),t.setAttribute("fill",i.text),e.appendChild(n),t.appendChild(e)},t.prototype.drawImage=function(t,e,i,n){var r;e.id;i&&(r=i.getElementById(e.id+"image")),r||(r=document.createElementNS("http://www.w3.org/2000/svg","image"),t.appendChild(r));var o=new Image;o.src=e.source;var s="None"!==e.scale?e.scale:"";$()&&"None"===e.alignment&&"Stretch"===s&&(s="");var a=e.alignment,l=a.charAt(0).toLowerCase()+a.slice(1);s&&(l+=" "+s.charAt(0).toLowerCase()+s.slice(1)),rb(r,{id:e.id+"image",x:e.x.toString(),y:e.y.toString(),transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")",width:e.width.toString(),visibility:e.visible?"visible":"hidden",height:e.height.toString(),preserveAspectRatio:l,opacity:(e.opacity||1).toString()}),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o.src.toString())},t.prototype.drawHTMLContent=function(t,e,i,n,r){var o,s;if(e){var a=void 0,l=void 0,h=void 0;for(a=0;a<e.childNodes.length;a++)for(h=e.childNodes[a],l=0;l<h.childNodes.length;l++)if(h.childNodes[l].id===t.id+"_html_element"){o=h.childNodes[l];break}}if(!o){if(!(s=e.querySelector("#"+t.id+"_html_element")||e.querySelector("#"+t.nodeId+"_html_element")))s=Jv("div",{id:t.nodeId+"_html_element",class:"foreign-object"});o=Jv("div",{id:t.id+"_html_element",class:"foreign-object"}),t.isTemplate?o.appendChild(t.template):o.appendChild(t.template.cloneNode(!0)),void 0!==r&&e.childNodes.length>r&&e.insertBefore(o,e.childNodes[r]),s.appendChild(o),e.appendChild(s)}var c=ub(t).topLeft;o.setAttribute("style","height:"+t.actualSize.height+"px; width:"+t.actualSize.width+"px;left:"+c.x+"px; top:"+c.y+"px;position:absolute;transform:rotate("+(t.rotateAngle+t.parentTransform)+"deg);pointer-events:"+(n?"all":"none")+";visibility:"+(t.visible?"visible":"hidden")+";opacity:"+t.style.opacity+";")},t.prototype.drawNativeContent=function(t,e,i,n,r){var o,s;r&&(o=r.getElementById(t.id+"_native_element"),s=r.getElementById(t.id+"_clip")),o||((o=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id",t.id+"_native_element"),o.appendChild(t.template.cloneNode(!0)),e.appendChild(o)),s&&o.removeChild(s),o.setAttribute("style","visibility:"+(t.visible?"visible":"hidden")+";opacity:"+t.style.opacity+";"),this.setNativTransform(t,o,i,n),"Slice"===t.scale&&this.drawClipPath(t,o,i,n,r),rb(o,t.description?{"aria-label":t.description}:{})},t.prototype.setNativTransform=function(t,e,i,n){var r=0!==t.contentSize.width?t.contentSize.width:1,o=0!==t.contentSize.height?t.contentSize.height:1,s=t.templatePosition.x*n/r,a=t.templatePosition.y*i/o;e.setAttribute("transform","rotate("+t.parentTransform+","+t.offsetX+","+t.offsetY+") translate("+(t.offsetX-s-n*t.pivot.x)+","+(t.offsetY-a-i*t.pivot.y)+") scale("+n/r+","+i/o+")")},t.prototype.drawClipPath=function(t,e,i,n,r){var o=t.contentSize.width,s=t.contentSize.height,a=(t.actualSize.width,t.actualSize.height,t.width/(n/o)),l=t.height/(i/s),h=t.templatePosition.x+(t.width>=t.height?0:(o-a)/2),c=t.templatePosition.y+(t.height>=t.width?0:(s-l)/2),d=r.getElementById(t.id+"_clip");(d=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id",t.id+"_clip"),e.appendChild(d);var p=r.getElementById(t.id+"_clip_rect");return p=document.createElementNS("http://www.w3.org/2000/svg","rect"),d.appendChild(p),rb(p,{id:t.id+"_clip_rect",width:a.toString(),height:l.toString(),x:h.toString(),y:c.toString()}),Ny()?e.setAttribute("clip-path","url("+location.protocol+"//"+location.host+location.pathname+"#"+t.id+"_clip)"):e.setAttribute("clip-path","url(#"+t.id+"_clip)"),e},t.prototype.renderGradient=function(t,e,i){var n,r,o,s,a,l=Xv(i),h=l.getElementById(i+"gradient_pattern");if(h||(h=Qv("defs",{id:i+"gradient_pattern"}),l.insertBefore(h,l.firstChild)),dy(e.id),"None"!==t.gradient.type){for(var c=0;c<t.gradient.stops.length;c++)n=n?Math.max(n,t.gradient.stops[c].offset):t.gradient.stops[c].offset,r=r?Math.min(r,t.gradient.stops[c].offset):t.gradient.stops[c].offset;"Linear"===t.gradient.type?((a=t.gradient).id=e.id+"_linear",o=this.createLinearGradient(a),h.appendChild(o)):((s=t.gradient).id=e.id+"_radial",o=this.createRadialGradient(s),h.appendChild(o));for(c=0;c<t.gradient.stops.length;c++){var d=t.gradient.stops[c],p=r<0?(n+d.offset)/(2*n):d.offset/n,u=document.createElementNS("http://www.w3.org/2000/svg","stop");rb(u,{offset:p.toString(),style:"stop-color:"+d.color}),o.appendChild(u)}}return o},t.prototype.createLinearGradient=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");return rb(e,{id:t.id,x1:t.x1+"%",y1:t.y1+"%",x2:t.x2+"%",y2:t.y2+"%"}),e},t.prototype.createRadialGradient=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","radialGradient");return rb(e,{id:t.id,cx:t.cx+"%",cy:t.cy+"%",r:t.r+"%",fx:t.fx+"%",fy:t.fy+"%"}),e},t.prototype.setSvgStyle=function(t,e,i){if(e.canApplyStyle||void 0===e.canApplyStyle){"none"===e.fill&&(e.fill="transparent"),"none"===e.stroke&&(e.stroke="transparent");var n=[],r=void 0;if(e.dashArray)n=(new Ib).parseDashArray(e.dashArray);if(e.gradient&&"None"!==e.gradient.type){var o=this.renderGradient(e,t,i);r=Ny()?"url("+location.protocol+"//"+location.host+location.pathname+"#"+o.id+")":"url(#"+o.id+")"}else r=e.fill;e.stroke&&t.setAttribute("stroke",e.stroke),void 0!==e.strokeWidth&&null!==e.strokeWidth&&t.setAttribute("stroke-width",e.strokeWidth.toString()),n&&t.setAttribute("stroke-dasharray",n.toString()||"none"),r&&t.setAttribute("fill",r)}},t.prototype.svgLabelAlign=function(t,e,i){var n=new Wd(e.width,i.length*(1.2*t.fontSize)),r={x:0,y:0},o=.5*t.width,s=.5*t.height;return"left"===t.textAlign?o=0:"center"===t.textAlign?o=e.width>t.width&&("Ellipsis"===t.textOverflow||"Clip"===t.textOverflow)&&"NoWrap"===t.textWrapping?0:.5*t.width:"right"===t.textAlign&&(o=1*t.width),r.x=0+o+(e?e.x:0),r.y=1.2+s-n.height/2,r},t}(),Ab=function(){function t(t,e,i){this.renderer=null,this.isSvgMode=!0,this.transform={x:0,y:0},this.diagramId=t,this.element=Hv(this.diagramId),this.svgRenderer=e,this.isSvgMode=i,this.renderer=i?new Tb:new Ib}return t.prototype.setCursor=function(t,e){t.style.cursor=e},t.prototype.setLayers=function(){this.iconSvgLayer=this.element.getElementsByClassName("e-ports-expand-layer")[0],this.adornerSvgLayer=this.element.getElementsByClassName("e-adorner-layer")[0],this.nativeSvgLayer=this.element.getElementsByClassName("e-native-layer")[0],this.diagramSvgLayer=this.element.getElementsByClassName("e-diagram-layer")[0]},t.prototype.getAdornerLayer=function(){return Wv(this.diagramId)},t.prototype.getParentSvg=function(t,e,i){return this.diagramId&&t&&t.id?t.id.split("_icon_content").length>1||t.id.split("_nodeport").length>1?this.iconSvgLayer:e&&"selector"===e?this.adornerSvgLayer:t instanceof lu?this.nativeSvgLayer:this.diagramSvgLayer:i},t.prototype.getParentElement=function(t,e,i,n){var r=e;if(i&&this.diagramId&&t&&t.id){t.id.split("_icon_content").length>1?(r=i.getElementById(this.diagramId+"_diagramExpander"),e=null):t.id.split("_nodeport").length>1?r=i.getElementById(this.diagramId+"_diagramPorts"):t instanceof lu?(r=i.getElementById(this.diagramId+"_nativeLayer"),e=null):r=i.getElementById(this.diagramId+"_diagramLayer");var o=this.getGroupElement(t,e||r,n);r=o.g,o.svg&&(i=o.svg)}return{g:r,svg:i}},t.prototype.getGroupElement=function(t,e,i){var n,r,o=this.getParentSvg(t);if(e&&o){if(o&&!(n=o.getElementById(t.id+"_groupElement"))&&o!==this.nativeSvgLayer){var s=this.nativeSvgLayer;n=s.getElementById(t.id+"_groupElement"),r=s}n||(n=this.svgRenderer.createGElement("g",{id:t.id+"_groupElement"}),void 0!==i&&e.childNodes.length>i?e.insertBefore(n,e.childNodes[i]):e.appendChild(n))}return{g:n,svg:r}},t.prototype.renderElement=function(t,e,i,n,r,o,s,a,l){t instanceof Kp?(!1,this.renderContainer(t,e,i,n,r,o,s,a,l)):t instanceof su?this.renderImageElement(t,e,n,r,s):t instanceof ru?this.renderPathElement(t,e,n,r,s,l):t instanceof Qp?this.renderTextElement(t,e,n,r,s):t instanceof lu?this.renderNativeElement(t,e,n,r,s):t instanceof vf?this.renderHTMLElement(t,e,i,n,r,s,a):this.renderRect(t,e,n,r,l)},t.prototype.drawSelectionRectangle=function(t,e,i,n,r,o){t=(t+o.tx)*o.scale,e=(e+o.ty)*o.scale;var s={width:i*o.scale,height:n*o.scale,x:t+.5,y:e+.5,fill:"transparent",stroke:"gray",angle:0,pivotX:.5,pivotY:.5,strokeWidth:1,dashArray:"6 3",opacity:1,visible:!0,id:r.id+"_selected_region"},a=this.getAdornerLayer();this.svgRenderer.updateSelectionRegion(a,s)},t.prototype.renderHighlighter=function(t,e,i){var n=t.actualSize.width||2,r=t.actualSize.height||2,o=t.offsetX-n*t.pivot.x,s=t.offsetY-r*t.pivot.y;o=(o+i.tx)*i.scale,s=(s+i.ty)*i.scale;var a={width:n*i.scale,height:r*i.scale,x:o,y:s,fill:"transparent",stroke:"#8CC63F",angle:t.rotateAngle,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:4,dashArray:"",opacity:1,cornerRadius:0,visible:!0,id:e.id+"_highlighter",class:"e-diagram-highlighter"};this.svgRenderer.drawRectangle(e,a,this.diagramId,void 0,void 0,e)},t.prototype.renderStackHighlighter=function(t,e,i,n,r,o,s){var a,l=t.actualSize.width||2,h=t.offsetX-l*t.pivot.x,c=t.actualSize.height||2,d=t.offsetY-c*t.pivot.y;h=(h+i.tx)*i.scale;var p=t.bounds,u="";if(d=(d+i.ty)*i.scale,n)if(o){a="M 0 0 L "+((m=l*i.scale)+2)+" 0 Z";var f=p.x,g=p.y;f=t.actualSize.width/Number(p.width?p.width:1)*i.scale,g=t.actualSize.height/Number(p.height?p.height:1)*i.scale;u=Kd($d(Xd("M7,4 L8,4 8,7 11,7 11,8 8,8 8,11 7,11 7,8 4,8 4,7 7,7 z M7.5,0.99999994C3.9160004,1 1,3.9160004 0.99999994,7.5 1,11.084 3.9160004,14 7.5,14 11.084,14 14,11.084 14,7.5 14,3.9160004 11.084,1 7.5,0.99999994 z M7.5,0 C11.636002,0 15,3.3639984 15,7.5 15,11.636002 11.636002,15 7.5,15 3.3640003,15 0,11.636002 0,7.5 0,3.3639984 3.3640003,0 7.5,0 z")),f+m+2,g-8,!1,p.x,p.y,0,0),r.y>=t.offsetY&&(d+=c)}else{var m;s&&r.y>=t.offsetY&&(d+=c),a="M -10 -10 L 0 0 Z M -10 10 L 0 0 Z M 0 0 L "+(m=l*i.scale)+" 0 Z M "+m+" 0 L "+(m+10)+" 10 Z L "+(m+10)+" -10 Z"}else a="M 10 -10 L 0 0 Z M -10 -10 L 0 0 Z M 0 0 L 0 "+(m=c*i.scale)+" Z M 0  "+m+" L -10  "+(m+10)+" Z L 10  "+(m+10)+" Z",r.x>=t.offsetX&&(h+=l);var y={data:a+u,width:l*i.scale,height:c*i.scale,x:h,y:d,fill:"transparent",stroke:"#8CC63F",angle:t.rotateAngle,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:1,dashArray:"",opacity:1,visible:!0,id:e.id+"_stack_highlighter",class:"e-diagram-highlighter"};this.svgRenderer.drawPath(e,y,this.diagramId)},t.prototype.drawLine=function(t,e){this.svgRenderer.drawLine(t,e)},t.prototype.drawPath=function(t,e){this.svgRenderer.drawPath(t,e,this.diagramId)},t.prototype.renderResizeHandle=function(t,e,i,n,r,o,s,a,l,h){var c=t.offsetX-t.actualSize.width*t.pivot.x,d=t.offsetY-t.actualSize.height*t.pivot.y,p=t.actualSize.height,u=t.actualSize.width;!h&&i&Sp.Rotate&&Eg(this.rendererActions)&&!Lg(this.rendererActions)&&(this.renderPivotLine(t,e,o,r,s),this.renderRotateThumb(t,e,o,r,s)),this.renderBorder(t,e,o,a,l,h);var f=t.actualSize.width*n,g=t.actualSize.height*n;l||!Eg(this.rendererActions)||Lg(this.rendererActions)||(f>=40&&g>=40&&(r&mp.ResizeNorthWest&&this.renderCircularHandle("resizeNorthWest",t,c,d,e,my(r,"ResizeNorthWest"),i&Sp.ResizeNorthWest,o,void 0,s,{"aria-label":"Thumb to resize the selected object on top left side direction"},void 0,"e-diagram-resize-handle e-northwest"),r&mp.ResizeNorthEast&&this.renderCircularHandle("resizeNorthEast",t,c+u,d,e,my(r,"ResizeNorthEast"),i&Sp.ResizeNorthEast,o,void 0,s,{"aria-label":"Thumb to resize the selected object on top right side direction"},void 0,"e-diagram-resize-handle e-northeast"),r&mp.ResizeSouthWest&&this.renderCircularHandle("resizeSouthWest",t,c,d+p,e,my(r,"ResizeSouthWest"),i&Sp.ResizeSouthWest,o,void 0,s,{"aria-label":"Thumb to resize the selected object on bottom left side direction"},void 0,"e-diagram-resize-handle e-southwest"),r&mp.ResizeSouthEast&&this.renderCircularHandle("resizeSouthEast",t,c+u,d+p,e,my(r,"ResizeSouthEast"),i&Sp.ResizeSouthEast,o,void 0,s,{"aria-label":"Thumb to resize the selected object on bottom right side direction"},void 0,"e-diagram-resize-handle e-southeast")),r&mp.ResizeNorth&&this.renderCircularHandle("resizeNorth",t,c+u/2,d,e,my(r,"ResizeNorth"),i&Sp.ResizeNorth,o,void 0,s,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-diagram-resize-handle e-north"),r&mp.ResizeSouth&&this.renderCircularHandle("resizeSouth",t,c+u/2,d+p,e,my(r,"ResizeSouth"),i&Sp.ResizeSouth,o,void 0,s,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-diagram-resize-handle e-south"),r&mp.ResizeWest&&this.renderCircularHandle("resizeWest",t,c,d+p/2,e,my(r,"ResizeWest"),i&Sp.ResizeWest,o,void 0,s,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-diagram-resize-handle e-west"),r&mp.ResizeEast&&this.renderCircularHandle("resizeEast",t,c+u,d+p/2,e,my(r,"ResizeEast"),i&Sp.ResizeEast,o,void 0,s,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-diagram-resize-handle e-east"))},t.prototype.renderEndPointHandle=function(t,e,i,n,r,o,s,a){var l,h,c=t.sourcePoint,d=t.targetPoint,p=t.wrapper;if(this.renderCircularHandle("connectorSourceThumb",p,c.x,c.y,e,my(n,"ConnectorSourceThumb"),i&Sp.ConnectorSource,r,o,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-endpoint-handle e-targetend"),this.renderCircularHandle("connectorTargetThumb",p,d.x,d.y,e,my(n,"ConnectorTargetThumb"),i&Sp.ConnectorTarget,r,s,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-endpoint-handle e-targetend"),a)if(("Straight"===t.type||"Bezier"===t.type)&&t.segments.length>0)for(l=0;l<t.segments.length-1;l++)h=t.segments[l],this.renderCircularHandle("segementThumb_"+(l+1),p,h.point.x,h.point.y,e,!0,i&Sp.ConnectorSource,r,o,null,null,l);else for(l=0;l<t.segments.length;l++){var u=t.segments[l];this.renderOrthogonalThumbs("orthoThumb_"+(l+1),p,u,e,my(n,"ConnectorSourceThumb"),r)}if("Bezier"===t.type)for(l=0;l<t.segments.length;l++){var f=t.segments[l],g=qd.isEmptyPoint(f.point1)?f.bezierPoint1:f.point1;this.renderCircularHandle("bezierPoint_"+(l+1)+"_1",p,g.x,g.y,e,my(n,"ConnectorSourceThumb"),i&Sp.ConnectorSource,r,void 0,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-bezier-handle e-source"),my(n,"ConnectorSourceThumb")&&this.renderBezierLine("bezierLine_"+(l+1)+"_1",p,e,f.points[0],qd.isEmptyPoint(f.point1)?f.bezierPoint1:f.point1,r),g=qd.isEmptyPoint(f.point2)?f.bezierPoint2:f.point2,this.renderCircularHandle("bezierPoint_"+(l+1)+"_2",p,g.x,g.y,e,my(n,"ConnectorTargetThumb"),i&Sp.ConnectorTarget,r,void 0,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-bezier-handle e-target"),my(n,"ConnectorTargetThumb")&&this.renderBezierLine("bezierLine_"+(l+1)+"_2",p,e,f.points[1],qd.isEmptyPoint(f.point2)?f.bezierPoint2:f.point2,r)}},t.prototype.renderOrthogonalThumbs=function(t,e,i,n,r,o){var s,a,l,h=0;for(h=0;h<i.points.length-1;h++)l=qd.distancePoints(i.points[h],i.points[h+1]),s=i.points[h].y.toFixed(2)===i.points[h+1].y.toFixed(2)?"horizontal":"vertical",a=!!(l>=50&&i.allowDrag),this.renderOrthogonalThumb(t+"_"+(h+1),e,(i.points[h].x+i.points[h+1].x)/2,(i.points[h].y+i.points[h+1].y)/2,n,a,s,o)},t.prototype.renderOrthogonalThumb=function(t,e,i,n,r,o,s,a){var l,h,c;"horizontal"===s?(l="M0,7 L15,0 L30,7 L15,14 z",h=-15,c=-7):(l="M7,0 L0,15 L7,30 L14,15 z",h=-7,c=-15);var d={x:(i+a.tx)*a.scale+h,y:(n+a.ty)*a.scale+c,angle:0,fill:"#e2e2e2",stroke:"black",strokeWidth:1,dashArray:"",data:l,width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:o,id:t};this.svgRenderer.drawPath(r,d,this.diagramId)},t.prototype.renderPivotLine=function(t,e,i,n,r){var o=t,s=!!(n&mp.Rotate);r&&(s=!1);var a=this.getBaseAttributes(o,i);a.fill="None",a.stroke="black",a.strokeWidth=1,a.dashArray="2,3",a.visible=s;var l=i.scale;a.x*=l,a.y*=l,a.width*=l,a.height*=l,a.id="pivotLine",a.class="e-diagram-pivot-line";var h={x:o.actualSize.width*o.pivot.x*l,y:-20},c={x:o.actualSize.width*o.pivot.x*l,y:0};a.startPoint=h,a.endPoint=c,this.svgRenderer.drawLine(e,a)},t.prototype.renderBezierLine=function(t,e,i,n,r,o){var s=this.getBaseAttributes(e,o);s.id=t,s.stroke="black",s.strokeWidth=1,s.dashArray="3,3",s.fill="None",s.class="e-diagram-bezier-line",s.x=0,s.y=0;var a=o.scale,l={x:(n.x+o.tx)*a,y:(n.y+o.ty)*a},h={x:(r.x+o.tx)*a,y:(r.y+o.ty)*a};s.startPoint=l,s.endPoint=h,this.svgRenderer.drawLine(i,s)},t.prototype.renderCircularHandle=function(t,e,i,n,r,o,s,a,l,h,c,d,p){var u=e,f=7,g={x:i,y:n};if(0!==u.rotateAngle||0!==u.parentTransform){var m=op();ap(m,u.rotateAngle+u.parentTransform,u.offsetX,u.offsetY),g=sp(m,g)}var y=this.getBaseAttributes(u);y.stroke="black",y.strokeWidth=1,void 0!==d?(f=5,y.id="segmentEnd_"+d,y.fill="#e2e2e2"):(f=7,y.fill=l?"#8CC63F":"white"),y.centerX=(g.x+a.tx)*a.scale,y.centerY=(g.y+a.ty)*a.scale,y.radius=f,y.angle=0,y.id=t,y.visible=o,y.class=p,l&&(y.class+=" e-connected"),h&&(y.visible=!1),this.svgRenderer.drawCircle(r,y,s,c)},t.prototype.renderBorder=function(t,e,i,n,r,o){var s=t,a=this.getBaseAttributes(s,i);a.x*=i.scale,a.y*=i.scale,a.width*=i.scale,a.height*=i.scale,a.fill="transparent",a.stroke="#097F7F",a.strokeWidth=1.2,a.dashArray="6,3",a.class="e-diagram-border",o&&(a.class+=" e-diagram-lane"),a.id="borderRect",a.id=this.rendererActions&Tp.DrawSelectorBorder?"borderRect_symbol":"borderRect",n||(a.class+=" e-disabled"),r&&(a.class+=" e-thick-border"),a.cornerRadius=0;var l=this.getParentSvg(t,"selector");this.svgRenderer.drawRectangle(e,a,this.diagramId,void 0,!0,l)},t.prototype.renderUserHandler=function(t,e,i,n){for(var r,o=t.wrapper,s=0,a=t.userHandles;s<a.length;s++){var l=a[s];r=!0,(l.disableConnectors&&t.connectors.length>0||l.disableNodes&&t.nodes.length>0)&&(r=!1);var h=document.getElementById(l.name+"_template_hiddenUserHandle");h&&(l.template=h.childNodes[0].cloneNode(!0));var c=void 0;if((c=fy(t,l,i)).x=(c.x+i.tx)*i.scale,c.y=(c.y+i.ty)*i.scale,l.visible&&(l.visible=!!(t.constraints&mp.UserHandle)),r)if(l.pathData){var d=l.pathData?l.pathData:l.content,p=this.getBaseAttributes(o);p.id=l.name+"_userhandle",p.fill=l.backgroundColor,p.stroke=l.borderColor,p.strokeWidth=l.borderWidth,p.centerX=c.x,p.centerY=c.y,p.radius=.5*l.size,p.class="e-diagram-userhandle-circle",p.angle=0,p.visible=l.visible,p.opacity=1,this.svgRenderer.drawCircle(e,p,1,{"aria-label":l.name+"user handle"});var u=[];u=$d(u=Xd(d));var f=Rv(d),g=Kd(u,(l.size-.45*l.size)/f.width,(l.size-.45*l.size)/f.height,!0,f.x,f.y,0,0);f=Rv(g);var m={x:c.x-f.width/2,y:c.y-f.height/2,angle:0,id:"",class:"e-diagram-userhandle-path",fill:l.pathColor,stroke:l.backgroundColor,strokeWidth:.5,dashArray:"",data:g,width:l.size-5,height:l.size-5,pivotX:0,pivotY:0,opacity:1,visible:l.visible};this.svgRenderer.drawPath(e,m,this.diagramId,void 0,void 0,{"aria-label":l.name+"user handle"})}else if(l.content){var y=void 0;(y=new lu(l.name,this.diagramId)).content=l.content,y.offsetX=c.x,y.offsetY=c.y,y.id=l.name+"_shape",y.horizontalAlignment="Center",y.verticalAlignment="Center",y.visible=l.visible,y.setOffsetWithRespectToBounds(c.x,c.y,"Fraction"),y.relativeMode="Object",y.description=l.name||"User handle",y.measure(new Wd(l.size,l.size)),y.arrange(y.desiredSize),this.svgRenderer.drawNativeContent(y,e,l.size,l.size,this.adornerSvgLayer)}else if(l.source){var v=new su;(m=this.getBaseAttributes(v,i)).width=l.size,m.height=l.size,m.x=c.x-l.size/2,m.y=c.y-l.size/2,m.sourceWidth=l.size,m.sourceHeight=l.size,m.alignment=v.imageAlign,m.source=l.source,m.scale=v.imageScale,m.visible=l.visible,m.description=l.name||"User handle",m.id=l.name+"_",this.renderer.drawImage(e,m,this.adornerSvgLayer,!1)}else{var b=void 0;(b=new vf(l.name,this.diagramId)).offsetX=c.x,b.offsetY=c.y,b.id=l.name+"_shape",b.visible=l.visible,b.relativeMode="Object",b.template=l.template,b.measure(new Wd(l.size,l.size)),b.arrange(b.desiredSize),this.svgRenderer.drawHTMLContent(b,n,void 0,!0,void 0)}}},t.prototype.renderRotateThumb=function(t,e,i,n,r){new ru;var o,s=new Wd;s.width=18,s.height=16;var a=t.offsetY-t.actualSize.height*t.pivot.y,l=t.offsetX-t.actualSize.width*t.pivot.x,h=!!(n&mp.Rotate);r&&(h=!1);var c=l+t.pivot.x*t.actualSize.width,d=a;if(c=(c+i.tx)*i.scale,d=(d+i.ty)*i.scale,o={x:c-.5*s.width,y:d-30-.5*s.height},0!==t.rotateAngle||0!==t.parentTransform){var p=op();ap(p,t.rotateAngle+t.parentTransform,(i.tx+t.offsetX)*i.scale,(i.ty+t.offsetY)*i.scale),o=sp(p,o)}var u={x:o.x,y:o.y,angle:t.rotateAngle+t.parentTransform,fill:"#231f20",stroke:"black",strokeWidth:.5,dashArray:"",data:"M 16.856144362449648 10.238890446662904 L 18.000144362449646 3.437890446662903L 15.811144362449646 4.254890446662903 C 14.837144362449646 2.5608904466629028 13.329144362449647  1.2598904466629026 11.485144362449645 0.5588904466629026 C 9.375144362449646 - 0.24510955333709716 7.071144362449646  - 0.18010955333709716 5.010144362449646 0.7438904466629028 C 2.942144362449646 1.6678904466629028 1.365144362449646 3.341890446662903 0.558144362449646 5.452890446662903 C - 0.244855637550354 7.567890446662903 - 0.17985563755035394 9.866890446662904 0.7431443624496461 11.930890446662904 C 1.6681443624496461 13.994890446662904 3.343144362449646 15.575890446662903 5.457144362449647 16.380890446662903 C 6.426144362449647 16.7518904466629 7.450144362449647 16.9348904466629 8.470144362449647 16.9348904466629 C 9.815144362449647 16.9348904466629 11.155144362449647 16.6178904466629 12.367144362449647 15.986890446662901 L 11.351144362449647 14.024890446662901 C 9.767144362449647 14.8468904466629 7.906144362449647 14.953890446662902 6.237144362449647 14.3178904466629 C 4.677144362449647 13.7218904466629 3.444144362449647 12.5558904466629 2.758144362449647 11.028890446662901 C 2.078144362449646 9.501890446662903 2.031144362449646 7.802890446662903 2.622144362449646 6.243890446662903 C 3.216144362449646 4.6798904466629025 4.387144362449646 3.442890446662903 5.914144362449646 2.760890446662903 C 7.437144362449646 2.078890446662903 9.137144362449646 2.0298904466629026 10.700144362449645 2.6258904466629027 C 11.946144362449646 3.100890446662903 12.971144362449646 3.9538904466629026 13.686144362449646 5.049890446662903 L 11.540144362449645 5.850890446662903 L 16.856144362449648 10.238890446662904 Z",width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:h,id:t.id,class:"e-diagram-rotate-handle"};u.id="rotateThumb",this.svgRenderer.drawPath(e,u,this.diagramId,!0,void 0,{"aria-label":"Thumb to rotate the selected object"})},t.prototype.renderPathElement=function(t,e,i,n,r,o){var s=this.getBaseAttributes(t,i,o);s.data=t.absolutePath,s.data=t.absolutePath;var a=t.description?t.description:t.id;if(this.isSvgMode||(s.x=t.flipOffset.x?t.flipOffset.x:s.x,s.y=t.flipOffset.y?t.flipOffset.y:s.y),t.isExport){var l=t.absoluteBounds;s.data=jv(t,l,0,s)}this.renderer.drawPath(e,s,this.diagramId,void 0,n,a)},t.prototype.renderSvgGridlines=function(t,e,i,n,r,o){var s=document.createElementNS("http://www.w3.org/2000/svg","pattern"),a=document.createElementNS("http://www.w3.org/2000/svg","defs");a.setAttribute("id",this.diagramId+"_grid_pattern_defn"),(t.constraints&gp.ShowHorizontalLines||t.constraints&gp.ShowVerticalLines)&&s.setAttribute("id",this.diagramId+"_pattern");var l=0,h=0,c=0,d=0,p=1,u=!1,f="Lines"===t.gridType,g=f?t.verticalGridlines.lineIntervals:t.verticalGridlines.dotIntervals,m=f?t.horizontalGridlines.lineIntervals:t.horizontalGridlines.dotIntervals;if(n.showRulers&&n.dynamicGrid&&r&&o)c=o.updateSegmentWidth(i.scale),d=r.updateSegmentWidth(i.scale),t.horizontalGridlines.scaledIntervals=[c/r.interval],t.verticalGridlines.scaledIntervals=[d/o.interval],u=!0;else{for(var y=0;y<g.length;y+=1)l+=g[y];for(y=0;y<m.length;y+=1)h+=m[y];p=this.scaleSnapInterval(t,i.scale)}l=u?d:l*p,h=u?c:h*p,rb(s,{id:this.diagramId+"_pattern",x:0,y:0,width:l,height:h,patternUnits:"userSpaceOnUse"}),this.horizontalSvgGridlines(s,l,h,p,t,n,o,u,f,m),this.verticalSvgGridlines(s,l,h,p,t,n,r,u,f,g),a.appendChild(s),e.appendChild(a)},t.prototype.horizontalSvgGridlines=function(t,e,i,n,r,o,s,a,l,h){var c,d=0,p=[];if(r.constraints&gp.ShowHorizontalLines){r.horizontalGridlines.lineDashArray&&(p=this.renderer.parseDashArray(r.horizontalGridlines.lineDashArray)),o.showRulers&&o.dynamicGrid&&s&&(h=this.updateLineIntervals(h,o,s,i,l)),h=Hm(h,l);for(var u=0;u<h.length;u+=2){d=Nm(h,l,u,d);c=document.createElementNS("http://www.w3.org/2000/svg",l?"path":"circle");var f=l?d+h[u]/2:d;f=a?f:f*n;l?(rb(c,{"stroke-width":h[u],stroke:r.horizontalGridlines.lineColor,d:"M0,"+f+" L"+e+","+f+" Z",dashArray:p.toString(),class:1.25===h[u]?"e-diagram-thick-grid":"e-diagram-thin-grid"}),t.appendChild(c),d+=h[u+1]+h[u]):(this.renderDotGrid(u,t,r,0,f,n,!0),d+=h[u])}}},t.prototype.renderDotGrid=function(t,e,i,n,r,o,s){var a,l,h,c=s?i.verticalGridlines.dotIntervals:i.horizontalGridlines.dotIntervals;c=Hm(c,!1);for(var d=1;d<c.length;d+=2)a=d===c.length-1?c[0]:c[d-1],h=n,h*=o,rb(l=document.createElementNS("http://www.w3.org/2000/svg","circle"),{cx:s?h:r,cy:s?r:h,fill:i.horizontalGridlines.lineColor,r:a}),e.appendChild(l),n+=c[d]+c[d-1]},t.prototype.verticalSvgGridlines=function(t,e,i,n,r,o,s,a,l,h){var c,d=0,p=[];if(r.constraints&gp.ShowVerticalLines){r.verticalGridlines.lineDashArray&&(p=this.renderer.parseDashArray(r.verticalGridlines.lineDashArray)),o.showRulers&&o.dynamicGrid&&s&&(h=this.updateLineIntervals(h,o,s,e,l));h=Hm(h,l);for(var u=0;u<h.length;u+=2){d=Nm(h,l,u,d),c=document.createElementNS("http://www.w3.org/2000/svg",l?"path":"circle");var f=l?d+h[u]/2:d;f=a?f:f*n;l?(rb(c,{"stroke-width":h[u],stroke:r.verticalGridlines.lineColor,d:"M"+f+",0 L"+f+","+i+" Z",dashArray:p.toString(),class:1.25===h[u]?"e-diagram-thick-grid":"e-diagram-thin-grid"}),t.appendChild(c),d+=h[u+1]+h[u]):(this.renderDotGrid(u,t,r,0,f,n,!1),d+=h[u])}}},t.prototype.updateGrid=function(t,e,i,n,r,o){var s=e.getElementById(this.diagramId+"_grid_rect"),a=!1;if(s){var l=e.getElementById(this.diagramId+"_pattern");l&&l.parentNode.removeChild(l);var h=0,c=0,d=1,p="Lines"===t.gridType,u=p?t.verticalGridlines.lineIntervals:t.verticalGridlines.dotIntervals,f=p?t.horizontalGridlines.lineIntervals:t.horizontalGridlines.dotIntervals;n.showRulers&&n.dynamicGrid&&o&&r?(h=o.updateSegmentWidth(i.scale),c=r.updateSegmentWidth(i.scale),a=!0,t.horizontalGridlines.scaledIntervals=[h/r.interval],t.verticalGridlines.scaledIntervals=[c/o.interval]):d=this.scaleSnapInterval(t,i.scale);for(var g=0,m=0;m<f.length;m+=1)g+=f[m];var y=0;for(m=0;m<u.length;m+=1)y+=u[m];var v={x:-i.tx*i.scale,y:-i.ty*i.scale};rb(s,v),y=a?c:y*d,g=a?h:g*d,v={id:this.diagramId+"_pattern",x:0,y:0,width:y,height:g,patternUnits:"userSpaceOnUse"},rb(l=document.createElementNS("http://www.w3.org/2000/svg","pattern"),v),this.horizontalSvgGridlines(l,y,g,d,t,n,o,a,p,f),this.verticalSvgGridlines(l,y,g,d,t,n,r,a,p,u);var b=e.getElementById(this.diagramId+"_grid_pattern_defn");b&&b.appendChild(l)}},t.prototype.updateLineIntervals=function(t,e,i,n,r){for(var o=[],s=n/i.interval,a=r?i.interval:i.interval+1,l=0;l<2*a;l++)o[l]=l%2==0?r?0===l?1.25:.25:0:r?s-o[l-1]:s;return o},t.prototype.scaleSnapInterval=function(t,e){if(e>=2)for(;e>=2;)e/=2;else if(e<=.5)for(;e<=.5;)e*=2;var i;if(t.horizontalGridlines.scaledIntervals=t.horizontalGridlines.snapIntervals,t.verticalGridlines.scaledIntervals=t.verticalGridlines.snapIntervals,1!==e){var n=t.horizontalGridlines;for(n.scaledIntervals=[],i=0;i<n.snapIntervals.length;i++)n.scaledIntervals[i]=n.snapIntervals[i]*e;for((n=t.verticalGridlines).scaledIntervals=[],i=0;i<n.snapIntervals.length;i++)n.scaledIntervals[i]=n.snapIntervals[i]*e}return e},t.prototype.renderTextElement=function(t,e,i,n,r){var o=this.getBaseAttributes(t,i);o.cornerRadius=0,o.whiteSpace=Pb(t.style.whiteSpace,t.style.textWrapping),o.content=t.content,o.breakWord=wb(t.style.textWrapping),o.textAlign=bb(t.style.textAlign),o.color=t.style.color,o.italic=t.style.italic,o.bold=t.style.bold,o.fontSize=t.style.fontSize,o.fontFamily=t.style.fontFamily,o.textOverflow=t.style.textOverflow,o.textWrapping=t.style.textWrapping,o.textDecoration=t.style.textDecoration,o.doWrap=t.doWrap,o.wrapBounds=t.wrapBounds,o.childNodes=t.childNodes,o.isHorizontalLane=t.isLaneOrientation,t.isLaneOrientation&&(o.parentOffsetX=this.groupElement.offsetX,o.parentOffsetY=this.groupElement.offsetY,o.parentWidth=this.groupElement.actualSize.width,o.parentHeight=this.groupElement.actualSize.height),o.dashArray="",o.strokeWidth=0,o.fill=t.style.fill;var s=t.description?t.description:t.content?t.content:t.id;("Wrap"===t.style.textWrapping||"WrapWithOverflow"===t.style.textWrapping)&&this.groupElement&&o.height>this.groupElement.actualSize.height&&("Clip"===t.style.textOverflow||"Ellipsis"===t.style.textOverflow)&&(o.y=o.y+(o.height-this.groupElement.actualSize.height)/2),this.renderer.drawRectangle(e,o,this.diagramId,void 0,void 0,n),this.renderer.drawText(e,o,n,s,this.diagramId,t.isExport&&Math.min(t.exportScaleValue.x||t.exportScaleValue.y),this.groupElement),this.isSvgMode&&(t.doWrap=!1)},t.prototype.renderNativeElement=function(t,e,i,n,r){var o,s,a=this.getParentSvg(t,void 0,e)||n,l=this.getParentElement(t,e,a).g||e,h=this.getBaseAttributes(t,i);switch(h.fill="transparent",h.cornerRadius=t.cornerRadius,h.stroke="transparent",this.renderer.drawRectangle(e,h,this.diagramId,void 0,void 0,n),t.scale){case"None":o=t.contentSize.width,s=t.contentSize.height;break;case"Stretch":o=t.actualSize.width,s=t.actualSize.height;break;case"Meet":o=s=t.actualSize.width<=t.actualSize.height?t.actualSize.width:t.actualSize.height;break;case"Slice":o=s=t.actualSize.width>=t.actualSize.height?t.actualSize.width:t.actualSize.height}this.svgRenderer&&this.svgRenderer.drawNativeContent(t,l,s,o,a)},t.prototype.renderHTMLElement=function(t,e,i,n,r,o,s){var a=this.getBaseAttributes(t,n);a.fill="transparent",a.cornerRadius=t.cornerRadius,a.stroke="transparent",this.renderer.drawRectangle(e,a,this.diagramId,void 0,void 0,r),this.svgRenderer&&this.svgRenderer.drawHTMLContent(t,i.children[0],n,function(t){var e=t.parentElement;do{if(tb(e,"e-diagram"))return!0;e=e.parentElement}while(e);return!1}(i),s)},t.prototype.renderImageElement=function(t,e,i,n,r){var o,s,a,l,h=this.getBaseAttributes(t,i);if(h.cornerRadius=0,this.renderer.drawRectangle(e,h,this.diagramId,void 0,void 0,n),"Stretch"===t.stretch)o=t.actualSize.width,s=t.actualSize.height;else{var c=t.contentSize.width,d=t.contentSize.height,p=h.width/c,u=h.height/d,f=void 0;switch(t.stretch){case"Meet":o=c*(f=Math.min(p,u)),s=d*f,h.x+=Math.abs(h.width-o)/2,h.y+=Math.abs(h.height-s)/2;break;case"Slice":p=h.width/c,u=h.height/d,o=c*(f=Math.max(p,u)),s=d*f,a=h.width/o*c,l=h.height/s*d;break;case"None":o=c,s=d}}h.width=o,h.height=s,h.sourceWidth=a,h.sourceHeight=l,h.source=t.source,h.alignment=t.imageAlign,h.scale=t.imageScale,h.description=t.description?t.description:t.id,this.renderer.drawImage(e,h,n,r)},t.prototype.renderContainer=function(t,e,i,n,r,o,s,a,l){var h={svg:r,g:e};if(this.diagramId&&(r=this.getParentSvg(t)||r,this.isSvgMode)){var c;c=this.getParentElement(t,e,r,a).g||e,r=this.getParentSvg(this.hasNativeParent(t.children))||r;var d=this.getParentElement(this.hasNativeParent(t.children),c,r,a);h.svg=d.svg||r,h.g=d.g||c,o?(r&&(r.getElementById(h.g.id)||e.appendChild(h.g)),e=h.g):e=h.g}if(this.renderRect(t,e,n,r),this.groupElement=t,t.hasChildren()){for(var p,u=void 0,f=void 0,g=0,m=t.children;g<m.length;g++){var y=m[g];r=this.getParentSvg(this.hasNativeParent(t.children)||y)||r,this.isSvgMode&&(u=(p=this.getParentElement(this.hasNativeParent(t.children)||y,e,r)).g||e,p.svg&&(r=p.svg)),this.isSvgMode||(y.flip=t.flip),this.renderElement(y,u||e,i,n,r,!0,s,a,l),y instanceof Qp&&u&&!(t.elementActions&wp.ElementIsGroup)&&(f=y.flip&&"None"!==y.flip?y.flip:t.flip,this.renderFlipElement(y,u,f)),y.elementActions&wp.ElementIsPort&&u&&(f=y.flip&&"None"!==y.flip?y.flip:t.flip,this.renderFlipElement(t,u,f)),!(y instanceof Qp)&&"None"!==t.flip&&t.elementActions&wp.ElementIsGroup&&this.renderFlipElement(y,u||e,t.flip)}t.elementActions&wp.ElementIsGroup||this.renderFlipElement(t,e,t.flip)}},t.prototype.renderFlipElement=function(t,e,i){var n={},r=1,o=1,s=0,a=0,l=0,h=0;if("None"!==i?("Horizontal"!==i&&"Both"!==i||(s=t.bounds.center.x,l=-t.bounds.center.x,r=-1),"Vertical"!==i&&"Both"!==i||(a=t.bounds.center.y,h=-t.bounds.center.y,o=-1),n={transform:"translate("+s+","+a+") scale("+r+","+o+") translate("+l+","+h+")"}):n={transform:"translate(0,0)"},n)if(t&&t.children&&t.children.length&&t.children[0]instanceof vf){var c=e.id.split("_preview");(e=(document.getElementById(c[0]+"_html_div")||Kv(this.diagramId).children[0]).querySelector("#"+t.id+"_content_html_element"))&&(e.style.transform="scale("+r+","+o+")rotate("+(t.rotateAngle+t.parentTransform)+"deg)")}else rb(e,n)},t.prototype.hasNativeParent=function(t,e){if(t&&t.length>0){var i=t[0];if(i instanceof lu)return i;i.children&&i.children.length&&this.hasNativeParent(i.children,e++||0)}},t.prototype.renderRect=function(t,e,i,n,r){var o=this.getBaseAttributes(t,i,r);o.cornerRadius=t.cornerRadius||0;var s=t.description?t.description:t.id;this.renderer.drawRectangle(e,o,this.diagramId,void 0,void 0,n,s)},t.prototype.drawRect=function(t,e){e.cornerRadius=0,this.svgRenderer.drawRectangle(t,e,this.diagramId)},t.prototype.getBaseAttributes=function(t,e,i){var n={width:t.actualSize.width,height:t.actualSize.height,x:t.offsetX-t.actualSize.width*t.pivot.x+.5,y:t.offsetY-t.actualSize.height*t.pivot.y+.5,fill:t.style.fill,stroke:t.style.strokeColor,angle:t.rotateAngle+t.parentTransform,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:t.style.strokeWidth,dashArray:t.style.strokeDashArray||"",opacity:t.style.opacity,shadow:t.shadow,gradient:t.style.gradient,visible:t.visible,id:t.id,description:t.description,canApplyStyle:t.canApplyStyle};return i&&(n.x=n.x-.5,n.y=n.y-.5),t.isExport&&(n.width*=t.exportScaleValue.x,n.height*=t.exportScaleValue.y,n.x*=t.exportScaleValue.x,n.y*=t.exportScaleValue.y,n.strokeWidth*=t.exportScaleValue.x),t.flip&&(n.flip=t.flip),e&&(n.x+=e.tx,n.y+=e.ty),n},t.renderSvgBackGroundImage=function(t,e,i,n,r,o){if(t.source){var s=Xv(e.id).getElementById(e.id+"_image");if(!s){var a=Hv(e.id).getElementsByClassName("e-background-image-layer")[0];(s=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("id",e.id+"_image"),a.appendChild(s)}var l=new Image;l.src=t.source,s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l.src.toString());var h="None"!==t.scale?t.scale:"",c=t.align,d=c.charAt(0).toLowerCase()+c.slice(1);h&&(d+=" "+h.charAt(0).toLowerCase()+h.slice(1)),rb(s,{id:e.id+"_image",x:i,y:n,width:r,height:o,preserveAspectRatio:d})}},t.prototype.transformLayers=function(t,e){var i,n,r=t.tx*t.scale,o=t.ty*t.scale;if(r!==this.transform.x||o!==this.transform.y||0===r||0===o){if(e)window.domTable[this.diagramId+"_diagramLayer"]||(window.domTable[this.diagramId+"_diagramLayer"]=this.diagramSvgLayer.getElementById(this.diagramId+"_diagramLayer")),window.domTable[this.diagramId+"_diagramLayer"].setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")");return(i=this.diagramId,n=null,window.domTable[i+"_gridline"]?n=window.domTable[i+"_gridline"]:(n=qv(i).getElementById(i+"_gridline"),window.domTable[i+"_gridline"]=n),n).setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+")"),window.domTable[this.diagramId+"_diagramPorts"]||(window.domTable[this.diagramId+"_diagramPorts"]=this.iconSvgLayer.getElementById(this.diagramId+"_diagramPorts")),window.domTable[this.diagramId+"_diagramPorts"].setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")"),window.domTable[this.diagramId+"_diagramExpander"]||(window.domTable[this.diagramId+"_diagramExpander"]=this.iconSvgLayer.getElementById(this.diagramId+"_diagramExpander")),window.domTable[this.diagramId+"_diagramExpander"].setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")"),window.domTable[this.diagramId+"_nativeLayer"]||(window.domTable[this.diagramId+"_nativeLayer"]=this.nativeSvgLayer.getElementById(this.diagramId+"_nativeLayer")),window.domTable[this.diagramId+"_nativeLayer"].setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")"),Kv(this.diagramId).children[0].style.transform="translate("+t.tx*t.scale+"px,"+t.ty*t.scale+"px)scale("+t.scale+")",this.transform={x:t.tx*t.scale,y:t.ty*t.scale},!0}return!1},t.prototype.updateNode=function(t,e,i,n,r){this.renderElement(t,e,i,n,this.getParentSvg(t),void 0,void 0,r)},t}(),Bb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kb=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Mb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Bb(e,t),kb([Hi("")],e.prototype,"source",void 0),kb([Hi("transparent")],e.prototype,"color",void 0),kb([Hi("None")],e.prototype,"scale",void 0),kb([Hi("None")],e.prototype,"align",void 0),e}(ln),Db=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Bb(e,t),kb([Hi("Page")],e.prototype,"mode",void 0),kb([Hi("PageSettings")],e.prototype,"region",void 0),kb([_i({top:25,bottom:25,left:25,right:25},Np)],e.prototype,"margin",void 0),kb([Hi(!1)],e.prototype,"canZoomIn",void 0),kb([Hi(void 0)],e.prototype,"customBounds",void 0),kb([Hi(!1)],e.prototype,"canFit",void 0),e}(ln),Rb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Bb(e,t),kb([Hi(null)],e.prototype,"width",void 0),kb([Hi(null)],e.prototype,"height",void 0),kb([_i({},Np)],e.prototype,"margin",void 0),kb([Hi("Landscape")],e.prototype,"orientation",void 0),kb([Hi("Infinity")],e.prototype,"boundaryConstraints",void 0),kb([_i({},Mb)],e.prototype,"background",void 0),kb([Hi(!1)],e.prototype,"multiplePage",void 0),kb([Hi(!1)],e.prototype,"showPageBreaks",void 0),kb([_i({},Db)],e.prototype,"fitOptions",void 0),e}(ln),zb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Bb(e,t),kb([Hi(0)],e.prototype,"horizontalOffset",void 0),kb([Hi(0)],e.prototype,"verticalOffset",void 0),kb([Hi(1)],e.prototype,"currentZoom",void 0),kb([Hi(0)],e.prototype,"viewPortWidth",void 0),kb([Hi(0)],e.prototype,"viewPortHeight",void 0),kb([Hi(.2)],e.prototype,"minZoom",void 0),kb([Hi(30)],e.prototype,"maxZoom",void 0),kb([Hi("Diagram")],e.prototype,"scrollLimit",void 0),kb([Hi()],e.prototype,"scrollableArea",void 0),kb([Hi(!1)],e.prototype,"canAutoScroll",void 0),kb([_i({left:15,right:15,top:15,bottom:15},Np)],e.prototype,"autoScrollBorder",void 0),kb([_i({left:0,right:0,top:0,bottom:0},Np)],e.prototype,"padding",void 0),e}(ln),jb=function(){function t(){this.services={}}return t.prototype.register=function(t,e){this.services[t]=e},t.prototype.getService=function(t){return this.services[t]},t}(),Nb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Hb=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},_b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Nb(e,t),Hb([Hi("lightgray")],e.prototype,"lineColor",void 0),Hb([Hi("")],e.prototype,"lineDashArray",void 0),Hb([Hi([1.25,18.75,.25,19.75,.25,19.75,.25,19.75,.25,19.75])],e.prototype,"lineIntervals",void 0),Hb([Hi([1,19,.5,19.5,.5,19.5,.5,19.5,.5,19.5])],e.prototype,"dotIntervals",void 0),Hb([Hi([20])],e.prototype,"snapIntervals",void 0),e}(ln),Vb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Nb(e,t),Hb([_i({},_b)],e.prototype,"horizontalGridlines",void 0),Hb([_i({},_b)],e.prototype,"verticalGridlines",void 0),Hb([Hi(gp.All)],e.prototype,"constraints",void 0),Hb([Hi(5)],e.prototype,"snapAngle",void 0),Hb([Hi("Lines")],e.prototype,"gridType",void 0),Hb([Hi(5)],e.prototype,"snapObjectDistance",void 0),e}(ln),Fb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wb=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Ub=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Fb(e,t),Wb([Hi(5)],e.prototype,"interval",void 0),Wb([Hi(100)],e.prototype,"segmentWidth",void 0),Wb([Hi("Horizontal")],e.prototype,"orientation",void 0),Wb([Hi("RightOrBottom")],e.prototype,"tickAlignment",void 0),Wb([Hi("red")],e.prototype,"markerColor",void 0),Wb([Hi(25)],e.prototype,"thickness",void 0),Wb([Hi(null)],e.prototype,"arrangeTick",void 0),e}(ln),Gb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Fb(e,t),Wb([Hi(!1)],e.prototype,"showRulers",void 0),Wb([Hi(!0)],e.prototype,"dynamicGrid",void 0),Wb([_i({orientation:"Horizontal"},Ub)],e.prototype,"horizontalRuler",void 0),Wb([_i({orientation:"Vertical"},Ub)],e.prototype,"verticalRuler",void 0),e}(ln),qb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xb=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Yb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qb(e,t),Xb([Hi("")],e.prototype,"property",void 0),Xb([Hi("")],e.prototype,"field",void 0),e}(ln),Zb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kb=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Jb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zb(e,t),Kb([Hi("")],e.prototype,"read",void 0),Kb([Hi("")],e.prototype,"create",void 0),Kb([Hi("")],e.prototype,"update",void 0),Kb([Hi("")],e.prototype,"destroy",void 0),Kb([Hi()],e.prototype,"customFields",void 0),e}(ln),Qb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zb(e,t),Kb([Hi("")],e.prototype,"id",void 0),Kb([Hi("")],e.prototype,"sourceID",void 0),Kb([Hi("")],e.prototype,"targetID",void 0),Kb([Hi(null)],e.prototype,"sourcePointX",void 0),Kb([Hi(null)],e.prototype,"sourcePointY",void 0),Kb([Hi(null)],e.prototype,"targetPointX",void 0),Kb([Hi(null)],e.prototype,"targetPointY",void 0),Kb([Hi(null)],e.prototype,"dataManager",void 0),Kb([_i({},Jb)],e.prototype,"crudAction",void 0),e}(ln),$b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zb(e,t),Kb([Hi("")],e.prototype,"id",void 0),Kb([Hi(null)],e.prototype,"dataManager",void 0),Kb([Hi(null)],e.prototype,"dataSource",void 0),Kb([Hi("")],e.prototype,"root",void 0),Kb([Hi("")],e.prototype,"parentId",void 0),Kb([Hi()],e.prototype,"doBinding",void 0),Kb([Fi([],Yb)],e.prototype,"dataMapSettings",void 0),Kb([_i({},Jb)],e.prototype,"crudAction",void 0),Kb([_i({},Qb)],e.prototype,"connectionDataSource",void 0),e}(ln),tw=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ew=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},iw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tw(e,t),ew([Hi("")],e.prototype,"fixedNode",void 0),ew([Hi(30)],e.prototype,"horizontalSpacing",void 0),ew([Hi(30)],e.prototype,"verticalSpacing",void 0),ew([Hi(30)],e.prototype,"maxIteration",void 0),ew([Hi(40)],e.prototype,"springFactor",void 0),ew([Hi(50)],e.prototype,"springLength",void 0),ew([_i({left:50,top:50,right:0,bottom:0},Np)],e.prototype,"margin",void 0),ew([Hi("Auto")],e.prototype,"horizontalAlignment",void 0),ew([Hi("Auto")],e.prototype,"verticalAlignment",void 0),ew([Hi("TopToBottom")],e.prototype,"orientation",void 0),ew([Hi("Auto")],e.prototype,"connectionDirection",void 0),ew([Hi("Default")],e.prototype,"connectorSegments",void 0),ew([Hi("None")],e.prototype,"type",void 0),ew([Hi()],e.prototype,"getLayoutInfo",void 0),ew([Hi()],e.prototype,"layoutInfo",void 0),ew([Hi()],e.prototype,"getBranch",void 0),ew([Hi()],e.prototype,"bounds",void 0),ew([Hi(!0)],e.prototype,"enableAnimation",void 0),ew([Hi("")],e.prototype,"root",void 0),e}(ln);function nw(t,e,i,n,r,o,s){n.selectedItems.connectors[0];if(o&&o.length>1&&r&&r.length>1)return"PinchZoom";if(n.currentSymbol)return"Drag";if("PortDraw"===n.eventHandler.action&&(n.tool&=~Cp.DrawOnce),(bg(n)||vg(n))&&n.drawingObject)return"Draw";if(ow(n)&&((p=n.selectedItems).wrapper&&my(p.constraints,"UserHandle")))for(var a=0,l=p.userHandles;a<l.length;a++){var h=l[a];if(h.visible)if(rw(i,u=fy(p,h,n.scroller.transform),h.size/(2*n.scroller.transform.scale)))return h.name}if(ow(n)){var c=n.selectedItems.annotation?n.selectedItems.wrapper.children[0]:n.selectedItems.wrapper,d=c.bounds,p=n.selectedItems,u=new np(d.x,d.y,d.width,d.height);if(sw(n)&&!n.selectedItems.annotation){var f=n.selectedItems.connectors[0],g=10/n.scrollSettings.currentZoom,m=10/n.scrollSettings.currentZoom;if(my(p.constraints,"ResizeAll")){if(my(p.constraints,"ConnectorSourceThumb")&&ng(f)&&rw(i,f.sourcePoint,g))return"ConnectorSourceEnd";if(my(p.constraints,"ConnectorTargetThumb")&&rg(f)&&rw(i,f.targetPoint,m))return"ConnectorTargetEnd";if("OrthoThumb"===(x=function(t,e,i,n){var r=10/n.scrollSettings.currentZoom,o=10/n.scrollSettings.currentZoom;if("Bezier"===t.type)for(var s=0;s<t.segments.length;s++){var a=t.segments[s];if(rw(i,qd.isEmptyPoint(a.point1)?a.bezierPoint1:a.point1,o))return"BezierSourceThumb";if(rw(i,qd.isEmptyPoint(a.point2)?a.bezierPoint2:a.point2,r))return"BezierTargetThumb"}if(n.connectorEditingToolModule&&og(t))if("Straight"===t.type||"Bezier"===t.type)for(var s=0;s<t.segments.length;s++){var a=void 0;if(a=t.segments[s],rw(i,a.point,10))return"SegmentEnd"}else for(var s=0;s<t.segments.length;s++){var a=void 0,l={x:0,y:0};if((a=t.segments[s]).allowDrag)for(var h=0;h<a.points.length-1;h++){var c=qd.distancePoints(a.points[h],a.points[h+1]);if(c>=50&&(l.x=(a.points[h].x+a.points[h+1].x)/2,l.y=(a.points[h].y+a.points[h+1].y)/2,rw(i,l,30)))return"OrthoThumb"}}return null}(f,0,i,n)))return x;if(my(p.constraints,"ConnectorSourceThumb")&&ng(f)&&x)return x;if(my(p.constraints,"ConnectorTargetThumb")&&rg(f)&&x)return x}}else{var y=10/n.scroller.currentZoom,v=op();ap(v,c.rotateAngle+c.parentTransform,c.offsetX,c.offsetY);var b=c.offsetX-c.pivot.x*c.actualSize.width,w=c.offsetY-c.pivot.y*c.actualSize.height,S={x:b+(.5===c.pivot.x?2*c.pivot.x:c.pivot.x)*c.actualSize.width/2,y:w-30/n.scroller.currentZoom};S=sp(v,S);var x,C=!!n.selectedItems.annotation,P=!(!C||!sg(n.selectedItems.annotation));if(my(p.constraints,"Rotate")&&rw(i,S,y)&&n.selectedItems.thumbsConstraints&Sp.Rotate){if(C&&P)return"LabelRotate";if(!C)return"Rotate"}if(u.Inflate(y),u.containsPoint(i))if(x=function(t,e,i,n,r,o){var s;1===t.selectedItems.nodes.length&&0===t.selectedItems.connectors.length&&t.selectedItems.nodes[0].container&&(s=function(t,e,i,n,r){var o=10/t.scroller.currentZoom,s=40/t.scroller.currentZoom,a=t.selectedItems,l=e.actualSize.width,h=e.actualSize.height,c=new np(n,r+20,e.style.strokeWidth,h-40),d=new np(n+l,r+20,e.style.strokeWidth,h-40),p=new np(n+20,r,l-40,e.style.strokeWidth),u=new np(n+20,r+h,l-40,e.style.strokeWidth),f=Yg(t,t.selectedItems.nodes[0],!0)?t.nameTable[t.selectedItems.nodes[0].parentId]:t.selectedItems.nodes[0];if(l>=s&&h>=s){if(gy(a.constraints,"ResizeEast",a.thumbsConstraints,a)&&d.containsPoint(i,o))return"ResizeEast";if(gy(a.constraints,"ResizeSouth",a.thumbsConstraints,a)&&u.containsPoint(i,o))return"ResizeSouth";if("Grid"!==f.container.type){if(gy(a.constraints,"ResizeWest",a.thumbsConstraints,a)&&c.containsPoint(i,o))return"ResizeWest";if(gy(a.constraints,"ResizeNorth",a.thumbsConstraints,a)&&p.containsPoint(i,o))return"ResizeNorth"}}return null}(t,e,i,r,o));s||t.selectedItems.nodes[0]&&(t.selectedItems.nodes[0].isPhase||t.selectedItems.nodes[0].isLane||"SwimLane"===t.selectedItems.nodes[0].shape.type)||(s=function(t,e,i,n,r,o){var s=40/t.scroller.currentZoom,a=10/t.scroller.currentZoom,l=t.selectedItems,h=!!l.annotation;if(e.actualSize.width>=s&&e.actualSize.height>=s){if(gy(l.constraints,"ResizeSouthEast",l.thumbsConstraints,l)&&rw(i,sp(n,{x:r+e.actualSize.width,y:o+e.actualSize.height}),a))return h?"LabelResizeSouthEast":"ResizeSouthEast";if(gy(l.constraints,"ResizeSouthWest",l.thumbsConstraints,l)&&rw(i,sp(n,{x:r,y:o+e.actualSize.height}),a))return h?"LabelResizeSouthWest":"ResizeSouthWest";if(gy(l.constraints,"ResizeNorthEast",l.thumbsConstraints,l)&&rw(i,sp(n,{x:r+e.actualSize.width,y:o}),a))return h?"LabelResizeNorthEast":"ResizeNorthEast";if(gy(l.constraints,"ResizeNorthWest",l.thumbsConstraints,l)&&rw(i,sp(n,{x:r,y:o}),a))return h?"LabelResizeNorthWest":"ResizeNorthWest"}if(gy(l.constraints,"ResizeEast",l.thumbsConstraints,l)&&rw(i,sp(n,{x:r+e.actualSize.width,y:o+e.actualSize.height/2}),a))return h?"LabelResizeEast":"ResizeEast";if(gy(l.constraints,"ResizeWest",l.thumbsConstraints,l)&&rw(i,sp(n,{x:r,y:o+e.actualSize.height/2}),a))return h?"LabelResizeWest":"ResizeWest";if(gy(l.constraints,"ResizeSouth",l.thumbsConstraints,l)&&rw(i,sp(n,{x:r+e.actualSize.width/2,y:o+e.actualSize.height}),a))return h?"LabelResizeSouth":"ResizeSouth";if(gy(l.constraints,"ResizeNorth",l.thumbsConstraints,l)&&rw(i,sp(n,{x:r+e.actualSize.width/2,y:o}),a))return h?"LabelResizeNorth":"ResizeNorth";return null}(t,e,i,n,r,o));if(s)return s;return null}(n,c,i,v,b,w))return x}}if(yg(n)&&!t)return"Pan";if(s instanceof pu&&!yg(n)&&"None"!==(x=function(t,e,i,n){if(Og(e)&&(yy(e,fp.Hover)||yy(e,fp.Visible))){if(e.constraints&Mp.Drag)return"PortDrag"}else if(Pg(e)&&(yy(e,fp.Hover)||yy(e,fp.Visible))&&e.constraints&Mp.Draw){t.drawingObject={};var r={type:"Orthogonal",sourcePortID:e.id};return t.drawingObject=r,t.tool|=Cp.DrawOnce,t.currentDrawingObject=r,"PortDraw"}return"None"}(n,s)))return x;if((s instanceof yu||s instanceof vu)&&!yg(n)&&eg(s))return aw(n,s,void 0,e)&&ig(s)?"LabelDrag":"LabelSelect";if(null!==t){if(!(t instanceof Lv||t instanceof Gf))return"Select";if(e&&e.id){var O=e.id.split(t.id)[1];if(O&&O.match("^_icon"))return"LayoutAnimation"}if(ig(t)&&e instanceof Qp&&e.hyperlink.link)return"Hyperlink";if(!ig(t)||!aw(n,t,!1)||void 0!==n.selectedItems.annotation)return t&&yg(n)&&!wg(n)?"Pan":n.selectedItems.nodes.length&&n.selectedItems.nodes[0].isLane&&n.selectedItems.wrapper&&n.selectedItems.wrapper.bounds.containsPoint(i)?"Drag":"Select";if(t instanceof Gf&&!rw(i,t.sourcePoint,t.hitPadding)&&!rw(i,t.targetPoint,t.hitPadding)||!(t instanceof Gf))return"Drag"}return"Select"}function rw(t,e,i){return t.x>=e.x-i&&t.x<=e.x+i&&t.y>=e.y-i&&t.y<=e.y+i}function ow(t){return t.selectedItems.nodes.length>0||t.selectedItems.connectors.length>0}function sw(t){return 1===t.selectedItems.connectors.length&&!t.selectedItems.nodes.length}function aw(t,e,i,n){if(void 0===i&&(i=!0),e instanceof Mv)return!0;if(e instanceof Lv)for(;e;){if(-1!==t.selectedItems.nodes.indexOf(e)&&void 0===t.selectedItems.annotation)return!0;if(i)break;e=t.nameTable[e.parentId]}else if(e instanceof Gf){if(-1!==t.selectedItems.connectors.indexOf(e)&&void 0===t.selectedItems.annotation)return!0}else if((e instanceof yu||e instanceof vu)&&t.selectedItems.annotation&&t.selectedItems.wrapper.children[0].id===n.id)return!0;return!1}var lw={None:"default",Rotate:"crosshair",Select:"default",Drag:"move",ResizeWest:"w-resize",ResizeEast:"e-resize",ResizeSouth:"s-resize",ResizeNorth:"n-resize",Draw:"crosshair",PortDraw:"crosshair",ResizeNorthEast:"ne-resize",ResizeNorthWest:"nw-resize",ResizeSouthEast:"se-resize",ResizeSouthWest:"sw-resize",ConnectorSourceEnd:"move",ConnectorTargetEnd:"move",BezierSourceThumb:"move",BezierTargetThumb:"move",OrthoThumb:"move",SegmentEnd:"move",Pan:"grab",Hyperlink:"pointer",PortDrag:"pointer",LabelSelect:"pointer",LabelDrag:"move",LabelRotate:"crosshair",LabelResizeWest:"w-resize",LabelResizeEast:"e-resize",LabelResizeSouth:"s-resize",LabelResizeNorth:"n-resize",LabelResizeNorthEast:"ne-resize",LabelResizeNorthWest:"nw-resize",LabelResizeSouthEast:"se-resize",LabelResizeSouthWest:"sw-resize"},hw=function(){function t(){this.valueCreated="created",this.valueUpdated="updated",this.valueDeleted="deleted",this.valueUnchanged="unchanged",this.newNodeObject=[],this.newConnectorObject=[],this.diagramObject={}}return t.prototype.updateObjectCollection=function(t,e){for(var i=0;i<t.length;i++)t[i].objects?t[i].objects=e.layers[i].objects:(t[i].objects=[],t[i].objects=e.layers[i].objects)},t.prototype.getOldObject=function(t,e,i){for(var n=e?i.oldNodeObjects:i.oldConnectorObjects,r=0;r<n.length;r++)if(n[r].id===t)return n[r]},t.prototype.changeSegments=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];if("segments"===r){var o=this.removeNullValues(e[r]);t[r]=o}}return t},t.prototype.removeNullValues=function(t){for(var e=[],i={},n=0;n<t.length;n++)i=this.removeNullObjectValues(t[n]),e.push(i);return e},t.prototype.removeNullObjectValues=function(t){for(var e={},i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];void 0!==t[r]&&(e[r]=t[r]instanceof Object?this.removeNullObjectValues(t[r]):t[r])}return e},t.prototype.getDifferenceValues=function(t,e,i,n){var r,o,s,a,l=t instanceof Lv;if(t&&(a=l?this.getOldObject(t.id,!0,n):this.getOldObject(t.id,!1,n))){var h=gb(t);return s=this.map(h,a),r=this.frameObject({},s),o=this.removeEmptyValues(r),(o=this.changeSegments(o,h)).children&&(o.children=gb(t).children),this.getDiagramObjects(o,t.id,l,e,i,n)}},t.prototype.getLayerObject=function(t,e,i){if($()){for(var n={layers:[]},r={layers:[]},o=0;o<i.layers.length;o++)r.layers.push(gb(i.layers[o]));var s=void 0;for(o=0;o<r.layers.length;o++){s=e?this.map(t.layers[o],gb(r.layers[o])):this.map(gb(r.layers[o]),t.layers[o]);var a=this.frameObject({},s),l=this.removeEmptyValues(a);n.layers[o]=l}return this.updateObjectCollection(n.layers,i),n}},t.prototype.getDiagramObjects=function(t,e,i,n,r,o){var s;if(s=db(o,e),t.sfIndex=s,i?this.newNodeObject.push(t):this.newConnectorObject.push(t),n&&(n.sourceWrapper instanceof Qp&&r||n.portId)){var a=void 0,l=void 0;l=i?n.portId?this.newNodeObject[0].ports:this.newNodeObject[0].annotations:this.newConnectorObject[0].annotations||[];for(var h=0;h<l.length;h++)if(Object.keys(l[h]).length>0){var c=o.nameTable[e];if(a=l[h],n.portId)this.newNodeObject[0].ports=[a];else{for(var d=0;d<c.annotations.length;d++)n.sourceWrapper.id===c.id+"_"+c.annotations[d].id&&(a.sfIndex=d);i?this.newNodeObject[0].annotations=[a]:this.newConnectorObject[0].annotations=[a]}}}this.diagramObject={nodes:this.newNodeObject,connectors:this.newConnectorObject}},t.prototype.removeArrayValues=function(t){var e=[];if(JSON.stringify(t)!==JSON.stringify({data:[]}))for(var i=0;i<t.length;i++)if(t[i]instanceof Object){var n=this.removeEmptyValues(t[i]);e.push(n)}else e.push(t[i]);return e},t.prototype.removeEmptyValues=function(t){for(var e={},i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];if("wrapper"!==r&&"data"!==r){var o=t[r],s=JSON.stringify(o);if(o instanceof Array){var a=this.removeArrayValues(o);"[]"!==JSON.stringify(a)&&(e[r]=a)}else if(o instanceof Object){if(s!==JSON.stringify({data:[]})){a=this.removeEmptyValues(o);"{}"!==JSON.stringify(a)&&(e[r]=a)}}else s!==JSON.stringify(["data"])&&s!==JSON.stringify("data")&&s!==JSON.stringify({data:[]})&&"version"!==r&&"ejsAction"!==r&&(e[r]=t[r])}}return e},t.prototype.map=function(t,e,i){if(this.isFunction(t)||this.isFunction(e))throw"Invalid argument. Function given, object expected.";if(this.isValue(t)||this.isValue(e))return{type:this.compareValues(t,e),data:void 0===t?e:t};var n={};if(this.isArray(t))for(var r=0;r<t.length;r++){n[i]||(n[i]=[]);var o=this.map(t[r],e[r]);n[i].push(o)}else for(var s in t)if(!this.isFunction(t[s])){var a=void 0;void 0!==e[s]&&(a=e[s]);var l=this.map(t[s],a,this.isArray(a)?s:void 0);this.isArray(a)?n[s]=l[s]:n[s]=l}if(this.isArray(e))for(r=0;r<e.length;r++)if(n[i]||(n[i]=[]),this.isFunction(e[r])||void 0!==n[i][r])n[i][r].type&&n[i][r].type!==this.valueUpdated&&delete n[i];else{o=this.map(void 0,e[r]);n[i][r]=o}else for(var s in e)if(this.isFunction(e[s])||void 0!==n[s])n[s].type&&n[s].type!==this.valueUpdated&&n[s].type!==this.valueDeleted&&delete n[s];else{l=this.map(void 0,e[s]);n[s]=l}return n},t.prototype.compareValues=function(t,e){return t===e?this.valueUnchanged:this.isDate(t)&&this.isDate(e)&&t.getTime()===e.getTime()?this.valueUnchanged:void 0===t?this.valueCreated:void 0===e?this.valueDeleted:this.valueUpdated},t.prototype.isFunction=function(t){return"[object Function]"===Object.prototype.toString.call(t)},t.prototype.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.prototype.isDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)},t.prototype.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},t.prototype.isValue=function(t){return!this.isObject(t)&&!this.isArray(t)},t.prototype.frameObject=function(t,e){for(var i in e)if(this.isArray(e[i])){t[i]||(t[i]=[]);for(var n=0;n<e[i].length;n++){var r=this.frameObject({},e[i][n]);t[i].push(r)}}else if("type"!=i||"type"==i&&e[i]!==this.valueUpdated&&e[i]!==this.valueUnchanged&&e[i]!==this.valueDeleted&&e[i]!==this.valueCreated){if(this.isFunction(e[i]))continue;if(this.isValue(e[i]))return e.data;r=this.frameObject({},e[i]);(this.isValue(r)||Object.keys(r).length>0)&&(t[i]=r)}return t},t}(),cw=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dw=function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}l((n=n.apply(t,e||[])).next())})},pw=function(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},uw=function(){function t(t,e){void 0===e&&(e=!1),this.commandHandler=null,this.deepDiffer=new hw,this.inAction=!1,this.isProtectChange=!1,this.currentElement=null,this.blocked=!1,this.isTooltipVisible=!1,this.childTable={},this.undoElement={nodes:[],connectors:[]},this.checkProperty=!0,this.undoParentElement={nodes:[],connectors:[]},this.commandHandler=t,this.isProtectChange=e}return t.prototype.startAction=function(t){this.currentElement=t,this.inAction=!0},t.prototype.mouseDown=function(t){$()&&(this.commandHandler.enableCloneObject(!0),this.commandHandler.ismouseEvents(!0)),this.currentElement=t.source,this.startPosition=this.currentPosition=this.prevPosition=t.position,this.isTooltipVisible=!0,this.startAction(t.source),this.checkProperty=!0},t.prototype.checkPropertyValue=function(){this.checkProperty&&this.commandHandler.startTransaction(this.isProtectChange)},t.prototype.mouseMove=function(t){return this.currentPosition=t.position,this.inAction&&(this.commandHandler.startTransaction(this.isProtectChange),this.checkProperty=!1),!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.currentPosition=t.position,this.isTooltipVisible=!1,this.commandHandler.endTransaction(this.isProtectChange),$()&&(this.commandHandler.enableCloneObject(!1),this.commandHandler.ismouseEvents(!1),this.commandHandler.getBlazorOldValues(t,this instanceof Lw)),this.endAction()},t.prototype.endAction=function(){this.isTooltipVisible||this.commandHandler.closeTooltip(),this.commandHandler=null,this.currentElement=null,this.currentPosition=null,this.inAction=!1,this.blocked=!1},t.prototype.mouseWheel=function(t){this.currentPosition=t.position},t.prototype.mouseLeave=function(t){this.mouseUp(t)},t.prototype.updateSize=function(t,e,i,n,r,o){t=this.commandHandler.renderContainerHelper(t)||t;var s,a={snapped:!1,offset:0,left:!1,right:!1},l={snapped:!1,offset:0,top:!1,bottom:!1},h=this.currentPosition.x-this.startPosition.x,c=this.currentPosition.y-this.startPosition.y,d=!(t instanceof Qp)&&this.commandHandler.snappingModule&&this.commandHandler.snappingModule.canSnap(),p=d?this.commandHandler.snappingModule.getLayer():null,u=t instanceof Qp?o:t.rotateAngle;ap(s=op(),-u,0,0);t.offsetX,t.offsetY;var f=t.width,g=t.height;t.pivot.x,t.pivot.y;var m,y=0,v=0,b=t instanceof Qp?t.actualSize.width:t.width,w=t instanceof Qp?t.actualSize.height:t.height;switch(n){case"ResizeWest":h=(m=sp(s,{x:h,y:c})).x,c=m.y,v=1,h=d?this.commandHandler.snappingModule.snapLeft(a,l,p,h,c,t,i===e,r):h,c=0,y=(r.width-h)/b;break;case"ResizeEast":h=(m=sp(s,{x:h,y:c})).x,c=m.y,h=d?this.commandHandler.snappingModule.snapRight(a,l,p,h,c,t,i===e,r):h,c=0,y=(r.width+h)/b,v=1;break;case"ResizeNorth":y=1,h=(m=sp(s,{x:h,y:c})).x,c=m.y,c=d?this.commandHandler.snappingModule.snapTop(a,l,p,h,c,t,i===e,r):c,v=(r.height-c)/w;break;case"ResizeSouth":y=1,h=(m=sp(s,{x:h,y:c})).x,c=m.y,c=d?this.commandHandler.snappingModule.snapBottom(a,l,p,h,c,t,i===e,r):c,v=(r.height+c)/w;break;case"ResizeNorthEast":h=(m=sp(s,{x:h,y:c})).x,c=m.y,h=d?this.commandHandler.snappingModule.snapRight(a,l,p,h,c,t,i===e,r):h,c=d?this.commandHandler.snappingModule.snapTop(a,l,p,h,c,t,i===e,r):c,y=(r.width+h)/b,v=(r.height-c)/w;break;case"ResizeNorthWest":h=(m=sp(s,{x:h,y:c})).x,c=m.y,c=d?this.commandHandler.snappingModule.snapTop(a,l,p,h,c,t,i===e,r):c,h=d?this.commandHandler.snappingModule.snapLeft(a,l,p,h,c,t,i===e,r):h,y=(r.width-h)/b,v=(r.height-c)/w;break;case"ResizeSouthEast":h=(m=sp(s,{x:h,y:c})).x,c=m.y,c=d?this.commandHandler.snappingModule.snapBottom(a,l,p,h,c,t,i===e,r):c,h=d?this.commandHandler.snappingModule.snapRight(a,l,p,h,c,t,i===e,r):h,v=(r.height+c)/w,y=(r.width+h)/b;break;case"ResizeSouthWest":h=(m=sp(s,{x:h,y:c})).x,c=m.y,c=d?this.commandHandler.snappingModule.snapBottom(a,l,p,h,c,t,i===e,r):c,h=d?this.commandHandler.snappingModule.snapLeft(a,l,p,h,c,t,i===e,r):h,y=(r.width-h)/b,v=(r.height+c)/w}return{width:y,height:v}},t.prototype.getPivot=function(t){switch(t){case"ResizeWest":return{x:1,y:.5};case"ResizeEast":return{x:0,y:.5};case"ResizeNorth":return{x:.5,y:1};case"ResizeSouth":return{x:.5,y:0};case"ResizeNorthEast":return{x:0,y:1};case"ResizeNorthWest":return{x:1,y:1};case"ResizeSouthEast":return{x:0,y:0};case"ResizeSouthWest":return{x:1,y:0}}return{x:.5,y:.5}},t}(),fw=function(t){function e(e,i,n){var r=t.call(this,e,!0)||this;return r.action=n,r}return cw(e,t),e.prototype.mouseDown=function(e){this.inAction=!0,t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction&&!1===qd.equals(this.currentPosition,this.prevPosition)){var i=np.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.clearSelectedItems(),this.commandHandler.drawSelectionRectangle(i.x,i.y,i.width,i.height)}return!this.blocked},e.prototype.mouseUp=function(e){if(this.checkPropertyValue(),!this.commandHandler.isUserHandle(this.currentPosition))if(!1===qd.equals(this.currentPosition,this.prevPosition)&&this.inAction){var i=np.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.doRubberBandSelection(i)}else{var n=this.commandHandler.getSelectedObject();this.commandHandler.hasSelection()&&e.info&&e.info.ctrlKey?e&&e.source&&(this.commandHandler.isSelected(e.source)?1===e.clickCount&&(this.commandHandler.unSelect(e.source),this.commandHandler.updateBlazorSelector()):this.commandHandler.selectObjects([e.source],!0)):(this.commandHandler.clearSelection(null===e.source),"LabelSelect"===this.action?this.commandHandler.labelSelect(e.source,e.sourceWrapper):e.source&&this.commandHandler.selectObjects([e.source],!1,n))}this.inAction=!1,t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.inAction&&this.mouseUp(t)},e}(uw),gw=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.isConnected=!1,n.endPoint=i,n}return cw(e,t),e.prototype.mouseDown=function(e){return dw(this,void 0,void 0,function(){var i,n,r,o,s,a,l,h,c,d;return pw(this,function(p){switch(p.label){case 0:return $()&&e&&e.source&&(i=e.source).connectors?(n=i.connectors[0],this.oldConnector=gb(n),r={connector:jy(n),oldValue:{connectorTargetValue:{portId:void 0,nodeId:void 0}},newValue:{connectorTargetValue:{portId:void 0,nodeId:void 0}},cancel:!1,state:"Changing",connectorEnd:this.endPoint},o=kp.connectionChange,s=void 0,[4,this.commandHandler.triggerEvent(o,r)]):[3,2];case 1:s=p.sent()||r,this.tempArgs=s,(r.cancel||s&&s.cancel)&&(this.canCancel=!0),p.label=2;case 2:if(this.inAction=!0,this.undoElement=void 0,this instanceof ww||(this.undoElement=gb(e.source)),t.prototype.mouseDown.call(this,e),e.source&&e.source.connectors&&({x:this.prevPosition.x,y:this.prevPosition.y},a=e.source.connectors[0],this.oldConnector=gb(a)),"BezierSourceThumb"===this.endPoint||"BezierTargetThumb"===this.endPoint)for(l=0;l<a.segments.length;l++)h=a.segments[l],c=qd.isEmptyPoint(h.point1)?h.bezierPoint1:h.point1,d=qd.isEmptyPoint(h.point2)?h.bezierPoint2:h.point2,(rw(this.currentPosition,c,a.hitPadding)||rw(this.currentPosition,d,a.hitPadding))&&(this.selectedSegment=h);return this.currentPosition=e.position,[2]}})})},e.prototype.mouseUp=function(e){return dw(this,void 0,void 0,function(){var i,n,r,o,s,a,l,h,c,d,p,u;return pw(this,function(f){switch(f.label){case 0:return $()?(d=kp.connectionChange,i=void 0,this.tempArgs&&this.oldConnector?(this.tempArgs.state="Changed",n="ConnectorSourceEnd"===this.endPoint?"sourceID":"targetID",r="ConnectorSourceEnd"===this.endPoint?"sourcePortID":"targetPortID",this.tempArgs.oldValue="ConnectorSourceEnd"===this.endPoint?{connectorSourceValue:{nodeId:this.oldConnector[n],portId:this.oldConnector[r]}}:{connectorTargetValue:{nodeId:this.oldConnector[n],portId:this.oldConnector[r]}},[4,this.commandHandler.triggerEvent(d,this.tempArgs)]):[3,2]):[3,2];case 1:(i=f.sent())&&this.commandHandler.updateConnectorValue(i),f.label=2;case 2:return!$()&&this.isConnected&&e.source.connectors&&(s=e.source.connectors[0],n="ConnectorSourceEnd"===this.endPoint?"sourceID":"targetID",r="ConnectorSourceEnd"===this.endPoint?"sourcePortID":"targetPortID",c={connector:jy(s),oldValue:{nodeId:this.oldConnector[n],portId:this.oldConnector[r]},newValue:{nodeId:s[n],portId:s[r]},cancel:!1,state:"Changed",connectorEnd:this.endPoint},s[n]!==this.oldConnector[n]&&(this.commandHandler.triggerEvent(kp.connectionChange,c),this.isConnected=!1)),this.checkPropertyValue(),this.commandHandler.updateSelector(),this.commandHandler.removeSnap(),this.commandHandler.changeAnnotationDrag(e),this instanceof ww||("ConnectorSourceEnd"!==this.endPoint||!e.source.connectors.length||qd.equals(e.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)&&e.source.connectors[0].sourceID===this.undoElement.connectors[0].sourceID)&&("ConnectorTargetEnd"!==this.endPoint||qd.equals(e.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint)&&e.source.connectors[0].targetID===this.undoElement.connectors[0].targetID)?this instanceof ww||"BezierTargetThumb"!==this.endPoint&&"BezierSourceThumb"!==this.endPoint||this.undoElement&&e.source&&(p=void 0,p=gb(e.source),u={type:"SegmentChanged",redoObject:p,undoObject:this.undoElement,category:"Internal"},this.commandHandler.addHistoryEntry(u)):(o=void 0,s=void 0,e.source&&e.source.connectors&&(o={x:this.prevPosition.x,y:this.prevPosition.y},s=e.source.connectors[0]),a=void 0,l=void 0,e.target&&((h=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof pu?a=h.id:l=h.id),c={connector:s,state:"Completed",targetNode:l,oldValue:o,newValue:o,cancel:!1,targetPort:a},$()&&(c={connector:jy(s),state:"Completed",targetNode:l,oldValue:jy(o),newValue:o,cancel:c.cancel,targetPort:a}),d="ConnectorSourceEnd"===this.endPoint?kp.sourcePointChange:kp.targetPointChange,this.commandHandler.triggerEvent(d,c),this.commandHandler.removeTerminalSegment(s,!0),this.undoElement&&e.source&&(p=void 0,p=gb(e.source),u={type:"ConnectionChanged",redoObject:gb(p),undoObject:gb(this.undoElement),category:"Internal"},this.commandHandler.addHistoryEntry(u))),this.commandHandler.updateBlazorSelector(),this.canCancel=void 0,this.tempArgs=void 0,t.prototype.mouseUp.call(this,e),[2]}})})},e.prototype.mouseMove=function(e){var i;if(t.prototype.mouseMove.call(this,e),!(this instanceof ww)&&("ConnectorSourceEnd"===this.endPoint&&qd.equals(e.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)||"ConnectorTargetEnd"===this.endPoint&&qd.equals(e.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint))){var n=void 0,r=void 0;e.source&&e.source.connectors&&(n={x:this.prevPosition.x,y:this.prevPosition.y},r=e.source.connectors[0]);var o=void 0,s=void 0;if(e.target)s=e.target.id,(y=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof pu||y instanceof dv?o=y.id:s=y.id;var a={connector:r,state:"Start",targetNode:s,oldValue:n,newValue:n,cancel:!1,targetPort:o};$()&&(a={connector:jy(r),state:"Start",targetNode:s,oldValue:n,newValue:n,cancel:a.cancel,targetPort:o});var l="ConnectorSourceEnd"===this.endPoint?kp.sourcePointChange:kp.targetPointChange;this.commandHandler.triggerEvent(l,a)}if(this.currentPosition=e.position,this.currentPosition&&this.prevPosition){var h=this.currentPosition.x-this.prevPosition.x,c=this.currentPosition.y-this.prevPosition.y,d=void 0,p=(n=void 0,void 0),u=void 0;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var f=void 0;e.source&&e.source.connectors&&(d={x:this.currentPosition.x,y:this.currentPosition.y},n={x:this.prevPosition.x,y:this.prevPosition.y},f=e.source.connectors[0]);var g=void 0,m=void 0;if(e.target)(y=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof pu?g=y.id:m=y.id;var y;a={connector:f,state:"Progress",targetNode:m,oldValue:n,newValue:d,cancel:!1,targetPort:g};if($()&&(a={connector:jy(f),state:"Progress",targetNode:m,oldValue:n,newValue:d,cancel:a.cancel,targetPort:g}),!(this instanceof ww)){l="ConnectorSourceEnd"===this.endPoint?kp.sourcePointChange:kp.targetPointChange;this.commandHandler.triggerEvent(l,a)}if(e.target&&(p=wy(e.target,!0),u=wy(e.target,!1)),!a.cancel&&this.inAction&&void 0!==this.endPoint&&0!==h||0!==c)if(this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,e.source,this.currentPosition,this.selectedSegment,e.target,g),this.commandHandler.updateSelector(),e.target&&("ConnectorSourceEnd"===this.endPoint&&(cg(e.target)||dg(u))||"ConnectorTargetEnd"===this.endPoint&&(lg(e.target)||hg(p))))if(this.commandHandler.canDisconnect(this.endPoint,e,g,m)&&(i=this.commandHandler.disConnect(e.source,this.endPoint,this.canCancel),this.isConnected=!0),(y=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof Lv)(lg(y)&&"ConnectorTargetEnd"===this.endPoint||cg(y)&&"ConnectorSourceEnd"===this.endPoint)&&(i=this.commandHandler.connect(this.endPoint,e,this.canCancel),this.isConnected=!0);else this.checkConnect(y)&&(this.isConnected=!0,i=this.commandHandler.connect(this.endPoint,e,this.canCancel));else-1===this.endPoint.indexOf("Bezier")&&(this.isConnected=!0,i=this.commandHandler.disConnect(e.source,this.endPoint,this.canCancel),this.commandHandler.updateSelector());if(this.commandHandler.canEnableDefaultTooltip()){var v=this.getTooltipContent(e.position);this.commandHandler.showTooltip(e.source,e.position,v,"ConnectTool",this.isTooltipVisible),this.isTooltipVisible=!1}i&&(this.tempArgs=i)}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.getTooltipContent=function(t){return"X:"+Math.round(t.x)+" Y:"+Math.round(t.y)},e.prototype.checkConnect=function(t){return!(!hg(t)||"ConnectorTargetEnd"!==this.endPoint)||(!(!dg(t)||"ConnectorSourceEnd"!==this.endPoint)||!(t.constraints&Mp.None||hg(t)||dg(t)))},e.prototype.endAction=function(){t.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},e}(uw),mw=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.currentTarget=null,n.canCancel=!1,n.objectType=i,n}return cw(e,t),e.prototype.mouseDown=function(e){if(e.source instanceof Lv||e.source instanceof Gf){var i=this.commandHandler.getSelectedObject();this.commandHandler.selectObjects([e.source],e.info&&e.info.ctrlKey,i);var n={nodes:[],connectors:[]};e.source instanceof Lv?n.nodes.push(gb(e.source)):n.connectors.push(gb(e.source)),this.undoElement=gb(n)}else this.undoElement=gb(e.source);var r;if(this.undoParentElement=this.commandHandler.getSubProcess(e.source),"Port"===this.objectType&&(this.portId=e.sourceWrapper.id),$()){this.startPosition=this.currentPosition=this.prevPosition=e.position,this.initialOffset={x:0,y:0},e.source&&(r={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY});var o={source:gb(e.source),state:"Start",oldValue:r,newValue:{},target:gb(e.target),targetPosition:e.position,allowDrop:!0,cancel:!1};this.tempArgs=o}t.prototype.mouseDown.call(this,e),this.initialOffset={x:0,y:0}},e.prototype.mouseUp=function(e,i){return dw(this,void 0,void 0,function(){var n,r,o,s,a,l,h,c,d,p,u,f,g,m,y,v;return pw(this,function(b){switch(b.label){case 0:return $()&&"Port"!==this.objectType?(e.source&&(r={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY},n={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY}),f={source:jy(e.source),state:"Completed",oldValue:jy(this.tempArgs.oldValue),newValue:jy(r),target:jy(this.currentTarget),targetPosition:jy(this.currentPosition),allowDrop:!0,cancel:!1},[4,this.commandHandler.triggerEvent(kp.positionChange,f)]):[3,2];case 1:(o=b.sent())&&o.cancel&&(this.canCancel=!0),this.canCancel&&(s=this.tempArgs.oldValue.offsetX-e.source.wrapper.offsetX,a=this.tempArgs.oldValue.offsetY-e.source.wrapper.offsetY,this.commandHandler.dragSelectedObjects(s,a)),b.label=2;case 2:return this.checkPropertyValue(),h=!1,d={nodes:[],connectors:[]},"Port"===this.objectType?[3,7]:(e.source instanceof Lv||e.source instanceof Gf?(e.source instanceof Lv?d.nodes.push(gb(e.source)):d.connectors.push(gb(e.source)),l=gb(d),p=e.source.wrapper,l.offsetX=p.offsetX,l.offsetY=p.offsetY):l=gb(e.source),("helper"!==(c=this.commandHandler.renderContainerHelper(e.source)||e.source||this.commandHandler.renderContainerHelper(e.source)).id||l.nodes[0].isLane||l.nodes[0].isPhase)&&"helper"===c.id||c.offsetX===this.undoElement.offsetX&&c.offsetY===this.undoElement.offsetY&&c.sourcePoint===this.undoElement.sourcePoint&&c.targetPoint===this.undoElement.targetPoint||(e.source&&(r={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY},n={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY}),f={source:e.source,state:"Completed",oldValue:n,newValue:r,target:this.currentTarget,targetPosition:this.currentPosition,allowDrop:!0,cancel:!1},f={source:jy(e.source),state:"Completed",oldValue:jy(n),newValue:jy(r),target:jy(this.currentTarget),targetPosition:jy(this.currentPosition),allowDrop:f.allowDrop,cancel:f.cancel},$()&&(f=this.getBlazorPositionChangeEventArgs(f,this.currentTarget)),$()||this.commandHandler.triggerEvent(kp.positionChange,f),i||(this.commandHandler.startGroupAction(),h=!0,v={type:"PositionChanged",redoObject:gb(l),undoObject:gb(this.undoElement),category:"Internal"},l.nodes[0]&&l.nodes[0].processId&&(u={type:"SizeChanged",category:"Internal",undoObject:this.undoParentElement,redoObject:this.commandHandler.getSubProcess(e.source)},this.commandHandler.addHistoryEntry(u)),this.commandHandler.addHistoryEntry(v))),this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,0,0),this.commandHandler.removeSnap(),this.commandHandler.removeHighlighter(),e.source&&this.currentTarget&&ug(this.currentTarget)&&this.commandHandler.isDroppable(e.source,this.currentTarget)?(this.commandHandler.drop(this.currentElement,this.currentTarget,this.currentPosition),f={element:e.source,target:this.currentTarget,position:this.currentPosition,cancel:!1},$()?(f=function(t,e){if($()){var i=Iy(t.source)===Gf,n=jy(t.source),r=jy(t.target);e={element:i?{connector:n}:{node:n},target:i?{connector:r}:{node:r},position:e.position,cancel:e.cancel}}return e}(e,f),[4,this.commandHandler.triggerEvent(kp.drop,f)]):[3,4]):[3,6]);case 3:return f=b.sent()||f,[3,5];case 4:this.commandHandler.triggerEvent(kp.drop,f),b.label=5;case 5:if(!f.cancel&&e.source&&this.commandHandler.isParentAsContainer(this.currentTarget)){for(g=e.source instanceof Mv?e.source.nodes:[e.source],m=!1,y=0;y<g.length;y++)g[y].container||(m=!0,this.commandHandler.dropChildToContainer(this.currentTarget,g[y]),this.commandHandler.renderContainerHelper(g[y]));h&&this.commandHandler.isContainer&&m&&this.commandHandler.endGroupAction()}b.label=6;case 6:return e.source&&this.currentTarget&&this.commandHandler.dropAnnotation(e.source,this.currentTarget),this.commandHandler.updateSelector(),h&&!this.commandHandler.isContainer&&this.commandHandler.endGroupAction(),[3,8];case 7:d.nodes.push(gb(e.source)),e.portId=this.portId,l=gb(d),v={type:"PortPositionChanged",objectId:this.portId,redoObject:gb(l),undoObject:gb(this.undoElement),category:"Internal"},this.commandHandler.addHistoryEntry(v),b.label=8;case 8:return this.commandHandler.updateBlazorSelector(),t.prototype.mouseUp.call(this,e),[2]}})})},e.prototype.getBlazorPositionChangeEventArgs=function(t,e){return t={source:jy(t.source),state:t.state,oldValue:t.oldValue,newValue:t.newValue,target:Iy(e)===Gf?{connector:jy(e)}:{node:jy(e)},targetPosition:this.currentPosition,allowDrop:!0,cancel:!1}},e.prototype.mouseMove=function(e){t.prototype.mouseMove.call(this,e);var i,n,r=!1;(i=this.commandHandler.renderContainerHelper(e.source)||e.source)instanceof Lv||i instanceof Gf?i instanceof Lv?i.offsetX===this.undoElement.nodes[0].offsetX&&i.offsetY===this.undoElement.nodes[0].offsetY&&(r=!0):qd.equals(i.sourcePoint,this.undoElement.connectors[0].sourcePoint)&&qd.equals(i.targetPoint,this.undoElement.connectors[0].targetPoint)&&(r=!0):i.wrapper.offsetX===this.undoElement.wrapper.offsetX&&i.wrapper.offsetY===this.undoElement.wrapper.offsetY&&(r=!0),i&&(n={offsetX:i.wrapper.offsetX,offsetY:i.wrapper.offsetY});var o={source:i,state:"Start",oldValue:n,newValue:n,target:e.target,targetPosition:e.position,allowDrop:!0,cancel:!1};if(o={source:jy(i),state:"Start",oldValue:jy(n),newValue:jy(n),target:e.target,targetPosition:e.position,allowDrop:o.allowDrop,cancel:o.cancel},r&&!$()&&this.commandHandler.triggerEvent(kp.positionChange,o),this.currentPosition=e.position,"Port"!==this.objectType){this.currentPosition.x,this.prevPosition.x,this.currentPosition.y,this.prevPosition.y;var s,a=this.initialOffset.x+(this.currentPosition.x-this.prevPosition.x),l=this.initialOffset.y+(this.currentPosition.y-this.prevPosition.y);this.commandHandler.dragOverElement(e,this.currentPosition),this.commandHandler.disConnect(e.source),this.commandHandler.removeSnap();var h=void 0,c=this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,a,l);this.initialOffset.x=a-c.x,this.initialOffset.y=l-c.y,i&&(s={offsetX:i.wrapper.offsetX,offsetY:i.wrapper.offsetY},h={offsetX:i.wrapper.offsetX+c.x,offsetY:i.wrapper.offsetY+c.y}),this.currentTarget&&e.target!==this.currentTarget&&this.commandHandler.removeChildFromBPmn(e.source,e.target,this.currentTarget),this.currentTarget=e.target;var d={source:i,state:"Progress",oldValue:s,newValue:h,target:e.target,targetPosition:e.position,allowDrop:!0,cancel:!1};if($()&&(d=this.getBlazorPositionChangeEventArgs(d,e.target)),$()||this.commandHandler.triggerEvent(kp.positionChange,d),!d.cancel&&!this.canCancel){this.blocked=!this.commandHandler.dragSelectedObjects(c.x,c.y);var p=!this.commandHandler.mouseOver(this.currentElement,this.currentTarget,this.currentPosition);this.blocked=this.blocked||p}if(this.commandHandler.removeStackHighlighter(),this.commandHandler.renderStackHighlighter(e),this.currentTarget&&e.source!==this.currentTarget&&this.commandHandler.isDroppable(e.source,this.currentTarget)&&"helper"!==e.source.id){var u=e.source instanceof Mv?e.source.nodes[0]:e.source;this.commandHandler.isParentAsContainer(u,!0)||"SwimLane"===u.shape.type||u.shape.isPhase||(this.currentTarget.isLane?this.commandHandler.renderStackHighlighter(e,this.currentTarget):this.commandHandler.drawHighlighter(this.currentTarget))}else this.commandHandler.removeHighlighter();if(this.commandHandler.canEnableDefaultTooltip()){var f=this.getTooltipContent(e.source);this.commandHandler.showTooltip(e.source,e.position,f,"MoveTool",this.isTooltipVisible),this.isTooltipVisible=!1}}else{var g=op(),m=e.source;ap(g,-m.rotateAngle,m.offsetX,m.offsetY);var y=sp(g,{x:this.prevPosition.x,y:this.prevPosition.y}),v=sp(g,{x:e.position.x,y:e.position.y});this.commandHandler.portDrag(e.source,e.sourceWrapper,v.x-y.x,v.y-y.y)}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.getTooltipContent=function(t){return"X:"+Math.round(t.wrapper.bounds.x)+" Y:"+Math.round(t.wrapper.bounds.y)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.endAction=function(){t.prototype.endAction.call(this),this.currentTarget=null,this.prevPosition=null},e}(uw),yw=function(t){function e(e){return t.call(this,e,!0)||this}return cw(e,t),e.prototype.mouseDown=function(e){if($()){var i={rotateAngle:(this.commandHandler.renderContainerHelper(e.source)||e.source).wrapper.rotateAngle},n={source:jy(e.source),state:"Start",oldValue:i,newValue:void 0,cancel:!1};this.tempArgs=n,this.tempArgs&&this.tempArgs.cancel&&(this.canCancel=!0)}if(this.undoElement=gb(e.source),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var r=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],[]),o=0;o<r.length;o++){var s=this.commandHandler.cloneChild(r[o].id);this.childTable[r[o].id]=gb(s)}t.prototype.mouseDown.call(this,e)},e.prototype.mouseUp=function(e){return dw(this,void 0,void 0,function(){var i,n,r,o,s,a,l,h;return pw(this,function(c){switch(c.label){case 0:return this.checkPropertyValue(),$()?(i=this.commandHandler.renderContainerHelper(e.source)||e.source,s={rotateAngle:this.tempArgs.oldValue.rotateAngle},n={rotateAngle:i.wrapper.rotateAngle},a={source:jy(e.source),state:"Completed",oldValue:s,newValue:n,cancel:!1},[4,this.commandHandler.triggerEvent(kp.rotateChange,a)]):[3,2];case 1:(r=c.sent())&&r.cancel&&(this.canCancel=!0),this.canCancel&&this.commandHandler.rotatePropertyChnage(this.tempArgs.oldValue.rotateAngle),c.label=2;case 2:return o=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.rotateAngle!==o.wrapper.rotateAngle&&(s={rotateAngle:o.wrapper.rotateAngle},a={source:e.source,state:"Completed",oldValue:s,newValue:s,cancel:!1},$()||this.commandHandler.triggerEvent(kp.rotateChange,a),void 0,l=gb(e.source),h={type:"RotationChanged",redoObject:gb(l),undoObject:gb(this.undoElement),category:"Internal",childTable:this.childTable},this.commandHandler.addHistoryEntry(h),this.commandHandler.updateSelector()),this.commandHandler.updateBlazorSelector(),this.canCancel=void 0,this.tempArgs=void 0,t.prototype.mouseUp.call(this,e),[2]}})})},e.prototype.mouseMove=function(e){var i;if(t.prototype.mouseMove.call(this,e),i=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.rotateAngle===i.wrapper.rotateAngle){var n={rotateAngle:i.wrapper.rotateAngle},r={source:e.source,state:"Start",oldValue:n,newValue:n,cancel:!1};$()||this.commandHandler.triggerEvent(kp.rotateChange,r)}this.currentPosition=e.position;var o={x:i.wrapper.offsetX,y:i.wrapper.offsetY},s=qd.findAngle(o,this.currentPosition)+90,a=this.commandHandler.snapAngle(s);s=((s=0!==a?a:s)+360)%360;var l={rotateAngle:i.wrapper.rotateAngle},h={rotateAngle:s},c=(e.source,!1),d={source:jy(e.source),state:"Progress",oldValue:jy(l),newValue:jy(h),cancel:c};if($()||this.commandHandler.triggerEvent(kp.rotateChange,d),(!$()&&!d.cancel||$()&&!this.canCancel)&&(this.blocked=!this.commandHandler.rotateSelectedItems(s-i.wrapper.rotateAngle)),this.commandHandler.canEnableDefaultTooltip()){var p=this.getTooltipContent(e.source);this.commandHandler.showTooltip(e.source,e.position,p,"RotateTool",this.isTooltipVisible),this.isTooltipVisible=!1}return!this.blocked},e.prototype.getTooltipContent=function(t){return Math.round(t.rotateAngle%360).toString()+"°"},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e}(uw),vw=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.initialBounds=new np,n.canCancel=!1,n.corner=i,n}return cw(e,t),e.prototype.mouseDown=function(e){var i;if($()){this.startPosition=this.currentPosition=this.prevPosition=e.position,this.currentElement=e.source,this.initialBounds.x=e.source.wrapper.offsetX,this.initialBounds.y=e.source.wrapper.offsetY,this.initialBounds.height=e.source.wrapper.actualSize.height,this.initialBounds.width=e.source.wrapper.actualSize.width,e.source&&(i={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY,width:e.source.wrapper.actualSize.width,height:e.source.wrapper.actualSize.height});var n={source:jy(e.source),state:"Start",oldValue:i,newValue:jy(this.currentElement),cancel:!1};this.tempArgs=n}if(this.undoElement=gb(e.source),this.undoParentElement=this.commandHandler.getSubProcess(e.source),t.prototype.mouseDown.call(this,e),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var r=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],[]),o=0;o<r.length;o++){var s=this.commandHandler.cloneChild(r[o].id);this.childTable[r[o].id]=gb(s)}this.commandHandler.checkSelection(e.source,this.corner),t.prototype.mouseDown.call(this,e),this.initialBounds.x=e.source.wrapper.offsetX,this.initialBounds.y=e.source.wrapper.offsetY,this.initialBounds.height=e.source.wrapper.actualSize.height,this.initialBounds.width=e.source.wrapper.actualSize.width},e.prototype.mouseUp=function(e,i){return dw(this,void 0,void 0,function(){var n,r,o,s,a,l,h,c,d,p,u;return pw(this,function(f){switch(f.label){case 0:return $()?(d=gb(e.source),n={width:e.source.wrapper.actualSize.width,height:e.source.wrapper.actualSize.height,offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY},c={oldValue:this.tempArgs.oldValue,newValue:n,cancel:!1,source:jy(e.source),state:"Completed"},this.canCancel?[3,2]:[4,this.commandHandler.triggerEvent(kp.sizeChange,c)]):[3,3];case 1:(r=f.sent())&&r.cancel&&(o=this.tempArgs.oldValue.width/d.wrapper.actualSize.width,s=this.tempArgs.oldValue.height/d.wrapper.actualSize.height,this.commandHandler.scaleSelectedItems(o,s,this.getPivot(this.corner))),f.label=2;case 2:this.tempArgs=void 0,this.canCancel=void 0,f.label=3;case 3:return this.checkPropertyValue(),this.commandHandler.removeSnap(),this.commandHandler.updateSelector(),a=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.offsetX===a.wrapper.offsetX&&this.undoElement.offsetY===a.wrapper.offsetY||($()||(l=this.updateSize(e.source,this.currentPosition,this.prevPosition,this.corner,this.initialBounds),this.blocked=this.scaleObjects(l.width,l.height,this.corner,this.currentPosition,this.prevPosition,a),h={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY,width:e.source.wrapper.actualSize.width,height:e.source.wrapper.actualSize.height},c={source:jy(e.source),state:"Completed",oldValue:h,newValue:h,cancel:!1},this.commandHandler.triggerEvent(kp.sizeChange,c)),d=gb(e.source),p={type:"SizeChanged",redoObject:gb(d),undoObject:gb(this.undoElement),category:"Internal",childTable:this.childTable},i||(this.commandHandler.startGroupAction(),this.commandHandler.addHistoryEntry(p),d.nodes[0]&&d.nodes[0].processId&&(u={type:"SizeChanged",redoObject:this.commandHandler.getSubProcess(e.source),undoObject:this.undoParentElement,category:"Internal"},this.commandHandler.addHistoryEntry(u)),this.commandHandler.endGroupAction())),this.commandHandler.updateBlazorSelector(),t.prototype.mouseUp.call(this,e),[2,!this.blocked]}})})},e.prototype.mouseMove=function(e){var i;if(t.prototype.mouseMove.call(this,e),i=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.offsetX===i.wrapper.offsetX&&this.undoElement.offsetY===i.wrapper.offsetY){var n={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY,width:e.source.wrapper.actualSize.width,height:e.source.wrapper.actualSize.height},r={source:e.source,state:"Start",oldValue:n,newValue:this.currentElement,cancel:!1};$()||this.commandHandler.triggerEvent(kp.sizeChange,r)}this.currentPosition=e.position;var o={x:this.currentPosition.x-this.startPosition.x,y:this.currentPosition.y-this.startPosition.y};o=Eb(-this.currentElement.wrapper.rotateAngle,void 0,void 0,o);this.currentElement.wrapper.actualSize.width,o.x,this.currentElement.wrapper.actualSize.width,this.currentElement.wrapper.actualSize.height,o.y,this.currentElement.wrapper.actualSize.height;o=this.getChanges(o),this.commandHandler.removeSnap();var s=this.updateSize(e.source,this.startPosition,this.currentPosition,this.corner,this.initialBounds);if(this.blocked=!this.scaleObjects(s.width,s.height,this.corner,this.startPosition,this.currentPosition,i),this.commandHandler.canEnableDefaultTooltip()){var a=this.getTooltipContent(e.source);this.commandHandler.showTooltip(e.source,e.position,a,"ResizeTool",this.isTooltipVisible),this.isTooltipVisible=!1}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.getTooltipContent=function(t){return"W:"+Math.round(t.wrapper.bounds.width)+" H:"+Math.round(t.wrapper.bounds.height)},e.prototype.getChanges=function(t){switch(this.corner){case"ResizeEast":return{x:t.x,y:0};case"ResizeSouthEast":return t;case"ResizeSouth":return{x:0,y:t.y};case"ResizeNorth":return{x:0,y:-t.y};case"ResizeNorthEast":return{x:t.x,y:-t.y};case"ResizeNorthWest":return{x:-t.x,y:-t.y};case"ResizeWest":return{x:-t.x,y:0};case"ResizeSouthWest":return{x:-t.x,y:t.y}}return t},e.prototype.scaleObjects=function(t,e,i,n,r,o){o instanceof Mv&&1===o.nodes.length&&o.nodes[0].constraints&bp.AspectRatio&&("ResizeWest"===i||"ResizeEast"===i||"ResizeNorth"===i||"ResizeSouth"===i?1===e&&1===t||(e=t=Math.max(1===e?0:e,1===t?0:t)):e=t=n!==r?Math.max(e,t):0);var s={offsetX:o.offsetX,offsetY:o.offsetY,width:o.width,height:o.height};this.blocked=this.commandHandler.scaleSelectedItems(t,e,this.getPivot(this.corner));var a,l,h={offsetX:o.offsetX,offsetY:o.offsetY,width:o.width,height:o.height};return a={source:o,state:"Progress",oldValue:s,newValue:h,cancel:!1},l={source:jy(o),state:"Progress",oldValue:jy(s),newValue:jy(h),cancel:a.cancel},$()||this.commandHandler.triggerEvent(kp.sizeChange,l),(l.cancel||this.canCancel)&&this.commandHandler.scaleSelectedItems(1/t,1/e,this.getPivot(this.corner)),this.blocked},e}(uw),bw=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.sourceObject=i,n}return cw(e,t),e.prototype.mouseDown=function(e){t.prototype.mouseDown.call(this,e),this.inAction=!0,this.commandHandler.setFocus()},e.prototype.mouseMove=function(e){var i;t.prototype.mouseMove.call(this,e);var n={offsetX:this.currentPosition.x,width:3,height:3,offsetY:this.currentPosition.y};if(this.drawingObject||(this.drawingObject=this.commandHandler.drawObject(n)),this.inAction&&!1===qd.equals(this.currentPosition,this.prevPosition)){var r=np.toBounds([this.prevPosition,this.currentPosition]);(i=this.commandHandler.checkBoundaryConstraints(void 0,void 0,r))&&this.commandHandler.updateNodeDimension(this.drawingObject,r)}return i},e.prototype.mouseUp=function(e){this.checkPropertyValue();var i=np.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.checkBoundaryConstraints(void 0,void 0,i),this.drawingObject&&this.drawingObject instanceof Lv&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.drawingObject=null),this.commandHandler.updateBlazorSelector(),t.prototype.mouseUp.call(this,e),this.inAction=!1},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e.prototype.mouseLeave=function(t){this.inAction&&this.mouseUp(t)},e}(uw),ww=function(t){function e(e,i,n){var r=t.call(this,e,i)||this;return r.sourceObject=n,r}return cw(e,t),e.prototype.mouseDown=function(e){return dw(this,void 0,void 0,function(){return pw(this,function(i){return t.prototype.mouseDown.call(this,e),this.inAction=!0,this.commandHandler.setFocus(),[2]})})},e.prototype.mouseMove=function(e){if(this.commandHandler.enableServerDataBinding(!1),this.inAction){var i={sourcePoint:this.currentPosition,targetPoint:this.currentPosition};this.drawingObject||(this.drawingObject=this.commandHandler.drawObject(i)),e.source=this.drawingObject,(e.target||e.actualObject&&e.sourceWrapper&&Dy(e.actualObject,e.sourceWrapper))&&("ConnectorTargetEnd"!==this.endPoint||lg(e.target))&&this.commandHandler.connect(this.endPoint,e),this.endPoint="ConnectorTargetEnd"}return this.inAction||(this.commandHandler.updateSelector(),e.source&&e.sourceWrapper&&this.commandHandler.renderHighlighter(e,!0)),t.prototype.mouseMove.call(this,e),this.commandHandler.enableServerDataBinding(!0),!this.blocked},e.prototype.mouseUp=function(e){return dw(this,void 0,void 0,function(){return pw(this,function(i){return this.commandHandler.enableServerDataBinding(!1),this.checkPropertyValue(),this.drawingObject&&this.drawingObject instanceof Gf&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.drawingObject=null),this.commandHandler.updateBlazorSelector(),this.inAction=!1,this.commandHandler.enableServerDataBinding(!0),t.prototype.mouseUp.call(this,e),[2]})})},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e.prototype.mouseLeave=function(t){this.inAction&&this.mouseUp(t)},e}(gw),Sw=function(t){function e(e){return t.call(this,e,!0)||this}return cw(e,t),e.prototype.mouseDown=function(e){t.prototype.mouseDown.call(this,e),this.commandHandler.clearSelection();var i={shape:{type:"Text"},offsetX:this.currentPosition.x,offsetY:this.currentPosition.y};e.source||(this.drawingNode=this.commandHandler.drawObject(i))},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.drawingNode)this.drawingNode.style.strokeColor="black",this.drawingNode.style.strokeDashArray="2 2",this.drawingNode.style.fill="transparent";else{var i={shape:{type:"Text"},offsetX:this.currentPosition.x,width:30,height:30,style:{strokeDashArray:"2 2",fill:"transparent"},offsetY:this.currentPosition.y};this.drawingNode=this.commandHandler.drawObject(i)}if(this.inAction&&!1===qd.equals(this.currentPosition,this.prevPosition)){var n=np.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.updateNodeDimension(this.drawingNode,n)}return!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.drawingNode?(this.drawingNode.style.strokeColor="none",this.drawingNode.style.fill="none"):this.drawingNode=e.source,this.drawingNode&&(this.drawingNode instanceof Lv||this.drawingNode instanceof Gf)&&this.commandHandler.addText(this.drawingNode,this.currentPosition),t.prototype.mouseUp.call(this,e),this.inAction=!1},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e}(uw),xw=function(t){function e(e,i){var n=t.call(this,e)||this;return n.zooming=i,n}return cw(e,t),e.prototype.mouseDown=function(e){t.prototype.mouseDown.call(this,e),this.inAction=!0},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction)if(this.zooming||!1!==qd.equals(this.currentPosition,this.prevPosition)){if(e.moveTouches&&e.moveTouches.length&&e.moveTouches.length>=2){var i=e.startTouches[0],n=e.startTouches[1],r=e.moveTouches[0],o=e.moveTouches[1],s=this.getDistance(r,o)/this.getDistance(i,n),a=e.position;this.commandHandler.zoom(s,0,0,a),this.updateTouch(i,r),this.updateTouch(n,o)}}else{var l=this.currentPosition.x-this.prevPosition.x,h=this.currentPosition.y-this.prevPosition.y;this.commandHandler.scroll(l,h,this.currentPosition)}return!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue(),t.prototype.mouseUp.call(this,e),this.inAction=!1},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e.prototype.getDistance=function(t,e){var i=e.pageX-t.pageX,n=e.pageY-t.pageY;return Math.sqrt(i*i+n*n)},e.prototype.updateTouch=function(t,e){t.pageX=e.pageX,t.pageY=e.pageY},e}(uw),Cw=function(t){function e(e){return t.call(this,e,!0)||this}return cw(e,t),e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.commandHandler.initExpand(e),t.prototype.mouseUp.call(this,e)},e}(uw),Pw=function(t){function e(e){return t.call(this,e,!0)||this}return cw(e,t),e.prototype.mouseUp=function(e){this.checkPropertyValue(),window.open(e.sourceWrapper.hyperlink.link,"_blank").focus(),t.prototype.mouseUp.call(this,e)},e}(uw),Ow=function(t){function e(e){return t.call(this,e,!0)||this}return cw(e,t),e.prototype.mouseDown=function(e){if(t.prototype.mouseDown.call(this,e),this.inAction=!0,this.drawingObject){var i=void 0,n=this.drawingObject.shape;i={x:(i=n.points[n.points.length-1]).x,y:i.y},this.drawingObject.shape.points.push(i)}else{this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var r={offsetX:this.currentPosition.x,offsetY:this.currentPosition.y,width:5,height:5,style:{strokeColor:"black",strokeWidth:1},shape:{type:"Basic",shape:"Polygon",points:[{x:this.startPoint.x,y:this.startPoint.y},{x:this.currentPosition.x,y:this.currentPosition.y}]}};$()&&"Basic"===r.shape.type&&(r.shape.basicShape="Polygon"),this.drawingObject=this.commandHandler.drawObject(r)}},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction){var i=this.drawingObject.shape;if(this.drawingObject&&this.currentPosition&&(i.points[i.points.length-1].x=this.currentPosition.x,i.points[i.points.length-1].y=this.currentPosition.y,this.drawingObject.wrapper.children[0].data=Yd(this.drawingObject.shape.points),this.inAction&&!1===qd.equals(this.currentPosition,this.prevPosition))){var n=np.toBounds(this.drawingObject.shape.points);this.commandHandler.updateNodeDimension(this.drawingObject,n)}}return!0},e.prototype.mouseUp=function(e,i){this.checkPropertyValue(),t.prototype.mouseMove.call(this,e),this.inAction&&(this.inAction=!1,this.drawingObject&&this.commandHandler.addObjectToDiagram(this.drawingObject)),this.endAction()},e.prototype.mouseWheel=function(e){t.prototype.mouseWheel.call(this,e),this.mouseMove(e)},e.prototype.endAction=function(){this.inAction=!1,this.drawingObject=null},e}(uw),Ew=function(t){function e(e){return t.call(this,e,!0)||this}return cw(e,t),e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction){var i=this.drawingObject;i.targetPoint=this.currentPosition,this.commandHandler.updateConnectorPoints(i)}return!0},e.prototype.mouseDown=function(e){if(t.prototype.mouseDown.call(this,e),this.inAction=!0,this.drawingObject){var i=this.drawingObject,n=void 0;(n=new kf(i,"segments",{type:"Straight"},!0)).point=this.currentPosition,i.segments[i.segments.length-1]=n}else{var r={id:"Connector",type:"Straight",sourcePoint:this.currentPosition,targetPoint:this.currentPosition};this.drawingObject=this.commandHandler.drawObject(r)}},e.prototype.mouseWheel=function(e){t.prototype.mouseWheel.call(this,e),this.mouseMove(e)},e.prototype.mouseUp=function(e){if(this.checkPropertyValue(),t.prototype.mouseMove.call(this,e),this.inAction&&this.drawingObject){var i=this.drawingObject;i.segments[i.segments.length-1].point={x:0,y:0},this.commandHandler.addObjectToDiagram(this.drawingObject)}this.endAction()},e.prototype.endAction=function(){this.drawingObject=null,this.inAction=!1},e}(uw),Lw=function(t){function e(e){return t.call(this,e,!0)||this}return cw(e,t),e.prototype.mouseDown=function(e){this.inAction=!0,this.undoElement=gb(e.source),this.annotationId=e.sourceWrapper.id,t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){t.prototype.mouseMove.call(this,e);var i=this.currentPosition.x-this.prevPosition.x,n=this.currentPosition.y-this.prevPosition.y,r=e.source;if(r instanceof Lv){var o=op();ap(o,-r.rotateAngle,0,0);var s=sp(o,{x:i,y:n});i=s.x,n=s.y}return this.inAction&&(this.commandHandler.labelDrag(e.source,e.sourceWrapper,i,n),this.commandHandler.updateSelector()),this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue();var i=e.source;this.inAction=!1;var n={type:"AnnotationPropertyChanged",objectId:this.annotationId,undoObject:gb(this.undoElement),category:"Internal",redoObject:gb(i)};this.commandHandler.addHistoryEntry(n),t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e}(uw),Iw=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.corner=i,n}return cw(e,t),e.prototype.mouseDown=function(e){this.inAction=!0;var i=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0];this.annotationId=e.source.wrapper.children[0].id,this.undoElement=gb(i);var n=e.source.wrapper.children[0];this.initialBounds={x:n.offsetX,y:n.offsetY,width:n.actualSize.width,height:n.actualSize.height},t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){return t.prototype.mouseMove.call(this,e),this.inAction&&this.resizeObject(e),!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue();var i=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0];this.inAction=!1;var n={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:gb(i),undoObject:gb(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(n),t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.resizeObject=function(t){var e;e=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0];var i,n,r=t.source.wrapper.children[0],o={x:r.offsetX,y:r.offsetY},s=r.rotateAngle;s=((s+=e instanceof Lv?e.rotateAngle:0)+360)%360;var a=op();ap(a,s,o.x,o.y);var l=this.corner.slice(5),h=this.updateSize(r,this.startPosition,this.currentPosition,l,this.initialBounds,s),c=r.offsetX-r.actualSize.width*r.pivot.x,d=r.offsetY-r.actualSize.height*r.pivot.y,p=this.getPivot(l),u=sp(a,p={x:c+r.actualSize.width*p.x,y:d+r.actualSize.height*p.y});h.x=u.x,h.y=u.y,i=(i=h.width)<0?1:i,n=(n=h.height)<0?1:n,this.commandHandler.labelResize(e,t.source.annotation,i,n,h,t.source),this.commandHandler.updateSelector()},e}(uw),Tw=function(t){function e(e){return t.call(this,e,!0)||this}return cw(e,t),e.prototype.mouseDown=function(e){this.inAction=!0,this.annotationId=e.source.wrapper.children[0].id;var i=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0];this.undoElement=gb(i),t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),e.source&&this.inAction){var i,n=e.source.nodes[0]?e.source.nodes[0]:e.source.connectors[0];i=e.source.annotation,this.commandHandler.labelRotate(n,i,this.currentPosition,e.source),this.commandHandler.updateSelector()}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.inAction=!1;var i=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0],n={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:gb(i),undoObject:gb(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(n),t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e}(uw),Aw=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Bw=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.endPoint=i,n}return Aw(e,t),e.prototype.mouseDown=function(e){var i,n=!0;if(e.source&&e.source.connectors&&(i=e.source.connectors[0]),e.info&&(n=e.info.ctrlKey&&"Orthogonal"!==e.actualObject.type),i&&n){this.inAction=!0,this.undoElement=gb(e.source),t.prototype.mouseDown.call(this,e);for(var r=0;r<i.segments.length;r++){var o=i.segments[r];if("OrthoThumb"===this.endPoint)for(var s=0;s<o.points.length-1;s++){var a={x:0,y:0};a.x=(o.points[s].x+o.points[s+1].x)/2,a.y=(o.points[s].y+o.points[s+1].y)/2,rw(this.currentPosition,a,30)&&(this.selectedSegment=o,this.segmentIndex=s)}else rw(this.currentPosition,o.point,10)&&(this.selectedSegment=o)}}},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.currentPosition=e.position,this.currentPosition&&this.prevPosition){var i=this.currentPosition.y-this.prevPosition.y,n=this.currentPosition.x-this.prevPosition.x;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var r=void 0;if(e.source&&e.source.connectors&&(r=e.source.connectors[0]),this.inAction&&void 0!==this.selectedSegment&&void 0!==this.endPoint&&(0!==n||0!==i)){if("OrthoThumb"===this.endPoint)this.blocked=!this.dragOrthogonalSegment(r,this.selectedSegment,this.currentPosition,this.segmentIndex);else{var o=this.currentPosition.x-this.selectedSegment.point.x,s=this.currentPosition.y-this.selectedSegment.point.y,a=r.segments.indexOf(this.selectedSegment);this.blocked=!this.commandHandler.dragControlPoint(r,o,s,!1,a)}this.commandHandler.updateSelector()}}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseUp=function(e){var i,n;if(e.source&&e.source.connectors&&(n={segments:(i=e.source.connectors[0]).segments}),e&&e.source&&e.info&&e.info.ctrlKey&&e.info.shiftKey&&"Straight"===i.type)this.addOrRemoveSegment(i,this.currentPosition);else if("OrthoThumb"===this.endPoint&&this.selectedSegment){var r=i.segments.indexOf(this.selectedSegment),o=i.segments[r-1],s=i.segments[r+1];if(r===i.segments.length-2&&this.updateLastSegment(i,this.selectedSegment))i.segments.splice(i.segments.length-2,1);else if(o&&Math.abs(o.length)<5)1!==r&&this.removePrevSegment(i,r);else if(s){var a=qd.distancePoints(s.points[0],s.points[1]),l=s.length||0===s.length?s.length:a;Math.abs(l)<=5&&this.removeNextSegment(i,r)}this.commandHandler.updateEndPoint(i,n)}if(this.undoElement){var h={type:"SegmentChanged",redoObject:gb(e.source),undoObject:this.undoElement,category:"Internal"};this.commandHandler.addHistoryEntry(h)}t.prototype.mouseUp.call(this,e)},e.prototype.removePrevSegment=function(t,e){var i=t.segments[e-2],n=t.segments[e+1];if(!((n.length||0===n.length?n.length:qd.distancePoints(n.points[0],n.points[1]))<=5)){var r=t.segments.slice(e-1,e+1),o={element:t,removeSegments:r,type:"Removal",cancel:!1};if($()&&(o={element:jy(t),removeSegments:jy(r),type:"Removal",cancel:o.cancel}),this.commandHandler.triggerEvent(kp.segmentCollectionChange,o),!o.cancel){var s=t.segments[e+1];t.segments.splice(e-1,2);var a=this.selectedSegment;"Left"===a.direction||"Right"===a.direction?(i.points[i.points.length-1].x=s.points[0].x,s.points[0].y=i.points[i.points.length-1].y):(i.points[i.points.length-1].y=s.points[0].y,s.points[0].x=i.points[i.points.length-1].x),(a.length||0===a.length)&&this.findSegmentDirection(i),this.findSegmentDirection(s)}}},e.prototype.findSegmentDirection=function(t){t.direction&&(t.length||0===t.length)&&(t.length=qd.distancePoints(t.points[0],t.points[t.points.length-1]),t.direction=qd.direction(t.points[0],t.points[t.points.length-1]))},e.prototype.removeNextSegment=function(t,e){var i,n,r=this.selectedSegment,o=t.segments[e-1],s=t.segments[e+2],a=t.segments[e+1];if(a.length||0===a.length?(i=t.segments.slice(e,2),n={element:t,removeSegments:i,type:"Removal",cancel:!1},n={element:jy(t),removeSegments:jy(i),type:"Removal",cancel:!1},$()&&(n={element:jy(t),removeSegments:jy(i),type:"Removal",cancel:!1}),this.commandHandler.triggerEvent(kp.segmentCollectionChange,n),n.cancel||(t.segments.splice(e,2),"Top"===r.direction||"Bottom"===r.direction?(s.points[0].y=r.points[0].y,o.points[o.points.length-1].x=s.points[0].x):(s.points[0].x=r.points[0].x,o.points[o.points.length-1].y=s.points[0].y))):(i=t.segments.slice(e+1,1),n={element:t,removeSegments:i,type:"Removal",cancel:!1},$()&&(n={element:t,removeSegments:i,type:"Removal",cancel:!1}),this.commandHandler.triggerEvent(kp.segmentCollectionChange,n),n.cancel||(t.segments.splice(e+1,1),"Top"===r.direction||"Bottom"===r.direction?o.points[o.points.length-1].x=a.points[a.points.length-1].x:o.points[o.points.length-1].y=a.points[a.points.length-1].y,this.findSegmentDirection(o),r.length=r.direction=null)),o&&s&&!n.cancel&&(o.length=qd.distancePoints(o.points[0],s.points[0]),o.direction=qd.direction(o.points[0],s.points[0]),s.length||0===s.length)){s.length=qd.distancePoints(o.points[o.points.length-1],s.points[s.points.length-1]);var l=o.points,h=s.points;s.direction=qd.direction(l[l.length-1],h[h.length-1])}},e.prototype.addOrRemoveSegment=function(t,e){for(var i,n,r={segments:t.segments},o=0;o<t.segments.length;o++){rw(e,(s=t.segments[o]).point,t.hitPadding)&&(n=o,i=!0)}if(i&&void 0!==n){if(t.segments&&t.segments[n]&&"Straight"===t.segments[n].type){var s=t.segments[n],a=t.segments[n+1];a&&(t.segments.splice(n,1),a.points[0]=s.points[0])}}else{this.commandHandler.enableServerDataBinding(!1);var l=this.findIndex(t,e);if(t.segments&&t.segments[l]&&"Straight"===t.segments[l].type){s=t.segments[l];var h=new kf(t,"segments",{type:"Straight",point:e},!0);h.points[0]=s.points[0],h.points[1]=e,s.points[0]=e,t.segments.splice(l,0,h),i=!0}this.commandHandler.enableServerDataBinding(!0)}i&&this.commandHandler.updateEndPoint(t,r)},e.prototype.findIndex=function(t,e){for(var i=[],n=0;n<t.segments.length;n++){var r=t.segments[n],o=np.toBounds([r.points[0],r.points[1]]);o.Inflate(t.hitPadding),o.containsPoint(e)&&i.push(r)}if(1===i.length)return t.segments.indexOf(i[0]);var s=void 0,a=void 0,l=void 0,h=void 0,c=void 0,d=void 0;for(n=0;n<i.length;n++)h=i[n],c=(e.y-h.points[0].y)/(h.points[1].y-e.y),d=(e.x-h.points[0].x)/(h.points[1].x-e.x),s=Math.abs(c-d),0===n&&(a=s,l=0),s<a&&(a=s,l=n);return t.segments.indexOf(i[l])},e.prototype.dragOrthogonalSegment=function(t,e,i,n){var r={x:0,y:0},o={segments:t.segments};r.x=(e.points[n].x+e.points[n+1].x)/2,r.y=(e.points[n].y+e.points[n+1].y)/2;var s=i.y-r.y,a=i.x-r.x,l=t.segments.indexOf(e),h=!1;e.points[0].y.toFixed(2),e.points[1].y.toFixed(2);return-1!==l&&(0===l&&1===t.segments.length&&2===e.points.length?(l=this.addSegments(t,e,a,s,l),h=!0):l!==t.segments.length-1||null!==e.direction&&null!==e.length?0===l&&(l=this.insertFirstSegment(t,e,a,s,l),h=!0):(l=this.addTerminalSegment(t,e,a,s,n),h=!0),l&&(h&&(this.selectedSegment=e=t.segments[l],this.segmentIndex=0),this.updateAdjacentSegments(t,l,a,s),this.commandHandler.updateEndPoint(t,o))),!0},e.prototype.addSegments=function(t,e,i,n,r){var o,s,a,l=[],h=qd.distancePoints(e.points[0],e.points[1]),c=qd.direction(e.points[0],e.points[1]);l.push(new Df(t,"segments",{type:"Orthogonal",direction:c,length:h/4},!0)),s=e.points[0].y===e.points[1].y?n>0?"Bottom":"Top":i>0?"Right":"Left",a=e.points[0].x===e.points[1].x?n:i,l.push(new Df(t,"segments",{type:"Orthogonal",direction:s,length:a},!0)),l.push(new Df(t,"segments",{type:"Orthogonal",direction:c,length:h/2},!0));var d={element:t,addSegments:l,type:"Addition",cancel:!1};return $()&&(d={addSegments:jy(l),type:"Addition",cancel:d.cancel,element:jy(t)}),this.commandHandler.triggerEvent(kp.segmentCollectionChange,d),d.cancel||(t.segments=l.concat(t.segments),o=r+2),o},e.prototype.insertFirstSegment=function(t,e,i,n,r){var o,s,a,l,h,c=[];if(t.sourcePortID&&e.length&&t.segments[0].points.length>2)for(var d=void 0,p=0;p<e.points.length-1;p++){var u=qd.distancePoints(e.points[p],e.points[p+1]),f=qd.direction(e.points[p],e.points[p+1]);0===(h=new Df(t,"segments",{type:"Orthogonal",direction:f,length:u},!0)).length&&(!d||"Top"!==d.direction&&"Bottom"!==d.direction?h.direction=n>0?"Bottom":"Top":h.direction=i>0?"Right":"Left"),d=h,c.push(h)}else a={type:"Orthogonal",direction:e.direction,length:e.length/3},c.push(new Df(t,"segments",a,!0)),"Bottom"===e.direction||"Top"===e.direction?(s=Math.abs(i),o=i>0?"Right":"Left"):(s=Math.abs(n),o=n>0?"Bottom":"Top"),h=new Df(t,"segments",{type:"Orthogonal",direction:o,length:s},!0),c.push(h);var g={element:t,addSegments:c,type:"Addition",cancel:!1};if($()&&(g={element:jy(t),addSegments:jy(c),type:"Addition",cancel:g.cancel}),this.commandHandler.triggerEvent(kp.segmentCollectionChange,g),!g.cancel){if(t.sourcePortID&&e.length&&t.segments[0].points.length>2)t.segments.splice(0,1),l=1;else{var m=t.segments[1];m&&m.length&&(m.length=o!==m.direction?m.length+s:m.length-s),l=2,e.length=2*e.length/3}t.segments=c.concat(t.segments)}return l},e.prototype.updateAdjacentSegments=function(t,e,i,n){var r=t.segments[e],o=r.points[r.points.length-1],s=r.points[0],a=!0;if("Orthogonal"===r.type&&(r.points[0]=s,r.points[r.points.length-1]=o,t.segments[e-1]&&(a=this.updatePreviousSegment(i,n,t,e)),t.segments.length-1>e&&a)){var l=t.segments[e+1];this.updateNextSegment(t,r,l,i,n)}},e.prototype.addTerminalSegment=function(t,e,i,n,r){t.segments;var o,s,a,l,h=t.segments.indexOf(e),c=[],d=t.segments.pop(),p=t.segments[t.segments.length-1];o=p&&"Orthogonal"===p.type?p:null;for(var u=0;u<e.points.length-2;u++)a=qd.distancePoints(e.points[u],e.points[u+1]),l=qd.direction(e.points[u],e.points[u+1]),s=new Df(t,"segments",{type:"Orthogonal",length:a,direction:l},!0),c.push(s),o=s;var f=r;if((2===e.points.length||f===e.points.length-2)&&(o&&(o.length+=5),void 0!==f)){var g;a=2*qd.distancePoints(e.points[e.points.length-2],e.points[e.points.length-1])/3,l=qd.direction(e.points[e.points.length-2],e.points[e.points.length-1]),g=new Df(t,"segments",{type:"Orthogonal",length:a,direction:l}),c.push(g)}var m=new Df(t,"segments",{type:"Orthogonal"},!0);c.push(m);var y,v=!1;return y={element:jy(t),addSegments:jy(c),type:"Addition",cancel:v},$()&&(y={element:jy(t),addSegments:jy(c),type:"Addition",cancel:v}),this.commandHandler.triggerEvent(kp.segmentCollectionChange,y),y.cancel?t.segments.push(d):(t.segments=t.segments.concat(c),h+=r),this.commandHandler.updateEndPoint(t),h},e.prototype.updatePortSegment=function(t,e,i,n,r){if(1===i&&2===t.points.length&&t.length<0){var o=e.sourceWrapper.corners,s=e.segments[i],a=e.segments[i+1],l=void 0,h=[];l=new Df(e,"segments",{type:"Orthogonal",length:13,direction:t.direction}),h.push(l);var c=void 0;c="Left"===s.direction?s.points[0].x-(o.middleLeft.x-20):"Right"===s.direction?o.middleRight.x+20-s.points[0].x:"Bottom"===s.direction?o.bottomCenter.y+20-s.points[0].y:s.points[0].y-(o.topCenter.y-20);s.direction;l=new Df(e,"segments",{type:"Orthogonal",length:c,direction:s.direction}),h.push(l),s.length=s.length-c,a&&a.length&&a.direction&&(a.direction===t.direction?a.length-=13:a.direction===sf(t.direction)&&(a.length+=13)),e.segments=h.concat(e.segments),this.selectedSegment=e.segments[3]}},e.prototype.updatePreviousSegment=function(t,e,i,n){var r=i.segments[n],o=i.segments[n-1];o.points[o.points.length-1]=r.points[0];var s=!i.sourceID||""!==i.sourcePortID,a=!0;return"Orthogonal"===o.type&&("Bottom"===o.direction?o.length+=e:"Top"===o.direction?o.length-=e:"Right"===o.direction?o.length+=t:o.length-=t,""!==i.sourcePortID&&o.length<0?this.updatePortSegment(o,i,n,t,e):i.sourceID&&""===i.sourcePortID&&o.length<0&&1===n&&(a=!1,this.updateFirstSegment(i,r)),s&&this.changeSegmentDirection(o)),a},e.prototype.changeSegmentDirection=function(t){t.length<0&&(t.direction=sf(t.direction),t.length*=-1)},e.prototype.updateNextSegment=function(t,e,i,n,r){e.points[e.points.length-1];i.points[0]=e.points[e.points.length-1],i&&"Orthogonal"===i.type&&(i.length||0===i.length)&&("Left"===i.direction||"Right"===i.direction?0!==n&&(i.length="Right"===i.direction?i.length-n:i.length+n,(i.length||0===i.length)&&this.changeSegmentDirection(i)):0!==r&&(i.length="Bottom"===i.direction?i.length-r:i.length+r,(i.length||0===i.length)&&this.changeSegmentDirection(i)))},e.prototype.updateFirstSegment=function(t,e){var i,n=t.segments.indexOf(e),r=!1,o=t.segments[n],s=t.segments[n-1],a={segments:t.segments};if(s.length<0&&t.sourceID){var l=t.sourceWrapper.corners,h=[],c=void 0,d=!1;this.changeSegmentDirection(o);var p=t.segments[n+1],u=t.segments[n+2];switch(p&&this.changeSegmentDirection(p),u&&this.changeSegmentDirection(u),s.direction){case"Top":case"Bottom":i=o.length>0&&"Left"===o.direction?l.middleLeft:l.middleRight,o.length>l.width/2?Math.abs(s.length)<l.height/2&&(s.length=qd.distancePoints(l.center,s.points[s.points.length-1]),o.points[0].x=i.x,o.length=qd.distancePoints(o.points[0],o.points[o.points.length-1]),o.length-=20,r=!0):(p&&p.direction&&p.length&&(p.points[0].y=i.y,p.points[0].x=p.points[p.points.length-1].x="Right"===o.direction?i.x+20:i.x-20),r=!0,d=!0);break;case"Left":case"Right":i=o.length>0&&"Top"===o.direction?l.topCenter:l.bottomCenter,o.length>l.height/2?Math.abs(s.length)<l.width/2&&(s.length=qd.distancePoints(l.center,s.points[s.points.length-1]),o.points[0].y=i.y,o.length=qd.distancePoints(o.points[0],o.points[o.points.length-1]),o.length-=20,r=!0):(p&&p.direction&&p.length&&(p.points[0].x=i.x,p.points[0].y=p.points[p.points.length-1].y="Bottom"===o.direction?i.y+20:i.y-20),r=!0,d=!0)}this.changeSegmentDirection(s),this.changeSegmentDirection(o),r&&(c={type:"Orthogonal",direction:o.direction,length:20},h.push(new Df(t,"segments",c,!0)),d&&(p&&p.direction&&p.length&&(p.length=qd.distancePoints(p.points[0],p.points[p.points.length-1])),u&&u.direction&&u.length&&(u.length=qd.distancePoints(p.points[p.points.length-1],u.points[u.points.length-1])),t.segments.splice(n-1,2)),t.segments=h.concat(t.segments)),this.selectedSegment=d?t.segments[n-1]:t.segments[n+1],this.commandHandler.updateEndPoint(t,a)}},e.prototype.updateLastSegment=function(t,e){if(t.targetID&&""===t.targetPortID){var i=void 0,n=void 0,r=void 0,o=void 0,s=t.targetWrapper.corners,a=e.points[0],l=e.points[e.points.length-1];return"Right"===e.direction||"Left"===e.direction?(i={x:a.x,y:a.y},n={x:"Left"===e.direction?l.x-s.width/2:l.x+s.width/2,y:l.y},r={x:s.center.x,y:s.center.y-s.height},o={x:s.center.x,y:s.center.y+s.height}):(i={x:a.x,y:a.y},n={x:l.x,y:"Bottom"===e.direction?l.y+s.height/2:l.y-s.height/2},r={x:s.center.x-s.width,y:s.center.y},o={x:s.center.x+s.width,y:s.center.y}),qm({x1:i.x,y1:i.y,x2:n.x,y2:n.y},{x1:r.x,y1:r.y,x2:o.x,y2:o.y}).enabled}return!1},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"ConnectorEditingTool"},e}(uw),kw=function(){function t(t,e){this.currentAction="None",this.previousAction="None",this.focus=!1,this.isBlocked=!1,this.isMouseDown=!1,this.inAction=!1,this.doingAutoScroll=!1,this.diagram=null,this.objectFinder=null,this.tool=null,this.eventArgs=null,this.keyArgs={},this.diagram=t,this.objectFinder=new Mw,this.commandHandler=e}return Object.defineProperty(t.prototype,"action",{get:function(){return this.currentAction},set:function(t){t!==this.currentAction&&("PortDraw"===this.currentAction&&(this.diagram.tool&=~Cp.DrawOnce,this.tool&&this.tool.mouseUp({position:this.currentPosition}),this.tool=null),"Rotate"===t||"LabelRotate"===t?this.diagram.diagramCanvas.classList.add("e-diagram-rotate"):"Rotate"!==this.currentAction&&"LabelRotate"!==this.currentAction||this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),this.currentAction=t,"None"===this.currentAction||"Select"===this.currentAction||this.diagram.diagramActions&Ip.TextEdit?this.diagram.diagramActions=this.diagram.diagramActions&~Ip.ToolAction:this.diagram.diagramActions=this.diagram.diagramActions|Ip.ToolAction,this.diagram.setCursor(this.diagram.getCursor(t,this.inAction)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blocked",{get:function(){return this.isBlocked},set:function(t){this.isBlocked=t,this.blocked?this.diagram.setCursor("not-allowed"):this.diagram.setCursor(this.diagram.getCursor(this.action,this.inAction))},enumerable:!0,configurable:!0}),t.prototype.getMousePosition=function(t){var e,i,n;-1!==t.type.indexOf("touch")?(i=(e=t).changedTouches[0].clientX,n=e.changedTouches[0].clientY):(i=t.clientX,n=t.clientY);var r=new Wd;r=Qf(this.diagram);var o=this.diagram.element.getBoundingClientRect();return i=i+this.diagram.diagramCanvas.scrollLeft-o.left-r.width,n=n+this.diagram.diagramCanvas.scrollTop-o.top-r.height,i/=this.diagram.scroller.transform.scale,n/=this.diagram.scroller.transform.scale,{x:i-=this.diagram.scroller.transform.tx,y:n-=this.diagram.scroller.transform.ty}},t.prototype.windowResize=function(t){var e=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){e.updateViewPortSize(e.diagram.element)},300),!1},t.prototype.updateViewPortSize=function(t){var e=document.getElementById(t.id);if(e){var i=e.getBoundingClientRect();this.diagram.scroller.setViewPortSize(i.width,i.height);var n=new Wd;n=Qf(this.diagram);var r=this.diagram.getSizeValue(this.diagram.width,n.width),o=this.diagram.getSizeValue(this.diagram.height,n.height);this.diagram.diagramCanvas.style.width=r,this.diagram.diagramCanvas.style.height=o,this.diagram.scroller.setSize(),this.diagram.transformLayers(),this.diagram.rulerSettings.showRulers&&Kf(this.diagram)}},t.prototype.canHideResizers=function(){return(this.tool instanceof mw||this.tool instanceof yw)&&this.isMouseDown},t.prototype.updateCursor=function(){if(1===this.diagram.selectedItems.nodes.length||1===this.diagram.selectedItems.connectors.length){var t=[];t=t.concat(this.diagram.selectedItems.nodes,this.diagram.selectedItems.connectors),this.blocked=this.isMouseDown&&1===t.length&&this.tool instanceof fw&&!ig(t[0])}},t.prototype.isForeignObject=function(t,e){var i=t;if(i)for(;null!==i.parentNode;){if("string"==typeof i.className&&(!e&&-1!==i.className.indexOf("foreign-object")||e&&-1!==i.className.indexOf("e-diagram-text-edit")))return i;i=i.parentNode}return null},t.prototype.isMetaKey=function(t){return navigator.platform.match("Mac")?t.metaKey:t.ctrlKey},t.prototype.renderUmlHighLighter=function(t){this.diagram.commandHandler.removeStackHighlighter();var e=this.diagram.selectedItems.nodes[0];if(e&&e.container&&"Stack"===e.container.type&&"UmlClassifier"===e.shape.type&&!e.wrapper.bounds.containsPoint(this.currentPosition)){var i=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),n=this.diagram.findObjectUnderMouse(i,this.action,this.inAction);if(n&&n.parentId&&n.parentId===e.id){var r="Vertical"===this.diagram.nameTable[n.parentId].container.orientation;tm(n.wrapper,r,t.position,this.diagram,!0)}}},t.prototype.isDeleteKey=function(t,e){return navigator.platform.match("Mac")&&"Backspace"===t&&"delete"===e},t.prototype.isMouseOnScrollBar=function(t){var e,i,n,r,o=t.offsetX,s=t.offsetY,a=this.diagram.diagramCanvas,l=a.offsetHeight,h=a.offsetWidth;return!!(l<a.scrollHeight&&(e={x:h-17,y:0},i={x:h,y:0},n={x:h-17,y:l},r={x:h,y:l},np.toBounds([e,i,n,r]).containsPoint({x:o+a.scrollLeft,y:s+a.scrollTop})))||!!(h<a.scrollWidth&&(e={x:0,y:l-17},i={x:h,y:l-17},n={x:0,y:l},r={x:h,y:l},np.toBounds([e,i,n,r]).containsPoint({x:o+a.scrollLeft,y:s+a.scrollTop})))},t.prototype.updateVirtualization=function(){var t,e=this;t=setInterval(function(i){e.diagram.removeVirtualObjects(t)},50),setTimeout(function(){e.diagram.deleteVirtualObject=!0},50)},t.prototype.checkPreviousAction=function(){if(this.action!==this.previousAction&&this.diagram.selectedItems.userHandles.length)for(var t=0;t<this.diagram.selectedItems.userHandles.length;t++)this.previousAction&&this.diagram.selectedItems.userHandles[t]&&(this.checkUserHandleEvent(kp.onUserHandleMouseLeave),this.previousAction="None")},t.prototype.checkUserHandleEvent=function(t){if(this.diagram.selectedItems&&this.diagram.selectedItems.userHandles.length>0)for(var e=t===kp.onUserHandleMouseLeave?this.previousAction:this.action,i={element:void 0},n=0;n<this.diagram.selectedItems.userHandles.length;n++)if(e===this.diagram.selectedItems.userHandles[n].name||t===kp.onUserHandleMouseUp&&"Select"===e){i.element=this.diagram.selectedItems.userHandles[n],t===kp.onUserHandleMouseEnter&&(this.previousAction=this.action),t===kp.onUserHandleMouseDown&&(this.userHandleObject=this.diagram.selectedItems.userHandles[n].name);var r=document.getElementById(this.diagram.selectedItems.userHandles[n].name+"_userhandle");t===kp.onUserHandleMouseUp?this.commandHandler.isUserHandle(this.currentPosition)&&r&&r.id===this.userHandleObject+"_userhandle"&&this.diagram.triggerEvent(t,i):this.diagram.triggerEvent(t,i)}},t.prototype.mouseDown=function(t){var e;if(this.focus=!0,e=t.touches,this.isMouseOnScrollBar(t))return this.isScrolling=!0,void t.preventDefault();if($()&&(this.commandHandler.oldSelectedObjects=gb(this.diagram.selectedItems)),this.checkUserHandleEvent(kp.onUserHandleMouseDown),!this.checkEditBoxAsTarget(t)&&Sg(this.diagram)||yg(this.diagram)&&!wg(this.diagram))if("Select"!==this.action&&"Drag"!==this.action||this.diagram.updatePortVisibility(this.hoverElement,fp.Hover,!0),!(this.tool instanceof Ow||this.tool instanceof Ew)||2!==t.button&&2!==t.buttons)if(!0===this.inAction&&!0===this.isMouseDown&&(this.tool instanceof Ow||this.tool instanceof Ew))this.isMouseDown=!0,this.eventArgs={},this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs);else{this.isMouseDown=!0,this.currentPosition=this.prevPosition=this.getMousePosition(t),this.eventArgs={},this.diagram.textEditing&&!this.isMouseOnScrollBar(t)&&(this.diagram.endEdit(),this.diagram.textEditing=!1);var i=void 0,n=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action),r=this.objectFinder.findObjectUnderMouse(this.diagram,n,this.action,this.inAction,this.eventArgs,this.currentPosition),o=null;null!==r&&(o=this.diagram.findElementUnderMouse(r,this.currentPosition))&&(i=this.commandHandler.findTarget(o,r)),this.action=this.diagram.findActionToBeDone(r,o,this.currentPosition,i);var s=this.isMetaKey(t);if(s&&t.shiftKey&&this.diagram.connectorEditingToolModule?this.action="SegmentEnd":!s&&!t.shiftKey||yg(this.diagram)||(this.action="Select"),this.tool=this.diagram.getTool(this.action),this.tool||(this.action="Select",this.tool=this.diagram.getTool(this.action)),this.getMouseEventArgs(this.currentPosition,this.eventArgs),s||t.shiftKey){var a=s&&t.shiftKey?{ctrlKey:s,shiftKey:t.shiftKey}:{ctrlKey:!0};this.eventArgs.info=a}this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs),this.initialEventArgs={source:this.eventArgs.source,sourceWrapper:this.eventArgs.sourceWrapper},this.initialEventArgs.position=this.currentPosition,this.initialEventArgs.info=this.eventArgs.info,this.inAction=!1,"touchstart"===t.type&&(e&&e.length>=2&&(this.touchStartList=eb(this.touchStartList,0,e)),e||t.preventDefault())}else{jy(this.diagram),jy(this.currentPosition),t.buttons,jy(this.eventArgs.actualObject);this.inAction=!1,this.tool.mouseUp(this.eventArgs)}this.isForeignObject(t.target)||this.isForeignObject(t.target,!0)||e||t.preventDefault()},t.prototype.mouseMoveExtend=function(t,e){(this.tool instanceof Ow||this.tool instanceof Ew)&&this.tool.mouseMove(this.eventArgs),this.diagram.scrollSettings.canAutoScroll?this.checkAutoScroll(t):this.blocked||this.tool.mouseMove(this.eventArgs),this.eventArgs.target&&(this.hoverElement=this.eventArgs.target);var i=!(this.eventArgs.target instanceof Lv&&e instanceof Lv);this.tool instanceof gw&&this.diagram.updatePortVisibility(this.hoverElement instanceof Lv?this.hoverElement:this.hoverNode,fp.Connect|fp.Hover,i),this.hoverElement instanceof Lv&&this.hoverNode instanceof Lv&&this.hoverNode&&this.hoverNode.id!==this.hoverElement.id&&this.diagram.updatePortVisibility(this.hoverNode,fp.Connect|fp.Hover,!0),this.hoverElement=i?null:e,this.hoverNode=i?null:e},t.prototype.checkAction=function(t){if("LabelSelect"===this.action&&this.eventArgs.sourceWrapper&&(this.eventArgs.sourceWrapper instanceof Qp||this.eventArgs.sourceWrapper instanceof vf)){var e=this.commandHandler.findTarget(this.eventArgs.sourceWrapper,this.eventArgs.source);!aw(this.diagram,e,!1,this.eventArgs.sourceWrapper)&&ig(e)&&(this.action="LabelDrag",this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))}else ig(t)&&eg(t)&&this.initialEventArgs&&this.initialEventArgs.source&&"Select"===this.action&&(!aw(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof Mv&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),t instanceof Gf&&(!(t instanceof Gf)||rw(this.currentPosition,t.sourcePoint,t.hitPadding)||rw(this.currentPosition,t.targetPoint,t.hitPadding))||(this.action="Drag"),this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))},t.prototype.isSwimlaneElements=function(t){return!t||!(t.isLane||t.isPhase||t.isHeader)},t.prototype.mouseMove=function(t,e){var i,n;if(this.focus=!0,this.isScrolling)t.preventDefault();else if(Sg(this.diagram)||yg(this.diagram)&&!wg(this.diagram)){this.currentPosition=this.getMousePosition(t);var r=this.diagram.findObjectsUnderMouse(this.currentPosition),o=this.diagram.findObjectUnderMouse(r,this.action,this.inAction);i=this.diagram,n=this.currentPosition,i.rulerSettings.showRulers&&(i.hRuler.drawRulerMarker(i.hRuler.element,n,i.scroller.horizontalOffset),i.vRuler.drawRulerMarker(i.vRuler.element,n,i.scroller.verticalOffset));var s=!1,a=void 0;if("touchmove"===t.type&&(e=t.touches)&&e.length>1&&(this.touchMoveList=eb(this.touchMoveList,0,e),"PinchZoom"!==this.action&&(s=!0)),!1===qd.equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown||s){this.eventArgs={};var l=null;if(null!==o){if(l=this.diagram.findElementUnderMouse(o,this.currentPosition),o!==this.hoverElement){var h=this.getContent();this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&""!==h&&this.elementLeave(),this.diagram.updatePortVisibility(this.hoverElement,fp.Hover,!0),o instanceof Lv&&(this.hoverNode=o);var c=!0;!this.isSwimlaneElements(o)&&this.hoverElement&&this.isSwimlaneElements(this.hoverElement)&&(c=!1),this.hoverElement=c?o:this.hoverElement,c?this.elementEnter(this.currentPosition,!1):this.hoverElement=o}else this.hoverElement||this.hoverElement!==o||this.elementEnter(this.currentPosition,!0);l&&(a=this.commandHandler.findTarget(l,o))}this.action=this.diagram.findActionToBeDone(o,l,this.currentPosition,a),this.checkUserHandleEvent(kp.onUserHandleMouseEnter),this.checkPreviousAction(),this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.tool=this.getTool(this.action),this.mouseEvents(),this.tool instanceof ww||this.tool instanceof Ew||this.tool instanceof Ow?this.tool.mouseMove(this.eventArgs):e&&this.tool instanceof xw&&this.tool.mouseDown(this.eventArgs),this.updateCursor(),this.renderUmlHighLighter(this.eventArgs);var d=!1;(!this.hoverElement||this.tool instanceof xw||!(o instanceof Lv)||!this.isSwimlaneElements(o)||0!==this.diagram.selectedItems.nodes.length&&aw(this.diagram,this.hoverElement))&&(d=!0),this.diagram.updatePortVisibility(this.hoverElement,fp.Hover,d);var p=this.getContent();null===o&&this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&p&&(this.hoverElement=null,this.elementLeave()),s=!1}else{if(this.eventArgs.position=this.currentPosition,"Drag"===this.action&&!aw(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof Mv&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.mouseEvents(),t.ctrlKey||t.shiftKey){var u=t.ctrlKey&&t.shiftKey?{ctrlKey:t.ctrlKey,shiftKey:t.shiftKey}:{ctrlKey:!0};this.eventArgs.info=u}this.checkAction(o);var f=this.getConnectorPadding(this.eventArgs);this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source,f),this.updateCursor(),this.inAction=!0,this.initialEventArgs=null,"Drag"!==this.action&&"Rotate"!==this.action||(this.diagram.diagramActions=this.diagram.diagramActions|Ip.Interactions),this.mouseMoveExtend(t,o)}this.prevPosition=this.currentPosition,this.isForeignObject(t.target,!0)||t.preventDefault()}}},t.prototype.getContent=function(){return this.hoverElement instanceof Lv&&this.hoverElement.constraints&bp.Tooltip||this.hoverElement instanceof Gf&&this.hoverElement.constraints&yp.Tooltip?this.hoverElement.tooltip.content:this.diagram.tooltip.content},t.prototype.checkAutoScroll=function(t){var e=this.startAutoScroll(t);if(!e&&this.doingAutoScroll)this.doingAutoScroll=!1,clearInterval(this.timeOutValue);else if(e){if((this.tool instanceof mw||this.tool instanceof vw||this.tool instanceof fw)&&this.inAction){var i=this;this.diagram.scrollSettings.canAutoScroll&&e&&!this.doingAutoScroll&&(this.doingAutoScroll=!0,this.timeOutValue=setInterval(function(n){i.doAutoScroll(e,t,100)},100))}}else this.blocked=!this.tool.mouseMove(this.eventArgs)},t.prototype.mouseUp=function(t){var e;if(this.checkUserHandleEvent(kp.onUserHandleMouseUp),"SVG"===this.diagram.mode&&fg(this.diagram)&&this.updateVirtualization(),this.diagram.previousSelectedObject=null,this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,Tp.DrawSelectorBorder),e=t.touches,this.isScrolling)return this.isScrolling=!1,void t.preventDefault();if(!this.checkEditBoxAsTarget(t)&&Sg(this.diagram)||yg(this.diagram)&&!wg(this.diagram)){if(this.tool&&(!(this.tool instanceof Ow||this.tool instanceof Ew)||(this.tool instanceof Ow||this.tool instanceof Ew)&&2===t.detail)){if(!this.isForeignObject(t.target)&&this.isMouseDown&&document.getElementById(this.diagram.element.id+"content").focus(),!this.inAction&&3!==t.which&&"Drag"===this.action){this.action="Select";var i=this.diagram.findObjectsUnderMouse(this.currentPosition),n=this.diagram.findObjectUnderMouse(i,this.action,this.inAction),r=!0;!t.ctrlKey&&this.isMouseDown&&this.diagram.selectedItems.nodes.length+this.diagram.selectedItems.connectors.length>1&&1===t.which&&!(this.diagram.diagramActions&Ip.PreventClearSelection)&&(r=!1,this.commandHandler.clearSelection()),aw(this.diagram,n)&&r||this.commandHandler.selectObjects([n])}var o=this.updateContainerProperties(),s=void 0;if(this.addUmlNode(),this.inAction=!1,this.isMouseDown=!1,this.currentPosition=this.getMousePosition(t),this.diagram.selectedObject.helperObject&&(s=this.updateContainerBounds()),this.tool&&(this.tool.prevPosition||this.tool instanceof Pw)){this.eventArgs.position=this.currentPosition;var a=this.getConnectorPadding(this.eventArgs);this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source,a);var l=this.isMetaKey(t);if(l||t.shiftKey){var h=l&&t.shiftKey?{ctrlKey:l,shiftKey:t.shiftKey}:{ctrlKey:!0};this.eventArgs.info=h}if(this.diagram.diagramActions&Ip.Interactions&&(this.diagram.diagramActions=this.diagram.diagramActions&~Ip.Interactions),this.eventArgs.clickCount=t.detail,this.diagram.selectedObject.helperObject&&(this.tool instanceof mw||this.tool instanceof vw)){if(this.diagram.selectedObject.actualObject&&""!==this.diagram.selectedObject.actualObject.parentId){var c=this.diagram.getObject(this.diagram.selectedObject.actualObject.parentId);c&&c.isLane&&(this.commandHandler.isContainer=!0)}this.tool.mouseUp(this.eventArgs,o.isPreventHistory)}else this.tool.mouseUp(this.eventArgs),!this.diagram.checkMenu||-1===window.navigator.userAgent.indexOf("Linux")&&-1===window.navigator.userAgent.indexOf("X11")||(this.diagram.contextMenuModule.contextMenu.open(t.pageY,t.pageX,this.diagram.element),this.diagram.checkMenu=!1);o.hasStack&&this.diagram.endGroupAction()}if(s&&this.diagram.endGroupAction(),this.updateContainerBounds(!0),2!==this.eventArgs.clickCount&&this.commandHandler.updateSelectedNodeProperties(this.eventArgs.source),this.diagram.selectedObject&&this.diagram.selectedObject.helperObject&&(this.diagram.remove(this.diagram.selectedObject.helperObject),this.diagram.selectedObject={helperObject:void 0,actualObject:void 0}),this.blocked=!1,this.hoverElement){var d=fp.Connect;aw(this.diagram,this.hoverElement)&&(d|=fp.Hover),this.diagram.updatePortVisibility(this.hoverElement,d,!0),this.hoverElement=null}this.touchStartList=null,this.touchMoveList=null,this.tool instanceof Sw||(this.tool=null)}e||t.preventDefault(),this.diagram.currentDrawingObject=void 0;var p=this.diagram.selectedItems,u=!1;if(this.commandHandler.isUserHandle(this.currentPosition)&&this.isForeignObject(t.target)&&(u=!0),!this.inAction&&p.wrapper&&p.userHandles.length>0&&!u&&this.diagram.renderSelector(!0),!this.inAction&&!this.diagram.currentSymbol&&this.eventArgs){var f={element:jy(this.eventArgs.source)||jy(this.diagram),position:jy(this.eventArgs.position),count:t.detail,actualObject:jy(this.eventArgs.actualObject)};$()&&this.diagram.click&&(f=this.getBlazorClickEventArgs(f)),this.diagram.triggerEvent(kp.click,f)}this.eventArgs={}}this.eventArgs={},this.diagram.commandHandler.removeStackHighlighter()},t.prototype.getConnectorPadding=function(t){var e,i=t.source;if(i&&i instanceof Mv&&i.connectors.length){var n=i.connectors[0];e=n.constraints&yp.ConnectToNearByPort?n.connectionPadding:0}return e||0},t.prototype.getBlazorClickEventArgs=function(t){return t={element:this.eventArgs.source?{selector:jy(this.eventArgs.source)}:{diagram:jy(this.diagram)},position:jy(this.eventArgs.position),count:t.count,actualObject:this.eventArgs.actualObject?{selector:jy(this.eventArgs.actualObject)}:{diagram:jy(this.diagram)}},this.eventArgs.source instanceof Lv?(t.element.selector.nodes=[],t.element.selector.nodes.push(jy(this.eventArgs.source))):this.eventArgs.source instanceof Gf&&(t.element.selector.connectors=[],t.element.selector.connectors.push(jy(this.eventArgs.source))),t},t.prototype.addSwimLaneObject=function(t){var e,i,n,r,o,s,a=0,l=t.shape,h=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action);if(i||(i=this.diagram.findObjectUnderMouse(h,this.action,this.inAction)),this.diagram.clearSelectorLayer(),i&&!(i.isLane||i.isPhase||i.isHeader))for(var c=0;c<h.length;c++){var d=this.diagram.nameTable[h[c].id];(d.isLane||d.isPhase||d.isHeader)&&(i=d)}if(i&&(l.isPhase||l.isLane&&i.isLane)){var p=i.parentId;e=this.diagram.nameTable[p]}if(e&&(n=e.shape,o=l.isLane?l.orientation===n.orientation:l.orientation!==n.orientation),o&&i){if(n.header&&n.hasHeader&&"Horizontal"===n.orientation&&(a=1),n.phases.length>0&&(a+=1),l.isPhase){s="Horizontal"===n.orientation?this.currentPosition.x-e.wrapper.bounds.x:this.currentPosition.y-(e.wrapper.bounds.y+n.header.height);var u={id:cb(),offset:s,header:{annotation:{content:"Phase"}}};this.diagram.addPhases(e,[u])}else{l.lanes[0].header.height;var f={id:cb(),style:l.lanes[0].style,header:{annotation:{content:l.lanes[0].header.annotation.content,style:l.lanes[0].header.annotation.style},style:l.lanes[0].header.style}};"Horizontal"===l.orientation?f.height=l.lanes[0].height:f.width=l.lanes[0].width,"Horizontal"===n.orientation?(r=i.rowIndex?i.rowIndex:this.diagram.nameTable[i.parentId].rowIndex,i.wrapper.offsetY<this.currentPosition.y&&(r+=1)):(r=i.columnIndex?i.columnIndex:this.diagram.nameTable[i.parentId].columnIndex,this.currentPosition.x<i.wrapper.bounds.center.x&&(r-=1)),n.lanes.length>r-a?(f.header.width=n.lanes[r-a].header.width,f.header.height=n.lanes[r-a].header.height):(f.header.width=n.lanes[r-a-1].header.width,f.header.height=n.lanes[r-a-1].header.height),this.diagram.addLanes(e,[f],r-a)}this.commandHandler.select(e)}else if(l.isLane){var g={id:cb(),width:t.width,height:t.height,addInfo:t.addInfo,shape:{type:"SwimLane",header:{annotation:{content:"Header"},height:50,style:l.lanes[0].header.style},phases:[{id:cb(),header:{annotation:{content:"Phase"}}}],lanes:[{id:cb(),height:t.height,width:t.width,style:l.lanes[0].style,header:{annotation:{content:l.lanes[0].header.annotation.content,style:l.lanes[0].header.annotation.style},style:l.lanes[0].header.style}}],orientation:l.orientation}};"Vertical"===l.orientation&&(g.width+=20),g.offsetX=this.currentPosition.x+g.width/2,g.offsetY=this.currentPosition.y+g.height/2,this.diagram.add(g)}},t.prototype.mouseLeave=function(t){(this.tool&&this.inAction&&this.tool.mouseLeave(this.eventArgs),this.diagram.selectedObject.helperObject)&&(this.updateContainerProperties(),this.updateContainerBounds()&&this.diagram.endGroupAction());this.eventArgs&&this.eventArgs.source&&(this.diagram.updatePortVisibility(this.eventArgs.source,fp.Hover,!0),this.hoverElement=null),this.tool instanceof gw&&this.eventArgs&&this.eventArgs.target&&this.eventArgs.target instanceof Lv&&(this.diagram.updatePortVisibility(this.eventArgs.target,fp.Hover|fp.Connect,!0),this.hoverElement=null);var e=this.diagram.selectedItems;e&&e.wrapper&&this.diagram.renderSelector(!0),(this.diagram.diagramActions&Ip.Interactions||this.diagram.diagramActions&Ip.ToolAction)&&(this.diagram.diagramActions=this.diagram.diagramActions&~Ip.ToolAction),this.isMouseDown=!1,this.focus=!1,this.touchStartList=null,this.touchMoveList=null,this.elementLeave(),this.commandHandler.removeSnap(),this.inAction=!1,this.eventArgs={},this.diagram.selectedObject&&this.diagram.selectedObject.helperObject&&(this.diagram.remove(this.diagram.selectedObject.helperObject),this.diagram.selectedObject={helperObject:void 0,actualObject:void 0}),this.tool=null,function(){var t,e,i=document.getElementsByClassName("e-d-ruler-marker");if(i&&i.length>0)for(e=i.length-1;e>=0;e--)(t=i[e])&&t.parentNode.removeChild(t)}(),"Rotate"===this.action&&this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),t.preventDefault()},t.prototype.mouseWheel=function(t){this.diagram.blazorActions=up.interaction;var e=t.wheelDelta>0||-40*t.detail>0,i=this.getMousePosition(t);if(this.diagram.tooltipObject.close(),this.isMetaKey(t))this.diagram.zoom(e?1.2:1/1.2,i),t.preventDefault();else{var n=this.diagram.scroller.horizontalOffset,r=this.diagram.scroller.verticalOffset,o=e?20:-20;this.tool&&(this.tool instanceof Ow||this.tool instanceof Ew)&&(this.eventArgs={},this.getMouseEventArgs(i,this.eventArgs),this.eventArgs.position=i,this.tool.mouseWheel(this.eventArgs)),t.shiftKey?this.diagram.scroller.zoom(1,o,0,i):this.diagram.scroller.zoom(1,0,o,i),n===this.diagram.scroller.horizontalOffset&&r===this.diagram.scroller.verticalOffset||t.preventDefault()}if(this.diagram.textEditing){if(this.diagram.isTriggerEvent=!0,this.diagram.activeLabel.parentId){var s=this.diagram.getObject(this.diagram.activeLabel.parentId);this.diagram.startTextEdit(s,this.diagram.activeLabel.id)}this.diagram.isTriggerEvent=!1}this.diagram.blazorActions=this.diagram.blazorActions&~up.interaction},t.prototype.keyDown=function(t){if(!(this.diagram.diagramActions&Ip.TextEdit)&&!this.checkEditBoxAsTarget(t)||"Escape"===t.key||27===t.keyCode){var e=void 0,i=t.keyCode?t.keyCode:t.which,n=t.key,r=this.isMetaKey(t);if(this.diagram.commandManager&&this.diagram.commands)for(var o=this.diagram.commands,s=0,a=Object.keys(o);s<a.length;s++){var l=a[s];if((e=this.diagram.commands[l])&&(e.gesture.keyModifiers||e.gesture.key)&&(i===e.gesture.key||n===Lp[e.gesture.key]||this.isDeleteKey(n,l))&&(!e.gesture.keyModifiers&&!t.altKey&&!t.shiftKey&&!r||e.gesture.keyModifiers&&(r||t.altKey||t.shiftKey)&&this.altKeyPressed(e.gesture.keyModifiers)&&t.altKey||this.shiftKeyPressed(e.gesture.keyModifiers)&&t.shiftKey||this.ctrlKeyPressed(e.gesture.keyModifiers)&&r)){var h=Lb(e.canExecute);if($()||h&&h({keyDownEventArgs:KeyboardEvent,parameter:e.parameter})){if(t.preventDefault(),"Escape"===t.key)if(this.checkEditBoxAsTarget(t))document.getElementById(this.diagram.diagramCanvas.id).focus();else if(this.diagram.currentSymbol){this.diagram.removeFromAQuad(this.diagram.currentSymbol),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[this.diagram.currentSymbol.id]),this.diagram.removeElements(this.diagram.currentSymbol),ty(this.diagram.currentSymbol,this.diagram),delete this.diagram.nameTable[this.diagram.currentSymbol.id],this.diagram.droppable.sourceElement.draggable.intDestroy();var c=this.diagram.droppable.selectedSymbols;c.parentNode.removeChild(c);var d=this.diagram.diagramActions;this.diagram.diagramActions=this.diagram.addConstraints(d,Ip.PreventClearSelection),this.tool.mouseUp(this.eventArgs),this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,Tp.DrawSelectorBorder),this.diagram.previousSelectedObject&&this.diagram.select(this.diagram.previousSelectedObject),this.action="Select",this.diagram.previousSelectedObject=null,this.diagram.currentSymbol=null,this.diagram.diagramActions=this.diagram.removeConstraints(d,Ip.PreventClearSelection),this.isMouseDown=!1}else this.inAction&&this.diagram.drawingObject&&this.tool&&this.tool.inAction&&(this.tool.mouseUp(this.eventArgs),this.tool=null,this.isMouseDown=!1);if(e.execute)if(this.diagram.tool!==Cp.ZoomPan)Lb(e.execute)({keyDownEventArgs:KeyboardEvent,parameter:e.parameter});if($()){var p={gesture:e.gesture};this.diagram.triggerEvent(kp.commandExecute,p)}break}}}}this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;this.keyArgs={element:jy(this.diagram.selectedItems),key:t.key,keyCode:t.keyCode?t.keyCode:t.which},this.getKeyModifier(this.keyArgs,t),this.diagram.diagramActions&Ip.TextEdit&&this.getlabel(this.keyArgs,t),this.diagram.triggerEvent(kp.keyDown,this.keyArgs)},t.prototype.getlabel=function(t,e){var i=this.diagram.activeLabel;t.target=this.diagram.element.id+"_editBox";var n=this.diagram.nameTable[i.parentId];if(document.getElementById(this.diagram.element.id+"_editBox")){t.text=document.getElementById(this.diagram.element.id+"_editBox").value;for(var r=0;r<n.annotations.length;r++)if(n.annotations[r].id===i.id){t.label=n.annotations[r];break}}},t.prototype.getKeyModifier=function(t,e){t.keyModifiers=Ep.None,e.ctrlKey&&(t.keyModifiers|=Ep.Control),e.shiftKey&&(t.keyModifiers|=Ep.Shift),e.altKey&&(t.keyModifiers|=Ep.Alt),this.isMetaKey(e)&&(t.keyModifiers|=Ep.Meta)},t.prototype.keyUp=function(t){this.keyArgs={element:jy(this.diagram.selectedItems),key:t.key,keyCode:t.keyCode?t.keyCode:t.which};this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;this.getKeyModifier(this.keyArgs,t),this.diagram.diagramActions&Ip.TextEdit&&this.getlabel(this.keyArgs,t),this.diagram.triggerEvent(kp.keyUp,this.keyArgs)},t.prototype.startAutoScroll=function(t){var e=this.getMousePosition(t);e.x*=this.diagram.scroller.currentZoom,e.y*=this.diagram.scroller.currentZoom;var i,n=Qf(this.diagram),r=this.diagram.scrollSettings.autoScrollBorder;if("mozilla"===te.info.name&&0===this.diagram.scroller.viewPortWidth){var o=document.getElementById(this.diagram.element.id).getBoundingClientRect();o.width!==this.diagram.scroller.viewPortWidth&&this.diagram.scroller.setViewPortSize(o.width,o.height)}return this.diagram.scrollSettings.canAutoScroll&&(e.x+this.diagram.scroller.horizontalOffset+r.right+n.width>=this.diagram.scroller.viewPortWidth-18?i="right":e.x+this.diagram.scroller.horizontalOffset<r.left?i="left":e.y+this.diagram.scroller.verticalOffset+r.bottom+n.height>this.diagram.scroller.viewPortHeight-18?i="bottom":e.y+this.diagram.scroller.verticalOffset<r.top&&(i="top")),i},t.prototype.doAutoScroll=function(t,e,i,n){var r=t;if((this.tool instanceof mw||this.tool instanceof vw||this.tool instanceof fw)&&this.inAction){var o=this.getMousePosition(e),s=(this.diagram.scrollSettings.autoScrollBorder,0),a=0,l={x:o.x,y:o.y};switch(r){case"right":l.x=o.x+10,s=10;break;case"left":l.x=o.x-10,s=-10;break;case"bottom":l.y=o.y+10,a=10;break;case"top":l.y=o.y-10,a=-10}this.eventArgs.position={x:l.x,y:l.y},this.currentPosition=this.eventArgs.position;var h=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action);this.eventArgs.target=this.diagram.findObjectUnderMouse(h,this.action,this.inAction),this.tool.mouseMove(this.eventArgs),this.diagram.scroller.zoom(1,-s,-a,o)}},t.prototype.mouseEvents=function(){for(var t=this.diagram.findObjectsUnderMouse(this.currentPosition),e=0;e<t.length;e++)this.eventArgs.actualObject===t[e]&&t.splice(e,1);var i={targets:{}};if($()||(i={targets:jy(t),element:jy(this.eventArgs.source===this.eventArgs.actualObject?void 0:this.eventArgs.source),actualObject:jy(this.eventArgs.actualObject)}),$()&&(this.diagram.mouseEnter||this.diagram.mouseOver)&&(i.actualObject=Iy(this.eventArgs.actualObject)===Gf?{connector:jy(this.eventArgs.actualObject)}:{node:jy(this.eventArgs.actualObject)},i.targets.connector=[],i.targets.node=[],this.getBlazorCollectionObject(t,i)),this.lastObjectUnderMouse&&this.diagram.mouseLeave&&(!this.eventArgs.actualObject||this.lastObjectUnderMouse!==this.eventArgs.actualObject)){var n={targets:void 0,element:jy(this.lastObjectUnderMouse),actualObject:void 0};$()&&(n={targets:void 0,element:Iy(this.lastObjectUnderMouse)===Gf?{connector:jy(t)}:{node:jy(this.lastObjectUnderMouse)},actualObject:void 0}),this.diagram.triggerEvent(kp.mouseLeave,n),this.lastObjectUnderMouse=null}(!this.lastObjectUnderMouse&&this.eventArgs.source||this.lastObjectUnderMouse!==this.eventArgs.actualObject)&&(this.lastObjectUnderMouse=this.eventArgs.actualObject,void 0!==this.eventArgs.actualObject&&this.diagram.triggerEvent(kp.mouseEnter,i)),this.eventArgs.actualObject&&this.diagram.triggerEvent(kp.mouseOver,i)},t.prototype.getBlazorCollectionObject=function(t,e){if(t)for(var i=0;i<t.length;i++)Iy(t[i])===Gf?e.targets.connector.push(jy(t[i])):e.targets.node.push(jy(t[i]))},t.prototype.elementEnter=function(t,e){if(!e){var i=this.hoverElement instanceof Lv&&this.hoverElement.constraints&bp.Tooltip||this.hoverElement instanceof Gf&&this.hoverElement.constraints&yp.Tooltip,n=this.getContent();"Auto"===this.hoverElement.tooltip.openOn&&""!==n&&(o=this.diagram,s=i?this.hoverElement:void 0,a=o.tooltipObject,uf(s?s.tooltip:o.tooltip,a));var r=Km(this.diagram,t,this.hoverElement);"Auto"===this.hoverElement.tooltip.openOn&&""!==n&&(this.diagram.tooltipObject.close(),this.diagram.tooltipObject.offsetX=r.x,this.diagram.tooltipObject.offsetY=r.y,this.diagram.tooltipObject.dataBind()),function(t,e){var i=0;return t instanceof Gf?t.constraints&yp.Tooltip?i=t.constraints&yp.Tooltip:t.constraints&yp.InheritTooltip&&(i=e.constraints&xp.Tooltip):t.constraints&bp.Tooltip?i=t.constraints&bp.Tooltip:t.constraints&bp.InheritTooltip&&(i=e.constraints&xp.Tooltip),i}(this.hoverElement,this.diagram)&&"Auto"===this.hoverElement.tooltip.openOn&&this.diagram.tooltipObject.open(this.diagram.element)}var o,s,a},t.prototype.elementLeave=function(){this.diagram.tooltipObject.close()},t.prototype.altKeyPressed=function(t){return!!(t&Ep.Alt)},t.prototype.ctrlKeyPressed=function(t){return!!(t&Ep.Control)},t.prototype.shiftKeyPressed=function(t){return!!(t&Ep.Shift)},t.prototype.scrolled=function(t){this.diagram.updateScrollOffset()},t.prototype.doubleClick=function(t){if(Sg(this.diagram)){var e=void 0,i=this.diagram.findObjectsUnderMouse(this.currentPosition),n=this.diagram.findObjectUnderMouse(i,this.action,this.inAction);if(null!==n&&Sg(this.diagram)){if(e=this.diagram.findElementUnderMouse(n,this.currentPosition),this.tool&&(this.tool instanceof Ow||this.tool instanceof Ew)){jy(n)||jy(this.diagram),this.currentPosition,t.detail;this.tool.mouseUp(this.eventArgs),this.isMouseDown=!1,this.eventArgs={},this.tool=null,t.preventDefault()}else{var r=this.diagram.commandHandler.getObjectLayer(n.id);if(r&&!r.lock&&r.visible&&!(this.diagram.diagramActions&Ip.TextEdit)){var o="";"TextAnnotation"===n.shape.shape&&(o=n.wrapper.children[1].id.split("_")[1]),this.diagram.startTextEdit(n,o||(e instanceof Qp?e.id.split(n.id+"_")[1]:void 0))}}}var s={source:jy(n)||jy(this.diagram),position:this.currentPosition,count:t.detail};if($()){var a=void 0;a=n instanceof Lv?{nodes:[jy(n)]}:n instanceof Gf?{connectors:[jy(n)]}:jy(n),s={source:n?{selector:a}:{diagram:jy(this.diagram)},position:this.currentPosition,count:t.detail}}this.diagram.triggerEvent(kp.doubleClick,s)}},t.prototype.itemClick=function(t,e){var i=t;return Yg(this.diagram,i,!0)?i:null},t.prototype.inputChange=function(t){var e,i,n,r,o,s,a,l,h,c=document.getElementById(this.diagram.element.id+"_editBox"),d=document.getElementById(this.diagram.element.id+"_editTextBoxDiv"),p=c.value,u=p.split("\n");(!(r=this.diagram.selectedItems.nodes[0]?this.diagram.selectedItems.nodes[0]:this.diagram.selectedItems.connectors[0])&&this.tool instanceof Sw||r&&"SwimLane"===r.shape.type)&&(r=this.diagram.nameTable[this.diagram.activeLabel.parentId]),r&&("Text"!==r.shape.type&&r.annotations.length>0||"Text"===r.shape.type)&&(n=this.diagram.getWrapper(r.wrapper,this.diagram.activeLabel.id),e=(e=r.wrapper.bounds.width<n.bounds.width?r.wrapper.bounds.width:n.bounds.width)>90?e:90,a=zv(n.style,p,void 0,void 0,e),i=Number(c.style.fontSize.split("px")[0]),u.length>1&&""===u[u.length-1]&&(a.height=a.height+i),l=this.diagram.scroller.transform,h=xg(this.diagram)?l.scale:1,s=(90>(s=a.width)?90:s)*h,o=(12>a.height?12:a.height)*h,d.style.left=(n.bounds.center.x+l.tx)*l.scale-s/2-2.5+"px",d.style.top=(n.bounds.center.y+l.ty)*l.scale-o/2-3+"px",d.style.width=s+"px",d.style.height=o+"px",c.style.minHeight="12px",c.style.minWidth="90px",c.style.width=s+"px",c.style.height=o+"px")},t.prototype.isAddTextNode=function(t,e){return!!(this.tool instanceof Sw||e)&&(this.tool=null,t&&!vg(this.diagram)&&(this.diagram.drawingObject=void 0,this.diagram.currentDrawingObject=void 0),!(xy(this.diagram.nodes,t.id)||xy(this.diagram.connectors,t.id)||this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(t)>-1))},t.prototype.checkEditBoxAsTarget=function(t){return!(!t.target||t.target.id!==this.diagram.element.id+"_editBox")},t.prototype.getMouseEventArgs=function(t,e,i,n){var r,o,s;if(e.position=t,i?(o=this.diagram.findObjectsUnderMouse(this.currentPosition,i),r=this.diagram.findTargetObjectUnderMouse(o,this.action,this.inAction,e.position,i)):"Drag"===this.action||"ConnectorSourceEnd"===this.action||"SegmentEnd"===this.action||"OrthoThumb"===this.action||"BezierSourceThumb"===this.action||"BezierTargetThumb"===this.action||"ConnectorTargetEnd"===this.action||-1!==this.action.indexOf("Rotate")||-1!==this.action.indexOf("Resize")?(r=this.diagram.selectedItems,!this.diagram.currentSymbol&&"Drag"===this.action&&r&&this.diagram.selectedItems.nodes.length>0&&"SwimLane"===this.diagram.selectedItems.nodes[0].shape.type&&(o=this.diagram.findObjectsUnderMouse(this.currentPosition),r=this.diagram.findObjectUnderMouse(o,this.action,this.inAction))):(o=this.diagram.findObjectsUnderMouse(this.currentPosition),r=this.diagram.findObjectUnderMouse(o,this.action,this.inAction)),r&&r.isHeader&&(r=this.diagram.nameTable[r.parentId],this.eventArgs.actualObject=r),r&&(s=this.diagram.findElementUnderMouse(r,this.currentPosition,n))&&r.ports&&r.ports.length&&!Dy(r,s)&&i instanceof Mv&&i.connectors.length){var a=i.connectors[0];a.constraints&yp.ConnectToNearByPort&&!(a.constraints&yp.ConnectToNearByNode)&&((s=this.diagram.findElementUnderMouse(r,this.currentPosition,0))||(r=null))}return i?(e.target=r,e.targetWrapper=s):(e.source=r,e.sourceWrapper=s),e.actualObject=this.eventArgs.actualObject,e.startTouches=this.touchStartList,e.moveTouches=this.touchMoveList,e},t.prototype.resetTool=function(){this.action="Select",this.hoverElement=null,this.hoverNode=null,this.tool=this.diagram.getTool(this.action),this.updateCursor()},t.prototype.getTool=function(t){switch(t){case"Select":return new fw(this.commandHandler,!0);case"Drag":return new mw(this.commandHandler);case"Rotate":return new yw(this.commandHandler);case"LayoutAnimation":return new Cw(this.commandHandler);case"Hyperlink":return new Pw(this.commandHandler);case"ResizeSouthEast":case"ResizeSouthWest":case"ResizeNorthEast":case"ResizeNorthWest":case"ResizeSouth":case"ResizeNorth":case"ResizeWest":case"ResizeEast":return new vw(this.commandHandler,t);case"ConnectorSourceEnd":case"ConnectorTargetEnd":case"BezierSourceThumb":case"BezierTargetThumb":return new gw(this.commandHandler,t);case"SegmentEnd":case"OrthoThumb":return new Bw(this.commandHandler,t);case"Draw":var e=function(t){var e;return t&&(t.type?e="Connector":t.shape&&!t.type&&(e="Node")),e}(this.diagram.drawingObject);if("Node"===e&&"Text"===this.diagram.drawingObject.shape.type)return new Sw(this.commandHandler);if("Node"===e&&("Polygon"===this.diagram.drawingObject.shape.shape||$()&&"Polygon"===this.diagram.drawingObject.shape.basicShape)&&!this.diagram.drawingObject.shape.points)return new Ow(this.commandHandler);if("Node"===e||"Node"===e&&"Polygon"===this.diagram.drawingObject.shape.shape&&this.diagram.drawingObject.shape.points)return new bw(this.commandHandler,this.diagram.drawingObject);if("Connector"===e&&"Polyline"===this.diagram.drawingObject.type)return new Ew(this.commandHandler);if("Connector"===e)return new ww(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);break;case"Pan":return new xw(this.commandHandler,!1);case"PinchZoom":return new xw(this.commandHandler,!0);case"PortDrag":return new mw(this.commandHandler,"Port");case"PortDraw":return new ww(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);case"LabelSelect":return new fw(this.commandHandler,!0,"LabelSelect");case"LabelDrag":return new Lw(this.commandHandler);case"LabelResizeSouthEast":case"LabelResizeSouthWest":case"LabelResizeNorthEast":case"LabelResizeNorthWest":case"LabelResizeSouth":case"LabelResizeNorth":case"LabelResizeWest":case"LabelResizeEast":return new Iw(this.commandHandler,t);case"LabelRotate":return new Tw(this.commandHandler)}return null},t.prototype.getCursor=function(t){var e=this.diagram.selectedItems.annotation?this.diagram.selectedItems.wrapper.children[0]:this.diagram.selectedItems;return function(t,e){if(e+=360,e%=360,-1===t.indexOf("Resize"))return lw[t];var i=lw[t];return e>=0&&e<25||e>=160&&e<=205||e>=340&&e<=360?i:e>=25&&e<=70||e>=205&&e<=250?"n-resize"===i||"s-resize"===i?"ne-resize":"nw-resize"===i||"se-resize"===i?"n-resize":"e-resize"===i||"w-resize"===i?"nw-resize":"e-resize":e>=70&&e<=115||e>=250&&e<=295?"n-resize"===i||"s-resize"===i?"e-resize":"nw-resize"===i||"se-resize"===i?"ne-resize":"e-resize"===i||"w-resize"===i?"n-resize":"nw-resize":e>=115&&e<=155||e>=295&&e<=340?"n-resize"===i||"s-resize"===i?"nw-resize":"nw-resize"===i||"se-resize"===i?"e-resize":"e-resize"===i||"w-resize"===i?"ne-resize":lw[t]:"n-resize"}(t,this.diagram.selectedItems.annotation?e.rotateAngle+e.parentTransform:e.rotateAngle)},t.prototype.findElementUnderMouse=function(t,e,i){return this.objectFinder.findElementUnderSelectedItem(t,e,i)},t.prototype.findObjectsUnderMouse=function(t,e){return this.objectFinder.findObjectsUnderMouse(t,this.diagram,this.eventArgs,e)},t.prototype.findObjectUnderMouse=function(t,e,i){return this.objectFinder.findObjectUnderMouse(this.diagram,t,e,i,this.eventArgs,this.currentPosition)},t.prototype.findTargetUnderMouse=function(t,e,i,n,r){return this.objectFinder.findObjectUnderMouse(this.diagram,t,e,i,this.eventArgs,n,r)},t.prototype.findActionToBeDone=function(t,e,i,n){return nw(t,e,this.currentPosition,this.diagram,this.touchStartList,this.touchMoveList,n)},t.prototype.updateContainerBounds=function(t){var e=!1;if(this.diagram.selectedObject.helperObject&&this.diagram.selectedObject.actualObject instanceof Lv){var i=this.tool instanceof vw,n=this.diagram.selectedObject.actualObject,r=this.diagram.nameTable[n.parentId];t?qg(this.diagram,n,this.currentPosition,i):((!r||r&&"SwimLane"!==r.shape.type)&&this.diagram.updateDiagramObject(n),e=function(t,e,i,n){var r,o=!1;if(Yg(t,e,!0)){t.protectPropertyChange(!0);var s=(r=t.nameTable[e.parentId]).wrapper;if(r&&"Canvas"===r.container.type){if(n||s.bounds.x<=i.x&&s.bounds.right>=i.x&&s.bounds.y<=i.y&&s.bounds.bottom>=i.y){var a=void 0,l=s.bounds.y,h=s.bounds.x,c=t.nameTable[r.parentId]||r;if("SwimLane"===c.shape.type)o=$g(r,c,e,t,!0);else{var d=t.nameTable[r.parentId]||r,p=d.shape;a=d.wrapper,s.actualSize.width<s.outerBounds.width&&!(s.bounds.x>s.outerBounds.x)&&(void 0!==r.rowIndex?(d.columns.length,a.updateColumnWidth(r.columnIndex,s.outerBounds.width,!0),"Horizontal"===p.orientation&&p.phaseSize&&bm(d,t,s,r.columnIndex),wm(t,d),t.drag(d,h-s.bounds.x,l-s.bounds.y)):t.scale(r,1+(s.outerBounds.width-s.actualSize.width)/s.actualSize.width,1,s.outerBounds.x<s.bounds.x?{x:1,y:.5}:{x:0,y:.5})),s.actualSize.height<s.outerBounds.height&&!(s.bounds.y>s.outerBounds.y)&&(void 0!==r.rowIndex?(a.updateRowHeight(r.rowIndex,s.outerBounds.height,!0),t.drag(d,h-s.bounds.x,l-s.bounds.y)):t.scale(r,1,1+(s.outerBounds.height-s.actualSize.height)/s.actualSize.height,s.outerBounds.y<s.bounds.y?{x:.5,y:1}:{x:.5,y:0}))}}t.select([e]),fm([],t)}t.protectPropertyChange(!1)}return o}(this.diagram,n,this.currentPosition,i),this.diagram.updateSelector(),(n.isLane||n.isPhase)&&(this.diagram.clearSelection(),this.commandHandler.selectObjects([n])))}return e},t.prototype.updateContainerProperties=function(){var t,e,i,n,r=!1,o=!1,s={hasStack:!1,isPreventHistory:!1};if(this.diagram.selectedObject.helperObject){var a=this.diagram.findObjectsUnderMouse(this.currentPosition),l=this.diagram.findObjectUnderMouse(a,this.action,this.inAction);if(t=this.diagram.selectedObject.helperObject,(n=this.diagram.selectedObject.actualObject)instanceof Lv){if("SwimLane"===n.shape.type&&(i=am(this.diagram,n.wrapper.children[0])),"SwimLane"!==n.shape.type&&n.parentId&&"SwimLane"===this.diagram.getObject(n.parentId).shape.type&&l instanceof Lv&&this.diagram.getObject(l.parentId)&&"SwimLane"!==this.diagram.getObject(l.parentId).shape.type&&(l=this.diagram.getObject(l.parentId)),"Drag"===this.currentAction&&n.container&&"Canvas"===n.container.type&&n.parentId&&"SwimLane"===this.diagram.getObject(n.parentId).shape.type&&l&&l!==n&&l.container&&"Canvas"===l.container.type&&l.isLane&&n.isLane&&l.parentId===n.parentId)gm(this.diagram,n,l,this.currentPosition),s.isPreventHistory=!0;else{var h=this.diagram.nameTable[n.parentId];if(!h||h&&"SwimLane"!==h.shape.type)if(h&&h.isLane&&n.constraints&bp.AllowMovingOutsideLane){var c=this.diagram.getObject(h.parentId),d=c.id+c.shape.lanes[0].id+"0",p=this.diagram.getObject(d),u=p.wrapper.bounds.x,f=p.wrapper.bounds.y,g=c.wrapper.bounds.bottomRight.x-u,m=c.wrapper.bounds.bottomRight.y-f;new np(u,f,g,m).containsPoint(this.currentPosition)&&(n.offsetX=t.offsetX,n.offsetY=t.offsetY,n.width=t.width,n.height=t.height,n.rotateAngle=t.rotateAngle)}else n.offsetX=t.offsetX,n.offsetY=t.offsetY,n&&n.shape&&"UmlClassifier"!==n.shape.type&&("Bpmn"!==n.shape.type||"Bpmn"===n.shape.type&&"TextAnnotation"!==n.shape.shape)&&(n.width=t.width,n.height=t.height),n.rotateAngle=t.rotateAngle;var y=void 0;if(h&&h.container&&"Stack"===h.container.type&&(this.diagram.startGroupAction(),o=!0),!l&&h&&h.container&&"Stack"===h.container.type&&"Drag"===this.action){var v=h.wrapper.children.indexOf(n.wrapper);if(y={targetIndex:void 0,target:void 0,sourceIndex:v,source:gb(n)},v>-1){var b=h.children;b.splice(b.indexOf(n.id),1),this.diagram.nameTable[n.id].parentId="",e=!0,h.wrapper.children.splice(v,1)}}if(function(t,e,i,n){var r=t,o=i.nameTable[r.parentId],s=i.nameTable[r.parentId];if(e&&s&&s.container&&"Stack"===s.container.type&&e.container&&"Stack"===e.container.type&&s.id!==e.parentId){var a=s.wrapper.children.indexOf(r.wrapper);a>-1&&(i.nameTable[r.id].parentId=e.id,s.wrapper.children.splice(a,1))}if(e&&e.parentId&&r.parentId&&"Drag"===n&&s.container&&"Stack"===s.container.type){var l=o.wrapper.children.indexOf(e.wrapper),h=o.wrapper.children.indexOf(r.wrapper),c={targetIndex:l,target:e,sourceIndex:h,source:t};o.wrapper.children.splice(h,1),o.wrapper.children.splice(l,0,r.wrapper);var d={type:"StackChildPositionChanged",redoObject:{targetIndex:h,target:e,sourceIndex:l,source:t},undoObject:c,category:"Internal"};i.commandHandler.addHistoryEntry(d)}}(n,l,this.diagram,this.action),(h=Yg(this.diagram,n)?this.diagram.nameTable[n.parentId]:this.diagram.nameTable[n.parentId]||n)&&h.container&&"Canvas"===h.container.type&&(h.wrapper.maxWidth=h.maxWidth=h.wrapper.actualSize.width,h.wrapper.maxHeight=h.maxHeight=h.wrapper.actualSize.height,r=!0),Yg(this.diagram,n,!0)&&h&&"Canvas"===h.container.type?Zg(this.diagram,n):s=this.updateContainerPropertiesExtend(h,n,i,t,s),this.diagram.lineRoutingModule&&this.diagram.constraints&xp.LineRouting&&!Yg(this.diagram,n,!0)&&(n.children&&(this.diagram.realActions|=Ap.EnableGroupAction),this.diagram.nodePropertyChange(n,{},{width:n.width,height:n.height,offsetX:n.offsetX,offsetY:n.offsetY}),n.children&&(this.diagram.realActions&=~Ap.EnableGroupAction)),n.shape.lanes&&this.updateLaneChildNode(n),r&&(h.maxWidth=h.wrapper.maxWidth=void 0,h.maxHeight=h.wrapper.maxHeight=void 0),e){this.diagram.nodePropertyChange(h,{},{offsetX:h.offsetX,offsetY:h.offsetY,width:h.width,height:h.height,rotateAngle:h.rotateAngle});var w={redoObject:{sourceIndex:void 0,source:y.source},type:"StackChildPositionChanged",undoObject:y,category:"Internal"};this.diagram.diagramActions&Ip.UndoRedo||this.diagram.addHistoryEntry(w)}n&&n.container&&("Stack"===n.container.type||"Canvas"===n.container.type&&""===n.parentId)&&(n&&n.shape&&"UmlClassifier"===n.shape.type&&(n.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(n,{},{offsetX:n.offsetX,offsetY:n.offsetY,width:n.width,height:n.height,rotateAngle:n.rotateAngle}),n&&n.shape&&"UmlClassifier"===n.shape.type&&(n.wrapper.measureChildren=!1))}fm(i,this.diagram),s.hasStack=o}}return n&&(n.isPhase||n.isLane||n.shape&&"SwimLane"===n.shape.type)&&this.diagram.updateDiagramElementQuad(),s},t.prototype.updateLaneChildNode=function(t){for(var e=0;e<t.shape.lanes.length;e++)if(t.shape.lanes[e].children&&t.shape.lanes[e].children.length>0)for(var i=0;i<t.shape.lanes[e].children.length;i++){var n=t.shape.lanes[e].children[i].id,r=this.diagram.nameTable[n];r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY}},t.prototype.updateContainerPropertiesExtend=function(t,e,i,n,r){if("ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction||"SwimLane"===e.shape.type){var o=gb(e),s=!1;if(t&&t.container&&"Grid"===t.container.type){var a="SwimLane"===t.shape.type,l=a?t.wrapper.children[0]:t.wrapper,h=a?t.shape.padding:void 0,c=t.wrapper.bounds.x,d=t.wrapper.bounds.y;if(void 0!==e.columnIndex&&"Horizontal"===t.container.orientation&&(a&&e.isPhase||!a&&1===e.rowIndex)||"Vertical"===t.container.orientation&&(!a&&e.rowIndex>0&&e.columnIndex>0||a&&e.isLane)){if("Horizontal"===t.container.orientation&&e.isPhase&&e.wrapper.width>e.maxWidth&&(e.maxWidth=e.wrapper.width,e.wrapper.maxWidth=e.wrapper.width),mm(this.diagram,e,t,n),l.updateColumnWidth(e.columnIndex,n.width,!0,h),e.isPhase){var p=t.shape.phases[e.columnIndex].header.id,u=this.diagram.nameTable[p];u.maxWidth<n.width&&(u.maxWidth=n.width,u.wrapper.maxWidth=n.width)}"SwimLane"===t.shape.type&&(t.width=t.width?l.width:t.width,wm(this.diagram,t),t.wrapper.width=t.width,i=am(this.diagram,l,e.rowIndex))}else void 0!==e.rowIndex&&(s=!0,mm(this.diagram,e,t,n),l.updateRowHeight(e.rowIndex,n.height,!0,h),"SwimLane"===t.shape.type&&(t.height=t.height?l.height:t.height,t.wrapper.height=t.height,i=am(this.diagram,l,e.rowIndex)));"SwimLane"===t.shape.type&&(r.isPreventHistory=!0),this.diagram.nodePropertyChange(t,{},{offsetX:t.offsetX,offsetY:t.offsetY,rotateAngle:t.rotateAngle}),this.diagram.drag(t,c-t.wrapper.bounds.x,d-t.wrapper.bounds.y)}else e&&e.shape&&"UmlClassifier"===e.shape.type&&(e.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(e,{},{offsetX:e.offsetX,offsetY:e.offsetY,width:e.width,height:e.height,rotateAngle:e.rotateAngle}),e.wrapper.measureChildren=!1;if(e.wrapper.measure(new Wd(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize),"ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction){var f={category:"Internal",type:s?"RowHeightChanged":"ColumnWidthChanged",undoObject:o,redoObject:gb(e)};this.diagram.addHistoryEntry(f)}}return fm(i,this.diagram),r},t.prototype.addUmlNode=function(){var t=this.diagram.selectedItems.nodes[0],e=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x+20,y:this.currentPosition.y}),i=this.diagram.findObjectUnderMouse(e,this.action,this.inAction);if(i||(e=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),i=this.diagram.findObjectUnderMouse(e,this.action,this.inAction)),t&&t.container&&"Stack"===t.container.type&&i&&i.parentId&&i.parentId===t.id){var n=i,r=Vv(this.diagram.element.id);if(r.getElementById(r.id+"_stack_highlighter")){var o=t.wrapper.children.indexOf(i.wrapper)+1;this.diagram.enableServerDataBinding(!1);var s=new Lv(this.diagram,"nodes",{style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor},annotations:i.annotations,verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(bp.Default|bp.HideThumbs)&~(bp.Rotate|bp.Drag|bp.Resize),minHeight:25},!0);s.annotations[0].content=" + Name : Type";n.id.split("_");s.id=cb()+s.id,s.parentId=t.id,s.zIndex=-1,s.umlIndex=o,this.diagram.startGroupAction();t.wrapper.children.indexOf(s.wrapper);this.diagram.enableServerDataBinding(!0),this.diagram.add(s),this.diagram.updateConnectorEdges(t),this.diagram.clearSelection(),this.diagram.select([this.diagram.nameTable[s.id]]),this.diagram.endGroupAction(),this.diagram.startTextEdit()}}},t}(),Mw=function(){function t(){}return t.prototype.findObjectsUnderMouse=function(t,e,i,n,r){var o,s,a,l,h=[];n&&n instanceof Mv&&n.nodes.length+n.connectors.length===1&&(n=n.nodes[0]||n.connectors[0]).children&&0===n.children.length&&(i.actualObject=n);for(var c,d,p=n&&n instanceof Gf&&(n.constraints&yp.ConnectToNearByNode||n.constraints&yp.ConnectToNearByPort)&&n.connectionPadding||0,u={},f=0,g=e.spatialSearch.findObjects(new np(t.x-50-p,t.y-50-p,100+p,100+p));f<g.length;f++){var m=t;s=(E=g[f]).wrapper.outerBounds;var y=!E.rotateAngle&&s.containsPoint(m,p);if((E!==n||e.currentDrawingObject instanceof Gf)&&E instanceof Gf?E!==e.currentDrawingObject:E.wrapper.visible)if((C=e.commandHandler.getObjectLayer(E.id))&&!C.lock&&C.visible){if(c=u[C.zIndex]=u[C.zIndex]||[],E.rotateAngle){s=ub(o=E.wrapper);for(var v=0,b=o.children;v<b.length;v++)a=b[v],ap(l=op(),-(a.rotateAngle+a.parentTransform),a.offsetX,a.offsetY),m=sp(l,t),ub(a).containsPoint(m,p)&&(y=!0)}if((!n||!1===aw(e,E))&&((d=E)instanceof Gf?d.constraints&yp.PointerEvents:d.constraints&bp.PointerEvents)&&(E instanceof Gf?Gm(E,t):y)){var w=E instanceof Gf&&E.hitPadding||0;this.findElementUnderMouse(E,t,p||w)&&"helper"!==E.id&&Py(E,"zIndex",c)}}}for(var S=0,x=e.layers;S<x.length;S++)for(var C=x[S],P=0,O=h=h.concat(u[C.zIndex]||[]);P<O.length;P++){var E;if("Bpmn"===(E=O[P]).shape.type&&E.processId&&(!(e.eventHandler.tool instanceof mw)||e.eventHandler.tool instanceof mw&&ug(E)))(k=h.indexOf(e.nameTable[E.processId]))>-1&&h.splice(k,1);if("UmlClassifier"===E.shape.type&&E.container&&"Stack"===E.container.type)(k=h.indexOf(e.nameTable[e.nameTable[E.id].wrapper.children[0].id]))>-1&&h.splice(k,1)}for(var L=0;L<h.length;L++){var I=e.nameTable[h[L].parentId];if(I)for(var T=this.findElementUnderMouse(I,t),A=0;A<I.ports.length;A++)if(T.id.match("_"+I.ports[A].id+"$")){var B=I.ports[A];if(Og(B)||Pg(B))return h}for(;I;){var k;if(-1===(k=h.indexOf(I)))break;h.splice(k,1),I=e.nameTable[I.parentId]}}if(i&&!i.source)for(L=0;L<h.length;L++){var M=e.nameTable[h[L].parentId];if(M&&"SwimLane"===M.shape.type)for(A=0;A<h.length;A++){h[A]instanceof Gf&&h.splice(L,1)}}return h},t.prototype.isTarget=function(t,e,i){var n,r=e.selectedItems.connectors[0];if(!(n="ConnectorSourceEnd"===i?e.nameTable[r.targetID]:n=e.nameTable[r.sourceID])||(n.processId||t.processId)&&n.processId===t.processId||(n.processId!==t.processId&&(t=null),t&&t.parentId&&"UmlClassifier"===e.nameTable[t.parentId].shape.type&&(t=e.nameTable[t.parentId])),"ConnectorSourceEnd"===i&&r.targetID){var o=e.nameTable[r.targetID];if(o&&o.shape&&"TextAnnotation"===o.shape.shape){var s=r.id.split("_");("Bpmn"===o.shape.type&&"Bpmn"!==t.shape.type||s[0]===t.id||"TextAnnotation"===t.shape.shape)&&(t=null),t.parentId&&"UmlClassifier"===e.nameTable[t.parentId].shape.type&&(t=e.nameTable[t.parentId])}}return t},t.prototype.findObjectUnderMouse=function(t,e,i,n,r,o,s){var a,l,h=null;if(0!==e.length)if(s&&s instanceof Mv&&s.nodes.length+s.connectors.length===1&&(s=s.nodes[0]||s.connectors[0]),"ConnectorSourceEnd"===i&&s||"PortDraw"===i||(bg(t)||vg(t))&&Iy(t.drawingObject)===Gf)for(var c=t.selectedItems.connectors[0],d=e.length-1;d>=0;d--){l=wy(e[d],!1),a=wy(e[d],!0);var p=t.eventHandler.tool,u=this.findTargetElement(e[d].wrapper,o,void 0);if("Draw"===i&&u&&e[d]instanceof Lv&&!Dy(e[d],u)&&(p&&"ConnectorSourceEnd"===p.endPoint&&!cg(e[d])||p&&"ConnectorTargetEnd"===p.endPoint&&!lg(e[d])))return h;if(e[d]instanceof Lv&&(cg(e[d])||dg(l)||lg(e[d])||hg(a)||"PortDraw"===i&&p instanceof gw&&"ConnectorTargetEnd"==p.endPoint&&(lg(e[d])||hg(a))))return h=e[d],c&&(h=this.isTarget(h,t,i)),r.actualObject=h,h}else if("ConnectorTargetEnd"===i&&s){for(d=e.length-1;d>=0;d--)if(a=wy(e[d],!0),e[d]instanceof Lv&&(lg(e[d])||hg(a)))return h=e[d],h=this.isTarget(h,t,i),r.actualObject=h,h}else{if(s&&("Drag"===i||t.eventHandler.tool instanceof mw)){var f=0;for(d=0;d<e.length;d++){var g=e[d];s!==g&&(g instanceof Gf||!o||g.wrapper.bounds.containsPoint(o))&&ug(g)&&(h?(h=f>=g.zIndex?h:g,f=Math.max(f,g.zIndex)):f=(h=g).zIndex)}return h&&"Bpmn"===h.shape.type&&(h=t.selectedItems.nodes.length>0&&"Bpmn"===t.selectedItems.nodes[0].shape.type?h:null),h&&(r.actualObject=h),h}if("Select"!==i&&"Pan"!==i||!t.eventHandler.tool)if("Pan"===i||"LayoutAnimation"===i){for(d=e.length-1;d>=0;d--)if(e[d]instanceof Lv||e[d]instanceof Gf){var m=this.findTargetElement(e[d].wrapper,o,void 0);if("Pan"===i||m&&(m.id.match("_icon_content_shape$")||m.id.match("_icon_content_rect$")))return e[d]}}else h=e[e.length-1],r&&h&&(r.actualObject=h);else{for(var d=e.length-1;d>=0;d--)if(e[d]instanceof Gf){var y=e[d-1];if(e[d-1]instanceof Lv&&y.ports){var v=this.findTargetElement(y.wrapper,o,void 0);if(v&&(v.id.match("_icon_content_shape$")||v.id.match("_icon_content_rect$")))return y;for(var b=0;b<y.ports.length;b++)if(v&&v.id.match("_"+y.ports[b].id+"$")&&Pg(y.ports[b]))return y}}if(h=e[e.length-1],r.actualObject=h,!t.eventHandler.itemClick(h,!0)&&h.parentId)for(var w=h,S=aw(t,w);w&&(!aw(t,w)||S);)h=w,w=t.nameTable[w.parentId]}}return h},t.prototype.findElementUnderSelectedItem=function(t,e,i){return t instanceof Mv?1!==t.nodes.length||t.connectors&&t.connectors.length?t.nodes&&!t.nodes.length||1!==t.connectors.length?null:this.findElementUnderMouse(t.connectors[0],e):this.findElementUnderMouse(t.nodes[0],e):this.findElementUnderMouse(t,e,i)},t.prototype.findElementUnderMouse=function(t,e,i){return this.findTargetElement(t.wrapper,e,i)},t.prototype.findTargetElement=function(t,e,i){for(var n=t.children.length-1;n>=0;n--){var r=t.children[n];if(r&&r.outerBounds.containsPoint(e,i||0)){if(r instanceof Kp){var o=this.findTargetElement(r,e);if(o)return o}if(r.bounds.containsPoint(e,i||0))return r}}return t.bounds.containsPoint(e,i)&&"none"!==t.style.fill?t:null},t}(),Dw=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Rw=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},zw=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.objectZIndex=-1,o.zIndexTable={},o.objects=[],o}return Dw(e,t),Rw([Hi("")],e.prototype,"id",void 0),Rw([Hi(!0)],e.prototype,"visible",void 0),Rw([Hi(!1)],e.prototype,"lock",void 0),Rw([Hi()],e.prototype,"objects",void 0),Rw([Hi()],e.prototype,"addInfo",void 0),Rw([Hi(-1)],e.prototype,"zIndex",void 0),e}(ln),jw=function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}l((n=n.apply(t,e||[])).next())})},Nw=function(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Hw=function(){function t(t){this.clipboardData={},this.diagramObject={},this.newSelectedObjects={},this.oldSelectedObjects={},this.connectorsTable=[],this.processTable={},this.deepDiffer=new hw,this.isContainer=!1,this.childTable={},this.parentTable={},this.diagram=t}return Object.defineProperty(t.prototype,"snappingModule",{get:function(){return this.diagram.snappingModule},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layoutAnimateModule",{get:function(){return this.diagram.layoutAnimateModule},enumerable:!0,configurable:!0}),t.prototype.startTransaction=function(t){this.state={element:this.diagram.selectedItems,backup:null},t&&this.diagram.protectPropertyChange(!0),Wv(this.diagram.element.id).style.pointerEvents="none"},t.prototype.endTransaction=function(t){this.state=null,t&&this.diagram.protectPropertyChange(!1),Wv(this.diagram.element.id).style.pointerEvents="all"},t.prototype.setFocus=function(){document.getElementById(this.diagram.element.id).focus()},t.prototype.showTooltip=function(t,e,i,n,r){var o=this;if(r&&(this.diagram.tooltipObject.position="BottomCenter",this.diagram.tooltipObject.animation={open:{delay:0,duration:0}},this.diagram.tooltip.relativeMode="ConnectTool"===n?"Mouse":"Object",this.diagram.tooltipObject.openDelay=0,this.diagram.tooltipObject.closeDelay=0),this.diagram.selectedItems.setTooltipTemplate){var s=void 0,a=Lb(this.diagram.selectedItems.setTooltipTemplate);a&&(s=a(t,this.diagram)),i=s instanceof HTMLElement?s.cloneNode(!0):s||i}this.diagram.tooltipObject.content=i;var l=Km(this.diagram,{x:e.x,y:e.y},t);this.diagram.tooltipObject.offsetX=l.x+("ConnectTool"===n?10:0),this.diagram.tooltipObject.offsetY=l.y+10,this.diagram.tooltipObject.dataBind(),r&&setTimeout(function(){o.diagram.tooltipObject.open(o.diagram.element)},1)},t.prototype.closeTooltip=function(){this.diagram.tooltipObject.close()},t.prototype.canEnableDefaultTooltip=function(){return!!(this.diagram.selectedItems.constraints&mp.ToolTip)},t.prototype.updateSelector=function(){this.diagram.updateSelector()},t.prototype.updateConnectorValue=function(t){if(t.cancel){var e={},i={},n=this.diagram.nameTable[t.connector.id],r="ConnectorSourceEnd"===t.connectorEnd?"sourceID":"targetID",o="ConnectorSourceEnd"===t.connectorEnd?"sourcePortID":"targetPortID",s="ConnectorTargetEnd"===t.connectorEnd,a=s?t.newValue.connectorTargetValue:t.newValue.connectorSourceValue,l=s?t.oldValue.connectorTargetValue:t.oldValue.connectorSourceValue;i[r]=a.nodeId,i[o]=a.portId,e[r]=l.nodeId,e[o]=l.portId,t.cancel&&"ConnectorTargetEnd"!==t.connectorEnd&&(n.sourceID=l.nodeId,t.connector.sourcePortID&&(n.sourcePortID=l.portId),this.diagram.connectorPropertyChange(n,i,e)),t.cancel&&"ConnectorTargetEnd"===t.connectorEnd&&(t.connector.targetPortID&&(n.targetPortID=l.portId),n.targetID=l.nodeId,this.diagram.connectorPropertyChange(n,i,e))}},t.prototype.triggerEvent=function(t,e){return jw(this,void 0,void 0,function(){return Nw(this,function(i){switch(i.label){case 0:if(t===kp.drop||t===kp.positionChange||t===kp.connectionChange){if(this.diagram.currentSymbol)return[2];if(t===kp.drop&&(e.source=jy(this.diagram)),this.diagram.currentDrawingObject&&t!==kp.positionChange)return[2]}return[4,this.diagram.triggerEvent(t,e)];case 1:return[2,i.sent()]}})})},t.prototype.dragOverElement=function(t,e){if(this.diagram.currentSymbol){var i={element:jy(t.source),target:jy(t.target),mousePosition:jy(e),diagram:jy(this.diagram)};this.triggerEvent(kp.dragOver,i)}},t.prototype.disConnect=function(t,e,i){var n,r,o=$(),s={},a={};if(t instanceof Mv?r=t.connectors[0]:t instanceof Gf&&this.diagram.currentDrawingObject&&(r=this.diagram.currentDrawingObject),t&&r&&(sw(this.diagram)||this.diagram.currentDrawingObject))if($()&&this.diagram.insertValue(gb(r),!1),!e||"ConnectorSourceEnd"!==e&&"ConnectorTargetEnd"!==e){if("OrthoThumb"!==e&&"SegmentEnd"!==e&&(r.sourceID||r.targetID)){s={sourceID:r.sourceID,sourcePortID:r.sourcePortID,targetID:r.targetID,targetPortID:r.targetPortID},r.sourceID="",r.sourcePortID="",r.targetID="",r.targetPortID="",a={sourceID:r.sourceID,sourcePortID:r.sourcePortID,targetID:r.targetID,targetPortID:r.targetPortID};var l={connector:jy(r),oldValue:s,newValue:a,cancel:!1,state:"Changing",connectorEnd:e};$()&&(n=l={connector:jy(r),oldValue:{connector:jy(s)},newValue:{connector:jy(a)},cancel:!1,state:"Changed",connectorEnd:e}),o||this.triggerEvent(kp.connectionChange,l),l.cancel?(r.sourceID=s.sourceID,r.sourcePortID=s.sourcePortID,r.targetID=s.targetID,r.targetPortID=s.targetPortID):(this.diagram.connectorPropertyChange(r,s,a),this.diagram.updateDiagramObject(r),l={connector:r,oldValue:s,newValue:a,cancel:!1,state:"Changed",connectorEnd:e},$()&&(n=l={connector:jy(r),oldValue:{connector:s},newValue:{connector:a},cancel:!1,state:"Changed",connectorEnd:e}),o||this.triggerEvent(kp.connectionChange,l))}}else{var h="ConnectorSourceEnd"===e?"sourceID":"targetID",c="ConnectorSourceEnd"===e?"sourcePortID":"targetPortID";r[h]&&(s[h]=r[h],r[h]="",a[h]=r[h],(r.sourcePortID||r.targetPortID)&&(s[c]=r[c],r[c]="",a[c]=r[c]),n=this.connectionEventChange(r,s,a,e,i))}return n},t.prototype.connectionEventChange=function(t,e,i,n,r){var o,s,a=$(),l="ConnectorSourceEnd"===n?"sourceID":"targetID",h="ConnectorSourceEnd"===n?"sourcePortID":"targetPortID";if(this.enableCloneObject){var c=gb(o=this.diagram.nameTable[i[l]]);this.diagram.insertValue(c,!0)}var d={cancel:!1,state:"Changing",connectorEnd:n,connector:jy(t),oldValue:{nodeId:e[l],portId:e[h]},newValue:{nodeId:i[l],portId:i[h]}};if($()&&(d={connector:jy(t),cancel:!1,state:"Changing",connectorEnd:n,oldValue:void 0,newValue:void 0},"ConnectorSourceEnd"===n?(d.oldValue={connectorSourceValue:{portId:e[h],nodeId:e[l]}},d.newValue={connectorSourceValue:{nodeId:i[l],portId:i[h]}}):(d.oldValue={connectorTargetValue:{nodeId:e[l],portId:e[h]}},d.newValue={connectorTargetValue:{nodeId:i[l],portId:i[h]}}),s=d),a||this.triggerEvent(kp.connectionChange,d),d.cancel||$()&&r?(t[l]=e[l],t[h]=e[h],i=e):(this.diagram.connectorPropertyChange(t,e,i),this.diagram.updateDiagramObject(t),d={connector:jy(t),oldValue:{nodeId:e[l],portId:e[h]},newValue:{nodeId:i[l],portId:i[h]},cancel:!1,state:"Changing",connectorEnd:n},$()&&(d={connector:jy(t),oldValue:void 0,newValue:void 0,cancel:!1,state:"Changing",connectorEnd:n},"ConnectorSourceEnd"===n?(d.newValue={connectorSourceValue:{portId:i[h],nodeId:i[l]}},d.oldValue={connectorSourceValue:{portId:e[h],nodeId:e[l]}}):(d.oldValue={connectorTargetValue:{nodeId:e[l],portId:e[h]}},d.newValue={connectorTargetValue:{portId:i[h],nodeId:i[l]}}),s=d)),this.enableCloneObject&&void 0===o){c=gb(o=this.diagram.nameTable[e[l]]);this.diagram.insertValue(c,!0)}return s},t.prototype.findTarget=function(t,e,i,n){if(e instanceof Lv){if(t&&t.id===e.id+"_content")return e;if(i&&"Bpmn"===e.shape.type&&(!$()&&"Activity"===e.shape.shape||$()&&"Activity"===e.shape.bpmnShape)&&"Transaction"===e.shape.activity.subProcess.type){var r=e.shape.activity.subProcess.transaction;if(r.success.visible&&0===t.id.indexOf(e.id+"_success"))return r.success;if(r.cancel.visible&&0===t.id.indexOf(e.id+"_cancel"))return r.cancel;if(r.failure.visible&&0===t.id.indexOf(e.id+"_failure"))return r.failure}if(t instanceof ru)for(var o=0;o<e.ports.length;o++){var s=e.ports[o];if(t.id===e.id+"_"+s.id)return s}}if(!n){var a=void 0;for(o=0;o<e.annotations.length;o++)if(a=e.annotations[o],t.id===e.id+"_"+a.id)return a}return e},t.prototype.canDisconnect=function(t,e,i,n){var r;e.source instanceof Mv?r=e.source.connectors[0]:e.source instanceof Gf&&this.diagram.currentDrawingObject&&(r=this.diagram.currentDrawingObject);this.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===t,!0);var o="ConnectorSourceEnd"===t?"sourcePortID":"targetPortID";return r["ConnectorSourceEnd"===t?"sourceID":"targetID"]!==n||r[o]!==i},t.prototype.changeAnnotationDrag=function(t){var e;if(t.source&&t.source.connectors&&t.source.connectors.length&&this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(t.source.connectors[0])>-1){t.source instanceof Mv&&(e=t.source.connectors[0]);var i=e.id.split("_"),n=(i[i.length-1],i[i.length-3]||i[0]);if(t.target&&t.target.id!==n&&(!$()&&"TextAnnotation"!==t.target.shape.shape||$()&&"TextAnnotation"!==t.target.shape.bpmnShape)){this.diagram.startGroupAction();var r=this.diagram.nameTable[i[0]],o=this.getAnnotation(r,i[1]),s={id:i[1]+cb(),angle:qd.findAngle(e.intermediatePoints[0],e.intermediatePoints[1]),text:o.text,length:qd.distancePoints(e.intermediatePoints[0],e.intermediatePoints[1]),shape:{shape:"TextAnnotation",type:"Bpmn"},nodeId:o.nodeId},a=new gv(t.target.shape,"annotations",s,!0);this.diagram.bpmnModule.checkAndRemoveAnnotations(this.diagram.nameTable[e.targetID],this.diagram),this.diagram.refreshCanvasLayers(),a.id=i[1],this.diagram.addTextAnnotation(a,t.target),this.diagram.endGroupAction()}else e&&(e.sourceID=n,this.diagram.connectorPropertyChange(e,{},{sourceID:n}),this.diagram.updateDiagramObject(e))}},t.prototype.connect=function(t,e,i){var n,r,o,s,a={},l={};e.source instanceof Mv?o=e.source.connectors[0]:e.source instanceof Gf&&this.diagram.currentDrawingObject&&(o=this.diagram.currentDrawingObject);var h=this.findTarget(e.targetWrapper||e.sourceWrapper,e.target||e.actualObject,"ConnectorSourceEnd"===t,!0),c="ConnectorSourceEnd"===t?"sourceID":"targetID",d="ConnectorSourceEnd"===t?"sourcePortID":"targetPortID";if(h instanceof Lv)l[c]=o[c],o[c]=h.id,a[c]=o[c],l[d]=o[d],s=this.connectionEventChange(o,l,a,t,i);else{n=o[c],r=o[d],o[d]=h.id,o[c]=e.target&&e.target.id||e.actualObject.id,a[c]=o[c],a[d]=o[d];var p={connector:jy(o),oldValue:{nodeId:n,portId:r},newValue:{nodeId:a[c],portId:a[d]},cancel:!1,state:"Changing",connectorEnd:t};$()&&(p={connector:jy(o),oldValue:void 0,newValue:void 0,cancel:!1,state:"Changing",connectorEnd:t},"ConnectorSourceEnd"===t?(p.oldValue={connectorSourceValue:{portId:l[d],nodeId:l[c]}},p.newValue={connectorSourceValue:{portId:a[d],nodeId:a[c]}}):(p.newValue={connectorTargetValue:{portId:a[d],nodeId:a[c]}},p.oldValue={connectorTargetValue:{portId:l[d],nodeId:l[c]}}),s=p),this.triggerEvent(kp.connectionChange,p),p.cancel||$()&&i?(o[c]=n,o[d]=r,a[c]=n,a[d]=r):(this.diagram.connectorPropertyChange(o,l,a),this.diagram.updateDiagramObject(o),p={connector:jy(o),oldValue:{nodeId:n,portId:r},newValue:{nodeId:a[c],portId:a[d]},cancel:!1,state:"Changing",connectorEnd:t},$()&&(p={newValue:void 0,connector:jy(o),oldValue:void 0,cancel:!1,state:"Changing",connectorEnd:t},"ConnectorSourceEnd"===t?(p.oldValue={connectorSourceValue:{portId:l[d],nodeId:l[c]}},p.newValue={connectorTargetValue:{portId:a[d],nodeId:a[c]}}):(p.oldValue={connectorTargetValue:{portId:l[d],nodeId:l[c]}},p.newValue={connectorTargetValue:{portId:a[d],nodeId:a[c]}})))}return this.renderHighlighter(e,void 0,"ConnectorSourceEnd"===t),s},t.prototype.cut=function(){this.clipboardData.pasteIndex=0,this.diagram.undoRedoModule&&this.diagram.historyManager.startGroupAction(),this.clipboardData.clipObject=this.copyObjects(),this.diagram.undoRedoModule&&this.diagram.historyManager.endGroupAction(),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()},t.prototype.UpdateBlazorDiagramModelLayers=function(t,e){var i=jy(t);if(window&&window.Blazor){var n={methodName:"UpdateBlazorDiagramModelLayers",diagramobj:JSON.stringify(i),isRemove:e};window.sfBlazor.updateBlazorProperties(n,this.diagram)}},t.prototype.addLayer=function(t,e,i){void 0===i&&(i=!0),t.id=t.id||cb(),t.zIndex=this.diagram.layers.length,this.diagram.enableServerDataBinding(!1),t=new zw(this.diagram,"layers",t,!0),this.diagram.enableServerDataBinding(!0),t.objectZIndex=-1,t.zIndexTable={},this.diagram.layers.push(t),i&&this.UpdateBlazorDiagramModelLayers(t,!1),this.diagram.layerZIndexTable[t.zIndex]=t.id,this.diagram.activeLayer=t;t.objects;if(e)for(var n=0;n<e.length;n++)this.diagram.add(e[n])},t.prototype.getObjectLayer=function(t){for(var e=this.diagram.layers,i=0;i<e.length;i++){if(e[i].objects.indexOf(t)>-1)return e[i]}return this.diagram.activeLayer},t.prototype.getLayer=function(t){for(var e=this.diagram.layers,i=0;i<e.length;i++)if(e[i].id===t)return e[i]},t.prototype.removeLayer=function(t,e){void 0===e&&(e=!0);var i=this.getLayer(t);if(i){for(var n=this.diagram.layers.indexOf(i),r=i.objects,o=r.length-1;o>=0;o--)this.diagram.unSelect(this.diagram.nameTable[r[o]]),this.diagram.remove(this.diagram.nameTable[r[o]]),"default_layer"!==i.id&&this.diagram.activeLayer.id===t&&(this.diagram.activeLayer=this.diagram.layers[this.diagram.layers.length-1]);e&&this.UpdateBlazorDiagramModelLayers(this.diagram.layers[n],!0),delete this.diagram.layerZIndexTable[i.zIndex],this.diagram.layers.splice(n,1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()}},t.prototype.moveObjects=function(t,e){var i,n=this.getLayer(e)||this.diagram.activeLayer;this.diagram.setActiveLayer(n.id);for(var r=0,o=t;r<o.length;r++){var s=o[r];this.getObjectLayer(s).objects.indexOf(s)>-1&&(i=this.diagram.nameTable[s],this.diagram.unSelect(i),this.diagram.remove(this.diagram.nameTable[s]),this.diagram.add(i))}},t.prototype.cloneLayer=function(t){this.diagram.layers;var e=this.getLayer(t);if(e){var i=[],n={id:t+"_"+cb(),objects:[],visible:!0,lock:!1};this.addLayer(n,null,!0),n.zIndex=this.diagram.layers.length-1;i.length;for(var r=0,o=e.objects;r<o.length;r++){var s=o[r];i.push(this.diagram.nameTable[s])}this.paste(i)}},t.prototype.copy=function(){return this.clipboardData.pasteIndex=1,this.clipboardData.clipObject=this.copyObjects(),this.clipboardData.clipObject},t.prototype.copyObjects=function(){var t=[],e=[];if(this.clipboardData.childTable={},this.diagram.selectedItems.connectors.length>0){t=this.diagram.selectedItems.connectors;for(var i=0;i<t.length;i++){var n=void 0;n=this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(t[i])>-1?gb(this.diagram.nameTable[t[i].targetID]):gb(t[i]),e.push(n)}}if(this.diagram.selectedItems.nodes.length>0){t=t.concat(this.diagram.selectedItems.nodes);for(i=0;i<this.diagram.selectedItems.nodes.length;i++)if(!t[i].isPhase){var r=gb(this.diagram.selectedItems.nodes[i]);r.wrapper&&r.offsetX!==r.wrapper.offsetX&&(r.offsetX=r.wrapper.offsetX),r.wrapper&&r.offsetY!==r.wrapper.offsetY&&(r.offsetY=r.wrapper.offsetY);this.copyProcesses(r),e.push(gb(r));var o=op();if(ap(o,-r.rotateAngle,r.offsetX,r.offsetY),r.children){for(var s=this.clipboardData.childTable,a=void 0,l=this.getAllDescendants(r,[],!0),h=0;h<l.length;h++){var c=s[(a=this.diagram.nameTable[l[h].id]).id]=gb(a),d=sp(o,{x:c.wrapper.offsetX,y:c.wrapper.offsetY});a instanceof Lv&&(c.offsetX=d.x,c.offsetY=d.y,c.rotateAngle-=r.rotateAngle)}this.clipboardData.childTable=s}if("SwimLane"===r.shape.type){var p=this.diagram.getObject(this.diagram.selectedItems.nodes[i].id),u=(s=this.clipboardData.childTable,am(this.diagram,p.wrapper.children[0]));for(h=0;h<u.length;h++){var f=this.diagram.getObject(u[h]);s[f.id]=gb(f)}}if(r&&r.isLane){s=this.clipboardData.childTable,p=this.diagram.getObject(r.parentId);var g=Dm(r,this.diagram);s[r.id]=gb(g),s[r.id].width=p.wrapper.actualSize.width}}}if(0===this.clipboardData.pasteIndex){this.startGroupAction();for(var m=0,y=t;m<y.length;m++){var v=y[m];this.diagram.nameTable[v.id]&&(this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(v)>-1?this.diagram.remove(this.diagram.nameTable[v.targetID]):this.diagram.remove(v))}this.endGroupAction()}return this.sortByZIndex(e,"zIndex"),e},t.prototype.copyProcesses=function(t){if("Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0){for(var e=0,i=t.shape.activity.subProcess.processes;e<i.length;e++){var n=i[e];this.processTable[n]=gb(this.diagram.nameTable[n]),this.processTable[n].shape.activity.subProcess.processes&&this.processTable[n].shape.activity.subProcess.processes.length>0&&this.copyProcesses(this.processTable[n])}this.clipboardData.processTable=this.processTable}},t.prototype.group=function(){this.oldSelectedObjects=ky(this.diagram);var t=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|Ip.Group;var e,i=[],n={};n.id="group"+cb(),(n=new Lv(this.diagram,"nodes",n,!0)).children=[],i=(i=this.diagram.selectedItems.nodes).concat(this.diagram.selectedItems.connectors);for(var r=0;r<i.length;r++)i[r].parentId||n.children.push(i[r].id);(e=this.diagram.add(n))&&this.select(e);var o={type:"Group",undoObject:n,redoObject:n,category:"Internal"};this.addHistoryEntry(o),this.diagram.diagramActions=this.diagram.diagramActions&~Ip.Group,this.diagram.protectPropertyChange(t),this.updateBlazorSelector()},t.prototype.unGroup=function(t){var e=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|Ip.Group;var i=[];t?i.push(t):i=this.diagram.selectedItems.nodes;for(var n=0;n<i.length;n++){var r=i[n],o={type:"UnGroup",undoObject:gb(r),redoObject:gb(r),category:"Internal"};if(this.diagram.diagramActions&Ip.UndoRedo||this.addHistoryEntry(o),r.children){r.ports&&r.ports.length>0&&this.diagram.removePorts(r,r.ports),r.annotations&&r.annotations.length>0&&(!$()||$()&&""!==r.annotations[0].content)&&this.diagram.removeLabels(r,r.annotations);for(var s=this.diagram.nameTable[r.parentId],a=r.children.length-1;a>=0;a--)this.diagram.nameTable[r.children[a]].parentId="",this.diagram.deleteChild(this.diagram.nameTable[r.children[a]],r),r.parentId&&r.children[a]&&this.diagram.addChild(s,r.children[a]);r.parentId&&this.diagram.deleteChild(r,s)}this.diagram.removeNode(r),this.clearSelection()}this.diagram.diagramActions=this.diagram.diagramActions&~Ip.Group,this.diagram.protectPropertyChange(e)},t.prototype.paste=function(t){if(t||this.clipboardData.clipObject){this.diagram.protectPropertyChange(!0);var e=t?this.getNewObject(t):this.clipboardData.clipObject;if(e){var i=1!==e.length,n=!1,r={},o={};0!==this.clipboardData.pasteIndex&&this.clearSelection(),this.diagram.undoRedoModule&&(n=!0,this.diagram.historyManager.startGroupAction());for(var s=0,a=e;s<a.length;s++){r[(c=a[s]).id]=c}var l=[];i&&(this.diagram.isServerUpdate=!0);for(var h=0;h<e.length;h++){var c=e[h];if(Iy(c)===Gf){var d=gb(c),p=d.sourceID;d.sourceID="",r[p]&&o[p]&&(d.sourceID=o[p]),p=d.targetID,d.targetID="",r[p]&&o[p]&&(d.targetID=o[p]);var u=this.cloneConnector(d,i);l.push(u),o[c.id]=u.id}else{var f=this.cloneNode(c,i);if(l.push(f),f){o[c.id]=f.id;var g=c.inEdges;if(g)for(var m=0,y=g;m<y.length;m++){if(r[w=y[m]]&&o[w])(S=this.diagram.nameTable[o[w]]).targetID=o[c.id],this.diagram.connectorPropertyChange(S,{targetID:"",targetPortID:""},{targetID:S.targetID,targetPortID:S.targetPortID})}if(g=c.outEdges)for(var v=0,b=g;v<b.length;v++){var w,S;if(r[w=b[v]]&&o[w])(S=this.diagram.nameTable[o[w]]).sourceID=o[c.id],this.diagram.connectorPropertyChange(S,{sourceID:"",sourcePortID:""},{sourceID:S.sourceID,sourcePortID:S.sourcePortID})}}}}i&&(this.diagram.isServerUpdate=!1,this.diagram.UpdateBlazorDiagramModelCollection(e[0],l)),!0===n&&(this.diagram.historyManager.endGroupAction(),n=!1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.clipboardData.pasteIndex++,this.diagram.protectPropertyChange(!1)}}},t.prototype.getNewObject=function(t){var e,i=[];this.clipboardData.pasteIndex=1;for(var n=0;n<t.length;n++)e=gb(t[n]),i.push(e);return i},t.prototype.cloneConnector=function(t,e){var i,n=gb(t);return this.translateObject(n),n.zIndex=-1,i=this.diagram.add(n),this.selectObjects([i],e),i},t.prototype.cloneNode=function(t,e,i,n){var r,o,s={},a=gb(t),l=this.diagram.nameTable[t.parentId];if(t.shape&&"Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length&&(o=a.shape.activity.subProcess.processes,a.zIndex=-1,a.shape.activity.subProcess.processes=void 0),t.shape&&"SwimLane"===t.shape.type)Em(t,this.diagram,this.clipboardData);else if(l&&"SwimLane"===l.shape.type)Em(gb(l),this.diagram,this.clipboardData,t,!0);else if(!t.children||!t.children.length||i&&i.length)if(t.shape&&(!$()&&"TextAnnotation"===t.shape.shape||$()&&"TextAnnotation"===t.shape.bpmnShape)&&-1!==t.id.indexOf("_textannotation_")&&this.diagram.nameTable[t.id])for(var h=t.id.split("_textannotation_"),c=void 0,d=this.diagram.nameTable[t.id],p=0;p<d.inEdges.length;p++){var u=this.diagram.nameTable[d.inEdges[p]];if(u){c=this.diagram.nameTable[u.sourceID];var f=this.getAnnotation(c,h[1]),g={id:h[1]+cb(),angle:f.angle,text:f.text,length:f.length,shape:{shape:"TextAnnotation",type:"Bpmn"},nodeId:f.nodeId};this.diagram.addTextAnnotation(g,c)}}else this.translateObject(a,n),a.zIndex=-1,i&&(a.children=i),r=this.diagram.add(a);else r=this.cloneGroup(t,e);for(var m=0,y=Object.keys(s);m<y.length;m++){var v=y[m];this.diagram.add(s[v])}return o&&o.length&&(r.shape.activity.subProcess.processes=o,this.cloneSubProcesses(r)),r&&this.selectObjects([r],e),r},t.prototype.getAnnotation=function(t,e){var i=t.shape.annotations;if(i&&i.length)for(var n=0;n<=i.length;n++)if(i[n].id===e)return i[n]},t.prototype.cloneSubProcesses=function(t){var e=[],i={};if("Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length)for(var n=t.shape.activity.subProcess.processes,r=0;r<n.length;r++){for(var o=this.diagram.nameTable[n[r]]||this.clipboardData.processTable[n[r]],s=0,a=o.outEdges;s<a.length;s++){var l=a[s];e.indexOf(l)<0&&e.push(l)}for(var h=0,c=o.inEdges;h<c.length;h++){l=c[h];e.indexOf(l)<0&&e.push(l)}var d=gb(this.clipboardData.processTable[n[r]]);d.processId=t.id;var p=this.cloneNode(d,!1);i[n[r]]=p.id,n[r]=p.id,this.diagram.addProcess(p,t.id);for(var u=0,f=e;u<f.length;u++){var g=f[u],m=gb(this.diagram.nameTable[g]||this.diagram.connectorTable[g]);i[m.sourceID]&&i[m.targetID]&&(m.zIndex=-1,m.id+=cb(),m.sourceID=i[m.sourceID],m.targetID=i[m.targetID],e.splice(e.indexOf(g),1),this.diagram.add(m))}}},t.prototype.cloneGroup=function(t,e){var i,n=[],r=[],o=[],s=[];r=r.concat(t.children);var a=cb();if(this.clipboardData.childTable||t.children.length>0)for(var l=0;l<r.length;l++){var h=void 0;(h=this.clipboardData.childTable?this.clipboardData.childTable[r[l]]:this.diagram.nameTable[r[l]]).parentId="",h&&(Iy(h)===Gf?o.push(h):(i=this.cloneNode(h,e,void 0,a),s.push(h.id),n.push(i.id)))}for(var c=0;c<o.length;c++){if(o[c].sourceID||o[c].targetID)for(var d=0;d<s.length;d++)o[c].sourceID===s[d]&&(o[c].sourceID+=a),o[c].targetID===s[d]&&(o[c].targetID+=a);i=this.cloneConnector(o[c],e),n.push(i.id)}var p=this.cloneNode(t,e,n);return p&&p.container&&p.shape&&"UmlClassifier"===p.shape.type&&(this.diagram.updateDiagramObject(p),p.wrapper.measure(new Wd)),p},t.prototype.translateObject=function(t,e){t.id+=e||cb();var i=10*this.clipboardData.pasteIndex;if(Iy(t)===Gf){if(t.sourcePoint={x:t.sourcePoint.x+i,y:t.sourcePoint.y+i},t.targetPoint={x:t.targetPoint.x+i,y:t.targetPoint.y+i},"Bezier"===t.type)for(var n=t.segments,r=0;r<n.length;r++)qd.isEmptyPoint(n[r].point1)||(n[r].point1={x:n[r].point1.x+i,y:n[r].point1.y+i}),qd.isEmptyPoint(n[r].point2)||(n[r].point2={x:n[r].point2.x+i,y:n[r].point2.y+i});if(("Straight"===t.type||"Bezier"===t.type)&&t.segments&&t.segments.length>0)for(n=t.segments,r=0;r<n.length-1;r++)n[r].point.x+=i,n[r].point.y+=i}else t.offsetX+=i,t.offsetY+=i},t.prototype.drawObject=function(t){var e,i,n;$()&&(e=this.diagram.getProtectPropertyChangeValue(),this.diagram.protectPropertyChange(!0)),t&&t.shape&&"Text"===t.shape.type&&(t.width=this.diagram.drawingObject.width?this.diagram.drawingObject.width:50,t.height=this.diagram.drawingObject.height?this.diagram.drawingObject.height:20),n=gb(this.diagram.drawingObject);for(var r=0,o=Object.keys(t);r<o.length;r++){var s=o[r];n[s]=t[s]}return Iy(this.diagram.drawingObject)===Lv?(i=new Lv(this.diagram,"nodes",n,!0)).id=(this.diagram.drawingObject.id||"node")+cb():(i=new Gf(this.diagram,"connectors",n,!0)).id=(this.diagram.drawingObject.id||"connector")+cb(),$()&&Um(i,n,Iy(this.diagram.drawingObject)===Lv?this.diagram.nodeDefaults:this.diagram.connectorDefaults),this.diagram.initObject(i),this.diagram.updateDiagramObject(i),this.diagram.currentDrawingObject=i,$()&&this.diagram.protectPropertyChange(e),i},t.prototype.addObjectToDiagram=function(t){var e;this.diagram.removeFromAQuad(t),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[t.id]),delete this.diagram.nameTable[t.id],e=this.diagram.add(t),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.selectObjects([e]),t&&!vg(this.diagram)&&(this.diagram.tool&=~Cp.DrawOnce,this.diagram.currentDrawingObject=void 0)},t.prototype.enableServerDataBinding=function(t){this.diagram.enableServerDataBinding(t)},t.prototype.addText=function(t,e){var i=this.diagram.findElementUnderMouse(t,e);this.diagram.startTextEdit(t,i instanceof Qp?i.id.split("_")[1]:void 0)},t.prototype.updateArgsObject=function(t,e,i){if(t)for(var n=0;n<t.length;n++)Iy(t[n])===Gf?i.connectors.push(jy(t[n])):i.nodes.push(jy(t[n]))},t.prototype.updateSelectionChangeEventArgs=function(t,e,i){if($()){var n=(t={cause:this.diagram.diagramActions,newValue:{},oldValue:{},state:t.state,type:t.type,cancel:!1}).oldValue,r=t.newValue;return n.connectors=[],n.nodes=[],r.connectors=[],r.nodes=[],this.updateArgsObject(this.getSelectedObject(),t,r),this.updateArgsObject(i,t,n),t}return t},t.prototype.isUserHandle=function(t){var e=this.diagram.selectedItems;if(e.wrapper&&my(e.constraints,"UserHandle"))for(var i=0,n=e.userHandles;i<n.length;i++){var r=n[i];if(r.visible)if(rw(t,fy(e,r,this.diagram.scroller.transform),r.size/(2*this.diagram.scroller.transform.scale)))return!0}return!1},t.prototype.selectObjects=function(t,e,i){return jw(this,void 0,void 0,function(){var n,r,o,s,a,l,h,c,d;return Nw(this,function(p){switch(p.label){case 0:if(n={oldValue:i||this.getSelectedObject(),newValue:t,cause:this.diagram.diagramActions,state:"Changing",type:"Addition",cancel:!1},this.diagram.enableServerDataBinding(!1),!0,$()?this.oldSelectedObjects=ky(this.diagram):this.diagram.triggerEvent(kp.selectionChange,n),r=mg(this.diagram),(o=gg(this.diagram))||r){if(!r&&(t.length>1||e&&1===t.length)){if(1!==t.length)return[2];this.clearSelection()}if(!(o||1!==t.length||e&&ow(this.diagram)))return this.clearSelection(),[2]}if(n.cancel)return[3,4];for(s=0;s<t.length;s++)if(a=t[s])if(!0,ow(this.diagram)){if((s>0||e)&&a.children&&!a.parentId)for(l=0;l<this.diagram.selectedItems.nodes.length;l++)(h=this.diagram.nameTable[this.diagram.selectedItems.nodes[l].parentId])&&(h=this.findParent(h))&&a.id===h.id&&this.selectGroup(a);this.selectProcesses(a),this.selectBpmnSubProcesses(a)&&this.select(a,s>0||e,!0)}else this.select(a,s>0||e,!0);return n={oldValue:i||[],newValue:this.getSelectedObject(),cause:this.diagram.diagramActions,state:"Changed",type:"Addition",cancel:!1},this.diagram.renderSelector(e||t&&t.length>1),this.updateBlazorSelectorModel(i),$()&&this.diagram.selectionChange&&(n=this.updateSelectionChangeEventArgs(n,t,i||[]),this.updateBlazorSelector()),$()?[3,1]:(this.diagram.triggerEvent(kp.selectionChange,n),[3,3]);case 1:return[4,this.diagram.triggerEvent(kp.selectionChange,n)];case 2:(c=p.sent())&&c.cancel&&(d=[],c.oldValue.nodes.length>0&&(d=c.oldValue.nodes),c.oldValue.connectors.length>0&&(d=d.concat(c.oldValue.connectors)),d&&(d.length>0?this.diagram.select(d):this.clearSelection(!0,!0),this.updateBlazorSelector())),p.label=3;case 3:this.diagram.enableServerDataBinding(!0),p.label=4;case 4:return[2]}})})},t.prototype.updateBlazorSelector=function(){if($()){this.newSelectedObjects=ky(this.diagram);var t=this.deepDiffer.map(gb(this.newSelectedObjects),this.oldSelectedObjects),e=this.deepDiffer.frameObject({},t),i=this.deepDiffer.removeEmptyValues(e);i.nodes=[];for(var n=0;n<this.diagram.selectedItems.nodes.length;n++)i.nodes.push(this.diagram.selectedItems.nodes[n].id);i.connectors=[];for(n=0;n<this.diagram.selectedItems.connectors.length;n++)i.connectors.push(this.diagram.selectedItems.connectors[n].id);if(window&&window.Blazor){var r={methodName:"UpdateBlazorProperties",diagramobj:{selectedItems:i}};window.sfBlazor.updateBlazorProperties(r,this.diagram)}}},t.prototype.findParent=function(t){return t.parentId&&(t=this.diagram.nameTable[t.parentId],this.findParent(t)),t},t.prototype.selectProcesses=function(t){if(this.hasProcesses(t))for(var e=t.shape.activity.subProcess.processes,i=0;i<e.length;i++){var n=this.diagram.nameTable[e[i]];this.hasProcesses(n)&&this.selectObjects([n],!0),this.unSelect(n)}},t.prototype.selectGroup=function(t){for(var e=0;e<t.children.length;e++){var i=this.diagram.nameTable[t.children[e]];i.children&&this.selectGroup(i),this.unSelect(this.diagram.nameTable[t.children[e]])}},t.prototype.selectBpmnSubProcesses=function(t){var e,i=!0;if(t.processId)i=!aw(this.diagram,this.diagram.nameTable[t.processId])&&this.selectBpmnSubProcesses(this.diagram.nameTable[t.processId]);else if(t instanceof Gf){if(t.sourceID&&this.diagram.nameTable[t.sourceID]&&this.diagram.nameTable[t.sourceID].processId&&(e=this.diagram.nameTable[t.sourceID].processId),t.targetID&&this.diagram.nameTable[t.targetID]&&this.diagram.nameTable[t.targetID].processId&&(e=this.diagram.nameTable[t.targetID].processId),e){if(aw(this.diagram,this.diagram.nameTable[e]))return!1;i=this.selectBpmnSubProcesses(this.diagram.nameTable[e])}}else t.parentId&&this.diagram.nameTable[t.parentId]&&"UmlClassifier"===this.diagram.nameTable[t.parentId].shape.type&&aw(this.diagram,this.diagram.nameTable[t.parentId])&&(i=!1);return i},t.prototype.hasProcesses=function(t){return!!(t&&"Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0)},t.prototype.select=function(t,e,i){var n=this.getObjectLayer(t.id);if(eg(t)&&!(t instanceof Mv)&&!aw(this.diagram,t)&&n&&!n.lock&&n.visible&&t.wrapper.visible){(e=!!ow(this.diagram)&&e)||this.clearSelection(),this.diagram.enableServerDataBinding(!1);var r=this.diagram.selectedItems;if(t instanceof Lv)if(t.isHeader){var o=this.diagram.nameTable[t.parentId];r.nodes.push(o)}else r.nodes.push(t);else r.connectors.push(t);if(e)r.wrapper.rotateAngle=r.rotateAngle=0,r.wrapper.children.push(t.wrapper);else if(r.init(this.diagram),1===r.nodes.length&&0===r.connectors.length){var s=Lm(this.diagram,r);s&&(r.wrapper.children[0]=s),r.rotateAngle=r.nodes[0].rotateAngle,r.wrapper.rotateAngle=r.nodes[0].rotateAngle,r.wrapper.pivot=r.nodes[0].pivot}i||this.diagram.renderSelector(e),this.diagram.enableServerDataBinding(!0)}},t.prototype.getObjectCollectionId=function(t,e){for(var i=[],n=0,r=t?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;!e&&n<r.length;)i[n]=r[n].id,n++;return i},t.prototype.updateBlazorSelectorModel=function(t,e){if(window&&window.sfBlazor){for(var i=0,n=[];t&&i<t.length;)n[i]=t[i].id,i++;i=0;var r=jy({nodes:this.getObjectCollectionId(!0,e),connectors:this.getObjectCollectionId(!1,e)});window.sfBlazor.updateDiagramCollection&&window.sfBlazor.updateDiagramCollection.call(this.diagram,"selectedItems",r,n,!1,!0)}},t.prototype.labelSelect=function(t,e){this.oldSelectedObjects=ky(this.diagram);var i=this.diagram.selectedItems,n=this.diagram.allowServerDataBinding;this.diagram.allowServerDataBinding=!1,i.nodes=i.connectors=[],this.diagram.allowServerDataBinding=n,t instanceof Lv?i.nodes[0]=t:i.connectors[0]=t,i.annotation=this.findTarget(e,t),i.init(this.diagram),this.diagram.renderSelector(!1),this.updateBlazorSelector()},t.prototype.unSelect=function(t){var e=[];e.push(t);var i={oldValue:e,newValue:[],cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1};if(this.diagram.currentSymbol||$()||this.diagram.triggerEvent(kp.selectionChange,i),aw(this.diagram,t)){var n=this.diagram.selectedItems,r=void 0;t instanceof Lv?(r=n.nodes.indexOf(t,0),n.nodes.splice(r,1)):(r=n.connectors.indexOf(t,0),n.connectors.splice(r,1)),i={oldValue:e,newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1},this.updateBlazorSelectorModel(e),(i={oldValue:jy(e),newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:i.cancel}).cancel||(r=n.wrapper.children.indexOf(t.wrapper,0),n.wrapper.children.splice(r,1),this.diagram.updateSelector(),this.diagram.currentSymbol||($()&&(i=this.updateSelectionChangeEventArgs(i,[],e),this.updateBlazorSelector()),this.diagram.triggerEvent(kp.selectionChange,i)))}},t.prototype.getChildElements=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];n.children&&n.children.length>0?e.concat(this.getChildElements(n.children)):(e.push(n.id),n instanceof Qp&&e.push(n.id+"_text"))}return e},t.prototype.moveSvgNode=function(t,e){var i=Hv(e+"_groupElement",this.diagram.element.id),n=Hv(t+"_groupElement",this.diagram.element.id);i.parentNode.insertBefore(n,i)},t.prototype.sendLayerBackward=function(t){var e=this.getLayer(t);if(e&&0!==e.zIndex){var i=e.zIndex;if("SVG"===this.diagram.mode){var n=e.objects,r=this.getLayer(this.diagram.layerZIndexTable[i-1]).objects[0];if(r)for(var o=0,s=n;o<s.length;o++){var a=s[o];this.moveSvgNode(a,r)}}var l=this.getLayer(this.diagram.layerZIndexTable[i-1]);l.zIndex=l.zIndex+1,e.zIndex=e.zIndex-1;var h=this.diagram.layerZIndexTable[i];this.diagram.layerZIndexTable[i]=this.diagram.layerZIndexTable[i-1],this.diagram.layerZIndexTable[i-1]=h,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},t.prototype.bringLayerForward=function(t){var e=this.getLayer(t);if(e&&e.zIndex<this.diagram.layers.length-1){var i=e.zIndex,n=this.getLayer(this.diagram.layerZIndexTable[i+1]);if("SVG"===this.diagram.mode)for(var r=e.objects[0],o=0,s=n.objects;o<s.length;o++){var a=s[o];a&&this.moveSvgNode(a,r)}n.zIndex=n.zIndex-1,e.zIndex=e.zIndex+1;var l=this.diagram.layerZIndexTable[i];this.diagram.layerZIndexTable[i]=this.diagram.layerZIndexTable[i+1],this.diagram.layerZIndexTable[i+1]=l,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},t.prototype.sendToBack=function(t){if(this.diagram.protectPropertyChange(!0),ow(this.diagram)||t){var e=t&&t.id;e=e||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id);var i=this.diagram.nameTable[e].zIndex,n=this.diagram.layers.indexOf(this.getObjectLayer(e)),r=this.diagram.layers[n].zIndexTable,o=gb(this.diagram.selectedItems);if(1!==this.diagram.nodes.length&&(void 0===this.diagram.nameTable[e].children||this.checkObjectBehind(e,r,i))){for(var s=i;s>0;s--)r[s]&&(r[s-1]?(r[s]=r[s-1],this.diagram.nameTable[r[s]].zIndex=s):(r[s-1]=r[s],this.diagram.nameTable[r[s-1]].zIndex=s,delete r[s]));if(r[0]=this.diagram.nameTable[e].id,this.diagram.nameTable[e].zIndex=0,"SVG"===this.diagram.mode){for(var a=r[s=1];!a&&s<i;)a=r[++s];this.moveSvgNode(e,a),this.updateNativeNodeIndex(e)}else this.diagram.refreshCanvasLayers();var l={type:"SendToBack",category:"Internal",undoObject:o,redoObject:gb(this.diagram.selectedItems)};this.diagram.diagramActions&Ip.UndoRedo||this.addHistoryEntry(l)}}this.diagram.protectPropertyChange(!1)},t.prototype.checkObjectBehind=function(t,e,i){for(var n=0;n<i;n++){var r=e[n];if(t!==this.diagram.nameTable[r].parentId)return!0}return!1},t.prototype.bringToFront=function(t){if(this.diagram.protectPropertyChange(!0),ow(this.diagram)||t){var e=t&&t.id;e=e||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id);for(var i=this.diagram.layers.indexOf(this.getObjectLayer(e)),n=this.diagram.layers[i].zIndexTable,r=gb(this.diagram.selectedItems),o=Number(Object.keys(n).sort(function(t,e){return Number(t)-Number(e)}).reverse()[0]),s=this.diagram.nameTable[e].zIndex;s<o;s++)n[s]&&(n[s+1]?(n[s]=n[s+1],this.diagram.nameTable[n[s]].zIndex=s):(n[s+1]=n[s],this.diagram.nameTable[n[s+1]].zIndex=s,delete n[s]));if(n[o]=this.diagram.nameTable[e].id,this.diagram.nameTable[e].zIndex=o,"SVG"===this.diagram.mode){var a=this.diagram.diagramLayer,l=(this.getChildElements(this.diagram.nameTable[e].wrapper.children),Hv(e+"_groupElement",this.diagram.element.id)),h=this.diagram.selectedItems.nodes;if(h.length>0&&("Native"===h[0].shape.type||"HTML"===h[0].shape.type)){l.parentNode.removeChild(l);for(var c=0;c<this.diagram.views.length;c++){var d=(l=Hv(e+("HTML"===h[0].shape.type?"_html_element":"_content_groupElement"),this.diagram.views[c])).parentNode.lastChild;d.parentNode.insertBefore(l,d.nextSibling)}var p=Kv(this.diagram.element.id);this.diagram.diagramRenderer.renderElement(this.diagram.nameTable[e].wrapper,a,p)}else{var u=this.getObjectLayer(e);for(s=0;s<u.objects.length;s++)u.objects[s]!==e&&(this.moveSvgNode(u.objects[s],e),this.updateNativeNodeIndex(e))}}else this.diagram.refreshCanvasLayers();var f={type:"BringToFront",category:"Internal",undoObject:r,redoObject:gb(this.diagram.selectedItems)};this.diagram.diagramActions&Ip.UndoRedo||this.addHistoryEntry(f)}this.diagram.protectPropertyChange(!1)},t.prototype.sortByZIndex=function(t,e){var i=e||"zIndex";return t=t.sort(function(t,e){return t[i]-e[i]})},t.prototype.orderCommands=function(t,e,i){var n=e.nodes;if(n=n.concat(e.connectors),t)"SendBackward"===i?this.sendBackward(n[0]):"SendForward"===i?this.sendForward(n[0]):"BringToFront"===i?this.bringToFront(n[0]):"SendToBack"===i&&this.sendToBack(n[0]);else{var r=n[0].zIndex,o=this.diagram.nameTable[n[0].id].zIndex,s=n[0],a=this.getObjectLayer(s.id),l=a.zIndex,h=a.zIndexTable;if("SendBackward"===i||"SendForward"===i)for(var c=0;c<n.length;c++){var d=n[c],p=this.diagram.layers.indexOf(this.getObjectLayer(d.id));this.diagram.nameTable[n[c].id].zIndex=d.zIndex,this.diagram.layers[p].zIndexTable[d.zIndex]=d.id}else if("BringToFront"===i)for(var u=o;u>r;u--)h[u]&&(h[u-1]?(h[u]=h[u-1],this.diagram.nameTable[h[u]].zIndex=u):(h[u-1]=h[u],this.diagram.nameTable[h[u-1]].zIndex=u,delete h[u]));else if("SendToBack"===i)for(u=o;u<r;u++)h[u]&&(h[u+1]?(h[u]=h[u+1],this.diagram.nameTable[h[u]].zIndex=u):(h[u+1]=h[u],this.diagram.nameTable[h[u+1]].zIndex=u,delete h[u]));if("BringToFront"===i||"SendToBack"===i)this.diagram.nameTable[n[0].id].zIndex=s.zIndex,this.diagram.layers[l].zIndexTable[s.zIndex]=s.id;if("SVG"===this.diagram.mode){if("SendBackward"===i)this.moveObject(n[1].id,n[0].id);else if("SendForward"===i)this.moveObject(n[0].id,n[1].id);else if("BringToFront"===i)this.moveObject(n[0].id,h[n[0].zIndex+1]);else if("SendToBack"===i){var f=this.getObjectLayer(n[0].id);for(c=0;c<=n[0].zIndex;c++)f.objects[c]!==n[0].id&&(this.moveSvgNode(f.objects[c],n[0].id),this.updateNativeNodeIndex(n[0].id))}}else this.diagram.refreshCanvasLayers()}},t.prototype.moveObject=function(t,e){e&&(this.moveSvgNode(t,e),this.updateNativeNodeIndex(t,e))},t.prototype.sendForward=function(t){if(this.diagram.protectPropertyChange(!0),ow(this.diagram)||t){var e=t&&t.id;e=e||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id);var i=this.diagram.layers.indexOf(this.getObjectLayer(e)),n=this.diagram.layers[i].zIndexTable,r=(Object.keys(n).length,this.diagram.nameTable[e]),o=[],s=this.diagram.spatialSearch.findObjects(r.wrapper.bounds);s.length>2&&(s=this.sortByZIndex(s));for(var a=0,l=s;a<l.length;a++){var h=l[a];if(r.id!==h.id)if(i===this.getObjectLayer(h.id).zIndex&&Number(this.diagram.nameTable[e].zIndex)<Number(h.zIndex)&&r.wrapper.bounds.intersects(h.wrapper.bounds)){o.push(h);break}}if(o.length>0){var c=o[0].zIndex,d=r.zIndex,p=n[c],u=gb(this.diagram.selectedItems);this.diagram.nameTable[p]instanceof Lv?u.nodes.push(gb(this.diagram.nameTable[p])):u.connectors.push(gb(this.diagram.nameTable[p])),this.diagram.layers[0].zIndexTable[c]=r.id,this.diagram.nameTable[n[c]].zIndex=c,this.diagram.layers[0].zIndexTable[d]=o[0].id,this.diagram.nameTable[n[d]].zIndex=d,"SVG"===this.diagram.mode?(this.moveSvgNode(n[Number(o[0].zIndex)],e),this.updateNativeNodeIndex(n[Number(o[0].zIndex)],e)):this.diagram.refreshCanvasLayers();var f=gb(this.diagram.selectedItems);this.diagram.nameTable[p]instanceof Lv?f.nodes.push(gb(this.diagram.nameTable[p])):f.connectors.push(gb(this.diagram.nameTable[p]));var g={type:"SendForward",category:"Internal",undoObject:u,redoObject:f};this.diagram.diagramActions&Ip.UndoRedo||this.addHistoryEntry(g)}}this.diagram.protectPropertyChange(!1)},t.prototype.sendBackward=function(t){if(this.diagram.protectPropertyChange(!0),ow(this.diagram)||t){var e=t&&t.id;e=e||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id);var i=this.diagram.layers.indexOf(this.getObjectLayer(e)),n=this.diagram.layers[i].zIndexTable,r=(Object.keys(n).length,this.diagram.nameTable[e]),o=[],s=this.diagram.spatialSearch.findObjects(r.wrapper.bounds);s.length>2&&(s=this.sortByZIndex(s));for(var a=0,l=s;a<l.length;a++){var h=l[a];if(r.id!==h.id)i===this.getObjectLayer(h.id).zIndex&&Number(this.diagram.nameTable[e].zIndex)>Number(h.zIndex)&&r.wrapper.bounds.intersects(h.wrapper.bounds)&&o.push(h)}if(o.length>0){var c=o[o.length-1].zIndex,d=r.zIndex,p=n[c],u=gb(this.diagram.selectedItems);this.diagram.nameTable[p]instanceof Lv?u.nodes.push(gb(this.diagram.nameTable[p])):u.connectors.push(gb(this.diagram.nameTable[p])),n[c]=r.id,this.diagram.nameTable[n[c]].zIndex=c,n[d]=o[o.length-1].id,this.diagram.nameTable[n[d]].zIndex=d,"SVG"===this.diagram.mode?r.children&&r.children.length>0||(this.moveSvgNode(e,n[o[o.length-1].zIndex]),this.updateNativeNodeIndex(e,n[o[o.length-1].zIndex])):this.diagram.refreshCanvasLayers();var f=gb(this.diagram.selectedItems);this.diagram.nameTable[p]instanceof Lv?f.nodes.push(gb(this.diagram.nameTable[p])):f.connectors.push(gb(this.diagram.nameTable[p]));var g={type:"SendBackward",category:"Internal",undoObject:u,redoObject:f};this.diagram.diagramActions&Ip.UndoRedo||this.addHistoryEntry(g)}}this.diagram.protectPropertyChange(!1)},t.prototype.updateNativeNodeIndex=function(t,e){for(var i=this.diagram.selectedItems.nodes[0]||this.diagram.getObject(e),n=0;n<this.diagram.views.length;n++)if(i&&("HTML"===i.shape.type||"Native"===i.shape.type)){var r="HTML"===i.shape.type?"_html_element":"_content_groupElement",o=Hv(t+r,this.diagram.views[n]),s=e?Hv(e+r,this.diagram.views[n]):o.parentElement.firstChild;o.parentNode.id===s.parentNode.id&&s.parentNode.insertBefore(o,s)}},t.prototype.initSelectorWrapper=function(){var t=this.diagram.selectedItems;t.init(this.diagram),1===t.nodes.length&&0===t.connectors.length&&(t.rotateAngle=t.nodes[0].rotateAngle,t.wrapper.rotateAngle=t.nodes[0].rotateAngle,t.wrapper.pivot=t.nodes[0].pivot)},t.prototype.doRubberBandSelection=function(t){this.clearSelectionRectangle();var e=[],i=[];e=this.diagram.getNodesConnectors(e),(i="CompleteIntersect"===this.diagram.selectedItems.rubberBandSelectionMode?function(t,e){for(var i=[],n=0;n<e.length;n++){var r=e[n];t.containsRect(r.wrapper.bounds)&&i.push(r)}return i}(t,e):this.diagram.spatialSearch.findObjects(t)).length&&this.selectObjects(i,!0)},t.prototype.clearSelectionRectangle=function(){var t=Vv(this.diagram.element.id).getElementById(this.diagram.element.id+"_diagramAdorner_selected_region");t&&li(t)},t.prototype.dragConnectorEnds=function(t,e,i,n,r,o){var s,a,l,h=!1;return e instanceof Mv?s=e.connectors[0]:e instanceof Gf&&this.diagram.currentDrawingObject&&(this.clearSelection(),s=this.diagram.currentDrawingObject),"BezierSourceThumb"!==t&&"BezierTargetThumb"!==t||(h=!0),"ConnectorSourceEnd"===t||"BezierSourceThumb"===t?(a=i.x-(h?n.bezierPoint1.x:s.sourcePoint.x),l=i.y-(h?n.bezierPoint1.y:s.sourcePoint.y),this.dragSourceEnd(s,a,l,null,i,t,void 0,r,o,void 0,n)):(a=i.x-(h?n.bezierPoint2.x:s.targetPoint.x),l=i.y-(h?n.bezierPoint2.y:s.targetPoint.y),this.dragTargetEnd(s,a,l,null,i,t,void 0,n))},t.prototype.getSelectedObject=function(){var t=this.diagram.selectedItems;return t.nodes.concat(t.connectors)},t.prototype.updateBlazorProperties=function(t){if(t){if(window&&window.Blazor){e={methodName:"UpdateBlazorProperties",diagramobj:this.deepDiffer.diagramObject};window.sfBlazor.updateBlazorProperties(e,this.diagram)}}else if(window&&window.Blazor){var e={methodName:"UpdateBlazorProperties",diagramobj:this.diagramObject};window.sfBlazor.updateBlazorProperties(e,this.diagram)}this.diagram.enableServerDataBinding(!0),this.deepDiffer.newNodeObject=[],this.deepDiffer.newConnectorObject=[],this.diagramObject=[],this.diagram.oldNodeObjects=[],this.diagram.oldConnectorObjects=[]},t.prototype.enableCloneObject=function(t){this.diagram.canEnableBlazorObject=t},t.prototype.ismouseEvents=function(t){this.diagram.blazorActions=t?up.interaction:~up.interaction},t.prototype.updateLayerObject=function(t,e){if($()){var i;i=this.deepDiffer.getLayerObject(t,e,this.diagram),this.diagramObject=i,this.updateBlazorProperties()}},t.prototype.getDiagramOldValues=function(t,e){for(var i={},n=0;n<e.length;n++)i[e[n]]=gb(this.diagram[e[n]]);var r=gb(i),o=this.deepDiffer.map(r,t),s=this.deepDiffer.frameObject({},o),a=this.deepDiffer.removeEmptyValues(s);a=this.deepDiffer.changeSegments(a,r),this.diagramObject=a,this.updateBlazorProperties()},t.prototype.getBlazorOldValues=function(t,e){if($()){for(var i=this.diagram.oldNodeObjects,n=0;n<i.length;n++)i[n].id&&(this.diagram.oldNodeObjects[n]instanceof Lv&&(this.diagram.oldNodeObjects[n]=jy(this.diagram.oldNodeObjects[n])),this.deepDiffer.getDifferenceValues(this.diagram.nameTable[i[n].id],t,e,this.diagram));var r=this.diagram.oldConnectorObjects;for(n=0;n<r.length;n++)r[n].id&&(this.diagram.oldConnectorObjects[n]instanceof Gf&&(this.diagram.oldConnectorObjects[n]=jy(this.diagram.oldConnectorObjects[n])),this.deepDiffer.getDifferenceValues(this.diagram.nameTable[r[n].id],t,e,this.diagram));(i.length>0||r.length>0)&&this.updateBlazorProperties(!0)}},t.prototype.getObjectChanges=function(t,e,i){for(var n=0;n<t.length;n++){var r=this.deepDiffer.map(e[n],t[n]),o=this.deepDiffer.frameObject({},r),s=this.deepDiffer.removeEmptyValues(o);s.children&&(s.children=gb(e[n]).children),(s=this.deepDiffer.changeSegments(s,e[n])).sfIndex=db(this.diagram,e[n].id),i.push(s)}},t.prototype.clearSelection=function(t,e){return jw(this,void 0,void 0,function(){var i,n,r,o,s,a;return Nw(this,function(l){switch(l.label){case 0:return i=this.diagram.allowServerDataBinding,this.diagram.enableServerDataBinding(!1),ow(this.diagram)?(n=this.diagram.selectedItems,r=this.getSelectedObject(),this.diagram.currentSymbol&&(this.diagram.previousSelectedObject=r),o={oldValue:r,newValue:[],cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1},this.updateBlazorSelectorModel(r,!0),t&&($()?this.oldSelectedObjects=gb(n):this.diagram.triggerEvent(kp.selectionChange,o)),o.cancel?[3,3]:(n.offsetX=0,n.offsetY=0,n.width=0,n.height=0,n.rotateAngle=0,n.nodes=[],n.connectors=[],n.wrapper=null,n.annotation=void 0,this.diagram.clearSelectorLayer(),t?(o={oldValue:jy(r),newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1},$()&&(o=this.updateSelectionChangeEventArgs(o,[],r),this.updateBlazorSelector()),$()?[3,1]:(this.diagram.triggerEvent(kp.selectionChange,o),[3,3])):[3,3])):[3,4];case 1:return[4,this.diagram.triggerEvent(kp.selectionChange,o)];case 2:(s=l.sent())&&s.cancel&&!e&&(a=[],s.oldValue.nodes.length>0&&(a=s.oldValue.nodes),s.oldValue.connectors.length>0&&(a=a.concat(s.oldValue.connectors)),a&&this.diagram.select(a),this.updateBlazorSelector()),l.label=3;case 3:this.diagram.enableServerDataBinding(i),l.label=4;case 4:return[2]}})})},t.prototype.clearSelectedItems=function(){var t=this.diagram.selectedItems.nodes?this.diagram.selectedItems.nodes.length:0,e=this.diagram.selectedItems.connectors?this.diagram.selectedItems.connectors.length:0;this.clearSelection(t+e>0)},t.prototype.removeStackHighlighter=function(){var t=Vv(this.diagram.element.id),e=t.getElementById(t.id+"_stack_highlighter");e&&e.parentNode.removeChild(e)},t.prototype.renderStackHighlighter=function(t,e){var i,n,r,o=this.diagram.selectedItems.nodes[0];if(!e){var s=this.diagram.findObjectsUnderMouse(t.position);if((e=this.diagram.findObjectUnderMouse(s,"Drag",!0))&&!(e.isLane||e.isPhase||e.isHeader))for(var a=0;a<s.length;a++){var l=this.diagram.nameTable[s[a].id];(l.isLane||l.isPhase||l.isHeader)&&(e=l,this.diagram.parentObject=e)}}o&&e&&e.isLane&&o.shape&&!o.shape.isPhase&&(n=this.diagram.nameTable[e.parentId],this.diagram.currentSymbol&&"SwimLane"===n.shape.type&&(i=!0),(o&&!o.parentId&&"SwimLane"!==o.shape.type||o&&o.parentId&&this.diagram.nameTable[o.parentId]&&this.diagram.nameTable[o.parentId].isLane&&o.parentId!==e.parentId&&o.parentId!==e.id)&&(r=this.diagram.selectedItems,(h=Lm(this.diagram,r,e.id,!0))&&(r.wrapper.children[0]=h),this.diagram.renderSelector(!1,!0),r.wrapper.children[0]=r.nodes[0].wrapper));o&&e&&e.parentId&&o.shape&&o.shape.isPhase&&("SwimLane"===this.diagram.nameTable[e.parentId].shape.type&&(this.diagram.selectedItems.wrapper.children[0]=this.diagram.nameTable[e.parentId].wrapper,this.diagram.renderSelector(!1,!0)));if(i&&this.diagram.currentSymbol.shape.isLane||o&&e&&o.parentId&&e.parentId&&!o.isPhase&&o.parentId===e.parentId&&o.id!==e.id&&n&&n.container&&("Stack"===n.container.type||"Grid"===n.container.type)){var h=void 0,c="Vertical"===n.container.orientation,d="Stack"===n.container?c:!c;"Grid"===n.container.type&&e.isLane&&(!this.diagram.currentSymbol&&"Horizontal"===n.shape.orientation&&e.rowIndex!==o.rowIndex||"Vertical"===n.shape.orientation&&e.columnIndex!==o.columnIndex||this.diagram.currentSymbol&&this.diagram.currentSymbol.shape.orientation===n.container.orientation)&&(r=this.diagram.selectedItems,(o.isLane&&Rm(o,this.diagram)||!o.isLane)&&(h=Lm(this.diagram,r,e.id,i)));var p="Stack"===n.container.type?e.wrapper:h;p&&tm(p,d,t.position,this.diagram,!1,!0)}},t.prototype.drag=function(t,e,i){var n;if(ig(t)&&this.checkBoundaryConstraints(e,i,t.wrapper.bounds)&&Cg(this.diagram))if(t instanceof Lv){var r={offsetX:t.offsetX,offsetY:t.offsetY};if(t.offsetX+=e,t.offsetY+=i,t.children&&!t.container){Yg(this.diagram,t,!0)||(this.diagram.diagramActions=this.diagram.diagramActions|Ip.isGroupDragging);for(var o=this.getAllDescendants(t,[]),s=0;s<o.length;s++)n=this.diagram.nameTable[o[s].id],this.drag(n,e,i);this.updateInnerParentProperties(t),this.diagram.diagramActions=this.diagram.diagramActions&~Ip.isGroupDragging}if(Yg(this.diagram,t,!0)?Zg(this.diagram,t):(t&&t.shape&&"UmlClassifier"===t.shape.type&&(t.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(t,r,{offsetX:t.offsetX,offsetY:t.offsetY},void 0,void 0,!1),t.wrapper.measureChildren=!1),"SwimLane"===t.shape.type&&!this.diagram.currentSymbol){var a=t.wrapper.children[0];fm(am(this.diagram,a),this.diagram)}}else{var l=t,h=(r={sourcePoint:l.sourcePoint,targetPoint:l.targetPoint},"Bezier"===l.type),c=!1;if(l.sourceWrapper?c=!0:this.dragSourceEnd(l,e,i,!0,null,"",h),l.targetWrapper?c=!0:this.dragTargetEnd(l,e,i,!0,null,"",h),!c){this.dragControlPoint(l,e,i,!0);var d={sourcePoint:l.sourcePoint,targetPoint:l.targetPoint};this.diagram.connectorPropertyChange(l,r,d)}}},t.prototype.connectorSegmentChange=function(t,e,i){var n,r,o=!0;if(!1===e.equals(e,t.wrapper.bounds)&&t.outEdges.length>0)for(var s=0;s<t.outEdges.length;s++){var a=this.diagram.nameTable[t.outEdges[s]];if(o=""!==a.targetID?!this.isSelected(this.diagram.nameTable[a.targetID]):!this.isSelected(this.diagram.nameTable[a.id]),"Orthogonal"===a.type&&a.segments&&a.segments.length>1)if(i){var l=a.segments[0],h=a.segments[1],c=Uu(Du(t.wrapper,t.wrapper.corners,t.wrapper.bounds),l.direction),d=Qu({corners:void 0,point:c=qu(a,a.sourceWrapper,c,{x:a.sourceWrapper.offsetX,y:a.sourceWrapper.offsetY},!1),margin:void 0,direction:l.direction},{corners:void 0,point:h.points[1],margin:void 0,direction:void 0});l.length=qd.distancePoints(d[0],d[1]),h.direction&&h.length&&(h.length=qd.distancePoints(d[1],d[2]))}else if(o){switch(a.segments[0].direction){case"Bottom":n=t.wrapper.bounds.bottomCenter.x-e.bottomCenter.x,r=t.wrapper.bounds.bottomCenter.y-e.bottomCenter.y;break;case"Top":n=t.wrapper.bounds.topCenter.x-e.topCenter.x,r=t.wrapper.bounds.topCenter.y-e.topCenter.y;break;case"Left":n=t.wrapper.bounds.middleLeft.x-e.middleLeft.x,r=t.wrapper.bounds.middleLeft.y-e.middleLeft.y;break;case"Right":n=t.wrapper.bounds.middleRight.x-e.middleRight.x,r=t.wrapper.bounds.middleRight.y-e.middleRight.y}this.dragSourceEnd(a,n,r,!0,null,"ConnectorSourceEnd",void 0,void 0,void 0,!(t.parentId&&this.diagram.diagramActions&Ip.isGroupDragging))}}},t.prototype.updateEndPoint=function(t,e){t.sourcePoint,t.targetPoint,t.sourceID&&t.sourceID,t.targetID&&t.targetID,t.sourcePortID&&t.sourcePortID,t.targetPortID&&t.targetPortID,t.segments&&t.segments;var i={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint};t.sourceID&&(i.sourceID=t.sourceID),t.targetID&&(i.targetID=t.targetID),t.sourcePortID&&(i.sourcePortID=t.sourcePortID),t.targetPortID&&(i.targetPortID=t.targetPortID),t.segments&&(i.segments=t.segments),this.diagram.connectorPropertyChange(t,e||{},i),this.diagram.updateSelector()},t.prototype.dragSourceEnd=function(t,e,i,n,r,o,s,a,l,h,c){var d=this.diagram.nameTable[t.id],p={},u=this.checkBoundaryConstraints(e,i,d.wrapper.bounds);if(ng(d)&&u&&"BezierSourceThumb"!==o&&Cg(this.diagram)&&(p={sourcePoint:d.sourcePoint},d.sourcePoint.x+=e,d.sourcePoint.y+=i,"ConnectorSourceEnd"===o&&"Orthogonal"===d.type&&this.changeSegmentLength(d,a,l,h),"Bpmn"===d.shape.type&&"Default"===d.shape.sequence&&this.updatePathElementOffset(d)),"Bezier"===d.type)if(p={sourcePoint:d.sourcePoint},c)this.translateBezierPoints(t,""===o?"ConnectorSourceEnd":o,e,i,c,r,!s);else for(var f=0;f<t.segments.length;f++)this.translateBezierPoints(t,""===o?"ConnectorSourceEnd":o,e,i,t.segments[f],r,!s);return n||this.updateEndPoint(d,p),this.diagram.realActions&Ap.AnimationClick||this.diagram.refreshCanvasLayers(),u},t.prototype.updatePathElementOffset=function(t){t.wrapper.children.splice(3,1);var e=new ru,i=t.intermediatePoints;e=My(i,t),t.wrapper.children.splice(3,0,e)},t.prototype.changeSegmentLength=function(t,e,i,n){if(t.segments&&null!==t.segments[0].direction&&(!e&&""===t.sourceID||n)){var r=t.segments[0],o=t.segments[1],s=this.diagram.nameTable[t.sourceID],a=void 0;if(r.points[0]=t.sourcePoint,"Top"===r.direction||"Bottom"===r.direction?(r.points[r.points.length-1].x=t.sourcePoint.x,o.points[0].y=r.points[r.points.length-1].y):(r.points[r.points.length-1].y=t.sourcePoint.y,o.points[0].x=r.points[r.points.length-1].x),r.direction&&(r.length||0===r.length)&&(r.length=qd.distancePoints(r.points[0],r.points[r.points.length-1])),o.direction&&(o.length||0===o.length)&&(o.length=qd.distancePoints(r.points[r.points.length-1],o.points[o.points.length-1]),o.direction=qd.direction(r.points[r.points.length-1],o.points[o.points.length-1])),""!==t.sourcePortID&&r.length<10)if(t.segments.length>2){var l=t.segments[2],h=qd.direction(l.points[0],l.points[1]);r.direction===sf(h)?("Right"===r.direction?l.points[0].x=r.points[r.points.length-1].x=s.wrapper.corners.middleRight.x+20:"Left"===r.direction?l.points[0].x=r.points[r.points.length-1].x=s.wrapper.corners.middleLeft.x-20:"Top"===r.direction?l.points[0].y=r.points[r.points.length-1].y=s.wrapper.corners.topCenter.y-20:l.points[0].y=r.points[r.points.length-1].y=s.wrapper.corners.bottomCenter.y+20,l.direction&&l.length&&(l.length=qd.distancePoints(l.points[0],l.points[l.points.length-1])),r.length=qd.distancePoints(r.points[0],r.points[r.points.length-1])):r.direction===h&&l.direction&&l.length?("Top"===r.direction||"Bottom"===r.direction?(l.points[0]=r.points[0],l.points[l.points.length-1].x=l.points[0].x):(l.points[0]=r.points[0],l.points[l.points.length-1].y=l.points[0].y),l.length=qd.distancePoints(l.points[0],l.points[l.points.length-1]),t.segments.splice(0,2)):r.length=20}else r.length=20;else if(r.length<1)if(""!==t.sourceID){if("Right"===o.direction?(a=s.wrapper.corners.middleRight,o.points[o.points.length-1].y=a.y):"Left"===o.direction?(a=s.wrapper.corners.middleLeft,o.points[o.points.length-1].y=a.y):"Top"===o.direction?(a=s.wrapper.corners.topCenter,o.points[o.points.length-1].x=a.x):(a=s.wrapper.corners.bottomCenter,o.points[o.points.length-1].x=a.x),o.length=qd.distancePoints(a,o.points[o.points.length-1]),t.segments.length>2)(l=t.segments[2]).direction&&l.length&&(l.length=qd.distancePoints(o.points[o.points.length-1],l.points[l.points.length-1]));t.segments.splice(0,1)}else t.segments.splice(0,1)}else e&&!i&&t.sourceID!==e.id&&t.segments&&null!==t.segments[0].direction&&e&&e instanceof Lv&&this.changeSourceEndToNode(t,e),e&&i&&t.sourcePortID!==i&&t.segments&&null!==t.segments[0].direction&&e&&e instanceof Lv&&this.changeSourceEndToPort(t,e,i)},t.prototype.changeSourceEndToPort=function(t,e,i){var n=this.diagram.getWrapper(e.wrapper,i),r={x:n.offsetX,y:n.offsetY},o=rf(r,ub(e.wrapper),e.wrapper.bounds),s=t.segments[0],a=t.segments[1];if(s.direction!==o){var l=[],h={};if(s.direction===sf(o)){h={};var c=void 0;"Top"===o||"Bottom"===o?(c="Top"===o?{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(s.points[0].y-r.y)}:{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(r.y-s.points[0].y)},h=s.points[0].x>r.x?{type:"Orthogonal",isTerminal:!0,direction:"Right",length:s.points[0].x-r.x}:{type:"Orthogonal",isTerminal:!0,direction:"Left",length:r.x-s.points[0].x}):(c="Right"===o?{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(s.points[0].x-r.x)}:{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(r.x-s.points[0].x)},h=s.points[0].y>r.y?{type:"Orthogonal",direction:"Top",isTerminal:!0,length:s.points[0].y-r.y}:{type:"Orthogonal",direction:"Bottom",isTerminal:!0,length:r.y-s.points[0].y}),l.push(new Df(t,"segments",c,!0)),l.push(new Df(t,"segments",h,!0))}else h={type:"Orthogonal",direction:o,length:20,isTerminal:!0},l.push(new Df(t,"segments",h,!0));s.direction!==sf(o)&&("Top"===o||"Bottom"===o?(s.points[0].x=r.x,s.points[0].y=s.points[s.points.length-1].y="Top"===o?r.y-20:r.y+20):(s.points[0].y=r.y,s.points[0].x=s.points[s.points.length-1].x="Right"===o?r.x+20:r.x-20),s.length=qd.distancePoints(s.points[0],s.points[s.points.length-1]),a.length=qd.distancePoints(s.points[s.points.length-1],a.points[a.points.length-1])),t.segments=l.concat(t.segments)}else s.points[0]=r,"Top"===o||"Bottom"===o?s.points[s.points.length-1].x=r.x:s.points[s.points.length-1].y=r.y,s.length=qd.distancePoints(s.points[0],s.points[s.points.length-1]),a.length=qd.distancePoints(s.points[s.points.length-1],a.points[a.points.length-1])},t.prototype.removeTerminalSegment=function(t,e){for(var i=0;i<t.segments.length-2;i++){var n=t.segments[0];n.isTerminal&&(e?n.isTerminal=!1:(t.segments.splice(i,1),i--))}},t.prototype.changeSourceEndToNode=function(t,e){this.removeTerminalSegment(t);var i,n,r=e.wrapper.children[0].corners,o=t.segments[0],s=t.segments[1],a=[];if("Right"===o.direction||"Left"===o.direction)if(i="Left"===o.direction?r.middleLeft:r.middleRight,o.length>r.width||"Left"===o.direction&&i.x>=o.points[0].x||"Right"===o.direction&&i.x<=o.points[0].x)o.points[0].y=o.points[o.points.length-1].y=i.y,o.points[0].x=i.x,o.length=qd.distancePoints(o.points[0],o.points[o.points.length-1]),s.length=qd.distancePoints(o.points[o.points.length-1],s.points[s.points.length-1]);else{var l=void 0;n="Bottom"===(l=s.direction?s.direction:qd.direction(s.points[0],s.points[s.points.length-1]))?r.bottomCenter:r.topCenter,s.length&&s.direction&&(s.length="Top"===l?o.points[o.points.length-1].y-(n.y+20):n.y+20-o.points[o.points.length-1].y),o.length=o.points[o.points.length-1].x-n.x,o.direction=o.length>0?"Right":"Left";var h={type:"Orthogonal",direction:l,length:20};a.push(new Df(t,"segments",h,!0)),t.segments=a.concat(t.segments)}else if(i="Bottom"===o.direction?r.bottomCenter:r.topCenter,o.length>r.height||"Top"===o.direction&&i.y>=o.points[0].y||"Bottom"===o.direction&&i.y<=o.points[0].y)o.points[0].x=o.points[o.points.length-1].x=i.x,o.points[0].y=i.y,o.length=qd.distancePoints(o.points[0],o.points[o.points.length-1]),s.length=qd.distancePoints(o.points[o.points.length-1],s.points[s.points.length-1]);else{n="Left"===s.direction?r.middleLeft:r.middleRight;l=void 0;l=s.direction?s.direction:qd.direction(s.points[0],s.points[s.points.length-1]),s.length&&s.direction&&(s.length="Left"===l?o.points[o.points.length-1].x-(n.x+20):n.x+20-o.points[o.points.length-1].x),o.length=o.points[o.points.length-1].y-n.y,o.direction=o.length>0?"Bottom":"Top";h={type:"Orthogonal",direction:l,length:20};a.push(new Df(t,"segments",h,!0)),t.segments=a.concat(t.segments)}},t.prototype.translateBezierPoints=function(t,e,i,n,r,o,s){var a=t.segments.indexOf(r),l=t.segments[a];l&&("BezierSourceThumb"===e&&(l.vector1.angle||l.vector1.distance)?l.vector1={distance:t.distance(t.sourcePoint,o),angle:qd.findAngle(t.sourcePoint,o)}:"BezierTargetThumb"===e&&(l.vector2.angle||l.vector2.distance)?l.vector2={distance:t.distance(t.targetPoint,o),angle:qd.findAngle(t.targetPoint,o)}:("ConnectorSourceEnd"===e&&!t.sourceID||"ConnectorTargetEnd"===e&&!t.targetID)&&s&&jf(l.vector1)&&jf(l.vector2)?(qd.isEmptyPoint(l.point1)&&(l.bezierPoint1=Nf(t.sourcePoint,t.targetPoint)),qd.isEmptyPoint(l.point2)&&(l.bezierPoint2=Nf(t.targetPoint,t.sourcePoint))):"BezierSourceThumb"===e||"ConnectorSourceEnd"===e&&!s&&jf(l.vector1)?(l.bezierPoint1.x+=i,l.bezierPoint1.y+=n,qd.isEmptyPoint(l.point1)&&!s||(l.point1={x:l.bezierPoint1.x,y:l.bezierPoint1.y})):("BezierTargetThumb"===e||"ConnectorTargetEnd"===e&&!s&&jf(l.vector2))&&(l.bezierPoint2.x+=i,l.bezierPoint2.y+=n,qd.isEmptyPoint(l.point2)&&!s||(l.point2={x:l.bezierPoint2.x,y:l.bezierPoint2.y})))},t.prototype.dragTargetEnd=function(t,e,i,n,r,o,s,a){var l,h=this.diagram.nameTable[t.id],c=this.checkBoundaryConstraints(e,i,h.wrapper.bounds);if(rg(h)&&"BezierTargetThumb"!==o&&c&&Cg(this.diagram)){if(l={targetPoint:h.targetPoint},h.targetPoint.x+=e,h.targetPoint.y+=i,"ConnectorTargetEnd"===o&&"Orthogonal"===h.type&&h.segments&&h.segments.length>0){var d=h.segments[h.segments.length-2];d&&2===h.segments[h.segments.length-1].points.length&&("Left"===d.direction||"Right"===d.direction?d.points[d.points.length-1].x=h.targetPoint.x:d.points[d.points.length-1].y=h.targetPoint.y,d.length=qd.distancePoints(d.points[0],d.points[d.points.length-1]),d.direction=qd.direction(d.points[0],d.points[d.points.length-1]))}"Bpmn"===h.shape.type&&"Default"===h.shape.sequence&&this.updatePathElementOffset(h)}if("Bezier"===h.type)if(l={targetPoint:h.targetPoint},a)this.translateBezierPoints(t,""===o?"ConnectorTargetEnd":o,e,i,a,r,!s);else for(var p=0;p<t.segments.length;p++)this.translateBezierPoints(t,""===o?"ConnectorTargetEnd":o,e,i,t.segments[p],r,!s);return n||this.updateEndPoint(h,l),this.diagram.realActions&Ap.AnimationClick||this.diagram.refreshCanvasLayers(),c},t.prototype.dragControlPoint=function(t,e,i,n,r){var o=this.diagram.nameTable[t.id];if(("Straight"===o.type||"Bezier"===o.type)&&o.segments.length>0){if(void 0!==r&&o.segments[r])o.segments[r].point.x+=e,o.segments[r].point.y+=i;else for(var s=0;s<o.segments.length-1;s++)o.segments[s].point.x+=e,o.segments[s].point.y+=i;n||this.updateEndPoint(o)}return!0},t.prototype.rotatePropertyChnage=function(t){var e=this.diagram.selectedItems,i=[];i=(i=i.concat(e.nodes)).concat(e.connectors);var n={x:e.offsetX,y:e.offsetY};this.rotateObjects(e,i,t-e.rotateAngle,n),e.wrapper.rotateAngle=e.rotateAngle=t,this.diagram.updateSelector()},t.prototype.rotateObjects=function(t,e,i,n,r){n=n||{};var o=op();ap(o,i,n.x,n.y);for(var s=0,a=e;s<a.length;s++){var l=a[s];if(l instanceof Lv){if(sg(l)&&Cg(this.diagram)){if(!1!==r||t!==l){({rotateAngle:l.rotateAngle}),l.rotateAngle+=i,l.rotateAngle=(l.rotateAngle+360)%360;var h=sp(o,{x:l.offsetX,y:l.offsetY});l.offsetX=h.x,l.offsetY=h.y,this.diagram.nodePropertyChange(l,{},{offsetX:l.offsetX,offsetY:l.offsetY,rotateAngle:l.rotateAngle})}if(l.processId){var c=this.diagram.nameTable[l.processId],d=this.diagram.bpmnModule.getChildrenBound(c,l.id,this.diagram);this.diagram.bpmnModule.updateSubProcessess(d,l,this.diagram)}l.children&&l.children.length&&!l.container&&this.getChildren(l,e)}}else this.rotatePoints(l,i,n||{x:l.wrapper.offsetX,y:l.wrapper.offsetY});this.diagram.updateDiagramObject(l)}this.diagram.refreshCanvasLayers(),this.diagram.updateSelector()},t.prototype.snapConnectorEnd=function(t){return this.diagram.snapSettings.constraints&gp.SnapToLines&&this.snappingModule&&this.diagram.snappingModule.snapConnectorEnd(t),t},t.prototype.snapAngle=function(t){return this.diagram.snapSettings.constraints&gp.SnapToLines&&this.snappingModule?this.snappingModule.snapAngle(this.diagram,t):0},t.prototype.rotatePoints=function(t,e,i){if(!t.sourceWrapper||!t.targetWrapper){var n=op();ap(n,e,i.x,i.y),t.sourcePoint=sp(n,t.sourcePoint),t.targetPoint=sp(n,t.targetPoint),"Bpmn"===t.shape.type&&"Default"===t.shape.sequence&&this.updatePathElementOffset(t);var r={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint};this.diagram.connectorPropertyChange(t,{},r)}},t.prototype.updateInnerParentProperties=function(t){var e=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0);for(var i=this.getAllDescendants(t,[],!1,!0),n=0;n<i.length;n++){var r=this.diagram.nameTable[i[n].id];r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY,r.width=r.wrapper.width,r.height=r.wrapper.height}this.diagram.protectPropertyChange(e)},t.prototype.scale=function(t,e,i,n,r,o){var s=this.diagram.nameTable[t.id],a=s,l=s.wrapper;r||(r=t);var h=r.wrapper,c=function(t,e,i,n,r,o,s,a){var l={x:0,y:0},h=op();switch(ap(h,r,o,s),a.x){case 0:switch(a.y){case 0:l=sp(h,{x:t,y:e});break;case.5:l=sp(h,{x:t,y:e+n/2});break;case 1:l=sp(h,{x:t,y:e+n})}break;case.5:switch(a.y){case 0:l=sp(h,{x:t+i/2,y:e});break;case.5:l=sp(h,{x:t+i/2,y:e+n/2});break;case 1:l=sp(h,{x:t+i/2,y:e+n})}break;case 1:switch(a.y){case 0:l=sp(h,{x:t+i,y:e});break;case.5:l=sp(h,{x:t+i,y:e+n/2});break;case 1:l=sp(h,{x:t+i,y:e+n})}}return{x:l.x,y:l.y}}(h.offsetX-h.actualSize.width*h.pivot.x,h.offsetY-h.actualSize.height*h.pivot.y,h.actualSize.width,h.actualSize.height,h.rotateAngle,h.offsetX,h.offsetY,n);if(void 0!==l.actualSize.width&&void 0!==l.actualSize.height&&Cg(this.diagram)){if(a.children&&!a.container){for(var d=0,p=this.getAllDescendants(a,[]);d<p.length;d++){var u=p[d];this.scaleObject(e,i,c,u,l,r)}t.wrapper.measure(new Wd),t.wrapper.arrange(t.wrapper.desiredSize),this.diagram.updateGroupOffset(s),this.updateInnerParentProperties(a)}else this.scaleObject(e,i,c,s,l,r);var f=fb(t.wrapper);if(!this.checkBoundaryConstraints(void 0,void 0,f)&&o)return this.scale(t,1/e,1/i,n,void 0,!0),!1;this.diagram.updateDiagramObject(t)}return!0},t.prototype.getAllDescendants=function(t,e,i,n){for(var r=t,o=[],s=0;s<r.children.length;s++)(t=this.diagram.nameTable[r.children[s]])&&(t.children?(i&&e.push(t),n&&o.push(t),e=this.getAllDescendants(t,e)):e.push(t));return n?o:e},t.prototype.getChildren=function(t,e){var i=t;if(t.children)for(var n=0;n<i.children.length;n++)t=this.diagram.nameTable[i.children[n]],e.push(t);return e},t.prototype.cloneChild=function(t){return this.diagram.nameTable[t]},t.prototype.scaleObject=function(t,e,i,n,r,o){e=e<0?1:e;var s={};if(1!==(t=t<0?1:t)||1!==e){var a=void 0,l=void 0;if(n instanceof Lv){var h=n,c=void 0,d=void 0;s={width:n.wrapper.actualSize.width,height:n.wrapper.actualSize.height,offsetX:n.wrapper.offsetX,offsetY:n.wrapper.offsetY,margin:{top:h.margin.top,left:h.margin.left}},"Bpmn"===h.shape.type&&h.shape.activity.subProcess.processes&&h.shape.activity.subProcess.processes.length>0&&(d=this.diagram.bpmnModule.getChildrenBound(h,h.id,this.diagram),c=h.wrapper.bounds.containsRect(d)),a=h.wrapper.actualSize.width*t,l=h.wrapper.actualSize.height*e,void 0!==h.maxWidth&&0!==h.maxWidth&&(a=Math.min(h.maxWidth,a)),void 0!==h.minWidth&&0!==h.minWidth&&(a=Math.max(h.minWidth,a)),void 0!==h.maxHeight&&0!==h.maxHeight&&(l=Math.min(h.maxHeight,l)),void 0!==h.minHeight&&0!==h.minHeight&&(l=Math.max(h.minHeight,l)),c&&(a=Math.max(a,d.right-h.wrapper.bounds.x),l=Math.max(l,d.bottom-h.wrapper.bounds.y)),t=a/h.actualSize.width,e=l/h.actualSize.height}var p,u=op();if(o||(o=n),ap(u,-(p=o.wrapper).rotateAngle,i.x,i.y),lp(u,t,e,i.x,i.y),ap(u,p.rotateAngle,i.x,i.y),n instanceof Lv){var f,g,m=sp(u,{x:(h=n).wrapper.offsetX,y:h.wrapper.offsetY}),y=h.wrapper.offsetX-h.wrapper.actualSize.width*h.pivot.x,v=h.wrapper.offsetY-h.wrapper.actualSize.height*h.pivot.y;if(a>0)if(h.processId){var b=this.diagram.nameTable[h.processId];(!b.maxWidth||h.margin.left+a<b.maxWidth)&&(h.width=a,h.offsetX=m.x)}else h.width=a,h.offsetX=m.x;if(l>0)if(h.processId){var w=this.diagram.nameTable[h.processId];(!w.maxHeight||h.margin.top+l<w.maxHeight)&&(h.height=l,h.offsetY=m.y)}else h.height=l,h.offsetY=m.y;f=h.wrapper.offsetX-h.wrapper.actualSize.width*h.pivot.x,g=h.wrapper.offsetY-h.wrapper.actualSize.height*h.pivot.y,this.diagram.nameTable[h.processId]&&(h.margin.top+(g-v)<=0||h.margin.left+(f-y)<=0)?this.diagram.nodePropertyChange(n,{},{margin:{top:h.margin.top,left:h.margin.left}}):Yg(this.diagram,n,!0)?Zg(this.diagram,n):this.diagram.nodePropertyChange(n,s,{width:h.width,height:h.height,offsetX:h.offsetX,offsetY:h.offsetY,margin:{top:h.margin.top+(g-v),left:h.margin.left+(f-y)}})}else{var S=n,x={sourcePoint:S.sourcePoint,targetPoint:S.targetPoint};S.sourceWrapper&&S.targetWrapper||this.scaleConnector(S,u,x)}var C=this.diagram.nameTable[n.processId];if(C){C.wrapper.bounds,n.wrapper.bounds,d=this.diagram.bpmnModule.getChildrenBound(C,n.id,this.diagram);this.diagram.bpmnModule.updateSubProcessess(d,n,this.diagram)}}},t.prototype.scaleConnector=function(t,e,i){t.sourcePoint=sp(e,t.sourcePoint),t.targetPoint=sp(e,t.targetPoint),"Bpmn"===t.shape.type&&"Default"===t.shape.sequence&&this.updatePathElementOffset(t);var n={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint};this.diagram.connectorPropertyChange(t,i,n)},t.prototype.portDrag=function(t,e,i,n){var r,o,s=this.findTarget(e,t),a=fb(t.wrapper);s&&Og(s,this.diagram)&&(r=this.getPortChanges(t,s),s.offset.x+=i/a.width,s.offset.y+=n/a.height,o=this.getPortChanges(t,s),this.diagram.nodePropertyChange(t,r,o),this.diagram.updateDiagramObject(t))},t.prototype.labelDrag=function(t,e,i,n){var r,o,s;s=this.findTarget(e,t);var a=ub(t.wrapper);r=this.getAnnotationChanges(t,s),s instanceof yu?(s.offset.x+=i/a.width,s.offset.y+=n/a.height):(this.updatePathAnnotationOffset(t,s,i,n),s instanceof vu&&(s.alignment="Center")),o=this.getAnnotationChanges(t,s),t instanceof Lv?this.diagram.nodePropertyChange(t,r,o):this.diagram.connectorPropertyChange(t,r,o),this.diagram.updateDiagramObject(t),aw(this.diagram,s,!1,e)||this.labelSelect(t,e)},t.prototype.updatePathAnnotationOffset=function(t,e,i,n,r,o){var s,a,l,h,c=this.diagram.getWrapper(t.wrapper,e.id),d=c.offsetX,p=c.offsetY,u=t.intermediatePoints,f=0,g=r||{x:d+i,y:p+n},m=this.getInterceptWithSegment(g,u),y=u[u.length-1];if(l=qd.getLengthFromListOfPoints(u),m.length>0){if(e.dragLimit.top||e.dragLimit.bottom||e.dragLimit.left||e.dragLimit.right){var v={minDistance:null};y=this.getRelativeOffset(g,u,v);var b={minDistance:null};if(h=this.getRelativeOffset(g,m,b),null!=v&&b.minDistance<v.minDistance)y=h;else y=$m(t.intermediatePoints,e,t.wrapper.bounds).point}else y=h=m[m.length-1];if(y){var w=void 0;for(w=0;w<u.length;w++){if(null!=a){if(np.toBounds([a,u[w]]).containsPoint(y)){f+=qd.findLength(a,y);break}f+=qd.findLength(a,u[w])}a=u[w]}s={x:f/l,y:0}}this.updateLabelMargin(t,e,s,g,o,i,n)}else this.updateLabelMargin(t,e,null,g,o,i,n)},t.prototype.getRelativeOffset=function(t,e,i){var n,r,o,s;for(s=0;s<e.length;s++)o=e[s],r=Math.round(Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))),null!==i.minDistance&&Math.min(Math.abs(i.minDistance),Math.abs(r))!==Math.abs(r)||(n=o,i.minDistance=r);return n},t.prototype.dragLimitValue=function(t,e,i,n){var r=!1,o=!1;return i.x>=e.x-t.dragLimit.left-n.width/2&&i.x<=e.x+t.dragLimit.right+n.width/2&&(r=!0),i.y>=e.y-t.dragLimit.top-n.height/2&&i.y<=e.y+t.dragLimit.bottom+n.height/2&&(o=!0),{x:r,y:o}},t.prototype.updateLabelMargin=function(t,e,i,n,r,o,s){if(i=i||{x:e.offset,y:0},e&&i&&i.x>0&&i.x<1){var a,l=qd.getLengthFromListOfPoints(t.intermediatePoints);a=this.getPointAtLength(l*i.x,t.intermediatePoints,0);var h=this.diagram.scrollSettings.currentZoom,c=e.dragLimit;if(c.top||c.bottom||c.left||c.right){this.diagram.getWrapper(t.wrapper,e.id);var d=new np(0,0,0,0),p=this.diagram.getWrapper(t.wrapper,e.id);d.x=p.offsetX/h+o,d.y=p.offsetY/h+s,d.width=p.bounds.width/h,d.height=p.bounds.height/h;var u=new np(a.x-(c.left||0)-d.width/2,a.y-(c.top||0)-d.height/2,(c.left||0)+(c.right||0)+d.width,(c.top||0)+(c.bottom||0)+d.height);if(u.containsPoint(n))n=n;else for(var f=[a,n],g=0,m=this.boundsInterSects(f,u,!1);g<m.length;g++){n=m[g]}var y=this.dragLimitValue(e,a,n,d);e.margin={left:y.x?n.x-a.x:e.margin.left,top:y.y?n.y-a.y:e.margin.top,right:0,bottom:0}}else e.margin={left:n.x-a.x,top:n.y-a.y,right:0,bottom:0};e.offset=i.x,r&&(e.width=r.width,e.height=r.height)}},t.prototype.boundsInterSects=function(t,e,i){var n;if(e){var r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height},{x:e.x,y:e.y}];n=this.intersect(t,r,i)}return n},t.prototype.intersect=function(t,e,i){for(var n=[],r=0;r<t.length-1;r++)for(var o=0;o<e.length-1;o++){var s=Xm(t[r],t[r+1],e[o],e[o+1]);0!==s.x&&0!==s.y&&n.push(s)}return n},t.prototype.getPointAtLength=function(t,e,i){for(var n,r,o=0,s={x:0,y:0},a=0;a<e.length;a++)if(r=e[a],n){var l=qd.findLength(n,r),h=void 0,c=void 0,d=void 0,p=void 0;if(o+l>=t){h=t-o,c=qd.findAngle(n,r),d=h*Math.cos(c*Math.PI/180),p=h*Math.sin(c*Math.PI/180),s={x:n.x+d,y:n.y+p},c;break}o+=l,n=r}else n=r;return s},t.prototype.getInterceptWithSegment=function(t,e){var i,n,r,o=[],s=[],a=[];r=qd.findLength({x:0,y:0},{x:this.diagram.scroller.viewPortWidth,y:this.diagram.scroller.viewPortHeight});for(var l=1;l<e.length;l++){a=[e[l-1],e[l]],s=[],n=Math.round(qd.findAngle(a[0],a[1])%360),i=Math.round(qd.findAngle(a[1],a[0])%360);var h=n>0&&n<=90||n>180&&n<=270?90:-90;s.push(qd.transform(t,n+h,r)),s.push(qd.transform(t,i+h,r));var c=qm({x1:a[0].x,y1:a[0].y,x2:a[1].x,y2:a[1].y},{x1:s[0].x,y1:s[0].y,x2:s[1].x,y2:s[1].y});c.enabled&&o.push(c.intersectPt)}return o},t.prototype.getAnnotationChanges=function(t,e){var i={};return i[Sy(t,e.id,!0)]={width:e.width,height:e.height,offset:t instanceof Lv?{x:e.offset.x,y:e.offset.y}:e.offset,rotateAngle:e.rotateAngle,margin:{left:e.margin.left,right:e.margin.right,top:e.margin.top,bottom:e.margin.bottom},horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,alignment:t instanceof Gf?e.alignment:void 0},{annotations:i}},t.prototype.getPortChanges=function(t,e){var i={};return i[Sy(t,e.id,!1)]={offset:e.offset},{ports:i}},t.prototype.labelRotate=function(t,e,i,n){var r,o;r=this.getAnnotationChanges(t,e);op(),e.rotateAngle;var s=this.diagram.getWrapper(t.wrapper,e.id),a=Wu({x:s.offsetX,y:s.offsetY},i)+90,l=this.snapAngle(a);(a=0!==l?l:a,e instanceof vu&&e.segmentAngle)&&(a-=Qm(t.intermediatePoints,e,t.wrapper.bounds).angle);a=(a+360)%360,e.rotateAngle+=a-(e.rotateAngle+s.parentTransform),e.margin.bottom+="Top"===s.verticalAlignment?-e.height/2:"Bottom"===s.verticalAlignment?e.height/2:0,e.margin.right+="Left"===s.horizontalAlignment?-e.width/2:"Right"===s.horizontalAlignment?e.width/2:0,e instanceof vu?e.alignment="Center":e.horizontalAlignment=e.verticalAlignment="Center",n.wrapper.rotateAngle=n.rotateAngle=e.rotateAngle,o=this.getAnnotationChanges(t,e),t instanceof Lv?this.diagram.nodePropertyChange(t,r,o):this.diagram.connectorPropertyChange(t,r,o),this.diagram.updateDiagramObject(t)},t.prototype.labelResize=function(t,e,i,n,r,o){var s,a,l;s=this.getAnnotationChanges(t,e);var h=o.wrapper.children[0];if(i&&1!==i||n&&1!==n){var c=op(),d=op();ap(c,-t.rotateAngle,t.offsetX,t.offsetY),ap(d,-(l=(h.rotateAngle+(t instanceof Lv?t.rotateAngle:0)+360)%360),r.x,r.y),lp(d,i,n,r.x,r.y),ap(d,l,r.x,r.y);var p=sp(d,{x:h.offsetX,y:h.offsetY}),u=h.actualSize.height*n,f=h.actualSize.width*i,g=this.findTarget(h,t);if(g instanceof vu)this.updatePathAnnotationOffset(t,e,0,0,p,new Wd(f,u));else{var m=ub(t.wrapper);(p=sp(c,p)).x=p.x-h.margin.left+h.margin.right,p.y=p.y-h.margin.top+h.margin.bottom,p.y+="Top"===g.verticalAlignment?-u/2:"Bottom"===g.verticalAlignment?u/2:0,p.x+="Left"===g.horizontalAlignment?-f/2:"Right"===g.horizontalAlignment?f/2:0;var y=m.width/(p.x-m.x),v=m.height/(p.y-m.y);f>1&&(g.width=f,g.offset.x=1/y),u>1&&(g.height=u,g.offset.y=1/v)}}e instanceof vu&&(e.alignment="Center"),a=this.getAnnotationChanges(t,e),t instanceof Lv?this.diagram.nodePropertyChange(t,s,a):this.diagram.connectorPropertyChange(t,s,a),this.diagram.updateDiagramObject(t)},t.prototype.getSubProcess=function(t){var e,i={nodes:[],connectors:[]};return t instanceof Lv?e=t.processId:t&&t.nodes&&t.nodes.length&&t.nodes[0].processId&&(e=t.nodes[0].processId),e?(i.nodes.push(gb(this.diagram.nameTable[e])),i):i},t.prototype.checkBoundaryConstraints=function(t,e,i){var n=this.diagram.pageSettings,r=this.diagram.pageSettings.boundaryConstraints,o=this.diagram.scroller;if("Page"===r||"Diagram"===r){var s=i?void 0:this.diagram.selectedItems.wrapper.bounds,a="Page"===r?n.width:o.viewPortWidth,l="Page"===r?n.height:o.viewPortHeight,h=i,c=(i?h.right:s.right)+(t||0),d=(i?h.left:s.left)+(t||0),p=(i?h.top:s.top)+(e||0),u=(i?h.bottom:s.bottom)+(e||0);return c<=a&&d>=0&&u<=l&&p>=0}return!0},t.prototype.dragSelectedObjects=function(t,e){var i=this.diagram.selectedItems;if(this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=i.offsetX,this.state.backup.offsetY=i.offsetY),i=Xg(this.diagram,i)||i,this.checkBoundaryConstraints(t,e)){this.diagram.diagramActions=this.diagram.diagramActions|Ip.PreventZIndexOnDragging|Ip.DragUsingMouse;var n=this.diagram.selectedObject.actualObject;return(n&&n instanceof Lv&&n.isLane&&Rm(n,this.diagram)||!n||!n.isLane)&&this.diagram.drag(i,t,e),this.diagram.diagramActions=this.diagram.diagramActions&~(Ip.PreventZIndexOnDragging|Ip.DragUsingMouse),this.diagram.refreshCanvasLayers(),!0}return!1},t.prototype.scaleSelectedItems=function(t,e,i){var n=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=n.offsetX,this.state.backup.offsetY=n.offsetY,this.state.backup.width=n.width,this.state.backup.height=n.height,this.state.backup.pivot=i),n=Xg(this.diagram,n)||n,this.diagram.scale(n,t,e,i)},t.prototype.rotateSelectedItems=function(t){var e=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.angle=e.rotateAngle),e=Xg(this.diagram,e)||e,this.diagram.rotate(e,t)},t.prototype.hasSelection=function(){return ow(this.diagram)},t.prototype.isSelected=function(t){return aw(this.diagram,t)},t.prototype.initExpand=function(t){var e=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0);var i=t.target||t.source,n={isExpanded:i.isExpanded};i.isExpanded=!i.isExpanded,this.diagram.preventNodesUpdate=!0,this.diagram.diagramActions|=Ip.PreventIconsUpdate,this.diagram.nodePropertyChange(i,n,{isExpanded:i.isExpanded}),this.diagram.diagramActions=this.diagram.diagramActions&~Ip.PreventIconsUpdate,this.diagram.preventNodesUpdate=!1;for(var r=0,o=this.diagram.views;r<o.length;r++){var s=o[r],a=this.diagram.views[s];a instanceof iS||this.diagram.refreshCanvasDiagramLayer(a)}this.diagram.protectPropertyChange(e)},t.prototype.expandNode=function(t,e){var i,n=this.diagram.preventNodesUpdate,r=t.isExpanded;if(this.diagram.preventNodesUpdate=!0,this.diagram.preventConnectorsUpdate=!0,this.expandCollapse(t,r,this.diagram),t.isExpanded=r,this.diagram.layout.fixedNode=t.id,this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&this.diagram.organizationalChartModule&&(this.diagram.organizationalChartModule.isAnimation=!0),this.diagram.blazorActions=up.expandNode,i=this.diagram.doLayout(),this.diagram.blazorActions=up.Default,this.diagram.preventNodesUpdate=n,this.diagram.preventConnectorsUpdate=!1,this.diagram.layoutAnimateModule&&this.diagram.organizationalChartModule)this.diagram.allowServerDataBinding=!1,this.layoutAnimateModule.expand(this.diagram.layout.enableAnimation,i,t,this.diagram),this.diagram.allowServerDataBinding=!0;else{var o={element:jy(gb(t)),state:!!t.isExpanded};this.triggerEvent(kp.expandStateChange,o),this.diagram.lineRoutingModule&&this.diagram.constraints&xp.LineRouting&&this.diagram.resetSegments()}return i},t.prototype.getparentexpand=function(t,e,i,n){for(var r,o=0;o<t.inEdges.length;o++){var s=e.nameTable[t.inEdges[o]],a=e.nameTable[s.sourceID];if(a.isExpanded&&!i&&a.id!==n.sourceID&&s.visible)return!1;r=!0}return r},t.prototype.expandCollapse=function(t,e,i){for(var n=0;n<t.outEdges.length;n++){var r=i.nameTable[t.outEdges[n]],o=i.nameTable[r.targetID],s=this.getparentexpand(o,i,e,r);r.visible=e;var a={visible:o.visible,style:{opacity:o.wrapper.style.opacity}},l={visible:o.visible,style:{opacity:o.wrapper.style.opacity}};s&&(o.isExpanded&&this.expandCollapse(o,e,i),o.visible=e,o.style.opacity=this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&e?.1:o.style.opacity,i.nodePropertyChange(o,a,l)),i.connectorPropertyChange(r,a,l)}},t.prototype.updateNodeDimension=function(t,e){t instanceof Lv&&(t.offsetX=e.x+e.width/2,t.offsetY=e.y+e.height/2,t.width=e.width,t.height=e.height,t.wrapper.children[0].canMeasurePath=!0,this.diagram.nodePropertyChange(t,{},{width:e.width,height:e.height,offsetX:t.offsetX,offsetY:t.offsetY}),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer())},t.prototype.updateConnectorPoints=function(t,e){t instanceof Gf&&(this.diagram.connectorPropertyChange(t,{},{targetPoint:t.targetPoint}),this.diagram.updateDiagramObject(t))},t.prototype.updateSelectedNodeProperties=function(t){if(this.diagram.lineRoutingModule&&this.diagram.constraints&xp.LineRouting){var e=[],i=[],n=[],r=[],o=[],s=[];this.diagram.protectPropertyChange(!0);var a=[],l=[],h=this.diagram.selectedObject.actualObject,c=this.diagram.selectedObject.helperObject;if(c&&h){var d=c.offsetX-h.offsetX,p=c.offsetY-h.offsetY,u=c.width-h.width,f=c.height-h.height,g=c.rotateAngle-h.rotateAngle;if(this.diagram.selectedItems.nodes.length+this.diagram.selectedItems.connectors.length>0&&(this.diagram.selectedItems.wrapper.rotateAngle=this.diagram.selectedItems.rotateAngle=c.rotateAngle),h instanceof Lv&&"SwimLane"!==h.shape.type&&!h.isLane&&!h.isPhase&&!h.isHeader)h.offsetX===h.wrapper.offsetX&&h.offsetY===h.wrapper.offsetY&&h.width===h.wrapper.width&&h.height===h.wrapper.height&&h.rotateAngle===h.wrapper.rotateAngle||($()&&e.push(gb(h,void 0,void 0,!0)),h.offsetX+=d,h.offsetY+=p,h.width+=u,h.height+=f,h.rotateAngle+=g,this.diagram.nodePropertyChange(h,{},{offsetX:h.offsetX,offsetY:h.offsetY,width:h.width,height:h.height,rotateAngle:h.rotateAngle}),$()&&n.push(gb(h,void 0,void 0,!0))),a=this.diagram.spatialSearch.findObjects(h.wrapper.outerBounds);else if(h instanceof Mv)for(var m=0;m<h.nodes.length;m++){var y=h.nodes[m];y instanceof Lv&&"SwimLane"!==y.shape.type&&!y.isLane&&!y.isPhase&&!y.isHeader&&(y.offsetX+=d,y.offsetY+=p,y.width+=u,y.height+=f,y.rotateAngle+=g,this.diagram.nodePropertyChange(y,{},{offsetX:y.offsetX,offsetY:y.offsetY,width:y.width,height:y.height,rotateAngle:y.rotateAngle}),a=a.concat(this.diagram.spatialSearch.findObjects(h.wrapper.outerBounds)))}}else t instanceof Gf?a.push(t):t instanceof Mv&&t.connectors.length&&(a=a.concat(t.connectors));for(m=0;m<a.length;m++)a[m]instanceof Gf&&-1===l.indexOf(a[m].id)&&l.push(a[m].id);this.diagram.lineRoutingModule.renderVirtualRegion(this.diagram,!0);for(m=0;m<l.length;m++){var v=this.diagram.nameTable[l[m]];v instanceof Gf&&"Orthogonal"===v.type&&($()&&i.push(gb(v,void 0,void 0,!0)),this.diagram.lineRoutingModule.refreshConnectorSegments(this.diagram,v,!0),$()&&r.push(gb(v,void 0,void 0,!0)))}if(this.updateSelector(),$()){this.getObjectChanges(e,n,o),this.getObjectChanges(i,r,s);var b={nodes:o,connectors:s};if(window&&window.Blazor&&s.length+o.length){var w={methodName:"UpdateBlazorProperties",diagramobj:b};window.sfBlazor.updateBlazorProperties(w,this.diagram)}}this.diagram.protectPropertyChange(!1)}},t.prototype.drawSelectionRectangle=function(t,e,i,n){this.diagram.drawSelectionRectangle(t,e,i,n)},t.prototype.startGroupAction=function(){this.diagram.startGroupAction()},t.prototype.endGroupAction=function(){this.diagram.endGroupAction()},t.prototype.removeChildFromBPmn=function(t,e,i){var n=this.diagram.nameTable[t.id]||t.nodes[0];if(i&&n&&n.processId&&n.processId===i.wrapper.id){var r=gb(n);r.processId=n.processId,this.diagram.startGroupAction();for(var o=[],s=(o=o.concat(n.outEdges,n.inEdges)).length-1;s>=0;s--){var a=this.diagram.nameTable[o[s]];a&&this.diagram.remove(a)}var l=void 0;(l=this.diagram.nameTable[n.processId].shape.activity.subProcess.processes||[]).splice(l.indexOf(n.id),1),this.diagram.bpmnModule.removeChildFromBPMN(this.diagram.nameTable[n.processId].wrapper,n.id),this.diagram.nameTable[n.id].processId="",n.offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY;var h={type:"PositionChanged",redoObject:{nodes:[gb(n)]},undoObject:{nodes:[r]},category:"Internal"};this.addHistoryEntry(h),this.diagram.endGroupAction()}},t.prototype.isDroppable=function(t,e){var i=this.diagram.nameTable[t.id]||t.nodes[0];return!!i&&(!!(!$()&&"TextAnnotation"===i.shape.shape||$()&&"TextAnnotation"===i.shape.bpmnShape)||(!i||"Bpmn"!==i.shape.type||!(i.processId===e.id||i.id===e.processId||"Bpmn"===e.shape.type&&e.shape.activity.subProcess.collapsed)))},t.prototype.renderHighlighter=function(t,e,i){new np;if(t.target instanceof Lv||e&&t.source instanceof Lv){var n=e?t.source:t.target,r=e?t.sourceWrapper:t.targetWrapper,o=this.findTarget(r,n,i,!0),s=void 0;if(o instanceof dv)for(var a=o.id,l=t.target,h=0,c=l.wrapper.children[0].children[0].children[2].children;h<c.length;h++){var d=c[h];if(d.id===l.id+"_"+a){s=d.children[0];break}}else s=o instanceof Lv?o.wrapper:e?t.sourceWrapper:t.targetWrapper;this.diagram.renderHighlighter(s)}},t.prototype.mouseOver=function(t,e,i){return!0},t.prototype.snapPoint=function(t,e,i,n){var r,o=this.diagram.selectedItems,s=e.x<t.x,a=e.y<t.y,l=r={x:i,y:n};return this.snappingModule&&(l=this.diagram.snappingModule.snapPoint(this.diagram,o,s,a,r,t,e)),l},t.prototype.removeSnap=function(){this.diagram.snapSettings.constraints&gp.SnapToObject&&this.snappingModule&&this.snappingModule.removeGuidelines(this.diagram)},t.prototype.dropAnnotation=function(t,e){var i=t instanceof Lv?t:t.nodes[0];if(this.diagram.bpmnModule&&"Bpmn"===e.shape.type&&(!$()&&"TextAnnotation"===i.shape.shape||$()&&"TextAnnotation"===i.shape.bpmnShape)){i.hasTarget=e.id,i.shape.annotation.nodeId=e.id,this.diagram.currentSymbol||(this.diagram.addTextAnnotation(i.shape.annotation,e),i.shape.annotation.nodeId="",this.diagram.remove(i)),this.diagram.refreshDiagramLayer()}},t.prototype.drop=function(t,e,i){this.diagram.bpmnModule&&(this.diagram.bpmnModule.dropBPMNchild(e,t instanceof Lv?t:t.nodes[0],this.diagram),this.diagram.refreshDiagramLayer())},t.prototype.addHistoryEntry=function(t){this.diagram.addHistoryEntry(t)},t.prototype.align=function(t,e,i){if(t.length>0){var n=0;t[0]=this.diagram.nameTable[t[0].id]||t[0];var r="Object"===i?fb(t[0].wrapper):this.diagram.selectedItems.wrapper.bounds,o={nodes:[],connectors:[]},s={nodes:[],connectors:[]};for(n="Object"===i?n+1:n;n<t.length;n++){var a=0,l=0;t[n]=this.diagram.nameTable[t[n].id]||t[n];var h=fb(t[n].wrapper);"Left"===e?a=r.left+h.width/2-h.center.x:"Right"===e?a=r.right-h.width/2-h.center.x:"Top"===e?l=r.top+h.height/2-h.center.y:"Bottom"===e?l=r.bottom-h.height/2-h.center.y:"Center"===e?a=r.center.x-h.center.x:"Middle"===e&&(l=r.center.y-h.center.y),o=this.storeObject(o,t[n]),this.drag(t[n],a,l),this.diagram.updateSelector(),s=this.storeObject(s,t[n])}o=gb(o),s=gb(s);var c={type:"Align",category:"Internal",undoObject:gb(o),redoObject:gb(s)};this.addHistoryEntry(c)}},t.prototype.distribute=function(t,e){if(t.length>0){var i=0,n=(new np,0),r=0,o=0,s=0,a=0,l=0,h=0,c={nodes:[],connectors:[]},d={nodes:[],connectors:[]};for(i=0;i<t.length;i++)t[i]=this.diagram.nameTable[t[i].id]||t[i];for(t=function(t,e){var i,n=0,r=0;for(n=0;n<t.length;n++){var o=fb(t[n].wrapper);for(r=0;r<t.length;r++){var s=fb(t[r].wrapper);"Top"===e||"Bottom"===e||"BottomToTop"===e||"Middle"===e?o.center.y>s.center.y&&(i=t[n],t[n]=t[r],t[r]=i):o.center.x>s.center.x&&(i=t[n],t[n]=t[r],t[r]=i)}}return t}(t,e),i=1;i<t.length;i++)n=n+t[i].wrapper.bounds.topRight.x-t[i-1].wrapper.bounds.topRight.x,r=r+t[i].wrapper.bounds.topLeft.x-t[i-1].wrapper.bounds.topLeft.x,o=o+t[i].wrapper.bounds.topRight.y-t[i-1].wrapper.bounds.topRight.y,s=s+t[i].wrapper.bounds.bottomRight.y-t[i-1].wrapper.bounds.bottomRight.y,a=a+t[i].wrapper.bounds.center.x-t[i-1].wrapper.bounds.center.x,l=l+t[i].wrapper.bounds.center.y-t[i-1].wrapper.bounds.center.y,h=h+t[i].wrapper.bounds.topRight.y-t[i-1].wrapper.bounds.bottomRight.y;for(i=1;i<t.length-1;i++){var p=0,u=0,f=fb(t[i-1].wrapper),g=fb(t[i].wrapper);"RightToLeft"===e||"Center"===e?p=f.center.x-g.center.x+a/(t.length-1):"Right"===e?p=f.topRight.x-g.topRight.x+n/(t.length-1):"Left"===e?p=f.topLeft.x-g.topLeft.x+r/(t.length-1):"Middle"===e?u=f.center.y-g.center.y+l/(t.length-1):"Top"===e?u=f.topRight.y-g.topRight.y+o/(t.length-1):"Bottom"===e?u=f.bottomRight.y-g.bottomRight.y+s/(t.length-1):"BottomToTop"===e&&(u=f.bottomRight.y-g.topRight.y+h/(t.length-1)),c=this.storeObject(c,t[i]),this.drag(t[i],p,u),this.diagram.updateSelector(),d=this.storeObject(d,t[i])}c=gb(c),d=gb(d);var m={type:"Distribute",category:"Internal",undoObject:gb(c),redoObject:gb(d)};this.addHistoryEntry(m)}},t.prototype.sameSize=function(t,e){if(t.length>0){var i,n=0;i={x:.5,y:.5},t[0]=this.diagram.nameTable[t[0].id]||t[0];var r=fb(t[0].wrapper),o={nodes:[],connectors:[]},s={nodes:[],connectors:[]};for(n=1;n<t.length;n++){t[n]=this.diagram.nameTable[t[n].id]||t[0];var a=fb(t[n].wrapper),l=1,h=1;"Width"===e?l=r.width/a.width:"Height"===e?h=r.height/a.height:"Size"===e&&(l=r.width/a.width,h=r.height/a.height),o=this.storeObject(o,t[n]),this.scale(t[n],l,h,i),s=this.storeObject(s,t[n])}this.diagram.updateSelector(),o=gb(o),s=gb(s);var c={type:"Sizing",category:"Internal",undoObject:gb(o),redoObject:gb(s)};this.addHistoryEntry(c)}},t.prototype.storeObject=function(t,e){return e instanceof Lv?t.nodes.push(gb(e)):t.connectors.push(gb(e)),t},t.prototype.scroll=function(t,e,i){var n=this.diagram.constraints&xp.PanX,r=function(t){return t.constraints&xp.PanY}(this.diagram);this.diagram.pan((t=n?t:0)*this.diagram.scroller.currentZoom,(e=r?e:0)*this.diagram.scroller.currentZoom,i)},t.prototype.drawHighlighter=function(t){this.diagram.renderHighlighter(t.wrapper)},t.prototype.removeHighlighter=function(){this.diagram.clearHighlighter()},t.prototype.renderContainerHelper=function(t){return Xg(this.diagram,t)},t.prototype.isParentAsContainer=function(t,e){return Yg(this.diagram,t,e)},t.prototype.dropChildToContainer=function(t,e){Jg(this.diagram,t,e)},t.prototype.checkSelection=function(t,e){var i;if(1===t.nodes.length&&0===t.connectors.length)if(Yg(this.diagram,t.nodes[0],!0)){i="SwimLane"===t.nodes[0].shape?t.nodes[0]:this.diagram.nameTable[t.nodes[0].parentId];var n=t.nodes[0];if("SwimLane"===i.shape.type){var r="Horizontal"===i.shape.orientation;(n.isPhase&&(r&&"ResizeSouth"===e||!r&&"ResizeEast"===e)||n.isLane&&(r&&"ResizeEast"===e||!r&&"ResizeSouth"===e))&&Om(this.diagram,i,e)}else if("Grid"===i.container.type)if("Horizontal"===i.container.orientation&&1===n.rowIndex||"Vertical"===i.container.orientation&&n.rowIndex>0&&n.columnIndex>0){if("ResizeSouth"===e)for(var o=0;o<this.diagram.nodes.length;o++){if((s=this.diagram.nodes[o]).rowIndex===i.rows.length-1&&0===s.columnIndex){this.select(s);break}}}else if("ResizeEast"===e)for(o=0;o<this.diagram.nodes.length;o++){var s;if(1===(s=this.diagram.nodes[o]).rowIndex&&s.columnIndex===i.columns.length-1){this.select(s);break}}}else Om(this.diagram,t.nodes[0],e)},t.prototype.zoom=function(t,e,i,n){this.diagram.scroller.zoom(t,e*this.diagram.scroller.currentZoom,i*this.diagram.scroller.currentZoom,n)},t}(),_w=function(){function t(t){this.transform={tx:0,ty:0,scale:1},this.oldCollectionObjects=[],this.removeCollection=[],this.vPortWidth=0,this.vPortHeight=0,this.currentZoomFActor=1,this.hOffset=0,this.vOffset=0,this.scrolled=!1,this.hScrollSize=0,this.vScrollSize=0,this.diagram=t,this.objects=[],this.transform=t.scroller?t.scroller.transform:{tx:0,ty:0,scale:1},this.vPortWidth=t.scrollSettings.viewPortWidth,this.vPortHeight=t.scrollSettings.viewPortHeight,this.currentZoomFActor=t.scrollSettings.currentZoom,this.hOffset=t.scrollSettings.horizontalOffset,this.vOffset=t.scrollSettings.verticalOffset}return Object.defineProperty(t.prototype,"viewPortHeight",{get:function(){return this.vPortHeight},set:function(t){this.vPortHeight=t,this.diagram.scrollSettings.viewPortHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentZoom",{get:function(){return this.currentZoomFActor},set:function(t){this.currentZoomFActor=t,this.diagram.scrollSettings.currentZoom=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewPortWidth",{get:function(){return this.vPortWidth},set:function(t){this.vPortWidth=t,this.diagram.scrollSettings.viewPortWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalOffset",{get:function(){return this.hOffset},set:function(t){this.hOffset=t,Math.abs(this.hOffset-this.diagram.scrollSettings.horizontalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|Ap.hScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.horizontalOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalOffset",{get:function(){return this.vOffset},set:function(t){this.vOffset=t,Math.abs(this.vOffset-this.diagram.scrollSettings.verticalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|Ap.vScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.verticalOffset=t},enumerable:!0,configurable:!0}),t.prototype.updateScrollOffsets=function(t,e){var i,n,r=this.getPageBounds(void 0,void 0,!0);r.x*=this.currentZoom,r.y*=this.currentZoom,r.width*=this.currentZoom,r.height*=this.currentZoom,i=Math.max(0,t-r.left),n=Math.max(0,e-r.top),void 0!==t&&void 0!==e?(this.horizontalOffset=i,this.verticalOffset=n,this.diagram.setOffset(i,n)):this.diagram.setOffset(-this.horizontalOffset-r.x,-this.verticalOffset-r.y),this.transform={tx:Math.max(this.horizontalOffset,-r.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-r.top)/this.currentZoom,scale:this.currentZoom}},t.prototype.setScrollOffset=function(t,e){this.scrolled=!1;var i=this.getPageBounds(void 0,void 0,!0);i.x*=this.currentZoom,i.y*=this.currentZoom,i.width*=this.currentZoom,i.height*=this.currentZoom;var n=-i.left,r=-i.top,o=!1,s=this.viewPortWidth*this.currentZoom,a=this.viewPortHeight*this.currentZoom,l=n-t;if(l!==this.horizontalOffset){n<this.horizontalOffset&&(this.horizontalOffset>l?this.horizontalOffset-=t:this.horizontalOffset=l,o=!0);var h=Math.max(i.right+this.vScrollSize,s);if(!o&&h<-l+this.viewPortWidth){var c=-l+s-this.vScrollSize,d=-this.horizontalOffset+s-this.vScrollSize;c<d?this.horizontalOffset=l:c-i.right>c-d?this.horizontalOffset=l:this.horizontalOffset=-(i.right+this.vScrollSize-s),o=!0}o||(this.horizontalOffset=n-t)}o=!1;var p=r-e;if(p!==this.verticalOffset){r<this.verticalOffset&&(this.verticalOffset>p?this.verticalOffset-=e:this.verticalOffset=p,o=!0);var u=Math.max(i.bottom+this.hScrollSize,a);if(!o&&u<-p+a){var f=-p+a-this.hScrollSize,g=-this.verticalOffset+a-this.hScrollSize;f<g?this.verticalOffset=p:f-i.bottom>f-g?this.verticalOffset=p:this.verticalOffset=-(i.bottom+this.hScrollSize-a),o=!0}o||(this.verticalOffset=r-e)}this.transform={tx:Math.max(this.horizontalOffset,-i.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-i.top)/this.currentZoom,scale:this.currentZoom},this.setSize()},t.prototype.getObjects=function(t,e){for(var i=[],n=0;n<t.length;n++){for(var r=!1,o=0;o<e.length;o++)if(t[n]===e[o]){r=!0;break}r||i.push(t[n])}return i},t.prototype.virtualizeElements=function(){for(var t=this.viewPortWidth/this.currentZoom,e=this.viewPortHeight/this.currentZoom,i=this.diagram.spatialSearch.findObjects(new np(-this.horizontalOffset/this.currentZoom,-this.verticalOffset/this.currentZoom,t,e)),n=[],r=0;r<i.length;r++)n.push(i[r].id);var o=this.getObjects(n,this.oldCollectionObjects);0===this.oldCollectionObjects.length&&(this.oldCollectionObjects=n);var s=this.getObjects(this.oldCollectionObjects,n);this.diagram.updateVirtualObjects(o,!1,s),this.oldCollectionObjects=n},t.prototype.setSize=function(){var t=this.getPageBounds(void 0,void 0,!0);t.x*=this.currentZoom,t.y*=this.currentZoom,t.width*=this.currentZoom,t.height*=this.currentZoom;var e=Math.min(t.x,-this.horizontalOffset),i=Math.min(t.y,-this.verticalOffset),n=(this.horizontalOffset,this.viewPortWidth,t.right,this.verticalOffset,this.viewPortHeight,t.bottom,this.scrollerWidth),r=this.scrollerWidth;-this.verticalOffset<=t.y&&-this.verticalOffset+this.viewPortHeight>=t.bottom&&(r=0),-this.horizontalOffset<=t.x&&-this.horizontalOffset+this.viewPortWidth>=t.right&&(n=0),this.hScrollSize=n,this.vScrollSize=r;var o=this.diagramWidth,s=this.diagramHeight;this.diagramWidth=Math.max(t.right,-this.horizontalOffset+this.viewPortWidth-r)-e,this.diagramHeight=Math.max(t.bottom,-this.verticalOffset+this.viewPortHeight-n)-i,o===this.diagramWidth&&s===this.diagramHeight||this.diagram.setSize(this.diagramWidth,this.diagramHeight),this.diagram.transformLayers(),this.diagram.element.style.overflow="hidden"},t.prototype.setViewPortSize=function(t,e){this.viewPortWidth=t,this.viewPortHeight=e},t.prototype.getPageBounds=function(t,e,i){var n,r=new np;if("Content"!==e&&null!==this.diagram.pageSettings.width&&null!==this.diagram.pageSettings.height){var o=this.diagram.pageSettings.width,s=this.diagram.pageSettings.height,a=0,l=0;if(this.diagram.pageSettings.multiplePage){if((r=this.diagram.spatialSearch.getPageBounds(0,0)).right>o)o*=h=Math.ceil(r.right/o);if(r.bottom>s)s*=h=Math.ceil(r.bottom/s);if(r.left<0&&Math.abs(r.left)>a){var h=Math.ceil(Math.abs(r.left)/this.diagram.pageSettings.width);a=this.diagram.pageSettings.width*h}if(r.top<0&&Math.abs(r.top)>l){h=Math.ceil(Math.abs(r.top)/this.diagram.pageSettings.height);l=this.diagram.pageSettings.height*h}}n=new np(-a,-l,o+a,s+l)}else{var c=t?void 0:0;n=this.diagram.spatialSearch.getPageBounds(c,c)}if(i){var d=this.diagram.scrollSettings.padding;n.x-=d.left,n.y-=d.top,n.width+=d.left+d.right,n.height+=d.top+d.bottom}return n},t.prototype.getPageBreak=function(t){for(var e=0,i=0,n=-1,r=[],o=0,s=0,a=0,l=0,h=this.diagram.pageSettings.margin.left,c=this.diagram.pageSettings.margin.right,d=this.diagram.pageSettings.margin.top,p=this.diagram.pageSettings.margin.bottom,u=1,f=1,g={x1:o,y1:a,x2:s,y2:l};t.width>e;)(e+=this.diagram.pageSettings.width?this.diagram.pageSettings.width:t.width)===this.diagram.pageSettings.width&&(g={x1:t.left+h,y1:t.top+d,x2:t.left+h,y2:t.bottom-p},r[++n]=g),e<t.width&&(g={x1:o=t.topLeft.x+this.diagram.pageSettings.width*u,y1:a=t.topLeft.y+d,x2:s=t.bottomLeft.x+this.diagram.pageSettings.width*u,y2:l=t.bottomLeft.y-p},r[++n]=g,u++),t.width===e&&(g={x1:t.right-c,y1:t.top+d,x2:t.right-c,y2:t.bottom-p},r[++n]=g);for(;t.height>i;)(i+=this.diagram.pageSettings.height?this.diagram.pageSettings.height:t.height)===this.diagram.pageSettings.height&&(g={x1:t.left+h,y1:t.top+d,x2:t.right-c,y2:t.top+d},r[++n]=g),i<t.height&&(g={x1:o=t.topLeft.x+h,y1:a=t.topLeft.y+this.diagram.pageSettings.height*f,x2:s=t.topRight.x-c,y2:l=t.topRight.y+this.diagram.pageSettings.height*f},r[++n]=g,f++),t.height===i&&(g={x1:t.left+h,y1:t.bottom-p,x2:t.right-c,y2:t.bottom-p},r[++n]=g);return r},t.prototype.zoom=function(t,e,i,n){if(this.diagram.constraints&xp.Zoom&&1!==t||function(t){return t.constraints&xp.Pan}(this.diagram)&&1===t){var r=op();if(lp(r,this.currentZoom,this.currentZoom),hp(r,this.horizontalOffset,this.verticalOffset),n=sp(r,n=n||{x:(this.viewPortWidth/2-this.horizontalOffset)/this.currentZoom,y:(this.viewPortHeight/2-this.verticalOffset)/this.currentZoom}),this.currentZoom*t>=this.diagram.scrollSettings.minZoom&&this.currentZoom*t<=this.diagram.scrollSettings.maxZoom){this.currentZoom*=t;var o=this.getPageBounds(void 0,void 0,!0);o.x*=this.currentZoom,o.y*=this.currentZoom;var s=op();lp(s,t,t,n.x,n.y),hp(s,e||0,i||0),cp(r,s);var a=sp(r,{x:0,y:0});1===t&&(a=this.applyScrollLimit(a.x,a.y)),this.transform={tx:Math.max(a.x,-o.left)/this.currentZoom,ty:Math.max(a.y,-o.top)/this.currentZoom,scale:this.currentZoom},this.horizontalOffset=a.x,this.verticalOffset=a.y,this.setSize(),"SVG"!==this.diagram.mode&&fg(this.diagram)&&this.diagram.scroller.virtualizeElements(),"SVG"===this.diagram.mode||fg(this.diagram)||this.diagram.refreshDiagramLayer(),this.diagram.setOffset(-this.horizontalOffset-o.x,-this.verticalOffset-o.y),Kf(this.diagram)}}},t.prototype.fitToPage=function(t){var e=(t=t||{}).mode,i=t.region,n=t.margin||{},r=t.canZoomIn,o=t.customBounds;n.bottom=n.bottom||25,n.top=n.top||25,n.left=n.left||25,n.right=n.right||25;var s,a=o,l=-this.horizontalOffset,h=-this.verticalOffset;if("PageSettings"===(i=i||"PageSettings")&&this.diagram.pageSettings.width&&this.diagram.pageSettings.height||this.diagram.nodes.length>0||this.diagram.connectors.length>0){e=e||"Page","CustomBounds"!==i&&(a=this.getPageBounds(!0,i,!0));var c={x:0,y:0};c.x=(this.viewPortWidth-(n.left+n.right))/a.width,c.y=(this.viewPortHeight-(n.top+n.bottom))/a.height,!r&&a.width-this.horizontalOffset<this.viewPortWidth&&a.height-this.verticalOffset<this.viewPortHeight&&(c.x=Math.min(this.currentZoom,c.x),c.y=Math.min(this.currentZoom,c.y));var d=void 0,p=void 0,u=void 0;switch(e){case"Width":s=(d=c.x)/this.currentZoom,l+=(p=(this.viewPortWidth-a.width*d)/2-a.x*d)+(n.left-n.right)/2*d,h-=-this.verticalOffset*s,h="CustomBounds"!==i?h:h-this.verticalOffset*s;break;case"Height":s=(d=c.y)/this.currentZoom,p=(this.viewPortWidth-a.width*d)/2-a.x*d,u=(this.viewPortHeight-a.height*d)/2-a.y*d,l+=p+(n.left-n.right)/2*d,h+=u+(n.top-n.bottom)/2*d;break;case"Page":s=(d=Math.min(c.x,c.y))/this.currentZoom,p=(this.viewPortWidth-a.width*d)/2-a.x*d,u=(this.viewPortHeight-a.height*d)/2-a.y*d,l+=p+(n.left-n.right)/2*d,h+=u+(n.top-n.bottom)/2*d}this.zoom(s,l,h,{x:0,y:0})}else s=1/this.currentZoom,this.zoom(s,l,h,{x:0,y:0})},t.prototype.bringIntoView=function(t){var e=0,i=0,n=this.currentZoom,r=t,o=-this.horizontalOffset,s=-this.verticalOffset;r=new np(r.x*n,r.y*n,r.width*n,r.height*n),new np(o,s,this.viewPortWidth,this.viewPortHeight).containsRect(r)||(r.right>-o+this.viewPortWidth&&(e=r.right-this.viewPortWidth),r.x<-o&&(e=r.x),r.bottom>-s+this.viewPortHeight&&(i=r.bottom-this.viewPortHeight),r.y<-s&&(i=r.y),this.zoom(1,-this.horizontalOffset-e,-this.verticalOffset-i,null))},t.prototype.bringToCenter=function(t){var e=this.currentZoom,i=new np(t.x*e,t.y*e,t.width*e,t.height*e),n=i.x+i.width/2-this.viewPortWidth/2,r=i.y+i.height/2-this.viewPortHeight/2;this.zoom(1,-this.horizontalOffset-n,-this.verticalOffset-r,null)},t.prototype.applyScrollLimit=function(t,e){if("Infinity"!==this.diagram.scrollSettings.scrollLimit){var i=void 0;if("Limited"===this.diagram.scrollSettings.scrollLimit){var n=this.diagram.scrollSettings.scrollableArea;i=new np(n.x,n.y,n.width,n.height)}(i=i||this.getPageBounds(!0)).x*=this.currentZoom,i.y*=this.currentZoom,i.width*=this.currentZoom,i.height*=this.currentZoom,t*=-1,e*=-1;var r=Math.max(i.right,this.viewPortWidth);if(!(t<=i.x&&(t+this.viewPortWidth>=i.right||t>=i.right-this.viewPortWidth)||t>=i.x&&t+this.viewPortWidth<=r))if(t>=i.x)t=Math.max(i.x,Math.min(t,t-(t+this.viewPortWidth-this.vScrollSize-r)));else{var o=i.right-this.viewPortWidth;t=Math.min(o,i.x)}var s=Math.max(i.bottom,this.viewPortHeight);if(!(e<=i.y&&e+this.viewPortHeight>=i.bottom||e>=i.y&&e+this.viewPortHeight<=s))if(e>=i.y)e=Math.max(i.y,Math.min(e,e-(e+this.viewPortHeight-this.hScrollSize-s)));else{o=i.bottom-this.viewPortHeight;e=Math.min(i.y,o)}t*=-1,e*=-1}return{x:t,y:e}},t}(),Vw=function(){function t(t,e,i,n,r){this.objects=[],this.left=t,this.top=e,this.width=i,this.height=n,this.spatialSearch=r}return t.prototype.findQuads=function(t,e){null!=this.first&&this.first.isIntersect(t)&&this.first.findQuads(t,e),null!=this.second&&this.second.isIntersect(t)&&this.second.findQuads(t,e),null!=this.third&&this.third.isIntersect(t)&&this.third.findQuads(t,e),null!=this.fourth&&this.fourth.isIntersect(t)&&this.fourth.findQuads(t,e),this.objects.length>0&&e.push(this)},t.prototype.isIntersect=function(t){return!(this.left+this.width<t.left||this.top+this.height<t.top||this.left>t.right||this.top>t.bottom)},t.prototype.selectQuad=function(){for(var t,e=null,i=this;null!=i;)t=i.getQuad(e),i=t.source,e=t.target||e;return e},t.prototype.getQuad=function(e){var i=this.width/2,n=this.height/2;if(i>=1e3&&n>=1e3){var r=this.left+i,o=this.top+n;if(this.spatialSearch.childRight<=r){if(this.spatialSearch.childBottom<=o){if(!this.first)(s=new t(this.left,this.top,i,n,this.spatialSearch)).parent=this,this.first=s;return{source:this.first}}if(this.spatialSearch.childTop>=o){if(!this.third)(s=new t(this.left,o,i,n,this.spatialSearch)).parent=this,this.third=s;return{source:this.third}}}else if(this.spatialSearch.childLeft>=r){if(this.spatialSearch.childBottom<=o){if(!this.second)(s=new t(r,this.top,i,n,this.spatialSearch)).parent=this,this.second=s;return{source:this.second}}if(this.spatialSearch.childTop>=o){var s;if(!this.fourth)(s=new t(r,o,i,n,this.spatialSearch)).parent=this,this.fourth=s;return{source:this.fourth}}}}return this,this.objects.push(this.spatialSearch.childNode),{target:this}},t.prototype.isContained=function(){return this.spatialSearch.childLeft>=this.left&&this.spatialSearch.childRight<=this.left+this.width&&this.spatialSearch.childTop>=this.top&&this.spatialSearch.childBottom<=this.top+this.height},t.prototype.addIntoAQuad=function(t){var e={};this.spatialSearch.setCurrentNode(t);for(var i=null;!e.isAdded;)i=(e=this.spatialSearch.parentQuad.add(i)).quad;return i},t.prototype.add=function(e){if(e=null,this.isContained())return{isAdded:!0,quad:e=this.selectQuad()};var i=void 0,n=!(0!==this.objects.length||this.first||this.second||this.third||this.fourth),r=2*this.width,o=2*this.height;return this.spatialSearch.childLeft<this.left?this.spatialSearch.childTop<this.top?(i=new t(this.left-this.width,this.top-this.height,r,o,this.spatialSearch),n||(i.fourth=this)):(i=new t(this.left-this.width,this.top,r,o,this.spatialSearch),n||(i.second=this)):this.spatialSearch.childTop<this.top?(i=new t(this.left,this.top-this.height,r,o,this.spatialSearch),n||(i.third=this)):(i=new t(this.left,this.top,r,o,this.spatialSearch),n||(i.first=this)),this.parent=i,this.spatialSearch.parentQuad=i,{isAdded:!1,quad:e}},t}(),Fw=function(){function t(t){this.quadSize=500,this.objectTable=t,this.parentQuad=new Vw(0,0,2*this.quadSize,2*this.quadSize,this),this.pageLeft=Number.MAX_VALUE,this.pageRight=-Number.MAX_VALUE,this.pageTop=Number.MAX_VALUE,this.pageBottom=-Number.MAX_VALUE,this.quadTable={}}return t.prototype.removeFromAQuad=function(t){if(this.quadTable[t.id]){var e=this.quadTable[t.id],i=this.objectIndex(e.objects,t);-1!==i&&(e.objects.splice(i,1),this.update(e),delete this.quadTable[t.id])}},t.prototype.update=function(t){if(t.parent&&0===t.objects.length&&t.first&&t.second&&t.third&&t.fourth){var e=t.parent;e.first===t?e.first=null:e.second===t?e.second=null:e.third===t?e.third=null:e.fourth===t&&(e.fourth=null),this.update(t.parent)}else t!==this.parentQuad||t.first||t.second||t.third||t.fourth||(t.left=0,t.width=1e3,t.top=0,t.height=1e3)},t.prototype.addIntoAQuad=function(t){var e=this.parentQuad.addIntoAQuad(t);this.quadTable[t.id]=e},t.prototype.objectIndex=function(t,e){for(var i=0;i<t.length;i++)if(t[i].id===e.id)return i;return-1},t.prototype.updateQuad=function(t){this.setCurrentNode(t);var e=t.outerBounds;if(isNaN(e.x)||isNaN(e.y)||isNaN(e.width)||isNaN(e.height))return!1;this.quadTable[t.id]?this.quadTable[t.id].isContained()||(this.removeFromAQuad(t),this.addIntoAQuad(t)):this.addIntoAQuad(t);if(!this.isWithinPageBounds(e)||this.leftElement===t||this.topElement===t||this.rightElement===t||this.bottomElement===t){var i=!1;return this.pageLeft===this.childLeft&&t===this.leftElement||(this.pageLeft>=this.childLeft?(this.pageLeft=this.childLeft,this.leftElement=t,i=!0):t===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.findLeft(this.parentQuad),i=!0)),this.pageTop===this.childTop&&t===this.topElement||(this.pageTop>=this.childTop?(this.pageTop=this.childTop,this.topElement=t,i=!0):t===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.findTop(this.parentQuad),i=!0)),this.pageBottom===this.childBottom&&t===this.bottomElement||(this.pageBottom<=this.childBottom?(i=!0,this.pageBottom=this.childBottom,this.bottomElement=t):t===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.findBottom(this.parentQuad),i=!0)),this.pageRight===this.childRight&&t===this.rightElement||(this.pageRight<=this.childRight?(this.pageRight=this.childRight,this.rightElement=t,i=!0):t===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.findRight(this.parentQuad),i=!0)),i}return this.setCurrentNode(null),!1},t.prototype.isWithinPageBounds=function(t){return t.left>=this.pageLeft&&t.right<=this.pageRight&&t.top>=this.pageTop&&t.bottom<=this.pageBottom},t.prototype.findQuads=function(t){var e=[];return this.parentQuad.findQuads(t,e),e},t.prototype.findObjects=function(t){for(var e=[],i=0,n=this.findQuads(t);i<n.length;i++)for(var r=0,o=n[i].objects;r<o.length;r++){var s=o[r];s.outerBounds.intersects(t)&&e.push(this.objectTable[s.id])}return e},t.prototype.updateBounds=function(t){var e=!1;return t===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.topElement=null,this.findTop(this.parentQuad),e=!0),t===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.leftElement=null,this.findLeft(this.parentQuad),e=!0),t===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.rightElement=null,this.findRight(this.parentQuad),e=!0),t===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.bottomElement=null,this.findBottom(this.parentQuad),e=!0),e},t.prototype.findBottom=function(t){t.third||t.fourth?(t.third&&this.findBottom(t.third),t.fourth&&this.findBottom(t.fourth)):(t.second&&this.findBottom(t.second),t.first&&this.findBottom(t.first));for(var e=0,i=t.objects;e<i.length;e++){var n=i[e];this.pageBottom<=n.outerBounds.bottom&&(this.pageBottom=n.outerBounds.bottom,this.bottomElement=n)}},t.prototype.findRight=function(t){t.second||t.fourth?(t.second&&this.findRight(t.second),t.fourth&&this.findRight(t.fourth)):(t.first&&this.findRight(t.first),t.third&&this.findRight(t.third));for(var e=0,i=t.objects;e<i.length;e++){var n=i[e];this.pageRight<=n.outerBounds.right&&(this.pageRight=n.outerBounds.right,this.rightElement=n)}},t.prototype.findLeft=function(t){t.first||t.third?(t.first&&this.findLeft(t.first),t.third&&this.findLeft(t.third)):(t.second&&this.findLeft(t.second),t.fourth&&this.findLeft(t.fourth));for(var e=0,i=t.objects;e<i.length;e++){var n=i[e];this.pageLeft>=n.outerBounds.left&&(this.pageLeft=n.outerBounds.left,this.leftElement=n)}},t.prototype.findTop=function(t){t.first||t.second?(t.first&&this.findTop(t.first),t.second&&this.findTop(t.second)):(t.third&&this.findTop(t.third),t.fourth&&this.findTop(t.fourth));for(var e=0,i=t.objects;e<i.length;e++){var n=i[e];this.pageTop>=n.outerBounds.top&&(this.pageTop=n.outerBounds.top,this.topElement=n)}},t.prototype.setCurrentNode=function(t){if(this.childNode=t,t){var e=t.outerBounds;this.childLeft=Number(e.left),this.childTop=Number(e.top),this.childRight=Number(e.right),this.childBottom=Number(e.bottom)}else this.childLeft=Number.MAX_VALUE,this.childTop=Number.MAX_VALUE,this.childRight=-Number.MAX_VALUE,this.childBottom=-Number.MAX_VALUE},t.prototype.getPageBounds=function(t,e){if(this.pageLeft===Number.MAX_VALUE)return new np(0,0,0,0);var i=void 0!==t?Math.min(this.pageLeft,0):this.pageLeft,n=void 0!==e?Math.min(this.pageTop,0):this.pageTop;return new np(Math.round(i),Math.round(n),Math.round(this.pageRight-i),Math.round(this.pageBottom-n))},t.prototype.getQuad=function(t){return this.quadTable[t.id]},t}(),Ww=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Uw=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Gw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ww(e,t),Uw([Hi(!1)],e.prototype,"preventDefaults",void 0),e}(ln),qw=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xw=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Yw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qw(e,t),Xw([Hi("")],e.prototype,"action",void 0),Xw([Hi("")],e.prototype,"cursor",void 0),e}(ln),Zw=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kw=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Jw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zw(e,t),Kw([Hi(!0)],e.prototype,"inversedAlignment",void 0),e}(ln),Qw=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$w=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},tS=function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}l((n=n.apply(t,e||[])).next())})},eS=function(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},iS=function(t){function e(e,i){var n,r,o=t.call(this,e,i)||this;o.version=17.1,o.checkMenu=!1,o.isServerUpdate=!1,o.oldNodeObjects=[],o.oldDiagramObject={},o.oldConnectorObjects=[],o.canEnableBlazorObject=!1,o.connectorTable={},o.groupTable={},o.activeLabel={id:"",parentId:"",isGroup:!1,text:void 0},o.textEditing=!1,o.isTriggerEvent=!1,o.preventNodesUpdate=!1,o.preventConnectorsUpdate=!1,o.callBlazorModel=!0,o.selectionConnectorsList=[],o.deleteVirtualObject=!1,o.changedConnectorCollection=[],o.changedNodesCollection=[],o.previousNodeCollection=[],o.previousConnectorCollection=[],o.crudDeleteNodes=[],o.diagramid=88123,o.selectedObject={helperObject:void 0,actualObject:void 0},o.renderTimer=null;var s=$()&&window&&window.Blazor&&!o.dataSourceSettings.dataSource;o.ignoreCollectionWatch=!0;for(var a=0;e&&e.nodes&&a<e.nodes.length;a++)n=e.nodes[a],r=o.nodes[a],n.children&&n.children.length>0&&(n.style&&n.style.fill||(r.style.fill="transparent"),n.style&&n.style.strokeColor||(r.style.strokeColor="transparent")),n.shape&&"UmlActivity"===n.shape.type&&_m(n,r),n.shape&&"SwimLane"===n.shape.type&&jm(n,r),o.nodeDefaults&&(s&&o.previousNodeCollection.push(gb(r,void 0,void 0,!0)),Um(r,n,o.nodeDefaults)),o.updateAnnotationText(r.annotations);if(e&&e.connectors&&o.connectorDefaults)for(a=0;e&&e.connectors&&a<e.connectors.length;a++)n=e.connectors[a],r=o.connectors[a],s&&o.previousConnectorCollection.push(gb(r,void 0,void 0,!0)),Um(r,n,o.connectorDefaults),o.updateAnnotationText(r.annotations);for(a=0;e&&e.connectors&&a<e.connectors.length;a++){var l=e.connectors[a],h=o.connectors[a];if(l.shape&&"None"!==l.shape.type&&Vm(l,h),$()){var c=gb(o.bulkChanges);o.enableServerDataBinding(!0),o.protectPropertyChange(!0);for(var d=Object.keys(c),p=0;p<d.length;p++){var u=d[p],f=u.split("-");f&&f[0]&&("nodes"===f[0]&&(c[u].sfIndex=Number(f[1]),o.changedNodesCollection.push(c[u])),"connectors"===f[0]&&(c[u].sfIndex=Number(f[1]),o.changedConnectorCollection.push(c[u])))}}}return o}return Qw(e,t),e.prototype.updateAnnotationText=function(t){if($()&&t.length>0)for(var e=0;t&&e<t.length;e++){var i=t[e];i.content=i.content.split("\\n").join("\n")}},e.prototype.callFromServer=function(t){if("getParentID"===t.methodName){var e=t.id;return this.nameTable[e].parentId}if("getEdges"===t.methodName){var i=t.outEdge;e=t.id;return i?this.nameTable[e].outEdges:this.nameTable[e].inEdges}if("updateDiagramObjects"===t.methodName){var n=t.obj;if(this.isServerUpdate=!0,t.IsAdding){this.add.apply(this,n)}else{this.remove.apply(this,n)}this.isServerUpdate=!1}else if("invokeLoadDiagramMethod"===t.methodName){this.loadDiagram(t.data)}},e.prototype.clearCollection=function(t){for(var e,i=[],n=0,r=Object.keys(this.nameTable);n<r.length;n++){var o=r[n];(e=this.nameTable[o])&&(t&&e instanceof Gf||!t&&e instanceof Lv)&&i.push(e)}this.clearObjects(i)},e.prototype.onPropertyChanged=function(i,n){var r=!0,o=!1,s=!1;if(this.diagramActions&Ip.Render){for(var a=0,l=Object.keys(i);a<l.length;a++){switch(l[a]){case"width":case"height":this.element.style.width=this.getSizeValue(this.width),this.element.style.height=this.getSizeValue(this.height),this.eventHandler.updateViewPortSize(this.element);for(var h=0,c=this.views;h<c.length;h++){var d=c[h];(I=this.views[d])instanceof e||I.updateView(I)}break;case"nodes":if(i.nodes.length>0&&0===n.nodes.length)this.clearCollection(),s=!0;else{for(var p=0,u=Object.keys(i.nodes);p<u.length;p++){var f=u[p],g=Number(f),m=this.nodes[g],y=i.nodes[g];o=o||void 0!==y.excludeFromLayout,this.nodePropertyChange(m,n.nodes[g],y,void 0,!0,!0);var v={element:jy(m),cause:this.diagramActions,oldValue:jy(n.nodes[g]),newValue:jy(i.nodes[g])};$()&&(v.element={node:jy(m)},v.oldValue={node:jy(void 0)},v.newValue={node:jy(void 0)}),this.triggerEvent(kp.propertyChange,v),r&&(r=!1)}"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"connectors":if(i.connectors.length>0&&0===n.connectors.length)this.clearCollection(!0),s=!0;else{for(var b=0,w=Object.keys(i.connectors);b<w.length;b++){f=w[b],g=Number(f),m=this.connectors[g];(y=i.connectors[g])&&(y.sourceDecorator||y.targetDecorator)&&(this.diagramActions|=Ip.DecoratorPropertyChange),this.connectorPropertyChange(m,n.connectors[g],y,!0,!0),y&&(y.sourceDecorator||y.targetDecorator)&&(this.diagramActions=this.diagramActions&~Ip.DecoratorPropertyChange);v={element:jy(m),cause:this.diagramActions,oldValue:jy(n.connectors[g]),newValue:jy(i.connectors[g])};$()&&(v.element={connector:jy(m)},v.oldValue={connector:jy(void 0)},v.newValue={connector:jy(void 0)}),this.triggerEvent(kp.propertyChange,v),m&&m.parentId&&"UmlClassifier"===this.nameTable[m.parentId].shape.type&&this.updateConnectorEdges(this.nameTable[m.parentId]||m),r&&(r=!1)}this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"bridgeDirection":this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer();break;case"backgroundColor":this.intOffPageBackground();break;case"pageSettings":this.validatePageSize(),this.updatePage();break;case"selectedItems":if(i.selectedItems.userHandles&&this.selectedItems.wrapper&&this.selectedItems.userHandles&&this.selectedItems.userHandles.length>0){this.renderSelector(!0);break}if(i.selectedItems.constraints){this.renderSelector(!0);break}break;case"snapSettings":this.updateSnapSettings(i);break;case"commandManager":this.initCommands();break;case"layout":o=!0;break;case"dataSourceSettings":this.clear(),this.initObjects(),"None"===this.layout.type?s=!0:o=!0;break;case"tooltip":cf(this);break;case"rulerSettings":this.updateRulerSettings(i);break;case"layers":this.updateLayer(i);break;case"scrollSettings":this.updateScrollSettings(i);break;case"locale":i.locale!==n.locale&&(this.realActions|=Ap.PreventDataInit,t.prototype.refresh.call(this),this.realActions&=~Ap.PreventDataInit);break;case"contextMenuSettings":if(void 0!==i.contextMenuSettings.showCustomMenuOnly&&(this.contextMenuSettings.showCustomMenuOnly=i.contextMenuSettings.showCustomMenuOnly),void 0!==i.contextMenuSettings.show&&(this.contextMenuSettings.show=i.contextMenuSettings.show),i.contextMenuSettings.items)for(var S=i.contextMenuSettings.items,x=0,C=Object.keys(S);x<C.length;x++){f=C[x],g=Number(f);this.contextMenuSettings.items[g]=S[g]}break;case"serializationSettings":void 0!==i.serializationSettings.preventDefaults&&(this.serializationSettings.preventDefaults=i.serializationSettings.preventDefaults)}}if(o&&!s&&this.doLayout(),r&&this.propertyChange){v={element:jy(this),cause:this.diagramActions,oldValue:jy(n),newValue:jy(i)};$()&&(v.element={diagram:jy(this)},v.oldValue={diagram:jy(void 0)},v.newValue={diagram:jy(void 0)}),this.triggerEvent(kp.propertyChange,v)}if(!s&&this.canLogChange()&&this.modelChanged(i,n)){var P={type:"PropertyChanged",undoObject:n,redoObject:i,category:"Internal"};this.addHistoryEntry(P)}this.resetDiagramActions(),s&&(this.initObjects(!0),this.refreshDiagramLayer(),o&&this.doLayout());var O=1===Object.keys(i).length&&void 0!==i.scrollSettings;if(!s)for(var E=0,L=this.views;E<L.length;E++){var I=L[E];(d=this.views[I])instanceof e||(i.scrollSettings&&i.scrollSettings.currentZoom!=n.scrollSettings.currentZoom&&d.updateHtmlLayer(d),O||this.refreshCanvasDiagramLayer(d))}this.resetTemplate()}},e.prototype.updateSnapSettings=function(t){(void 0!==t.snapSettings.constraints||t.snapSettings.horizontalGridlines||t.snapSettings.verticalGridlines||t.snapSettings.gridType)&&this.diagramRenderer.updateGrid(this.snapSettings,qv(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},e.prototype.updateRulerSettings=function(t){void 0!==t.rulerSettings.dynamicGrid&&this.diagramRenderer.updateGrid(this.snapSettings,qv(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),void 0!==t.rulerSettings.showRulers?(this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):void 0===t.rulerSettings.horizontalRuler&&void 0===t.rulerSettings.verticalRuler||(void 0!==t.rulerSettings.horizontalRuler.thickness||void 0!==t.rulerSettings.verticalRuler.thickness?(Jf(this),this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):Kf(this)),this.diagramRenderer.updateGrid(this.snapSettings,qv(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},e.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},e.prototype.preRender=function(){this.initializePrivateVariables(),this.isProtectedOnChange=!0,this.serviceLocator=new jb,this.initializeServices(),this.setCulture();window.measureElement&&(window.measureElement=null),this.initDiagram(),this.initViews(),this.unWireEvents(),this.wireEvents(),this.element.classList.add("e-diagram")},e.prototype.initializePrivateVariables=function(){if(""===this.element.id){var t=document.getElementsByClassName("e-diagram").length;this.element.id="diagram_"+this.diagramid+"_"+t}this.defaultLocale={Copy:"Copy",Cut:"Cut",Paste:"Paste",Undo:"Undo",Redo:"Redo",SelectAll:"Select All",Grouping:"Grouping",Group:"Group",UnGroup:"Un Group",Order:"Order",BringToFront:"Bring To Front",MoveForward:"Move Forward",SendToBack:"Send To Back",SendBackward:"Send Backward"},this.layerZIndex=-1,this.layerZIndexTable={},this.nameTable={},this.pathTable={},this.groupTable={},this.commands={},this.isLoading||(this.views=[]),this.commandHandler=new Hw(this),this.eventHandler=new kw(this,this.commandHandler),this.spatialSearch=new Fw(this.nameTable),this.scroller=new _w(this)},e.prototype.initializeServices=function(){this.serviceLocator.register("localization",this.localeObj=new Ln(this.getModuleName(),this.defaultLocale,this.locale))},e.prototype.setCulture=function(){this.localeObj=new Ln(this.getModuleName(),this.defaultLocale,this.locale)},e.prototype.render=function(){this.ignoreCollectionWatch=!0;window.domTable={};var t=[];if($()){for(var e=[],i=[],n=0;n<this.changedNodesCollection.length;n++)e.push(this.commandHandler.deepDiffer.removeEmptyValues(this.changedNodesCollection[n]));for(n=0;n<this.changedConnectorCollection.length;n++)i.push(this.commandHandler.deepDiffer.removeEmptyValues(this.changedConnectorCollection[n]));var r="sfBlazor",o="Blazor",s={nodes:e,connectors:i};if(window&&window[o]&&!this.dataSourceSettings.dataSource&&(e.length>0||i.length>0)){var a={methodName:"UpdateBlazorProperties",diagramobj:s};window[r].updateBlazorProperties(a,this)}}this.dataSourceSettings.crudAction.read&&this.renderInitialCrud(),this.initHistory(),this.diagramRenderer=new Ab(this.element.id,new Tb,"SVG"===this.mode),this.initLayers(),this.initializeDiagramLayers(),this.diagramRenderer.setLayers(),this.initObjects(!0);var l=!1;if($()&&!this.dataSourceSettings.dataSource&&"None"!==this.layout.type){for(var h=0,c=this.nodes;h<c.length;h++){a=c[h];this.insertValue(gb(a),!0)}for(var d=0,p=this.connectors;d<p.length;d++){a=p[d];this.insertValue(gb(a),!1)}l=!0}if(this.doLayout(),l&&this.commandHandler.getBlazorOldValues(),this.lineRoutingModule){var u=[],f=[],g=[];if($())for(var m=0,y=this.connectors;m<y.length;m++){a=y[m];u.push(gb(a,void 0,void 0,!0))}if(this.lineRoutingModule.lineRouting(this),$()){for(var v=0,b=this.connectors;v<b.length;v++){a=b[v];f.push(gb(a,void 0,void 0,!0))}this.commandHandler.getObjectChanges(u,f,g);r="sfBlazor",o="Blazor",s={nodes:[],connectors:g};if(window&&window[o]){a={methodName:"UpdateBlazorProperties",diagramobj:s};window[r].updateBlazorProperties(a,this)}}}this.validatePageSize(),this.renderPageBreaks(),this.diagramRenderer.renderSvgGridlines(this.snapSettings,qv(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.commandHandler.initSelectorWrapper(),this.notify("initial-load",{}),this.trigger("load"),this.scroller.setSize(),this.scroller.updateScrollOffsets(),this.refreshDiagramLayer(),(this.scrollSettings.verticalOffset>0||this.scrollSettings.horizontalOffset>0)&&this.updateScrollOffset(),te.isDevice&&(this.tool=Cp.ZoomPan|Cp.SingleSelect),this.notify("initial-end",{}),this.isProtectedOnChange=!1,this.tooltipObject=cf(this),this.diagramActions=Ip.Render;var w=this.nodes;for(n=0;n<w.length;n++)w[n].isExpanded||t.push(w[n]);if(t.length)for(n=t.length-1;n>=0;n--)this.commandHandler.expandNode(t[n],this);this.initCommands();var S=document.getElementsByClassName(this.element.id+"_hiddenUserHandleTemplate");!function(t,e,i){var n,r,o,s,a;if(t&&e){n=pb(t);for(var l=0,h=i.userHandles;l<h.length;l++)if(r=h[l],n){for(o=n(gb(r),void 0,"template",void 0,void 0,!1),s=0;s<o.length;s++)(a=Jv("div",{style:"height: 100%; width: 100%; pointer-events: all",id:r.name+"_template_hiddenUserHandle"})).appendChild(o[s]);e[0].appendChild(a)}}else if($())for(var c=void 0,d=0,p=i.userHandles;d<p.length;d++){for(s=0,c=(o=Te((r=p[d]).content))(jy(r),null,null,"diagramsf_userHandle_template");s<c.length;s++)(a=Jv("div",{style:"height: 100%; width: 100%; pointer-events: all",id:r.name+"_template_hiddenUserHandle"})).appendChild(c[s]);e[0].appendChild(a)}}(this.userHandleTemplate,S,this.selectedItems),this.updateTemplate(),this.isLoading=!1,this.renderComplete(),this.updateFitToPage()},e.prototype.updateFitToPage=function(){this.pageSettings&&this.pageSettings.fitOptions&&this.pageSettings.fitOptions.canFit&&this.fitToPage(this.pageSettings.fitOptions)},e.prototype.updateTemplate=function(){for(var t,e,i,n=0;n<this.nodes.length;n++)e=(t=this.nodes[n]).annotations[0],"HTML"===t.shape.type||"Native"===t.shape.type?Ae("diagramsf_node_template","NodeTemplate",this,!1):e&&"Template"===e.annotationType&&Ae("diagramsf_annotation_template","AnnotationTemplate",this,!1);for(n=0;n<this.connectors.length;n++)(i=this.connectors[n].annotations[0])&&"Template"===i.annotationType&&Ae("diagramsf_annotation_template","AnnotationTemplate",this,!1);for(n=0;n<this.selectedItems.userHandles.length;n++)Ae("diagramsf_userHandle_template","UserHandleTemplate",this,!1)},e.prototype.resetTemplate=function(){for(var t,e,i,n=0;n<this.nodes.length;n++)e=(t=this.nodes[n]).annotations[0],"HTML"===t.shape.type&&t.shape.content instanceof HTMLElement?Be("diagramsf_node_template"):e&&"Template"===e.annotationType&&Be("diagramsf_annotation_template");for(n=0;n<this.connectors.length;n++)(i=this.connectors[n].annotations[0])&&"Template"===i.annotationType&&Be("diagramsf_annotation_template");for(n=0;n<this.selectedItems.userHandles.length;n++)Ae("diagramsf_userHandle_template","UserHandleTemplate",this,!1)},e.prototype.renderInitialCrud=function(){var t,e=this;e.dataSourceSettings.crudAction.read&&((t=new Ut(e.dataSourceSettings.crudAction.read,"GET",!1)).onSuccess=function(t){e.dataSourceSettings.dataManager?e.dataSourceSettings.dataManager=JSON.parse(t):e.dataSourceSettings.dataSource=JSON.parse(t),e.dataBind()},t.send().then());e.dataSourceSettings.connectionDataSource.crudAction.read&&((t=new Ut(e.dataSourceSettings.connectionDataSource.crudAction.read,"GET",!1)).onSuccess=function(t){e.dataSourceSettings.connectionDataSource.dataManager=JSON.parse(t),e.dataBind()},t.send().then())},e.prototype.getModuleName=function(){return"diagram"},e.prototype.getClassName=function(){return"Diagram"},e.prototype.requiredModules=function(){var t=[];return t.push({member:"Bpmn",args:[]}),t.push({member:"Bridging",args:[]}),t.push({member:"ConnectorEditingTool",args:[]}),this.constraints&xp.UndoRedo&&t.push({member:"UndoRedo",args:[]}),("OrganizationalChart"===this.layout.type||"HierarchicalTree"===this.layout.type||this.layout.enableAnimation)&&t.push({member:"LayoutAnimate",args:[]}),this.snapSettings.constraints&&t.push({member:"Snapping",args:[this]}),t.push({member:"PrintandExport",args:[this]}),this.contextMenuSettings.show&&t.push({member:"contextMenu",args:[this,this.serviceLocator]}),"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type||t.push({member:"OrganizationalChart",args:[this]}),"ComplexHierarchicalTree"===this.layout.type&&t.push({member:"ComplexHierarchicalTree",args:[]}),"MindMap"===this.layout.type&&t.push({member:"MindMapChart",args:[]}),"RadialTree"===this.layout.type&&t.push({member:"RadialTree",args:[]}),"SymmetricalLayout"===this.layout.type&&t.push({member:"SymmetricalLayout",args:[]}),(this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource||this.dataSourceSettings.crudAction.read||this.dataSourceSettings.connectionDataSource.crudAction.read)&&t.push({member:"DataBinding",args:[]}),this.constraints&xp.LineRouting&&t.push({member:"LineRouting",args:[]}),t},e.prototype.destroy=function(){if(clearInterval(this.renderTimer),this.renderTimer=null,this.hRuler&&this.vRuler&&(this.hRuler.destroy(),this.vRuler.destroy()),this.tooltipObject.destroy(),this.droppable.destroy(),this.unWireEvents(),this.notify("destroy",{}),t.prototype.destroy.call(this),document.getElementById(this.element.id)){this.element.classList.remove("e-diagram");for(var e=document.getElementsByClassName("e-diagram-tooltip");e.length>0;)e[0].parentNode.removeChild(e[0]);var i=document.getElementById(this.element.id+"content");i&&this.element.removeChild(i);if(window.measureElement){window.measureElement.usageCount-=1;window.measureElementCount--,0===window.measureElementCount&&(window.measureElement.parentNode.removeChild(window.measureElement),window.measureElement=null)}}window.domTable={}},e.prototype.wireEvents=function(){var t=te.touchStartEvent,e=te.touchEndEvent,i=te.touchMoveEvent,n=te.isPointer?"pointerleave":"mouseleave",r=te.isPointer,o="mozilla"===te.info.name?r?"mousewheel":"DOMMouseScroll":"mousewheel";ee.add(this.diagramCanvas,t,this.eventHandler.mouseDown,this.eventHandler),ee.add(this.diagramCanvas,i,this.eventHandler.mouseMove,this.eventHandler),ee.add(this.diagramCanvas,e,this.eventHandler.mouseUp,this.eventHandler),ee.add(this.diagramCanvas,n,this.eventHandler.mouseLeave,this.eventHandler),ee.add(this.diagramCanvas,"keydown",this.eventHandler.keyDown,this.eventHandler),ee.add(this.diagramCanvas,"keyup",this.eventHandler.keyUp,this.eventHandler),ee.add(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick,this.eventHandler),ee.add(this.diagramCanvas,"scroll",this.eventHandler.scrolled,this.eventHandler),ee.add(this.diagramCanvas,o,this.eventHandler.mouseWheel,this.eventHandler),ee.add(window,"resize",this.eventHandler.windowResize,this.eventHandler),this.initDroppables()},e.prototype.unWireEvents=function(){var t=te.touchStartEvent,e=te.touchMoveEvent,i=te.isPointer?"pointerleave":"mouseleave",n=te.isPointer,r="mozilla"===te.info.name?n?"mousewheel":"DOMMouseScroll":"mousewheel",o=te.touchEndEvent;ee.remove(this.diagramCanvas,t,this.eventHandler.mouseDown),ee.remove(this.diagramCanvas,e,this.eventHandler.mouseMove),ee.remove(this.diagramCanvas,o,this.eventHandler.mouseUp),ee.remove(this.diagramCanvas,i,this.eventHandler.mouseLeave),ee.remove(this.diagramCanvas,"keydown",this.eventHandler.keyDown),ee.remove(this.diagramCanvas,"keyup",this.eventHandler.keyUp),ee.remove(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick),ee.remove(this.diagramCanvas,"scroll",this.eventHandler.scrolled),ee.remove(this.diagramCanvas,r,this.eventHandler.mouseWheel),ee.remove(window,"resize",this.eventHandler.windowResize)},e.prototype.select=function(t,e){if($()){for(var i=0;i<t.length;i++)t[i]=this.nameTable[t[i].id];t=this.nameTable[t.id]||t}null!=t&&this.commandHandler.selectObjects(t,e)},e.prototype.selectAll=function(){var t;t=this.getObjectsOfLayer(this.activeLayer.objects),this.select(t)},e.prototype.unSelect=function(t){$()&&(this.commandHandler.oldSelectedObjects=gb(this.selectedItems),t=this.nameTable[t.id]||t),t&&aw(this,t)&&(this.commandHandler.unSelect(t),this.commandHandler.updateBlazorSelector())},e.prototype.clearSelection=function(){this.commandHandler.clearSelection(!0)},e.prototype.updateViewPort=function(){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t),this.eventHandler.updateViewPortSize(this.element),this.updateBlazorDiagramProperties(t,!0)},e.prototype.cutCommand=function(){this.cut()},e.prototype.cut=function(){this.commandHandler.cut()},e.prototype.addProcess=function(t,e){this.bpmnModule&&this.bpmnModule.addProcess(t,e,this)},e.prototype.removeProcess=function(t){this.bpmnModule&&this.bpmnModule.removeProcess(t,this)},e.prototype.pasteCommand=function(){this.paste()},e.prototype.paste=function(t){this.commandHandler.paste(t)},e.prototype.fitToPage=function(t){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e),this.scroller.fitToPage(t),this.updateBlazorDiagramProperties(e,!0)},e.prototype.bringIntoView=function(t){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e),this.scroller.bringIntoView(t),this.updateBlazorDiagramProperties(e,!0)},e.prototype.bringToCenter=function(t){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e),this.scroller.bringToCenter(t),this.updateBlazorDiagramProperties(e,!0)},e.prototype.copyCommand=function(){this.copy()},e.prototype.copy=function(){return this.commandHandler.copy()},e.prototype.group=function(){this.callBlazorModel=!1,this.insertBlazorDiagramObjects(this.selectedItems),this.commandHandler.group(),this.callBlazorModel=!0,this.commandHandler.getBlazorOldValues()},e.prototype.unGroup=function(){this.callBlazorModel=!1,this.insertBlazorDiagramObjects(this.selectedItems),this.commandHandler.unGroup(),this.callBlazorModel=!0,this.commandHandler.getBlazorOldValues()},e.prototype.sendToBack=function(){var t=this.selectedItems.nodes.length?this.selectedItems.nodes[0]:this.selectedItems.connectors[0];this.insertBlazorDiagramObjects(t),this.commandHandler.sendToBack(),this.commandHandler.getBlazorOldValues()},e.prototype.setActiveLayer=function(t){var e=this.commandHandler.getLayer(t);this.activeLayer=e},e.prototype.addLayer=function(t,e){this.commandHandler.addLayer(t,e)},e.prototype.addDiagramLayer=function(t,e){this.commandHandler.addLayer(t,e,!1)},e.prototype.removeLayer=function(t){this.commandHandler.removeLayer(t)},e.prototype.removeDiagramLayer=function(t){this.commandHandler.removeLayer(t,!1)},e.prototype.moveObjects=function(t,e){var i=gb(this.layers);this.enableServerDataBinding(!1),this.commandHandler.moveObjects(t,e);var n=this.commandHandler.deepDiffer.map(i,gb(this.layers)),r=this.commandHandler.deepDiffer.frameObject({},n);this.oldDiagramObject={layers:r},this.commandHandler.updateBlazorProperties()},e.prototype.layerObjectUpdate=function(){if($()){this.enableServerDataBinding(!1),this.oldDiagramObject.layers=[];for(var t=0;t<this.layers.length;t++){var e=gb(this.layers[t]);e.sfIndex=this.layers[t].zIndex,this.oldDiagramObject.layers.push(e)}}},e.prototype.sendLayerBackward=function(t){this.layerObjectUpdate(),this.commandHandler.sendLayerBackward(t),this.commandHandler.updateLayerObject(this.oldDiagramObject,!0)},e.prototype.bringLayerForward=function(t){this.layerObjectUpdate(),this.commandHandler.bringLayerForward(t),this.commandHandler.updateLayerObject(this.oldDiagramObject)},e.prototype.cloneLayer=function(t){this.commandHandler.cloneLayer(t)},e.prototype.bringToFront=function(){var t=this.selectedItems.nodes.length?this.selectedItems.nodes[0]:this.selectedItems.connectors[0];this.insertBlazorDiagramObjects(t),this.commandHandler.bringToFront(),this.commandHandler.getBlazorOldValues()},e.prototype.moveForward=function(){var t=this.selectedItems.nodes.length?this.selectedItems.nodes[0]:this.selectedItems.connectors[0];this.insertBlazorDiagramObjects(t),this.commandHandler.sendForward(),this.commandHandler.getBlazorOldValues()},e.prototype.sendBackward=function(){var t=this.selectedItems.nodes.length?this.selectedItems.nodes[0]:this.selectedItems.connectors[0];this.insertBlazorDiagramObjects(t),this.commandHandler.sendBackward(),this.commandHandler.getBlazorOldValues()},e.prototype.getObject=function(t){return this.nameTable[t]},e.prototype.getNodeObject=function(t){return gb(this.nameTable[t])},e.prototype.getConnectorObject=function(t){return gb(this.nameTable[t])},e.prototype.getActiveLayer=function(){return this.activeLayer},e.prototype.nudgeCommand=function(t,e,i){"object"!=typeof t&&this.nudge(t)},e.prototype.nudge=function(t,e,i){var n=0,r=0;"Left"===t||"Right"===t?n=("Left"===t?-1:1)*(e||1):r=("Up"===t?-1:1)*(i||1);var o=this.selectedItems,s=this.selectedItems.wrapper.children[0];if(s instanceof Qp)this.commandHandler.labelDrag(o.nodes[0],s,n,r);else{var a=gb(this.selectedItems);this.protectPropertyChange(!0),this.drag(o,n,r),this.protectPropertyChange(!1);var l={type:"PositionChanged",redoObject:gb(this.selectedItems),undoObject:a,category:"Internal"};this.addHistoryEntry(l)}this.refreshCanvasLayers()},e.prototype.insertBlazorDiagramObjects=function(t){if($()&&!(this.blazorActions&up.interaction)){if(this.enableServerDataBinding(!1),t instanceof Mv){for(var e=0;e<t.nodes.length;e++)this.insertBlazorDiagramObjects(t.nodes[e]);for(e=0;e<t.connectors.length;e++)this.insertBlazorDiagramObjects(t.connectors[e])}if(!(t instanceof Mv)){var i;if(t&&t.children&&t.children.length>0)for(e=0;e<t.children.length;e++)this.insertBlazorDiagramObjects(this.nameTable[t.children[e]]);i=gb(this.nameTable[t.id]),this.insertValue(i,!(Iy(t)===Gf))}}},e.prototype.drag=function(t,e,i){if((this.insertBlazorDiagramObjects(t),$()&&t.id&&(t=this.nameTable[t.id]||t),this.bpmnModule&&t instanceof Lv)&&this.bpmnModule.updateAnnotationDrag(t,this,e,i))return;if(t instanceof Mv){if(this.preventConnectorsUpdate=!0,t.nodes&&t.nodes.length){for(var n=0,r=t.nodes;n<r.length;n++){var o=r[n];if(this.callBlazorModel=!1,this.drag(o,e,i),o.parentId){var s=this.nameTable[o.parentId];if(s.isLane)$g(s,this.nameTable[s.parentId],o,this)}}this.callBlazorModel=!0}if(t.connectors&&t.connectors.length){this.callBlazorModel=!1;for(var a=0,l=t.connectors;a<l.length;a++){var h=l[a];this.drag(h,e,i),-1===this.selectionConnectorsList.indexOf(h)&&this.selectionConnectorsList.push(h)}this.callBlazorModel=!0}this.updateSelector(),this.diagramActions&Ip.DragUsingMouse&&this.updatePage()}else t instanceof Lv&&this.bpmnModule&&this.bpmnModule.updateAnnotationDrag(t,this,e,i),this.commandHandler.drag(t,e,i);if(t instanceof Mv){this.preventConnectorsUpdate=!1;for(var c=0,d=this.selectionConnectorsList;c<d.length;c++){var p=d[c];this.updateConnectorProperties(this.nameTable[p.id]),"Bpmn"===p.shape.type&&"Default"===p.shape.sequence&&this.commandHandler.updatePathElementOffset(p)}this.selectionConnectorsList=[]}this.diagramActions&Ip.ToolAction||this.diagramActions&Ip.DragUsingMouse||this.updateSelector(),!this.callBlazorModel||this.blazorActions&up.interaction||this.commandHandler.getBlazorOldValues()},e.prototype.scale=function(t,e,i,n){this.insertBlazorDiagramObjects(t);var r=!0;if(t.id&&(t=this.nameTable[t.id]||t),t instanceof Mv){if(t.nodes&&t.nodes.length){this.callBlazorModel=!1;for(var o=0,s=t.nodes;o<s.length;o++){var a=s[o];r=this.commandHandler.scale(a,e,i,n,t),this.commandHandler.checkBoundaryConstraints(void 0,void 0,t.wrapper.bounds)||this.commandHandler.scale(a,1/e,1/i,n,t)}this.callBlazorModel=!0}if(t.connectors&&t.connectors.length){this.callBlazorModel=!1;for(var l=0,h=t.connectors;l<h.length;l++){var c=h[l];this.commandHandler.scale(c,e,i,n,t),this.commandHandler.checkBoundaryConstraints(void 0,void 0,t.wrapper.bounds)||this.commandHandler.scale(c,1/e,1/i,n,t)}this.callBlazorModel=!0}this.updateSelector(),this.refreshCanvasLayers()}else this.commandHandler.scale(t,e,i,n,t.children?t:void 0);return!this.callBlazorModel||this.blazorActions&up.interaction||this.commandHandler.getBlazorOldValues(),r},e.prototype.rotate=function(t,e,i){var n;if(this.insertBlazorDiagramObjects(t),t.id&&(t=this.nameTable[t.id]||t),t)if(i=i||{x:t.wrapper.offsetX,y:t.wrapper.offsetY},t instanceof Mv){this.callBlazorModel=!1,t.rotateAngle+=e,t.wrapper.rotateAngle+=e;var r=fb(t.wrapper);if(!(n=this.commandHandler.checkBoundaryConstraints(void 0,void 0,r)))return t.rotateAngle-=e,t.wrapper.rotateAngle-=e,n;var o=[];o=(o=o.concat(t.nodes)).concat(t.connectors),this.commandHandler.rotateObjects(t,o,e,i),this.callBlazorModel=!0}else this.commandHandler.rotateObjects(t,[t],e,i);return!this.callBlazorModel||this.blazorActions&up.interaction||this.commandHandler.getBlazorOldValues(),n},e.prototype.dragSourceEnd=function(t,e,i){this.insertBlazorDiagramObjects(t),this.commandHandler.dragSourceEnd(t,e,i),this.callBlazorModel&&this.commandHandler.getBlazorOldValues()},e.prototype.dragTargetEnd=function(t,e,i){this.insertBlazorDiagramObjects(t),this.commandHandler.dragTargetEnd(t,e,i),this.callBlazorModel&&this.commandHandler.getBlazorOldValues()},e.prototype.findObjectsUnderMouse=function(t,e){return this.eventHandler.findObjectsUnderMouse(t,e)},e.prototype.findObjectUnderMouse=function(t,e,i){return this.eventHandler.findObjectUnderMouse(t,e,i)},e.prototype.findTargetObjectUnderMouse=function(t,e,i,n,r){return this.eventHandler.findTargetUnderMouse(t,e,i,n,r)},e.prototype.findElementUnderMouse=function(t,e,i){return this.eventHandler.findElementUnderMouse(t,e,i)},e.prototype.findActionToBeDone=function(t,e,i,n){return this.eventHandler.findActionToBeDone(t,e,i,n)},e.prototype.getTool=function(t){var e,i=Lb(this.getCustomTool);return i&&(e=i(t))?e:this.eventHandler.getTool(t)},e.prototype.getCursor=function(t,e){var i,n=Lb(this.getCustomCursor);if(n&&(i=n(t,e)))return i;if(this.customCursor.length)for(var r=0;r<this.customCursor.length;r++)if(this.customCursor[r].action===t)return this.customCursor[r].cursor;return this.eventHandler.getCursor(t)},e.prototype.initHistory=function(){this.undoRedoModule&&this.undoRedoModule.initHistory(this)},e.prototype.addHistoryEntry=function(t){if(this.undoRedoModule&&this.constraints&xp.UndoRedo&&!this.currentSymbol){if(t.undoObject&&"helper"===t.undoObject.id)return;this.undoRedoModule.addHistoryEntry(t,this),"StartGroup"!==t.type&&"EndGroup"!==t.type&&this.historyChangeTrigger(t,"CustomAction")}},e.prototype.addCustomHistoryEntry=function(t){$()&&this.undoRedoModule&&this.constraints&xp.UndoRedo&&(t.type=void 0,t.category="External",this.undoRedoModule.addHistoryEntry(t,this))},e.prototype.historyChangeTrigger=function(t,e){var i={},n=[];if("Internal"===t.category){switch(t&&t.redoObject&&t.redoObject.nodes instanceof Array&&t.redoObject.connectors instanceof Array?n=t.redoObject.nodes.concat(t.redoObject.connectors):t.redoObject&&n.push(t.redoObject),i.type=t.type,t.type){case"PositionChanged":i.oldValue={offsetX:t.undoObject.offsetX,offsetY:t.undoObject.offsetY},i.newValue={offsetX:t.redoObject.offsetX,offsetY:t.redoObject.offsetY};break;case"RotationChanged":i.oldValue={rotateAngle:t.undoObject.rotateAngle},i.newValue={rotateAngle:t.redoObject.rotateAngle};break;case"SizeChanged":i.oldValue={offsetX:t.undoObject.offsetX,offsetY:t.undoObject.offsetY,width:t.undoObject.width,height:t.undoObject.height},i.newValue={offsetX:t.redoObject.offsetX,offsetY:t.redoObject.offsetY,width:t.redoObject.width,height:t.redoObject.height};break;case"CollectionChanged":i[t.changeType]=n;break;case"ConnectionChanged":i.oldValue={offsetX:t.undoObject.offsetX,offsetY:t.undoObject.offsetY},i.newValue={offsetX:t.redoObject.offsetX,offsetY:t.redoObject.offsetY}}var r=void 0;if(r={cause:t.category,source:jy(n),change:jy(i),action:e},$()){var o=(r={cause:t.category,change:jy(i),source:{connectors:void 0,nodes:void 0},action:e}).source;o.connectors=[],o.nodes=[];for(var s=void 0,a=0;a<n.length;a++)s=jy(n[a]),Iy(n[a])===Gf?o.connectors.push(s):o.nodes.push(s);r.source=o}n.length&&this.triggerEvent(kp.historyChange,r)}},e.prototype.startGroupAction=function(){this.addHistoryEntry({type:"StartGroup",category:"Internal"})},e.prototype.endGroupAction=function(){this.addHistoryEntry({type:"EndGroup",category:"Internal"})},e.prototype.undo=function(){this.canEnableBlazorObject=!0,this.callBlazorModel=!1,this.undoRedoModule&&this.constraints&xp.UndoRedo&&this.undoRedoModule.undo(this),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},e.prototype.redo=function(){this.canEnableBlazorObject=!0,this.callBlazorModel=!1,this.undoRedoModule&&this.constraints&xp.UndoRedo&&this.undoRedoModule.redo(this),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},e.prototype.getBlazorDiagramObjects=function(t){if(t)for(var e=0;e<t.length;e++)this.insertBlazorDiagramObjects(t[e]);else this.insertBlazorDiagramObjects(this.selectedItems);this.callBlazorModel=!1,this.canEnableBlazorObject=!0},e.prototype.align=function(t,e,i){this.getBlazorDiagramObjects(e),e||(e=(e=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|Ip.PublicMethod,this.commandHandler.align(e,t,i||"Object"),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},e.prototype.distribute=function(t,e){this.getBlazorDiagramObjects(e),e||(e=(e=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|Ip.PublicMethod,this.commandHandler.distribute(e,t),this.commandHandler.getBlazorOldValues(),this.canEnableBlazorObject=!1,this.callBlazorModel=!0},e.prototype.sameSize=function(t,e){this.getBlazorDiagramObjects(e),e||(e=(e=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|Ip.PublicMethod,this.commandHandler.sameSize(e,t),this.commandHandler.getBlazorOldValues(),this.canEnableBlazorObject=!1,this.callBlazorModel=!0},e.prototype.updateBlazorDiagramProperties=function(t,e){if($()&&!e){this.enableServerDataBinding(!1);for(var i=0;i<t.length;i++)this.oldDiagramObject[t[i]]=gb(this[t[i]])}e&&this.commandHandler.getDiagramOldValues(this.oldDiagramObject,t)},e.prototype.getZoomingAttribute=function(){var t=[];return t.push("scrollSettings"),t.push("snapSettings"),t},e.prototype.zoom=function(t,e){var i=this.getZoomingAttribute();this.updateBlazorDiagramProperties(i),this.scroller.zoom(t,0,0,e),this.blazorActions&up.interaction||this.updateBlazorDiagramProperties(i,!0)},e.prototype.zoomTo=function(t){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e);var i=t.zoomFactor?t.zoomFactor:.2;i="ZoomOut"===t.type?1/(1+i):1+i,this.scroller.zoom(i,0,0,t.focusPoint),this.updateBlazorDiagramProperties(e,!0)},e.prototype.pan=function(t,e,i){var n=this.getZoomingAttribute();this.updateBlazorDiagramProperties(n),this.setCursor("grabbing"),this.scroller.zoom(1,t,e,i),this.updateBlazorDiagramProperties(n,!0)},e.prototype.reset=function(){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t),this.scroller.zoom(1/this.scroller.currentZoom,-this.scroller.horizontalOffset,-this.scroller.verticalOffset,{x:0,y:0}),this.updateBlazorDiagramProperties(t,!0)},e.prototype.resetSegments=function(){var t=[],e=[],i=[];if($())for(var n=0,r=this.connectors;n<r.length;n++){var o=r[n];t.push(gb(o,void 0,void 0,!0))}if(this.constraints&xp.LineRouting&&this.lineRoutingModule)this.lineRoutingModule.lineRouting(this);else{this.protectPropertyChange(!0);for(var s=void 0,a=0;a<this.connectors.length;a++)(s=this.connectors[a]).segments=[],this.connectorPropertyChange(s,{},{segments:s.segments});this.protectPropertyChange(!1)}if($()){for(var l=0,h=this.connectors;l<h.length;l++){o=h[l];e.push(gb(o,void 0,void 0,!0))}this.commandHandler.getObjectChanges(t,e,i);var c={nodes:[],connectors:i};if(window&&window.Blazor){o={methodName:"UpdateBlazorProperties",diagramobj:c};window.sfBlazor.updateBlazorProperties(o,this)}}},e.prototype.triggerEvent=function(t,e){return tS(this,void 0,void 0,function(){var i;return eS(this,function(n){switch(n.label){case 0:return e&&this.updateEventValue(e),[4,this.trigger(kp[t],e)];case 1:return i=n.sent(),$()&&"string"==typeof i&&(i=JSON.parse(i)),[2,i]}})})},e.prototype.updateEventValue=function(t){var e=t.element;t.element&&e instanceof Mv&&e.nodes.length+e.connectors.length===1&&(t.element=1===e.nodes.length?e.nodes[0]:e.connectors[0])},e.prototype.addNodeToLane=function(t,e,i){if(this.nameTable[e]){var n=this.nameTable[e];if(this.protectPropertyChange(!0),this.undoRedoModule&&this.historyManager.startGroupAction(),this.nameTable[t.id]||(t.offsetX=n.wrapper.bounds.width+n.wrapper.bounds.x,t.offsetY=n.wrapper.bounds.height+n.wrapper.bounds.y,t=this.add(t)),t.parentId="",n.shape.phases.length)for(var r=0;r<n.shape.phases.length;r++){l=e+i+r;if(this.nameTable[l]&&this.nameTable[l].isLane){var o=this.nameTable[l].wrapper.bounds,s={x:o.x+(o.x-n.wrapper.bounds.x+t.margin.left+t.wrapper.bounds.width/2),y:o.y+n.wrapper.bounds.y-t.margin.top};if("Horizontal"===n.shape.orientation)s.y=o.y;else{s.x=o.x;var a=this.nameTable[l].parentId+n.shape.lanes[0].id+"_0_header";s.y=o.y+(n.wrapper.bounds.y-this.nameTable[a].wrapper.bounds.height+t.margin.top+t.wrapper.bounds.height/2)}if(o.containsPoint(s)||l===e+i+(n.shape.phases.length-1)){Jg(this,this.nameTable[l],t,void 0,!0),$g(this.nameTable[l],n,t,this);break}}}else{var l=e+i+"0";this.nameTable[l]&&(Jg(this,this.nameTable[l],t,void 0,!0),$g(this.nameTable[l],n,t,this))}this.undoRedoModule&&this.historyManager.endGroupAction(),this.protectPropertyChange(!1)}this.updateDiagramElementQuad()},e.prototype.showTooltip=function(t){var e=fb(t.wrapper),i={x:0,y:0},n=t.tooltip.content?t.tooltip.content:"X:"+Math.round(e.x)+" Y:"+Math.round(e.y);t&&"Custom"===t.tooltip.openOn&&(i=t instanceof Lv?{x:t.offsetX+t.width/2,y:t.offsetY+t.height/2}:{x:t.targetPoint.x,y:t.targetPoint.x},this.commandHandler.showTooltip(t,i,n,"SelectTool",!0))},e.prototype.hideTooltip=function(t){t&&"Custom"===t.tooltip.openOn&&this.tooltipObject.close()},e.prototype.addNode=function(t,e){return this.add(t,e)},e.prototype.addChildToGroup=function(t,e){this.addChild(t,e)},e.prototype.getHistoryStack=function(t){var e,i=[];if(e=t?this.historyManager.undoStack:this.historyManager.redoStack,void 0!==this.historyManager.stackLimit){for(var n=e.length-1;n>=0;n--)if(i.push(e[n]),i.length>this.historyManager.stackLimit)return i}else i=e;return i},e.prototype.getEdges=function(t){return t.outEdge?this.nameTable[t.id].outEdges:this.nameTable[t.id].inEdges},e.prototype.getParentId=function(t){return this.nameTable[t].parentId},e.prototype.addConnector=function(t){return this.add(t)},e.prototype.UpdateBlazorDiagramModelCollection=function(t,e,i){var n=jy(t);if(window&&window.Blazor&&(!this.isServerUpdate||i)){this.isServerUpdate=!0;var r=[],o=[],s=[],a=void 0,l=[],h=[];if(!e){l=i||this.commandHandler.getChildren(t,[]);for(var c=0;c<l.length;c++)n=jy(l[c]),o.push(n),a=Iy(l[c])===Gf?this.connectors.indexOf(l[c]):this.nodes.indexOf(l[c]),r.push(a),h.push(Iy(l[c])===Gf?"Connector":"Node");i||(o.push(jy(t)),r.push(this.nodes.indexOf(t)),h.push(Iy(t)===Gf?"Connector":"Node"))}if(e&&e.length>0)for(c=0;c<e.length;c++){n=jy(e[c]),e[c]instanceof Lv?o.push(n):s.push(n),h.push(Iy(e[c])===Gf?"Connector":"Node")}var d={methodName:"UpdateBlazorDiagramObjects",diagramobj:{nodeObj:JSON.stringify(o),ObjectType:h,removalIndex:e?void 0:r,isMultipleObjects:!0,annotationIndex:void 0,connectorObj:JSON.stringify(s)}};window.sfBlazor.updateBlazorProperties(d,this)}},e.prototype.UpdateBlazorDiagramModel=function(t,e,i,n){var r=jy(t);if(window&&window.Blazor&&!this.isServerUpdate&&!(this.diagramActions&Ip.Clear)){var o={methodName:"UpdateBlazorDiagramObjects",diagramobj:{nodeObj:JSON.stringify(r),ObjectType:e,removalIndex:i,isMultipleObjects:!1,annotationIndex:n,connectorObj:void 0}};window.sfBlazor.updateBlazorProperties(o,this)}},e.prototype.addBlazorDiagramObjects=function(){var t=[],e=[];if(this.dataBindingModule&&!(this.realActions&Ap.PreventDataInit)){for(var i=0;i<this.nodes.length;i++)t.push(gb(this.nodes[i],void 0,void 0,!0));for(i=0;i<this.connectors.length;i++)e.push(gb(this.connectors[i],void 0,void 0,!0))}if(window&&window.Blazor){var n={methodName:"AddBlazorObjects",diagramobj:{nodeObj:JSON.stringify(t),isConnector:!1}};window.sfBlazor.updateBlazorProperties(n,this),n={methodName:"AddBlazorObjects",diagramobj:{nodeObj:JSON.stringify(e),isConnector:!0}},window.sfBlazor.updateBlazorProperties(n,this)}},e.prototype.removeNodeEdges=function(t,e,i){var n=this.nameTable[t],r=i?n.outEdges:n.inEdges;if(r.length>0)for(var o=0;o<r.length;o++)r[o]===e&&r.splice(o,1)},e.prototype.add=function(t,i){var n,r=this.isProtectedOnChange;if(this.protectPropertyChange(!0),t){var o=void 0;o={element:t=gb(t),cause:this.diagramActions,state:"Changing",type:"Addition",cancel:!1},this.parentObject&&(o.parentId=this.parentObject.id),$()&&(o=Ly(o,t,"Changing","Addition")),"helper"===t.id||this.diagramActions&Ip.PreventCollectionChangeOnDragOver||this.triggerEvent(kp.collectionChange,o),o.cancel&&this.drawingObject&&(this.removeElements(o.element),this.tooltipObject.close(),Iy(o.element)===Gf&&(o.element.sourceID&&this.removeNodeEdges(o.element.sourceID,o.element.id,!0),o.element.targetID&&this.removeNodeEdges(o.element.targetID,o.element.id,!1))),this.diagramActions=this.diagramActions|Ip.PublicMethod,t.id=t.id||cb();var s=this.activeLayer;if(!o.cancel&&!s.lock){if(s.objects.indexOf(t.id)<0&&!s.lock&&(s.visible||(s.visible=!0,this.dataBind()),s.objects.push(t.id)),Iy(t)===Gf)(n=new Gf(this,"connectors",t,!0)).status="New",Um(n,t,this.connectorDefaults),this.connectors.push(n),this.initObject(n),this.UpdateBlazorDiagramModel(n,"Connector"),!1===t.visible&&this.updateElementVisibility(n.wrapper,n,t.visible),this.updateEdges(n);else{if(Um(n=new Lv(this,"nodes",t,!0),t,this.nodeDefaults),n.parentId=t.parentId,n.umlIndex=t.umlIndex,n.status="New",this.nodes.push(n),this.initObject(n,s,void 0,i),this.UpdateBlazorDiagramModel(n,"Node"),this.bpmnModule){if(n.shape.annotations&&0!==n.shape.annotations.length)for(var a=0,l=this.bpmnModule.getTextAnnotationConn(n);a<l.length;a++){var h=l[a];this.initConnectors(h,s,!1)}n.shape.activity&&n.shape.activity.subProcess.processes&&n.shape.activity.subProcess.processes.length&&this.bpmnModule.updateDocks(n,this)}if(this.lineRoutingModule&&this.constraints&xp.LineRouting)for(var c=this.spatialSearch.findObjects(n.wrapper.outerBounds),d=0;d<c.length;d++){var p=c[d];p instanceof Gf&&this.connectorPropertyChange(p,{},{sourceID:p.sourceID,targetID:p.targetID,sourcePortID:p.sourcePortID,targetPortID:p.targetPortID,sourcePoint:p.sourcePoint,targetPoint:p.targetPoint})}if(n.umlIndex>-1&&t.parentId&&this.nameTable[t.parentId]&&"UmlClassifier"===this.nameTable[t.parentId].shape.type){var u=this.nameTable[t.parentId];u.children.splice(n.umlIndex,0,n.id),u.wrapper.children.splice(n.umlIndex,0,n.wrapper),u.wrapper.measure(new Wd),u.wrapper.arrange(u.wrapper.desiredSize),this.updateDiagramObject(u)}}if(o={element:n,cause:this.diagramActions,state:"Changed",type:"Addition",cancel:!1},this.parentObject&&(o.parentId=this.parentObject.id),this.updateBlazorCollectionChange(n,!0),$()&&(o=Ly(o,t,"Changed","Addition")),"helper"===t.id||this.diagramActions&Ip.PreventCollectionChangeOnDragOver||this.triggerEvent(kp.collectionChange,o),!(this.diagramActions&Ip.UndoRedo||this.diagramActions&Ip.Group||this.diagramActions&Ip.PreventHistory)){var f={type:"CollectionChanged",changeType:"Insert",undoObject:gb(t),redoObject:gb(t),category:"Internal"};this.addHistoryEntry(f)}this.parentObject=void 0,"SVG"===this.mode&&(this.updateSvgNodes(n),this.updateTextElementValue(n),this.updateDiagramObject(n),n.shape.activity&&n.shape.activity.subProcess.processes&&n.shape.activity.subProcess.processes.length&&this.updateProcesses(n),this.updateBridging())}}this.protectPropertyChange(r),this.resetDiagramActions(Ip.PublicMethod),n&&this.layers.length>1&&this.moveNode(n);for(var g=0,m=this.views;g<m.length;g++){var y=m[g],v=this.views[y];v instanceof e||this.refreshCanvasDiagramLayer(v)}return n},e.prototype.updateBlazorCollectionChange=function(t,e){if(window&&window.sfBlazor){var i={},n=t instanceof Lv?"nodes":"connectors";i["nodes"===n?this.nodes.indexOf(t).toString():this.connectors.indexOf(t).toString()]=gb(t),window.sfBlazor.updateDiagramCollection&&window.sfBlazor.updateDiagramCollection.call(this,n,i,{},!e,!1)}},e.prototype.updateSvgNodes=function(t){if(t.children)for(var e=0,i=t.children;e<i.length;e++){var n=i[e];if(this.nameTable[n]&&this.nameTable[n].parentId){var r=Hv(n+"_groupElement",this.element.id);r&&r.parentNode.removeChild(r)}}},e.prototype.updateProcesses=function(t){if(this.bpmnModule&&t&&t.shape&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length){var e=t.shape.activity.subProcess.processes;this.moveSvgNode(t.id);for(var i=0,n=e;i<n.length;i++){var r=n[i];this.moveSvgNode(r);for(var o=[],s=(o=o.concat(this.nameTable[r].outEdges,this.nameTable[r].inEdges)).length-1;s>=0;s--)this.moveSvgNode(o[s])}for(var a=0,l=e;a<l.length;a++){r=l[a];this.nameTable[r].shape.activity.subProcess.processes&&this.nameTable[r].shape.activity.subProcess.processes.length&&this.updateProcesses(this.nameTable[r])}}else this.moveSvgNode(t.id)},e.prototype.moveSvgNode=function(t){var e=Hv(t+"_groupElement",this.element.id),i=e.parentElement;e.parentNode.removeChild(e),i.appendChild(e)},e.prototype.addTextAnnotation=function(t,e){if(this.bpmnModule){var i=this.bpmnModule.addAnnotation(e,t,this);if(this.initConnectors(i,this.commandHandler.getObjectLayer(e.id),!1),this.updateDiagramObject(e),!(this.diagramActions&Ip.UndoRedo||this.diagramActions&Ip.Group)){var n={type:"CollectionChanged",changeType:"Insert",undoObject:gb(t),redoObject:gb(t),category:"Internal"};this.addHistoryEntry(n)}}},e.prototype.spliceConnectorEdges=function(t,e){var i,n=[];if(i=e?this.nameTable[t.sourceID]:this.nameTable[t.targetID])for(var r=(n=e?i.outEdges:i.inEdges).length-1;r>=0;r--)n[r]===t.id&&n.splice(r,1)},e.prototype.removeDependentConnector=function(t){for(var e,i=[],n=(i=i.concat(t.outEdges,t.inEdges)).length-1;n>=0;n--)(e=this.nameTable[i[n]])&&(this.connectorTable[e.id]=gb(e),this.remove(e))},e.prototype.removeObjectsFromLayer=function(t){if(t.children)for(var e=0;e<t.children.length;e++){var i=this.nameTable[t.children[e]];i&&this.removeObjectsFromLayer(i)}var n=this.layers.indexOf(this.commandHandler.getObjectLayer(t.id)),r=this.layers[n].objects.indexOf(t.id);r>-1&&(aw(this,t)&&this.unSelect(t),this.layers[n].objects.splice(r,1),delete this.layers[n].zIndexTable[this.nameTable[t.id].zIndex])},e.prototype.removeElements=function(t){if("SVG"===this.mode||"Canvas"===this.mode&&"Native"===t.shape.type){var e=Hv(t.id+"_groupElement",this.element.id);e&&e.parentNode.removeChild(e)}this.refreshCanvasLayers();var i,n=t.wrapper.children;if(n)for(var r=0;r<n.length;r++){if(n[r]instanceof lu||n[r].id&&n[r].id.indexOf("icon_content")>0){n[r].id.indexOf("icon_content")>0&&"SVG"===this.mode&&((i=Hv(n[r].id+"_shape_groupElement",this.element.id))&&i.parentNode.removeChild(i),(i=Hv(n[r].id+"_rect_groupElement",this.element.id))&&i.parentNode.removeChild(i));for(var o=0,s=this.views;o<s.length;o++){var a=s[o];ib(n[r].id+"_groupElement",a);var l=this.scroller.removeCollection.indexOf(t.id);this.scroller.removeCollection.splice(l,1)}}else if(n[r]instanceof vf)for(var h=0,c=this.views;h<c.length;h++){a=c[h];ib(t.id+"_html_element",a),ib(n[r].id+"_html_element",a)}dy(n[r].id)}},e.prototype.removeCommand=function(){this.remove()},e.prototype.remove=function(t){var e,i=[];i=i.concat(this.selectedItems.nodes,this.selectedItems.connectors);var n=!1;if(t){if((t=this.nameTable[t.id])&&t.shape&&"SwimLane"===t.shape.type&&function(t,e){var i,n,r,o,s,a,l=e.wrapper.children[0].rows;for(n=0;n<l.length;n++)for(r=0;r<l[n].cells.length;r++){if((s=Tm(l[n].cells[r]))&&s.children)for(o=0;o<s.children.length;o++)s.children[o].children&&(a=t.nameTable[s.children[o].id])&&(a.isLane?Am(t,a):(t.removeDependentConnector(a),t.diagramActions|=Ip.PreventHistory,a.constraints&bp.Delete?t.remove(a):qg(t,a,{},!1),t.diagramActions&=~Ip.PreventHistory,o--));s&&(i=t.nameTable[s.id])&&Am(t,i)}}(this,t),t&&(function(t){return t instanceof Gf?t.constraints&yp.Delete:t.constraints&bp.Delete}(t)||this.diagramActions&Ip.Clear)&&(e={element:t,cause:this.diagramActions,state:"Changing",type:"Removal",cancel:!1},$()&&(e=Ly(e,t,"Changing","Removal")),this.diagramActions&Ip.Clear||"helper"===t.id||this.triggerEvent(kp.collectionChange,e),!e.cancel)){if(this.bpmnModule&&this.bpmnModule.checkAndRemoveAnnotations(t,this))return void this.refreshCanvasLayers();if(!(this.diagramActions&Ip.UndoRedo||this.diagramActions&Ip.PreventHistory||!(t instanceof Lv||t instanceof Gf))){var r={type:"CollectionChanged",changeType:"Remove",undoObject:gb(t),redoObject:gb(t),category:"Internal"};this.updateBlazorCollectionChange(t,!1),this.diagramActions&Ip.Clear||i.length>0&&this.undoRedoModule&&!this.layout.type&&(this.historyManager.startGroupAction(),n=!0),t instanceof Lv&&this.removeDependentConnector(t),t.isLane||t.isPhase||this.diagramActions&Ip.Clear||this.isStackChild(t)||this.addHistoryEntry(r)}!t.children||t.isLane||t.isPhase||this.deleteGroup(t),t.parentId&&(this.deleteChild(t),this.nameTable[t.parentId]&&"UmlClassifier"===this.nameTable[t.parentId].shape.type&&(this.updateDiagramObject(this.nameTable[t.parentId]),this.updateConnectorEdges(this.nameTable[t.parentId])));var o=void 0;this.diagramActions=this.diagramActions|Ip.PublicMethod;var s=this.nameTable[t.id];if(s instanceof Lv){if("Bpmn"===s.shape.type&&this.bpmnModule&&this.bpmnModule.removeBpmnProcesses(s,this),s.isLane||s.isPhase||"SwimLane"===s.shape.type){(a=s.isLane||s.isPhase?this.nameTable[s.parentId]:this.nameTable[s.id]).wrapper.children[0];s.isLane?Bm(this,s,a):s.isPhase&&Mm(this,s,a)}o=this.nodes.indexOf(s),$()&&"helper"!==t.id&&this.UpdateBlazorDiagramModel(t,"Node",o),-1!==o&&(this.crudDeleteNodes.push(this.nameTable[s.id]),this.nodes.splice(o,1),this.updateNodeEdges(s))}else o=this.connectors.indexOf(s),this.UpdateBlazorDiagramModel(t,"Connector",o),-1!==o&&(this.crudDeleteNodes.push(this.nameTable[s.id]),this.connectors.splice(o,1)),this.updateEdges(s),this.spliceConnectorEdges(t,!0),this.spliceConnectorEdges(t,!1);if(n&&this.historyManager.endGroupAction(),aw(this,s)&&this.unSelect(s),!s.isPhase){if(this.removeObjectsFromLayer(t),this.currentDrawingObject&&(this.currentDrawingObject.wrapper=void 0),delete this.nameTable[t.id],i.length>0&&i[0].id===s.id&&s.parentId){var a,l=this.nameTable[s.parentId];if(l&&l.isLane&&"SwimLane"===this.nameTable[l.parentId].shape.type)Im(this,a=this.nameTable[l.parentId],l,s)}this.removeElements(s),this.updateBridging(),"SVG"!==this.mode&&this.refreshDiagramLayer(),this.diagramActions&Ip.Clear||(this.removeFromAQuad(s),e={element:t,cause:this.diagramActions,state:"Changed",type:"Removal",cancel:!1},$()&&(e=Ly(e,t,"Changed","Removal")),"helper"!==t.id&&this.triggerEvent(kp.collectionChange,e),this.resetTool())}}}else if(i.length>0){this.undoRedoModule&&(this.historyManager.startGroupAction(),n=!0);for(var h=0;h<i.length;h++){i[h];if(this.nameTable[i[h].id]){if(i[h]instanceof Gf&&this.bpmnModule&&this.bpmnModule.textAnnotationConnectors.indexOf(i[h])>-1)return void this.remove(this.nameTable[i[h].targetID]);$()&&(!this.isServerUpdate&&i&&i.length>1&&(this.isServerUpdate=!0,this.UpdateBlazorDiagramModelCollection(i[0],void 0,i)),i[h].parentId&&this.insertBlazorDiagramObjects(this.nameTable[i[h].parentId])),this.remove(i[h]),$()&&i[h].parentId&&(this.commandHandler.getBlazorOldValues(),this.isServerUpdate=!1)}}n&&this.historyManager.endGroupAction(),this.clearSelection()}if(this.tooltipObject.close(),$()&&i&&i.length>0){for(var c=!0,d=0;d<i.length;d++)this.nameTable[i[d].id]&&(c=!1);c&&(this.isServerUpdate=!1)}},e.prototype.isStackChild=function(t){var e,i=this.nameTable[t.parentId];if(t&&t.parentId&&i.container&&"Stack"===i.container.type&&"UmlClassifier"!==this.nameTable[t.parentId].shape.type){e=!0;var n={type:"StackChildPositionChanged",redoObject:{sourceIndex:void 0,source:t,target:void 0,targetIndex:void 0},undoObject:{sourceIndex:i.wrapper.children.indexOf(t.wrapper),source:t,target:void 0,targetIndex:void 0},category:"Internal"};this.diagramActions&Ip.UndoRedo||this.addHistoryEntry(n)}return e},e.prototype.deleteChild=function(t,e){var i;if(e=e?this.nameTable[e.id]:this.nameTable[t.parentId],i="string"==typeof t?t:t.id,e&&e.children){for(var n=0;n<e.children.length;n++)if(e.children[n]===i){e.children.splice(n,1);for(var r=0;r<e.wrapper.children.length;r++)e.wrapper.children[r].id===i&&e.wrapper.children.splice(r,1)}e.wrapper.measure(new Wd),e.wrapper.arrange(e.wrapper.desiredSize)}},e.prototype.addChild=function(t,e,i){var n,r=this.nameTable[t.id];if(r.children||(r.children=[]),r.children&&("string"==typeof e?this.nameTable[e]&&(n=e):(n=e.id=e.id||cb(),this.add(e)),n&&(!e.umlIndex||-1===e.umlIndex))){var o=this.nameTable[n];o.parentId=r.id,r.container&&"Stack"===r.container.type&&this.updateStackProperty(r,o),i?(r.children.splice(i,0,n),r.wrapper.children.splice(i,0,o.wrapper)):(r.children.push(n),r.wrapper.children.push(o.wrapper)),r.wrapper.measure(new Wd),r.wrapper.arrange(r.wrapper.desiredSize),void 0!==r.container&&(o.offsetX=o.wrapper.offsetX,o.offsetY=o.wrapper.offsetY),(!r.parentId||this.nameTable[r.parentId]&&"SwimLane"!==this.nameTable[r.parentId].shape.type)&&this.updateDiagramObject(r)}},e.prototype.clear=function(){this.clearObjects()},e.prototype.clearObjects=function(t){var e=[];e=t||(e=e.concat(this.nodes)).concat(this.connectors),this.diagramActions=this.diagramActions|Ip.Clear;for(var i=0,n=e;i<n.length;i++){var r=n[i];this.nameTable[r.id]&&this.remove(r)}this.diagramActions=this.diagramActions&~Ip.Clear,this.spatialSearch=new Fw(this.nameTable),this.initHistory()},e.prototype.startEditCommad=function(){var t,e=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:void 0;if(e&&e instanceof Lv)if(e.isLane&&e.parentId)for(var i=this.nameTable[e.parentId],n=i.shape.lanes,r=e.id.slice(i.id.length),o=r.substring(0,r.length-1),s=0;s<n.length;s++)e.isLane&&o===n[s].id&&(t=this.nameTable[n[s].header.id]);else if("SwimLane"===e.shape.type&&e.shape.header&&e.shape.hasHeader){var a=e.wrapper.children[0].rows[0].cells[0].children[0].id;t=this.nameTable[a]}this.startTextEdit(t)},e.prototype.startTextEdit=function(t,e){if(!yg(this)&&!mg(this)||gg(this)){this.textEditing=!0;var i=this.scroller.transform,n=xg(this)?i.scale:1,r=void 0,o=void 0,s=void 0,a=void 0,l=void 0;if(t||(t=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:this.selectedItems.connectors[0]),t){if($()){var h=gb(t);h.annotations.length>0&&this.insertValue(h,t instanceof Lv),t=this.nameTable[t.id]||t}t.shape&&"UmlClassifier"===t.shape.type&&(t=this.nameTable[t.children[0]]);var c=!1;if(this.bpmnModule&&(l=this.bpmnModule.getTextAnnotationWrapper(t,e))&&(t=this.nameTable[t.id.split("_textannotation_")[0]]),l?c=!0:("Text"!==t.shape.type&&0===t.annotations.length&&(t.constraints&bp.ReadOnly||(this.activeLabel.isGroup=!0,this.startGroupAction(),this.addLabels(t,[{id:cb(),content:""}]))),!e&&("Text"!==t.shape.type&&t.annotations.length>0||"Text"===t.shape.type)&&(e="Text"===t.shape.type?t.wrapper.children[0].id.split("_")[1]:t.annotations[0].id),e&&(l=this.getWrapper(t.wrapper,e))),t&&l&&!(l instanceof vf)&&(!function(t,e){var i;return i=e instanceof Gf?yp.ReadOnly:bp.ReadOnly,"Text"===e.shape.type?e.constraints&bp.ReadOnly:e.constraints&i?t.constraints&vp.InheritReadOnly?1:0:t.constraints&vp.ReadOnly?1:0}(l,t)||c)){var d=l.style,p=void 0;p=90>(p=l.bounds.width<t.wrapper.bounds.width?l.bounds.width:t.wrapper.bounds.width)?90:p;var u=document.getElementById(this.element.id+"_editTextBoxDiv"),f=document.getElementById(this.element.id+"_editBox");r=f?f.value:l.content,this.activeLabel.text=r,u||f||(u=Jv("div",{}),f=Jv("textarea",{}),this.diagramCanvas.appendChild(u),u.appendChild(f),f.appendChild(document.createTextNode(r))),(o=zv(l.style,r,void 0,void 0,p)).isEmpty()&&(o="Text"!==t.shape.type?new Wd(vy(t,l.id.split(t.id+"_")[1]).width||50,l.style.fontSize):new Wd(t.width>50?50:t.width,l.style.fontSize)),t.parentId&&"UmlClassifier"===this.nameTable[t.parentId].shape.type?(o.width=t.wrapper.bounds.width-20,s=(t.wrapper.bounds.center.x+i.tx)*i.scale-o.width/2*n-2.5,a=(t.wrapper.bounds.center.y+i.ty)*i.scale-o.height/2*n-3,l.style.textAlign="Left"):(o.width=Math.max(o.width,50),s=(l.bounds.center.x+i.tx)*i.scale-o.width/2*n-2.5,a=(l.bounds.center.y+i.ty)*i.scale-o.height/2*n-3),sb(u,{id:this.element.id+"_editTextBoxDiv",style:"position: absolute;left:"+s+"px;top:"+a+"px;width:"+(o.width+1)*n+"px;height:"+o.height*n+"px; containerName:"+t.id+";"}),sb(f,{id:this.element.id+"_editBox",style:"width:"+(o.width+1)*n+"px;height:"+o.height*n+"px;resize: none;outline: none;overflow: hidden;;font-family:"+d.fontFamily+";font-size:"+d.fontSize*n+"px;text-align:"+l.style.textAlign.toLocaleLowerCase()+";",class:"e-diagram-text-edit"}),f.style.fontWeight=d.bold?"bold":"",f.style.fontStyle=d.italic?"italic":"",f.style.lineHeight=(1.2*d.fontSize+"px;").toString(),f.style.textDecoration=d.textDecoration?d.textDecoration:"",this.activeLabel.parentId=t.id,this.activeLabel.id=e,l.visible=!1,this.updateDiagramObject(t),this.diagramActions=this.diagramActions|Ip.TextEdit,this.isTriggerEvent||(ee.add(f,"input",this.eventHandler.inputChange,this.eventHandler),ee.add(f,"focusout",this.focusOutEdit,this),f.select())}}}},e.prototype.updateNodeExpand=function(t,e){for(var i=0;i<t.outEdges.length;i++){var n=this.nameTable[t.outEdges[i]],r=this.nameTable[n.targetID];n.visible=e,e||(this.updateElementVisibility(n.wrapper,n,!1),r.isExpanded=e),this.updateNodeExpand(r,r.isExpanded),r.visible=e,e||this.updateElementVisibility(r.wrapper,r,!1)}},e.prototype.updateConnectorAnnotation=function(t){if(t.annotations.length)for(var e=void 0,i=0,n=t.annotations;i<n.length;i++){var r=n[i];e=this.getWrapper(t.wrapper,r.id),t.updateAnnotation(r,t.intermediatePoints,t.wrapper.bounds,e,this.diagramActions&Ip.Interactions)}t.wrapper.measure(new Wd(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize)},e.prototype.removeChildrenFromLayout=function(t){for(var e,i=[],n=0;n<t.length;n++)(e=t[n]).parentId||e.processId||i.push(e);return i},e.prototype.doLayout=function(){var t,e=!1,i=this.isProtectedOnChange;this.protectPropertyChange(!0);var n=this.removeChildrenFromLayout(this.nodes),r={x:this.scroller.viewPortWidth,y:this.scroller.viewPortHeight};if("None"!==this.layout.type){if(this.organizationalChartModule)t=this.organizationalChartModule.updateLayout(n,this.nameTable,this.layout,r,this.dataSourceSettings.id,this.diagramActions),e=!0,this.layoutAnimateModule&&t.rootNode&&!this.diagramActions&&this.updateNodeExpand(t.rootNode,t.rootNode.isExpanded);else if(this.mindMapChartModule)n&&n.length>0&&this.mindMapChartModule.updateLayout(n,this.nameTable,this.layout,r,this.dataSourceSettings.id,this.dataSourceSettings.root),e=!0;else if(this.radialTreeModule)this.radialTreeModule.updateLayout(n,this.nameTable,this.layout,r),e=!0;else if(this.symmetricalLayoutModule)this.symmetricalLayoutModule.maxIteration=this.layout.maxIteration,this.symmetricalLayoutModule.springLength=this.layout.springLength,this.symmetricalLayoutModule.springFactor=this.layout.springFactor,this.symmetricalLayoutModule.updateLayout(n,this.connectors,this.symmetricalLayoutModule,this.nameTable,this.layout,r),e=!0;else if(this.complexHierarchicalTreeModule){var o=this.complexHierarchicalTreeModule.getLayoutNodesCollection(this.nodes);o.length>0&&this.complexHierarchicalTreeModule.doLayout(o,this.nameTable,this.layout,r),e=!0}if(e){this.preventUpdate=!0;var s={},a=n;$()&&this.updateTemplate();for(var l=0,h=a;l<h.length;l++){var c=h[l];if(this.preventNodesUpdate||this.diagramActions&&this.diagramActions&Ip.PreventIconsUpdate||(this.updateIcon(c),this.updateDefaultLayoutIcons(c)),this.preventNodesUpdate=!0,this.nodePropertyChange(c,{},{offsetX:c.offsetX,offsetY:c.offsetY},!0),this.preventNodesUpdate=!1,c.wrapper.measure(new Wd(c.wrapper.width,c.wrapper.height)),c.wrapper.arrange(c.wrapper.desiredSize),this.updateDiagramObject(c,!0),c.inEdges.length>0)for(var d=0;d<c.inEdges.length;d++){s[(m=this.nameTable[c.inEdges[d]]).id]=m}if(c.outEdges.length>0)for(var p=0;p<c.outEdges.length;p++){var u=this.nameTable[c.outEdges[p]];s[u.id]=u}}for(var f=0,g=Object.keys(s);f<g.length;f++){var m;uy(m=s[g[f]],this.getPoints(m)),"Bpmn"===m.shape.type&&"Default"===m.shape.sequence&&this.commandHandler.updatePathElementOffset(m),m.wrapper.measure(new Wd(void 0,void 0)),m.wrapper.arrange(m.wrapper.desiredSize),this.updateConnectorAnnotation(m),this.updateQuad(m),this.updateDiagramObject(m,!0)}this.preventUpdate=!1,this.updatePage(),this.diagramActions&Ip.Render&&"Canvas"!==this.mode||this.refreshDiagramLayer()}i||this.protectPropertyChange(i)}return e&&this.updateDiagramElementQuad(),!(this.blazorActions&up.expandNode)||t},e.prototype.saveDiagram=function(){return iy(this)},e.prototype.loadDiagram=function(t){return oy(t,this)},e.prototype.getDiagramContent=function(t){return this.printandExportModule?this.printandExportModule.getDiagramContent(t):""},e.prototype.exportImage=function(t,e){this.printandExportModule&&this.printandExportModule.exportImages(t,e)},e.prototype.printImage=function(t,e){this.printandExportModule&&(e.printOptions=!0,this.printandExportModule.exportImages(t,e))},e.prototype.setStackLimit=function(t){this.undoRedoModule&&t&&(this.historyManager.stackLimit=t,this.undoRedoModule.applyLimit(this.historyManager.currentEntry,t,this,!0))},e.prototype.clearHistory=function(){this.undoRedoModule&&this.undoRedoModule.clearHistory(this)},e.prototype.getDiagramBounds=function(){if(this.printandExportModule){var t=this.printandExportModule.getDiagramBounds("",{});return t.width=t.width>this.scrollSettings.viewPortWidth?t.width+(t.x>0?t.x:0):this.scrollSettings.viewPortWidth,t.height=t.height>this.scrollSettings.viewPortHeight?t.height+(t.y>0?t.y:0):this.scrollSettings.viewPortHeight,t.x=t.x>0?0:t.x,t.y=t.y>0?0:t.y,t}return new np},e.prototype.exportDiagram=function(t){return this.printandExportModule?this.printandExportModule.exportDiagram(t):""},e.prototype.print=function(t){this.printandExportModule&&this.printandExportModule.print(t)},e.prototype.addPorts=function(t,e){var i;this.protectPropertyChange(!0),t=this.nameTable[t.id]||t,e.length>1&&this.startGroupAction();for(var n=0;n<e.length;n++){if(i=new pu(t,"ports",e[n],!0),t.ports.push(i),t.children){var r=t.wrapper;t.initPorts(this.getDescription,t.wrapper.children[r.children.length-1])}else{t.wrapper.children.push(t.initPortWrapper(t.ports[t.ports.length-1]))}if(!(this.diagramActions&Ip.UndoRedo||this.diagramActions&Ip.Group)){var o={type:"PortCollectionChanged",changeType:"Insert",undoObject:gb(i),redoObject:gb(t),category:"Internal"};this.addHistoryEntry(o)}}e.length>1&&this.endGroupAction(),t.wrapper.measure(new Wd(t.width,t.height)),t.wrapper.arrange(t.wrapper.desiredSize),this.updateDiagramObject(t),this.protectPropertyChange(!1)},e.prototype.addConstraints=function(t,e){return t|e},e.prototype.removeConstraints=function(t,e){return t&~e},e.prototype.addNodeLabels=function(t,e){this.addLabels(t,e)},e.prototype.addConnectorLabels=function(t,e){this.addLabels(t,e)},e.prototype.addLabels=function(t,e){this.protectPropertyChange(!0);var i,n=(t=this.nameTable[t.id]||t).wrapper;e.length>1&&this.startGroupAction();for(var r=0;r<e.length;r++){if(t instanceof Lv){if(i=new yu(t,"annotations",e[r],!0),t.annotations.push(i),$()){var o=gb(t);this.insertValue(o,t instanceof Lv)}if(this.UpdateBlazorDiagramModel(i,"NodeAnnotation",void 0,this.nodes.indexOf(t)),t.children)for(var s=t,a=0;a<s.wrapper.children.length;a++){if(s.wrapper.children[a].id===s.id+"group_container")s.wrapper.children[a].children.push(t.initAnnotationWrapper(t.annotations[t.annotations.length-1],this.element.id))}else n.children.push(t.initAnnotationWrapper(t.annotations[t.annotations.length-1],this.element.id))}else if(t instanceof Gf){if(i=new vu(t,"annotations",e[r],!0),this.UpdateBlazorDiagramModel(i,"ConnectorAnnotation",void 0,this.connectors.indexOf(t)),t.annotations.push(i),$()){o=gb(t);this.insertValue(o,t instanceof Lv)}var l=n.children[0],h=new np(l.offsetX-l.width/2,l.offsetY-l.height/2,l.width,l.height);n.children.push(t.getAnnotationElement(t.annotations[t.annotations.length-1],t.intermediatePoints,h,this.getDescription,this.element.id))}if(!(this.diagramActions&Ip.UndoRedo||this.diagramActions&Ip.Group)){var c={type:"LabelCollectionChanged",changeType:"Insert",undoObject:gb(i),redoObject:gb(t),category:"Internal"};this.addHistoryEntry(c)}}e.length>1&&this.endGroupAction(),t.wrapper.measure(new Wd(n.width,n.height)),t.wrapper.arrange(n.desiredSize),this.updateDiagramObject(t),this.protectPropertyChange(!1)},e.prototype.addLanes=function(t,e,i){t=this.nameTable[t.id]||t;for(var n=0;n<e.length;n++)Sm(this,t,e[n],i),void 0!==i&&(i+=1);this.updateDiagramElementQuad()},e.prototype.addPhases=function(t,e){t=this.nameTable[t.id]||t;for(var i=0;i<e.length;i++)Cm(this,t,e[i]);this.updateDiagramElementQuad()},e.prototype.removeLane=function(t,e){Bm(this,void 0,t,e),this.updateDiagramElementQuad()},e.prototype.removePhase=function(t,e){Mm(this,void 0,t,e),this.updateDiagramElementQuad()},e.prototype.removelabelExtension=function(t,e,i,n){for(var r=0;r<n.children.length;r++){var o=n.children[r];if((o instanceof Qp||o instanceof vf)&&o.id.match("_"+e[i].id+"$")){for(var s=0;s<t.annotations.length;s++)if(o.id.match("_"+t.annotations[s].id+"$")){if(!(this.diagramActions&Ip.UndoRedo)){var a={type:"LabelCollectionChanged",changeType:"Remove",undoObject:gb(t.annotations[s]),redoObject:gb(t),category:"Internal"};this.addHistoryEntry(a)}t.annotations.splice(s,1)}if(n.children.splice(r,1),"SVG"===this.mode){var l=Hv(o.id,this.element.id);if(l){var h=Hv(o.id,this.element.id);h.parentNode.removeChild(h)}Hv(o.id+"_text",this.element.id)&&(l=Hv(o.id+"_text",this.element.id)).parentNode.removeChild(l);var c=Hv(o.id+"_html_element",this.element.id);c&&c.parentNode.removeChild(c)}else this.refreshCanvasLayers()}}},e.prototype.removeLabels=function(t,e){t=this.nameTable[t.id]||t,e.length>1&&this.startGroupAction();for(var i=e.length-1;i>=0;i--)if(t.children&&t.children.length>0)for(var n=0;n<t.wrapper.children.length;n++)this.removelabelExtension(t,e,i,t.wrapper.children[n]);else this.removelabelExtension(t,e,i,t.wrapper);e.length>1&&this.endGroupAction()},e.prototype.removePortsExtenion=function(t,e,i,n){for(var r=0;r<n.children.length;r++){var o=n.children[r];if(o instanceof ru&&o.id.match("_"+e[i].id+"$")){for(var s=0;s<t.ports.length;s++)if(o.id.match("_"+t.ports[s].id+"$")){if(!(this.diagramActions&Ip.UndoRedo)){var a={type:"PortCollectionChanged",changeType:"Remove",undoObject:gb(t.ports[s]),redoObject:gb(t),category:"Internal"};this.addHistoryEntry(a)}t.ports.splice(s,1)}if(n.children.splice(r,1),"SVG"===this.mode){var l=Hv(o.id,this.element.id);l.parentNode.removeChild(l)}else this.refreshCanvasLayers()}}},e.prototype.removePorts=function(t,e){t=this.nameTable[t.id]||t,e.length>1&&this.startGroupAction();for(var i=e.length-1;i>=0;i--)if(t.children&&t.children.length>0)for(var n=0;n<t.wrapper.children.length;n++)this.removePortsExtenion(t,e,i,t.wrapper.children[n]);else this.removePortsExtenion(t,e,i,t.wrapper);e.length>1&&this.endGroupAction()},e.prototype.getSizeValue=function(t,e){var i;if(i=t.toString().indexOf("px")>0?t.toString():t.toString().indexOf("%")>0?void 0!==e?"100%":t.toString():t.toString()+"px",e){Qf(this);i="calc("+i+" - "+e+"px)"}return i},e.prototype.renderRulers=function(){var t,e,i;this.rulerSettings.showRulers?(e=Qf(t=this),i=Jv("div",{id:t.element.id+"_overlapRuler",style:"height:"+e.height+"px;width:"+e.width+"px;position:absolute;left:0;top:0",class:"e-ruler-overlap"}),t.element.insertBefore(i,t.element.firstChild),Zf(this,!0),Zf(this,!1)):Jf(this)},e.prototype.intOffPageBackground=function(){var t=new Wd;t=Qf(this);var e=document.getElementById(this.element.id+"content"),i=this.getSizeValue(this.width,t.width),n=this.getSizeValue(this.height,t.height),r=this.rulerSettings.showRulers?"width:"+i+"; height:"+n+";top:"+t.height+"px;left:"+t.width+"px;overflow: scroll;position:absolute;overflow:auto;":"width:"+i+"; height:"+n+";position:absolute; left:0px;  top:0px;overflow: auto;",o={id:this.element.id+"content",tabindex:"0",style:r};e?(this.diagramCanvas=e,ob(this.diagramCanvas,r)):(this.diagramCanvas=Jv("div",o),this.element.appendChild(this.diagramCanvas)),this.diagramCanvas.style.background=this.backgroundColor},e.prototype.initDiagram=function(){this.intOffPageBackground(),sb(this.element,{style:"width:"+this.getSizeValue(this.width)+"; height:"+this.getSizeValue(this.height)+";position:relative;overflow:hidden;"})},e.prototype.renderHiddenUserHandleTemplateLayer=function(t){var e;e=Jv("div",{class:this.element.id+"_hiddenUserHandleTemplate",style:"width:"+t.width+"px; height:"+t.height+"px;visibility:hidden ;  overflow: hidden;"}),this.element.appendChild(e)},e.prototype.renderBackgroundLayer=function(t,e){var i=this.createSvg(this.element.id+"_backgroundLayer_svg",t.width,t.height);ob(i,e);var n=Qv("g",{id:this.element.id+"_backgroundImageLayer",class:"e-background-image-layer"});i.appendChild(n);var r=Qv("g",{id:this.element.id+"_backgroundLayer",class:"e-background-layer"});i.appendChild(r),this.diagramCanvas.appendChild(i)},e.prototype.renderGridLayer=function(t,e){var i=this.createSvg(this.element.id+"_gridline_svg",t.width,t.height);i.setAttribute("class","e-grid-layer");var n=Qv("g",{id:this.element.id+"_gridline",width:"100%",height:"100%"}),r=Qv("rect",{id:this.element.id+"_grid_rect",x:"0",y:"0",width:"100%",height:"100%"});Ny()?r.setAttribute("fill","url("+location.protocol+"//"+location.host+location.pathname+"#"+this.element.id+"_pattern)"):r.setAttribute("fill","url(#"+this.element.id+"_pattern)"),n.appendChild(r),i.appendChild(n),this.diagramCanvas.appendChild(i),rb(i,{style:e})},e.prototype.renderDiagramLayer=function(t,e){var i={id:this.element.id+"_diagramLayer_div",style:"width:"+t.width+"px; height:"+t.height+"px;"+e};if(this.diagramLayerDiv=Jv("div",i),"SVG"===this.mode){var n=this.createSvg(this.element.id+"_diagramLayer_svg",t.width,t.height);n.style["pointer-events"]="none",n.setAttribute("class","e-diagram-layer");var r=Qv("g",{id:this.element.id+"_diagramLayer"}),o=Qv("g",{});this.diagramLayer=r,n.style["pointer-events"]="all",o.appendChild(r),n.appendChild(o),this.diagramLayerDiv.appendChild(n)}else this.diagramLayer=Ib.createCanvas(this.element.id+"_diagram",t.width,t.height),ob(this.diagramLayer,"position:absolute;left:0px;top:0px;"),this.diagramLayerDiv.appendChild(this.diagramLayer);this.diagramCanvas.appendChild(this.diagramLayerDiv)},e.prototype.initLayers=function(){var t="position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",e=document.getElementById(this.element.id).getBoundingClientRect(),i=function(){var t=Jv("div",{style:"visibility:hidden; width: 100px"});document.body.appendChild(t);var e=t.getBoundingClientRect().width;t.style.overflow="scroll";var i=Jv("div",{style:"width:100%"});t.appendChild(i);var n=i.getBoundingClientRect().width;return t.parentNode.removeChild(t),e-n}();this.scroller.scrollerWidth=i,this.scroller.setViewPortSize(e.width,e.height),this.renderRulers();window.measureElement&&(window.measureElement=null,document.getElementById("measureElement").remove());ab(),this.renderBackgroundLayer(e,t),this.renderGridLayer(e,t),this.renderDiagramLayer(e,t),this.renderHTMLLayer(e,t),this.renderPortsExpandLayer(e,t),this.renderNativeLayer(e,t),this.renderAdornerLayer(e,t),this.renderHiddenUserHandleTemplateLayer(e)},e.prototype.renderAdornerLayer=function(t,e){var i=Jv("div",{id:this.element.id+"_diagramAdornerLayer",style:"width:"+t.width+"px;height:"+t.height+"px;"+e}),n=Jv("div",{id:this.element.id+"_diagramUserHandleLayer",style:"width:"+t.width+"px;height:"+t.height+"px;"+e});n.setAttribute("class","e-userHandle-layer"),i.appendChild(n);var r=this.createSvg(this.element.id+"_diagramAdorner_svg",t.width,t.height);r.setAttribute("class","e-adorner-layer"),r.style["pointer-events"]="none",this.adornerLayer=Qv("g",{id:this.element.id+"_diagramAdorner"}),this.adornerLayer.style[" pointer-events"]="all",r.appendChild(this.adornerLayer),i.appendChild(r),this.diagramCanvas.appendChild(i);var o=Qv("g",{id:this.element.id+"_SelectorElement"});this.adornerLayer.appendChild(o),rb(r,{style:"pointer-events:none;"})},e.prototype.renderPortsExpandLayer=function(t,e){var i=this.createSvg(this.element.id+"_diagramPorts_svg",t.width,t.height);i.setAttribute("class","e-ports-expand-layer");var n=Qv("g",{id:this.element.id+"_diagramPorts",class:"e-ports-layer",style:"pointer-events: all;"});i.appendChild(n);var r=Qv("g",{id:this.element.id+"_diagramExpander",class:"e-expand-layer",style:"pointer-events: all;"});i.appendChild(r),this.diagramCanvas.appendChild(i),rb(i,{style:e})},e.prototype.renderHTMLLayer=function(t,e){this.htmlLayer=Jv("div",{id:this.element.id+"_htmlLayer",style:"width:"+t.width+"px; height:"+t.height+"px;position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",class:"e-html-layer"});var i=Jv("div",{id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;pointer-events:all;"});this.htmlLayer.appendChild(i),this.diagramCanvas.appendChild(this.htmlLayer)},e.prototype.renderNativeLayer=function(t,e){var i=this.createSvg(this.element.id+"_nativeLayer_svg",t.width,t.height),n=Qv("g",{id:this.element.id+"_nativeLayer",style:"pointer-events:all;"});i.appendChild(n),this.diagramLayerDiv.appendChild(i),rb(i,{class:"e-native-layer",style:e})},e.prototype.createSvg=function(t,e,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return rb(n,{id:t,width:e,height:i}),n},e.prototype.updateBazorShape=function(){for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];switch(e.shape.type){case"Bpmn":e.shape.bpmnShape=e.shape.shape?e.shape.shape:e.shape.bpmnShape;break;case"UmlActivity":e.shape.umlActivityShape=e.shape.shape?e.shape.shape:e.shape.umlActivityShape;break;case"Flow":e.shape.flowShape=e.shape.shape?e.shape.shape:e.shape.flowShape;break;case"Basic":e.shape.basicShape=e.shape.shape?e.shape.shape:e.shape.basicShape;break;case"Text":e.shape.textContent=e.shape.content?e.shape.content:e.shape.textContent}}},e.prototype.initObjects=function(t){this.updateBazorShape(),this.isLoading||this.initData(),this.initLayerObjects(),this.updateBridging(t)},e.prototype.initLayerObjects=function(){var t=this.layers.length>1,e=[],i=window&&window.Blazor&&!this.dataSourceSettings.dataSource,n={},r={},o=[],s=[],a=[],l=[],h=[],c=[],d=[];$()&&i&&(s=this.previousNodeCollection,a=this.previousConnectorCollection);for(var p=0,u=this.nodes;p<u.length;p++){(P=u[p]).id=P.id||cb(),this.addToLayer(P,t),n[P.id]=P}for(var f=0,g=this.connectors;f<g.length;f++){(P=g[f]).id=P.id||cb(),this.addToLayer(P,t),n[P.id]=P}for(var m=0,y=this.layers;m<y.length;m++){for(var v=0,b=(T=y[m]).objects;v<b.length;v++){if(n[P=b[v]])if(n[P]instanceof Gf)if((k=n[P]).sourceID&&k.targetID){var w=n[k.sourceID],S=n[k.targetID];w&&w.wrapper&&S&&S.wrapper?this.initConnectors(n[P],T):e.push(n[P])}else this.initConnectors(n[P],T);else n[P].children?o.push(P):n[P].shape instanceof mv&&n[P].shape.activity.subProcess.processes&&n[P].shape.activity.subProcess.processes.length>0?r[n[P].id]=P:this.initNodes(n[P],T)}if(this.bpmnModule)for(var x=0,C=this.bpmnModule.textAnnotationConnectors;x<C.length;x++){var P=C[x];this.initConnectors(P,T,!1)}}for(var O=0,E=Object.keys(r);O<E.length;O++){P=E[O];this.initObject(n[P]),this.bpmnModule.updateDocks(n[P],this)}for(var L=0,I=this.alignGroup(o,n);L<I.length;L++){P=I[L];var T=this.commandHandler.getObjectLayer(P);this.initNodes(n[P],T)}for(var A=0,B=e;A<B.length;A++){var k=B[A];T=this.commandHandler.getObjectLayer(k.id);this.initConnectors(k,T)}if($()&&i){for(var M=0,D=this.nodes;M<D.length;M++){var R=D[M];l.push(gb(R,void 0,void 0,!0))}for(var z=0,j=this.connectors;z<j.length;z++){var N=j[z];h.push(gb(N,void 0,void 0,!0))}this.commandHandler.getObjectChanges(s,l,c),this.commandHandler.getObjectChanges(a,h,d);P={methodName:"UpdateBlazorProperties",diagramobj:{nodes:c,connectors:d}};window.sfBlazor.updateBlazorProperties(P,this)}},e.prototype.alignGroup=function(t,e){var i,n,r,o,s=[],a=[];for(r=0;r<t.length;r++){var l=void 0;if((n=e[i=t[r]])&&n.children.length)for(o=0;o<n.children.length;o++)l=n.children[o],t.indexOf(l)>-1&&-1===s.indexOf(l)&&-1===a.indexOf(l)&&s.splice(0,0,l);-1===s.indexOf(i)&&a.push(i)}return s=s.concat(a)},e.prototype.addToLayer=function(t,e){var i;e&&(i=this.commandHandler.getObjectLayer(t.id)),e&&i||-1===this.activeLayer.objects.indexOf(t.id)&&this.activeLayer.objects.push(t.id),this.setZIndex(i||this.activeLayer,t)},e.prototype.updateLayer=function(t){for(var e=0,i=Object.keys(t.layers);e<i.length;e++){for(var n=i[e],r=0,o=this.layers[n].objects;r<o.length;r++){var s=o[r],a=this.nameTable[s];void 0!==t.layers[n].visible?this.updateElementVisibility(a.wrapper,a,t.layers[n].visible):!0===t.layers[n].lock&&this.unSelect(a)}void 0!==t.layers[n].lock&&(this.layers[n].lock=t.layers[n].lock)}"SVG"!==this.mode&&this.refreshDiagramLayer()},e.prototype.updateScrollSettings=function(t){var e=-this.scroller.horizontalOffset+t.scrollSettings.horizontalOffset||0,i=this.scroller.verticalOffset-t.scrollSettings.verticalOffset||0,n={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom};0===e&&0===i||this.pan(e,i);var r={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom},o={oldValue:n,newValue:r,source:this};$()&&this.scrollChange&&(o={oldValue:n,newValue:r,sourceId:this.element.id}),this.triggerEvent(kp.scrollChange,o),"Canvas"===this.mode&&this.constraints&xp.Virtualization&&this.refreshDiagramLayer()},e.prototype.initData=function(){var t=this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource;if(this.dataBindingModule&&!(this.realActions&Ap.PreventDataInit))if(t&&this.dataSourceSettings.connectionDataSource.dataManager){var e=this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource;this.nodes=this.generateData(e,!0),this.connectors=this.generateData(this.dataSourceSettings.connectionDataSource.dataManager,!1)}else t&&t.dataSource&&(t.dataSource.url||"BlazorAdaptor"===t.adaptorName&&!t.dataSource.url)?this.dataBindingModule.initSource(this.dataSourceSettings,this):this.dataBindingModule.initData(this.dataSourceSettings,this)},e.prototype.generateData=function(t,e){var i,n=[];for(i=0;i<t.length;i++){var r=t[i],o=e?this.makeData(r,!0):this.makeData(r,!1);!o||!o.id||zm(n,o.id)&&zm(n,o.id)||n.push(o)}return n},e.prototype.makeData=function(t,e){var i,n=e?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource,r={};if(r.id=t[n.id]?t[n.id]:cb(),n.sourceID&&(r.sourceID=t[n.sourceID]),n.targetID&&(r.targetID=t[n.targetID]),t[n.sourcePointX]&&t[n.sourcePointY]&&(r.sourcePoint={x:Number(t[n.sourcePointX]),y:Number(t[n.sourcePointY])}),t[n.targetPointX]&&t[n.targetPointY]&&(r.targetPoint={x:Number(t[n.targetPointX]),y:Number(t[n.targetPointY])}),n.crudAction.customFields&&n.crudAction.customFields.length>0)for(i=0;i<n.crudAction.customFields.length;i++)r[n.crudAction.customFields[i]]=t[n.crudAction.customFields[i]];return r},e.prototype.initNodes=function(t,e){this.preventUpdate=!0,this.initObject(t,e),this.preventUpdate=!1},e.prototype.initConnectors=function(t,e,i){this.preventUpdate=!0,this.initObject(t,e,i),this.updateEdges(t),this.preventUpdate=!1},e.prototype.setZIndex=function(t,e){var i=t;if(-1===e.zIndex){for(;i.zIndexTable[i.objectZIndex+1];)t.objectZIndex++;e.zIndex=++i.objectZIndex}else{var n=e.zIndex;if(i.zIndexTable[n])for(var r=Object.keys(i.zIndexTable).length,o=0;o<r;o++){if(o===n){for(var s=r;s>n;s--)i.zIndexTable[s]=i.zIndexTable[s-1],this.nameTable[i.zIndexTable[s]]&&(this.nameTable[i.zIndexTable[s]].zIndex=s);i.zIndexTable[o]=e.id}0}}},e.prototype.initializeDiagramLayers=function(){this.layers;for(var t=0;t<this.layers.length;t++)if(-1!==this.layers[t].zIndex){var e=this.layers[t];this.layers[t]=this.layers[this.layers[t].zIndex],this.layers[e.zIndex]=e}for(var i=0,n=this.layers;i<n.length;i++){var r=n[i];r.zIndex=-1!==r.zIndex?r.zIndex:this.layers.indexOf(r),this.layerZIndexTable[r.zIndex]=r.id}for(t=0;t<this.layers.length;t++)for(var o=t+1;o<this.layers.length;o++)if(this.layers[t].zIndex>this.layers[o].zIndex){e=this.layers[t];this.layers[t]=this.layers[o],this.layers[o]=e}if(0===this.layers.length){this.commandHandler.addLayer({id:"default_layer",visible:!0,lock:!1,objects:[],zIndex:0,objectZIndex:-1,zIndexTable:{}},null,!0)}this.setActiveLayer(this.layers[this.layers.length-1].id)},e.prototype.resetTool=function(){this.eventHandler.resetTool()},e.prototype.initObjectExtend=function(t,e,i){if(i){var n=this.commandHandler.checkBoundaryConstraints(void 0,void 0,t.wrapper.bounds);if(e.zIndexTable[t.zIndex]=t.id,!n){for(var r=t instanceof Lv?this.nodes:this.connectors,o=0;o<=r.length;o++)r[o]&&t.id===r[o].id&&r.splice(o,1);delete e.zIndexTable[t.zIndex]}}},e.prototype.initObject=function(t,e,i,n){if(void 0===i&&(i=!0),void 0!==t){if(i&&(e||(this.addToLayer(t,!1),e=this.activeLayer),(t instanceof Lv||t instanceof Gf)&&this.setZIndex(e,t)),t instanceof Lv){if(i){if("helper"!==t.id)if(o=Lb(this.getNodeDefaults)){if((s=o(t,this))&&s.ports)for(var r=0;r<s.ports.length;r++)s.ports[r].inEdges=[],s.ports[r].outEdges=[];s&&s!==t&&yb(s,t)}this.initNode(t,this.element.id)}}else if(t instanceof Gf){var o,s;if(o=Lb(this.getConnectorDefaults))(s=o(t,this))&&s!==t&&yb(s,t),t.segments.length&&t.type!==t.segments[0].type&&(t.segments=[]);var a=this.nameTable[t.sourceID],l=this.nameTable[t.targetID],h=this.getConnectedPort(a,t),c=this.getConnectedPort(l,t),d=this.findInOutConnectPorts(a,!1),p=this.findInOutConnectPorts(l,!0);if((void 0!==a&&cg(a)||""!==t.sourcePortID&&dg(d))&&(t.sourceWrapper=this.getEndNodeWrapper(a,t,!0),t.sourcePortID&&(!h||!h.constraints||h.constraints&Mp.None||(t.sourcePortWrapper=this.getWrapper(a.wrapper,t.sourcePortID)))),(void 0!==l&&lg(l)||""!==t.targetPortID&&hg(p))&&(t.targetWrapper=this.getEndNodeWrapper(l,t,!1),t.targetPortID&&(!c||!c.constraints||c.constraints&Mp.None||(t.targetPortWrapper=this.getWrapper(l.wrapper,t.targetPortID)))),!i){var u=t.getConnectorPoints(t.type);uy(t,u)}i&&t.init(this);for(var f=0;f<t.wrapper.children.length;f++)this.pathTable[t.wrapper.children[f].data]&&(t.wrapper.children[f].absoluteBounds=this.pathTable[t.wrapper.children[f].data].absoluteBounds);t.wrapper.measure(new Wd(void 0,void 0)),t.wrapper.arrange(t.wrapper.desiredSize),t instanceof Gf&&"Bezier"===t.type&&this.updateConnectorAnnotation(t);for(var g=0;g<t.wrapper.children.length;g++)this.pathTable[t.wrapper.children[g].data]={},this.pathTable[t.wrapper.children[g].data].absoluteBounds=t.wrapper.children[g].absoluteBounds}if(t instanceof Lv&&t.children&&t.container)for(r=0;r<t.children.length;r++)this.nameTable[t.children[r]].offsetX=this.nameTable[t.children[r]].wrapper.offsetX,this.nameTable[t.children[r]].offsetY=this.nameTable[t.children[r]].wrapper.offsetY;if(this.bpmnModule&&t instanceof Lv&&"Bpmn"===t.shape.type&&t.shape.annotations.length>0&&this.bpmnModule.updateQuad(t,this),this.initObjectExtend(t,e,i),this.nameTable[t.id]=t,t instanceof Lv&&t.children){this.preventNodesUpdate=!0,this.preventConnectorsUpdate=!0,n||t.container||this.updateGroupOffset(t,!0),this.groupTable[t.id]=t.children;for(r=0;r<t.children.length;r++){var m=this.nameTable[t.children[r]];m&&(m.parentId=t.id)}this.isLoading||!t.rotateAngle||t.container||this.commandHandler.rotateObjects(t,[t],t.rotateAngle,{x:t.offsetX,y:t.offsetY},!1),this.preventNodesUpdate=!1,this.preventConnectorsUpdate=!1}void 0===this.enterObject&&this.updateQuad(t)}!1===t.visible&&this.updateElementVisibility(t.wrapper,t,!1)},e.prototype.getConnectedPort=function(t,e){if(t&&t.ports)for(var i=0,n=t.ports;i<n.length;i++){var r=n[i];if(r.id===e.sourcePortID)return r;if(r.id===e.targetPortID)return r}return null},e.prototype.scaleObject=function(t,e,i){var n=i?t.wrapper.actualSize.width:t.wrapper.actualSize.height,r=i?1+(e-n)/n:1,o=i?1:1+(e-n)/n;t.offsetX,t.offsetY;this.realActions|=Ap.PreventDrag,this.scale(t,r,o,{x:.5,y:.5}),this.realActions&=~Ap.PreventDrag},e.prototype.updateDefaultLayoutIcons=function(t){"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type&&"ComplexHierarchicalTree"!==this.layout.type||(this.updateDefaultLayoutIcon(t,t.expandIcon),this.updateDefaultLayoutIcon(t,t.collapseIcon))},e.prototype.updateDefaultLayoutIcon=function(t,e){if("None"!==e.shape&&"Auto"===e.horizontalAlignment&&"Auto"===e.verticalAlignment&&.5===e.offset.x&&1===e.offset.y){var i=this.getWrapper(t.wrapper,"icon_content"),n=void 0,r=void 0;"TopToBottom"===this.layout.orientation||"BottomToTop"===this.layout.orientation?(n=.5,r="TopToBottom"===this.layout.orientation?1:0):"RightToLeft"!==this.layout.orientation&&"LeftToRight"!==this.layout.orientation||(n="LeftToRight"===this.layout.orientation?1:0,r=.5),i.setOffsetWithRespectToBounds(n,r,"Fraction"),i.horizontalAlignment="Center",i.verticalAlignment="Center",t.wrapper.measure(new Wd(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize)}},e.prototype.updateGroupOffset=function(t,e){if(t.children&&t.children.length>0&&!t.container||t.processId){var i=this.nameTable[t.id];if(!(this.realActions&Ap.PreventScale||this.realActions&Ap.PreventDrag)){if(!i.offsetX||!(this.realActions&Ap.EnableGroupAction)&&(this.diagramActions&Ip.ToolAction||this.diagramActions&Ip.PublicMethod))i.offsetX=t.wrapper.offsetX;else{this.realActions|=Ap.PreventScale;var n=i.offsetX-t.wrapper.offsetX;i.offsetX=t.wrapper.offsetX;var r=i.offsetY-t.wrapper.offsetY;i.offsetY=t.wrapper.offsetY,"None"===t.flip&&this.drag(i,n,r),this.realActions&=~Ap.PreventScale}if(!i.offsetY||!(this.realActions&Ap.EnableGroupAction)&&this.diagramActions&Ip.ToolAction)i.offsetY=t.wrapper.offsetY;else{this.realActions|=Ap.PreventScale;r=i.offsetY-t.wrapper.offsetY;i.offsetY=t.wrapper.offsetY,"None"===t.flip&&this.drag(i,0,r),this.realActions&=~Ap.PreventScale}this.diagramActions&&(i.width=t.wrapper.actualSize.width,i.height=t.wrapper.actualSize.height)}}e&&t.children&&t.children.length>0&&(void 0!==this.nameTable[t.id].width?this.scaleObject(t,this.nameTable[t.id].width,!0):this.nameTable[t.id].width=t.wrapper.actualSize.width,void 0!==this.nameTable[t.id].height?this.scaleObject(t,this.nameTable[t.id].height,!1):this.nameTable[t.id].height=t.wrapper.actualSize.height)},e.prototype.initNode=function(t,e,i){var n,r,o=t.initContainer(),s=new tu;if(this.diagramSettings.inversedAlignment||(o.inversedAlignment=!1),o.children||(o.children=[]),t.children){if(o.measureChildren=!1,t.container&&"Grid"===t.container.type)for(var a=0;a<t.children.length;a++){var l=new tu,h=this.nameTable[t.children[a]];l.children=[],l.children.push(h.wrapper),h&&o.addObject(h.wrapper,h.rowIndex,h.columnIndex,h.rowSpan,h.columnSpan)}else for(a=0;a<t.children.length;a++)if(this.nameTable[t.children[a]]){h=this.nameTable[t.children[a]];this.updateStackProperty(t,h,a),o.children.push(h.wrapper),o.elementActions=o.elementActions|wp.ElementIsGroup,h.wrapper.flip="None"===h.wrapper.flip?t.wrapper.flip:h.wrapper.flip}s.id=t.id+"group_container",s.style.fill="none",s.style.strokeColor="none",s.horizontalAlignment="Stretch",s.verticalAlignment="Stretch",o.style=t.style,s.children=[],s.preventContainer=!0,t.container&&(s.relativeMode="Object"),t.container&&"Grid"===t.container.type||o.children.push(s)}else{var c=Lb(this.setNodeTemplate);c&&"helper"!==t.id&&(n=c(t,this)),n||(n=t.init(this)),o.children.push(n)}r=Lb(this.getDescription),(t.children?o:n).description=r||(t.annotations.length?t.annotations[0].content:t.id);var d=t.children?s:o;t.initAnnotations(this.getDescription,d,this.element.id,!!fg(this),this.annotationTemplate),t.initPorts(this.getDescription,d),t.initIcons(this.getDescription,this.layout,d,e),"SwimLane"===t.shape.type&&t.wrapper&&t.wrapper.children.length>0&&t.wrapper.children[0]instanceof _g?(lm(t),cm(this,t),this.updateDiagramElementQuad()):(o.measure(new Wd(t.width,t.height),t.id,this.onLoadImageSize.bind(this)),o instanceof _g?o.arrange(o.desiredSize,!0):o.arrange(o.desiredSize)),"None"!==t.wrapper.flip&&t.wrapper.elementActions&wp.ElementIsGroup&&By(t.wrapper,t.wrapper.offsetX,t.wrapper.offsetY,this,t.wrapper.flip),t instanceof Lv&&t.container&&(t.width<o.outerBounds.width||t.height<o.outerBounds.height)&&o.bounds.x<=o.outerBounds.x&&o.bounds.y<=o.outerBounds.y&&(t.width=o.width=o.outerBounds.width,t.height=o.height=o.outerBounds.height,o.measure(new Wd(t.width,t.height)),o.arrange(o.desiredSize)),t.container&&"Grid"===t.container.type&&t.children&&t.children.length>0&&this.updateChildPosition(t)},e.prototype.updateDiagramElementQuad=function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].wrapper&&this.nodes[t].wrapper instanceof Kp&&this.updateQuad(this.nodes[t])},e.prototype.onLoadImageSize=function(t,e){var i=this.getObject(t),n=document.getElementById(t+"sf-imageNode");n&&n.parentNode.removeChild(n),this.nodePropertyChange(i,{},{width:e.width,height:e.height});var r={element:gb(i),size:e};this.triggerEvent(kp.onImageLoad,r)},e.prototype.updateChildPosition=function(t){for(var e=0;e<t.children.length;e++){var i=this.getObject(t.children[e]);i.offsetX=i.wrapper.offsetX,i.offsetY=i.wrapper.offsetY,i.children&&i.children.length>0&&this.updateChildPosition(i)}},e.prototype.canExecute=function(){return!0},e.prototype.updateStackProperty=function(t,e,i){t.container&&"Stack"===t.container.type&&(e.width||(e.wrapper.horizontalAlignment="Stretch",e.horizontalAlignment="Stretch"),e.height||(e.verticalAlignment="Stretch",e.wrapper.verticalAlignment="Stretch"),i&&"UmlClassifier"===t.shape.type&&(e.umlIndex=i))},e.prototype.initViews=function(){this.isLoading||(this.views.push(this.element.id),this.views[this.element.id]=this)},e.prototype.initCommands=function(){var t=this.commandManager.commands,e={copy:{execute:this.copyCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Lp.C,keyModifiers:Ep.Control}},paste:{execute:this.pasteCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Lp.V,keyModifiers:Ep.Control}},cut:{execute:this.cutCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Lp.X,keyModifiers:Ep.Control}},delete:{execute:this.removeCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Lp.Delete}},selectAll:{execute:this.selectAll.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Lp.A,keyModifiers:Ep.Control}},undo:{execute:this.undo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Lp.Z,keyModifiers:Ep.Control}},redo:{execute:this.redo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Lp.Y,keyModifiers:Ep.Control}},nudgeUp:{execute:this.nudgeCommand.bind(this,"Up"),canExecute:this.canExecute.bind(this),gesture:{key:Lp.Up},parameter:"up"},nudgeRight:{execute:this.nudgeCommand.bind(this,"Right"),canExecute:this.canExecute.bind(this),gesture:{key:Lp.Right},parameter:"right"},nudgeDown:{execute:this.nudgeCommand.bind(this,"Down"),canExecute:this.canExecute.bind(this),gesture:{key:Lp.Down},parameter:"down"},nudgeLeft:{execute:this.nudgeCommand.bind(this,"Left"),canExecute:this.canExecute.bind(this),gesture:{key:Lp.Left},parameter:"left"},startEdit:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Lp.F2}},endEdit:{execute:this.endEditCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Lp.Escape}},focusToNextItem:{canExecute:this.canExecute.bind(this),gesture:{key:Lp.Tab}},focusToPreviousItem:{canExecute:this.canExecute.bind(this),gesture:{key:Lp.Tab,keyModifiers:Ep.Control}},selectFocusedItem:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Lp.Enter}}};this.initCommandManager(t,e)},e.prototype.overrideCommands=function(t,e){for(var i,n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];if(i=e[o],t.gesture.key===i.gesture.key&&t.gesture.keyModifiers===i.gesture.keyModifiers){delete e[o];break}}},e.prototype.initCommandManager=function(t,e){var i=0;if(t)for(i=0;i<t.length;i++)e[t[i].name]&&t[i]?(t[i].canExecute&&(e[t[i].name].canExecute=t[i].canExecute),t[i].execute&&(e[t[i].name].execute=t[i].execute),(t[i].gesture.key||t[i].gesture.keyModifiers)&&(e[t[i].name].gesture=t[i].gesture),""!==t[i].parameter&&(e[t[i].name].parameter=t[i].parameter)):(this.overrideCommands(t[i],e),e[t[i].name]={execute:t[i].execute,canExecute:t[i].canExecute,gesture:t[i].gesture,parameter:t[i].parameter});this.commands=e},e.prototype.updateNodeEdges=function(t){for(var e=0,i=t.inEdges;e<i.length;e++){var n=i[e];this.nameTable[n]&&(this.nameTable[n].targetID="")}for(var r=0,o=t.outEdges;r<o.length;r++){n=o[r];this.nameTable[n]&&(this.nameTable[n].sourceID="")}t.inEdges=[],t.outEdges=[]},e.prototype.updateIconVisibility=function(t,e){for(var i=0;i<t.wrapper.children.length;i++){var n=t.wrapper.children[i];if(n.id){var r=n.id.split(t.id)[1];r&&r.match("^_icon")&&(n.visible=e,this.updateDiagramContainerVisibility(n,e))}}},e.prototype.updateEdges=function(t){var e;void 0!==t.sourceID&&""!==t.sourceID&&((e=this.nameTable[t.sourceID])&&e.outEdges&&0===e.outEdges.length&&(e.outEdges=[]),e&&e.outEdges&&-1===e.outEdges.indexOf(t.id)&&e.outEdges.push(t.id),this.updatePortEdges(e,t,!1));if(void 0!==t.targetID&&""!==t.targetID&&((e=this.nameTable[t.targetID])&&e.inEdges&&0===e.inEdges.length&&(e.inEdges=[]),e&&e.inEdges&&-1===e.inEdges.indexOf(t.id)&&e.inEdges.push(t.id),this.updatePortEdges(e,t,!0),e&&e.visible&&e.outEdges)){var i=0!==e.outEdges.length;this.updateIconVisibility(e,i)}},e.prototype.updatePortEdges=function(t,e,i){if(t)for(var n=0;n<t.ports.length;n++){var r=t.ports[n],o=i?e.targetPortID:e.sourcePortID;if(r.id===o){var s=i?r.inEdges:r.outEdges;-1===s.indexOf(e.id)&&s.push(e.id)}}},e.prototype.refreshDiagram=function(){if(this.initLayerObjects(),this.doLayout(),this.updateBridging(),this.scroller.setSize(),this.addBlazorDiagramObjects(),$()&&this.layout&&this.layout.layoutInfo&&this.layout.layoutInfo.isRootInverse&&this.nodes.length>2){var t=this.nodes[0];if(t.outEdges.length>1){var e=this.isProtectedOnChange,i=this.nameTable[t.outEdges[1]];this.protectPropertyChange(!1),this.preventUpdate=!0,i.sourcePortID=t.ports[1].id,this.preventUpdate=!1,this.dataBind(),this.protectPropertyChange(e)}}if($())for(var n=void 0,r=0,o=this.views;r<o.length;r++){var s=o[r];(n=this.views[s]).renderDocument&&(n.renderDocument(n),n.diagramRenderer.setLayers(),n.updateView(n),this.renderNodes(n))}this.updateFitToPage()},e.prototype.updateCanupdateStyle=function(t,e){for(var i=0;i<t.length;i++)t[i].children&&this.updateCanupdateStyle(t[i].children,e),t[i].canApplyStyle=e},e.prototype.getZindexPosition=function(t,e){var i,n=[],r=void 0;if(n=(n=n.concat(this.nodes)).concat(this.connectors),-1!==t.zIndex)for(var o=0;o<n.length;o++)if(n[o].zIndex>t.zIndex){"HTML"!==t.shape.type&&"Native"!==t.shape.type||(i="HTML"===t.shape.type?"html":"native"),r=_v(e,n[o].id,i);break}return r},e.prototype.updateDiagramObject=function(t,e,i){for(var n,r=0,o=this.views;r<o.length;r++){var s=o[r];if(n=this.views[s],this.diagramActions&&"SVG"===n.mode){var a=void 0;if(this.layers.length>1&&(a=this.commandHandler.getObjectLayer(t.id)),void 0===a||a&&a.visible||i){var l=Kv(this.element.id);window.domTable[n.element.id+"_diagramLayer"]||(window.domTable[n.element.id+"_diagramLayer"]=document.getElementById(n.element.id+"_diagramLayer"));var h=window.domTable[n.element.id+"_diagramLayer"];this.diagramActions&Ip.Interactions&&this.updateCanupdateStyle(t.wrapper.children,!0),this.diagramRenderer.updateNode(t.wrapper,h,l,void 0,e?void 0:this.getZindexPosition(t,n.element.id)),this.updateCanupdateStyle(t.wrapper.children,!0)}}}},e.prototype.updateGridContainer=function(t){for(var e,i=Kv(this.element.id),n=0,r=this.views;n<r.length;n++){var o=r[n];if("SVG"===(e=this.views[o]).mode&&this.diagramActions){var s=document.getElementById(e.element.id+"_diagramLayer");this.diagramRenderer.updateNode(t,s,i,void 0)}else this.refreshCanvasDiagramLayer(e)}},e.prototype.getObjectsOfLayer=function(t){for(var e=[],i=0,n=t;i<n.length;i++){var r=n[i];this.nameTable[r]&&e.push(this.nameTable[r])}return e},e.prototype.refreshDiagramLayer=function(){for(var t,e=0,i=this.views;e<i.length;e++){var n=i[e];switch((t=this.views[n]).mode){case"SVG":this.refreshSvgDiagramLayer(t);break;case"Canvas":this.refreshCanvasLayers(t)}}},e.prototype.refreshCanvasLayers=function(t){if(t)this.refreshCanvasDiagramLayer(t);else for(var e=0,i=this.views;e<i.length;e++){var n=i[e],r=this.views[n];this.refreshCanvasDiagramLayer(r)}},e.prototype.renderBasicElement=function(t){for(var e=Kv(t.element.id),i=0;i<this.basicElements.length;i++){var n=this.basicElements[i];n instanceof Kp&&(n.prevRotateAngle=0),n.measure(new Wd(n.width,n.height)),n.arrange(n.desiredSize),t.diagramRenderer.renderElement(n,t.diagramLayer,e)}},e.prototype.refreshElements=function(t){if(!this.isDestroyed){this.clearCanvas(t),t instanceof e&&(t.diagramLayer.getContext("2d").setTransform(t.scroller.currentZoom,0,0,t.scroller.currentZoom,0,0),t.diagramLayer.getContext("2d").scale(1.5,1.5));var i=Kv(t.element.id);this.spatialSearch.getPageBounds();this.renderDiagramElements(t.diagramLayer,t.diagramRenderer,i);for(var n=0;n<this.basicElements.length;n++){var r=this.basicElements[n];r.measure(new Wd(r.width,r.height)),r.arrange(r.desiredSize),t.diagramRenderer.renderElement(r,t.diagramLayer,i)}t instanceof e&&(t.diagramLayer.style.transform="scale("+2/3+")",t.diagramLayer.style.transformOrigin="0 0"),this.renderTimer=null}},e.prototype.refreshCanvasDiagramLayer=function(t){var e=this;"SVG"===t.mode||this.isDestroyed||(this.basicElements.length>0&&this.renderBasicElement(t),!this.diagramActions||0==(this.diagramActions&Ip.Render)||Ip.ToolAction&this.diagramActions||fg(this)||1!==this.scroller.currentZoom?this.refreshElements(t):this.renderTimer||(this.renderTimer=setTimeout(function(){e.refreshElements(t)},40)))},e.prototype.updatePortVisibility=function(t,e,i){var n,r=!this.drawingObject||!this.drawingObject.shape;if(t instanceof Lv&&r&&ig(t)){for(var o=t.ports,s=!1,a=0;a<o.length;a++)n=this.getWrapper(t.wrapper,o[a].id),(e&fp.Hover||e&fp.Connect)&&yy(o[a],e)&&(n.visible=!i,s=!0);s&&this.updateDiagramObject(t)}},e.prototype.refreshSvgDiagramLayer=function(t){var e,i=document.getElementById(t.element.id+"_diagramLayer"),n=Kv(t.element.id);if(fg(this))this.scroller.virtualizeElements();else{for(var r=0;r<this.basicElements.length;r++)(e=this.basicElements[r]).measure(new Wd(e.width,e.height)),e.arrange(e.desiredSize,!(this.diagramActions&Ip.Render)),this.diagramRenderer.renderElement(e,i,n);this.renderDiagramElements(i,this.diagramRenderer,n)}},e.prototype.removeVirtualObjects=function(t){if(this.deleteVirtualObject){for(var e=0;e<this.scroller.removeCollection.length;e++){var i=this.nameTable[this.scroller.removeCollection[e]];this.removeElements(i)}this.deleteVirtualObject=!1}clearInterval(t)},e.prototype.updateTextElementValue=function(t){for(var e=0;e<t.wrapper.children.length;e++){var i=t.wrapper.children[e];i instanceof Qp&&(i.canMeasure=!0,i.measure(new Wd(t.width,t.height)),i.arrange(i.desiredSize))}},e.prototype.updateVirtualObjects=function(t,e,i){var n=document.getElementById(this.element.id+"_diagramLayer"),r=Kv(this.element.id);if("SVG"===this.mode){for(var o=0;o<t.length;o++){var s=this.scroller.removeCollection.indexOf(t[o]);s>=0&&this.scroller.removeCollection.splice(s,1);var a=this.nameTable[t[o]];this.updateTextElementValue(a),this.diagramRenderer.renderElement(a.wrapper,n,r,void 0,void 0,void 0,void 0,a.zIndex)}for(var l=0;l<i.length;l++)this.scroller.removeCollection.push(i[l]);1!==this.scroller.currentZoom&&this.eventHandler.updateVirtualization()}else this.diagramActions&&this.refreshDiagramLayer()},e.prototype.renderDiagramElements=function(t,e,i,n,r,o){void 0===n&&(n=!0);var s=this.scroller.getPageBounds();s.x*=this.scroller.currentZoom,s.y*=this.scroller.currentZoom,s.width*=this.scroller.currentZoom,s.height*=this.scroller.currentZoom;for(var a=-this.scroller.horizontalOffset-s.x,l=-this.scroller.verticalOffset-s.y,h=0,c=Object.keys(this.layerZIndexTable);h<c.length;h++){var d=c[h],p=this.commandHandler.getLayer(this.layerZIndexTable[d]),u=void 0,f=void 0;"Canvas"===this.mode&&fg(this)&&!this.diagramActions&&this.scroller.virtualizeElements();for(var g="Canvas"===this.mode&&fg(this)&&this.scroller.oldCollectionObjects.length>0?this.scroller.oldCollectionObjects:void 0,m=0,y=Object.keys(g||p.zIndexTable);m<y.length;m++){var v=y[m],b=g?this.nameTable[g[v]]:this.nameTable[p.zIndexTable[v]];if(b&&!b.parentId&&p.visible&&!b.processId){var w={tx:this.scroller.transform.tx,ty:this.scroller.transform.ty,scale:this.scroller.transform.scale};if(fg(this)){if(this.scroller.currentZoom<1){if(s.x<0||this.scroller.horizontalOffset<0){var S=this.scroller.verticalOffset<0?this.scroller.verticalOffset:0;u=(a>0?a:0)+"px",f=(this.realActions&Ap.vScrollbarMoved?0:-S)+"px"}else u="0px",f="0px";this.realActions&Ap.hScrollbarMoved&&(this.realActions=this.realActions&~Ap.hScrollbarMoved),this.realActions&Ap.vScrollbarMoved&&(this.realActions=this.realActions&~Ap.vScrollbarMoved)}else u=(s.x<0?a:-this.scroller.horizontalOffset)+"px",f=(s.y<0?l:-this.scroller.verticalOffset)+"px";this.diagramLayer.style.left=u,this.diagramLayer.style.top=f,w.tx=this.scroller.horizontalOffset/w.scale,w.ty=this.scroller.verticalOffset/w.scale}var x=!0;r&&(x=!1),this.updateTextElementValue(b),e.renderElement(b.wrapper,t,i,!e.isSvgMode&&n?w:void 0,void 0,void 0,x&&(!this.diagramActions||o))}}}},e.prototype.updateBridging=function(t){if(this.bridgingModule)for(var e=0;e<this.connectors.length;e++){var i=this.connectors[e];this.bridgingModule.updateBridging(i,this);var n=this.connectors[e].wrapper;if(n){var r=n.children[0],o=r.data;i.getSegmentElement(i,r,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0),r.data!==o&&(n.measure(new Wd),n.arrange(n.desiredSize),"SVG"!==this.mode||t||this.updateDiagramObject(i))}}},e.prototype.setCursor=function(t){this.diagramRenderer.setCursor(this.diagramCanvas,t)},e.prototype.clearCanvas=function(t){var e,i;(e=t.contentWidth||t.diagramLayer.width/this.scroller.currentZoom,i=t.contentHeight||t.diagramLayer.height/this.scroller.currentZoom,"SVG"!==t.mode)&&Ib.getContext(t.diagramLayer).clearRect(0,0,e,i)},e.prototype.updateScrollOffset=function(){this.scroller.setScrollOffset(this.diagramCanvas.scrollLeft,this.diagramCanvas.scrollTop),Kf(this),fg(this)&&this.scroller.virtualizeElements()},e.prototype.setOffset=function(t,e){window.domTable[this.element.id+"content"]||(window.domTable[this.element.id+"content"]=document.getElementById(this.element.id+"content"));var i=window.domTable[this.element.id+"content"];i&&(i.scrollLeft=t,i.scrollTop=e)},e.prototype.setSize=function(t,e){if(this.diagramLayer&&!this.preventUpdate){var i=Qf(this);t-=i.width,e-=i.height;var n=this.spatialSearch.getPageBounds();n.x*=this.scroller.currentZoom,n.y*=this.scroller.currentZoom,n.width*=this.scroller.currentZoom,n.height*=this.scroller.currentZoom;var r="SVG"===this.mode?1:1.5,o="SVG"===this.mode?Nv(this.element.id):this.diagramLayer,s="Canvas"===this.mode&&this.constraints&xp.Virtualization?this.scroller.viewPortWidth:t,a="Canvas"===this.mode&&this.constraints&xp.Virtualization?this.scroller.viewPortHeight:e;o.setAttribute("width",(r*s).toString()),o.setAttribute("height",(r*a).toString());var l=document.getElementById(this.element.id+"_diagramUserHandleLayer");l&&(l.style.width=t+"px",l.style.height=e+"px");var h={width:t.toString(),height:e.toString()};this.diagramLayerDiv.style.width=t+"px",this.diagramLayerDiv.style.height=e+"px",rb(Gv(this.element.id),h),rb(Hv(this.element.id).getElementsByClassName("e-ports-expand-layer")[0],h);var c=Vv(this.element.id);rb(c,h),c.parentNode.style.width=t+"px",c.parentNode.style.height=e+"px";var d=qv(this.element.id);rb(d,h),this.diagramRenderer.updateGrid(this.snapSettings,d,this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),rb(Xv(this.element.id),h),this.htmlLayer.style.width=t+"px",this.htmlLayer.style.height=e+"px","SVG"===this.mode||fg(this)||this.refreshDiagramLayer(),"SVG"===this.mode&&fg(this)&&this.scroller.virtualizeElements()}},e.prototype.transformLayers=function(){var t=this.spatialSearch.getPageBounds();t.x*=this.scroller.currentZoom,t.y*=this.scroller.currentZoom,t.width*=this.scroller.currentZoom,t.height*=this.scroller.currentZoom,this.diagramRenderer.updateGrid(this.snapSettings,qv(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.diagramRenderer.transformLayers(this.scroller.transform,"SVG"===this.mode),this.diagramActions&Ip.DragUsingMouse||this.updateSelector(),this.renderPageBreaks(t)},e.prototype.removePageBreaks=function(){if(this.diagramLayer){var t=Yv(this.element.id);if(t&&t.childNodes)for(var e=t.childNodes.length,i=0;i<e;i++)t.removeChild(t.childNodes[0])}},e.prototype.renderPageBreaks=function(t){this.removePageBreaks();var e=Yv(this.element.id);if(e){var i=0;t=this.scroller.getPageBounds(!0);var n=(this.scroller.transform.tx+t.x)*this.scroller.currentZoom,r=(this.scroller.transform.ty+t.y)*this.scroller.currentZoom,o=t.height*this.scroller.currentZoom,s=t.width*this.scroller.currentZoom;Ab.renderSvgBackGroundImage(this.pageSettings.background,this.element,n,r,s,o);var a={id:e.id+"rect",x:n,y:r,height:o,width:s,angle:0,stroke:"",strokeWidth:1,fill:this.pageSettings.background.color,opacity:1,pivotX:0,pivotY:0,visible:!0,dashArray:"0"};if(this.diagramRenderer.drawRect(e,a),this.pageSettings.showPageBreaks){var l=this.scroller.getPageBreak(t);for(i=0;i<l.length;i++)this.diagramRenderer.drawLine(e,{class:"e-diagram-page-break",fill:"none",stroke:"#aaaaaa",strokeWidth:1,dashArray:"10 10",opacity:2,x:0,y:0,width:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,startPoint:{x:(l[i].x1+this.scroller.transform.tx)*this.scroller.currentZoom,y:(l[i].y1+this.scroller.transform.ty)*this.scroller.currentZoom},endPoint:{x:(l[i].x2+this.scroller.transform.tx)*this.scroller.currentZoom,y:(l[i].y2+this.scroller.transform.ty)*this.scroller.currentZoom},id:l[i].y1===l[i].y2?"HorizontalLines":"VerticalLines"})}}},e.prototype.validatePageSize=function(){var t=0;"Portrait"===this.pageSettings.orientation?this.pageSettings.width>this.pageSettings.height&&(t=this.pageSettings.height,this.pageSettings.height=this.pageSettings.width,this.pageSettings.width=t):this.pageSettings.height>this.pageSettings.width&&(t=this.pageSettings.width,this.pageSettings.width=this.pageSettings.height,this.pageSettings.height=t)},e.prototype.setOverview=function(t,e){if(t)t&&(this.views.push(t.id),this.views[t.id]=t,t.renderDocument(t),t.diagramRenderer.setLayers(),t.updateView(t),this.renderNodes(t));else{for(var i=0;i<this.views.length;i++)this.views[i]===e&&(t=this.views[e]);this.views[e]=void 0;var n=this.views.indexOf(e);this.views.splice(n,1)}},e.prototype.renderNodes=function(t){if(t){var e=new Ab(t.id,new Tb,!1),i=document.getElementById(t.element.id+"_diagramLayer"),n=Kv(t.element.id);this.renderDiagramElements(i,t.diagramRenderer||e,n,void 0,void 0,!0)}},e.prototype.updateThumbConstraints=function(t,e,i){for(var n=t.length,r=0;r<n;r++){var o=t[r],s=!1,a=!1,l=e.thumbsConstraints;o instanceof Lv?(s="Bpmn"===o.shape.type&&"Activity"===o.shape.shape&&!1===o.shape.activity.subProcess.collapsed||"TextAnnotation"===o.shape.shape,a="Bpmn"===o.shape.type&&"TextAnnotation"===o.shape.shape,sg(o)&&l&Sp.Rotate&&!s||(l&=~Sp.Rotate),pg(o,"SouthEast")&&l&Sp.ResizeSouthEast&&!a||(l&=~Sp.ResizeSouthEast),pg(o,"NorthWest")&&l&Sp.ResizeNorthWest&&!a||(l&=~Sp.ResizeNorthWest),pg(o,"East")&&l&Sp.ResizeEast&&!a||(l&=~Sp.ResizeEast),pg(o,"West")&&l&Sp.ResizeWest&&!a||(l&=~Sp.ResizeWest),pg(o,"North")&&l&Sp.ResizeNorth&&!a||(l&=~Sp.ResizeNorth),pg(o,"South")&&l&Sp.ResizeSouth&&!a||(l&=~Sp.ResizeSouth),pg(o,"NorthEast")&&l&Sp.ResizeNorthEast&&!a||(l&=~Sp.ResizeNorthEast),pg(o,"SouthWest")&&l&Sp.ResizeSouthWest&&!a||(l&=~Sp.ResizeSouthWest)):o instanceof Gf?(i||(l|=Sp.Default),ng(o)?l|=Sp.ConnectorSource:l&=~Sp.ConnectorSource,rg(o)?l|=Sp.ConnectorTarget:l&=~Sp.ConnectorTarget):(i||(l|=Sp.Default),pg(o)||(l&=~(Sp.ResizeSouthEast|Sp.ResizeSouthWest|Sp.ResizeSouth|Sp.ResizeEast|Sp.ResizeWest|Sp.ResizeNorth|Sp.ResizeNorthEast|Sp.ResizeNorthWest)),sg(o)||(l&=~Sp.Rotate)),e.thumbsConstraints=l}},e.prototype.renderSelector=function(t,e){var i=this.isProtectedOnChange;$()&&(this.isProtectedOnChange=!0);var n=new Wd,r=this.selectedItems,o=(r.constraints,this.diagramRenderer.rendererActions);if(this.diagramRenderer.rendererActions=this.currentSymbol?this.addConstraints(o,Tp.DrawSelectorBorder):this.removeConstraints(o,Tp.DrawSelectorBorder),this.clearSelectorLayer(),this.commandHandler.hasSelection()){if(1===r.nodes.length&&0===r.connectors.length&&(r.rotateAngle=r.nodes[0].rotateAngle,r.pivot=r.nodes[0].pivot),r.wrapper.measure(n),r.wrapper.arrange(r.wrapper.desiredSize),r.width=r.wrapper.actualSize.width,r.height=r.wrapper.actualSize.height,r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY,0!==r.rotateAngle){for(var s=0,a=r.nodes;s<a.length;s++){var l=a[s];l.offsetX=l.wrapper.offsetX,l.offsetY=l.wrapper.offsetY}for(var h=0,c=r.connectors;h<c.length;h++)c[h]}var d;this.spatialSearch.getPageBounds();d=Fv(this.element.id);var p;if(p=Uv(this.element.id),r.thumbsConstraints=Sp.Default,r.annotation?this.updateThumbConstraints([r.annotation],r):(this.updateThumbConstraints(r.nodes,r),this.updateThumbConstraints(r.connectors,r,!0)),r.annotation)this.renderSelectorForAnnotation(r,d);else if(r.nodes.length+r.connectors.length===1){if(r.nodes[0]instanceof Lv){var u=r.nodes[0];Yg(this,u)&&(e||"UmlClassifier"===u.shape.type||u.parentId&&this.nameTable[u.parentId]&&"UmlClassifier"===this.nameTable[u.parentId].shape.type||((!u.container||"Canvas"!==u.container.type&&"Grid"!==u.container.type)&&(r.nodes[0].constraints&=~(bp.Rotate|bp.HideThumbs)),r.thumbsConstraints&=~Sp.Rotate));var f=!!e||!!(u.constraints&bp.HideThumbs),g=!!("SwimLane"===u.shape.type||u.isLane||u.isPhase||e);this.diagramRenderer.renderResizeHandle(r.wrapper.children[0],d,r.thumbsConstraints,this.scroller.currentZoom,r.constraints,this.scroller.transform,void 0,ig(u),f,g)}else if(r.connectors[0]instanceof Gf&&Eg(this.diagramRenderer.rendererActions)){var m=r.connectors[0];this.diagramRenderer.renderEndPointHandle(m,d,r.thumbsConstraints,r.constraints,this.scroller.transform,void 0!==m.sourceWrapper,void 0!==m.targetWrapper,!(!this.connectorEditingToolModule||!og(m)))}}else this.diagramRenderer.renderResizeHandle(r.wrapper,d,r.thumbsConstraints,this.scroller.currentZoom,r.constraints,this.scroller.transform,void 0,ig(r));r.annotation||this.currentSymbol||this.diagramRenderer.renderUserHandler(r,d,this.scroller.transform,p)}this.isProtectedOnChange=i},e.prototype.updateSelector=function(){var t=new Wd,e=this.selectedItems,i=e.constraints;if(this.diagramActions&Ip.ToolAction||1!==this.selectedItems.nodes.length||(this.selectedItems.rotateAngle=this.selectedItems.nodes[0].rotateAngle,this.selectedItems.wrapper.rotateAngle=this.selectedItems.nodes[0].rotateAngle),void 0!==this.selectedItems&&(this.clearSelectorLayer(),null!==e.wrapper&&e.wrapper.children&&e.wrapper.children.length)){if(e.wrapper.measure(t),e.wrapper.arrange(e.wrapper.desiredSize),0!==e.rotateAngle||e.rotateAngle!==e.wrapper.prevRotateAngle)for(var n=0,r=e.nodes;n<r.length;n++){var o=r[n];o.offsetX=o.wrapper.offsetX,o.offsetY=o.wrapper.offsetY}e.width=e.wrapper.actualSize.width,e.height=e.wrapper.actualSize.height,e.offsetX=e.wrapper.offsetX,e.offsetY=e.wrapper.offsetY;var s;s=Fv(this.element.id);var a;a=Uv(this.element.id);var l=this.eventHandler.canHideResizers();if(e.thumbsConstraints=Sp.Default,e.annotation?this.updateThumbConstraints([e.annotation],e):(this.updateThumbConstraints(e.nodes,e),this.updateThumbConstraints(e.connectors,e,!0)),this.selectedItems.constraints&mp.UserHandle&&!e.annotation&&!this.currentSymbol&&this.diagramRenderer.renderUserHandler(e,s,this.scroller.transform,a),e.annotation)this.renderSelectorForAnnotation(e,s);else if(e.nodes.length+e.connectors.length===1){if(e.connectors[0]instanceof Gf&&Eg(this.diagramRenderer.rendererActions)){var h=e.connectors[0];this.diagramRenderer.renderEndPointHandle(h,s,e.thumbsConstraints,i,this.scroller.transform,void 0!==h.sourceWrapper,void 0!==h.targetWrapper,!(!this.connectorEditingToolModule||!og(h)))}else if(e.nodes[0]instanceof Lv){var c=e.nodes[0];Yg(this,e.nodes[0])&&("UmlClassifier"===c.shape.type||c.parentId&&this.nameTable[c.parentId]&&"UmlClassifier"===this.nameTable[c.parentId].shape.type||((!c.container||"Canvas"!==c.container.type&&"Grid"!==c.container.type)&&(e.nodes[0].constraints&=~(bp.HideThumbs|bp.Rotate)),e.thumbsConstraints&=~Sp.Rotate));var d=!("SwimLane"!==c.shape.type&&!c.isLane&&!c.isPhase);this.diagramRenderer.renderResizeHandle(e.wrapper.children[0],s,e.thumbsConstraints,this.scroller.currentZoom,e.constraints,this.scroller.transform,l,ig(e.nodes[0]),!!(e.nodes[0].constraints&bp.HideThumbs),d)}}else this.diagramActions&Ip.Interactions&&(this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions|Tp.PreventRenderSelector),this.diagramRenderer.renderResizeHandle(e.wrapper,s,e.thumbsConstraints,this.scroller.currentZoom,e.constraints,this.scroller.transform,l,ig(e)),this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions&~Tp.PreventRenderSelector}},e.prototype.renderSelectorForAnnotation=function(t,e){this.diagramRenderer.renderResizeHandle(t.wrapper.children[0],e,t.thumbsConstraints,this.scroller.currentZoom,t.constraints,this.scroller.transform,void 0,ig(t.annotation))},e.prototype.drawSelectionRectangle=function(t,e,i,n){this.clearSelectorLayer(),this.diagramRenderer.drawSelectionRectangle(t,e,i,n,this.adornerLayer,this.scroller.transform)},e.prototype.renderHighlighter=function(t){var e=Vv(this.element.id);this.diagramRenderer.renderHighlighter(t,e,this.scroller.transform)},e.prototype.clearHighlighter=function(){var t=Vv(this.element.id),e=t.getElementById(t.id+"_highlighter");e&&e.parentNode.removeChild(e)},e.prototype.getNodesConnectors=function(t){for(var e=0;e<this.nodes.length;e++){var i=this.nodes[e];t.push(i)}for(e=0;e<this.connectors.length;e++){var n=this.connectors[e];t.push(n)}return t},e.prototype.clearSelectorLayer=function(){var t=Vv(this.element.id);if(this.currentSymbol){var e=t.getElementById("borderRect_symbol");e&&e.parentNode.removeChild(e)}else{var i=t.getElementById(this.adornerLayer.id+"_selected_region");i&&i.parentNode.removeChild(i),this.clearHighlighter();for(var n=Fv(this.element.id).childNodes,r=void 0,o=n.length;o>0;o--)(r=n[o-1]).parentNode.removeChild(r);var s=Uv(this.element.id).childNodes,a=void 0;for(a=s.length;a>0;a--)s[a-1].parentNode.removeChild(s[a-1])}},e.prototype.getWrapper=function(t,e){var i;e=t.id+"_"+e;for(var n=t instanceof tu?t:this.getPortContainer(this.nameTable[t.id]),r=0;r<n.children.length;r++)e===n.children[r].id&&(i=n.children[r]);return i},e.prototype.getEndNodeWrapper=function(t,e,i){if("Bpmn"===t.shape.type&&t.wrapper.children[0]instanceof tu){if(!$()&&"Activity"===t.shape.shape||$()&&"Activity"===t.shadow.bpmnShape){if(i&&"Transaction"===t.shape.activity.subProcess.type&&e.sourcePortID){var n=e.sourcePortID,r=t.wrapper.children[0].children[0].children[2];if(r.children)for(var o=0,s=r.children;o<s.length;o++){var a=s[o];if(a.visible&&a.id===t.id+"_"+n)return a.children[0]}}return t.wrapper.children[0].children[0].children[0]}return t.wrapper.children[0].children[0]}return this.containsMargin(t.wrapper.children[0])||t.children?t.wrapper:t.wrapper.children[0]},e.prototype.containsMargin=function(t){return t.margin&&(0!==t.margin.left||0!==t.margin.top||0!==t.margin.right||0!==t.margin.bottom)},e.prototype.focusOutEdit=function(){this.endEdit()},e.prototype.endEditCommand=function(){this.endEdit(),this.textEditing=!1},e.prototype.endEdit=function(){return tS(this,void 0,void 0,function(){var t,e,i,n,r,o,s,a,l,h,c,d,p,u,f,g,m,y,v,b,w,S,x;return eS(this,function(C){switch(C.label){case 0:return this.diagramActions&Ip.TextEdit?(t=void 0,e=void 0,i={},this.enableServerDataBinding(!1),$()&&(this.canEnableBlazorObject=!0),n=document.getElementById(this.element.id+"_editBox"),$()&&n||!$()?(r=n.value,ee.remove(n,"input",this.eventHandler.inputChange),ee.remove(n,"focusout",this.focusOutEdit),o=document.getElementById(this.element.id+"_editTextBoxDiv"),s=void 0,s=this.nameTable[this.activeLabel.parentId],a=vy(s,this.activeLabel.id),l={oldValue:this.activeLabel.text,newValue:r,cancel:!1,element:s,annotation:a},$()&&this.textEdit&&(l=this.getBlazorTextEditArgs(l)),h=!1,o.parentNode.removeChild(o),c=void 0,this.bpmnModule?(s=this.bpmnModule.isBpmnTextAnnotation(this.activeLabel,this),c=this.bpmnModule.getTextAnnotationWrapper(s,this.activeLabel.id),(h=!!s)?o.textContent===r&&r===this.activeLabel.text?[3,4]:$()?[4,this.triggerEvent(kp.textEdit,l)]:[3,2]:[3,4]):[3,4]):[3,9]):[3,9];case 1:return l=C.sent()||l,[3,3];case 2:this.triggerEvent(kp.textEdit,l),C.label=3;case 3:l.cancel||this.bpmnModule.updateTextAnnotationContent(s,this.activeLabel,r,this),C.label=4;case 4:return h?[3,8]:(s=this.nameTable[this.activeLabel.parentId],!(d=vy(s,this.activeLabel.id))||d instanceof rv?t=$()&&"Text"===s.shape.type?{shape:{textContent:s.shape.content}}:{shape:{content:s.shape.content}}:(u=Sy(s,d.id,!0),i[u]={content:d.content},t={annotations:i}),(p=this.eventHandler.isAddTextNode(s,!0))||o.textContent===r&&r===this.activeLabel.text?[3,7]:$()?[4,this.triggerEvent(kp.textEdit,l)]:[3,6]);case 5:return l=C.sent()||l,[3,7];case 6:this.triggerEvent(kp.textEdit,l),C.label=7;case 7:c||(c=this.getWrapper(s.wrapper,this.activeLabel.id)),d.content===r||l.cancel||(s.parentId&&"UmlClassifier"===this.nameTable[s.parentId].shape.type&&-1===r.indexOf("+")&&-1===r.indexOf("-")&&-1===r.indexOf("#")&&-1===r.indexOf("~")&&-1===s.id.indexOf("_umlClass_header")&&(r=" + "+r),(s.isLane||s.isPhase)&&this.protectPropertyChange(!0),d instanceof rv?e=$()&&"Text"===s.shape.type?{shape:{textContent:r}}:{shape:{content:r}}:(u=Sy(s,d.id,!0),(f={})[u]={content:r},e={annotations:f}),(g=this.getIndex(s,s.id))&&((m={})[g]=t,(y={})[g]=e,Iy(s)===Lv?this.onPropertyChanged({nodes:y},{nodes:m}):this.onPropertyChanged({connectors:y},{connectors:m})),this.protectPropertyChange(!0),$()&&"Text"===s.shape.type?s.shape.textContent=r:d.content=r,this.protectPropertyChange(!1),this.updateSelector(),(s.isLane||s.isPhase)&&this.protectPropertyChange(!1)),p&&(this.removeObjectsFromLayer(s),this.removeFromAQuad(s),delete this.nameTable[this.activeLabel.parentId],""!==r&&(this.clearSelection(),v=gb(s),s=this.add(v),this.updateDiagramObject(s),this.commandHandler.oldSelectedObjects=ky(this),this.commandHandler.select(this.nameTable[s.id]),this.commandHandler.updateBlazorSelector())),C.label=8;case 8:if(this.selectedItems.nodes.length){if(b=this.nameTable[this.activeLabel.parentId],(w=this.nameTable[b.parentId])&&"SwimLane"===w.shape.type||"SwimLane"===b.shape.type)if("LaneHeaderParent","PhaseHeaderParent","SwimLane"===b.shape.type&&(w=this.nameTable[this.activeLabel.parentId],b=s),b.isLane||b.isPhase)for(S=b.isLane?w.shape.lanes:w.shape.phases,x=0;x<S.length;x++)S[x].id===(b.LaneHeaderParent||b.PhaseHeaderParent)&&(S[x].header.annotation.content=b.annotations[0].content);else b.isHeader&&w.shape.hasHeader&&(w.shape.header.annotation.content=b.annotations[0].content);this.dataBind()}c.visible=!0,this.updateDiagramObject(s),this.diagramActions=this.diagramActions&~Ip.TextEdit,this.activeLabel.isGroup&&this.endGroupAction(),this.activeLabel={id:"",parentId:"",isGroup:!1,text:void 0},this.commandHandler.getBlazorOldValues(),$()&&(this.canEnableBlazorObject=!1),this.enableServerDataBinding(!0),C.label=9;case 9:return[2]}})})},e.prototype.getIndex=function(t,e){for(var i=Iy(t)===Lv?this.nodes:this.connectors,n=0;n<i.length;n++)if(i[n].id.toString()===e.toString())return n.toString();return null},e.prototype.getBlazorTextEditArgs=function(t){var e=Iy(t.element)===Gf?{connector:jy(t.element)}:{node:jy(t.element)},i={};return e.node?"Text"===e.node.shape.type?i.textNode=t.element.shape:i.nodeAnnotation=t.element.annotations[0]:i.connectorAnnotation=t.element.annotations[0],t={oldValue:t.oldValue,newValue:t.newValue,cancel:t.cancel,element:e,annotation:i}},e.prototype.canLogChange=function(){return!(!(this.diagramActions&Ip.Render)||this.diagramActions&Ip.ToolAction||this.diagramActions&Ip.UndoRedo||this.diagramActions&Ip.PublicMethod)},e.prototype.modelChanged=function(t,e){return!!(t.connectors||e.connectors||t.nodes||e.connectors||t.pageSettings||e.pageSettings||t.bridgeDirection||e.bridgeDirection)},e.prototype.resetDiagramActions=function(t){var e=!!t;this.diagramActions&Ip.UndoRedo&&(!e||t===Ip.UndoRedo)&&(this.diagramActions=this.diagramActions&~Ip.UndoRedo),this.diagramActions&Ip.PublicMethod&&(!e||t===Ip.PublicMethod)&&(this.diagramActions=this.diagramActions&~Ip.PublicMethod)},e.prototype.removeNode=function(t){if(this.removeObjectsFromLayer(t),this.removeFromAQuad(this.nameTable[t.id]),delete this.nameTable[t.id],t.children&&delete this.groupTable[t.id],$())for(var e=0;e<this.nodes.length;e++)t.id===this.nodes[e].id&&this.UpdateBlazorDiagramModel(t,"Node",e);this.UpdateBlazorDiagramModel(t,"Node",this.nodes.indexOf(t)),this.nodes.splice(this.nodes.indexOf(t),1)},e.prototype.deleteGroup=function(t){var e=[];t.children&&(e=this.commandHandler.getChildren(t,[])),this.UpdateBlazorDiagramModelCollection(t);for(var i=0,n=e;i<n.length;i++){var r=n[i];this.nameTable[r.id]&&this.remove(r)}},e.prototype.updateObject=function(t,e,i){if(!(this.diagramActions&Ip.ToolAction)){var n=t.wrapper.children[0].bounds;if(!this.commandHandler.checkBoundaryConstraints(void 0,void 0,n))if(t instanceof Lv){for(var r=e,o=0,s=Object.keys(i);o<s.length;o++){switch(h=s[o]){case"width":t.width=r.width;break;case"height":t.height=r.height;break;case"offsetX":t.offsetX=r.offsetX;break;case"offsetY":t.offsetY=r.offsetY;break;case"rotateAngle":t.rotateAngle=r.rotateAngle}}this.nodePropertyChange(t,i,e)}else{for(var a=0,l=Object.keys(i);a<l.length;a++){var h=l[a],c=e,d=t.sourcePoint,p=t.targetPoint;switch(h){case"sourcePoint":d.x=c.sourcePoint.x||d.x,d.y=c.sourcePoint.y||d.y;break;case"targetPoint":p.x=c.targetPoint.x||p.x,p.y=c.targetPoint.y||p.y}}this.connectorPropertyChange(t,i,e)}}},e.prototype.nodePropertyChangeExtend=function(t,e,i,n){return void 0!==i.style&&"Bpmn"!==t.shape.type&&(sy(i.style,t.wrapper.children[0]),n=!0),void 0!==i.shadow&&(this.updateShadow(t.shadow,i.shadow),n=!0),void 0!==i.constraints&&(e.constraints&bp.Select&&!(i.constraints&bp.Select)&&aw(this,t)?this.clearSelection():(this.updateThumbConstraints(this.selectedItems.nodes,this.selectedItems),this.updateSelector(),n=!0)),this.swimLaneNodePropertyChange(t,e,i,n),n},e.prototype.swimLaneNodePropertyChange=function(t,e,i,n){if("SwimLane"===t.shape.type&&!this.currentSymbol){if(e.shape){var r=i.shape,o=t.shape,s="Horizontal"===o.orientation,a=o.padding,l=e.shape,h=t.wrapper.children[0],c=void 0,d=void 0,p=void 0;if(l.lanes||l.phases){if(l.lanes)for(var u=0,f=Object.keys(r.lanes);u<f.length;u++){var g=f[u],m=Number(g),y=l.lanes[m],v=void 0,b=r.lanes[m];if(b&&b.header&&(p=o.lanes[m].header.id,c=y.header,d=b.header,this.nodePropertyChange(this.nameTable[p],c,d)),y.children)for(var w=0,S=Object.keys(y.children);w<S.length;w++){var x=S[w];p=o.lanes[m].children[Number(x)].id;var C=this.nameTable[p];c=y.children[Number(x)],d=b.children[Number(x)],this.nodePropertyChange(C,c,d)}y.width&&!s&&(v=o.phases&&o.phaseSize?m+1:m,h.updateColumnWidth(v,b.width,!0,a),this.updateDiagramElementQuad()),y.height&&s&&(v=o.header&&o.hasHeader?m+1:m,v+=o.phases&&o.phaseSize?1:0,h.updateRowHeight(v,b.height,!0,a),this.updateDiagramElementQuad())}if(r.phases)for(var P=0,O=Object.keys(r.phases);P<O.length;P++){var E=O[P],L=(m=Number(E),r.phases[m]),I=void 0,T=o.header&&o.hasHeader?1:0;if(L&&L.header&&(p=o.phases[m].header.id,c=l.phases[m].header,d=L.header,this.nodePropertyChange(this.nameTable[p],c,d)),L.offset){if(0===m)I=L.offset;else{var A=o.phases[m-1];(I=L.offset-A.offset)<=0&&(I=L.offset)}s?(h.updateColumnWidth(m,I,!0,a),bm(t,this,h.rows[T].cells[m],m)):h.updateRowHeight(T+m,I,!0,a)}}}if(void 0!==r.phaseSize&&o.phases.length)if(0===r.phaseSize||0===l.phaseSize)if(l.phaseSize)s?(h.removeRow(o.header&&o.hasHeader?1:0),t.height=t.wrapper.height=h.height):(o.header&&o.hasHeader&&(h.rows[0].cells[1].children=h.rows[0].cells[0].children,h.rows[0].cells[1].columnSpan=h.rows[0].cells[0].columnSpan-1,h.rows[0].cells[0].children=[]),h.removeColumn(0));else{if(s){var B=new Vg;B.height=r.phaseSize,h.addRow(o.header&&o.hasHeader?1:0,B,!0),t.height=t.wrapper.height+=r.phaseSize}else{var k=new Fg;k.width=r.phaseSize,h.addColumn(0,k,!0),o.header&&o.hasHeader&&(h.rows[0].cells[0].children=h.rows[0].cells[1].children,h.rows[0].cells[1].children=[],h.rows[0].cells[1].columnSpan=1,h.rows[0].cells[1].minWidth=void 0,h.rows[0].cells[0].columnSpan=o.lanes.length+1)}for(var M=0;M<o.phases.length;M++)""===o.phases[M].id&&(o.phases[M].id=cb()),nm(h,this,t,o.header&&o.hasHeader?1:0,s,M)}else s?h.updateRowHeight(o.header&&o.hasHeader?1:0,r.phaseSize,!1):h.updateColumnWidth(0,r.phaseSize,!1);if(o.header&&o.hasHeader&&l.header){var D=h.rows[0].cells[0].children[0].id,R=this.nameTable[D];this.nodePropertyChange(R,l.header,r.header)}t.height=t.wrapper.height=h.height,t.width=t.wrapper.width=h.width}else if(e.constraints){var z=e.constraints&bp.Select,j=i.constraints&bp.Select;if(z!==j){r=t.shape;(R=this.nameTable[t.id+r.header.id]).constraints=j?R.constraints|bp.Select:R.constraints&~bp.Select;var N=void 0;if(r.phaseSize>0)for(var H=0;H<r.phases.length;H++)(N=this.nameTable[t.id+r.phases[H].id+"_header"]).constraints=j?N.constraints|bp.Select:N.constraints&~bp.Select;var _=void 0,V=void 0,F=r.phases.length||1;for(H=0;H<r.lanes.length;H++)for(var W=0;W<F;W++)(_=this.nameTable[t.id+r.lanes[H].id+W]).constraints=j?_.constraints|bp.Select:_.constraints&~bp.Select,0===W&&((V=this.nameTable[t.id+r.lanes[H].id+"_"+W+"_header"]).constraints=j?V.constraints|bp.Select:V.constraints&~bp.Select)}}n=!0}return n},e.prototype.insertValue=function(t,e){for(var i,n=e?this.oldNodeObjects:this.oldConnectorObjects,r=0;r<n.length;r++)n[r].id===t.id&&(i=!0);i||(e?this.oldNodeObjects.push(t):this.oldConnectorObjects.push(t))},e.prototype.nodePropertyChange=function(t,e,i,n,r,o){if(this.canEnableBlazorObject){var s=gb(t);this.insertValue(s,!0)}var a,l=t.wrapper.outerBounds,h=t.wrapper.bounds,c=!1;if(void 0!==i.width&&(t.children?t.container?t.wrapper.width=i.width:this.scaleObject(t,i.width,!0):(t.wrapper.children[0].width=i.width,a=!0,c=!0)),void 0!==i.height&&(t.children?t.container?t.wrapper.height=i.height:this.scaleObject(t,i.height,!1):(t.wrapper.children[0].height=i.height,a=!0,c=!0)),a=this.nodePropertyChangeExtend(t,e,i,a),void 0!==i.constraints&&ag(e)!==ag(i)&&(t.wrapper.children[0].shadow=ag(t)?t.shadow:null),void 0!==i.offsetX){if("None"!==t.wrapper.flip){if(t.offsetX!==t.wrapper.offsetX&&void 0!==e.offsetX){var d=i.offsetX-e.offsetX;t.wrapper.offsetX=t.wrapper.offsetX+d,this.updateFlipOffset(t.wrapper,d,0,t.wrapper.flip)}}else t.wrapper.offsetX=i.offsetX;a=!0,c=!0}if(void 0!==i.offsetY){if("None"!==t.wrapper.flip){if(t.offsetY!==t.wrapper.offsetY&&void 0!==e.offsetY){var p=i.offsetY-e.offsetY;t.wrapper.offsetY=t.wrapper.offsetY+p,this.updateFlipOffset(t.wrapper,0,p,t.wrapper.flip)}}else t.wrapper.offsetY=i.offsetY;a=!0,c=!0}if(void 0!==i.pivot&&(t.wrapper.pivot=i.pivot,a=!0),void 0!==i.minWidth&&(t.wrapper.minWidth=t.wrapper.children[0].minWidth=i.minWidth,a=!0,c=!0),void 0!==i.minHeight&&(t.wrapper.minHeight=t.wrapper.children[0].minHeight=i.minHeight,a=!0,c=!0),void 0!==i.maxWidth&&(t.wrapper.maxWidth=i.maxWidth,a=!0,c=!0),void 0!==i.maxHeight&&(t.wrapper.maxHeight=i.maxHeight,a=!0,c=!0),void 0!==i.flip)if(t.wrapper.flip=i.flip,a=!0,c=!0,t.wrapper.elementActions&wp.ElementIsGroup){if(By(t.wrapper,t.offsetX,t.offsetY,this,i.flip),t&&t.children)for(var u=0,f=t.children;u<f.length;u++){var g=f[u],m=this.nameTable[g];m.wrapper.flip=i.flip,this.updatePorts(m,i.flip)}}else t.wrapper.children[0].flip=i.flip,this.updatePorts(t,i.flip);if(void 0!==i.rotateAngle&&(t.children&&r&&this.commandHandler.rotateObjects(t,[t],t.rotateAngle-t.wrapper.rotateAngle,{x:t.offsetX,y:t.offsetY},!1),t.wrapper.rotateAngle=i.rotateAngle,a=!0,c=!0),void 0!==i.backgroundColor&&(t.wrapper.style.fill=i.backgroundColor),void 0!==i.visible&&this.updateElementVisibility(t.wrapper,t,t.visible),void 0!==i.shape&&"Bpmn"!==t.shape.type&&(a=!0,hy(i,t,e,this),c=!0),i.margin&&(a=!0,this.updateMargin(t,i),c=!0),(void 0!==i.shape&&void 0===i.shape.type||void 0!==i.width||void 0!==i.height||void 0!==i.style)&&"Bpmn"===t.shape.type&&this.bpmnModule&&(a=!0,c=!0,this.bpmnModule.updateBPMN(i,e,t,this)),"UmlActivity"===t.shape.type&&(!$()&&"FinalNode"===t.shape.shape||$()&&"FinalNode"===t.shape.umlActivityShape)&&(a=!0,c=!0,this.updateUMLActivity(i,e,t,this)),(t.shape&&"UmlClassifier"===t.shape.type||t.parentId&&this.nameTable[t.parentId]&&"UmlClassifier"===this.nameTable[t.parentId].shape.type)&&(a=!0,c=!0),void 0!==i.ports)for(var y=0,v=Object.keys(i.ports);y<v.length;y++){var b=v[y],w=Number(b);a=!0;var S=i.ports[b],x=t.ports[w];this.updatePort(S,x,t.wrapper),c=!0}if(void 0!==i.annotation||void 0!==i.annotations||void 0!==i.width)for(var C=0,P=Object.keys(i.annotations||t.annotations);C<P.length;C++){b=P[C],w=Number(b);a=!0;S=void 0;S=i.annotation?i.annotation:i.annotations?i.annotations[b]:t.annotations;var O=t.annotations[w];if(O){var E=!!t.width;this.updateAnnotation(S,O,t.wrapper,t,E);var L=this.nameTable[t.parentId];if(L&&"SwimLane"===L.shape.type){if(t.isLane||t.isPhase)for(var I=t.isLane?L.shape.lanes:L.shape.phases,T=0;T<I.length;T++)if(I[T].id===(t.LaneHeaderParent||t.PhaseHeaderParent)){I[T].header.annotation.content=t.annotations[0].content,I[T].header.annotation.style=t.annotations[0].style;break}}}}if(void 0===i.expandIcon&&void 0===i.collapseIcon&&void 0===i.isExpanded||(this.updateIcon(t),this.updateDefaultLayoutIcons(t),void 0!==i.isExpanded&&this.commandHandler.expandNode(t,this),a=!0),void 0!==i.tooltip&&this.updateTooltip(t,i),a){if(void 0!==this.bpmnModule&&this.bpmnModule.updateTextAnnotationProp(t,{offsetX:e.offsetX||t.offsetX,offsetY:e.offsetY||t.offsetY},this),this.checkSelectedItem(t)&&t.wrapper.children[0]instanceof Qp&&t.wrapper.children[0].refreshTextElement(),t.wrapper.measure(new Wd(t.wrapper.bounds.width,t.wrapper.bounds.height),t.id,this.onLoadImageSize.bind(this)),t.wrapper.arrange(t.wrapper.desiredSize),this.updateObject(t,e,i),!("SwimLane"!==t.shape.type||this.currentSymbol||this.diagramActions&Ip.ToolAction)){wm(this,t);var A=t.wrapper.children[0],B=t.shape,k=A.columnDefinitions().length;if("Horizontal"===B.orientation){w=B.header&&B.hasHeader?1:0;bm(t,this,A.rows[w].cells[k-1],k-1)}t.wrapper.measure(new Wd(t.wrapper.bounds.width,t.wrapper.bounds.height)),t.wrapper.arrange(t.wrapper.desiredSize)}this.diagramActions&Ip.ToolAction&&!(this.diagramActions&Ip.UndoRedo)||this.checkSelectedItem(t)&&this.updateSelector(),!1===l.equals(l,t.wrapper.outerBounds)&&this.updateQuad(t),n?t&&t.visible&&t.outEdges&&this.updateIconVisibility(t,0!==t.outEdges.length):this.commandHandler.connectorSegmentChange(t,h,void 0!==i.rotateAngle),void 0!==this.bpmnModule&&this.bpmnModule.updateDocks(t,this),this.updateGroupOffset(t);var M=[];if(0===(M=M.concat(this.selectedItems.nodes,this.selectedItems.connectors)).length&&t.parentId&&this.nameTable[t.parentId]){var D=this.nameTable[t.parentId];D.wrapper.measure(new Wd(D.wrapper.width,t.wrapper.height)),D.wrapper.arrange(D.wrapper.desiredSize),D.offsetX=D.wrapper.offsetX,D.offsetY=D.wrapper.offsetY}if(!1===h.equals(h,t.wrapper.bounds)&&(this.updateGroupSize(t),t.children&&this.updateGroupOffset(t)),"SwimLane"===t.shape.type&&!this.currentSymbol&&this.diagramActions&Ip.Render)fm(am(this,t.wrapper.children[0]),this);if(!this.preventNodesUpdate&&((!fg(this)||fg(this)&&this.scroller.oldCollectionObjects.indexOf(t.id)>-1)&&(this.diagramActions&Ip.PreventZIndexOnDragging?this.updateDiagramObject(t,!0):this.updateDiagramObject(t)),!n&&c&&(this.lineRoutingModule&&this.diagramActions&&this.constraints&xp.LineRouting&&"helper"!==t.id&&(this.diagramActions&Ip.ToolAction||this.lineRoutingModule.renderVirtualRegion(this,!0)),this.updateConnectorEdges(t),"helper"!==t.id&&!(this.diagramActions&Ip.ToolAction))))for(var R=this.spatialSearch.findObjects(t.wrapper.outerBounds),z=0;z<R.length;z++){var j=R[z];j instanceof Gf&&this.connectorPropertyChange(R[z],{},{sourceID:j.sourceID,targetID:j.targetID,sourcePortID:j.sourcePortID,targetPortID:j.targetPortID,sourcePoint:j.sourcePoint,targetPoint:j.targetPoint})}"New"!==t.status&&this.diagramActions&&(t.status="Update")}if(!o){var N=t,H={element:N,cause:this.diagramActions,oldValue:e,newValue:i};$()&&this.propertyChange&&(H.element={node:jy(N)},H.oldValue={node:jy(e)},H.newValue={node:jy(i)}),this.triggerEvent(kp.propertyChange,H)}},e.prototype.updatePorts=function(t,e){if(t&&t.ports.length>0)for(var i=0,n=Object.keys(t.ports);i<n.length;i++){var r=n[i],o=Number(r),s=t.ports[o],a=this.getWrapper(t.wrapper,s.id);(a=Ay(a,e,s)).relativeMode="Point",a.measure(new Wd(a.width,a.height)),a.arrange(a.desiredSize)}},e.prototype.updateFlipOffset=function(t,e,i,n){if(t.hasChildren())for(var r=0,o=t.children;r<o.length;r++){var s=o[r];"Horizontal"!==n&&"Both"!==n||(s.flipOffset.x=s.flipOffset.x+e),"Vertical"!==n&&"Both"!==n||(s.flipOffset.y=s.flipOffset.y+i),(s instanceof tu||s instanceof Kp)&&this.updateFlipOffset(s,e,i,n)}},e.prototype.updateUMLActivity=function(t,e,i,n){if(void 0!==t.width||void 0!==t.height){var r=i.wrapper.children[0].children[0];r.width=t.width,r.height=t.height;var o=i.wrapper.children[0].children[1];o.width=t.width/1.5,o.height=t.height/1.5}},e.prototype.updateConnectorProperties=function(t){if(this.preventConnectorsUpdate){-1===this.selectionConnectorsList.indexOf(t)&&this.selectionConnectorsList.push(t)}else{var e={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint,sourceID:t.sourceID,targetID:t.targetID,sourcePortID:t.sourcePortID,targetPortID:t.targetPortID};this.connectorPropertyChange(t,{},e,void 0,!0)}},e.prototype.updateConnectorEdges=function(t){if(t.inEdges.length>0)for(var e=0;e<t.inEdges.length;e++)this.updateConnectorProperties(this.nameTable[t.inEdges[e]]);if(t.outEdges.length>0)for(var i=0;i<t.outEdges.length;i++)this.updateConnectorProperties(this.nameTable[t.outEdges[i]]);t.parentId&&this.nameTable[t.parentId]&&this.updateConnectorEdges(this.nameTable[t.parentId])},e.prototype.connectorProprtyChangeExtend=function(t,e,i,n){return void 0!==i.type&&i.type!==e.type&&t.segments.length>0&&void 0===i.segments&&(t.segments=[]),void 0!==i.shape&&void 0!==t.shape&&t.shape&&"Bpmn"===t.shape.type&&this.bpmnModule&&this.bpmnModule.updateBPMNConnector(t,e,i,this),void 0!==t.constraints?(this.updateThumbConstraints(this.selectedItems.connectors,this.selectedItems),!0):n},e.prototype.connectorPropertyChange=function(t,e,i,n,r){if(this.canEnableBlazorObject){var o=gb(t);this.insertValue(o,!1)}var s,a,l,h,c,d=t.wrapper.bounds,p=!1,u=[];if(p=this.connectorProprtyChangeExtend(t,e,i,p),void 0!==i.visible&&this.updateElementVisibility(t.wrapper,t,t.visible),void 0!==i.sourcePoint||void 0!==i.targetPoint||void 0!==i.sourceID||void 0!==i.targetID||void 0!==i.targetPadding||void 0!==i.sourcePortID||void 0!==i.targetPortID||void 0!==i.sourcePadding||void 0!==i.type||void 0!==i.segments||void 0!==i.flip){if(void 0!==i.sourceID&&i.sourceID!==e.sourceID||i.sourcePortID){var f=this.nameTable[t.sourceID];if(a=this.findInOutConnectPorts(f,!1),(!f||cg(f)||""!==t.sourcePortID&&dg(a))&&(t.sourceWrapper=f?this.getEndNodeWrapper(f,t,!0):void 0,t.sourcePortID&&void 0===i.sourcePortID&&(t.sourcePortWrapper=f?this.getWrapper(f.wrapper,t.sourcePortID):void 0),this.removePortEdges(this.nameTable[e.sourceID]||f,e.sourcePortID||t.sourcePortID,t.id,!1)),void 0!==i.sourceID&&void 0!==e.sourceID&&""!==e.sourceID){var g=this.nameTable[e.sourceID];void 0!==g&&g.outEdges&&-1!==g.outEdges.indexOf(t.id)&&py(g.outEdges,t.id)}this.updateEdges(t)}if(void 0!==i.targetID&&i.targetID!==e.targetID){var m=this.nameTable[i.targetID];if(s=this.findInOutConnectPorts(m,!0),(!m||lg(m)||""!==t.targetPortID&&hg(s))&&(t.targetWrapper=m?this.getEndNodeWrapper(m,t,!1):void 0,t.targetPortID&&void 0===i.targetPortID&&(t.targetPortWrapper=m?this.getWrapper(m.wrapper,t.targetPortID):void 0),this.removePortEdges(this.nameTable[e.targetID]||m,e.targetPortID||t.targetPortID,t.id,!0)),void 0!==e&&void 0!==e.targetID&&""!==e.targetID){var y=this.nameTable[e.targetID];void 0!==y&&y.inEdges&&-1!==y.inEdges.indexOf(t.id)&&py(y.inEdges,t.id)}this.updateEdges(t)}if(void 0!==i.sourcePortID&&i.sourcePortID!==e.sourcePortID)t.sourceID&&this.nameTable[t.sourceID]&&(l=this.nameTable[t.sourceID].wrapper),(!(f=this.nameTable[t.sourceID])||cg(f)||""!==t.sourcePortID&&dg(a))&&(t.sourcePortWrapper=l?this.getWrapper(l,i.sourcePortID):void 0);if(void 0!==i.targetPortID&&i.targetPortID!==e.targetPortID){m=this.nameTable[t.targetID];t.targetID&&this.nameTable[t.targetID]&&(h=this.nameTable[t.targetID].wrapper),(!m||lg(m)||""!==t.targetPortID&&hg(s))&&(t.targetPortWrapper=h?this.getWrapper(h,i.targetPortID):void 0)}void 0!==i.flip&&(t.flip=i.flip,Ty(t)),"Orthogonal"===t.type&&this.lineRoutingModule&&this.diagramActions&&this.constraints&xp.LineRouting&&!(this.diagramActions&Ip.ToolAction)&&(this.lineRoutingModule.renderVirtualRegion(this,!0),this.lineRoutingModule.refreshConnectorSegments(this,t,!1)),u=this.getPoints(t)}void 0!==i.style&&sy(i.style,t.wrapper.children[0]),(u.length>0||void 0!==i.sourceDecorator||void 0!==i.targetDecorator&&(-1!==(c=Object.keys(i.targetDecorator)).indexOf("shape")||-1!==c.indexOf("pathData")||-1!==c.indexOf("width")||-1!==c.indexOf("height"))||void 0!==i.cornerRadius)&&(uy(t,u.length>0?u:t.intermediatePoints,this.diagramActions),void 0!==i.type&&(p=!0),u.length>0&&(t.wrapper.measure(new Wd(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize),this.updateConnectorAnnotation(t),this.updateObject(t,e,i))),(i.sourcePoint||i.targetPoint||i.segments)&&this.diagramActions===Ip.Render&&(p=!0),"Bpmn"===t.shape.type&&"Default"===t.shape.sequence&&this.commandHandler.updatePathElementOffset(t),n||this.updateBridging(),this.updateAnnotations(i,t),t.wrapper.measure(new Wd(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize),!1===d.equals(d,t.wrapper.bounds)&&(this.updateQuad(t),this.updateGroupSize(t)),!0!==p||!this.checkSelectedItem(t)||this.diagramActions&Ip.ToolAction&&!(this.diagramActions&Ip.UndoRedo)||this.updateSelector(),this.preventConnectorsUpdate||(!fg(this)||fg(this)&&this.scroller.oldCollectionObjects.indexOf(t.id)>-1)&&(this.diagramActions&Ip.PreventZIndexOnDragging?this.updateDiagramObject(t,!0):this.updateDiagramObject(t)),this.diagramActions&&"New"!==t.status&&(t.status="Update"),this.triggerPropertyChange(r,t,e,i)},e.prototype.removePortEdges=function(t,e,i,n){if(t)for(var r=0;r<t.ports.length;r++){var o=t.ports[r];if(o.id===e)py(n?o.inEdges:o.outEdges,i)}},e.prototype.getpropertyChangeArgs=function(t,e,i,n){return n.element={connector:jy(t)},n.oldValue={connector:jy(e)},n.newValue={connector:jy(i)},n},e.prototype.triggerPropertyChange=function(t,e,i,n){if(!t){var r=e,o={element:jy(r),cause:this.diagramActions,oldValue:jy(i),newValue:jy(n)};$()&&(o=this.getpropertyChangeArgs(r,i,n,o)),this.triggerEvent(kp.propertyChange,o)}},e.prototype.findInOutConnectPorts=function(t,e){var i={};return t&&(i=wy(t,e)),i},e.prototype.getPoints=function(t,e){return t.getConnectorPoints(t.type,e,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0)},e.prototype.updateNodeProperty=function(t,e,i){if(void 0===e)this.updateElementVisibility(t,this.nameTable[t.id],e);else{t.style.opacity=i;for(var n=0;n<t.children.length;n++)t.children[n]instanceof Kp&&this.updateNodeProperty(t.children[n],void 0,i),t.children[n].style.opacity=i}},e.prototype.checkSelectedItem=function(t){var e=this.selectedItems,i=!1,n=[];return(n=n.concat(e.nodes,e.connectors)).length>0&&t.id===n[n.length-1].id&&(i=!0),i},e.prototype.updateDiagramContainerVisibility=function(t,e){if(t instanceof Kp)for(var i=0;i<t.children.length;i++)this.updateDiagramContainerVisibility(t.children[i],e);t.visible=e},e.prototype.updateElementVisibility=function(t,e,i){if(void 0!==i){if(t.visible=i,e instanceof Lv){if(e.children)for(var n=0,r=e.children;n<r.length;n++){var o=r[n];this.updateElementVisibility(this.nameTable[o].wrapper,this.nameTable[o],i)}else t.children[0].visible=i,this.updateDiagramContainerVisibility(t.children[0],i),"Bpmn"===e.shape.type&&this.bpmnModule&&this.bpmnModule.updateElementVisibility(e,i,this);if(e.ports)for(var s=0,a=e.ports;s<a.length;s++){var l=a[s];if(l.visibility&fp.Visible)(g=this.getWrapper(t,l.id)).visible=i}if(e.annotations)for(var h=0,c=e.annotations;h<c.length;h++){var d=c[h];(g=this.getWrapper(t,d.id)).visible=i}}else for(var p=0;p<3;p++)t.children[p].visible=i;if(e.annotations)for(var u=0,f=e.annotations;u<f.length;u++){d=f[u];(g=this.getWrapper(t,d.id)).visible=i}if(e.expandIcon||e.collapseIcon){var g;if(g=this.getWrapper(t,"icon_content")){for(p=0;p<g.children.length;p++)g.children[p].visible=i;g.visible=i}e&&e.visible&&e.outEdges&&this.updateIconVisibility(e,0!==e.outEdges.length)}!1===i&&this.unSelect(this.nameTable[t.id]),(e instanceof Lv&&!this.preventNodesUpdate||e instanceof Gf&&!this.preventConnectorsUpdate)&&this.diagramActions&&this.updateDiagramObject(this.nameTable[t.id],void 0,!0)}},e.prototype.updateAnnotations=function(t,e){if(void 0!==t.annotations)for(var i=0,n=Object.keys(t.annotations);i<n.length;i++){var r=n[i],o=Number(r),s=t.annotations[r],a=e.annotations[o];this.updateAnnotation(s,a,e.wrapper,e)}},e.prototype.updateAnnotation=function(t,e,i,n,r){var o,s=!1;if(void 0!==(o=this.getWrapper(i,e.id))){if(void 0!==t.width&&void 0!==t.height&&(o.width=t.width,o.height=t.height,s=!0),void 0!==t.rotateAngle&&(o.rotateAngle=t.rotateAngle),!r||o instanceof vf||o.refreshTextElement(),e instanceof vu&&void 0!==t.segmentAngle&&(o.rotateAngle=e.rotateAngle),e instanceof yu&&void 0!==t.offset){var a=t.offset;s=!0;var l=void 0!==a.x?a.x:e.offset.x,h=void 0!==a.y?a.y:e.offset.y;o.setOffsetWithRespectToBounds(l,h,"Fraction"),o.relativeMode="Point"}else e instanceof vu&&(void 0!==t.offset||void 0!==t.segmentAngle)&&n.updateAnnotation(e,n.intermediatePoints,n.wrapper.bounds,o);if(e instanceof vu&&t.displacement&&(void 0===t.displacement.x&&void 0===t.displacement.y||(s=!0)),void 0!==t.margin&&(s=!0,void 0!==t.margin.bottom&&(o.margin.bottom=t.margin.bottom),void 0!==t.margin.top&&(o.margin.top=t.margin.top),void 0!==t.margin.left&&(o.margin.left=t.margin.left),void 0!==t.margin.right&&(o.margin.right=t.margin.right)),(s||r)&&(o.width=e.width||n.width,e.template&&(o.width=o.width||o.actualSize.width,o.height=e.height||n.height||o.actualSize.height)),void 0!==t.horizontalAlignment&&(o.horizontalAlignment=t.horizontalAlignment,s=!0),void 0!==t.verticalAlignment&&(o.verticalAlignment=t.verticalAlignment,s=!0),void 0!==t.visibility&&(o.visible=!(!i.visible||!t.visibility)),void 0!==t.constraints){o.constraints&vp.Select&&!(t.constraints&vp.Select)&&aw(this,n,!1,o),o.constraints=t.constraints}void 0!==t.style&&sy(t.style,o),void 0!==t.hyperlink&&function(t,e,i){for(var n=e,r=n.hyperlink,o=0,s=Object.keys(t);o<s.length;o++)switch(s[o]){case"color":n.style.color=r.color=t.color;break;case"content":n.content=r.content=t.content||r.link;break;case"link":var a=i.style;n.style.color=t.link?r.color:a.color,n.style.textDecoration=t.link?r.textDecoration:i.style.textDecoration,n.content=t.link?r.content||t.link:i.content,r.link=t.link;break;case"textDecoration":n.style.textDecoration=r.textDecoration=t.textDecoration}}(t.hyperlink,o,e),this.updateAnnotationContent(t,s,o,n,e,i),!0===s&&(o.measure(new Wd(o.width,o.height)),o.arrange(o.desiredSize)),o instanceof vf||o.refreshTextElement()}},e.prototype.updateAnnotationContent=function(t,e,i,n,r,o){void 0!==t.content&&(i&&(!0,"UmlActivity"===n.shape.type&&($&&"StructuredNode"===n.shape.umlActivityShape||!$&&"StructuredNode"===n.shape.shape)?i.content="<<"+t.content+">>":i.content=t.content),i instanceof vf&&this.updateAnnotationWrapper(i,n,r,o)),void 0!==t.template&&(i.content=t.template,this.updateAnnotationWrapper(i,n,r,o))},e.prototype.updateAnnotationWrapper=function(t,e,i,n){for(var r=0,o=this.views;r<o.length;r++){var s=o[r];ib(t.id+"_groupElement",s),ib(t.id+"_html_element",s)}if(e instanceof Lv)t=e.initAnnotationWrapper(i,this.element.id);else if(e instanceof Gf){var a=e.wrapper.children[0],l=new np(a.offsetX-a.width/2,a.offsetY-a.height/2,a.width,a.height);t=e.getAnnotationElement(e.annotations[e.annotations.length-1],e.intermediatePoints,l,this.getDescription,this.element.id)}for(var h=0;h<n.children.length;h++)t.id===n.children[h].id&&n.children.splice(h,1,t)},e.prototype.updatePort=function(t,e,i){var n,r=!1;if(void 0!==(n=this.getWrapper(i,e.id))){if(void 0!==t.offset){r=!0;var o=void 0!==t.offset.x?t.offset.x:e.offset.x,s=void 0!==t.offset.y?t.offset.y:e.offset.y;n.setOffsetWithRespectToBounds(o,s,"Fraction"),n.relativeMode="Point"}if(void 0!==t.width&&(r=!0,n.width=t.width),void 0!==t.height&&(r=!0,n.height=t.height),void 0!==t.visibility&&(n.visible=!(!i.visible||!yy(e,fp.Visible))),void 0!==t.margin&&(r=!0,void 0!==t.margin.bottom&&(n.margin.bottom=t.margin.bottom),void 0!==t.margin.top&&(n.margin.top=t.margin.top),void 0!==t.margin.right&&(n.margin.right=t.margin.right),void 0!==t.margin.left&&(n.margin.left=t.margin.left)),void 0!==t.horizontalAlignment&&(r=!0,n.horizontalAlignment=t.horizontalAlignment),void 0!==t.verticalAlignment&&(r=!0,n.verticalAlignment=t.verticalAlignment),void 0!==t.style&&(void 0!==t.style.fill&&(n.style.fill=t.style.fill),void 0!==t.style.opacity&&(n.style.opacity=t.style.opacity),void 0!==t.style.strokeColor&&(n.style.strokeColor=t.style.strokeColor),void 0!==t.style.strokeWidth&&(n.style.strokeWidth=t.style.strokeWidth),void 0!==t.style.strokeDashArray&&(n.style.strokeDashArray=t.style.strokeDashArray)),void 0!==t.shape&&n){var a=bu(t.shape);n.data=a,n.canMeasurePath=!0}void 0!==t.pathData&&(n.data=String(t.pathData),r=!0),!0===r&&(n.measure(new Wd(n.width,n.height)),n.arrange(n.desiredSize))}},e.prototype.updateIcon=function(t){var e=this.getWrapper(t.wrapper,"icon_content"),i=this.diagramActions&Ip.Render?this.element.id:void 0;if(e){if("SVG"===this.mode){var n=Hv(t.wrapper.id+"_icon_content",i);if(n){var r=Hv(n.id+"_rect",i),o=Hv(n.id+"_shape",i),s=Hv(o.id+"_native_element",i);s&&s.parentNode.removeChild(s),o.parentNode.removeChild(o),r.parentNode.removeChild(r),n.parentNode.removeChild(n)}}var a=t.wrapper.children.indexOf(e);t.wrapper.children.splice(a,1)}var l=this.getPortContainer(t);t.initIcons(this.getDescription,this.layout,l,this.element.id)},e.prototype.getPortContainer=function(t){if(t.children)for(var e=0;e<t.wrapper.children.length;e++)if(t.wrapper.children[e].id===t.id+"group_container")return t.wrapper.children[e];return t.wrapper},e.prototype.updateTooltip=function(t,e){void 0!==e.tooltip.content&&(t.tooltip.content=e.tooltip.content),void 0!==e.tooltip.position&&(t.tooltip.position=e.tooltip.position),void 0!==e.tooltip.height&&(t.tooltip.height=e.tooltip.height),void 0!==e.tooltip.width&&(t.tooltip.width=e.tooltip.width),void 0!==e.tooltip.showTipPointer&&(t.tooltip.showTipPointer=e.tooltip.showTipPointer)},e.prototype.updateQuad=function(t){this.spatialSearch.updateQuad(t.wrapper)&&!this.preventUpdate&&this.updatePage()},e.prototype.removeFromAQuad=function(t){if(t.children)for(var e=void 0,i=t.children,n=0;n<i.length;n++)(e=this.nameTable[i[n]])&&this.removeFromAQuad(e);this.spatialSearch.removeFromAQuad(t.wrapper),this.spatialSearch.updateBounds(t.wrapper)&&!this.preventUpdate&&this.updatePage()},e.prototype.updateGroupSize=function(t){var e;t.parentId&&(e=this.nameTable[t.parentId])&&(e.parentId?this.updateGroupSize(e):(e.wrapper.measure(new Wd),e.wrapper.arrange(e.wrapper.desiredSize),this.updateGroupOffset(e),this.updateDiagramObject(e)))},e.prototype.updatePage=function(){if(this.diagramActions&Ip.Render&&!(this.diagramActions&Ip.DragUsingMouse)){this.scroller.updateScrollOffsets(),this.scroller.setSize();for(var t=0,i=this.views;t<i.length;t++){var n=i[t],r=this.views[n];r instanceof e||r.updateView(r)}}this.diagramActions&Ip.DragUsingMouse&&this.renderPageBreaks()},e.prototype.protectPropertyChange=function(t){this.isProtectedOnChange=t},e.prototype.getProtectPropertyChangeValue=function(){return this.isProtectedOnChange},e.prototype.enableServerDataBinding=function(t){$()&&(this.allowServerDataBinding=t,t&&(this.bulkChanges={}))},e.prototype.updateShadow=function(t,e){void 0!==e.angle&&(t.angle=e.angle),void 0!==e.color&&(t.color=e.color),void 0!==e.distance&&(t.distance=e.distance),void 0!==e.opacity&&(t.opacity=e.opacity)},e.prototype.updateMargin=function(t,e){void 0!==e.margin.top&&(t.margin.top=e.margin.top),void 0!==e.margin.bottom&&(t.margin.bottom=e.margin.bottom),void 0!==e.margin.left&&(t.margin.left=e.margin.left),void 0!==e.margin.right&&(t.margin.right=e.margin.right)},e.prototype.initDroppables=function(){var t,e,i=this,n={},r={};this.droppable=new xn(this.element),this.droppable.over=function(o){if(i.currentSymbol)o.event.touches&&o.event.touches.length&&i.eventHandler.mouseMove(o.event,o.event.touches);else{var s=null;if(!o.dragData&&"drag"===o.name){var a=document.getElementsByClassName("e-dragclone")[0];a&&(s=a)}if(o.dragData||s){var l=void 0,h=void 0;document.getElementById(i.element.id+"content").focus();var c=i.eventHandler.getMousePosition(o.event),d=void 0,p=s||o.dragData.helper,u=p.getAttribute("paletteId"),f=void 0,g=void 0,m=void 0;if(u){var y=document.getElementById(u).ej2_instances[0];i.droppable.sourceElement=y;if(y){var v=y.selectedSymbols;i.allowServerDataBinding=!1,d=gb(y.selectedSymbols),n=y.childTable;var b=v.wrapper.children[0].children[0];if(y.selectedSymbols instanceof Lv){"TextAnnotation"===v.shape.shape?(d.offsetX=c.x+11+(d.width||b.actualSize.width)/2,d.offsetY=c.y+11+(d.height||b.actualSize.height)/2):(d.offsetX=c.x+5+(d.width||b.actualSize.width)/2,d.offsetY=c.y+(d.height||b.actualSize.height)/2);var w=new Lv(i,"nodes",d,!0);"Bpmn"===w.shape.type&&w.shape.activity.subProcess.processes&&w.shape.activity.subProcess.processes.length&&(w.shape.activity.subProcess.processes=[]),f=w.dragSize,g=w.previewSize,m=y.symbolDragSize;var S=y.symbolPreview;if(w.width=f.width||m.width||g.width||S.width||w.width,w.height=f.height||m.height||g.height||S.height||w.height,"SwimLane"===w.shape.type){if(i.diagramActions|=Ip.PreventHistory,w.shape.isLane){w.children=[],t={id:"header"+cb()},"Horizontal"===w.shape.orientation?(t.width=w.shape.lanes[0].header.width,t.height=w.shape.lanes[0].height):(t.width=w.shape.lanes[0].width,t.height=w.shape.lanes[0].header.height),t.style=w.shape.lanes[0].header.style,t.offsetX=c.x+5+t.width/2,t.offsetY=c.y+t.height/2,i.diagramActions|=Ip.PreventCollectionChangeOnDragOver,t=i.add(t),e={id:"body"+cb()},"Horizontal"===w.shape.orientation?(e.width=w.shape.lanes[0].width-t.width,e.height=w.shape.lanes[0].height,e.offsetX=c.x+5+(w.shape.lanes[0].header.width+e.width/2),e.offsetY=c.y+e.height/2):(e.width=w.shape.lanes[0].width,e.height=w.shape.lanes[0].height-t.height,e.offsetX=c.x+5+e.width/2,e.offsetY=c.y+(w.shape.lanes[0].header.height+e.height/2)),e.style=w.shape.lanes[0].style,e=i.add(e);var x={id:"group"+cb(),children:[t.id,e.id]};x.shape=w.shape,x.width=w.shape.lanes[0].width,x.height=w.shape.lanes[0].height,x.previewSize=w.previewSize,x.dragSize=w.dragSize,x.addInfo=w.addInfo,w=i.add(x),i.diagramActions&=~Ip.PreventCollectionChangeOnDragOver}i.diagramActions&=~Ip.PreventHistory}if(w.shape.isPhase&&((h="Horizontal"===w.shape.orientation)?(w.offsetX=c.x+5+(w.width||b.actualSize.width)/2,w.offsetY=c.y,w.shape.data="M20,"+w.height/2+" L"+(w.width-20)+","+w.height/2+"z",w.height=1):(w.offsetX=c.x+5,w.offsetY=c.y+(w.height||b.actualSize.height)/2,w.shape.data="M"+w.width/2+",20 L"+w.width/2+","+(w.height-20)+"z",w.width=1)),l=w,d.children){var C=d;r=i.getChildren(C,{},n),Cy(C,-C.offsetX,-C.offsetY,r,!0,i)}}else if(y.selectedSymbols instanceof Gf){l=new Gf(i,"connectors",d,!0);var P=np.toBounds([l.sourcePoint,l.targetPoint]),O=c.x-P.left,E=c.y-P.top;l.sourcePoint.x+=O,l.sourcePoint.y+=E,l.targetPoint.x+=O,l.targetPoint.y+=E}l.shape.isLane||(l.id+=cb());var L={source:y,element:l,cancel:!1,diagram:i};if($()&&(L=i.getBlazorDragEventArgs(L)),i.enterObject=l,i.enterTable=r,i.triggerEvent(kp.dragEnter,L),l instanceof Lv&&"SwimLane"===l.shape.type&&l.shape.isLane){var I,T,A=L.element,B=A.shape.lanes[0];h="Horizontal"===A.shape.orientation,I=i.nameTable[l.children[0]],T=i.nameTable[l.children[1]],f=l.dragSize,g=l.previewSize,m=y.symbolDragSize,B.width=f.width||m.width||g.width||B.width,B.height=f.height||m.height||g.height||B.height,h?(t.width=B.header.width,t.height=B.height,e.width=B.width-t.width,e.height=B.height,e.offsetX=c.x+5+(B.header.width+T.width/2),e.offsetY=c.y+T.height/2):(t.width=B.width,t.height=B.header.height,e.width=B.width,e.height=B.height-t.height,e.offsetX=c.x+5+T.width/2,e.offsetY=c.y+(B.header.height+T.height/2)),t.offsetX=c.x+5+I.width/2,t.offsetY=c.y+I.height/2,l.width=B.width,l.height=B.height}l instanceof Lv&&l.shape.isPhase&&(h?l.height=1:l.width=1),i.activeLayer.lock||L.cancel||(i.preventUpdate=!0,l.children&&i.findChild(l,r),i.preventUpdate=!0,-1!==l.zIndex&&(l.zIndex=-1),i.initObject(l,void 0,void 0,!0),i.currentSymbol=l,"SVG"!==i.mode&&i.refreshDiagramLayer(),i.commandHandler.oldSelectedObjects=ky(i),i.commandHandler.select(l),i.commandHandler.updateBlazorSelector(),i.eventHandler.mouseDown(o.event),i.eventHandler.mouseMove(o.event,o),i.preventUpdate=!1,i.updatePage(),p.style.opacity="0"),delete i.enterObject,delete i.enterTable}i.droppable.selectedSymbols=p,i.allowServerDataBinding=!0}}}},this.droppable.drop=function(t){return tS(i,void 0,void 0,function(){var e,i,n,r,o,s,a,l,h,c;return eS(this,function(d){switch(d.label){case 0:return this.allowServerDataBinding=!1,e="sourceElement",this.currentSymbol?(n=!1,o=void 0,o=this.currentSymbol instanceof Gf,t.event.touches&&this.eventHandler.mouseUp(t.event),s=void 0,void 0,void 0,l=void 0,l={source:this.droppable[e],element:this.currentSymbol,target:this.eventHandler.hoverNode||this.eventHandler.lastObjectUnderMouse||this,cancel:!1,position:{x:this.currentSymbol.wrapper.offsetX,y:this.currentSymbol.wrapper.offsetY}},$()?(l={source:jy(this.droppable[e]),element:Iy(this.currentSymbol)===Gf?{connector:jy(this.currentSymbol)}:{node:jy(this.currentSymbol)},cancel:!1,target:{},position:{x:this.currentSymbol.wrapper.offsetX,y:this.currentSymbol.wrapper.offsetY}},this.getDropEventArgs(l),[4,this.triggerEvent(kp.drop,l)]):[3,2]):[3,4];case 1:return l=d.sent()||l,[3,3];case 2:this.triggerEvent(kp.drop,l),d.label=3;case 3:return h=void 0,c="id",(h=gb(this.currentSymbol)).hasTarget=this.currentSymbol.hasTarget,this.removeFromAQuad(this.currentSymbol),this.removeObjectsFromLayer(this.nameTable[this.currentSymbol.id]),this.removeElements(this.currentSymbol),(this.currentSymbol.shape.isLane||this.currentSymbol.shape.isPhase)&&this.removeChildInNodes(this.currentSymbol),l.cancel&&ty(this.currentSymbol,this),this.currentSymbol.shape.isPhase&&(n=!0,r=this.currentSymbol.shape.orientation),delete this.nameTable[this.currentSymbol.id],this.currentSymbol=null,this.protectPropertyChange(!0),l.cancel?this.clearSelectorLayer():(this.startGroupAction(),h&&(h.shape.isLane||n)&&(n&&(h.shape.isPhase=n,h.shape.orientation=r),this.eventHandler.addSwimLaneObject(h)),"Bpmn"===h.shape.type&&h.shape.annotation&&h.hasTarget&&(a=h.shape.annotation.nodeId,h.shape.annotation.id=h.id,this.addTextAnnotation(h.shape.annotation,this.nameTable[a]),h.nodeId=""),h.shape.isLane||n||(h.children&&this.addChildNodes(h),l.target&&l.target instanceof Lv&&!o&&Yg(this,l.target)&&ug(l.target)?Jg(this,l.target,h):i=this.add(h,!0),(h||i)&&gg(this)&&this.select([this.nameTable[h[c]]]))),this.protectPropertyChange(!1),s=this.nameTable[h[c]],h.hasTarget&&(h.nodeId=h.hasTarget,this.remove(h)),this.bpmnModule&&s instanceof Lv&&h.processId&&(s.processId=h.processId,this.bpmnModule.dropBPMNchild(this.nameTable[s.processId],s,this)),this.endGroupAction(),"SVG"!==this.mode&&this.refreshDiagramLayer(),delete this.droppable[e],[3,5];case 4:l={source:jy(t.droppedElement),element:void 0,target:jy(this.eventHandler.hoverNode||this.eventHandler.lastObjectUnderMouse||this),cancel:!1,position:void 0},$()&&(l={source:jy(t.droppedElement),element:void 0,cancel:!1,position:void 0,target:{}},this.getDropEventArgs(l)),this.triggerEvent(kp.drop,l),h=void 0,c="id",d.label=5;case 5:return"selectedSymbols",this.droppable.selectedSymbols&&li(this.droppable.selectedSymbols),this.allowServerDataBinding=!0,[2]}})})},this.droppable.out=function(t){if(i.currentSymbol&&!i.eventHandler.focus){i.unSelect(i.currentSymbol),i.removeFromAQuad(i.currentSymbol),"SVG"!==i.mode&&"Native"===i.currentSymbol.shape.type&&i.removeElements(i.currentSymbol),i.removeObjectsFromLayer(i.nameTable[i.currentSymbol.id]),delete i.nameTable[i.currentSymbol.id];var e={element:jy(i.currentSymbol),diagram:i};$()&&(e=i.getBlazorDragLeaveEventArgs(e)),i.triggerEvent(kp.dragLeave,e),"SVG"!==i.mode?i.refreshDiagramLayer():i.removeElements(i.currentSymbol),i.currentSymbol=null;i.droppable.selectedSymbols.style.opacity="1";delete i.droppable.sourceElement,i.diagramRenderer.rendererActions=i.removeConstraints(i.diagramRenderer.rendererActions,Tp.DrawSelectorBorder),i.previousSelectedObject&&i.select(i.previousSelectedObject,i.previousSelectedObject.length>1),i.previousSelectedObject=null}}},e.prototype.getBlazorDragLeaveEventArgs=function(t){return t={diagramId:this.element.id,element:Iy(t.element)===Gf?{connector:jy(t.element)}:{node:jy(t.element)}}},e.prototype.getDropEventArgs=function(t){if(this.eventHandler.lastObjectUnderMouse||this.eventHandler.hoverNode){var e=this.eventHandler.lastObjectUnderMouse||this.eventHandler.hoverNode;t.target=Iy(e)===Gf?{connector:jy(e)}:{node:jy(e)}}else t.target.diagramId=this.element.id},e.prototype.removeChildInNodes=function(t){if(t){if(t.children)for(var e=0;e<t.children.length;e++)this.removeChildInNodes(this.nameTable[t.children[e]]);var i=this.nodes.indexOf(t);-1!==i&&this.nodes.splice(i,1)}},e.prototype.getBlazorDragEventArgs=function(t){return t={source:jy(t.source),element:Iy(t.element)===Gf?{connector:jy(t.element)}:{node:jy(t.element)},cancel:t.cancel,diagramId:this.element.id}},e.prototype.findChild=function(t,e){for(var i,n,r=0;r<t.children.length;r++)(i=e[t.children[r]])&&(i.children&&this.findChild(i,e),i.id=i.id+cb(),e[i.id]=i,t.children[r]=i.id,n=new Lv(this,"nodes",i,!0),this.initObject(n,void 0,void 0,!0))},e.prototype.getChildren=function(t,e,i){for(var n,r=0;r<t.children.length;r++)(n=i[t.children[r]])&&(n.children&&(e=this.getChildren(n,e,i)),e[n.id]=gb(n));return e},e.prototype.addChildNodes=function(t){for(var e,i=0;i<t.children.length;i++)(e=this.nameTable[t.children[i]])&&(e.children&&this.addChildNodes(e),this.add(e,!0))},e.prototype.moveNode=function(t){for(var e,i=this.commandHandler.getObjectLayer(t.id),n=i.zIndex,r=i.objects.length,o=0;o<this.layers.length;o++)n===this.layers[o].zIndex&&(e=this.layers[o+1]);if(r>1)this.commandHandler.moveSvgNode(t.id,i.objects[r-2]),this.commandHandler.moveSvgNode(i.objects[r-2],t.id);else if(e){var s=this.commandHandler.getLayer(this.layerZIndexTable[e.zIndex]).objects[0];s?(this.commandHandler.moveSvgNode(t.id,s),this.commandHandler.updateNativeNodeIndex(t.id,s)):this.moveObjectsUp(t,i)}else this.moveObjectsUp(t,i)},e.prototype.moveObjectsUp=function(t,e){for(var i,n=this.layers.length-1;n>=0;n--)if(i=this.layers[n],e.id!==i.id){var r=this.commandHandler.getLayer(this.layerZIndexTable[i.zIndex]).objects[i.objects.length-1];if(r){this.commandHandler.moveSvgNode(t.id,r),this.commandHandler.moveSvgNode(r,t.id);break}}},e.prototype.insertData=function(t){return this.crudOperation(t,"create",this.getNewUpdateNodes("New"))},e.prototype.updateData=function(t){return this.crudOperation(t,"update",this.getNewUpdateNodes("Update"))},e.prototype.removeData=function(t){return this.crudOperation(t,"destroy",this.getDeletedNodes())},e.prototype.crudOperation=function(t,e,i){if(t){var n=this.parameterMap(t,!(t instanceof Gf));if(n){var r=t instanceof Gf?this.dataSourceSettings.connectionDataSource.crudAction[e]:this.dataSourceSettings.crudAction[e];this.raiseAjaxPost(JSON.stringify(n),r)}return n}var o=i;return this.processCrudCollection(o,this.dataSourceSettings.crudAction[e],this.dataSourceSettings.connectionDataSource.crudAction[e]),o},e.prototype.processCrudCollection=function(t,e,i){if(t.nodes){var n=[],r=void 0;for(r=0;r<t.nodes.length;r++)n.push(this.parameterMap(t.nodes[r],!0));n&&n.length>0&&this.raiseAjaxPost(JSON.stringify(n),e)}if(t.connectors){n=[],r=void 0;for(r=0;r<t.connectors.length;r++)n.push(this.parameterMap(t.connectors[r],!1));n&&n.length>0&&this.raiseAjaxPost(JSON.stringify(n),i)}},e.prototype.parameterMap=function(t,e){var i,n={},r=e?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource;if(r.id&&(n[r.id]=t.id),r.sourcePointX&&r.sourcePointY&&(n[r.sourcePointX]=t.sourcePoint.x,n[r.sourcePointY]=t.sourcePoint.y),r.targetPointX&&r.targetPointY&&(n[r.targetPointX]=t.targetPoint.x,n[r.targetPointY]=t.targetPoint.y),r.sourceID&&(n[r.sourceID]=t.sourceID),r.targetID&&(n[r.targetID]=t.targetID),r.crudAction&&r.crudAction.customFields&&r.crudAction.customFields.length>0)for(i=0;i<r.crudAction.customFields.length;i++)n[r.crudAction.customFields[i]]=t[r.crudAction.customFields[i]];return n},e.prototype.getNewUpdateNodes=function(t){var e=[],i=[];for(var n in this.nameTable){var r=this.nameTable[n];r.status==t&&(r&&r instanceof Gf?(r.status="None",i.push(r)):(r.status="None",e.push(r)))}return{nodes:e,connectors:i}},e.prototype.getDeletedNodes=function(){var t,e=[],i=[];for(t=0;t<this.crudDeleteNodes.length;t++){var n=this.crudDeleteNodes[t];n&&n.segments?i.push(n):n&&e.push(n)}return this.crudDeleteNodes=[],{nodes:e,connectors:i}},e.prototype.raiseAjaxPost=function(t,e){var i=new Ut(e,"POST",!0,"application/json"),n=JSON.stringify(JSON.parse(t));i.send(n).then(),i.onSuccess=function(t){}},$w([Hi("100%")],e.prototype,"width",void 0),$w([Hi("SVG")],e.prototype,"mode",void 0),$w([Hi("100%")],e.prototype,"height",void 0),$w([_i({},Ng)],e.prototype,"contextMenuSettings",void 0),$w([Hi(xp.Default)],e.prototype,"constraints",void 0),$w([Hi(Cp.Default)],e.prototype,"tool",void 0),$w([Hi("Top")],e.prototype,"bridgeDirection",void 0),$w([Hi("transparent")],e.prototype,"backgroundColor",void 0),$w([_i({},Vb)],e.prototype,"snapSettings",void 0),$w([_i({},Gb)],e.prototype,"rulerSettings",void 0),$w([_i({},Rb)],e.prototype,"pageSettings",void 0),$w([_i({},Gw)],e.prototype,"serializationSettings",void 0),$w([Fi([],Lv)],e.prototype,"nodes",void 0),$w([Hi()],e.prototype,"drawingObject",void 0),$w([Fi([],Gf)],e.prototype,"connectors",void 0),$w([Hi([])],e.prototype,"basicElements",void 0),$w([_i({},hf)],e.prototype,"tooltip",void 0),$w([_i({},$b)],e.prototype,"dataSourceSettings",void 0),$w([Hi()],e.prototype,"addInfo",void 0),$w([Hi()],e.prototype,"historyManager",void 0),$w([Hi()],e.prototype,"nodeTemplate",void 0),$w([Hi()],e.prototype,"annotationTemplate",void 0),$w([Hi()],e.prototype,"userHandleTemplate",void 0),$w([Hi()],e.prototype,"getNodeDefaults",void 0),$w([Hi()],e.prototype,"nodeDefaults",void 0),$w([Hi()],e.prototype,"getConnectorDefaults",void 0),$w([Hi()],e.prototype,"connectorDefaults",void 0),$w([Hi()],e.prototype,"setNodeTemplate",void 0),$w([Hi()],e.prototype,"getDescription",void 0),$w([Hi()],e.prototype,"getCustomProperty",void 0),$w([Hi()],e.prototype,"getCustomTool",void 0),$w([Hi()],e.prototype,"getCustomCursor",void 0),$w([Fi([],Yw)],e.prototype,"customCursor",void 0),$w([Hi()],e.prototype,"updateSelection",void 0),$w([_i({},Jw)],e.prototype,"diagramSettings",void 0),$w([_i({},Mv)],e.prototype,"selectedItems",void 0),$w([_i({},zb)],e.prototype,"scrollSettings",void 0),$w([_i({},iw)],e.prototype,"layout",void 0),$w([_i({},jg)],e.prototype,"commandManager",void 0),$w([Ui()],e.prototype,"dataLoaded",void 0),$w([Ui()],e.prototype,"dragEnter",void 0),$w([Ui()],e.prototype,"dragLeave",void 0),$w([Ui()],e.prototype,"dragOver",void 0),$w([Ui()],e.prototype,"click",void 0),$w([Ui()],e.prototype,"historyChange",void 0),$w([Ui()],e.prototype,"historyStateChange",void 0),$w([Ui()],e.prototype,"doubleClick",void 0),$w([Ui()],e.prototype,"textEdit",void 0),$w([Ui()],e.prototype,"scrollChange",void 0),$w([Ui()],e.prototype,"selectionChange",void 0),$w([Ui()],e.prototype,"sizeChange",void 0),$w([Ui()],e.prototype,"connectionChange",void 0),$w([Ui()],e.prototype,"sourcePointChange",void 0),$w([Ui()],e.prototype,"targetPointChange",void 0),$w([Ui()],e.prototype,"propertyChange",void 0),$w([Ui()],e.prototype,"positionChange",void 0),$w([Ui()],e.prototype,"keyUp",void 0),$w([Ui()],e.prototype,"keyDown",void 0),$w([Ui()],e.prototype,"animationComplete",void 0),$w([Ui()],e.prototype,"rotateChange",void 0),$w([Ui()],e.prototype,"collectionChange",void 0),$w([Ui()],e.prototype,"onUserHandleMouseDown",void 0),$w([Ui()],e.prototype,"onUserHandleMouseUp",void 0),$w([Ui()],e.prototype,"onUserHandleMouseEnter",void 0),$w([Ui()],e.prototype,"onUserHandleMouseLeave",void 0),$w([Ui()],e.prototype,"segmentCollectionChange",void 0),$w([Ui()],e.prototype,"onImageLoad",void 0),$w([Ui()],e.prototype,"expandStateChange",void 0),$w([Ui()],e.prototype,"created",void 0),$w([Ui()],e.prototype,"mouseEnter",void 0),$w([Ui()],e.prototype,"mouseLeave",void 0),$w([Ui()],e.prototype,"mouseOver",void 0),$w([Ui()],e.prototype,"contextMenuOpen",void 0),$w([Ui()],e.prototype,"contextMenuBeforeItemRender",void 0),$w([Ui()],e.prototype,"contextMenuClick",void 0),$w([Ui()],e.prototype,"commandExecute",void 0),$w([Fi([],zw)],e.prototype,"layers",void 0),$w([Ui()],e.prototype,"drop",void 0),e}(un),nS=function(){function t(t){this.diagram=t}return t.prototype.exportDiagram=function(t){var e,i,n,r,o="data",s=[],a=t.margin||{},l=t&&t.region?t.region:"Content";r=t&&t.mode?t.mode:"Download";var h=this.getDiagramBounds(l,t);t.bounds&&(i=!0,h.x=t.bounds.x?t.bounds.x:h.x,h.y=t.bounds.y?t.bounds.y:h.y,h.width=t.bounds.width||h.width,h.height=t.bounds.height||h.height),a={top:void 0!==a.top?a.top:25,bottom:void 0!==a.bottom?a.bottom:25,right:void 0!==a.right?a.right:25,left:void 0!==a.left?a.left:25};this.diagram.nodes;"PageSettings"!==l&&(h.x-=a.left,h.y-=a.top,h.width+=a.left+a.right,h.height+=a.top+a.bottom);var c=t.fileName||"diagram";if("SVG"!==t.format){if(null!==(o=this.setCanvas(t,h,a,r,i,l,c)))return o}else{e=t.format,t.bounds=h,t.margin=a;var d=n=this.diagramAsSvg(t,a);if("Data"===r)return n;var p=(new XMLSerializer).serializeToString(d);s.push(p)}if("Download"===r&&null!==o)for(var u=0;u<s.length;u++){var f=new Blob([s[u]],{type:"application/octet-stream"});if("msie"===te.info.name)window.navigator.msSaveOrOpenBlob(f,c+"."+e);else{var g=Jv("a",{download:c+"."+e}),m=URL.createObjectURL(f);g.href=m;var y=document.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),g.dispatchEvent(y)}}return null},t.prototype.setCanvas=function(t,e,i,n,r,o,s){var a;t.bounds=e,t.region=o;this.setScaleValueforCanvas(t,e);var l=this.diagramAsCanvas({bounds:e,margin:i,region:o,scaleX:t.scaleX,scaleY:t.scaleY,scaleOffsetX:t.scaleOffsetX,scaleOffsetY:t.scaleOffsetY},r),h=a=l.toDataURL();return"Data"===n?a:(this.canvasMultiplePage(t,l,i,h,s),null)},t.prototype.canvasMultiplePage=function(t,e,i,n,r){var o=this,s=[],a=t.format||"JPG";if(t.multiplePage){if(t.pageHeight=t.pageHeight?t.pageHeight:this.diagram.pageSettings.height,t.pageWidth=t.pageWidth?t.pageWidth:this.diagram.pageSettings.width,t.pageHeight=t.pageHeight?t.pageHeight:e.width,t.pageWidth=t.pageWidth?t.pageWidth:e.height,i=t.margin||{},t.pageOrientation&&("Landscape"===t.pageOrientation&&t.pageHeight>t.pageWidth||"Portrait"===t.pageOrientation&&t.pageWidth>t.pageHeight)){var l=t.pageWidth;t.pageWidth=t.pageHeight,t.pageHeight=l}t.margin={top:isNaN(i.top)?0:i.top,bottom:isNaN(i.bottom)?0:i.bottom,left:isNaN(i.left)?0:i.left,right:isNaN(i.right)?0:i.right};var h=Jv("img",{id:this.diagram.element.id+"_printImage",src:n});h.onload=function(){s=o.getMultipleImage(h,t,!0),o.exportImage(s,r,a,n)}}else s=[n],this.exportImage(s,r,a,n)},t.prototype.exportImage=function(t,e,i,n){for(var r=[],o=t instanceof HTMLElement?0:t.length,s=0;s<o;s++){for(var a=t[s].replace(/^data:[a-z]*;,/,"").split(","),l=atob(a[1]),h=new ArrayBuffer(l.length),c=new Uint8Array(h),d=0;d<l.length;d++)c[d]=l.charCodeAt(d);r.push(h)}for(var p=function(t){var n=new Blob([r[t]],{type:"application/octet-stream"});if("msie"===te.info.name)window.navigator.msSaveOrOpenBlob(n,e+"."+i);else{var o=Jv("a",{download:e+"."+i}),s=URL.createObjectURL(n);o.href=s;var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),setTimeout(function(){o.dispatchEvent(a)},5*(t+1))}},u=0;u<r.length;u++)p(u)},t.prototype.getObjectsBound=function(t){for(var e,i=0,n=this.diagram.nodes;i<n.length;i++){var r=n[i];r.visible&&(("SVG"===t.format||r instanceof lu||r instanceof vf)&&("SVG"!==t.format||r instanceof vf)||(e=e?e.uniteRect(r.wrapper.outerBounds):r.wrapper.outerBounds))}for(var o=0,s=this.diagram.connectors;o<s.length;o++){var a=s[o];a.visible&&(e=e?e.uniteRect(a.wrapper.outerBounds):a.wrapper.outerBounds)}return e||new np(0,0,0,0)},t.prototype.getDiagramBounds=function(t,e){var i=this.getObjectsBound(e),n=i.left,r=i.top,o=i.right-i.left,s=i.bottom-i.top;"Content"!==t&&(this.diagram.pageSettings&&this.diagram.pageSettings.multiplePage?(n=i.left,r=i.top,this.diagram.pageSettings.width&&(n=Math.floor(n/this.diagram.pageSettings.width)*this.diagram.pageSettings.width,o=Math.ceil(i.right/this.diagram.pageSettings.width)*this.diagram.pageSettings.width-n),this.diagram.pageSettings.height&&(r=Math.floor(r/this.diagram.pageSettings.height)*this.diagram.pageSettings.height,s=Math.ceil(i.bottom/this.diagram.pageSettings.height)*this.diagram.pageSettings.height-r),0===i.width&&null!==this.diagram.pageSettings.width&&(o=this.diagram.pageSettings.width),0===i.height&&null!==this.diagram.pageSettings.height&&(s=this.diagram.pageSettings.height)):(this.diagram.pageSettings.width&&(n=0,o=this.diagram.pageSettings.width),this.diagram.pageSettings.height&&(r=0,s=this.diagram.pageSettings.height)));var a=new np;return a.x=n,a.y=r,a.width=o,a.height=s,a},t.prototype.setScaleValueforCanvas=function(t,e){t.scaleX=1,t.scaleY=1,t.scaleOffsetX=0,t.scaleOffsetY=0,t.pageHeight=t.pageHeight||this.diagram.pageSettings.height,t.pageWidth=t.pageWidth||this.diagram.pageSettings.width;var i=t.pageOrientation||this.diagram.pageSettings.orientation;if(i||(i="Portrait"),"Portrait"===i){if(t.pageWidth>t.pageHeight){var n=t.pageHeight;t.pageHeight=t.pageWidth,t.pageWidth=n}}else if(t.pageHeight>t.pageWidth){n=t.pageWidth;t.pageWidth=t.pageHeight,t.pageHeight=n}t.pageWidth&&t.pageHeight&&!t.multiplePage&&(t.stretch="Meet");var r=t.pageHeight||e.height,o=t.pageWidth||e.width;"Stretch"!==t.stretch&&"Meet"!==t.stretch&&"Slice"!==t.stretch||(t.scaleX=o/e.width,t.scaleY=r/e.height,"Meet"===t.stretch?(t.scaleX=t.scaleY=Math.min(t.scaleX,t.scaleY),t.scaleOffsetY=(t.pageHeight-e.height*t.scaleX)/2,t.scaleOffsetX=(t.pageWidth-e.width*t.scaleX)/2):"Slice"===t.stretch&&(t.scaleX=t.scaleY=Math.max(t.scaleX,t.scaleY)),e.width=o,e.height=r),e.x*=t.scaleX,e.y*=t.scaleY},t.prototype.diagramAsSvg=function(t,e){var i=this.diagram.createSvg(this.diagram.element.id+"_diagram_svg",t.bounds.width,t.bounds.height);document.body.appendChild(i);var n=Qv("g",{id:this.diagram.element.id+"_pageBackground"}),r=t&&t.region?t.region:"Content",o=this.getDiagramBounds(r,t),s=o.x,a=o.y,l=o.width,h=o.height;i.appendChild(n);var c={x:String(s),y:String(a),width:String(l),height:String(h)};rb(n,c),this.setTransform(n,t.bounds,e);var d=document.getElementById(this.diagram.element.id+"gradient_pattern");d&&i.appendChild(d),c={x:0,y:0,width:String(l+e.left+e.right),height:String(h+e.top+e.bottom)};var p=document.getElementById(this.diagram.element.id+"_backgroundImageLayer").cloneNode(!0);rb(p,c),i.appendChild(p),this.setTransform(p,o,e);var u=document.getElementById(this.diagram.element.id+"_backgroundLayerrect").cloneNode(!0);if(rb(u,c),i.appendChild(u),this.setTransform(u,o,e),"SVG"===this.diagram.mode){var f=void 0,g=void 0,m=Nv(this.diagram.element.id);for(i.appendChild(m.getElementById(this.diagram.diagramLayer.id).cloneNode(!0)),g=0;g<i.childNodes.length;g++)(f=i.childNodes[g]).id===this.diagram.element.id+"_diagramLayer"&&this.setTransform(f,o,e)}else{n=Qv("g",{id:this.diagram.element.id+"_diagramLayer"}),i.appendChild(n),this.setTransform(n,t.bounds,e);var y=new Ab("",null,!0),v=Kv(this.diagram.element.id);this.diagram.renderDiagramElements(i,y,v,!1)}return document.body.removeChild(i),i},t.prototype.setTransform=function(t,e,i){t.setAttribute("transform","translate("+(-e.x+i.left)+", "+(-e.y+i.top)+")")},t.prototype.diagramAsCanvas=function(t,e){var i=t.bounds,n=t.margin,r=t&&t.region?t.region:"Content",o=this.getDiagramBounds(r,t),s=this.diagram.pageSettings.background.color,a=Ib.createCanvas(this.diagram.element.id+"_diagram",t.bounds.width,t.bounds.height),l=a.getContext("2d");l.translate(-i.x,-i.y),l.save(),l.fillStyle=this.diagram.pageSettings.background.color,i="Content"===r?o:i,l.fillRect(i.x,i.y,i.width,i.height);var h=this.diagram.pageSettings.background;if(h&&h.source){o=this.getDiagramBounds(r,t);var c=new Image;c.src=h.source;var d=o.width/c.width,p=o.height/c.height,u=o.x,f=o.y,g=o.width,m=o.height,y=this.isImageExportable(h);if("None"!==h.scale&&"None"!==h.align){var v="Meet"===h.scale?Math.min(d,p):Math.max(d,p);g=v*c.width,m=v*c.height,h.align.indexOf("xmid")>-1?u+=(o.width-g)/2:h.align.indexOf("xmax")>-1&&(u=u+o.width-g),h.align.indexOf("ymid")>-1?f+=(o.height-m)/2:h.align.indexOf("ymax")>-1&&(f=f+o.height-m),"none"!==this.diagram.pageSettings.background.color&&"transparent"!==this.diagram.pageSettings.background.color||(l.fillStyle="white",l.fillRect(o.x*t.scaleX,o.y*t.scaleY,o.width*t.scaleX,o.height*t.scaleY)),y&&l.drawImage(c,u,f,v*c.width,v*c.height)}else y&&l.drawImage(c,u,f,o.width,o.height)}else l.fillStyle="transparent"===s?"white":s,l.fillRect(o.x*t.scaleX-n.left,o.y*t.scaleY-n.top,o.width*t.scaleX+n.left+n.right,t.scaleY*o.height+n.top+n.bottom);var b=this.diagram.pageSettings.background.color,w=this.diagram.pageSettings.width;w&&(l.strokeStyle="none"===b?"transparent":b,l.lineWidth=w,l.strokeRect(o.x*t.scaleX,o.y*t.scaleY,o.width*t.scaleX,o.height*t.scaleY)),l.restore();var S=Kv(this.diagram.element.id),x=new Ab("",null,!1);return this.updateObjectValue(t.scaleX,t.scaleOffsetX,t.scaleOffsetY,!0),this.diagram.renderDiagramElements(a,x,S,!1,!0),this.updateObjectValue(t.scaleX,t.scaleOffsetX,t.scaleOffsetY,!1),a},t.prototype.updateWrapper=function(t,e,i,n,r){if(t&&t.length>0)for(var o=0;o<t.length;o++)t[o].children&&this.updateWrapper(t[o].children,e,i,n,r),t[o].exportScaleValue.x=e,t[o].exportScaleValue.y=e,t[o].exportScaleOffset.x=i,t[o].exportScaleOffset.y=n,t[o].isExport=r},t.prototype.updateObjectValue=function(t,e,i,n){for(var r,o=0;o<this.diagram.nodes.length;o++)r=this.diagram.nodes[o].wrapper,this.updateWrapper(r.children,t,e,i,n),r.exportScaleValue.x=t,r.exportScaleValue.y=t,r.exportScaleOffset.x=e,r.exportScaleOffset.y=i,r.isExport=n;for(var s=0;s<this.diagram.connectors.length;s++){r=this.diagram.connectors[s].wrapper;for(var a=0;a<r.children.length;a++)r.children[a].isExport=n,n&&(r.children[a].exportScaleValue.x=t,r.children[a].exportScaleValue.y=t,r.children[a].exportScaleOffset.x=e,r.children[a].exportScaleOffset.y=i)}},t.prototype.isImageExportable=function(t){var e,i=!0;if(t.source)try{var n=(e=Ib.createCanvas(this.diagram.element.id+"temp_canvas",100,100)).getContext("2d");n.save();var r=new Image;r.src=t.source,n.drawImage(r,0,0,100,100),n.restore(),e.toDataURL()}catch(t){i=!1}return i},t.prototype.getPrintCanvasStyle=function(t,e){var i=0,n=0,r=new Wd;if(i=t.width,n=t.height,(e.pageHeight||e.pageWidth)&&(n=e.pageHeight?e.pageHeight:n,i=e.pageWidth?e.pageWidth:i),e.pageOrientation&&("Landscape"===e.pageOrientation&&n>i||"Portrait"===e.pageOrientation&&i>n)){var o=i;i=n,n=o}return r.height=n,r.width=i,r},t.prototype.getMultipleImage=function(t,e,i){var n,r,o=[],s=Jv("div",{}),a=this.getPrintCanvasStyle(t,e),l=e.margin,h=l.left,c=l.top,d=l.right,p=l.bottom,u=0;n=a.width+u,r=a.height+0;var f=0,g=0;if(e&&e.multiplePage){s.style.height="auto",s.style.width="auto";var m=t.height,y=t.width,v=0,b=0,w=void 0,S=0,x=0,C=void 0,P=void 0;do{do{S=a.width,x=a.height,f+a.width>=y&&(S=y-f),g+a.height>=m&&(x=m-g),(C=(P=Ib.createCanvas(this.diagram.element.id+"_multiplePrint",a.width,a.height)).getContext("2d")).drawImage(t,u+f+h,0+g+c,S-d-h,x-p-c,0+h,0+c,S-d-h,x-p-c),f+a.width>=y&&(f-=f-y),w=P.toDataURL(),C.restore(),f+=n,i?o.push(w):this.printImage(s,w,v+""+b,n+"px;",r+"px;"),v++}while(f<y);b++,v=u=f=0,g+a.height>=m&&(g-=g-m),g+=r}while(g<m)}else{var O,E,L=this.getPrintCanvasStyle(t,e);O=L.width,E=L.height;C=void 0,P=void 0,w=void 0;(C=(P=Ib.createCanvas(this.diagram.element.id+"_diagram",O,E)).getContext("2d")).drawImage(t,0+h,0+c,t.width-(d+h),t.height-(c+p),0+h,0+c,O-(d+h),E-(c+p)),w=P.toDataURL(),C.restore(),i?o.push(w):this.printImage(s,w,0)}return i?o:s},t.prototype.printImage=function(t,e,i,n,r){var o={class:"e-diagram-print-page",style:"width:"+n+"height:"+r},s=Jv("img",o),a=Jv("div",o);sb(s,o={id:this.diagram.element.id+"_multiplePrint_img"+i,style:"float:left",src:e}),a.appendChild(s),t.appendChild(a)},t.prototype.print=function(t){t.mode="Data";var e=this.exportDiagram(t);this.printImages(e,t)},t.prototype.printImages=function(t,e){var i=this,n={id:this.diagram.element.id+"_printImage",src:t};e.margin={top:0,bottom:0,right:0,left:0};var r=Jv("img",n);r.onload=function(){var t=i.getMultipleImage(r,e),n=window.open("");null!=n&&t instanceof HTMLElement&&(n.document.write("<html><head><style> body{margin:0px;}  @media print { .e-diagram-print-page{page-break-after: left; }.e-diagram-print-page:last-child {page-break-after: avoid;}}</style><title></title></head>"),n.document.write('<BODY onload="setTimeout(function(){window.print();}, 100)">'),n.document.write("<center>"+t.innerHTML+"</center>"),n.document.close())}},t.prototype.getDiagramContent=function(t){var e=document.getElementById(this.diagram.element.id+"content"),i=e.scrollLeft,n=e.scrollTop,r=this.diagram.scrollSettings.currentZoom,o=this.diagram.scroller.horizontalOffset,s=this.diagram.scroller.verticalOffset,a=Number(String(this.diagram.width).split("px")[0]),l=Number(String(this.diagram.height).split("px")[0]),h=this.getDiagramBounds("",{});this.diagram.scroller.zoom(1/r);var c,d;c=h.x,d=h.y,this.diagram.scroller.transform={tx:-c,ty:-d,scale:this.diagram.scroller.currentZoom},this.diagram.scroller.horizontalOffset=-c,this.diagram.scroller.verticalOffset=-d,this.diagram.scroller.setSize(),this.diagram.setSize(h.width,h.height);var p=this.diagram.snapSettings.constraints;this.diagram.snapSettings.constraints=this.diagram.snapSettings.constraints&~gp.ShowLines,this.diagram.dataBind(),this.diagram.clearSelection(),t=t||document.styleSheets;for(var u="",f=0;f<t.length;f++)(t[f].href||"string"==typeof t[f])&&(u+="<link href='"+(t[f].href||t[f])+"' rel='stylesheet' />");var g=document.getElementById(this.diagram.element.id+"content").innerHTML;return g=(g=u+"<body style=\"margin: 0px; padding: 0px\"><div style='margin-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;'>"+g+"</div></body>").replace(/ transform: t/g," -webkit-transform: t"),this.diagram.setSize(a,l),this.diagram.scroller.zoom(r/this.diagram.scrollSettings.currentZoom),this.diagram.snapSettings.constraints=p,this.diagram.dataBind(),i||n?this.diagram.setOffset(i,n):(this.diagram.scroller.transform={tx:o/this.diagram.scroller.currentZoom,ty:s/this.diagram.scroller.currentZoom,scale:this.diagram.scroller.currentZoom},this.diagram.scroller.horizontalOffset=o,this.diagram.scroller.verticalOffset=s),this.diagram.renderSelector(!1),Ny()?g.replace("url("+location.protocol+"//"+location.host+location.pathname+"#diagram_pattern ","url(#diagram_pattern)"):g},t.prototype.exportImages=function(t,e){var i=this,n=e&&e.region?e.region:"Content",r=e.margin||{};r={top:isNaN(r.top)?0:r.top,bottom:isNaN(r.bottom)?0:r.bottom,left:isNaN(r.left)?0:r.left,right:isNaN(r.right)?0:r.right};var o=this.getDiagramBounds(n,{});e.bounds&&(o.x=isNaN(e.bounds.x)?o.x:e.bounds.x,o.y=isNaN(e.bounds.y)?o.y:e.bounds.y,o.width=e.bounds.width||o.width,o.height=e.bounds.height||o.height);var s=document.createElement("img");sb(s,{src:t});var a=this;s.onload=function(){var n=Ib.createCanvas(a.diagram.element.id+"innerImage",o.width+(r.left+r.right),o.height+(r.top+r.bottom)),l=n.getContext("2d");if(l.fillStyle=a.diagram.pageSettings.background.color,l.fillRect(0,0,o.width+(r.left+r.right),o.height+(r.top+r.bottom)),l.drawImage(s,0,0,o.width,o.height,r.left,r.top,o.width,o.height),t=n.toDataURL(),e.printOptions)a.printImages(t,e);else{l.restore();var h=e.fileName||"diagram";i.canvasMultiplePage(e,n,r,t,h)}}},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"PrintandExport"},t}(),rS=function(){function t(){this.dataTable={}}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"DataBinding"},t.prototype.initData=function(t,e){var i,n=t.dataManager||t.dataSource||{};(i=n.data||n.json||(n.dataSource?n.dataSource.json:void 0))&&0===i.length&&n.dataSource.data&&(i=n.dataSource.data),i&&i.length&&this.applyDataSource(t,i,e)},t.prototype.initSource=function(t,e){var i,n=this,r=t,o=t;if(r.dataManager instanceof sc||r.dataSource instanceof sc){var s=(o.dataManager||o.dataSource).defaultQuery||new qh;(t.dataManager||t.dataSource).executeQuery(s).then(function(r){i=r.result,e.isDestroyed||(e.protectPropertyChange(!0),n.applyDataSource(t,i,e),e.refreshDiagram(),e.protectPropertyChange(!1),e.trigger("dataLoaded",{diagram:jy(e)}))})}},t.prototype.applyDataSource=function(t,e,i){var n,r,o;this.dataTable={};var s,a,l=[],h=[];if(void 0!==e){for(var c=0;c<e.length;c++)void 0===(n=e[c])[t.parentId]||null===n[t.parentId]||"object"!=typeof n[t.parentId]?void 0!==l[n[t.parentId]]?l[n[t.parentId]].items.push(n):l[n[t.parentId]]={items:[n]}:l=this.updateMultipleRootNodes(n,l,t,e),t.root===n[t.id]&&(r={items:[n]});if(r)h.push(r);else for(var d=0,p=Object.keys(l);d<p.length;d++){var u=p[d];u&&"undefined"!==u&&"''"!==u&&"null"!==u||h.push(l[u])}for(var f=0;f<h.length;f++)for(var g=0;g<h[f].items.length;g++)s=h[f].items[g],o=this.applyNodeTemplate(t,s,i),i.nodes.push(o),this.dataTable[s[t.id]]=o,void 0!==(a=l[o.data[t.id]])&&this.renderChildNodes(t,a,o.id,l,i)}this.dataTable=null},t.prototype.updateMultipleRootNodes=function(t,e,i,n){for(var r,o=t[i.parentId],s=0;s<o.length;s++)e[r=o[s]]?e[r].items.push(t):e[r]={items:[t]};return e},t.prototype.applyNodeTemplate=function(t,e,i){var n={id:cb(),data:e},r=Lb(t.doBinding);r&&r(n,e,i);var o=new Lv(i,"nodes",n,!0);if(Um(o,n,i.nodeDefaults),t.dataMapSettings)for(var s=void 0,a=[],l=[],h=0;h<t.dataMapSettings.length;h++){if(-1!==t.dataMapSettings[h].property.indexOf(".")){l=this.splitString(t.dataMapSettings[h].property);for(var c=0;c<l.length;c++)-1!==l[c].indexOf("[")&&(s=l[c].indexOf("["),a=l[c].split("["));if(s)if(l[2])o[a[0]][l[0].charAt(s+1)][l[1]][l[2]]=e[t.dataMapSettings[h].field];else{var d=e[t.dataMapSettings[h].field];o[a[0]][l[0].charAt(s+1)][l[1]]=d}else l[2]?o[l[0]][l[1]][l[2]]=e[t.dataMapSettings[h].field]:o[l[0]][l[1]]=e[t.dataMapSettings[h].field]}else{var p=t.dataMapSettings[h].property;o[p=p.charAt(0).toLowerCase()+p.slice(1)]=e[t.dataMapSettings[h].field]}s=0,a=[],l=[]}return this.collectionContains(o,i,t.id,t.parentId)?this.dataTable[e[t.id]]:o},t.prototype.splitString=function(t){var e=[];e=t.split(".");for(var i=0;i<e.length;i++)e[i]=e[i].charAt(0).toLowerCase()+e[i].slice(1);return e},t.prototype.renderChildNodes=function(t,e,i,n,r){for(var o,s,a,l=0;l<e.items.length;l++){o=e.items[l],a=this.applyNodeTemplate(t,o,r);var h=!1;this.collectionContains(a,r,t.id,t.parentId)?h=!0:(this.dataTable[o[t.id]]=a,r.nodes.push(a)),this.containsConnector(r,i,a.id)||r.connectors.push(this.applyConnectorTemplate(i,a.id,r)),h||void 0!==(s=n[a.data[t.id]])&&this.renderChildNodes(t,s,a.id,n,r)}},t.prototype.containsConnector=function(t,e,i){if(""!==e&&""!==i)for(var n=0;n<t.connectors.length;n++){var r=t.connectors[n];if(void 0!==r&&r.sourceID===e&&r.targetID===i)return!0}return!1},t.prototype.collectionContains=function(t,e,i,n){var r=this.dataTable[t.data[i]];return void 0!==r&&r.data[i]===t.data[i]&&r.data[n]===t.data[n]},t.prototype.applyConnectorTemplate=function(t,e,i){var n={id:cb(),sourceID:t,targetID:e},r=new Gf(i,"connectors",n,!0);return Um(r,n,i.connectorDefaults),r},t}(),oS=(function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),sS=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},aS=function(t){function e(e,i){return t.call(this,e,i)||this}return oS(e,t),e.prototype.preRender=function(){this.isMenu=!1,this.element.id=this.element.id||U("ej2-contextmenu"),t.prototype.preRender.call(this)},e.prototype.initialize=function(){t.prototype.initialize.call(this),hi(this.element,{role:"context menu",tabindex:"0"}),this.element.style.zIndex=po(this.element).toString()},e.prototype.open=function(e,i,n){t.prototype.openMenu.call(this,null,null,e,i,null,n)},e.prototype.close=function(){t.prototype.closeMenu.call(this)},e.prototype.onPropertyChanged=function(e,i){t.prototype.onPropertyChanged.call(this,e,i);for(var n=0,r=Object.keys(e);n<r.length;n++){switch(r[n]){case"filter":this.close(),this.filter=e.filter;break;case"target":this.unWireEvents(i.target),this.wireEvents()}}},e.prototype.getModuleName=function(){return"contextmenu"},sS([Hi("")],e.prototype,"target",void 0),sS([Hi("")],e.prototype,"filter",void 0),sS([Fi([],id)],e.prototype,"items",void 0),e=sS([Gi],e)}(rd),lS=(function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}l((n=n.apply(t,e||[])).next())})}),hS=function(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},cS=".e-diagramcontent",dS="e-copy",pS="e-paste",uS="e-undo",fS="e-redo",gS="e-cut",mS="e-group",yS="e-ungroup",vS="e-bringfront",bS="e-sendback",wS="e-bringforward",SS="e-sendbackward",xS="e-order",CS=function(){function t(t,e){this.defaultItems={},this.disableItems=[],this.hiddenItems=[],this.localeText=this.setLocaleKey(),this.parent=t,this.serviceLocator=e,this.addEventListener()}return t.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on("initial-load",this.render,this)},t.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off("initial-load",this.render)},t.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.element=Jv("ul",{id:this.parent.element.id+"_contextMenu"}),this.parent.element.appendChild(this.element);var t="#"+this.parent.element.id;this.contextMenu=new aS({items:this.getMenuItems(),enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,target:t,select:this.contextMenuItemClick.bind(this),beforeOpen:this.contextMenuBeforeOpen.bind(this),onOpen:this.contextMenuOpen.bind(this),beforeItemRender:this.BeforeItemRender.bind(this),onClose:this.contextMenuOnClose.bind(this),cssClass:"e-diagram-menu",animationSettings:{effect:"None"}}),this.contextMenu.appendTo(this.element)},t.prototype.getMenuItems=function(){var t=[],e=[],i=[];if(!this.parent.contextMenuSettings.showCustomMenuOnly){for(var n=0,r=this.getDefaultItems();n<r.length;n++){var o=r[n];-1!==o.toLocaleLowerCase().indexOf("group")?"grouping"!==o.toLocaleLowerCase()&&i.push(this.buildDefaultItems(o)):-1!==o.toLocaleLowerCase().indexOf("order")?"order"!==o.toLocaleLowerCase()&&e.push(this.buildDefaultItems(o)):t.push(this.buildDefaultItems(o))}var s;if(i.length>0)(s=this.buildDefaultItems("grouping")).items=i,t.push(s);if(e.length>0)(s=this.buildDefaultItems("order")).items=e,t.push(s)}if(this.parent.contextMenuSettings.items)for(var a=0,l=this.parent.contextMenuSettings.items;a<l.length;a++){var h=l[a];t.push(h)}return t},t.prototype.contextMenuOpen=function(){this.isOpen=!0},t.prototype.BeforeItemRender=function(t){this.parent.trigger("contextMenuBeforeItemRender",t)},t.prototype.contextMenuItemClick=function(t){document.getElementById(this.parent.element.id+"content").focus(),this.parent.trigger("contextMenuClick",t);var e=this.getKeyFromId(t.item.id);if(!t.cancel)switch(e){case"cut":this.parent.cut();break;case"copy":this.parent.copy();break;case"undo":this.parent.undo();break;case"redo":this.parent.redo();break;case"paste":this.parent.paste();break;case"selectAll":this.parent.selectAll();break;case"group":this.parent.group();break;case"unGroup":this.parent.unGroup();break;case"bringToFrontOrder":this.parent.bringToFront();break;case"moveForwardOrder":this.parent.moveForward();break;case"sendToBackOrder":this.parent.sendToBack();break;case"sendBackwardOrder":this.parent.sendBackward()}},t.prototype.contextMenuOnClose=function(t){t.items.length>0&&t.items[0].parentObj instanceof aS&&this.updateItemStatus()},t.prototype.getLocaleText=function(t){return this.l10n.getConstant(this.localeText[t])},t.prototype.updateItemStatus=function(){this.contextMenu.showItems(this.hiddenItems,!0),this.contextMenu.enableItems(this.disableItems,!1,!0),this.hiddenItems=[],this.disableItems=[],this.isOpen=!1},t.prototype.ensureItems=function(t,e){var i=this.getKeyFromId(t.id);this.defaultItems[i];-1!==this.getDefaultItems().indexOf(i)&&t.target&&(e||this.parent.checkMenu)&&!this.ensureTarget(t)&&this.hiddenItems.push(t.id)},t.prototype.contextMenuBeforeOpen=function(t){return lS(this,void 0,void 0,function(){var e,i,n,r,o,s,a,l,h,c;return hS(this,function(d){switch(d.label){case 0:for(this.parent.checkMenu||-1===window.navigator.userAgent.indexOf("Linux")&&-1===window.navigator.userAgent.indexOf("X11")||(this.parent.checkMenu=t.cancel=!0),this.parent.checkMenu&&(this.hiddenItems=[]),(e=t).hiddenItems=[],i=0,n=t.items;i<n.length;i++)if(c=n[i],this.ensureItems(c,t.event),c.items.length)for(r=0,o=c.items;r<o.length;r++)s=o[r],this.ensureItems(s,t.event);return this.eventArgs=t.event,$()?[4,this.parent.trigger("contextMenuOpen",e)]:[3,2];case 1:return"string"==typeof(e=d.sent()||e)&&(e=JSON.parse(e)),[3,3];case 2:this.parent.trigger("contextMenuOpen",e),d.label=3;case 3:for(a=!0,this.hiddenItems=this.hiddenItems.concat(e.hiddenItems),this.contextMenu.enableItems(this.disableItems,!1,!0),l=this,h=0;h<t.items.length;h++)c=t.items[h],l.hiddenItems.indexOf(c.id)>-1&&l.contextMenu.hideItems([c.id],!0);for(h=0;h<l.contextMenu.items.length;h++)c=l.contextMenu.items[h],-1===l.hiddenItems.indexOf(c.id)&&(a=!1,l.contextMenu.showItems([c.id],!0));return a&&(e.cancel=a,this.hiddenItems=[]),this.parent.selectedItems.nodes.length&&this.parent.selectedItems.nodes[0].isPhase&&(t.cancel=!0),[2]}})})},t.prototype.ensureTarget=function(t){var e=this.parent.selectedItems.nodes.length+this.parent.selectedItems.connectors.length,i=!1;switch(this.getKeyFromId(t.id)){case"undo":i=!(!this.parent.historyManager||!this.parent.historyManager.canUndo);break;case"redo":i=!(!this.parent.historyManager||!this.parent.historyManager.canRedo);break;case"paste":i=!!this.parent.commandHandler.clipboardData.clipObject;break;case"selectAll":i=!!(this.parent.nodes.length+this.parent.connectors.length);break;case"grouping":i=!!(e>1||this.parent.selectedItems.nodes[0]&&this.parent.selectedItems.nodes[0].children&&this.parent.selectedItems.nodes[0].children.length>1);break;case"group":i=e>1;break;case"unGroup":i=!!(this.parent.selectedItems.nodes[0]&&this.parent.selectedItems.nodes[0].children&&this.parent.selectedItems.nodes[0].children.length>1);break;case"cut":case"copy":case"order":case"bringToFrontOrder":case"moveForwardOrder":case"sendToBackOrder":case"sendBackwardOrder":i=!!e}return i},t.prototype.destroy=function(){this.contextMenu.destroy(),li(this.element),this.removeEventListener()},t.prototype.getModuleName=function(){return"contextMenu"},t.prototype.generateID=function(t){return this.parent.element.id+"_contextMenu_"+t},t.prototype.getKeyFromId=function(t){return t.replace(this.parent.element.id+"_contextMenu_","")},t.prototype.buildDefaultItems=function(t){var e;switch(t){case"copy":e={target:cS,iconCss:dS};break;case"cut":e={target:cS,iconCss:gS};break;case"paste":e={target:cS,iconCss:pS};break;case"undo":e={target:cS,iconCss:uS};break;case"redo":e={target:cS,iconCss:fS};break;case"grouping":e={target:cS};break;case"group":e={target:cS,iconCss:mS};break;case"unGroup":e={target:cS,iconCss:yS};break;case"order":e={target:cS,iconCss:xS};break;case"bringToFrontOrder":e={target:cS,iconCss:vS};break;case"moveForwardOrder":e={target:cS,iconCss:wS};break;case"sendToBackOrder":e={target:cS,iconCss:bS};break;case"sendBackwardOrder":e={target:cS,iconCss:SS};break;case"selectAll":e={target:cS}}return this.defaultItems[t]={text:this.getLocaleText(t),id:this.generateID(t),target:e.target,iconCss:e.iconCss?"e-icons "+e.iconCss:""},this.defaultItems[t]},t.prototype.getDefaultItems=function(){return["copy","cut","paste","undo","redo","selectAll","grouping","group","unGroup","order","bringToFrontOrder","moveForwardOrder","sendToBackOrder","sendBackwardOrder"]},t.prototype.setLocaleKey=function(){return{copy:"Copy",cut:"Cut",paste:"Paste",undo:"Undo",redo:"Redo",selectAll:"SelectAll",grouping:"Grouping",group:"Group",unGroup:"UnGroup",order:"Order",bringToFrontOrder:"BringToFront",moveForwardOrder:"MoveForward",sendToBackOrder:"SendToBack",sendBackwardOrder:"SendBackward"}},t}(),PS=function(){function t(){this.annotationObjects={}}return Object.defineProperty(t.prototype,"textAnnotationConnectors",{get:function(){for(var t=[],e=0,i=Object.keys(this.annotationObjects);e<i.length;e++)for(var n=i[e],r=this.annotationObjects[n],o=0,s=Object.keys(r);o<s.length;o++){var a=s[o];t.push(r[a].connector)}return t},enumerable:!0,configurable:!0}),t.prototype.getTextAnnotationConn=function(t){var e=[];if("Bpmn"===t.shape.type&&0!==t.shape.annotations.length)for(var i=this.annotationObjects[t.id],n=0,r=Object.keys(i);n<r.length;n++){var o=r[n];e.push(i[o].connector)}return e},t.prototype.getSize=function(t,e){var i=new Wd(t.width,t.height);if(void 0===i.width||void 0===i.height){if(e instanceof ru||(i.width=i.width||50,i.height=i.height||50),e.actualSize.width&&e.actualSize.height)return e.actualSize;e.measure(new Wd),i.width=i.width||e.desiredSize.width,i.height=i.height||e.desiredSize.height,void 0!==t.maxWidth&&(i.width=Math.min(i.width,t.maxWidth)),void 0!==t.maxHeight&&(i.height=Math.min(i.height,t.maxHeight)),void 0!==t.minWidth&&(i.width=Math.max(i.width,t.minWidth)),void 0!==t.minHeight&&(i.height=Math.max(i.height,t.minHeight))}return i},t.prototype.initBPMNContent=function(t,e,i){var n=($(),e.shape),r=$()?e.shape.bpmnShape:e.shape.shape;if("Event"===r&&(t=this.getBPMNEventShape(e,n.event)),"Gateway"===r&&(t=this.getBPMNGatewayShape(e)),"DataObject"===r&&(t=this.getBPMNDataObjectShape(e)),"Message"!==r&&"DataSource"!==r||(t=this.getBPMNShapes(e)),"Activity"===r&&(t=this.getBPMNActivityShape(e)),"TextAnnotation"===r&&(t=this.renderBPMNTextAnnotation(i,e,t)),n.annotations.length>0){for(var o=0;o<n.annotations.length&&n.annotations[o].text;o++)t.children.push(this.getBPMNTextAnnotation(e,i,n.annotations[o],t));t.style.strokeDashArray="2 2 6 2"}return t},t.prototype.getBPMNShapes=function(t){var e=new ru;this.setStyle(e,t),0!=(t.constraints&bp.Shadow)&&(e.shadow=t.shadow);var i=OS($()?t.shape.bpmnShape:t.shape.shape);return e.data=i,e.id=t.id+"_"+($()?t.shape.bpmnShape:t.shape.shape),void 0!==t.width&&void 0!==t.height&&(e.width=t.width,e.height=t.height),e},t.prototype.getBPMNGatewayShape=function(t){var e=new tu,i=new ru;i.id=t.id+"_0_gateway",i.offsetX=t.offsetX,i.offsetY=t.offsetY,i.data="M 40 20 L 20 40 L 0 20 L 20 0 L 40 20 Z",this.setStyle(i,t);var n=new ru;n.id=t.id+"_1_gatewayType",n.style.opacity=t.style.opacity,n.style.strokeColor=t.style.strokeColor,n.horizontalAlignment="Center",n.verticalAlignment="Center",n.relativeMode="Object";var r,o=t.shape.gateway;r=LS(o.type),"EventBased"===o.type||"ExclusiveEventBased"===o.type||"ParallelEventBased"===o.type?n.style.fill="white":n.style.fill="black",n.data=r,e.style.fill="transparent",e.style.strokeColor="transparent",e.style.strokeWidth=0,e.children=[i,n];var s=this.getSize(t,i);return this.setSizeForBPMNGateway(t.shape.gateway,e,s.width,s.height),e},t.prototype.getBPMNDataObjectShape=function(t){var e=new tu,i=t.shape.dataObject,n=new ru;n.id=t.id+"_0_dataobj",n.data="M29.904,5 L7.853,5 L7.853,45 L42.147,45 L42.147,17.242,L29.932,5,L29.932,17.242,L42.147,17.242";var r=this.getSize(t,n);n.width=r.width,n.height=r.height,this.setStyle(n,t);var o=new ru;o.id=t.id+"_1_type",o.width=25,o.height=20,o.margin.left=5,o.margin.top=5,o.data="M 3 9.4 l 6 0 v 2.4 l 3.6 -4 L 9 4 v 2.5 H 3 V 9.4 Z",o.style.opacity=t.style.opacity;var s=new ru;switch(s.id=t.id+"_2_collection",s.width=7.5,s.height=15,s.style.fill="black",s.visible=!0,s.horizontalAlignment="Center",s.verticalAlignment="Bottom",s.relativeMode="Object",s.style.opacity=t.style.opacity,s.data="M 0 0 L 0.1 0 L 0.1 2 L 0 2 Z M 0.4 0 L 0.6 0 L 0.6 2 L0.4 2 Z M 0.9 0 L 1 0 L 1 2 L 0.9 2 Z",i.type){case"None":o.visible=!1;break;case"Input":o.style.fill="white";break;case"Output":o.style.fill="black"}return!1===i.collection&&(s.visible=!1),e.style.fill="transparent",e.style.strokeColor="transparent",e.style.strokeWidth=0,e.children=[n,o,s],e},t.prototype.getBPMNTaskShape=function(t){var e=t.shape.activity.task,i=new tu,n=new Yp;n.cornerRadius=10;var r=this.getSize(t,n);n.id=t.id+"_0_task",n.width=r.width,n.height=r.height,this.setStyle(n,t),void 0!==e.call&&!0===e.call&&(n.style.strokeWidth=4),i.width=r.width,i.height=r.height;var o,s=this.getTaskChildCount(t),a=12*s,l=r.width/2-a;o=1===s?l+8:l+8*(s-1);var h,c=new ru;if("Receive"===e.type||"Send"===e.type?(c.width=18,c.height=16):(c.width=20,c.height=20),c.id=t.id+"_1_tasktType",c.margin.left=5,c.margin.top=5,h=IS(e.type),c.data=h,c.style.fill="transparent",c.style.opacity=t.style.opacity,i.style.fill="transparent",i.style.strokeColor="transparent",i.style.strokeWidth=0,i.children=[n,c],"Service"===e.type){var d=new ru;d.id=t.id+"_1_taskTypeService",d.data=h,d.margin.left=c.margin.left+9,d.margin.top=c.margin.top+9,d.style.fill="white",d.style.opacity=t.style.opacity,i.children.push(d)}var p,u=e.loop,f=new ru;p=TS(u),f.data=p,f.style.fill="black",f.visible="None"!==u,1===s&&(o=l+9),f.margin.left=o,!0===f.visible&&(o+=20),f.width=12,f.height=12,f.margin.bottom=5,f.id=t.id+"_2_loop",f.horizontalAlignment="Left",f.verticalAlignment="Bottom",f.setOffsetWithRespectToBounds(0,1,"Fraction"),f.relativeMode="Point",f.style.fill="transparent",c.style.opacity=t.style.opacity,i.children.push(f);var g=new ru;return g=this.getBPMNCompensationShape(t,g),!0===e.compensation?g.visible=!0:g.visible=!1,1===s&&(o=l+9),g.margin.left=o-3,o+=18,i.children.push(g),i},t.prototype.getBPMNEventShape=function(t,e,i,n){var r,o,s,a,l=new tu;n=n||t.id;var h="M164.1884,84.6909000000001C156.2414,84.6909000000001,149.7764,78.2259000000001,149.7764,70.2769000000001C149.7764,62.3279000000001,156.2414,55.8629000000001,164.1884,55.8629000000001C172.1354,55.8629000000001,178.6024,62.3279000000001,178.6024,70.2769000000001C178.6024,78.2259000000001,172.1354,84.6909000000001,164.1884,84.6909000000001",c=t.shape.event;if((!$()&&"Event"===t.shape.shape||$()&&"Event"===t.shape.bpmnShape)&&(r=c.event,o=c.trigger),s=e.width,a=e.height,i)s=s||20,a=a||20;else if(void 0===e.width||void 0===e.height){var d=new ru;d.data=h;var p=this.getSize(t,d);s=p.width,a=p.height}var u=t.shape.activity;if(!$()&&"Activity"===t.shape.shape||$()&&"Activity"===t.shape.bpmnShape){u.subProcess;r=e.event,o=e.trigger}var f=new ru;f.data=h,f.id=n+"_0_event",f.width=s,f.height=a,f.horizontalAlignment="Center",f.verticalAlignment="Center",f.relativeMode="Object",this.setStyle(f,t);var g=new ru;g.data=h,g.id=n+"_1_event",g.style.gradient=t.style.gradient,g.horizontalAlignment="Center",g.verticalAlignment="Center",g.relativeMode="Object",g.style.strokeColor=t.style.strokeColor,g.style.opacity=t.style.opacity;var m=new ru,y=ES(o);switch(m.data=y,m.id=n+"_2_trigger",m.horizontalAlignment="Center",m.verticalAlignment="Center",m.relativeMode="Object",m.style.strokeColor=t.style.strokeColor,m.style.opacity=t.style.opacity,r){case"Start":g.visible=!1;break;case"NonInterruptingStart":f.style.strokeDashArray="2 3",g.visible=!1;break;case"Intermediate":f.style.fill="white",f.style.gradient=null;break;case"NonInterruptingIntermediate":f.style.fill="white",f.style.gradient=null,f.style.strokeDashArray="2 3",g.style.strokeDashArray="2 3";break;case"ThrowingIntermediate":case"End":f.style.fill="End"!==r?"white":"black",f.style.gradient=null,m.style.fill="black",m.style.strokeColor="white"}return l.style.fill="transparent",l.style.strokeColor="transparent",l.style.strokeWidth=0,l.children=[f,g,m],this.setSizeForBPMNEvents(c,l,s,a),l},t.prototype.setEventVisibility=function(t,e){var i=t.shape.event.event,n=e[0],r=e[1];e[2];switch(i){case"Start":r.visible=!1;break;case"NonInterruptingStart":n.style.strokeDashArray="2 3",r.visible=!1}},t.prototype.setSubProcessVisibility=function(t){var e=t.shape.activity.subProcess,i=e.events.length,n="Transaction"===t.shape.activity.subProcess.type?2:0,r=t.wrapper.children[0].children[0];if(!1===e.adhoc&&(r.children[3+n+i].visible=!1),!1===e.compensation&&(r.children[4+n+i].visible=!1),i>0)for(var o=0;o<i;o++)this.setEventVisibility(t,r.children[2+o].children)},t.prototype.getBPMNSubProcessShape=function(t){var e,i,n,r=new tu,o=new ru,s=(new tu,new ru),a=t.shape.activity,l=a.subProcess,h=this.getSubprocessChildCount(t),c=new Yp;c.id=t.id+"_0_Subprocess",c.style.fill="transparent",c.cornerRadius=10;var d=this.getSize(t,c);c.width=d.width,c.height=d.height,r.children=[c],"Transaction"===a.subProcess.type&&this.getBPMNSubProcessTransaction(t,t.shape,r);var p=12*h,u=d.width/2;n=1===h?u-6:u-p/2-4*(h-1)/2,this.setStyle(c,t),0!=(t.constraints&bp.Shadow)&&(r.shadow=t.shadow);var f=new ru;if(f.id=t.id+"_0_collapsed",f.width=12,f.height=12,f.style.fill="black",f.style.strokeColor=t.style.strokeColor,f.margin.bottom=5,f.horizontalAlignment="Left",f.verticalAlignment="Bottom",f.setOffsetWithRespectToBounds(0,1,"Fraction"),f.relativeMode="Point",f.data=OS("collapsedShape"),f.margin.left=n,!0!==l.collapsed||l.processes?f.visible=!1:f.visible=!0,!0===f.visible&&(n+=18),r.children.push(f),"Event"===l.type){c.style.strokeWidth=1,c.style.strokeDashArray="2 2",e=l.events;for(var g=0;g<e.length;g++)i=e[g],this.getBPMNSubEvent(i,t,r)}1===h&&(n=u+8),(s=this.getBPMNSubProcessLoopShape(t)).margin.left=n,!0===s.visible&&(n+=16),r.children.push(s),c.id=t.id+"_boundary","Default"===l.boundary&&(c.style.strokeWidth=1,c.style.strokeDashArray="1 0"),"Call"===l.boundary&&(c.style.strokeWidth=4,c.style.strokeDashArray="1 0"),"Event"===l.boundary&&(c.style.strokeWidth=1,c.style.strokeDashArray="2 2"),1===h&&(n=u+8),(o=this.getBPMNAdhocShape(t,o,l)).margin.left=n,!0===o.visible&&(n+=16),r.children.push(o);var m=new ru;return!0===l.compensation?m.visible=!0:m.visible=!1,1===h&&(n=u+8),(m=this.getBPMNCompensationShape(t,m)).margin.left=n,!0===m.visible&&(n+=16),r.children.push(m),r.style.strokeColor="transparent",r.style.strokeWidth=0,r.style.fill="transparent",r},t.prototype.getBPMNSubEvent=function(t,e,i,n){var r;i.children=i.children||[],r=this.getBPMNEventShape(e,t,!0,n),this.getBPMNSubprocessEvent(e,r,t),r.id=n||e.id+"_subprocessEvents",r.width=t.width||20,r.height=t.height||20,r.setOffsetWithRespectToBounds(t.offset.x,t.offset.y,"Fraction"),r.relativeMode="Point",r.margin=t.margin,r.horizontalAlignment=t.horizontalAlignment,r.verticalAlignment=t.verticalAlignment,r.style.fill="transparent",r.style.strokeColor="transparent",r.style.strokeWidth=0,i.children.push(r)},t.prototype.getBPMNSubProcessTransaction=function(t,e,i){var n=i.children[0].width,r=i.children[0].height,o=new Yp;o.margin={left:3,right:0,top:3,bottom:0},o.id=t.id+"_0_Subprocess_innnerRect",o.cornerRadius=10,o.width=n-6,o.height=r-6,i.children.push(o);var s=new tu;s.id=t.id+"_transaction_events",s.style.gradient=t.style.gradient;var a=e.activity.subProcess.transaction;this.getBPMNSubEvent(a.success,t,s,t.id+"_success"),this.getBPMNSubEvent(a.cancel,t,s,t.id+"_cancel"),this.getBPMNSubEvent(a.failure,t,s,t.id+"_failure"),this.updateDiagramContainerVisibility(s.children[0],a.success.visible),this.updateDiagramContainerVisibility(s.children[1],a.cancel.visible),this.updateDiagramContainerVisibility(s.children[2],a.failure.visible),s.float=!0,s.width=n,s.height=r,s.style.fill=s.style.strokeColor="transparent",i.children.push(s)},t.prototype.getBPMNSubProcessLoopShape=function(t){var e,i,n=t.shape.activity,r=new ru;return i=TS(e=n.subProcess.loop),r.visible="None"!==e,r.id=t.id+"_loop",r.data=i,r.style.fill="black",r.width=12,r.height=12,r.horizontalAlignment="Left",r.verticalAlignment="Bottom",r.setOffsetWithRespectToBounds(0,1,"Fraction"),r.relativeMode="Point",r.margin.bottom=5,r.style.fill="transparent",r.style.strokeColor=t.style.strokeColor,r},t.prototype.drag=function(t,e,i,n){var r=n.nameTable[t.processId];t.margin.top+i>=0&&n.nodePropertyChange(t,{},{margin:{top:t.margin.top+i}}),t.margin.left+e>=0&&n.nodePropertyChange(t,{},{margin:{left:t.margin.left+e}});var o=this.getChildrenBound(r,t.id,n);this.updateSubProcessess(o,t,n),r.wrapper.measure(new Wd(void 0,void 0)),r.wrapper.arrange(r.wrapper.desiredSize),n.refreshCanvasLayers(),n.updateSelector(),this.updateDocks(t,n)},t.prototype.dropBPMNchild=function(t,e,i){if(e&&"Bpmn"===e.shape.type&&"Bpmn"===t.shape.type&&(!$()&&"TextAnnotation"!==e.shape.shape||$()&&"TextAnnotation"!==e.shape.bpmnShape)){var n=i.nameTable[t.id].shape.activity.subProcess;if(i.currentSymbol&&"Bpmn"===t.shape.type&&!n.collapsed)return void(e.processId=t.id);if(n.processes=n.processes||[],n.processes&&-1===n.processes.indexOf(e.id)&&!n.collapsed){n.processes.push(e.id);var r=gb(e),o=i.nameTable[e.id].wrapper,s=i.nameTable[t.id].wrapper;o.margin.top=o.offsetY-o.actualSize.height/2-(t.offsetY-t.actualSize.height/2),o.margin.left=o.offsetX-o.actualSize.width/2-(t.offsetX-t.actualSize.width/2),o.margin.top=o.margin.top<0?0:o.margin.top,o.margin.left=o.margin.left<0?0:o.margin.left,i.nameTable[e.id].processId=t.id,s.children.push(i.nameTable[e.id].wrapper);var a=this.getChildrenBound(t,e.id,i);this.updateSubProcessess(a,e,i),s.measure(new Wd(void 0,void 0)),s.arrange(s.desiredSize),i.refreshCanvasLayers(),i.updateSelector();for(var l=[],h=(l=l.concat(e.outEdges,e.inEdges)).length-1;h>=0;h--)-1===i.bpmnModule.textAnnotationConnectors.indexOf(i.nameTable[l[h]])&&i.remove(i.nameTable[l[h]]);var c={type:"PositionChanged",undoObject:{nodes:[r]},redoObject:{nodes:[gb(e)]},category:"Internal"};i.addHistoryEntry(c),"SVG"===i.mode&&e.zIndex<t.zIndex&&i.updateProcesses(e),this.updateDocks(e,i)}}},t.prototype.updateDocks=function(t,e){if("Bpmn"===t.shape.type&&t.shape.activity.subProcess.processes&&!t.shape.activity.subProcess.collapsed)for(var i=0,n=t.shape.activity.subProcess.processes;i<n.length;i++){var r=n[i],o=e.nameTable[r];o&&(e.updateConnectorEdges(o),o.wrapper.measure(new Wd(o.wrapper.width,o.wrapper.height)),o.wrapper.arrange(o.wrapper.desiredSize),o.shape.activity.subProcess.processes&&o.shape.activity.subProcess.processes.length&&this.updateDocks(o,e))}},t.prototype.removeBpmnProcesses=function(t,e){var i=e.nameTable[t.processId];if("Bpmn"===t.shape.type&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0)for(var n=(r=t.shape.activity.subProcess.processes).length-1;n>=0;n--)e.remove(e.nameTable[r[n]]);if(i){e.removeDependentConnector(t);var r=i.shape.activity.subProcess.processes;this.removeChildFromBPMN(i.wrapper,t.id);var o=r.indexOf(t.id);r.splice(o,1)}},t.prototype.removeChildFromBPMN=function(t,e){for(var i=0,n=t.children;i<n.length;i++){var r=n[i];r.id===e?t.children.splice(t.children.indexOf(r),1):r.children&&this.removeChildFromBPMN(r,e)}},t.prototype.removeProcess=function(t,e){var i=e.nameTable[t];if(i){var n=e.nameTable[i.processId];if(n&&"Bpmn"===n.shape.type){var r=n.shape.activity.subProcess.processes;e.removeDependentConnector(i),this.removeChildFromBPMN(n.wrapper,t);var o=r.indexOf(t);r.splice(o,1),i.processId="",e.refreshDiagramLayer(),e.updateSelector()}}},t.prototype.addProcess=function(t,e,i){var n;t.id=t.id||cb(),n=t.id;var r=i.nameTable[n];r||i.add(t),t.processId=e;var o=i.nameTable[e],s=o.shape.activity.subProcess;if(r&&o&&"Bpmn"===o.shape.type&&"Bpmn"===r.shape.type&&s.processes){r.processId=e;var a=o.shape.activity.subProcess.processes;if(a.indexOf(n)<0&&a.push(n),o.wrapper.children.push(r.wrapper),o.wrapper.measure(new Wd),o.wrapper.arrange(o.wrapper.desiredSize),i.bpmnModule.updateDocks(o,i),i.refreshDiagramLayer(),"SVG"===i.mode&&r.shape&&r.shape.activity&&!r.shape.activity.subProcess.processes)Hv(e+"_groupElement").appendChild(Hv(t.id+"_groupElement"))}},t.prototype.getChildrenBound=function(t,e,i){var n,r=t.shape.activity.subProcess.processes;if(r&&r.length)for(var o=0,s=r;o<s.length;o++){var a=s[o];e!==a&&(n=n?i.nameTable[a].wrapper.bounds.uniteRect(n):i.nameTable[a].wrapper.bounds)}return n||i.nameTable[e].wrapper.bounds},t.prototype.updateSubProcessess=function(t,e,i){var n,r,o,s,a=i.nameTable[e.processId],l={x:.5,y:.5};a.wrapper.bounds.left+e.margin.left+e.width>a.wrapper.bounds.right&&(o=!0),a.wrapper.bounds.top+e.margin.top+e.height>a.wrapper.bounds.bottom&&(s=!0),o&&(l.x=0),s&&(l.y=0);var h=a.wrapper.actualSize;o&&(n=(e.wrapper.margin.left+e.wrapper.bounds.width)/h.width),s&&(r=(e.wrapper.margin.top+e.wrapper.bounds.height)/h.height),(n>0||r>0)&&i.commandHandler.scale(i.nameTable[e.processId],n||1,r||1,l)},t.prototype.getBPMNCompensationShape=function(t,e){return e.id=t.id+"_0_compensation",e.width=12,e.height=12,e.margin.bottom=5,e.style.fill="transparent",e.style.strokeColor=t.style.strokeColor,e.horizontalAlignment="Left",e.verticalAlignment="Bottom",e.relativeMode="Object",e.data="M 22.462 18.754 l -6.79 3.92 l 6.79 3.92 V 22.89 l 6.415 3.705 v -7.841 l -6.415 3.705 V 18.754 Z M 28.331 19.701 v 5.947 l -5.149 -2.973 L 28.331 19.701 Z M 21.916 25.647 l -5.15 -2.973 l 5.15 -2.973 V 25.647 Z M 22.275 12.674 c -5.513 0 -9.999 4.486 -9.999 9.999 c 0 5.514 4.486 10.001 9.999 10.001 c 5.514 0 9.999 -4.486 9.999 -10.001 C 32.274 17.16 27.789 12.674 22.275 12.674 Z M 22.275 32.127  c -5.212 0 -9.453 -4.241 -9.453 -9.454 c 0 -5.212 4.241 -9.453 9.453 -9.453 c 5.212 0 9.453 4.241 9.453 9.453 C 31.728 27.887 27.487 32.127 22.275 32.127 Z",e},t.prototype.getBPMNActivityShape=function(t){var e,i=new tu,n=t.shape.activity,r=n.activity,o=n.subProcess;n.activity;return"Task"===r&&(e=this.getBPMNTaskShape(t)),"SubProcess"===r&&o&&(e=this.getBPMNSubProcessShape(t)),e.id=r+t.id,i.children=[e],i.style.fill="transparent",i.style.strokeColor="transparent",i.style.strokeWidth=0,i},t.prototype.getBPMNSubprocessEvent=function(t,e,i){var n,r;if(0!==i.annotations.length)for(var o=0;o<i.annotations.length;o++){var s=i.annotations[o];(n=t.initAnnotationWrapper(s)).width=i.width,n.height=i.height,e.children.push(n)}if(0!==i.ports.length)for(o=0;o<i.ports.length;o++){var a=i.ports[o];r=t.initPortWrapper(a),e.children.push(r)}},t.prototype.getBPMNAdhocShape=function(t,e,i){return e.id=t.id+"_0_adhoc",e.width=12,e.height=8,e.style.fill="black",e.style.strokeColor=t.style.strokeColor,e.margin.bottom=5,e.horizontalAlignment="Left",e.verticalAlignment="Bottom",e.relativeMode="Object",e.data="M 49.832 76.811 v -2.906 c 0 0 0.466 -1.469 1.931 -1.5 c 1.465 -0.031 2.331 1.219 2.897 1.688 s 1.06 0.75 1.526 0.75 c 0.466 0 1.548 -0.521 1.682 -1.208 s 0.083 3.083 0.083 3.083 s -0.76 0.969 -1.859 0.969 c -1.066 0 -1.865 -0.625 -2.464 -1.438 s -1.359 -0.998 -2.064 -0.906 C 50.598 75.467 49.832 76.811 49.832 76.811 Z",i&&!0===i.adhoc?e.visible=!0:e.visible=!1,e},t.prototype.getBPMNTextAnnotation=function(t,e,i,n){i.id=i.id||cb(),i.nodeId=t.id;var r=new tu,o=new ru,s=new Qp;o.id=t.id+"_"+i.id+"_path",o.width=i.width,o.height=i.height,o.relativeMode="Object",s.id=t.id+"_"+i.id+"_text",s.content=i.text;var a=t.style;s.style={fontSize:a.fontSize,italic:a.italic,gradient:null,opacity:a.opacity,bold:a.bold,textWrapping:a.textWrapping,color:a.color,fill:"white",fontFamily:a.fontFamily,whiteSpace:a.whiteSpace,textOverflow:"Wrap",strokeColor:"none",strokeWidth:0,strokeDashArray:a.strokeDashArray,textAlign:a.textAlign,textDecoration:a.textDecoration},s.horizontalAlignment="Center",s.verticalAlignment="Center",s.relativeMode="Object",s.margin={left:5,right:5,top:5,bottom:5},r.offsetX=t.offsetX+i.length*Math.cos(i.angle*(Math.PI/180)),r.offsetY=t.offsetY+i.length*Math.sin(i.angle*(Math.PI/180)),r.float=!0,r.transform=Pp.Self,r.id=t.id+"_textannotation_"+i.id,r.style.strokeColor="transparent",r.margin={left:10,right:10,top:10,bottom:10},r.relativeMode="Object",r.rotateAngle=0,r.children=[o,s];var l=new Lv(t.shape,"annotations",{id:r.id,shape:{type:"Bpmn",shape:"TextAnnotation"}},!0);l.ports=[{id:o.id+"_port",shape:"Square",offset:{x:0,y:.5}}],l.offsetX=r.offsetX,l.offsetY=r.offsetY,l.text=i.text,l.angle=i.angle,l.length=i.length,l.width=i.width,l.height=i.height,l.wrapper=r,r.children.push(l.initPortWrapper(l.ports[0]));var h=new np(0,0,0,0),c=t.width||t.minWidth||0,d=t.height||t.minHeight||0;void 0!==c&&void 0!==d&&(h=new np(t.offsetX-c/2,t.offsetY-d/2,c,d)),this.setAnnotationPath(h,r,{x:l.offsetX,y:l.offsetY},l,i.length,i.angle);var p={id:t.id+"_"+i.id+"_connector",constraints:yp.Default&~(yp.DragTargetEnd|yp.Drag),sourceID:t.id,targetID:r.id,targetDecorator:{shape:"None"}},u=new Gf(t.shape,"annotations",p,!0);u.targetPortID=l.ports[0].id,u.init(e),u.wrapper.float=!1,u.wrapper.transform=Pp.Self,n.children.push(u.wrapper),u.zIndex=1e4;var f=this.annotationObjects[t.id];f||(f={}),f[i.id]||(f[i.id]={});return f[i.id].node=l,f[i.id].connector=u,this.annotationObjects[t.id]=f,e.initObject(l,void 0,!1),l.zIndex=1e4,r},t.prototype.renderBPMNTextAnnotation=function(t,e,i){e.id=e.id||cb();var n=new tu,r=new ru,o=new Qp;r.id="_"+e.id+"_path",r.width=e.width,r.height=e.height,r.relativeMode="Object",o.id=e.id+"_text",o.content=e.shape.annotation.text;var s=e.style;o.style={fontSize:s.fontSize,italic:s.italic,gradient:null,opacity:s.opacity,bold:s.bold,textWrapping:s.textWrapping,color:s.color,fill:"white",fontFamily:s.fontFamily,whiteSpace:s.whiteSpace,textOverflow:"Wrap",strokeColor:"none",strokeWidth:0,strokeDashArray:s.strokeDashArray,textAlign:s.textAlign,textDecoration:s.textDecoration},o.horizontalAlignment="Left",o.verticalAlignment="Center",o.relativeMode="Object",o.margin={left:5,right:5,top:5,bottom:5},n.offsetX=e.offsetX+e.shape.annotation.length*Math.cos(e.shape.annotation.angle*(Math.PI/180)),n.offsetY=e.offsetY+e.shape.annotation.length*Math.sin(e.shape.annotation.angle*(Math.PI/180)),n.float=!0,n.id=e.id+"_textannotation_"+e.id,n.style.strokeColor="transparent",n.margin={left:10,right:10,top:10,bottom:10},n.relativeMode="Object",n.rotateAngle=0,n.children=[r,o];var a=new Lv(e.shape,"annotations",{id:n.id,shape:{type:"Bpmn",shape:"TextAnnotation"}},!0);a.ports=[{id:r.id+"_port",shape:"Square",offset:{x:0,y:.5}}],a.offsetX=n.offsetX,a.offsetY=n.offsetY,a.shape&&a.shape.annotation&&(a.text=e.shape.annotation.text,a.angle=e.shape.annotation.angle,a.length=e.shape.annotation.length),a.width=e.width,a.height=e.height,a.wrapper=n,n.children.push(a.initPortWrapper(a.ports[0]));var l=new np(0,0,0,0),h=e.width||0,c=e.height||0;return void 0!==h&&void 0!==c&&(l=new np(e.offsetX-h/2,e.offsetY-c/2,h,c)),this.setAnnotationPath(l,n,{x:a.offsetX,y:a.offsetY},a,e.length,e.angle),n},t.prototype.getTextAnnotationWrapper=function(t,e){if(t&&"Bpmn"===t.shape.type){if("TextAnnotation"===($()?t.shape.bpmnShape:t.shape.shape))return t.wrapper.children[1];if(this.annotationObjects[t.id]&&this.annotationObjects[t.id][e]){var i=this.annotationObjects[t.id][e].node;return this.getTextAnnotationWrapper(i,e)}}return null},t.prototype.addAnnotation=function(t,e,i){var n=t.wrapper.children[0],r=t.shape;e.nodeId=t.id;var o=new gv(r,"annotations",e,!0);return r.annotations.push(o),n.children.push(this.getBPMNTextAnnotation(t,i,e,n)),t.wrapper.measure(new Wd),t.wrapper.arrange(t.wrapper.desiredSize),this.annotationObjects[t.id][e.id].connector},t.prototype.clearAnnotations=function(t,e){var i=t.shape;if(i.annotations.length)for(var n=i.annotations.length-1;n>=0;n--){var r=i.annotations[n];this.removeAnnotationObjects(t,r,e)}delete this.annotationObjects[t.id]},t.prototype.checkAndRemoveAnnotations=function(t,e){if("Bpmn"===t.shape.type)if(!$()&&"TextAnnotation"===t.shape.shape||$()&&"TextAnnotation"===t.shape.bpmnShape)for(var i=t.id.split("_"),n=i[i.length-1],r=i[i.length-3]||i[0],o=e.nameTable[r],s=o.shape,a=0,l=s.annotations;a<l.length;a++){var h=l[a];if(h.id===n)if(-1!==s.annotations.indexOf(h))return e.removeDependentConnector(t),this.removeAnnotationObjects(o,h,e),!0}else t.shape.annotations&&t.shape.annotations.length&&this.clearAnnotations(t,e);return!1},t.prototype.removeAnnotationObjects=function(t,e,i){var n=t.shape,r=n.annotations.indexOf(e);if(-1!==r){if(!(i.diagramActions&Ip.UndoRedo||i.diagramActions&Ip.Group)){var o={type:"CollectionChanged",changeType:"Remove",undoObject:gb(e),redoObject:gb(e),category:"Internal"};i.addHistoryEntry(o)}n.annotations.splice(r,1);var s=this.annotationObjects[t.id];if(s&&s[e.id]){var a=s[e.id].node,l=s[e.id].connector;i.removeElements(a),i.removeElements(l);var h=t.wrapper.children[0];r=h.children.indexOf(a.wrapper),h.children.splice(r,1),r=h.children.indexOf(l.wrapper),h.children.splice(r,1),i.removeFromAQuad(a),i.removeFromAQuad(l),delete i.nameTable[a.id],delete i.nameTable[l.id],delete s[e.id]}}},t.prototype.setAnnotationPath=function(t,e,i,n,r,o){var s,a,l=this.getAnnotationPathAngle(i,t),h="",c=e.children[0],d=e.children[2],p=e.children[1];c.horizontalAlignment="Stretch",c.verticalAlignment="Stretch",p.margin.left=p.margin.right=5,p.margin.top=p.margin.bottom=5,0===l?(h="M10,20 L0,20 L0,0 L10,0",c.width=10,c.horizontalAlignment="Left",d.setOffsetWithRespectToBounds(0,.5,"Fraction"),p.margin.top=p.margin.bottom=10,s=t.middleRight,a={x1:t.right,y1:t.top,x2:t.right,y2:t.bottom}):180===l?(h="M0,0 L10,0 L10,20 L0,20",c.width=10,c.horizontalAlignment="Right",d.setOffsetWithRespectToBounds(1,.5,"Fraction"),p.margin.top=p.margin.bottom=10,s=t.middleLeft,a={x1:t.left,y1:t.top,x2:t.left,y2:t.bottom}):90===l?(h="M20,10 L20,0 L0,0 L0,10",c.height=10,c.verticalAlignment="Top",d.setOffsetWithRespectToBounds(.5,0,"Fraction"),p.margin.left=p.margin.right=10,s=t.bottomCenter,a={x1:t.right,y1:t.bottom,x2:t.left,y2:t.bottom}):(h="M0,0 L0,10 L20,10 L20,0",c.height=10,c.verticalAlignment="Bottom",d.setOffsetWithRespectToBounds(.5,1,"Fraction"),p.margin.left=p.margin.right=10,s=t.topCenter,a={x1:t.right,y1:t.top,x2:t.left,y2:t.top});var u=t.center;s=Yu(a,[u,qd.transform(i,o,Math.max(t.width,t.height))],0,u),c.data=h,void 0!==r&&void 0!==o&&(s=qd.transform(s,o,r),e.offsetX=n.offsetX=s.x,e.offsetY=n.offsetY=s.y)},t.prototype.isBpmnTextAnnotation=function(t,e){if(this.annotationObjects){var i=t.parentId,n=t.id,r=e.nameTable[i];return r&&"Bpmn"===r.shape.type&&this.annotationObjects[i]&&this.annotationObjects[i][n]?r:null}return null},t.prototype.updateTextAnnotationContent=function(t,e,i,n){var r=e.parentId,o=e.id;if(this.annotationObjects[r]&&this.annotationObjects[r][o])for(var s=0,a=t.shape.annotations;s<a.length;s++){var l=a[s];if(l.id===o){l.text=i;var h=this.annotationObjects[r][o].node.wrapper.children[1];h.content=i,h.visible=!0,t.wrapper.measure(new Wd),t.wrapper.arrange(t.wrapper.desiredSize)}}},t.prototype.updateQuad=function(t,e){var i,n=t.shape.annotations;if(n&&n.length>0)for(var r=0;r<n.length;r++)i=this.annotationObjects[t.id][n[r].id].node,e.updateQuad(i)},t.prototype.updateTextAnnotationProp=function(t,e,i){if("Bpmn"===t.shape.type){var n=t.shape.annotations;if(n&&n.length>0)for(var r=0;r<t.wrapper.children[0].children.length;r++)for(var o=0;o<n.length;o++){var s=t.wrapper.children[0].children[r].id.split("_");if(s[s.length-1]===n[o].id){var a=this.annotationObjects[t.id][n[o].id].node,l=this.annotationObjects[t.id][n[o].id].connector,h=(rf(l.targetPoint,t.wrapper.bounds,t.wrapper.bounds),l.sourcePoint);h={x:l.sourcePoint.x+t.offsetX-e.offsetX,y:l.sourcePoint.y+t.offsetY-e.offsetY},h=qd.transform(h,n[o].angle,n[o].length),t.wrapper.children[0].children[r].offsetX=a.offsetX=h.x,t.wrapper.children[0].children[r].offsetY=a.offsetY=h.y,i.updateQuad(a)}}}},t.prototype.getSubprocessChildCount=function(t){var e,i=0,n=t.shape.activity.subProcess;return void 0!==(e=n.loop)&&"None"!==e&&i++,void 0!==n.compensation&&!0===n.compensation&&i++,void 0!==n.collapsed&&!0===n.collapsed&&i++,void 0!==n.adhoc&&!0===n.adhoc&&i++,i},t.prototype.getTaskChildCount=function(t){var e=0,i=t.shape.activity.task;return void 0!==i.compensation&&!0===i.compensation&&e++,void 0!==i.loop&&"None"!==i.loop&&e++,e},t.prototype.setStyle=function(t,e){t.style.fill=e.style.fill,t.style.strokeColor=e.style.strokeColor,t.style.strokeWidth=e.style.strokeWidth,t.style.strokeDashArray=e.style.strokeDashArray,t.style.opacity=e.style.opacity,t.style.gradient=e.style.gradient,0!=(e.constraints&bp.Shadow)&&(t.shadow=e.shadow)},t.prototype.updateBPMN=function(t,e,i,n){var r=t.shape||{},o=i.wrapper.children[0],s=i.shape.shape||i.shape.bpmnShape,a=void 0!==t.width||void 0!==t.height;if(($()&&"Gateway"===r.bpmnShape||"Gateway"===r.shape)&&r.gateway)i.wrapper.children[0]=this.getBPMNGatewayShape(i);else if(($()&&"DataObject"===r.bpmnShape||"DataObject"===r.shape)&&r.dataObject)i.wrapper.children[0]=this.getBPMNDataObjectShape(i);else if(($()&&"Activity"===r.bpmnShape||"Activity"===r.shape)&&r.activity)i.wrapper.children[0]=this.getBPMNActivityShape(i);else if(($()&&"Event"===r.bpmnShape||"Event"===r.shape)&&r.event){var l=r.event;i.wrapper.children[0]=this.getBPMNEventShape(i,l)}else $()&&"Message"===r.bpmnShape||"Message"===r.shape||$()&&"DataSource"===r.bpmnShape||"DataSource"===r.shape?i.wrapper.children[0]=this.getBPMNShapes(i):void 0!==r.gateway||"Gateway"===s&&a?this.updateBPMNGateway(i,t):void 0!==r.dataObject||"DataObject"===s&&a?this.updateBPMNDataObject(i,t,e):void 0!==r.activity||"Activity"===s&&a?this.updateBPMNActivity(i,t,e,n):(void 0!==r.event||"Event"===s&&a)&&this.updateBPMNEvent(i,t,e);if(t.style&&(sy(t.style,o instanceof Kp?!$()&&"Activity"===i.shape.shape||$()&&"Activity"===i.shape.bpmnShape?o.children[0].children[0]:o.children[0]:o),t.style&&t.style.strokeColor&&o.children.length>0))if((!$()&&"Activity"===i.shape.shape||$()&&"Activity"===i.shape.bpmnShape)&&"SubProcess"===i.shape.activity.activity){var h=o.children[0];this.updateBPMNStyle(h,t.style.strokeColor)}else(!$()&&"Gateway"===i.shape.shape||$()&&"Gateway"===i.shape.bpmnShape||!$()&&"Event"===i.shape.shape||$()&&"Event"===i.shape.bpmnShape)&&this.updateBPMNStyle(o,t.style.strokeColor)},t.prototype.updateBPMNStyle=function(t,e){for(var i=0;i<t.children.length;i++){sy({strokeColor:e},t.children[i])}},t.prototype.updateBPMNGateway=function(t,e){var i=t.shape,n=t.wrapper.children[0];if(i){sy(t.style,n.children[0]);var r=LS(i.gateway.type);n.children[1].data=r}void 0===e.width&&void 0===e.height||this.setSizeForBPMNGateway(t.shape.gateway,n,e.width||t.width,e.height||t.height)},t.prototype.updateBPMNDataObject=function(t,e,i){var n=e.shape,r=t.wrapper.children[0];if(n){var o=r.children[1],s=r.children[2];if(void 0!==e.style&&(sy(e.style,r.children[0]),o.style.opacity=t.style.opacity,s.style.opacity=t.style.opacity),n.dataObject){switch(n.dataObject.type){case"None":o.visible=!1;break;case"Input":o.style.fill="white";break;case"Output":o.style.fill="black"}"None"===i.shape.dataObject.type&&(o.visible=!0),void 0!==e.shape.dataObject.collection&&(s.visible=n.dataObject.collection)}}void 0===e.width&&void 0===e.height||this.setSizeForBPMNDataObjects(t.shape.dataObject,r,e.width||t.width,e.height||t.height)},t.prototype.getEvent=function(t,e,i,n,r,o){switch(i){case"Start":r.visible=!1,n.style.strokeDashArray="",o.style.fill="white",o.style.strokeColor="black",n.style.fill="white";break;case"NonInterruptingStart":n.style.strokeDashArray="2 3",o.style.fill="white",n.style.fill="white",o.style.strokeColor="black",r.visible=!1;break;case"Intermediate":n.style.strokeDashArray="",n.style.fill="white",r.style.strokeDashArray="",n.style.gradient=null,o.style.fill="white",o.style.strokeColor="black",this.updateEventVisibility(e,r);break;case"NonInterruptingIntermediate":n.style.fill="white",n.style.gradient=null,o.style.fill="white",o.style.strokeColor="black",n.style.strokeDashArray="2 3",r.style.strokeDashArray="2 3",this.updateEventVisibility(e,r);break;case"ThrowingIntermediate":case"End":n.style.fill="End"!==i?"white":"black",n.style.strokeDashArray="",r.style.strokeDashArray="",n.style.gradient=null,o.style.fill="black",this.updateEventVisibility(e,r),o.style.strokeColor=t.style.fill}},t.prototype.updateEventVisibility=function(t,e){t.shape.activity&&t.shape.activity.subProcess&&t.shape.activity.subProcess.events&&void 0!==t.shape.activity.subProcess.events[0]&&void 0!==t.shape.activity.subProcess.events[0].event?"NonInterruptingStart"!==t.shape.activity.subProcess.events[0].event&&"Start"!==t.shape.activity.subProcess.events[0].event||(e.visible=!0):void 0!==t.shape.event&&("NonInterruptingStart"!==t.shape.event.event&&"Start"!==t.shape.event.event||(e.visible=!0))},t.prototype.updateBPMNEvent=function(t,e,i){var n,r=e.shape,o=t.wrapper.children[0];if(r){var s,a=o.children[0],l=o.children[1],h=o.children[2];void 0!==e.style&&(sy(t.style,o.children[0]),void 0===e.style.opacity&&void 0===e.style.strokeColor||(l.style.opacity=t.style.opacity,l.style.strokeColor=t.style.strokeColor)),s=r.event.event,n=r.event.trigger,void 0!==s&&this.getEvent(t,i,s,a,l,h),void 0!==n&&this.updateBPMNEventTrigger(t,e)}void 0===e.width&&void 0===e.height&&void 0===n||this.setSizeForBPMNEvents(t.shape.event,o,e.width||t.width,e.height||t.height)},t.prototype.updateBPMNEventTrigger=function(t,e){var i=t.shape,n=t.wrapper.children[0].children[2];n.canMeasurePath=!0,!e.style||void 0===e.style.strokeColor&&void 0===e.style.opacity||sy(t.style,n);var r=ES(i.event.trigger);n.data=r},t.prototype.updateBPMNActivity=function(t,e,i,n){var r=e.shape,o=t.wrapper.children[0],s=this.getSize(t,o.children[0].children[0]);if(r){var a=i.shape.activity.activity,l=t.shape.activity.activity;if("SubProcess"!==a&&"Task"!==a||"SubProcess"!==l&&"Task"!==l){if("Task"===l&&void 0!==r.activity.task){this.updateBPMNActivityTask(t,e);var h=this.getTaskChildCount(t),c=void 0,d=12*h,p=s.width/2-d;c=1===h?p+8:p+8*(h-1),void 0!==r.activity.task.loop&&this.updateBPMNActivityTaskLoop(t,e,c,h,p,2)}"SubProcess"===l&&void 0!==r.activity.subProcess&&this.updateBPMNActivitySubProcess(t,e,i,n)}else n.removeElements(t),t.wrapper.children[0]=this.getBPMNActivityShape(t);this.setSizeForBPMNActivity(t.shape.activity,o,e.width||s.width,e.height||s.height,t)}void 0===e.width&&void 0===e.height||this.setSizeForBPMNActivity(t.shape.activity,o,e.width||s.width,e.height||s.height,t)},t.prototype.updateBPMNActivityTask=function(t,e){for(var i=e.shape,n=t.wrapper.children[0].children[0],r=i.activity.task,o=0;o<n.children.length;o++){if(n.children[o].id===t.id+"_1_taskTypeService")n.children.splice(o,1),(a=document.getElementById(t.id+"_1_taskTypeService")).parentNode.removeChild(a)}if("Receive"===r.type||"Send"===r.type?n.children[1].height=14:n.children[1].height=20,void 0!==r.type){var s=IS(r.type);if(n.children[1].data=s,"Service"===r.type){for(o=0;o<n.children.length;o++){var a;if(n.children[o].id===t.id+"_1_tasktType")n.children.splice(o,1),(a=document.getElementById(t.id+"_1_tasktType")).parentNode.removeChild(a)}var l=new ru;l.id=t.id+"_1_tasktType",l.margin.left=5,l.margin.top=5,l.data=s,l.style.fill="transparent",l.style.opacity=t.style.opacity,l.width=20,l.height=20,n.children.splice(1,0,l);var h=new ru;h.id=t.id+"_1_taskTypeService",h.data=s,h.margin.left=n.children[1].margin.left+9,h.margin.top=n.children[1].margin.top+9,h.style.fill="white",h.style.opacity=t.style.opacity,n.children.splice(2,0,h)}}void 0!==i.activity.task.call&&(!1!==i.activity.task.call?n.children[0].style.strokeWidth=4:n.children[0].style.strokeWidth=1),void 0!==i.activity.task.compensation&&(!0===i.activity.task.compensation?n.children[3].visible=!0:n.children[3].visible=!1)},t.prototype.updateBPMNActivityTaskLoop=function(t,e,i,n,r,o){var s,a,l=e.shape,h=t.wrapper.children[0].children[0],c=l.activity,d=0;if(void 0!==c.subProcess){var p=c.subProcess;d="Transaction"===c.subProcess.type?2:0,a=TS(s=p.loop),h.children[2+d].data=a,h.children[2+d].visible="None"!==s}else void 0!==c.task&&void 0!==c.task.loop&&(a=TS(c.task.loop),h.children[2].data=a,h.children[2].visible="None"!==c.task.loop);this.updateChildMargin(h,n,r,i,o+d)},t.prototype.updateChildMargin=function(t,e,i,n,r){if(1===e)for(var o=r;o<t.children.length;o++)2!==o&&!0===t.children[o].visible&&(t.children[o].margin.left=n,n=i+8);else{n=i+8*(e-1);for(o=r;o<t.children.length;o++)2!==o&&!0===t.children[o].visible&&(t.children[o].margin.left=n,n+=20)}},t.prototype.updateBPMNActivitySubProcess=function(t,e,i,n){var r,o=e.shape,s=t.wrapper.children[0],a=this.getSize(t,s.children[0].children[0]),l=o.activity.subProcess,h=this.getSubprocessChildCount(t),c=12*h,d=a.width/2-c;r=1===h?d+8:d+8*(h-1),sy(t.style,s.children[0].children[0]),void 0!==l.events&&this.updateBPMNSubProcessEvent(t,e,i,n),void 0!==l.adhoc&&this.updateBPMNSubProcessAdhoc(t,i,l,r,h,d),void 0!==l.boundary&&this.updateBPMNSubProcessBoundary(t,l),void 0!==l.collapsed&&this.updateBPMNSubProcessCollapsed(t,i,l,r,h,d,n),void 0!==l.compensation&&this.updateBPMNSubProcessCompensation(t,i,l,r,h,d),void 0!==l.loop&&this.updateBPMNSubProcessLoop(t,i,l,r,h,d),void 0!==l.transaction&&this.updateBPMNSubProcessTransaction(t,e,i,n)},t.prototype.updateBPMNSubProcessEvent=function(t,e,i,n){for(var r=e.shape,o=t.wrapper.children[0],s=o.children[0],a=(o.children[0].children.length,r.activity.subProcess),l=0,h=Object.keys(a.events);l<h.length;l++){var c=h[l],d=Number(c),p=s.children[d+2],u=t.shape.activity.subProcess.events[d];this.updateBPMNSubEvent(t,a.events[d],u,p,e,i,n)}},t.prototype.updateBPMNSubEvent=function(t,e,i,n,r,o,s){var a,l,h=t.wrapper.children[0],c=r.shape,d=n.children[0],p=n.children[1],u=n.children[2];if(r.style&&(void 0===r.style.strokeColor&&void 0===r.style.opacity||(h.children[0].children[1].style.strokeColor=r.style.strokeColor,h.children[0].children[1].style.opacity=r.style.opacity)),void 0!==c.activity.subProcess&&(a=e.event,l=e.trigger),void 0!==a&&this.getEvent(r,o,a,d,p,u),void 0!==l){r.style&&sy(r.style,h.children[0]);var f=ES(l);n.children[2].data=f}if(void 0===e.height&&void 0===e.width||this.getEventSize(e,n),void 0!==e.id&&(n.id=e.id),void 0!==e.margin&&(n.margin=e.margin),void 0!==e.horizontalAlignment&&(n.horizontalAlignment=e.horizontalAlignment),void 0!==e.verticalAlignment&&(n.verticalAlignment=e.verticalAlignment),void 0!==e.offset&&(n.setOffsetWithRespectToBounds(i.offset.x,i.offset.y,"Fraction"),n.relativeMode="Point"),void 0!==e.annotations){var g=void 0,m=h.children[0].children[2];n.children[3]&&n.children.length>3&&(g=n.children[3],s.updateAnnotation(e.annotations[0],g,m))}if(void 0!==e.ports){var y=void 0,v=h.children[0].children[2];n.children[4]&&n.children.length>4&&(y=n.children[4],s.updatePort(e.ports[0],y,v))}void 0!==e.visible&&this.updateDiagramContainerVisibility(n,e.visible)},t.prototype.updateBPMNSubProcessTransaction=function(t,e,i,n){var r,o=e.shape.activity.subProcess.transaction,s=t.wrapper.children[0].children[0].children[2];void 0!==o.success&&(r=t.shape.activity.subProcess.transaction.success,this.updateBPMNSubEvent(t,o.success,r,s.children[0],e,i,n)),void 0!==o.cancel&&(r=t.shape.activity.subProcess.transaction.cancel,this.updateBPMNSubEvent(t,o.cancel,r,s.children[1],e,i,n)),void 0!==o.failure&&(r=t.shape.activity.subProcess.transaction.failure,this.updateBPMNSubEvent(t,o.failure,r,s.children[2],e,i,n));for(var a=0,l=t.outEdges;a<l.length;a++){var h=l[a],c=n.nameTable[h];switch(c.sourcePortID){case"success":o.success&&void 0!==o.success.visible&&n.connectorPropertyChange(c,{},{sourcePortID:"success"});break;case"cancel":o.cancel&&void 0!==o.cancel.visible&&n.connectorPropertyChange(c,{},{sourcePortID:"cancel"});break;case"failure":o.failure&&void 0!==o.failure.visible&&n.connectorPropertyChange(c,{},{sourcePortID:"failure"})}}},t.prototype.getEventSize=function(t,e){void 0!==t.height&&(e.height=t.height,e.children[0].height=t.height,e.children[1].height=.85*t.height,e.children[2].height=.54*t.height),void 0!==t.width&&(e.width=t.width,e.children[0].width=t.width,e.children[1].width=.85*t.width,e.children[2].width=.54*t.width)},t.prototype.updateBPMNSubProcessAdhoc=function(t,e,i,n,r,o){t.shape;var s=t.wrapper.children[0].children[0],a="Transaction"===t.shape.activity.subProcess.type?2:0;!1===i.adhoc?s.children[3+a].visible=!1:s.children[3+a].visible=!0,this.updateChildMargin(s,r,o,n,3+a)},t.prototype.updateBPMNSubProcessBoundary=function(t,e){t.shape;var i=t.wrapper.children[0].children[0].children[0];"Default"===e.boundary&&(i.style.strokeWidth=1,i.style.strokeDashArray="1 0"),"Call"===e.boundary&&(i.style.strokeWidth=4,i.style.strokeDashArray="1 0"),"Event"===e.boundary&&(i.style.strokeWidth=1,i.style.strokeDashArray="2 2")},t.prototype.updateElementVisibility=function(t,e,i){if(t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0)for(var n=t.shape.activity.subProcess.processes,r=n.length-1;r>=0;r--){var o=i.nameTable[n[r]];o.visible=e,i.updateElementVisibility(o.wrapper,o,e),e&&((!$()&&"Event"===o.shape.shape||$()&&"Event"===o.shape.bpmnShape)&&this.setEventVisibility(o,o.wrapper.children[0].children),"SubProcess"===o.shape.activity.activity&&this.setSubProcessVisibility(o));for(var s=o.inEdges.concat(o.outEdges),a=s.length-1;a>=0;a--){var l=i.nameTable[s[a]];l.visible=e,i.updateElementVisibility(l.wrapper,l,e)}}e&&((!$()&&"Event"===t.shape.shape||$()&&"Event"===t.shape.bpmnShape)&&this.setEventVisibility(t,t.wrapper.children[0].children),"SubProcess"===t.shape.activity.activity&&this.setSubProcessVisibility(t),"Task"===t.shape.activity.activity&&(!$()&&"Activity"===t.shape.shape||$()&&"Activity"===t.shape.bpmnShape)&&"None"===t.shape.activity.subProcess.loop&&(t.wrapper.children[0].children[0].children[3].visible=!1))},t.prototype.updateBPMNSubProcessCollapsed=function(t,e,i,n,r,o,s){var a=t.shape.activity.subProcess.events.length,l=t.wrapper.children[0].children[0],h="Transaction"===t.shape.activity.subProcess.type?3:1;!1===i.collapsed?(this.updateElementVisibility(t,!0,s),l.children[h+a].visible=!1):(this.updateElementVisibility(t,!1,s),l.children[h+a].visible=!0),this.updateChildMargin(l,r,o,n,3+a)},t.prototype.updateBPMNSubProcessCompensation=function(t,e,i,n,r,o){var s=t.wrapper.children[0].children[0],a="Transaction"===t.shape.activity.subProcess.type?2:0;!1===i.compensation?s.children[4+a].visible=!1:s.children[4+a].visible=!0,this.updateChildMargin(s,r,o,n,4+a)},t.prototype.updateBPMNSubProcessLoop=function(t,e,i,n,r,o){this.updateBPMNActivityTaskLoop(t,t,n,r,o,1)},t.prototype.updateBPMNConnector=function(t,e,i,n){var r=i.shape;return void 0!==r.sequence&&(t=this.getSequence(t,e,i,n)),void 0!==r.association&&(t=this.getAssociation(t,e,i,n)),void 0!==r.message&&(t=this.getMessage(t,e,i,n)),t},t.prototype.getSequence=function(t,e,i,n){if("Normal"===i.shape.sequence&&(n.connectorPropertyChange(t,e,{type:"Straight",targetDecorator:{shape:"Arrow",style:{fill:"black"}}}),t.wrapper.children[3].visible=!1),"Default"===i.shape.sequence){n.connectorPropertyChange(t,e,{type:"Straight",targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"None"}});var r=new ru,o=(new ru,void 0);r=t.getSegmentElement(t,r);for(var s=t.intermediatePoints,a=0;a<s.length-1;a++)length+=t.distance(s[a],s[a+1]),o=t.findPath(s[a],s[a+1]);t.wrapper.children[3].data=o[0],t.wrapper.children[3].id=t.id+"_"+i.shape.sequence,t.wrapper.children[3].offsetX=o[1].x,t.wrapper.children[3].offsetY=o[1].y,t.wrapper.children[3].rotateAngle=45,t.wrapper.children[3].transform=Pp.Self}return"Conditional"===i.shape.sequence&&(n.connectorPropertyChange(t,e,{type:"Straight",targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"Diamond",width:20,height:10,style:{fill:"white"}}}),t.wrapper.children[3].visible=!1),t},t.prototype.getAssociation=function(t,e,i,n){return"Default"===i.shape.association&&n.connectorPropertyChange(t,e,{type:"Straight",style:{strokeDashArray:"None"},targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"None"}}),"Directional"===i.shape.association&&n.connectorPropertyChange(t,e,{type:"Straight",style:{strokeDashArray:"2 2"},targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"None"}}),"BiDirectional"===i.shape.association&&n.connectorPropertyChange(t,e,{type:"Straight",style:{strokeDashArray:"2 2"},targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"Arrow",width:5,height:10,style:{fill:"white"}}}),t},t.prototype.getMessage=function(t,e,i,n){var r,o;if("Default"===e.shape.message){if(void 0!==i.shape.message){if("InitiatingMessage"===i.shape.message||"NonInitiatingMessage"===i.shape.message){var s=new ru;s=t.getSegmentElement(t,s);for(var a=t.intermediatePoints,l=0;l<a.length-1;l++){length+=t.distance(a[l],a[l+1]);var h=.5*length;length>=h&&(r=Wu(a[l],a[l+1]),o=qd.transform(a[l],r,h))}}t.wrapper.children[3].id=t.id+"_"+i.shape.message,t.wrapper.children[3].width=25,t.wrapper.children[3].height=15,t.wrapper.children[3].data="M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",t.wrapper.children[3].horizontalAlignment="Center",t.wrapper.children[3].verticalAlignment="Center",t.wrapper.children[3].transform=Pp.Self,t.wrapper.children[3].style.fill="NonInitiatingMessage"===i.shape.message?"lightgrey":"white",t.wrapper.children[3].offsetX=o.x,t.wrapper.children[3].offsetY=o.y}}else"NonInitiatingMessage"===e.shape.message&&"InitiatingMessage"===e.shape.message||("Default"!==i.shape.message?t.wrapper.children[3].style.fill="NonInitiatingMessage"===i.shape.message?"lightgrey":"white":t.wrapper.children[3].visible=!1);return t},t.prototype.setSizeForBPMNEvents=function(t,e,i,n){e.children[0].width=i,e.children[0].height=n;var r=e.children[1];r.width=.85*i,r.height=.85*n;var o=e.children[2];"Message"===t.trigger?(o.width=.54*i,o.height=.4*n):(o.width=.5*i,o.height=.5*n)},t.prototype.updateAnnotationDrag=function(t,e,i,n){var r=t.id.split("_");if("textannotation"===r[1])for(var o=void 0,s=0;s<t.inEdges.length;s++){var a=e.nameTable[t.inEdges[s]];a&&(o=e.nameTable[a.sourceID]);var l={x:t.offsetX+i,y:t.offsetY+n},h=a.sourcePoint,c=qd.findLength(l,h),d=qd.findAngle(h,l);if(o.shape.annotations)for(var p=0;p<o.shape.annotations.length;p++)if(o.shape.annotations[p].id===r[r.length-1])return o.shape.annotations[p].length=c,o.shape.annotations[p].angle=d,this.setAnnotationPath(o.wrapper.bounds,t.wrapper,l,t),!1}return!!t.processId&&(this.drag(t,i,n,e),!0)},t.prototype.getAnnotationPathAngle=function(t,e){var i=0;switch(rf(t,e,e)){case"Right":i=0;break;case"Left":i=180;break;case"Bottom":i=90;break;case"Top":i=270}return i},t.prototype.setSizeForBPMNGateway=function(t,e,i,n){e.children[0].width=i,e.children[0].height=n,e.children[1].width=.45*i,e.children[1].height=.45*n},t.prototype.setSizeForBPMNDataObjects=function(t,e,i,n){e.children[0].width=i,e.children[0].height=n},t.prototype.setSizeForBPMNActivity=function(t,e,i,n,r){e.children[0].width=i,e.children[0].height=n,e.children[0].children[0].width=i,e.children[0].children[0].height=n,"Transaction"===t.subProcess.type&&(e.children[0].children[1].width=Math.max(i-6,1),e.children[0].children[1].height=Math.max(n-6,1),e.children[0].children[2].width=i,e.children[0].children[2].height=n);var o,s,a=new Yp,l=this.getSize(r,a),h=12*(s="Task"===t.activity?this.getTaskChildCount(r):this.getSubprocessChildCount(r)),c=(i||l.width)/2;o=1===s?c-6:c-h/2-4*(s-1)/2;for(var d=0;d<e.children[0].children.length;d++)e.children[0].children[d].visible&&(e.children[0].children[d].id.indexOf("_loop")>-1||e.children[0].children[d].id.indexOf("_0_compensation")>-1||e.children[0].children[d].id.indexOf("_0_adhoc")>-1||e.children[0].children[d].id.indexOf("_0_collapsed")>-1)&&(e.children[0].children[d].margin.left=o,o+=e.children[0].children[d].actualSize.width+4)},t.prototype.updateDiagramContainerVisibility=function(t,e){if(t instanceof Kp)for(var i=0;i<t.children.length;i++)this.updateDiagramContainerVisibility(t.children[i],e);t.visible=e},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"Bpmn"},t}();function OS(t){return AS[t.toString()]}function ES(t){return BS[t.toString()]}function LS(t){return kS[t.toString()]}function IS(t){return MS[t.toString()]}function TS(t){return DS[t.toString()]}var AS={Event:"M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",Message:"M0,0L19.8,12.8L40,0L0,0L0,25.5L40,25.5L40,0z",DataSource:"M 0 10.6 c 0 5.9 16.8 10.6 37.5 10.6 S 75 16.4 75 10.6 v 0 v 68.9 v -0.1 C 75 85.3 58.2 90 37.5 90 S 0 85.3 0 79.4 l 0 0.1 V 56 V 40.6 L 0 10.6 C 0 4.7 16.8 0 37.5 0 S 75 4.7 75 10.6 S 58.2 21.2 37.5 21.2S 0 16.5 0 10.6 l 0 6.7 v -0.2 c 0 5.9 16.8 10.6 37.5 10.6 S 75 22.9 75 17.1 v 6.8 v -0.1 c 0 5.9 -16.8 10.6 -37.5 10.6 S 0 29.6 0 23.8",SubProcess:"M100,100 h200 a20,20 0 0 1 20,20 v200 a20,20 0 0 1 -20,20 h-200 a20,20 0 0 1 -20,-20 v-200 a20,20 0 0 1 20,-20 z",collapsedShape:"M 8.13789 15 H 0 V 0 H 8.13789 V 15 Z M 0.625991 13.75 H 7.51189 V 1.25 H 0.625991 V 13.75 Z M 2.18095 7.03125 L 5.95631 7.03125 L 5.95631 7.46875 L 2.18095 7.46875 Z M 3.8342 3.73 L 4.30369 3.73 L 4.30369 11.2687 L 3.8342 11.2687 Z"},BS={Message:"M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",Timer:"M40,20c0,8.654-5.496,16.024-13.189,18.81C24.685,39.58,22.392,40,20,40C8.954,40,0,31.046,0,20S8.954,0,20,0S40,8.954,40,20z M20,0 L20,2.583 L20,5.283 M10.027,2.681L11.659,5.507 L12.669,7.257 M2.731,9.989 L6.014,11.885 L7.307,12.631 M0.067,19.967 L2.667,19.967 L5.35,19.967M2.748,29.939 L5.731,28.217 L7.323,27.298 M10.056,37.236 L11.292,35.095 L12.698,32.66 M20.033,39.9 L20.033,36.417 L20.033,34.617M30.006,37.219 L28.893,35.292 L27.364,32.643 M37.302,29.911 L34.608,28.355 L32.727,27.269M39.967,19.933 L37.417,19.933 L34.683,19.933 M37.286,9.961 L34.583,11.521 L32.71,12.602 M29.977,2.664 L28.653,4.957 L27.336,7.24 M22.104,8.5 L19.688,20 L24.75,20 L31.604,20 L24.75,20 L19.688,20z",Error:"M 23.77 18.527 l -7.107 27.396 l 8.507 -17.247 L 36.94 40.073 l 6.394 -25.997 l -8.497 15.754 L 23.77 18.527 Z",Escalation:"M 30.001 8.098 L 11.842 43.543 l 18.159 -18.882 l 18.162 18.882 L 30.001 8.098 Z ",Cancel:"M 3.5 16 L 0 12.6 L 4.6 8 L 0 3.5 L 3.4 0 L 8 4.6 l 4.5 -4.5 L 16 3.5 L 11.5 8 l 4.5 4.5 l -3.4 3.5 L 8 11.4 L 3.5 16 Z",Compensation:"M 25.7086 0 L 0 25 L 25.7086 50 V 26.3752 L 50 50 V 0 L 25.7086 23.6248 V 0 Z ",Conditional:"M 0 0 H 16 V 16 H 0 z M 1.14 3.2 H 14.85 M 1.14 6.4 H 14.85 M 1.14 9.6 H 14.85 M 1.14 12.8 H 14.85",Link:"M 32.014 19.258 v 5.992 H 9.373 v 9.504 h 22.641 v 5.988 L 50.622 30 L 32.014 19.258 Z",Signal:"M 50 50 H 0 L 25.0025 0 L 50 50 Z",Terminate:"M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50",Multiple:"M 17.784 48.889 H 42.21 l 7.548 -23.23 L 29.997 11.303 L 10.236 25.658 L 17.784 48.889 Z",Parallel:"M 27.276 49.986 h 5.58 v -17.15 h 17.146 V 27.17 h -17.15 l 0.004 -17.15 h -5.58 l -0.004 17.15 H 9.994 v 5.666 h 17.278 L 27.276 49.986 Z"},kS={None:"",Exclusive:"M 11.196 29.009 l 6.36 -9.712 l -5.764 -8.899 h 4.393 l 3.732 5.979 l 3.656 -5.979 h 4.354 l -5.789 9.039l 6.36 9.572 h -4.532 l -4.126 -6.437 l -4.139 6.437 H 11.196 Z",Inclusive:"M 20.323 31.333 c -6.625 0 -12.015 -5.39 -12.015 -12.015 s 5.39 -12.015 12.015 -12.015 s 12.016 5.39 12.016 12.015 S 26.948 31.333 20.323 31.333 Z M 20.323 9.303 c -5.522 0 -10.015 4.493 -10.015 10.015 s 4.492 10.015 10.015 10.015 s 10.016 -4.493 10.016 -10.015 S 25.846 9.303 20.323 9.303 Z",Parallel:"M 18.394 29.542 v -8.833 H 9.626 v -3.691 h 8.768 V 8.251 h 3.734 v 8.767 h 8.768 v 3.691 h -8.768 v 8.833 H 18.394 Z",Complex:"M29.198,19.063L23.089,19.063L27.794,14.358L26.38,12.944L21.223,18.101L21.223,10.443L19.223,10.443L19.223,17.976L14.022,12.776L12.608,14.19L17.48,19.063L10.365,19.063L10.365,21.063L18.261,21.063L12.392,26.932L13.806,28.346L19.223,22.929L19.223,30.225L21.223,30.225L21.223,22.805L25.925,27.507L27.339,26.093L22.309,21.063L29.198,21.063z",EventBased:"M 20.322 29.874 c -5.444 0 -9.873 -4.43 -9.873 -9.874 s 4.429 -9.874 9.873 -9.874 s 9.874 4.429 9.874 9.874 S 25.767 29.874 20.322 29.874 Z M 20.322 32.891 c -7.107 0 -12.89 -5.783 -12.89 -12.891 c 0 -7.107 5.782 -12.89 12.89 -12.89 c 7.108 0 12.891 5.783 12.891 12.89 C 33.213 27.108 27.431 32.891 20.322 32.891 Z M 24.191 25.386 h -7.984 l -2.469 -7.595 l 6.461 -4.693 l 6.461 4.693 L 24.191 25.386 Z",ExclusiveEventBased:"M 30 15 C 30 23.28 23.28 30 15 30 S 0 23.28 0 15 S 6.72 0 15 0 S 30 6.72 30 15 z M 15 5 L 5 12.5 L 8 22.5 H 22 L 25 12.5 z",ParallelEventBased:"M 35 17.5 C 35 27.16 27.16 35 17.5 35 S 0 27.16 0 17.5 S 7.84 0 17.5 0 S 35 7.84 35 17.5 z M 14.58 5.83 V 14.58 H 5.83 V 20.42 H 14.58 V 29.17 H 20.42 V 20.42 H 29.17 V 14.58 H 20.42 V 5.83 z"},MS={None:"",Service:"M 32.699 20.187 v -4.005 h -3.32 c -0.125 -0.43 -0.292 -0.83 -0.488 -1.21 l 2.373 -2.375 l -2.833 -2.83 l -2.333 2.333 c -0.44 -0.253 -0.9 -0.448 -1.387 -0.595 v -3.32 h -4.003 v 3.32 c -0.46 0.137 -0.890.322 -1.3 0.537 l -2.285 -2.275 l -2.833 2.83 l 2.285 2.278 c -0.235 0.42 -0.41 0.847 -0.547 1.307 h -3.33 v 4.005 h 3.33 c 0.148 0.488 0.343 0.955 0.588 1.395 l -2.325 2.325 l 2.822 2.832 l 2.373 -2.382 c 0.392 0.205 0.792 0.37 1.212 0.497 v 3.33 h 4.003 v -3.33 c 0.46 -0.138 0.89 -0.323 1.3 -0.547 l 2.43 2.432 l 2.822 -2.832 l -2.42 -2.422 c 0.222 -0.41 0.4 -0.85 0.535-1.297 H 32.699 Z M 22.699 21.987 c -2.1 0 -3.803 -1.703 -3.803 -3.803 c 0 -2.1 1.703 -3.803 3.803 -3.803 c 2.1 0 3.803 1.703 3.803 3.803 C 26.502 20.285 24.8 21.987 22.699 21.987 Z",Receive:"M 12.217 12.134 v 13.334 h 20 V 12.134 H 12.217 Z M 30.44 13.007 l -8.223 5.35 l -8.223 -5.35 H 30.44 Z M 13.09 24.594 V 13.459 l 9.127 5.94 l 9.127 -5.94 v 11.135 H 13.09 Z",Send:"M 45.7256 3.16055 L 25 23.4017 L 4.27442 3.16055 H 45.7256 Z M 47.8963 46.8413 H 2.10375 V 4.80813 L 25 27.1709 L 47.8963 4.80813 V 46.8413 Z",InstantiatingReceive:"M 16.306 17.39 v 8.79 h 13.198 v -8.79 H 16.306 Z M 28.375 17.946 l -5.47 3.558 l -5.47 -3.558 H 28.375 Z M 28.948 25.625 H 16.861 v -7.389 l 6.043 3.931 l 6.043 -3.931 V 25.625 Z M 22.905 11.785c -5.514 0 -9.999 4.486 -9.999 10 c 0 5.514 4.485 10 9.999 10 s 9.999 -4.486 9.999 -10 C 32.904 16.272 28.419 11.785 22.905 11.785 Z M 22.905 31.239 c -5.212 0 -9.453 -4.241 -9.453 -9.454c 0 -5.212 4.241 -9.453 9.453 -9.453 s 9.452 4.241 9.452 9.453 C 32.357 26.998 28.117 31.239 22.905 31.239 Z",Manual:"M 13.183 15.325 h 2.911 c 0.105 0 0.207 -0.043 0.281 -0.117 c 0.078 -0.074 0.117 -0.176 0.117 -0.281c 0 -0.753 0.718 -1.362 1.596 -1.362 h 2.579 c -0.117 0.227 -0.191 0.48 -0.195 0.757 c 0 0.433 0.168 0.851 0.46 1.144 c 0.008 0.004 0.015 0.011 0.019 0.015 c -0.289 0.285 -0.475 0.691 -0.479 1.148 c 0 0.433 0.168 0.846 0.46 1.139 c 0.011 0.012 0.023 0.02 0.035 0.032 c -0.301 0.281 -0.491 0.694 -0.495 1.155 c 0 0.432 0.168 0.847 0.46 1.143c 0.265 0.266 0.612 0.414 0.975 0.414 h 0.839 c 0.027 0.004 0.051 0.012 0.074 0.012 h 8.443 c 0.352 0 0.636 0.344 0.636 0.761 c 0 0.414 -0.285 0.753 -0.636 0.753 h -6.687 c -0.019 0 -0.035 -0.008 -0.051 -0.008h -2.27 c -0.121 -0.835 -0.667 -1.187 -1.795 -1.187 h -2.158 c -0.223 0 -0.402 0.18 -0.402 0.403c 0 0.219 0.179 0.398 0.402 0.398 h 2.158 c 0.972 0 1.019 0.203 1.019 0.784 c 0 0.219 0.179 0.399 0.402 0.399 c 0.008 0 0.016 -0.004 0.027 -0.004 c 0.028 0.004 0.055 0.016 0.082 0.016 h 2.56 c 0.34 0.015 0.616 0.343 0.616 0.752c 0 0.418 -0.285 0.757 -0.636 0.761 h -0.004 h -6.442 c -0.878 0 -1.595 -0.639 -1.595 -1.427 v -0.683 c 0 -0.109 -0.043 -0.211 -0.114 -0.285 c -0.078 -0.074 -0.179 -0.117 -0.285 -0.117 h -0.004 l -2.989 0.027 c -0.223 0 -0.398 0.184 -0.398 0.402 c 0 0.219 0.179 0.395 0.398 0.395 h 0.004 l 2.591 -0.02 v 0.282 c 0 1.229 1.073 2.223 2.391 2.223 h 3.895 c 0.004 0 0.007 0.004 0.011 0.004 h 2.536 c 0.792 0 1.436 -0.698 1.436 -1.561 c 0 -0.273 -0.07 -0.53 -0.188 -0.752 h 5.49 c 0.792 0 1.436 -0.695 1.436 -1.553 c 0 -0.858 -0.644 -1.557 -1.436 -1.557h -3.566 c 0.121 -0.226 0.199 -0.487 0.199 -0.768 c 0 -0.468 -0.195 -0.882 -0.495 -1.167c 0.301 -0.285 0.495 -0.698 0.495 -1.163 c 0 -0.456 -0.191 -0.866 -0.483 -1.152 c 0.293 -0.285 0.483 -0.694 0.483 -1.151c 0 -0.858 -0.647 -1.557 -1.439 -1.557 h -8.373 c -1.167 0 -2.142 0.757 -2.352 1.76 l -2.548 -0.004 c -0.219 0 -0.399 0.18 -0.399 0.403 C 12.784 15.145 12.964 15.325 13.183 15.325 L 13.183 15.325 Z M 21.907 19.707 c -0.191 0 -0.328 -0.094 -0.41 -0.176 c -0.144 -0.145 -0.226 -0.355 -0.226 -0.577 c 0.003 -0.418 0.289 -0.753 0.643 -0.753 h 4.468 c 0.008 0 0.015 -0.004 0.027 -0.008 h 0.051 c 0.351 0 0.636 0.344 0.636 0.761 c 0 0.414 -0.286 0.753 -0.636 0.753 H 21.907 Z M 27.097 16.629 c 0 0.414 -0.286 0.753 -0.64 0.753 h -4.464 c -0.004 0 -0.004 0 -0.004 0 h -0.082c -0.191 0 -0.328 -0.098 -0.414 -0.18 c -0.14 -0.145 -0.222 -0.352 -0.222 -0.573 c 0 -0.413 0.285 -0.749 0.631 -0.753h 3.434 c 0 0 0 0 0.004 0 h 1.116 c 0.008 0 0.012 -0.004 0.02 -0.004 C 26.819 15.887 27.097 16.215 27.097 16.629L 27.097 16.629 Z M 27.097 14.322 c 0 0.41 -0.278 0.737 -0.62 0.749 c -0.008 0 -0.012 0 -0.016 0 h -3.637 c -0.008 0 -0.015 0.004 -0.023 0.004 h -0.886 c -0.004 0 -0.008 0 -0.012 0 c -0.187 0 -0.324 -0.094 -0.406 -0.176c -0.144 -0.144 -0.226 -0.355 -0.226 -0.577 c 0.003 -0.414 0.293 -0.753 0.643 -0.753 h 4.468 c 0.008 0 0.015 -0.004 0.027 -0.004 h 0.051 C 26.811 13.565 27.097 13.905 27.097 14.322 L 27.097 14.322 Z M 27.097 14.322",BusinessRule:"M 32.844 13.245 h -0.089 v 0 H 13.764 v -0.015 h -1.009 v 16.989 h 0.095 v 0.011 h 19.716 v -0.011 h 0.278 V 13.245 Z M 31.844 14.229 v 4.185 h -18.08 v -4.185 H 31.844 Z M 18.168 25.306 v 3.938 h -4.404 v -3.938 H 18.168 Z M 13.764 24.322 v -4.923 h 4.404 v 4.923 H 13.764 Z M 19.177 25.306 h 12.667 v 3.938 H 19.177 V 25.306 Z M 19.177 24.322v -4.923 h 12.667 v 4.923 H 19.177 Z",User:"M 21.762 21.935 c 2.584 0 4.687 -2.561 4.687 -5.703 c 0 -3.147 -2.103 -5.703 -4.687 -5.703 c -1.279 0 -2.475 0.61-3.363 1.721 c -0.855 1.071 -1.327 2.484 -1.324 3.983 C 17.075 19.374 19.178 21.935 21.762 21.935 L 21.762 21.935 ZM 21.762 11.779 c 1.894 0 3.436 1.995 3.436 4.452 c 0 2.453 -1.541 4.452 -3.436 4.452 c -1.895 0 -3.44 -1.999 -3.44 -4.452C 18.323 13.774 19.864 11.779 21.762 11.779 L 21.762 11.779 Z M 25.699 21.309 c -0.348 0 -0.626 0.277 -0.626 0.626 c 0 0.344 0.277 0.622 0.626 0.622 c 2.136 0 3.875 1.74 3.875 3.879 c 0 0.272 -0.227 0.498 -0.501 0.498 H 14.447 c -0.274 0 -0.497 -0.223 -0.497 -0.498 c 0 -2.139 1.736 -3.879 3.872 -3.879 c 0.344 0 0.625 -0.277 0.625 -0.622 c 0 -0.348 -0.28 -0.626-0.625 -0.626 c -2.826 0 -5.124 2.297 -5.124 5.126 c 0 0.965 0.784 1.749 1.748 1.749 h 14.626 c 0.964 0 1.748 -0.7841.748 -1.749 C 30.822 23.606 28.524 21.309 25.699 21.309 L 25.699 21.309 Z M 22.217 9.832 c 0.448 -0.263 0.924 -0.396 1.419 -0.396 c 1.895 0 3.436 1.995 3.436 4.452 c 0 0.439 -0.048 0.873 -0.143 1.284 c -0.08 0.336 0.128 0.672 0.464 0.751 c 0.048 0.012 0.098 0.019 0.143 0.019 c 0.284 0 0.541 -0.195 0.608 -0.483 c 0.119 -0.506 0.18 -1.034 0.18 -1.571c 0 -3.147 -2.102 -5.703 -4.687 -5.703 c -0.711 0 -1.419 0.198 -2.054 0.573 c -0.296 0.174 -0.397 0.559 -0.219 0.855C 21.536 9.911 21.921 10.009 22.217 9.832 L 22.217 9.832 Z M 27.697 18.81 c -0.345 0 -0.626 0.277 -0.626 0.622 c 0 0.348 0.281 0.626 0.626 0.626 c 2.137 0 3.75 1.782 3.75 3.918 c 0 0.07 -0.013 0.141 -0.043 0.205 c -0.14 0.314 0.0030.684 0.318 0.823 c 0.082 0.037 0.167 0.055 0.253 0.055 c 0.241 0 0.466 -0.141 0.57 -0.373 c 0.101 -0.226 0.153 -0.464 0.153-0.714 C 32.699 21.15 30.523 18.81 27.697 18.81 L 27.697 18.81 Z M 27.697 18.81",Script:"M 22.453 15.04 c 0 0 -1.194 -3.741 2.548 -3.774 c 0 0 2.497 0.126 1.766 4.321 c -0.008 0.043 -0.015 0.086 -0.024 0.13c -0.806 4.323 -2.516 8.42 -3.193 10.581 h 3.904 c 0 0 0.983 4.581 -2.549 4.968 H 13.292 c 0 0 -3.097 -1.42 -1.517 -5.323 l 3 -10.839 H 11.84 c 0 0 -1.129 -2.902 1.709 -3.806 l 11.425 -0.032 l -0.73 0.355 l -1.193 1.726 L 22.453 15.04 Z M 22.409 12.597 c 0 0 -0.242 0.483 -0.278 0.98 h -9.098 c 0 0 -0.06 -0.871 0.714 -1.041 L 22.409 12.597 Z M 26.341 27.734c 0 0 -0.13 2.678 -2.226 1.871 c 0 0 -0.823 -0.565 -0.758 -1.855 L 26.341 27.734 Z M 22.905 15.008 c 0 0 0.653 -0.258 0.709-1.501 c 0 0 0.145 -1.144 1.483 -0.693 c 0 0 0.808 0.355 0.259 2.404 c 0 0 -2.226 8.5 -3.032 10.339 c 0 0 -1.064 2.646 0.096 4.226 h -8.581 c 0 0 -1.806 -0.452 -0.741 -3.613 c 0 0 2.935 -9.549 3.193 -11.162 L 22.905 15.008 Z"},DS={None:"",Standard:"M 52.002 73.379 c -2.494 -2.536 -6.55 -2.534 -9.043 0 c -1.208 1.228 -1.874 2.861 -1.874 4.598 c 0 1.225 0.337 2.395 0.957 3.411 l -1.167 1.186 l 2.071 0.458 l 2.071 0.458 l -0.45 -2.106 l -0.45 -2.106 l -1.292 1.314c -1.119 -2.065 -0.842 -4.709 0.877 -6.458 c 2.084 -2.119 5.475 -2.117 7.557 0 c 2.083 2.119 2.083 5.565 0 7.685c -0.976 0.992 -2.272 1.557 -3.65 1.59 l 0.025 1.068 c 1.65 -0.041 3.2 -0.716 4.368 -1.903 c 1.208 -1.228 1.874 -2.861 1.874 -4.597 C 53.875 76.24 53.209 74.607 52.002 73.379 Z",ParallelMultiInstance:"M 51.5,69.5 L52.5,69.5 L52.5,84.5 L51.5 84.5 Z M 46.5,69.5 L47.5,69.5 L47.5,84.5 L46.5 84.5 Z M 41.5,69.5 L42.5,69.5 L42.5,84.5 L41.5 84.5 Z  ",SequenceMultiInstance:"M 40.375,71.5 L 55.375,71.5 L 55.375,72.5 L 40.375,72.5 Z M 40.375,76.5 L 55.375,76.5 L 55.375,77.5 L 40.375,77.5 Z M 40.375,76.5 L 55.375,76.5 L 55.375,77.5 L 40.375,77.5 Z M 40.375,81.5 L 55.375,81.5L 55.375,82.5 L 40.375,82.5 Z"},RS=function(){function t(){}return t.prototype.updateBridging=function(t,e){var i,n=[];if(t.bridges=[],function(t,e){return t.constraints&yp.Bridging?t.constraints&yp.Bridging:t.constraints&yp.InheritBridging?e.constraints&xp.Bridging:0}(t,e)){var r=this.getPoints(t);i=np.toBounds(r);for(var o=t.bridgeSpace,s=e.bridgeDirection,a=-1,l=e.connectors,h=0;h<l.length;h++){var c=l[h];if(t&&c&&t.id!==c.id){var d=this.getPoints(c),p=np.toBounds(d);if(this.intersectsRect(i,p)){var u=this.intersect(r,d,!1,s,!0);if(u.length>0)for(var f=0;f<u.length;f++){var g=0,m=0,y=0,v=0,b=this.getLengthAtFractionPoint(t,u[f]);if(-1!==b.pointIndex){m=b.lengthFractionIndex,g=b.fullLength,y=b.segmentIndex,v=b.pointIndex;var w=this.getPointAtLength(m-o/2,r),S=this.getPointAtLength(m+o/2,r);(m+o/2)/g,this.isEmptyPoint(S)&&(S=w);var x,C=void 0;x=t.sourcePoint,C="Straight"===t.type?t.targetPoint:t.intermediatePoints[v];var P=this.angleCalculation(x,C);if(n.length){var O;O=t.sourcePoint;var E=Math.abs(this.lengthCalculation(O,S)),L=-1;a=-1;for(var I=0;I<n[y].bridges.length;I++){a++;var T=n[y].bridges[I];if(E<Math.abs(this.lengthCalculation(O,T.endPoint))){L=a;break}}if(L>=0){var A=void 0;(A=this.createSegment(w,S,P,s,v,t,e)).target=c.id,n[y].bridges.splice(L,0,A),n[y].bridges.join(),n[y].bridgeStartPoint.splice(L,0,w),n[y].bridgeStartPoint.join(),n[y].segmentIndex=y}else{A=void 0;(A=this.createSegment(w,S,P,s,v,t,e)).target=c.id,n[y].bridges.push(A),n[y].bridgeStartPoint.push(w),n[y].segmentIndex=y}}else if(!isNaN(w.x)&&!isNaN(w.y)&&!this.isEmptyPoint(S)){var B=void 0,k={bridges:[],bridgeStartPoint:[],segmentIndex:y};(B=this.createSegment(w,S,P,s,v,t,e)).target=c.id;var M=[];M.push(w),[].push(S),n[y]=k,n[y].bridges.push(B),n[y].bridgeStartPoint=M,n[y].segmentIndex=y}}}}}}0!==n.length&&this.firstBridge(n,t,o)}},t.prototype.firstBridge=function(t,e,i){for(var n=0;n<t.length;n++){for(var r=t[n],o=1;o<r.bridges.length;o++)if(qd.findLength(r.bridges[o].endPoint,r.bridges[o-1].endPoint)<i){r.bridges[o-1].endPoint=r.bridges[o].endPoint;var s=r.bridges[o-1],a=this.createBridgeSegment(s.startPoint,s.endPoint,s.angle,i,s.sweep);r.bridges[o-1].path=a,r.bridges.splice(o,1),r.bridgeStartPoint.splice(o,1),o--}e.sourcePoint;for(var l=0;l<r.bridges.length;l++){(s=r.bridges[l]).endPoint,e.bridges.push(s)}}},t.prototype.createSegment=function(t,e,i,n,r,o,s){var a,l,h={angle:0,endPoint:{x:0,y:0},target:"",path:"",segmentPointIndex:-1,startPoint:{x:0,y:0},sweep:1,rendered:!1};return l=this.sweepDirection(i,n,o,s),a=this.createBridgeSegment(t,e,i,o.bridgeSpace,l),h.path=a,h.startPoint=t,h.endPoint=e,h.angle=i,h.segmentPointIndex=r,h.sweep=l,h},t.prototype.createBridgeSegment=function(t,e,i,n,r){return"A "+n/2+" "+n/2+" "+i+" , 1 "+r+" "+e.x+","+e.y},t.prototype.sweepDirection=function(t,e,i,n){var r,o=Math.abs(t);switch(e){case"Top":case"Bottom":r=1,o>=0&&o<=90&&(r=0);break;case"Left":case"Right":r=1,t<0&&t>=-180&&(r=0)}return"Right"!==e&&"Bottom"!==e||(r=0===r?1:0),r},t.prototype.getPointAtLength=function(t,e){for(var i,n=0,r={x:0,y:0},o=0;o<e.length;o++){var s=e[o];if(i){var a=this.lengthCalculation(i,s);if(n+a>t){var l=t-n,h=qd.findAngle(i,s),c=l*Math.cos(h*Math.PI/180),d=l*Math.sin(h*Math.PI/180);r={x:i.x+c,y:i.y+d};break}n+=a,i=s}else i=s}return r},t.prototype.getPoints=function(t){var e=[];if(t.intermediatePoints&&("Straight"===t.type||"Orthogonal"===t.type))for(var i=0;i<t.intermediatePoints.length;i++)e.push(t.intermediatePoints[i]);return e},t.prototype.intersectsRect=function(t,e){return e.x<t.x+t.width&&t.x<e.x+e.width&&e.y<t.y+t.height&&t.y<e.y+e.height},t.prototype.intersect=function(t,e,i,n,r){i&&e.length>=2&&(e.splice(0,1),e.splice(0,1));for(var o=[],s=0;s<t.length-1;s++){var a=this.inter1(t[s],t[s+1],e,r,n);if(a.length>0)for(var l=0;l<a.length;l++)o.push(a[l]);i&&e.length>=1&&e.splice(0,1)}return o},t.prototype.inter1=function(t,e,i,n,r){for(var o=[],s=0;s<i.length-1;s++){var a=Xm(t,e,i[s],i[s+1]);if(!this.isEmptyPoint(a)){var l=this.angleCalculation(t,e),h=this.angleCalculation(i[s],i[s+1]);switch(l=this.checkForHorizontalLine(l),h=this.checkForHorizontalLine(h),r){case"Left":case"Right":l>h&&o.push(a);break;case"Top":case"Bottom":l<h&&o.push(a)}l===h&&n&&o.push(a)}}return o},t.prototype.checkForHorizontalLine=function(t){var e=Math.abs(t);return e>90?180-e:e},t.prototype.isEmptyPoint=function(t){return 0===t.x&&0===t.y},t.prototype.getLengthAtFractionPoint=function(t,e){for(var i=100,n=-1,r=0,o=-1,s=0,a=0,l=t.sourcePoint,h=l,c=[],d=0;d<t.intermediatePoints.length;d++){var p=t.intermediatePoints[d];c.push(p)}for(var u=0;u<c.length;u++){var f=c[u],g=this.getSlope(f,l,e,t);g<i&&(i=g,a=r+this.lengthCalculation(e,h),o=s,n=u),r+=qd.findLength(f,l),l=f,h=f}return s++,{lengthFractionIndex:a,fullLength:r,segmentIndex:o,pointIndex:n}},t.prototype.getSlope=function(t,e,i,n){var r=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y),s=(i.y-t.y)/(e.y-t.y),a=(i.x-t.x)/(e.x-t.x);if(!isFinite(s)||!isFinite(a)||isNaN(s)||isNaN(a)){if(t.x===e.x){if(t.y===e.y)return 1e4;if(t.y>i.y&&i.y>e.y||t.y<i.y&&i.y<e.y)return Math.abs(t.x-i.x)}else if(t.y===e.y&&(t.x>i.x&&i.x>e.x||t.x<i.x&&i.x<e.x))return Math.abs(t.y-i.y)}else if((t.x>=i.x&&i.x>=e.x||t.x<=i.x&&i.x<=e.x||r<3)&&(t.y>=i.y&&i.y>=e.y||t.y<=i.y&&i.y<=e.y||o<3))return Math.abs(s-a);return 1e4},t.prototype.angleCalculation=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.atan2(n,i)*(180/Math.PI)},t.prototype.lengthCalculation=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"Bridging"},t}(),zS=function(){function t(t){this.line=[],this.diagram=t}return t.prototype.canSnap=function(){return 0!=(this.diagram.snapSettings.constraints&(gp.SnapToObject|gp.SnapToLines))},t.prototype.snapPoint=function(t,e,i,n,r,o,s){var a=this.diagram.snapSettings,l=this.diagram.scroller.currentZoom,h={x:0,y:0},c=fb(e.wrapper),d={snapped:!1,offset:0},p={snapped:!1,offset:0};if(this.diagram.snapSettings.constraints&gp.SnapToObject){var u=void 0;(u=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id","_SnappingLines"),u.setAttribute("shapeRendering","crispEdges"),this.getAdornerLayerSvg().appendChild(u),this.snapObject(t,e,u,d,p,r,o===s)}var f=c.x+r.x,g=c.y+r.y,m=c.x+c.width+r.x,y=c.y+c.height+r.y,v=a.verticalGridlines.scaledIntervals,b=this.round(m,v,l),w=this.round(f,v,l);v=a.horizontalGridlines.scaledIntervals;var S=this.round(g,v,l),x=this.round(y,v,l),C=c.x+c.width,P=c.y+c.height;return d.snapped?this.diagram.snapSettings.constraints&gp.SnapToObject?h.x=d.offset:h.x=s.x-o.x:this.diagram.snapSettings.constraints&gp.SnapToVerticalLines?Math.abs(r.x)>=1&&(i?Math.abs(b-C)>Math.abs(w-c.x)?h.x+=w-c.x:h.x+=b-C:Math.abs(b-C)<Math.abs(w-c.x)?h.x+=b-C:h.x+=w-c.x):h.x=s.x-o.x,p.snapped?h.y=p.offset:this.diagram.snapSettings.constraints&gp.SnapToHorizontalLines?Math.abs(r.y)>=1&&(n?Math.abs(x-P)>Math.abs(S-c.y)?h.y+=S-c.y:h.y+=x-P:Math.abs(x-P)<Math.abs(S-c.y)?h.y+=x-P:h.y+=S-c.y):h.y=s.y-o.y,h},t.prototype.round=function(t,e,i){i=1===i?Math.pow(2,Math.floor(Math.log(i)/Math.log(2))):i;var n=0,r=0;for(r=0;r<e.length;r++)n+=e[r];var o=t%(n/=i),s=Math.floor(Math.abs(t)/n)*n;if(s!==t)if(t>=0)for(r=0;r<e.length;r++){if(o<=e[r]/i)return s+(o<e[r]/(2*i)?0:e[r]/i);s+=e[r]/i,o-=e[r]/i}else for(s*=-1,r=e.length-1;r>=0;r--){if(Math.abs(o)<=e[r]/i)return s-(Math.abs(o)<e[r]/(2*i)?0:e[r]/i);s-=e[r]/i,o+=e[r]/i}return t},t.prototype.snapObject=function(t,e,i,n,r,o,s){var a,l,h,c=null,d=this.diagram.scroller,p=this.diagram.snapSettings,u=[],f=[],g=[],m=[],y=fb(e.wrapper),v=t.scroller.currentZoom,b=-d.horizontalOffset,w=-d.verticalOffset,S=p.snapObjectDistance/v,x=new np(0,0,d.viewPortWidth,d.viewPortHeight),C=new np(b/v,y.y-S-5,x.width/v,y.height+2*S+10),P=new np(y.x-S-5,w/v,y.width+2*S+10,x.height/v);x=new np(b/v,w/v,x.width/v,x.height/v);var O,E,L,I=this.findNodes(t.spatialSearch,e,P,x),T=t.nameTable;for(O=0;O<I.length;O++)E=I[O],this.canBeTarget(t,E)&&(this.diagram.nameTable[E.id]instanceof Gf||!this.canConsider(T,e,E)||((L=E.bounds).height+L.y<o.y+y.y?g.push({obj:E,distance:Math.abs(y.y+o.y-L.y-L.height)}):L.y>y.y+o.y+y.height&&m.push({obj:E,distance:Math.abs(y.y+o.y+y.height-L.y)}),(null==c||c>Math.abs(L.y-y.y-o.y))&&(Math.abs(L.x+L.width/2-(y.x+y.width/2+o.x))<=S?(l=this.createSnapObject(L,y,"centerX"),c=Math.abs(L.y-y.y)):Math.abs(L.x+L.width-(y.x+y.width+o.x))<=S?(l=this.createSnapObject(L,y,"right"),c=Math.abs(L.y-y.y)):Math.abs(L.x-(y.x+o.x))<=S?(l=this.createSnapObject(L,y,"left"),c=Math.abs(L.y-y.y)):Math.abs(L.x-(y.x+y.width+o.x))<=S?(l=this.createSnapObject(L,y,"rightLeft"),c=Math.abs(L.y-y.y)):Math.abs(L.x+L.width-(y.x+o.x))<=S&&(l=this.createSnapObject(L,y,"leftRight"),c=Math.abs(L.y-y.y)))));I=this.findNodes(t.spatialSearch,e,C,x);for(var A=0;A<I.length;A++)E=I[A],this.canBeTarget(t,E)&&(this.diagram.nameTable[E.id]instanceof Gf||!this.canConsider(T,e,E)||((L=E.bounds).x+L.width<y.x+o.x&&(u[u.length]={obj:E,distance:Math.abs(y.x+o.x-L.x-L.width)}),L.x>y.x+o.x+y.width&&(f[f.length]={obj:E,distance:Math.abs(y.x+o.x+y.width-L.x)}),(null==a||a>Math.abs(L.x-y.x-o.x))&&(Math.abs(L.y+L.height/2-(y.y+y.height/2+o.y))<=S?(h=this.createSnapObject(L,y,"centerY"),a=Math.abs(L.x-y.x)):Math.abs(L.y-y.y-o.y)<=S?(h=this.createSnapObject(L,y,"top"),a=Math.abs(L.x-y.x)):Math.abs(L.y+L.height-(y.y+y.height+o.y))<=S?(h=this.createSnapObject(L,y,"bottom"),a=Math.abs(L.x-y.x)):Math.abs(L.y+L.height-y.y-o.y)<=S?(h=this.createSnapObject(L,y,"topBottom"),a=Math.abs(L.x-y.x)):Math.abs(L.y-(y.y+y.height+o.y))<=S&&(h=this.createSnapObject(L,y,"bottomTop"),a=Math.abs(L.x-y.x)))));this.createGuidelines(t,l,h,i,n,r,s),n.snapped||this.createHSpacingLines(t,i,e,u,f,n,r,s,o,S),r.snapped||this.createVSpacingLines(t,i,e,g,m,n,r,s,o,S)},t.prototype.snapConnectorEnd=function(t){var e=this.diagram.snapSettings,i=this.diagram.scroller.currentZoom;return e.constraints&gp.SnapToLines&&(t.x=this.round(t.x,e.verticalGridlines.scaledIntervals,i),t.y=this.round(t.y,e.horizontalGridlines.scaledIntervals,i)),t},t.prototype.canBeTarget=function(t,e){return e=this.diagram.nameTable[e.id],!aw(this.diagram,e,!1)},t.prototype.snapSize=function(t,e,i,n,r,o,s,a){var l,h,c,d,p=this.diagram.snapSettings,u=this.diagram.scroller,f=fb(s.wrapper),g=t.nameTable,m=[],y=[],v=t.scroller.currentZoom,b=-u.horizontalOffset,w=-u.verticalOffset,S=p.snapObjectDistance/v,x=new np(0,0,u.viewPortWidth,u.viewPortHeight),C=new np(b/v,(f.y-5)/v,x.width/v,(f.height+10)/v),P=new np((f.x-5)/v,w/v,(f.width+10)/v,x.height/v);x=new np(b/v,w/v,x.width/v,x.height/v);var O,E,L,I=[],T=this.findNodes(t.spatialSearch,s,P,x,I);for(O=0;O<T.length;O++)E=T[O],!this.canConsider(g,s,E)||this.diagram.nameTable[E.id]instanceof Gf||(L=E.bounds,(null==l||l>Math.abs(L.y-f.y))&&(e.left?Math.abs(f.x+r-L.x)<=S?(c=this.createSnapObject(L,f,"left"),l=Math.abs(L.y-f.y)):Math.abs(f.x+r-L.x-L.width)<=S&&(c=this.createSnapObject(L,f,"leftRight"),l=Math.abs(L.y-f.y)):e.right&&(Math.abs(f.x+r+f.width-L.x-L.width)<=S?(c=this.createSnapObject(L,f,"right"),l=Math.abs(L.y-f.y)):Math.abs(f.x+r+f.width-L.x)<=S&&(c=this.createSnapObject(L,f,"rightLeft"),l=Math.abs(L.y-f.y)))));T=this.findNodes(t.spatialSearch,s,C,x);for(var A=0;A<T.length;A++){var B=T[A];if(this.canConsider(g,s,B)&&!(this.diagram.nameTable[B.id]instanceof Gf)){var k=B.bounds;(null==h||h>Math.abs(k.x-f.x))&&(i.top?Math.abs(f.y+o-k.y)<=S?(d=this.createSnapObject(k,f,"top"),h=Math.abs(k.x-f.x)):Math.abs(f.y+o-k.y-k.height)<=S&&(d=this.createSnapObject(k,f,"topBottom"),h=Math.abs(k.x-f.x)):i.bottom&&(Math.abs(f.y+f.height+o-k.y-k.height)<=S?(d=this.createSnapObject(k,f,"bottom"),h=Math.abs(k.x-f.x)):Math.abs(f.y+f.height+o-k.y)<=S&&(d=this.createSnapObject(k,f,"bottomTop"),h=Math.abs(k.x-f.x))))}}for(O=0;O<I.length;O++)if(E=I[O],this.canConsider(g,s,E)){var M=E.bounds,D=e.left?-r:r,R=Math.abs(f.width+D-M.width),z=void 0;R<=S&&(z=e.left?-M.width+f.width:M.width-f.width,m[m.length]={source:E,difference:R,offset:z}),D=i.top?-o:o;var j=Math.abs(f.height+D-M.height);j<=S&&(z=i.top?-M.height+f.height:M.height-f.height,y[y.length]={source:E,difference:j,offset:z})}if(!t.getTool)this.createGuidelines(t,c,d,n,e,i,a);!e.snapped&&m.length>0&&(e.left||e.right)&&this.addSameWidthLines(t,n,m,e,a,s),!i.snapped&&y.length>0&&(i.top||i.bottom)&&this.addSameHeightLines(t,n,y,i,a,s)},t.prototype.snapTop=function(t,e,i,n,r,o,s,a){var l,h=r;e.top=!0,t.left=t.right=!1;var c=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&gp.SnapToObject&&!o.rotateAngle&&(l=a.y-a.height*o.pivot.y+r-(o.offsetY-o.height*o.pivot.y),this.snapSize(this.diagram,t,e,i,n,l,this.diagram.selectedItems,s)),e.snapped)h=r-l+e.offset;else if(this.diagram.snapSettings.constraints&gp.SnapToHorizontalLines){var d=a.y-a.height*o.pivot.y,p=d+r;h=this.round(p,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,c)-d}return h},t.prototype.snapRight=function(t,e,i,n,r,o,s,a){var l,h=n;t.right=!0,e.top=e.bottom=!1;var c=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&gp.SnapToObject&&!o.rotateAngle&&(l=a.x+a.width*(1-o.pivot.x)+n-(o.offsetX+o.width*(1-o.pivot.x)),this.snapSize(this.diagram,t,e,i,l,r,this.diagram.selectedItems,s)),t.snapped)h=n-l+t.offset;else if(this.diagram.snapSettings.constraints&gp.SnapToVerticalLines){var d=a.x+a.width*(1-o.pivot.x),p=d+n;h=this.round(p,this.diagram.snapSettings.verticalGridlines.scaledIntervals,c)-d}return h},t.prototype.snapLeft=function(t,e,i,n,r,o,s,a){var l=n,h=0;t.left=!0,e.top=e.bottom=!1;var c=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&gp.SnapToObject&&!o.rotateAngle&&(h=a.x-a.width*o.pivot.x+n-(o.offsetX-o.width*o.pivot.x),this.snapSize(this.diagram,t,e,i,h,r,this.diagram.selectedItems,s)),t.snapped)l=n-h+t.offset;else if(this.diagram.snapSettings.constraints&gp.SnapToVerticalLines){var d=a.x-a.width*o.pivot.x,p=d+n;l=this.round(p,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,c)-d}return l},t.prototype.snapBottom=function(t,e,i,n,r,o,s,a){var l=r;e.bottom=!0,t.left=t.right=!1;var h=this.diagram.scroller.currentZoom,c=0;if(this.diagram.snapSettings.constraints&gp.SnapToObject&&!o.rotateAngle&&(c=a.y+a.height*(1-o.pivot.y)+r-(o.offsetY+o.height*(1-o.pivot.y)),this.snapSize(this.diagram,t,e,i,n,c,this.diagram.selectedItems,s)),fb(o instanceof Qp||o instanceof vf?o:o.wrapper),e.snapped)l=r-c+e.offset;else if(this.diagram.snapSettings.constraints&gp.SnapToHorizontalLines){var d=a.y+a.height*(1-o.pivot.y),p=d+r;l=this.round(p,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,h)-d}return l},t.prototype.createGuidelines=function(t,e,i,n,r,o,s){return e&&(r.offset=e.offsetX,r.snapped=!0,s||(e.type,this.renderAlignmentLines(e.start,e.end,n,t.scroller.transform))),i&&(o.offset=i.offsetY,o.snapped=!0,s||(i.type,this.renderAlignmentLines(i.start,i.end,n,t.scroller.transform))),n},t.prototype.renderAlignmentLines=function(t,e,i,n){t={x:(t.x+n.tx)*n.scale,y:(t.y+n.ty)*n.scale},e={x:(e.x+n.tx)*n.scale,y:(e.y+n.ty)*n.scale};var r={stroke:"#07EDE1",strokeWidth:1,startPoint:{x:t.x,y:t.y},endPoint:{x:e.x,y:e.y},fill:"#07EDE1",dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:cb()},o=0;for(this.line.push(r),o=0;o<this.line.length;o++)this.diagram.diagramRenderer.drawLine(i,this.line.pop())},t.prototype.createHSpacingLines=function(t,e,i,n,r,o,s,a,l,h){var c=0;this.sortByDistance(n,"distance",!0),this.sortByDistance(r,"distance",!0);var d,p,u,f,g=[],m=fb(i.wrapper);if(n.length>0&&(g[g.length]=n[0],c=(d=n[0].obj.bounds).y,n.length>1?(u=n[1].obj.bounds,f=d.x-u.x-u.width,Math.abs(f-n[0].distance)<=h?c=this.findEquallySpacedNodesAtLeft(n,f,c,g):f=n[0].distance):f=n[0].distance),this.sortByDistance(g,"distance"),g[g.length]={obj:i,distance:0},c=m.y<c||!c?m.y:c,r.length>0){var y=void 0;if(c=(p=r[0].obj.bounds).y<c?p.y:c,r.length>1&&(y=(u=r[1].obj.bounds).x-p.x-p.width),n.length>0)if(Math.abs(r[0].distance-n[0].distance)<=h){var v=Math.abs(r[0].distance-n[0].distance)/2;r[0].distance<n[0].distance?f-=v:f+=v,g[g.length]=r[0]}else 1===n.length&&(d=void 0,g.splice(0,1),g[g.length]=r[0],f=y);else f=y,g[g.length]=r[0];r.length>1&&p.x+p.width<u.x&&(c=this.findEquallySpacedNodesAtRight(r,y,c,g,h))}if(g.length>2){this.addHSpacingLines(t,e,g,a,c);var b=0;a&&(b=l.x),d?o.offset=f-Math.abs(m.x+b-d.x-d.width)+b:p&&(o.offset=Math.abs(m.x+m.width+b-p.x)-f+b),o.snapped=!0}},t.prototype.createVSpacingLines=function(t,e,i,n,r,o,s,a,l,h){var c=0;this.sortByDistance(n,"distance",!0),this.sortByDistance(r,"distance",!0);var d,p,u,f,g,m=[],y=fb(i.wrapper);if(n.length>0&&(m[m.length]=n[0],c=(d=n[0].obj.bounds).x+d.width,n.length>1?(u=n[1].obj.bounds,f=d.y-u.y-u.height,Math.abs(f-n[0].distance)<=h?c=this.findEquallySpacedNodesAtTop(n,f,c,m):f=n[0].distance):f=n[0].distance),this.sortByDistance(m,"distance"),m[m.length]={obj:i,distance:0},c=y.x+y.width>c||!c?y.x+y.width:c,r.length>0){if(c=(p=r[0].obj.bounds).x+p.width>c?p.x+p.width:c,r.length>1&&(g=(u=r[1].obj.bounds).y-p.y-p.height),n.length>0)if(Math.abs(r[0].distance-n[0].distance)<=h){var v=Math.abs(r[0].distance-n[0].distance)/2;r[0].distance<n[0].distance?f-=v:f+=v,m[m.length]=r[0]}else 1===n.length&&(d=void 0,m.splice(0,1),m[m.length]=r[0],f=g);else f=g,m[m.length]=r[0];r.length>1&&u.y>p.y+p.height&&(c=this.findEquallySpacedNodesAtBottom(r,g,c,m,h))}if(m.length>2){this.addVSpacingLines(t,e,m,a,c);var b=0;a&&(b=l.y),d?s.offset=f-Math.abs(y.y+b-d.y-d.height)+b:p&&(s.offset=Math.abs(y.y+y.height+b-p.y)-f+b),s.snapped=!0}},t.prototype.addHSpacingLines=function(t,e,i,n,r){var o,s,a;if(!n)for(o=0;o<i.length-1;o++){var l=i[o].obj instanceof Mv?fb(i[o].obj.wrapper):i[o].obj.bounds,h=i[o+1].obj instanceof Mv?fb(i[o+1].obj.wrapper):i[o+1].obj.bounds;s={x:l.x+l.width,y:r-15},a={x:h.x,y:r-15},this.renderSpacingLines(s,a,e,this.getAdornerLayerSvg(),t.scroller.transform)}},t.prototype.addVSpacingLines=function(t,e,i,n,r){var o,s;if(!n)for(var a=0;a<i.length-1;a++){var l=i[a].obj instanceof Mv?fb(i[a].obj.wrapper):i[a].obj.bounds,h=i[a+1].obj instanceof Mv?fb(i[a+1].obj.wrapper):i[a+1].obj.bounds;o={x:r+15,y:l.y+l.height},s={x:r+15,y:h.y},this.renderSpacingLines(o,s,e,this.getAdornerLayerSvg(),t.scroller.transform)}},t.prototype.addSameWidthLines=function(t,e,i,n,r,o){this.sortByDistance(i,"offset");var s,a,l,h=fb(o.wrapper),c=i[0],d=c.source.bounds,p=[];for(p.push(i[0]),l=1;l<i.length;l++)i[l].source.bounds.width===d.width&&p.push(i[l]);if(!r)for(s={x:h.x+c.offset,y:h.y-15},a={x:h.x+h.width+c.offset,y:h.y-15},this.renderSpacingLines(s,a,e,this.getAdornerLayerSvg(),t.scroller.transform),l=0;l<p.length;l++)s={x:(h=p[l].source.bounds).x,y:h.y-15},a={x:h.x+h.width,y:h.y-15},this.renderSpacingLines(s,a,e,this.getAdornerLayerSvg(),t.scroller.transform);n.offset=c.offset,n.snapped=!0},t.prototype.addSameHeightLines=function(t,e,i,n,r,o){this.sortByDistance(i,"offset");var s,a,l,h=fb(o.wrapper),c=i[0],d=c.source.bounds,p=[];for(p.push(i[0]),l=0;l<i.length;l++)i[l].source.bounds.height===d.height&&p.push(i[l]);if(!r)for(s={x:h.x+h.width+15,y:h.y+c.offset},a={x:h.x+h.width+15,y:h.y+c.offset+h.height},this.renderSpacingLines(s,a,e,this.getAdornerLayerSvg(),t.scroller.transform),l=0;l<p.length;l++)s={x:(h=p[l].source.bounds).x+h.width+15,y:h.y},a={x:h.x+h.width+15,y:h.y+h.height},this.renderSpacingLines(s,a,e,this.getAdornerLayerSvg(),t.scroller.transform);n.offset=c.offset,n.snapped=!0},t.prototype.renderSpacingLines=function(t,e,i,n,r){var o,s,a=new ru,l={};t={x:(t.x+r.tx)*r.scale,y:(t.y+r.ty)*r.scale},e={x:(e.x+r.tx)*r.scale,y:(e.y+r.ty)*r.scale},t.x===e.x?(o="M"+(t.x-5)+" "+(t.y+5)+"L"+t.x+" "+t.y+"L"+(t.x+5)+" "+(t.y+5)+"zM"+(e.x-5)+" "+(e.y-5)+" L"+e.x+" "+e.y+" L"+(e.x+5)+" "+(e.y-5)+"z",s={startPoint:{x:t.x-8,y:t.y-1},endPoint:{x:t.x+8,y:t.y-1},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:cb()},a.data=o,l.data=a.data,l.angle=0,l.pivotX=0,l.pivotY=0,l.x=0,l.y=0,l.height=0,l.width=1,l.id=cb(),this.diagram.diagramRenderer.drawPath(i,l),this.line.push(s),this.diagram.diagramRenderer.drawLine(i,this.line.pop()),s={startPoint:{x:e.x-8,y:e.y+1},endPoint:{x:e.x+8,y:e.y+1},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:this.getAdornerLayerSvg().id+"spacing"},this.line.push(s),this.diagram.diagramRenderer.drawLine(i,this.line.pop())):(o="M"+(t.x+5)+" "+(t.y+5)+" L"+t.x+" "+t.y+" L"+(t.x+5)+" "+(t.y-5)+"zM"+(e.x-5)+" "+(e.y-5)+" L"+e.x+" "+e.y+" L"+(e.x-5)+" "+(e.y+5)+"z",a.data=o,l.data=o,l.angle=0,l.pivotX=0,l.pivotY=0,l.x=0,l.y=0,l.height=0,l.width=1,l.id=cb(),this.diagram.diagramRenderer.drawPath(i,l),s={visible:!0,opacity:1,id:cb(),startPoint:{x:t.x-1,y:t.y-8},endPoint:{x:t.x-1,y:t.y+8},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"0",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0},this.line.push(s),this.diagram.diagramRenderer.drawLine(i,this.line.pop()),s={width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:cb(),startPoint:{x:e.x+1,y:e.y-8},endPoint:{x:e.x+1,y:e.y+8},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"0"},this.line.push(s),this.diagram.diagramRenderer.drawLine(i,this.line.pop())),s={startPoint:{x:t.x,y:t.y},endPoint:{x:e.x,y:e.y},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"0",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:cb()},this.line.push(s),this.diagram.diagramRenderer.drawLine(i,this.line.pop())},t.prototype.createSnapObject=function(t,e,i){var n;switch(i){case"left":n={start:{x:t.x,y:Math.min(t.y,e.y)},end:{x:t.x,y:Math.max(t.y+t.height,e.y+e.height)},offsetX:t.x-e.x,offsetY:0,type:"sideAlign"};break;case"right":n={type:"sideAlign",start:{x:t.x+t.width,y:Math.min(t.y,e.y)},offsetX:t.x+t.width-e.x-e.width,offsetY:0,end:{x:t.x+t.width,y:Math.max(t.y+t.height,e.y+e.height)}};break;case"top":n={offsetY:t.y-e.y,offsetX:0,type:"sideAlign",start:{x:Math.min(t.x,e.x),y:t.y},end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y}};break;case"bottom":n={type:"sideAlign",offsetY:t.y+t.height-e.y-e.height,offsetX:0,end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y+t.height},start:{x:Math.min(t.x,e.x),y:t.y+t.height}};break;case"topBottom":n={start:{x:Math.min(t.x,e.x),y:t.y+t.height},end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y+t.height},offsetY:t.y+t.height-e.y,offsetX:0,type:"sideAlign"};break;case"bottomTop":n={start:{x:Math.min(t.x,e.x),y:t.y},end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y},offsetY:t.y-e.y-e.height,offsetX:0,type:"sideAlign"};break;case"leftRight":n={start:{x:t.x+t.width,y:Math.min(t.y,e.y)},end:{x:t.x+t.width,y:Math.max(t.y+t.height,e.y+e.height)},offsetX:t.x+t.width-e.x,offsetY:0,type:"sideAlign"};break;case"rightLeft":n={start:{x:t.x,y:Math.min(t.y,e.y)},end:{x:t.x,y:Math.max(t.y+t.height,e.y+e.height)},offsetX:t.x-e.x-e.width,offsetY:0,type:"sideAlign"};break;case"centerX":n={start:{x:t.x+t.width/2,y:Math.min(t.y,e.y)},end:{x:t.x+t.width/2,y:Math.max(t.y+t.height,e.y+e.height)},offsetX:t.x+t.width/2-(e.x+e.width/2),offsetY:0,type:"centerAlign"};break;case"centerY":n={start:{x:Math.min(t.x,e.x),y:t.y+t.height/2},end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y+t.height/2},offsetY:t.y+t.height/2-(e.y+e.height/2),offsetX:0,type:"centerAlign"}}return n},t.prototype.snapAngle=function(t,e){var i=this.diagram.snapSettings.snapAngle,n=e%(i||0);return n>=i/2?e+i-n:e-n},t.prototype.canConsider=function(t,e,i){return!this.diagram.selectedItems.nodes.length||this.diagram.selectedItems.nodes[0].id!==i.id},t.prototype.findNodes=function(t,e,i,n,r){for(var o,s,a=[],l=t.findQuads(r?n:i),h=0;h<l.length;h++){var c=l[h];if(c.objects.length>0)for(var d=0;d<c.objects.length;d++)o=c.objects[d],this.diagram.nameTable[o.id]instanceof Gf||!o.visible||"SwimLane"===this.diagram.nameTable[o.id].shape.type||this.diagram.nameTable[o.id].isLane||this.diagram.nameTable[o.id].isPhase||this.diagram.nameTable[o.id].isHeader||(s=fb(o),-1===a.indexOf(o)&&this.intersectsRect(i,s)&&a.push(o),r&&r.indexOf(o)&&this.intersectsRect(n,s)&&r.push(o))}return a},t.prototype.intersectsRect=function(t,e){return e.x<t.x+t.width&&t.x<e.x+e.width&&e.y<t.y+t.height&&t.y<e.y+e.height},t.prototype.getAdornerLayerSvg=function(){return this.diagram.diagramRenderer.adornerSvgLayer},t.prototype.removeGuidelines=function(t){var e=this.getAdornerLayerSvg().getElementById("_SnappingLines"),i=this.getAdornerLayerSvg().getElementById("pivotLine");e&&e.parentNode.removeChild(e),i&&i.parentNode.removeChild(i)},t.prototype.sortByDistance=function(t,e,i){var n,r,o;if(i)for(n=0;n<t.length;n++)for(r=n+1;r<t.length;r++)t[n][e]>t[r][e]&&(o=t[n],t[n]=t[r],t[r]=o);else for(n=0;n<t.length;n++)for(r=n+1;r<t.length;r++)t[n][e]<t[r][e]&&(o=t[n],t[n]=t[r],t[r]=o)},t.prototype.findEquallySpacedNodesAtLeft=function(t,e,i,n){var r,o,s,a;for(a=1;a<t.length&&(r=t[a-1].obj.bounds,o=t[a].obj.bounds,s=r.x-o.x-o.width,Math.abs(s-e)<=1);a++)n[n.length]=t[a],o.y<i&&(i=o.y);return i},t.prototype.findEquallySpacedNodesAtRight=function(t,e,i,n,r){var o,s,a,l,h=t[0].distance;if(Math.abs(e-h)<=r)for(var c=0;c<t.length-1&&(o=t[c].obj,s=t[c+1].obj.bounds,a=o.bounds,l=s.x-a.x-a.width,Math.abs(l-e)<=1);c++)n[n.length]=t[c+1],a.y<i&&(i=a.y);return i},t.prototype.findEquallySpacedNodesAtTop=function(t,e,i,n){for(var r,o,s,a=1;a<t.length&&(r=t[a-1].obj.bounds,o=t[a].obj.bounds,s=r.y-o.y-o.height,Math.abs(s-e)<=1);a++)n[n.length]=t[a],o.x+o.width>i&&(i=o.x+o.width);return i},t.prototype.findEquallySpacedNodesAtBottom=function(t,e,i,n,r){var o,s,a,l,h=t[0].distance;if(Math.abs(e-h)<=r)for(var c=0;c<t.length-1&&(o=t[c].obj,s=t[c+1].obj.bounds,a=o.bounds,l=s.y-a.y-a.height,Math.abs(l-e)<=1);c++)n[n.length]=t[c+1],a.x+a.width>i&&(i=a.x+a.width);return i},t.prototype.getLayer=function(){var t;return this.diagram.snapSettings.constraints&gp.SnapToObject&&((t=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id","_SnappingLines"),t.setAttribute("shapeRendering","crispEdges"),this.getAdornerLayerSvg().appendChild(t)),t},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"Snapping"},t}(),jS=function(){function t(){this.groupUndo=!1,this.childTable=[],this.historyCount=0,this.hasGroup=!1,this.groupCount=0}return t.prototype.initHistory=function(t){t.historyManager={canRedo:!1,canUndo:!1,currentEntry:null,push:t.addHistoryEntry.bind(t),undo:Function,redo:Function,startGroupAction:t.startGroupAction.bind(t),endGroupAction:t.endGroupAction.bind(t),canLog:null,undoStack:[],redoStack:[],stackLimit:t.historyManager?t.historyManager.stackLimit:void 0}},t.prototype.addHistoryEntry=function(t,e){var i=null;if(e.historyManager.canLog&&!0===e.historyManager.canLog(t).cancel)return;if(e.historyManager&&e.historyManager.canUndo&&e.historyManager.currentEntry&&((i=e.historyManager.currentEntry).next?i.previous&&(i.next.previous=null,i.next=t,t.previous=i):(i.next=t,t.previous=i)),e.historyManager.currentEntry=t,e.historyManager.stackLimit){if("StartGroup"===t.type||"EndGroup"===t.type){var n="EndGroup"===t.type;this.setEntryLimit(n)}this.hasGroup||0!==this.groupCount||(this.historyCount<e.historyManager.stackLimit?this.historyCount++:this.applyLimit(e.historyManager.currentEntry,e.historyManager.stackLimit,e))}this.getHistoryList(e),e.historyManager.canUndo=!0,e.historyManager.canRedo=!1},t.prototype.applyLimit=function(t,e,i,n){if(t&&t.previous){if("StartGroup"===t.type||"EndGroup"===t.type){var r="StartGroup"===t.type;this.setEntryLimit(r)}this.hasGroup||0!==this.groupCount||e--,0===e?(n&&this.limitHistoryStack(t.previous,i),i.historyManager.stackLimit<this.historyCount&&(this.historyCount=i.historyManager.stackLimit),delete t.previous):t.previous&&this.applyLimit(t.previous,e,i,n)}this.groupCount=0},t.prototype.clearHistory=function(t){var e=t.historyManager;e.currentEntry=void 0,e.canUndo=!1,e.canRedo=!1,this.historyCount=0,this.groupCount=0,t.historyManager.undoStack=[],t.historyManager.redoStack=[]},t.prototype.setEntryLimit=function(t){t?this.groupCount--:this.groupCount++,this.hasGroup=t?!t:t},t.prototype.limitHistoryStack=function(t,e){"StartGroup"!==t.type&&"EndGroup"!==t.type&&(this.removeFromStack(e.historyManager.undoStack,t),this.removeFromStack(e.historyManager.redoStack,t)),t.previous&&this.limitHistoryStack(t.previous,e)},t.prototype.removeFromStack=function(t,e){if(t.length)for(var i=0;i<=t.length;i++)if(t[i].undoObject===e.undoObject&&t[i].redoObject===e.redoObject){t.splice(i,1);break}},t.prototype.undo=function(t){var e=this.getUndoEntry(t),i=0;if(e)if("Internal"===e.category)"EndGroup"===e.type?(i++,this.groupUndo=!0):this.undoEntry(e,t),this.groupUndo&&(this.undoGroupAction(e,t,i),this.groupUndo=!1);else{$()||t.historyManager.undo(e);var n={entryType:"undo",oldValue:e.undoObject,newValue:e.redoObject};$()&&(n={entryType:"undo",oldValue:this.getHistoryChangeEvent(e.undoObject,e.blazorHistoryEntryType),newValue:this.getHistoryChangeEvent(e.redoObject,e.blazorHistoryEntryType)}),t.triggerEvent(kp.historyStateChange,n)}},t.prototype.getHistoryChangeEvent=function(t,e){var i={};switch(e){case"Node":i.node=t;break;case"Connector":i.connector=t;break;case"Selector":i.selector=t;break;case"Diagram":i.diagram=t;break;case"ShapeAnnotation":i.shapeAnnotation=t;break;case"PathAnnotation":i.pathAnnotation=t;break;case"PortObject":i.pointPortModel=t;break;case"Object":i.object=t}return i},t.prototype.getHistoryList=function(t){var e,i,n=[],r=[],o=t.historyManager.currentEntry;for(o=t.historyManager.currentEntry,t.historyManager.canUndo||0===t.historyManager.undoStack.length?this.getHistroyObject(n,o):this.getHistroyObject(r,o);o&&o.previous;)e=o.previous,this.getHistroyObject(n,e),o=o.previous;for(o=t.historyManager.currentEntry;o&&o.next;)i=o.next,this.getHistroyObject(r,i),o=o.next;t.historyManager.undoStack=n,t.historyManager.redoStack=r},t.prototype.getHistroyObject=function(t,e){e&&"StartGroup"!==e.type&&"EndGroup"!==e.type&&t.push({redoObject:e.redoObject?e.redoObject:null,undoObject:e.undoObject?e.undoObject:null,type:e.type?e.type:null,category:e.category?e.category:null})},t.prototype.undoGroupAction=function(t,e,i){for(;0!==i;)this.undoEntry(t,e),"StartGroup"===(t=this.getUndoEntry(e)).type?i--:"EndGroup"===t.type&&i++;i=0},t.prototype.undoEntry=function(t,e){var i,n;if("PropertyChanged"!==t.type&&"CollectionChanged"!==t.type&&"LabelCollectionChanged"!==t.type&&(i=t.undoObject,n=t.undoObject),"StartGroup"!==t.type&&"EndGroup"!==t.type&&e.historyManager.undoStack.length>0){var r=e.historyManager.undoStack.splice(0,1);e.historyManager.redoStack.splice(0,0,r[0]),n=t.undoObject}switch(e.protectPropertyChange(!0),e.diagramActions|=Ip.UndoRedo,t.type){case"PositionChanged":case"Align":case"Distribute":this.recordPositionChanged(i,e);break;case"SizeChanged":case"Sizing":this.recordSizeChanged(i,e,t);break;case"RotationChanged":this.recordRotationChanged(i,e,t);break;case"ConnectionChanged":this.recordConnectionChanged(i,e);break;case"PropertyChanged":this.recordPropertyChanged(t,e,!1);break;case"CollectionChanged":t.isUndo=!0,this.recordCollectionChanged(t,e),t.isUndo=!1;break;case"LabelCollectionChanged":t.isUndo=!0,this.recordLabelCollectionChanged(t,e),t.isUndo=!1;break;case"PortCollectionChanged":t.isUndo=!0,this.recordPortCollectionChanged(t,e),t.isUndo=!1;break;case"Group":this.unGroup(t,e);break;case"UnGroup":this.group(t,e);break;case"SegmentChanged":this.recordSegmentChanged(i,e);break;case"PortPositionChanged":this.recordPortChanged(t,e,!1);break;case"AnnotationPropertyChanged":this.recordAnnotationChanged(t,e,!1);break;case"ChildCollectionChanged":this.recordChildCollectionChanged(t,e,!1);break;case"StackChildPositionChanged":this.recordStackPositionChanged(t,e,!1);break;case"RowHeightChanged":this.recordGridSizeChanged(t,e,!1,!0);break;case"ColumnWidthChanged":this.recordGridSizeChanged(t,e,!1,!1);break;case"LanePositionChanged":this.recordLanePositionChanged(t,e,!1);break;case"LaneCollectionChanged":case"PhaseCollectionChanged":t.isUndo=!0,this.recordLaneOrPhaseCollectionChanged(t,e,!1),t.isUndo=!1;break;case"SendToBack":case"SendForward":case"SendBackward":case"BringToFront":this.recordOrderCommandChanged(t,e,!1)}if(e.diagramActions&=~Ip.UndoRedo,e.protectPropertyChange(!1),e.historyChangeTrigger(t,"Undo"),n){var o=this.checkNodeObject(n,e);if(o){var s=Lb(e.updateSelection);s&&s(o,e)}}},t.prototype.checkNodeObject=function(t,e){var i;if(t.id)i=e.nameTable[t.id];else if(t.nodes&&t.nodes.length>0||t.connectors&&t.connectors.length>0)for(var n=0,r=t.nodes.length>0?t.nodes:t.connectors;n<r.length;n++)i=r[n],i=e.nameTable[i.id];else{var o=t.nodes?t.nodes:t.connectors;if(o)for(var s=0,a=Object.keys(o);s<a.length;s++){var l=a[s],h=Number(l);i=t.nodes?e.nodes[h]:e.connectors[h]}}return i},t.prototype.group=function(t,e){e.add(t.undoObject)},t.prototype.unGroup=function(t,e){t.redoObject=gb(t.undoObject);var i=t.undoObject;e.commandHandler.unGroup(i)},t.prototype.ignoreProperty=function(t){return"zIndex"===t||"wrapper"===t},t.prototype.getProperty=function(t,e){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];this.ignoreProperty(r)||(e[r]instanceof Object?this.getProperty(t[r],e[r]):t[r]=e[r])}},t.prototype.recordLaneOrPhaseCollectionChanged=function(t,e,i){var n=t.redoObject,r=t.undoObject;if("Remove"===(t.isUndo?"Insert"===t.changeType?"Remove":"Insert":t.changeType))e.remove(n);else if(n.isPhase){var o=e.nameTable[n.parentId];e.addPhases(o,[r])}else{var s=ym(o=e.nameTable[n.parentId],n);e.addLanes(o,[r],s)}e.clearSelection()},t.prototype.recordAnnotationChanged=function(t,e,i){var n=i?t.redoObject:t.undoObject;if(e.canEnableBlazorObject){var r=gb(e.nameTable[n.id]);e.insertValue(r,r instanceof Lv)}var o=vy(n,t.objectId),s=e.commandHandler.getAnnotationChanges(e.nameTable[n.id],o),a=e.nameTable[n.id],l=vy(a,t.objectId);l.offset=o.offset,l.margin=o.margin,l.width=o.width,l.height=o.height,l.rotateAngle=o.rotateAngle,l.margin=o.margin,a instanceof Lv?e.nodePropertyChange(a,{},s):e.connectorPropertyChange(a,{},s)},t.prototype.recordChildCollectionChanged=function(t,e,i){var n=i?t.redoObject:t.undoObject,r=e.nameTable[n.parentId],o=e.nameTable[n.id];r?Jg(e,r,o,!i,"AddNodeToLane"===t.historyAction):(o.parentId&&((r=e.nameTable[o.parentId]).children.splice(r.children.indexOf(o.id),1),r.wrapper.children.splice(r.wrapper.children.indexOf(o.wrapper),1)),""!==n.parentId&&((r=e.nameTable[n.parentId]).children.push(n.id),r.wrapper.children.push(o.wrapper)),o.parentId=n.parentId,e.removeElements(o),e.updateDiagramObject(o))},t.prototype.recordStackPositionChanged=function(t,e,i){var n=i?t.redoObject:t.undoObject;if(n.source){var r=e.nameTable[n.source.parentId];r&&(n.target?(r.wrapper.children.splice(n.targetIndex,1),r.wrapper.children.splice(n.sourceIndex,0,n.source.wrapper)):void 0!==n.sourceIndex?(e.nameTable[n.source.id]||e.add(n.source),r.wrapper.children.splice(n.sourceIndex,0,e.nameTable[n.source.id].wrapper),e.nameTable[n.source.id].parentId=r.id):(r.wrapper.children.splice(r.wrapper.children.indexOf(e.nameTable[n.source.id].wrapper),1),e.nameTable[n.source.id].parentId=""),i&&"UmlClassifier"===r.shape.type&&e.remove(n.source),r.wrapper.measure(new Wd),r.wrapper.arrange(r.wrapper.desiredSize),e.updateDiagramObject(r),e.updateSelector())}},t.prototype.recordGridSizeChanged=function(t,e,i,n){var r=i?t.redoObject:t.undoObject,o=i?t.undoObject:t.redoObject;if(r.parentId){var s=e.nameTable[r.parentId],a=e.nameTable[r.id],l=s.wrapper.bounds.x,h=s.wrapper.bounds.y;if("SwimLane"===s.shape.type){var c=s.wrapper.children[0],d=s.shape.padding;mm(e,o,s,r),n?(c.updateRowHeight(r.rowIndex,r.wrapper.actualSize.height,!0,d),s.height=s.wrapper.height=c.height):(c.updateColumnWidth(r.columnIndex,r.wrapper.actualSize.width,!0,d),s.width=s.wrapper.width=c.width,r.isPhase&&(a.maxWidth=a.wrapper.maxWidth=r.wrapper.actualSize.width)),lm(s);var p=l-s.wrapper.bounds.x,u=h-s.wrapper.bounds.y;e.drag(s,p,u),e.clearSelection(),e.updateDiagramObject(s)}}},t.prototype.recordLanePositionChanged=function(t,e,i){var n=i?t.redoObject:t.undoObject;if(n.source){var r=e.nameTable[n.source.parentId];r&&"SwimLane"===r.shape.type&&(gm(e,n.target,n.source),e.clearSelection())}},t.prototype.recordPortChanged=function(t,e,i){var n=i?t.redoObject.nodes[0]:t.undoObject.nodes[0];if(e.canEnableBlazorObject){var r=gb(e.nameTable[n.id]);e.insertValue(r,!0)}var o=by(n,t.objectId),s=e.commandHandler.getPortChanges(e.nameTable[n.id],o),a=e.nameTable[n.id];by(a,t.objectId).offset=o.offset,e.nodePropertyChange(a,{},s),a.parentId&&e.updateConnectorEdges(e.nameTable[a.parentId])},t.prototype.recordPropertyChanged=function(t,e,i){var n=t.redoObject,r=t.undoObject;this.getProperty(e,i?n:r),i?e.onPropertyChanged(n,r):e.onPropertyChanged(r,n),e.diagramActions=e.diagramActions|Ip.UndoRedo},t.prototype.recordOrderCommandChanged=function(t,e,i){var n=t.redoObject,r=t.undoObject;e.commandHandler.orderCommands(i,i?n:r,t.type),e.diagramActions=e.diagramActions|Ip.UndoRedo},t.prototype.recordSegmentChanged=function(t,e){var i,n=0;if(t.connectors&&t.connectors.length>0)for(n=0;n<t.connectors.length;n++)i=t.connectors[n],this.segmentChanged(i,e)},t.prototype.segmentChanged=function(t,e){var i=e.nameTable[t.id];i.segments=t.segments,e.commandHandler.updateEndPoint(i)},t.prototype.recordPositionChanged=function(t,e){var i,n,r=0;if(t.nodes&&t.nodes.length>0)for(r=0;r<t.nodes.length;r++)i=t.nodes[r],this.positionChanged(i,e);if(t.connectors&&t.connectors.length>0)for(r=0;r<t.connectors.length;r++)n=t.connectors[r],this.connectionChanged(n,e)},t.prototype.positionChanged=function(t,e){var i=e.nameTable[t.id];if(t.processId&&!i.processId&&e.addProcess(t,t.processId),!t.processId&&i.processId&&e.removeProcess(t.id),i.processId){var n=t.margin.left-i.margin.left,r=t.margin.top-i.margin.top;e.drag(i,n,r)}else{if(i.parentId){var o=e.nameTable[i.parentId];o.isLane&&(t.wrapper.offsetX=t.width/2+(o.wrapper.bounds.x+t.margin.left),t.wrapper.offsetY=t.height/2+(o.wrapper.bounds.y+t.margin.top))}n=t.wrapper.offsetX-i.offsetX,r=t.wrapper.offsetY-i.offsetY;e.drag(i,n,r)}e.bpmnModule&&e.bpmnModule.updateDocks(i,e)},t.prototype.recordSizeChanged=function(t,e,i){var n,r,o=0;if(t&&t.nodes&&t.nodes.length>0)for(o=0;o<t.nodes.length;o++)if((r=t.nodes[o]).children&&!r.container)for(var s=e.commandHandler.getAllDescendants(r,[]),a=0;a<s.length;a++){var l=i.childTable[s[a].id];Iy(l)===Lv?(this.sizeChanged(l,e,i),this.positionChanged(l,e)):this.connectionChanged(l,e,i)}else this.sizeChanged(r,e),this.positionChanged(r,e);if(t&&t.connectors&&t.connectors.length>0){var h=t.connectors;for(o=0;o<h.length;o++)n=h[o],this.connectionChanged(n,e)}},t.prototype.sizeChanged=function(t,e,i){var n=e.nameTable[t.id],r=t.wrapper.actualSize.width/n.wrapper.actualSize.width,o=t.wrapper.actualSize.height/n.wrapper.actualSize.height;i&&i.childTable&&(i.childTable[t.id]=gb(n)),e.scale(n,r,o,{x:t.wrapper.offsetX/n.wrapper.offsetX,y:t.wrapper.offsetY/n.wrapper.offsetY})},t.prototype.recordRotationChanged=function(t,e,i){var n,r,o=0,s=e.selectedItems;if(s.rotateAngle=t.rotateAngle,s&&s.wrapper&&(s.wrapper.rotateAngle=t.rotateAngle),t&&t.nodes&&t.nodes.length>0)for(o=0;o<t.nodes.length;o++)n=t.nodes[o],this.rotationChanged(n,e),this.positionChanged(n,e);if(t&&t.connectors&&t.connectors.length>0)for(o=0;o<t.connectors.length;o++)r=t.connectors[o],this.connectionChanged(r,e)},t.prototype.rotationChanged=function(t,e){var i=e.nameTable[t.id];e.rotate(i,t.rotateAngle-i.rotateAngle)},t.prototype.recordConnectionChanged=function(t,e){var i=t.connectors[0];this.connectionChanged(i,e)},t.prototype.connectionChanged=function(t,e,i){var n,r=e.nameTable[t.id];t.sourcePortID!==r.sourcePortID&&(e.removePortEdges(e.nameTable[r.sourceID],r.sourcePortID,r.id,!1),r.sourcePortID=t.sourcePortID,e.connectorPropertyChange(r,{},{sourcePortID:t.sourcePortID})),t.targetPortID!==r.targetPortID&&(e.removePortEdges(e.nameTable[r.targetID],r.targetPortID,r.id,!0),r.targetPortID=t.targetPortID,e.connectorPropertyChange(r,{},{targetPortID:t.targetPortID})),t.sourceID!==r.sourceID&&(""===t.sourceID?py((n=e.nameTable[r.sourceID]).outEdges,t.id):((n=e.nameTable[t.sourceID]).outEdges.push(t.id),e.updatePortEdges(n,t,!1)),r.sourceID=t.sourceID,e.connectorPropertyChange(r,{},{sourceID:t.sourceID})),t.targetID!==r.targetID&&(""===t.targetID?py((n=e.nameTable[r.targetID]).inEdges,t.id):((n=e.nameTable[t.targetID]).inEdges.push(t.id),e.updatePortEdges(n,t,!0)),r.targetID=t.targetID,e.connectorPropertyChange(r,{},{targetID:t.targetID})),i&&i.childTable&&(i.childTable[t.id]=gb(r));var o=t.sourcePoint.x-r.sourcePoint.x,s=t.sourcePoint.y-r.sourcePoint.y;0===o&&0===s||e.dragSourceEnd(r,o,s);var a=t.targetPoint.x-r.targetPoint.x,l=t.targetPoint.y-r.targetPoint.y;0===a&&0===l||e.dragTargetEnd(r,a,l),e.updateSelector(),"SVG"!==e.mode&&e.refreshDiagramLayer()},t.prototype.recordCollectionChanged=function(t,e){var i=t.undoObject;if(t&&t.changeType){if("Remove"===(t.isUndo?"Insert"===t.changeType?"Remove":"Insert":t.changeType))i.nodeId?e.remove(e.nameTable[i.nodeId+"_textannotation_"+i.id]):(e.remove(i),e.clearSelectorLayer());else{if(e.clearSelectorLayer(),i.parentId){var n=e.nameTable[i.parentId];n?e.addChild(n,i):e.add(i)}else i.nodeId?e.addTextAnnotation(i,e.nameTable[i.nodeId]):e.nameTable[i.id]||(i&&i.shape&&"SwimLane"===i.shape.type&&t.isUndo&&Em(i,void 0,void 0,void 0,void 0,!0),e.add(i));i.processId&&e.nameTable[i.processId]&&e.addProcess(i,i.processId)}"SVG"!==e.mode&&e.refreshDiagramLayer()}},t.prototype.recordLabelCollectionChanged=function(t,e){var i=t.undoObject,n=t.redoObject,r=e.nameTable[n.id];if(t&&t.changeType){"Remove"===(t.isUndo?"Insert"===t.changeType?"Remove":"Insert":t.changeType)?(e.removeLabels(r,[i]),e.clearSelectorLayer()):(e.clearSelectorLayer(),e.addLabels(r,[i])),"SVG"!==e.mode&&e.refreshDiagramLayer()}},t.prototype.recordPortCollectionChanged=function(t,e){var i=t.undoObject,n=t.redoObject,r=e.nameTable[n.id];if(t&&t.changeType){"Remove"===(t.isUndo?"Insert"===t.changeType?"Remove":"Insert":t.changeType)?(e.removePorts(r,[i]),e.clearSelectorLayer()):(e.clearSelectorLayer(),e.addPorts(r,[i])),"SVG"!==e.mode&&e.refreshDiagramLayer()}},t.prototype.redo=function(t){var e=this.getRedoEntry(t),i=0;if(e)if("Internal"===e.category)"StartGroup"===e.type?(i++,this.groupUndo=!0):this.redoEntry(e,t),this.groupUndo&&(this.redoGroupAction(e,t,i),this.groupUndo=!1);else{$()||t.historyManager.redo(e);var n={entryType:"redo",oldValue:e.redoObject,newValue:e.undoObject};$()&&(n={entryType:"undo",oldValue:this.getHistoryChangeEvent(e.redoObject,e.blazorHistoryEntryType),newValue:this.getHistoryChangeEvent(e.undoObject,e.blazorHistoryEntryType)}),t.triggerEvent(kp.historyStateChange,n)}},t.prototype.redoGroupAction=function(t,e,i){for(;0!==i;)this.redoEntry(t,e),"EndGroup"===(t=this.getRedoEntry(e)).type?i--:"StartGroup"===t.type&&i++;i=0},t.prototype.redoEntry=function(t,e){var i,n;if("PropertyChanged"!==t.type&&"CollectionChanged"!==t.type&&(i=t.redoObject,n=t.redoObject),e.diagramActions|=Ip.UndoRedo,"StartGroup"!==t.type&&"EndGroup"!==t.type&&e.historyManager.redoStack.length>0){var r=e.historyManager.redoStack.splice(0,1);e.historyManager.undoStack.splice(0,0,r[0]),n=t.redoObject}switch(e.protectPropertyChange(!0),t.type){case"PositionChanged":case"Align":case"Distribute":this.recordPositionChanged(i,e);break;case"SizeChanged":case"Sizing":this.recordSizeChanged(i,e,t);break;case"RotationChanged":this.recordRotationChanged(i,e,t);break;case"ConnectionChanged":this.recordConnectionChanged(i,e);break;case"PropertyChanged":this.recordPropertyChanged(t,e,!0);break;case"CollectionChanged":this.recordCollectionChanged(t,e);break;case"LabelCollectionChanged":this.recordLabelCollectionChanged(t,e);break;case"PortCollectionChanged":this.recordPortCollectionChanged(t,e);break;case"Group":this.group(t,e);break;case"UnGroup":this.unGroup(t,e);break;case"SegmentChanged":this.recordSegmentChanged(i,e);break;case"PortPositionChanged":this.recordPortChanged(t,e,!0);break;case"AnnotationPropertyChanged":this.recordAnnotationChanged(t,e,!0);break;case"ChildCollectionChanged":this.recordChildCollectionChanged(t,e,!0);break;case"StackChildPositionChanged":this.recordStackPositionChanged(t,e,!0);break;case"RowHeightChanged":this.recordGridSizeChanged(t,e,!0,!0);break;case"ColumnWidthChanged":this.recordGridSizeChanged(t,e,!0,!1);break;case"LanePositionChanged":this.recordLanePositionChanged(t,e,!0);break;case"LaneCollectionChanged":case"PhaseCollectionChanged":this.recordLaneOrPhaseCollectionChanged(t,e,!0);break;case"SendToBack":case"SendForward":case"SendBackward":case"BringToFront":this.recordOrderCommandChanged(t,e,!0)}if(e.protectPropertyChange(!1),e.diagramActions&=~Ip.UndoRedo,e.historyChangeTrigger(t,"Redo"),n){var o=this.checkNodeObject(n,e);if(o){var s=Lb(e.updateSelection);s&&s(o,e)}}},t.prototype.getUndoEntry=function(t){var e,i=null,n=t.historyManager;return n.canUndo&&(i=n.currentEntry,(e=n.currentEntry.previous)?(n.currentEntry=e,n.canRedo||(n.canRedo=!0)):(n.canRedo=!0,n.canUndo=!1)),i},t.prototype.getRedoEntry=function(t){var e,i=null,n=t.historyManager;return n.canRedo&&((e=n.currentEntry.previous||n.canUndo?n.currentEntry.next:n.currentEntry)&&(n.currentEntry=e,n.canUndo||(n.canUndo=!0),e.next||(n.canRedo=!1,n.canUndo=!0)),i=n.currentEntry),i},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"UndoRedo"},t}(),NS=function(){function t(){this.protectChange=!1}return t.prototype.expand=function(t,e,i,n){var r=this,o={},s=0;if(n.realActions=n.realActions|Ap.AnimationClick,o[0]=setInterval(function(){return s++,r.layoutAnimation(e,o,6===s,n,i)},20),i.isExpanded){var a=.2;this.protectChange=n.isProtectedOnChange,n.protectPropertyChange(!1);var l={};if(t){this.updateOpacity(i,a,n);l[0]=setInterval(function(){n.allowServerDataBinding=!1,a<=1?r.updateOpacity(i,a,n):clearInterval(l[0]),a+=.2,n.allowServerDataBinding=!0},20)}}},t.prototype.layoutAnimation=function(t,e,i,n,r){if(!i)for(var o=0;o<t.objects.length;o++){var s=n.nameTable[t.objects[o].id];s.offsetX+=t.objects[o].differenceX/5,s.offsetY+=t.objects[o].differenceY/5}if(i){clearInterval(e[0]),n.realActions=n.realActions&~Ap.AnimationClick,n.refreshCanvasLayers(),n.protectPropertyChange(!0),n.triggerEvent(kp.animationComplete,void 0),n.organizationalChartModule.isAnimation=!1,n.layout.fixedNode="",n.protectPropertyChange(this.protectChange);var a={element:jy(gb(r)),state:!!r.isExpanded};n.triggerEvent(kp.expandStateChange,a),n.lineRoutingModule&&n.constraints&xp.LineRouting&&n.resetSegments()}},t.prototype.updateOpacity=function(t,e,i){for(var n=0;n<t.outEdges.length;n++){var r=i.nameTable[t.outEdges[n]],o=i.nameTable[r.targetID];r.style.opacity=e;for(var s=0;s<r.wrapper.children.length;s++)r.wrapper.children[s].style.opacity=e,o.style.opacity=e,o.wrapper instanceof Kp&&i.updateNodeProperty(o.wrapper,void 0,e);this.updateOpacity(o,e,i)}},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"LayoutAnimate"},t}(),HS=function(){function t(){this.size=20,this.intermediatePoints=[],this.gridCollection=[],this.startArray=[],this.targetGridCollection=[],this.sourceGridCollection=[],this.considerWalkable=[]}return t.prototype.lineRouting=function(t){var e=t.connectors.length;if(this.renderVirtualRegion(t),e>0)for(var i=0;i<e;i++){var n=t.connectors[i];"Orthogonal"===n.type&&n.visible&&this.refreshConnectorSegments(t,n,!0)}},t.prototype.renderVirtualRegion=function(t,e){var i=this.size;(t.spatialSearch.pageTop<0||t.spatialSearch.pageLeft<0)&&(i=this.size+this.size/2);var n=t.spatialSearch.pageRight+i,r=t.spatialSearch.pageBottom+i,o=t.spatialSearch.pageLeft-i,s=t.spatialSearch.pageTop-i;if(o=o<0?o-20:0,s=s<0?s-20:0,e&&(this.width!==n-o||this.height!==r-s||this.diagramStartX!==o||this.diagramStartY!==s)||void 0===e){this.width=n-o,this.height=r-s,this.diagramStartX=o,this.diagramStartY=s,this.gridCollection=[],this.noOfRows=this.width/this.size,this.noOfCols=this.height/this.size;for(var a=this.size,l=this.diagramStartX<0?this.diagramStartX:0,h=this.diagramStartY<0?this.diagramStartY:0,c=0;c<this.noOfCols;c++){for(var d=0;d<this.noOfRows;d++){0===c&&this.gridCollection.push([0]);var p={x:l,y:h,width:a,height:a,gridX:d,gridY:c,walkable:!0,tested:void 0,nodeId:[]};this.gridCollection[d][c]=p,l+=a}l=this.diagramStartX<0?this.diagramStartX:0,h+=a}}var u=this.findNodes(t.nodes);this.updateNodesInVirtualRegion(u)},t.prototype.findNodes=function(t){for(var e,i=[],n=0;n<t.length;n++)"SwimLane"===(e=t[n]).shape.type||e.isLane||e.isPhase||e.isHeader||!e.visible||i.push(e);return i},t.prototype.updateNodesInVirtualRegion=function(t){for(var e=this.size,i=this.diagramStartX<0?this.diagramStartX:0,n=this.diagramStartY<0?this.diagramStartY:0,r=0;r<this.noOfCols;r++){for(var o=0;o<this.noOfRows;o++){var s=this.gridCollection[o][r],a=new np(i,n,this.size,this.size),l=void 0,h=void 0;for(s.walkable=!0,s.tested=void 0,s.nodeId=[],h=0;h<t.length;h++)t[h].wrapper.bounds&&(l=this.intersectRect(a,t[h].wrapper.bounds)),l&&(s.nodeId.push(t[h].id),s.walkable=!1,""!==t[h].parentId&&(s.parentNodeId=t[h].parentId));i+=e}i=this.diagramStartX<0?this.diagramStartX:0,n+=e}},t.prototype.intersectRect=function(t,e){return!(e.left>=t.right||e.right<=t.left||e.top>=t.bottom||e.bottom<=t.top)},t.prototype.findEndPoint=function(t,e,i){var n,r;if(e&&""!==t.sourcePortID||!e&&""!==t.targetPortID){r=rf(n=e?{x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY}:{x:t.targetPortWrapper.offsetX,y:t.targetPortWrapper.offsetY},void 0,e?t.sourceWrapper.bounds:t.targetWrapper.bounds);var o=e?t.sourcePortWrapper.bounds:t.targetPortWrapper.bounds;n=i?"Top"===r?{x:o.topCenter.x,y:o.topCenter.y}:"Left"===r?{x:o.middleLeft.x,y:o.middleLeft.y}:"Right"===r?{x:o.middleRight.x,y:o.middleRight.y}:{x:o.bottomCenter.x,y:o.bottomCenter.y}:{x:o.center.x,y:o.center.y}}else n=e&&this.startNode||!e&&this.targetNode?e?{x:this.startNode.wrapper.offsetX,y:this.startNode.wrapper.offsetY}:{x:this.targetNode.wrapper.offsetX,y:this.targetNode.wrapper.offsetY}:e?{x:t.sourcePoint.x,y:t.sourcePoint.y}:{x:t.targetPoint.x,y:t.targetPoint.y};return n},t.prototype.refreshConnectorSegments=function(t,e,i){var n,r,o,s,a,l,h,c,d,p,u,f=e.sourceID,g=e.targetID,m=e.sourcePortID,y=e.targetPortID;if(function(t,e){var i=0;return t.constraints&yp.LineRouting?i=t.constraints&yp.LineRouting:t.constraints&yp.InheritLineRouting&&(i=e.constraints&xp.LineRouting),i}(e,t)){this.startNode=t.nameTable[f],this.targetNode=t.nameTable[g],this.intermediatePoints=[],this.startArray=[],this.targetGridCollection=[],this.sourceGridCollection=[],this.startGrid=void 0,this.targetGrid=void 0;for(var v=0;v<this.noOfCols;v++)for(var b=0;b<this.noOfRows;b++)this.gridCollection[b][v].tested=this.gridCollection[b][v].parent=void 0,this.gridCollection[b][v].previousDistance=this.gridCollection[b][v].afterDistance=void 0,this.gridCollection[b][v].totalDistance=void 0;n=this.findEndPoint(e,!0),r=this.findEndPoint(e,!1);for(v=0;v<this.noOfRows;v++)for(b=0;b<this.noOfCols;b++){o=this.gridCollection[v][b];var w=new np(o.x,o.y,o.width,o.height);if(!w.containsPoint(n)||this.startGrid||-1===o.nodeId.indexOf(f)&&""!==f||(this.startGrid=(m&&this.startGrid,o)),!w.containsPoint(r)||this.targetGrid||-1===o.nodeId.indexOf(g)&&""!==g||(this.targetGrid=(y&&this.targetGrid,o)),!m&&this.startNode){var S=this.startNode.wrapper.bounds;w.containsPoint(S.topCenter)&&!s&&(s=o),w.containsPoint(S.middleLeft)&&!l&&(l=o),w.containsPoint(S.middleRight)&&!h&&(h=o),w.containsPoint(S.bottomCenter)&&!a&&(a=o)}if(!y&&this.targetNode){S=this.targetNode.wrapper.bounds;w.containsPoint(S.topCenter)&&!d&&(d=o),w.containsPoint(S.middleLeft)&&!u&&(u=o),w.containsPoint(S.middleRight)&&!c&&(c=o),w.containsPoint({x:S.bottomCenter.x,y:S.bottomCenter.y})&&!p&&(p=o)}}this.findEdgeBoundary(m,l,h,s,a,!0),this.findEdgeBoundary(y,u,c,d,p,!1),this.startGrid.totalDistance=0,this.startGrid.previousDistance=0,this.intermediatePoints.push({x:this.startGrid.gridX,y:this.startGrid.gridY}),this.startArray.push(this.startGrid),this.checkObstacles(e);t:for(;this.startArray.length>0;){var x=this.startArray.pop();for(v=0;v<this.targetGridCollection.length;v++){var C=this.targetGridCollection[v];if(x.gridX===C.gridX&&x.gridY===C.gridY){if(this.getIntermediatePoints(x),this.updateConnectorSegments(t,this.intermediatePoints,this.gridCollection,e,i)){this.considerWalkable=[];break t}this.targetGridCollection.splice(this.targetGridCollection.indexOf(C),1),x=this.startArray.pop()}}this.findPath(x)}}},t.prototype.findEdgeBoundary=function(t,e,i,n,r,o){var s,a=o?this.sourceGridCollection:this.targetGridCollection;if(!t&&(o?this.startNode:this.targetNode)){for(var l=e.gridX;l<=i.gridX;l++)(1===(s=this.gridCollection[l][e.gridY]).nodeId.length&&(l===e.gridX||l===i.gridX)||l!==e.gridX&&l!==i.gridX)&&a.push(s);for(l=n.gridY;l<=r.gridY;l++)(1===(s=this.gridCollection[n.gridX][l]).nodeId.length&&(l===n.gridY||l===r.gridY)||l!==n.gridY&&l!==r.gridY)&&-1===a.indexOf(s)&&a.push(s)}else a.push(o?this.startGrid:this.targetGrid)},t.prototype.checkObstacles=function(t){var e,i=this.findNearestNeigbours(this.startGrid,this.gridCollection,!0);0===i.length&&(""!==t.sourcePortID?"Top"===(e=rf({x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY},void 0,t.sourceWrapper.bounds))?this.resetGridColl(this.startGrid,"top",!0):"Right"===e?this.resetGridColl(this.startGrid,"right",!0):"Bottom"===e?this.resetGridColl(this.startGrid,"bottom",!0):this.resetGridColl(this.startGrid,"left",!0):(this.resetGridColl(this.startGrid,"top",!0),this.resetGridColl(this.startGrid,"right",!0),this.resetGridColl(this.startGrid,"bottom",!0),this.resetGridColl(this.startGrid,"left",!0)));0===(i=this.findNearestNeigbours(this.targetGrid,this.gridCollection,!1)).length&&(""!==t.targetPortID?"Top"===(e=rf({x:t.targetPortWrapper.offsetX,y:t.targetPortWrapper.offsetY},void 0,t.targetWrapper.bounds))?this.resetGridColl(this.targetGrid,"top",!0):"Right"===e?this.resetGridColl(this.targetGrid,"right",!0):"Bottom"===e?this.resetGridColl(this.targetGrid,"bottom",!0):this.resetGridColl(this.targetGrid,"left",!0):(this.resetGridColl(this.targetGrid,"top",!1),this.resetGridColl(this.targetGrid,"right",!1),this.resetGridColl(this.targetGrid,"bottom",!1),this.resetGridColl(this.targetGrid,"left",!1)))},t.prototype.getIntermediatePoints=function(t){var e;for(this.intermediatePoints=[];t;)this.intermediatePoints.push({x:t.gridX,y:t.gridY}),t=t.parent;this.intermediatePoints.reverse(),this.intermediatePoints[0].x===this.intermediatePoints[1].x?this.intermediatePoints[0].y<this.intermediatePoints[1].y?(e=this.neigbour(this.startGrid,"bottom",void 0,!0),this.intermediatePoints[0].y+=e-1):(e=this.neigbour(this.startGrid,"top",void 0,!0),this.intermediatePoints[0].y-=e-1):this.intermediatePoints[0].x<this.intermediatePoints[1].x?(e=this.neigbour(this.startGrid,"right",void 0,!0),this.intermediatePoints[0].x+=e-1):(e=this.neigbour(this.startGrid,"left",void 0,!0),this.intermediatePoints[0].x-=e-1)},t.prototype.updateConnectorSegments=function(t,e,i,n,r){var o,s,a,l,h,c,d,p,u,f=[],g=[],m=n.targetWrapper,y=n.sourceWrapper,v=this.findEndPoint(n,!0);""===n.targetPortID&&n.targetWrapper||(s=this.findEndPoint(n,!1,!0));for(var b=0;b<e.length;b++)a=(h=i[e[b].x][e[b].y]).x+h.width/2,l=h.y+h.height/2,g.push({x:a,y:l}),b>=1&&(p=g[g.length-2].x!==g[g.length-1].x?g[g.length-2].x>g[g.length-1].x?"Left":"Right":g[g.length-2].y>g[g.length-1].y?"Top":"Bottom"),b>=2&&u===p&&g.splice(g.length-2,1),u=p;for(var w=0;w<g.length-1;w++)g[w].x!==g[w+1].x?(0===w&&""===n.sourcePortID&&y&&(v=g[w].x>g[w+1].x?y.bounds.middleLeft:y.bounds.middleRight),w===g.length-2&&""===n.targetPortID&&m&&(s=g[w].x>g[w+1].x?m.bounds.middleRight:m.bounds.middleLeft),0===w&&v&&(g[w].x=v.x,g[w].y=g[w+1].y=v.y),w===g.length-2&&s&&(s.x-g[w+1].x<0&&Math.abs(s.x-g[w].x)<n.targetDecorator.width+1&&(g[w].x=g[w-1].x-=this.size/2),s.x-g[w+1].x>0&&Math.abs(s.x-g[w].x)<n.targetDecorator.width+1&&(g[w].x=g[w-1].x+=this.size/2),g[w+1].x=s.x,g[w].y=g[w+1].y=s.y)):(0===w&&y&&(v=g[w].y>g[w+1].y?y.bounds.topCenter:y.bounds.bottomCenter),w===g.length-2&&""===n.targetPortID&&m&&(s=g[w].y>g[w+1].y?m.bounds.bottomCenter:m.bounds.topCenter),0===w&&v&&(g[w].y=v.y,g[w].x=g[w+1].x=v.x),w===g.length-2&&s&&(s.y-g[w+1].y<0&&Math.abs(s.y-g[w].y)<n.targetDecorator.height+1&&(g[w].y=g[w-1].y-=this.size/2),s.y-g[w+1].y>0&&Math.abs(s.y-g[w].y)<n.targetDecorator.width+1&&(g[w].y=g[w-1].y+=this.size/2),g[w+1].y=s.y,g[w].x=g[w+1].x=s.x));for(w=0;w<g.length-1;w++)g[w].x!==g[w+1].x?g[w].x>g[w+1].x?(c="Left",d=g[w].x-g[w+1].x):(c="Right",d=g[w+1].x-g[w].x):g[w].y>g[w+1].y?(c="Top",d=g[w].y-g[w+1].y):(c="Bottom",d=g[w+1].y-g[w].y),o={type:"Orthogonal",length:d,direction:c},f.push(o);var S=f[f.length-1];return 1===f.length&&(S.length-=20),S.length<10&&2===f.length&&(f.pop(),f[0].length-=20,S=f[0]),(("Top"===S.direction||"Bottom"===S.direction)&&S.length>n.targetDecorator.height+1||("Right"===S.direction||"Left"===S.direction)&&S.length>n.targetDecorator.width+1)&&(n.segments=f,r&&t.connectorPropertyChange(n,{},{type:"Orthogonal",segments:f}),!0)},t.prototype.findPath=function(t){for(var e,i=[],n=this.findNearestNeigbours(t,this.gridCollection,!0),r=0;r<n.length;r++)if(null!==(e=this.findIntermediatePoints(n[r].gridX,n[r].gridY,t.gridX,t.gridY,this.targetGrid.gridX,this.targetGrid.gridY))){var o=this.gridCollection[e.x][e.y],s=this.octile(Math.abs(e.x-t.gridX),Math.abs(e.y-t.gridY)),a=t.previousDistance+s;o.previousDistance&&!(o.previousDistance>a)||e.x===t.gridX&&e.y===t.gridY||(i.push(e),o.previousDistance=a,o.afterDistance=o.afterDistance||this.manhattan(Math.abs(e.x-this.targetGrid.gridX),Math.abs(e.y-this.targetGrid.gridY)),o.totalDistance=o.previousDistance+o.afterDistance,o.parent=t)}if(i.length>0)for(r=0;r<i.length;r++){o=this.gridCollection[i[r].x][i[r].y];-1===this.startArray.indexOf(o)&&this.startArray.push(o)}this.sorting(this.startArray)},t.prototype.sorting=function(t){for(var e=!1;!e;){e=!0;for(var i=1;i<t.length;i+=1)if(t[i-1].totalDistance<t[i].totalDistance){e=!1;var n=t[i-1];t[i-1]=t[i],t[i]=n}}return t},t.prototype.octile=function(t,e){var i=Math.SQRT2-1;return e>t?i*t+e:i*e+t},t.prototype.manhattan=function(t,e){return t+e},t.prototype.findNearestNeigbours=function(t,e,i){var n=[],r=t.parent;if(r){var o=(t.gridX-r.gridX)/Math.max(Math.abs(t.gridX-r.gridX),1),s=(t.gridY-r.gridY)/Math.max(Math.abs(t.gridY-r.gridY),1);0!==o?(this.isWalkable(t.gridX,t.gridY-1,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX][t.gridY-1])&&n.push(e[t.gridX][t.gridY-1]),this.isWalkable(t.gridX,t.gridY+1,!0)&&this.sourceGridCollection.indexOf(e[t.gridX][t.gridY+1])&&n.push(e[t.gridX][t.gridY+1]),this.isWalkable(t.gridX+o,t.gridY,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX+o][t.gridY])&&n.push(e[t.gridX+o][t.gridY])):0!==s&&(this.isWalkable(t.gridX-1,t.gridY,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX-1][t.gridY])&&n.push(e[t.gridX-1][t.gridY]),this.isWalkable(t.gridX+1,t.gridY,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX+1][t.gridY])&&n.push(e[t.gridX+1][t.gridY]),this.isWalkable(t.gridX,t.gridY+s,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX][t.gridY+s])&&n.push(e[t.gridX][t.gridY+s]))}else this.neigbour(t,"top",n,i),this.neigbour(t,"right",n,i),this.neigbour(t,"bottom",n,i),this.neigbour(t,"left",n,i);return n},t.prototype.neigbour=function(t,e,i,n){for(var r,o=1;o>0;){var s="top"===e||"bottom"===e?t.gridX:"left"===e?t.gridX-o:t.gridX+o,a="right"===e||"left"===e?t.gridY:"top"===e?t.gridY-o:t.gridY+o;if((r=this.gridCollection[s][a])&&(n&&-1===this.sourceGridCollection.indexOf(r)||!n&&-1===this.targetGridCollection.indexOf(r)))return i&&this.isWalkable(s,a)&&i.push(r),o;if(!(s>0&&a>0))break;o++}return null},t.prototype.resetGridColl=function(t,e,i){for(var n,r=1;r>0;){var o="top"===e||"bottom"===e?t.gridX:"left"===e?t.gridX-r:t.gridX+r,s="right"===e||"left"===e?t.gridY:"top"===e?t.gridY-r:t.gridY+r;if((n=this.gridCollection[o][s])&&(i&&-1===this.sourceGridCollection.indexOf(n)||!i&&-1===this.targetGridCollection.indexOf(n))){if(this.isWalkable(o,s))break;var a=this.gridCollection[o][s];this.considerWalkable.push(a)}if(!(o>0&&s>0))break;"top"===e||"left"===e?r--:r++}return null},t.prototype.isWalkable=function(t,e,i){if(t>=0&&t<this.noOfRows&&e>=0&&e<this.noOfCols){var n=this.gridCollection[t][e];if(n&&(n.walkable||(1===n.nodeId.length||2===n.nodeId.length&&n.parentNodeId)&&(-1!==this.sourceGridCollection.indexOf(n)||-1!==this.targetGridCollection.indexOf(n)||-1!==this.considerWalkable.indexOf(n)))&&(i&&!n.parent||!i))return!0}return!1},t.prototype.findIntermediatePoints=function(t,e,i,n,r,o){for(var s=t-i,a=e-n,l=t,h=e,c=0;c<this.targetGridCollection.length;c++)if(t===this.targetGridCollection[c].gridX&&e===this.targetGridCollection[c].gridY)return{x:t,y:e};if(!this.isWalkable(t,e))return null;var d=this.gridCollection[t][e];if(d.tested)return{x:t,y:e};if(d.tested=!0,0!==s&&(s=s>0?1:-1,this.isWalkable(l,h-1)&&!this.isWalkable(l-s,h-1)||this.isWalkable(l,h+1)&&!this.isWalkable(l-s,h+1)))return{x:t,y:e};if(0!==a){if(a=a>0?1:-1,this.isWalkable(l-1,h)&&!this.isWalkable(l-1,h-a)||this.isWalkable(l+1,h)&&!this.isWalkable(l+1,h-a))return{x:t,y:e};if(this.findIntermediatePoints(l+1,h,l,h,r,o)||this.findIntermediatePoints(l-1,h,l,h,r,o))return{x:t,y:e}}return this.findIntermediatePoints(l+s,h+a,l,h,r,o)},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"LineRouting"},t}(),_S=function(){function t(){this.isAnimation=!1}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"OrganizationalChart"},t.prototype.updateLayout=function(t,e,i,n,r,o){var s={type:i.type,nameTable:e,anchorX:0,anchorY:0,firstLevelNodes:[],centerNode:null,levels:[],maxLevel:0,graphNodes:{},orientation:i.orientation,horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,verticalAlignment:i.verticalAlignment,horizontalAlignment:i.horizontalAlignment,fixedNode:i.fixedNode,getLayoutInfo:Lb(i.getLayoutInfo),layoutInfo:i.layoutInfo,margin:i.margin,bounds:i.bounds,objects:[],root:i.root};return this.doLayout(s,t,n,r,o),s},t.prototype.doLayout=function(t,e,i,n,r){var o,s,a=[];for(t.nameTable[t.root]&&t.firstLevelNodes.push(t.nameTable[t.root]),s=0;s<e.length;s++)if(!((o=e[s]).excludeFromLayout||((t.graphNodes[o.id]=this.setUpLayoutInfo(t,o)).tree.hasSubTree=!1,t.nameTable[t.root]||o.inEdges&&o.inEdges.length))){o.parentId||o.processId||a.push(o),o.data&&String(o.data[n])===t.root&&t.firstLevelNodes.push(o)}for(0===t.firstLevelNodes.length&&(t.firstLevelNodes=a),s=0;s<t.firstLevelNodes.length;s++){o=t.firstLevelNodes[s];this.updateEdges(t,o,1,r,e)}if(t.firstLevelNodes.length>0){t.rootNode=t.firstLevelNodes[0];var l=0,h=0,c=void 0,d=void 0,p=void 0,u=void 0,f=void 0;for(s=0;s<t.firstLevelNodes.length;s++){f=this.updateTree(t,l,h,t.firstLevelNodes[s],0,t.firstLevelNodes[s-1]);var g=t.graphNodes[t.firstLevelNodes[s].id];f.y=Math.min(f.y,g.y),f.x=Math.min(f.x,g.x),-1!==t.orientation.indexOf("Left")?h=f.right+t.horizontalSpacing:l=f.right+t.horizontalSpacing,0===s?(c=f.x,u=f.y,p=f.right,d=f.bottom):(c=Math.min(c,f.x),u=Math.min(u,f.y),p=Math.max(p,f.right),d=Math.max(d,f.bottom))}for(this.updateAnchor(t,{x:c,y:u,right:p,bottom:d},i),s=0;s<t.firstLevelNodes.length;s++)this.updateNodes(t,t.firstLevelNodes[s],0);for(s=0;s<t.firstLevelNodes.length;s++)this.updateConnectors(t,t.firstLevelNodes[s],1)}},t.prototype.getBounds=function(t){var e=t.offsetX-t.actualSize.width*t.pivot.x,i=t.offsetY-t.actualSize.height*t.pivot.y;return new np(e,i,t.actualSize.width,t.actualSize.height)},t.prototype.updateTree=function(t,e,i,n,r,o,s){var a,l,h,c,d={};if(a=this.getDimensions(t,n,e,i,r),d=t.graphNodes[n.id],t.maxLevel=Math.max(t.maxLevel,r),l=r,(c=this.hasChild(t,n))||d.tree.assistants.length){var p=void 0,u=void 0,f=void 0,g=void 0,m=void 0,y=void 0;y=a.y+a.height+t.verticalSpacing,d.tree.assistants.length&&(l=(h=this.setDepthSpaceForAssitants(t,n,y,a.height,r,t.verticalSpacing)).level,y=h.bottom),d.tree.assistants.length||"Horizontal"===d.tree.orientation||(y=a.y+a.height+t.verticalSpacing/2),d.tree.children.length&&(p="Horizontal"!==d.tree.orientation||"Balanced"===d.tree.type&&1!==d.tree.children.length?"Balanced"===d.tree.type?this.updateHorizontalTreeWithMultipleRows(t,n,o,a.x,y,l):this.updateVerticalTree(t,n,a.x,y,l,s):this.updateHorizontalTree(t,n,o,a.x,y,l)),d.y&&d.y>a.y||(d.y=a.y),d.mid&&(e=d.mid),d.tree.assistants.length&&(m=void 0!==e?e:a.x,g=this.setBreadthSpaceForAssistants(t,n,a,m,y,r),c||(e=((u=p=g).x+u.right)/2-a.width/2,p=u),f=g?g.canMoveBy:void 0),d.x=e,d.translate||(d.treeWidth=p.right-p.x);var v={layout:t,shape:n,shapeBounds:{x:e,y:a.y,right:e+a.width,bottom:a.y+a.height},treeBounds:p,dim:a,level:r};return this.translateSubTree(v,f,void 0!==o,s),d.firstChild&&"string"!=typeof d.firstChild&&(d.firstChild.x+=d.subTreeTranslation),n.treeBounds=p,p}return n.treeBounds=this.updateLeafNode(t,n,o,a,r,s),n.treeBounds},t.prototype.updateLeafNode=function(t,e,i,n,r,o){var s,a=t.graphNodes[e.id];a.x=n.x,a.y&&a.y>n.y||(a.y=n.y,a.maxLevel=Math.max(r,a.maxLevel||0)),s={x:n.x,y:n.y,right:n.x+n.width,bottom:n.y+n.height},a.maxLevel=Math.max(a.maxLevel||0,r);var l={layout:t,shape:e,shapeBounds:s,treeBounds:s,dim:n,level:r};return this.translateSubTree(l,void 0,void 0!==i,o),{x:a.x,y:a.y,right:a.x+n.width,bottom:a.y+n.height}},t.prototype.setUpLayoutInfo=function(t,e){var i={subTreeTranslation:0};return"OrganizationalChart"===t.type?i.tree={orientation:"Vertical",type:"Alternate",offset:20,enableRouting:!0}:i.tree={orientation:"Horizontal",type:"Center",enableRouting:!0},i.tree.children=[],i.tree.assistants=[],i.tree.level=0,i.translate=!0,i},t.prototype.translateSubTree=function(t,e,i,n){var r=t.layout,o=t.shape,s=t.shapeBounds,a=t.treeBounds,l=t.level,h=t.dim,c=r.graphNodes[o.id],d=r.nameTable[c.firstChild?c.firstChild.child:c.tree.children[0]],p=d?r.graphNodes[d.id]:null,u=this.hasChild(r,o),f=this.findIntersectingLevels(r,s,l,c.actualLevel),g=this.findIntersectingLevels(r,a,l,c.actualLevel),m=[];f.length&&c.translate?(c.intersect=f,this.spaceLeftFromPrevSubTree(r,o,s),c.canMoveBy=c.diff,void 0!==e&&(c.canMoveBy=Math.min(e,c.canMoveBy)),d&&void 0!==p.canMoveBy&&(p.canMoveBy>=c.canMoveBy&&(c.translated=!0),c.canMoveBy=Math.min(c.canMoveBy,p.canMoveBy)),i&&(c.x-=c.canMoveBy,c.subTreeTranslation-=c.canMoveBy,u&&(this.shiftSubordinates(r,g,c.canMoveBy),a.x=Math.min(a.x,c.x),a.right=Math.max(a.right,c.x+h.width),a.bottom=Math.max(a.bottom,c.y+h.height),a.x-=c.canMoveBy,a.right-=c.canMoveBy),d&&p.canMoveBy>c.canMoveBy?c.canMoveBy=p.canMoveBy-c.canMoveBy:d&&void 0!==c.canMoveBy&&(c.canMoveBy=0))):(u&&(a.x=Math.min(a.x,s.x),a.right=Math.max(a.right,s.x+h.width),a.bottom=Math.max(a.bottom,c.y+h.height)),c.translate||(c.canMoveBy=0,c.subTreeTranslation=0)),n||(s={x:c.x,y:h.y,right:c.x+h.width,bottom:h.y+h.height},m.push({rBounds:s}),this.updateRearBounds(r,o,m,l))},t.prototype.updateRearBounds=function(t,e,i,n,r){var o,s,a,l,h,c,d=!0,p={};if(e&&(r=(p=t.graphNodes[e.id]).intersect,d=!p.tree.children.length&&!p.tree.assistants.length),l=i[0].rBounds,h=i[i.length-1].rBounds,r&&r.length){for(c=(o=t.levels[r[0]].rBounds).bottom,o.y<l.y&&(o.bottom=l.y,i.splice(0,0,{rBounds:o})),c>h.bottom?i.push({rBounds:{x:o.x,right:o.right,y:l.bottom,bottom:c}}):(o=t.levels[r[r.length-1]].rBounds,d&&o.bottom>h.bottom&&(o.y=h.bottom,i.push({rBounds:o}))),s=r[0],a=i.length-1;a>=0;a--)t.levels.splice(s,0,i[a]);s+=i.length,t.levels.splice(s,r.length)}else for(s=this.findLevel(t,i[i.length-1].rBounds,n),a=i.length-1;a>=0;a--)t.levels.splice(s,0,i[a])},t.prototype.shiftSubordinates=function(t,e,i){var n;if(0!==i)for(n=0;n<e.length;n++)t.levels[e[n]].rBounds&&(t.levels[e[n]].rBounds.x-=i,t.levels[e[n]].rBounds.right-=i)},t.prototype.setDepthSpaceForAssitants=function(t,e,i,n,r,o){var s,a,l,h,c=t.graphNodes[e.id],d={};for(h=i,a=0;a<c.tree.assistants.length;a++)(d=t.graphNodes[c.tree.assistants[a]])&&(d.tree.children=d.tree.assistants=[],d.y=i,s=(l=t.nameTable[c.tree.assistants[a]]).actualSize.height,-1!==t.orientation.indexOf("Left")&&(s=l.actualSize.width),h=i+s+o/2,t.maxLevel=r+1,a%2==1&&a!==c.tree.assistants.length-1&&(i=h,r++));return{level:t.maxLevel,bottom:i+s+o}},t.prototype.setBreadthSpaceForAssistants=function(t,e,i,n,r,o){var s,a,l,h,c,d,p,u={},f=t.graphNodes[e.id],g=o,m={x:0,y:0,right:0,bottom:0};for(h=0;h<f.tree.assistants.length;h++)(u=t.graphNodes[f.tree.assistants[h]])&&(s=(l=t.nameTable[f.tree.assistants[h]]).actualSize.width,-1!==t.orientation.indexOf("Left")&&(s=l.actualSize.height),c=h%2==0?n+i.width/2-20-s:n+i.width/2+20,a=this.updateTree(t,c,u.y,t.nameTable[f.tree.assistants[h]],g+1),this.hasChild(t,e)||(0===h?m=a:this.uniteRects(m,a)),h%2==0&&u.prevBounds&&(d=void 0===d?u.canMoveBy:Math.min(d,u.canMoveBy)),h%2!=1&&h!==f.tree.assistants.length-1||(p=this.findIntersectingLevels(t,a,g+1),this.updateRearBounds(t,null,[{rBounds:a}],g+1,p),g++));return m&&(m.canMoveBy=d),m},t.prototype.getDimensions=function(t,e,i,n,r){var o,s;if(o=e.actualSize.width,s=e.actualSize.height,-1!==t.orientation.indexOf("Left")){if(!r){var a;a=i,i=n,n=a}s=e.actualSize.width,o=e.actualSize.height}return{x:i,y:n,width:o,height:s}},t.prototype.hasChild=function(t,e){var i=t.graphNodes[e.id];return i?i.tree.children&&i.tree.children.length:0},t.prototype.updateHorizontalTree=function(t,e,i,n,r,o){var s;s=this.getDimensions(t,e,n,r,o);var a,l={},h=(l=t.graphNodes[e.id]).tree.type;a=o;var c,d,p,u,f,g,m,y,v,b,w,S,x,C,P,O=0;if(O=n,c=r,t.levels.slice(0,t.levels.length),this.hasChild(t,e)){var E;for(E=-1!==t.orientation.indexOf("Left"),x=0;x<l.tree.children.length;x++){if(d=(u=t.nameTable[l.tree.children[x]]).actualSize.width,p=u.actualSize.height,g=E?p:d,m=E?d:p,t.levels[a+1]?t.levels[a+1].rBounds:null,f=this.updateTree(t,O,c,u,a+1,t.nameTable[l.tree.children[x-1]]),C=t.graphNodes[u.id],l.maxLevel=Math.max(l.maxLevel||0,C.maxLevel||0),v={x:C.x,y:C.y,right:C.x+g,bottom:C.y+m},0===x&&(y={x:Math.min(C.x,f.x),y:Math.min(C.y,f.y),right:f.right,bottom:f.bottom},P=C),S?(S.x=v.x,S.y=v.y,v.right>S.right&&(S.right=v.right),S.bottom=v.bottom):S=v,0===x&&(l.firstChild={x:C.x,canMoveBy:C.canMoveBy,child:u.id}),this.hasChild(t,u))if(!l.firstChild||l.firstChild.x>=C.firstChild.x){C.firstChild&&l.firstChild.canMoveBy<C.canMoveBy&&(l.firstChild.canMoveBy=w,C.canMoveBy=w,w=l.firstChild.canMoveBy,t.graphNodes[l.firstChild.child].canMoveBy=w);var L=void 0!==w?w:C.canMoveBy;l.firstChild={x:C.firstChild.x,canMoveBy:L,child:u.id}}else C.firstChild&&C.translated&&l.firstChild.canMoveBy>C.canMoveBy&&(l.firstChild.canMoveBy=t.graphNodes[l.firstChild.child].canMoveBy=C.canMoveBy);b=b?Math.max(C.maxLevel,b):C.maxLevel,this.uniteRects(y,f),O=0!==x&&!this.hasChild(t,u)&&C.subTreeTranslation<0?f.right-C.subTreeTranslation+t.horizontalSpacing:f.right+t.horizontalSpacing}isNaN(void 0)||(P.canMoveBy=void 0),l.mid=(P.x+S.right)/2-s.width/2,"Left"===h?l.mid=v.right-s.width:"Right"===h&&(l.mid=n)}return y},t.prototype.updateHorizontalTreeWithMultipleRows=function(t,e,i,n,r,o){var s,a,l,h,c,d,p,u,f,g,m,y=this.getDimensions(t,e,n,r,o),v=t.graphNodes[e.id],b=(v.tree.type,o),w=n,S=r,x=(t.levels.slice(0,t.levels.length),0);if(this.hasChild(t,e)){var C=-1!==t.orientation.indexOf("Left"),P=void 0,O=this.splitChildrenInRows(t,e),E=5===v.tree.children.length&&3===O[0].length,L=[],I=[];E?I=O:this.splitRows(O,L,I);var T={leftTree:L,rows:O,rightTree:I,dimensions:y},A=this.updateLeftTree(t,T,e,n,S,b);c=T.bounds;var B=void 0,k=(A||0)+(void 0!==A?t.horizontalSpacing/2:0);void 0!==A&&(v.mid=k-y.width/2,B=A+t.horizontalSpacing),S=r;var M=void 0;for(M=[],f=0;f<I.length;f++)for(w=O[f].length%2==1&&f===I.length-1||E?n:B||n,0!==f&&(S=M[f-1].bottom+t.verticalSpacing),u=0;u<I[f].length;u++)d=(s=t.nameTable[I[f][u]]).actualSize.width,p=s.actualSize.height,h=C?p:d,C?d:p,(a=t.graphNodes[s.id]).actualLevel=b+1+f,0===u&&L[f]&&L[f].length&&(a.translate=!1),E&&1===f&&(0===u&&g+h+t.horizontalSpacing<=m&&(P=!0,w=g-h/2),P&&1===u&&(w=m-h/2)),l=this.updateTree(t,w,S,s,b+1,t.nameTable[I[f][u-1]]),E&&u<=2&&0===f&&1===u&&(g=l.x-t.horizontalSpacing/2,m=l.x+h+t.horizontalSpacing/2),0===u?M[f]={x:l.x,y:l.y,right:l.right,bottom:l.bottom}:this.uniteRects(M[f],l),c||(c={x:M[f].x,y:M[f].y,right:M[f].right,bottom:M[f].bottom}),this.uniteRects(c,M[f]),w=l.right+t.horizontalSpacing,(!v.firstChild||(f===I.length-1&&O[f].length%2==1||E)&&0===u&&void 0!==a.canMoveBy&&x>a.canMoveBy)&&(x=Math.min(x,a.canMoveBy||0),v.firstChild={x:a.x,child:s.id,canMoveBy:a.canMoveBy}),T.leftCenter=g,T.rightCenter=m,T.align=P,T.level=b,T.rightBounds=M,this.alignRowsToCenter(t,f,e,T,B)}return c},t.prototype.updateLeftTree=function(t,e,i,n,r,o){for(var s,a,l,h,c,d=e.leftTree,p=t.graphNodes[i.id],u=[],f=-1!==t.orientation.indexOf("Left"),g=0;g<d.length&&d[g].length;g++){s=n,u[g-1]&&(r=u[g-1].bottom+t.verticalSpacing);for(var m=0;m<d[g].length;m++){var y=t.nameTable[d[g][m]],v=(f?y.actualSize.height:y.actualSize.width,f?y.actualSize.width:y.actualSize.height,t.graphNodes[y.id]);v.actualLevel=o+1+g,h=this.updateTree(t,s,r,y,o+1,t.nameTable[d[g][m-1]]),0===m?u[g]={x:h.x,y:h.y,right:h.right,bottom:h.bottom}:this.uniteRects(u[g],h),0===g&&0===m?(a=v.canMoveBy,p.firstChild={x:v.x,child:y.id,canMoveBy:v.canMoveBy}):0===m&&void 0!==v.canMoveBy&&a>v.canMoveBy&&(a=Math.min(a,v.canMoveBy||0),p.firstChild={x:v.x,child:y.id,canMoveBy:v.canMoveBy}),s=h.right+t.horizontalSpacing}l=0===g?u[g].right:Math.max(l,u[g].right)}for(g=0;g<d.length&&d[g].length;g++){if(l!==u[g].right){var b=l-u[g].right;for(m=0;m<d[g].length;m++){t.nameTable[d[g][m]];t.graphNodes[d[g][m]].x+=b}}0===g?c={x:u[0].x,y:u[0].y,right:u[0].right,bottom:u[0].bottom}:this.uniteRects(c,u[g])}return e.bounds=c,l},t.prototype.alignRowsToCenter=function(t,e,i,n,r){var o,s,a,l=t.graphNodes[i.id],h=n.rows,c=n.rightTree,d=n.leftCenter,p=n.rightCenter,u=n.align,f=n.rightBounds,g=n.dimensions,m=n.level,y=5===l.tree.children.length&&3===h[0].length;if(y&&1===e&&(o=f[0].right-f[0].x>=f[1].right-f[1].x?0:1),e===h.length-1&&(h[e].length%2==1||y&&1===e)){s=c[e][Math.floor(c[e].length/2)];var v;v=t.nameTable[s];var b,w=t.graphNodes[s].x,S=t.graphNodes[s].y;b=this.getDimensions(t,v,w,S,m+1),a=void 0,!u&&y?(1===o&&(e=0),a=(f[o].x+f[o].right)/2-(f[e].x+f[e].right)/2,0===e&&(l.mid+=a)):y||void 0===r||(a=r-t.horizontalSpacing/2-(w+b.width/2)),void 0!==a&&this.updateRearBoundsOfTree(t,c[e],a,g),y&&(l.mid=(p+d)/2+(0===e?a:0)-g.width/2),void 0===l.mid&&t.graphNodes[s]&&(l.mid=w),u=!1,e++}},t.prototype.updateRearBoundsOfTree=function(t,e,i,n){for(var r=0;r<e.length;r++){var o=t.graphNodes[e[r]];t.nameTable[e[r]];if(o.x+=i,o.canMoveBy+=i,r===e.length-1){var s={x:o.x,y:o.y,right:o.x+n.width,bottom:o.y+n.height},a=this.findIntersectingLevels(t,s,o.actualLevel);this.updateRearBounds(t,null,[{rBounds:s}],o.actualLevel,a)}}},t.prototype.splitRows=function(t,e,i){for(var n=0;n<t.length;n++){e[n]=[],i[n]=[];var r=void 0;if(r=t[n].length,t[n].length%2!=1){r=Math.ceil(t[n].length/2);for(var o=0;o<r;o++)e[n].push(t[n][o])}for(var s=e[n].length;s<t[n].length;s++)i[n].push(t[n][s])}},t.prototype.updateVerticalTree=function(t,e,i,n,r,o){this.getDimensions(t,e,i,n,r);var s,a,l,h,c,d,p,u,f,g,m,y,v,b,w=t.graphNodes[e.id],S=t.nameTable[w.tree.children[0]],x=-1!==t.orientation.indexOf("Left"),C="Left"===w.tree.type?-1:0,P=i,O=n;m=r;var E,L=[],I=[];for(y=0;y<w.tree.children.length;y++){if("Alternate"===w.tree.type&&(b=y%2==0&&w.tree.children.length>2?"Left":"Right",C=y%2==0&&w.tree.children.length>2?-1:0),P=i+this.findOffset(t,e,w,b),s=t.nameTable[w.tree.children[y]],h=x?s.actualSize.height:s.actualSize.width,c=x?s.actualSize.width:s.actualSize.height,l=this.updateTree(t,P+C*h,O,s,r+1,void 0,!0),u={x:(a=t.graphNodes[s.id]).x,y:a.y,right:a.x+h,bottom:a.y+c},0===y?(this.uniteRects(l,u),p=l):this.uniteRects(p,l),!a.prevBounds||"Alternate"===w.tree.type&&y%2==1&&w.tree.children.length>2||(E=void 0!==E?Math.min(a.canMoveBy,E):a.canMoveBy),w.maxLevel=Math.max(w.maxLevel||0,a.maxLevel||0),"Alternate"===w.tree.type&&w.tree.children.length>2&&y%2==0?(0!==y&&(O=d.bottom+t.verticalSpacing/2),I.push({rBounds:u}),a.levelBounds&&(I=I.concat(a.levelBounds))):(O="Alternate"===w.tree.type&&w.tree.children.length>2?Math.max(l.bottom,d.bottom)+t.verticalSpacing/2:l.bottom+t.verticalSpacing/2,r=w.maxLevel,L.push({rBounds:u}),g?this.uniteRects(g,u):g={x:a.x,y:a.y,right:a.x+h,bottom:a.y+c},a.levelBounds&&(L=L.concat(a.levelBounds))),0===y&&(w.firstChild={x:a.x,canMoveBy:a.canMoveBy,child:s.id}),this.hasChild(t,s))if(!w.firstChild||w.firstChild.x>=a.firstChild.x){if(a.firstChild&&w.firstChild.canMoveBy<a.canMoveBy){var T=w.firstChild.canMoveBy;a.canMoveBy=T,t.graphNodes[w.firstChild.child].canMoveBy=T,w.firstChild.canMoveBy=T}w.firstChild={x:a.firstChild.x,canMoveBy:void 0!==E?E:a.canMoveBy,child:s.id}}else a.firstChild&&a.translated&&w.firstChild.canMoveBy>a.canMoveBy&&(w.firstChild.canMoveBy=t.graphNodes[w.firstChild.child].canMoveBy=a.canMoveBy);d=u}return o?w.levelBounds=L:("Alternate"===w.tree.type&&w.tree.children.length>2&&(f={x:I[0].rBounds.x,y:I[0].rBounds.y,right:I[I.length-1].rBounds.right,bottom:I[I.length-1].rBounds.bottom},v=this.findIntersectingLevels(t,f,m+1),this.updateRearBounds(t,null,I,m+1,v)),v=this.findIntersectingLevels(t,g||p,m+1),this.updateRearBounds(t,null,g?L:[{rBounds:p}],m+1,v)),isNaN(E)||(t.graphNodes[S.id].canMoveBy=E),w.childBounds=p,w.mid=i,p},t.prototype.splitChildrenInRows=function(t,e){var i,n;n=4;var r,o=[];r=(i=t.graphNodes[e.id]).tree.children.length;var s=this.extend(i.tree.children);if(i.tree.rows){var a;a=i.tree.children.length;var l;n=(l=Math.ceil(a/i.tree.rows))%2==0?l:l+1}else 3===i.tree.children.length||4===i.tree.children.length?n=2:5===i.tree.children.length&&(n=3);for(;r>0;)o[o.length]=s.splice(0,n),(r-=n)<n&&(n=r);return o},t.prototype.extend=function(t){var e,i=[];for(e=0;e<t.length;e++)i[e]=t[e];return i},t.prototype.findOffset=function(t,e,i,n){var r=0,o=-1!==t.orientation.indexOf("Left")?e.actualSize.height:e.actualSize.width,s=n||i.tree.type;switch(r=i.tree.offset||20,"Alternate"===i.tree.type&&r>=t.horizontalSpacing&&(r=t.horizontalSpacing/2),s){case"Left":r=o/2-r;break;case"Right":r+=o/2}return r},t.prototype.uniteRects=function(t,e){t.x=Math.min(t.x,e.x),t.right=Math.max(t.right,e.right),t.bottom=Math.max(t.bottom,e.bottom)},t.prototype.spaceLeftFromPrevSubTree=function(t,e,i){var n,r,o,s,a;for(n=t.graphNodes[e.id],a=t.horizontalSpacing,s=0;s<n.intersect.length;s++)o=t.levels[n.intersect[s]].rBounds,r=i.x-(o.right+a),(void 0===n.diff||r<n.diff)&&(n.diff=r,n.prevBounds=t.levels[n.intersect[s]].rBounds)},t.prototype.findIntersectingLevels=function(t,e,i,n){var r,o,s,a;(r={x:e.x,y:e.y,right:e.right,bottom:e.bottom}).y-=t.verticalSpacing/2,r.bottom+=t.verticalSpacing/2,o=[],a=void 0!==n?n:i,s=t.levels[a]?t.levels[a].rBounds:null;do{if(s&&(r.y<s.y&&r.bottom>s.y||r.y<s.bottom&&s.bottom<r.bottom||r.y>=s.y&&r.bottom<=s.bottom||r.y<s.y&&r.bottom>s.bottom)){o.splice(0,0,a)}else if(s&&s.bottom<r.y)break;a--,s=t.levels[a]?t.levels[a].rBounds:null}while(a>=0);a=(void 0!==n?n:i)+1,s=t.levels[a]?t.levels[a].rBounds:null;do{if(s&&(r.y<s.y&&r.bottom>s.y||r.y<s.bottom&&s.bottom<r.bottom||r.y>=s.y&&r.bottom<=s.bottom||r.y<s.y&&r.bottom>s.bottom))o.push(a);else if(s&&s.y>r.bottom)break;a++,s=t.levels[a]?t.levels[a].rBounds:null}while(a<=t.levels.length);return o},t.prototype.findLevel=function(t,e,i){var n,r,o;for(n=e,r=0,o=t.levels[r]?t.levels[r].rBounds:null;r<t.levels.length;){if(o&&n.bottom<o.y)return r;r++,o=t.levels[r]?t.levels[r].rBounds:null}return r},t.prototype.getParentNode=function(t,e){return t.nameTable[t.nameTable[e.inEdges[0]].sourceID]},t.prototype.updateEdges=function(t,e,i,n,r){var o,s;if(o=t.graphNodes[e.id],e.outEdges&&e.outEdges.length&&(e.isExpanded||n===Ip.Render))for(s=0;s<e.outEdges.length;s++){var a;(a=t.nameTable[t.nameTable[e.outEdges[s]].targetID])&&!a.excludeFromLayout&&(-1===o.tree.children.indexOf(a.id)&&o.tree.children.push(a.id),a.outEdges&&a.outEdges.length&&a.isExpanded&&(o.tree.hasSubTree=!0),this.updateEdges(t,a,i+1,n,r))}o.tree.level=i,o.tree.hasSubTree&&(o.tree.orientation="Horizontal",o.tree.type="Center"),(t.getLayoutInfo||t.layoutInfo)&&"OrganizationalChart"===t.type&&(t.getLayoutInfo?t.getLayoutInfo(e,o.tree):function(t,e,i,n){var r;if(e)for(var o=0,s=Object.keys(e);o<s.length;o++){var a=s[o];if(r=e[a],"getAssistantDetails"===a){if(n.data.Role===e[a].root)for(var l=e[a].assistants,h=0;h<l.length;h++)for(var c=0;c<i.length;c++)i[c].data.Role===l[h]&&(t.assistants.push(i[c].id),t.children.splice(0,1))}else r&&(t[a]=e[a])}!t.hasSubTree&&e.canEnableSubTree&&(t.orientation=n.layoutInfo.orientation,t.type=n.layoutInfo.type,n.layoutInfo.offset!==t.offset&&void 0!==n.layoutInfo.offset&&(t.offset=n.layoutInfo.offset)),n.layoutInfo.hasSubTree=t.hasSubTree}(o.tree,t.layoutInfo,r,e),"Balanced"===o.tree.type&&o.tree.hasSubTree&&(o.tree.type="Center",o.tree.orientation="Horizontal")),t.level&&"Alternate"!==o.tree.type&&i>=t.level&&(o.tree.hasSubTree=!1)},t.prototype.updateAnchor=function(t,e,i){var n,r,o,s=0,a=0,l=0,h=0,c=new np(0,0,i.x,i.y);o=t.bounds?t.bounds:c;var d=t.orientation;if(t.fixedNode){s=(r=t.nameTable[t.fixedNode]).actualSize.width,a=r.actualSize.height,t.anchorX=r.offsetX,t.anchorY=r.offsetY;var p=r.pivot;for(t.anchorX+="RightToLeft"===t.orientation?s*p.x:-s*p.x,t.anchorY+="BottomToTop"===t.orientation?a*p.y:-a*p.y,n=r,l=0;n.inEdges.length;)n=this.getParentNode(t,n),l+=t.graphNodes[n.id].subTreeTranslation||0;-1!==t.orientation.indexOf("Left")?(h=t.graphNodes[r.id].y,"LeftToRight"===d?t.anchorX-=h:t.anchorX+=h,t.anchorY-=t.graphNodes[r.id].x+l):(h=t.graphNodes[r.id].y,t.anchorX-=t.graphNodes[r.id].x+l,"TopToBottom"===d?t.anchorY-=h:t.anchorY+=h)}else if("TopToBottom"===d||"BottomToTop"===d){switch(t.horizontalAlignment){case"Left":t.anchorX=o.x-e.x+t.margin.left;break;case"Right":t.anchorX=o.x+o.width-t.margin.right-e.right;break;case"Auto":case"Center":t.anchorX=o.x+o.width/2-(e.x+e.right)/2}switch(t.verticalAlignment){case"Auto":case"Top":var u;u=o.y+t.margin.top,t.anchorY="TopToBottom"===d?u:e.bottom+u;break;case"Bottom":var f;f=o.y+o.height-t.margin.bottom,t.anchorY="TopToBottom"===d?f-e.bottom:f;break;case"Center":var g=void 0;g=o.y+o.height/2,t.anchorY="TopToBottom"===t.orientation?g-(e.y+e.bottom)/2:g+(e.y+e.bottom)/2}}else{switch(t.horizontalAlignment){case"Auto":case"Left":var m;m=o.x+t.margin.left,t.anchorX="LeftToRight"===d?m:e.bottom+m;break;case"Right":var y;y=o.x+o.width-t.margin.right,t.anchorX="LeftToRight"===d?y-e.bottom:y;break;case"Center":g=void 0;g=o.width/2+o.x,t.anchorX="LeftToRight"===t.orientation?g-(e.y+e.bottom)/2:g+(e.y+e.bottom)/2}switch(t.verticalAlignment){case"Top":t.anchorY=o.y+t.margin.top-e.x;break;case"Auto":case"Center":t.anchorY=o.y+o.height/2-(e.right+e.x)/2;break;case"Bottom":t.anchorY=o.y+o.height-t.margin.bottom-e.right}}},t.prototype.updateConnectors=function(t,e,i){var n,r,o,s;if(r=t.graphNodes[e.id],e.outEdges.length)for(n=0;n<e.outEdges.length;n++)(s=t.nameTable[e.outEdges[n]]).points=[],o=t.nameTable[s.targetID],s.visible&&(s.visited=!0,t.getConnectorSegments?t.getConnectorSegments(s):r&&-1!==r.tree.children.indexOf(s.targetID)&&(s.segments=[],"OrganizationalChart"===t.type&&"Orthogonal"===s.type&&this.updateSegments(t,s,e,o,n)),o&&(o.isExpanded||this.hasChild(t,o))&&this.updateConnectors(t,o,i+1));if(r&&r.tree.assistants.length)for(n=0;n<r.tree.assistants.length;n++)o=t.nameTable[r.tree.assistants[n]],s=t.nameTable[o.inEdges[0]],this.get3Points(t,e,o,s),(o.isExpanded||this.hasChild(t,o))&&this.updateConnectors(t,o,i+1)},t.prototype.updateSegments=function(t,e,i,n,r){var o=t.graphNodes[i.id];o.tree.assistants.length?this.updateSegmentsForHorizontalOrientation(t,i,n,e):"Horizontal"===o.tree.orientation&&"Balanced"===o.tree.type?this.updateSegmentsForBalancedTree(t,e,i,n,r):"Horizontal"===o.tree.orientation?this.updateSegmentsForHorizontalOrientation(t,i,n,e):o.tree.offset<5?this.get5Points(t,i,n,e):this.get3Points(t,i,n,e)},t.prototype.updateSegmentsForBalancedTree=function(t,e,i,n,r){var o,s=t.graphNodes[i.id];if(5===s.tree.children.length&&r>2){o=s.tree.children[1],isNaN(t.graphNodes[o].treeWidth)&&(t.graphNodes[o].treeWidth=t.nameTable[o].actualSize.width);var a=3!==r?1:-1;-1!==t.orientation.indexOf("Left")?t.nameTable[o].offsetY-t.graphNodes[o].treeWidth/2-t.verticalSpacing*a/2:t.nameTable[o].offsetX+t.graphNodes[o].treeWidth/2+t.horizontalSpacing*a/2,this.getSegmentsForMultipleRows(t,i,n,e)}else s.tree.children.length>5?r<4?this.getSegmentsForMultipleRows(t,i,n,e):this.updateSegmentsForHorizontalOrientation(t,i,n,e):4===s.tree.children.length?r<2?this.getSegmentsForMultipleRows(t,i,n,e):this.updateSegmentsForHorizontalOrientation(t,i,n,e):this.getSegmentsForMultipleRows(t,i,n,e)},t.prototype.get3Points=function(t,e,i,n){var r=[],o=this.getBounds(e),s=this.getBounds(i);if(-1!==t.orientation.indexOf("Top")){var a=0===t.orientation.indexOf("Top")?o.bottomCenter:o.topCenter,l=e.offsetX>i.offsetX?s.middleRight:s.middleLeft;r.push(a,{x:o.bottomCenter.x,y:l.y},l)}else{a=0===t.orientation.indexOf("Left")?o.middleRight:o.middleLeft,l=e.offsetY>i.offsetY?s.bottomCenter:s.topCenter;r.push(a,{x:s.bottomCenter.x,y:o.middleRight.y},l)}this.getSegmentsFromPoints(r,n)},t.prototype.get5Points=function(t,e,i,n){var r,o,s,a,l=[],h=this.getBounds(e),c=this.getBounds(i);t.graphNodes[e.id];-1!==t.orientation.indexOf("Top")?(r=e.offsetY<i.offsetY?h.bottomCenter:h.topCenter,a=t.verticalSpacing/4*(e.offsetY<i.offsetY?1:-1),s=t.horizontalSpacing/2*(e.offsetX>i.offsetX?1:-1),o=e.offsetX>i.offsetX?c.middleRight:c.middleLeft,l.push(r,{x:r.x,y:r.y+a},{x:o.x+s,y:r.y+a},{x:o.x+s,y:o.y},o)):(r=e.offsetX>i.offsetX?h.middleLeft:h.middleRight,o=e.offsetY>i.offsetY?c.bottomCenter:c.topCenter,s=t.horizontalSpacing/4*(e.offsetX<i.offsetX?1:-1),a=t.verticalSpacing/2*(e.offsetY>i.offsetY?1:-1),l.push(r,{x:r.x+s,y:r.y},{x:r.x+s,y:r.y+a},{x:o.x,y:r.y+a},o)),this.getSegmentsFromPoints(l,n)},t.prototype.getSegmentsFromPoints=function(t,e){for(var i,n=[],r=0;r<t.length-2;r++)(i=new Df(e,"segments",{type:"Orthogonal"},!0)).direction=qd.direction(t[r],t[r+1]),i.length=qd.distancePoints(t[r],t[r+1]),n.push(i);e.segments=n},t.prototype.getSegmentsForMultipleRows=function(t,e,i,n){var r,o,s=[],a=this.getBounds(i),l=this.getBounds(e);switch(t.orientation){case"TopToBottom":r={x:l.bottomCenter.x,y:l.bottomCenter.y+t.verticalSpacing/4},(o=new Df(n,"segments",{type:"Orthogonal"},!0)).direction=qd.direction(l.bottomCenter,r),o.length=qd.distancePoints(l.bottomCenter,r),s.push(o);break;case"BottomToTop":r={x:l.bottomCenter.x,y:l.topCenter.y-t.verticalSpacing/4},(o=new Df(n,"segments",{type:"Orthogonal"},!0)).direction=qd.direction(l.topCenter,r),o.length=qd.distancePoints(l.topCenter,r),s.push(o);break;case"LeftToRight":if(r={x:l.middleRight.x+t.verticalSpacing/4,y:l.middleRight.y},(o=new Df(n,"segments",{type:"Orthogonal"},!0)).direction=qd.direction(l.middleRight,r),o.length=qd.distancePoints(l.middleRight,r),s.push(o),a.center.y!==l.center.y){var h={x:l.middleRight.x+t.verticalSpacing/4,y:a.middleLeft.y};(o=new Df(n,"segments",{type:"Orthogonal"},!0)).direction=qd.direction(r,h),o.length=qd.distancePoints(r,h),s.push(o)}break;case"RightToLeft":if(r={x:l.middleLeft.x-t.verticalSpacing/4,y:l.middleRight.y},(o=new Df(n,"segments",{type:"Orthogonal"},!0)).direction=qd.direction(l.middleLeft,r),o.length=qd.distancePoints(l.middleLeft,r),s.push(o),a.center.y!==l.center.y){var c={x:l.middleLeft.x-t.verticalSpacing/4,y:a.middleLeft.y};(o=new Df(n,"segments",{type:"Orthogonal"},!0)).direction=qd.direction(c,c),o.length=qd.distancePoints(c,c),s.push(o)}}n.segments=s},t.prototype.updateSegmentsForHorizontalOrientation=function(t,e,i,n){var r,o,s=[],a=this.getBounds(e),l=this.getBounds(i);switch(t.orientation){case"TopToBottom":r={x:a.bottomCenter.x,y:l.topCenter.y-t.verticalSpacing/2},(o=new Df(n,"segments",{type:"Orthogonal"},!0)).direction=qd.direction(a.bottomCenter,r),o.length=qd.distancePoints(a.bottomCenter,r),s.push(o);break;case"BottomToTop":r={x:a.topCenter.x,y:l.bottomCenter.y+t.verticalSpacing/2},(o=new Df(n,"segments",{type:"Orthogonal"},!0)).direction=qd.direction(a.topCenter,r),o.length=qd.distancePoints(a.topCenter,r),s.push(o);break;case"LeftToRight":if(r={x:l.middleLeft.x-t.verticalSpacing/2,y:a.middleRight.y},(o=new Df(n,"segments",{type:"Orthogonal"},!0)).direction=qd.direction(a.middleRight,r),o.length=qd.distancePoints(a.middleRight,r),s.push(o),l.center.y!==a.center.y){var h={x:l.middleLeft.x-t.verticalSpacing/2,y:l.middleLeft.y};(o=new Df(n,"segments",{type:"Orthogonal"},!0)).direction=qd.direction(r,h),o.length=qd.distancePoints(r,h),s.push(o)}break;case"RightToLeft":if(r={x:l.middleRight.x+t.verticalSpacing/2,y:a.middleRight.y},(o=new Df(n,"segments",{type:"Orthogonal"},!0)).direction=qd.direction(a.middleLeft,r),o.length=qd.distancePoints(a.middleLeft,r),s.push(o),l.center.y!==a.center.y){var c={x:l.middleRight.x+t.verticalSpacing/2,y:l.middleLeft.y};(o=new Df(n,"segments",{type:"Orthogonal"},!0)).direction=qd.direction(r,c),o.length=qd.distancePoints(r,c),s.push(o)}}return n.segments=s,[]},t.prototype.updateNodes=function(t,e,i,n,r,o){var s,a,l,h,c,d;if(e&&!e.excludeFromLayout){l=e.actualSize.width,h=e.actualSize.height,c=t.anchorX,d=t.anchorY,"LeftToRight"===t.orientation?(c+=t.graphNodes[e.id].y+l/2,d+=t.graphNodes[e.id].x+i+h/2):"RightToLeft"===t.orientation?(c-=t.graphNodes[e.id].y+l/2,d+=t.graphNodes[e.id].x+i+h/2):"TopToBottom"===t.orientation?(c+=t.graphNodes[e.id].x+i+l/2,d+=t.graphNodes[e.id].y+h/2):(c+=t.graphNodes[e.id].x+i+l/2,d-=t.graphNodes[e.id].y+h/2),t.graphNodes&&(c+=r=r||0,d+=o=o||0,this.isAnimation||(e.offsetX=c,e.offsetY=d));var p={id:e.id,differenceX:c-e.offsetX,differenceY:d-e.offsetY};t.objects.push(p);var u=void 0;if(u=[],this.hasChild(t,e))for(s=0;s<t.graphNodes[e.id].tree.children.length;s++)a=t.nameTable[t.graphNodes[e.id].tree.children[s]],this.updateNodes(t,a,i+(t.graphNodes[e.id].subTreeTranslation||0),n,r,o),u.push(a);if(t.graphNodes[e.id].tree.assistants.length)for(s=0;s<t.graphNodes[e.id].tree.assistants.length;s++)a=t.nameTable[t.graphNodes[e.id].tree.assistants[s]],this.updateNodes(t,a,i+(t.graphNodes[e.id].subTreeTranslation||0),null,r,o)}},t}(),VS=function(){function t(){this.isAnimation=!1}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"MindMapChart"},t.prototype.updateLayout=function(t,e,i,n,r,o){var s;if(s=this.checkRoot(t,i,r,o,e))i.fixedNode=s;else for(var a=0,l=t;a<l.length;a++){if(!((m=l[a]).excludeFromLayout||m.inEdges&&m.inEdges.length)){i.fixedNode=m.id;break}}var h=e[i.fixedNode],c=this.findFirstLevelNodes(h,i,e),d=[],p=[],u=Lb(i.getBranch);u=u||Lb(this.getBranch);for(var f=0,g=c;f<g.length;f++){var m,y=u(m=g[f],c);"Left"===(y=m&&m.branch?m.branch:y)?d.push(m):p.push(m)}var v=new np(0,0,n.x,n.y);e[i.fixedNode].offsetX=v.x+v.width/2,e[i.fixedNode].offsetY=v.y+v.height/2,d.length&&this.updateMindMapBranch(t,p,e,i,n,r,"Left"),p.length&&this.updateMindMapBranch(t,d,e,i,n,r,"Right")},t.prototype.checkRoot=function(t,e,i,n,r){for(var o=0,s=t;o<s.length;o++){var a=s[o];if(!a.excludeFromLayout){if(a.data&&(a.data[i].toString()===n||a.data[i].toString()===e.root))return a.id;if(!a.data&&a.id===e.root)return a.id}}return""},t.prototype.updateMindMapBranch=function(t,e,i,n,r,o,s){var a;(a={type:"HierarchicalTree",horizontalSpacing:n.verticalSpacing,verticalSpacing:n.horizontalSpacing,verticalAlignment:n.verticalAlignment,horizontalAlignment:n.horizontalAlignment,fixedNode:n.fixedNode,getLayoutInfo:Lb(n.getLayoutInfo),layoutInfo:n.layoutInfo,margin:n.margin,root:n.fixedNode}).orientation="Left"===s?"LeftToRight":"RightToLeft",this.excludeFromLayout(e,i,!0),(new _S).updateLayout(t,i,a,r,o),this.excludeFromLayout(e,i,!1)},t.prototype.getBranch=function(t,e){return e.indexOf(t)%2==0?"Left":"Right"},t.prototype.excludeFromLayout=function(t,e,i){for(var n=0,r=t;n<r.length;n++){e[r[n].id].excludeFromLayout=i}},t.prototype.findFirstLevelNodes=function(t,e,i){var n=[];if(t&&t.outEdges.length)for(var r=0,o=t.outEdges;r<o.length;r++){var s=o[r];n.push(i[i[s].targetID])}return n},t}(),FS=function(){function t(){}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"RadialTree"},t.prototype.updateLayout=function(t,e,i,n){var r={type:i.type,nameTable:e,anchorX:0,anchorY:0,firstLevelNodes:[],centerNode:null,levels:[],maxLevel:0,graphNodes:{},layoutNodes:[],orientation:i.orientation,horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,verticalAlignment:i.verticalAlignment,horizontalAlignment:i.horizontalAlignment,fixedNode:i.fixedNode,margin:i.margin,bounds:i.bounds,objects:[],root:i.root};this.doLayout(r,t,e,n)},t.prototype.doLayout=function(t,e,i,n){for(var r,o=0;o<e.length;o++)(r=e[o]).excludeFromLayout||(t.graphNodes[r.id]=this.setUpLayoutInfo(t,r),r.inEdges&&r.inEdges.length||t.firstLevelNodes.push(r));t.root&&i[t.root]?t.centerNode=i[t.root]:t.firstLevelNodes.length&&(t.centerNode=t.firstLevelNodes[0],t.root=t.centerNode.id),t.centerNode&&(this.updateEdges(t,t.centerNode,0,i),this.depthFirstAllignment(t,t.centerNode,0,0),this.populateLevels(t),this.transformToCircleLayout(t),this.updateAnchor(t,n),this.updateNodes(t,t.centerNode,i))},t.prototype.updateEdges=function(t,e,i,n){var r=t.graphNodes[e.id];t.layoutNodes.push(r),r.level=i,r.visited=!0,t.maxLevel=Math.max(t.maxLevel,i);for(var o=0;o<e.outEdges.length;o++){var s=n[n[e.outEdges[o]].targetID];s.excludeFromLayout||s.visited||(r.children.push(s),this.updateEdges(t,s,i+1,n))}},t.prototype.depthFirstAllignment=function(t,e,i,n){var r,o=t.graphNodes[e.id];if(o.children.length){n+=300;for(var s=0;s<o.children.length;s++)i=(r=this.depthFirstAllignment(t,o.children[s],i,n)).x,n=r.y;o.children=o.children.sort(function(e,i){return t.graphNodes[e.id].x-t.graphNodes[i.id].x});var a=t.graphNodes[o.children[0].id].min,l=t.graphNodes[o.children[o.children.length-1].id].max;if(o.x=a+(l-a)/2,i=l+t.horizontalSpacing,o.segmentOffset=l+t.horizontalSpacing,o.x-=o.width/2,o.y-=o.height/2,o.min=a,o.max=l,o.x<a&&o.visited){o.x=a,i=o.x+o.width/2-(l-a)/2,o.visited=!1;for(s=0;s<o.children.length;s++)r=this.depthFirstAllignment(t,o.children[s],i,n);o.visited=!0,i=o.x+o.width+t.horizontalSpacing}i=i<(l=t.graphNodes[o.children[o.children.length-1].id].segmentOffset)?l:i,n-=300,o.y=n}else o.x=i,o.y=n,o.min=i,o.max=i+o.width,i+=o.width+t.horizontalSpacing;return{x:i,y:n}},t.prototype.populateLevels=function(t){var e=[],i=Math.min.apply(Math,t.layoutNodes.map(function(t){return t.x})),n=Math.max.apply(Math,t.layoutNodes.map(function(e){return e.x+e.width+t.horizontalSpacing}))-i;t.levels=[];for(var r=function(r){var o={};e=(e=t.layoutNodes.filter(function(t){return t.level===r?t:null})).sort(function(t,e){return t.x-e.x}),o.min=e[0].x,o.max=e[e.length-1].x+e[e.length-1].width+t.horizontalSpacing,o.actualCircumference=0,o.height=0;for(var s=0;s<e.length;s++)e[s].height>o.height&&(o.height=e[s].height),o.actualCircumference+=Math.max(e[s].width,e[s].height),s!==e.length-1&&(o.actualCircumference+=t.horizontalSpacing);o.circumference=o.max-o.min,o.actualCircumference<o.circumference&&(o.circumference=(o.circumference+o.actualCircumference)/2),o.radius=o.circumference/(2*Math.PI)+o.height,o.nodes=[],r>1&&t.levels[r-1].radius+t.levels[r-1].height>=o.radius&&(o.radius=t.levels[r-1].radius+t.levels[r-1].height);for(var a=0;a<e.length;a++)e[a].ratio=Math.abs(e[a].x+e[a].width/2-i)/n,o.nodes.push(e[a]);t.levels.push(o)},o=0;o<=t.maxLevel;o++)r(o)},t.prototype.transformToCircleLayout=function(t){var e=t.graphNodes[t.centerNode.id];e.x=0,e.y=0;for(var i=1;i<t.levels.length;i++)for(var n=0;n<t.levels[i].nodes.length;n++){var r=t.levels[i].nodes[n];r.x=Math.cos(360*r.ratio*Math.PI/180)*(t.levels[i].radius+t.verticalSpacing*i),r.y=Math.sin(360*r.ratio*Math.PI/180)*(t.levels[i].radius+t.verticalSpacing*i),t.anchorX=Math.min(t.anchorX,r.x),t.anchorY=Math.min(t.anchorY,r.y)}},t.prototype.updateAnchor=function(t,e){t.anchorX=t.centerNode.offsetX||e.x/2,t.anchorY=t.centerNode.offsetY||e.y/2},t.prototype.updateNodes=function(t,e,i){var n=t.graphNodes[e.id],r=n.x+t.anchorX,o=n.y+t.anchorY;e.offsetX+=r,e.offsetY+=o;for(var s=0;s<n.children.length;s++){var a=n.children[s];this.updateNodes(t,i[a.id],i)}},t.prototype.setUpLayoutInfo=function(t,e){var i={};return i.name=e.id,i.x=0,i.y=0,i.min=0,i.max=0,i.width=e.actualSize.width,i.height=e.actualSize.height,i.children=[],i.level=0,i.ratio=0,i.visited=!1,i},t}(),WS=function(){function t(t){this.velocityX=0,this.velocityY=0,this.nodes=[],this.graphNode=t;var e=qS(this.graphNode);this.location=e.center,this.nodes=[],t.treeInfo.parents||(t.treeInfo.parents=[]),t.treeInfo.children||(t.treeInfo.children=[]),this.nodes=t.treeInfo.parents.concat(t.treeInfo.children)}return t.prototype.applyChanges=function(){this.graphNode.treeInfo.center=this.location},t}(),US=function(){function t(){this.cdCOEF=.442,this.cfMAXVELOCITY=50,this.cnMAXITERACTION=1e3,this.cnSPRINGLENGTH=100,this.mszMaxForceVelocity={width:this.cfMAXVELOCITY,height:this.cfMAXVELOCITY},this.springLength=0,this.springFactor=this.cdCOEF,this.maxIteration=this.cnMAXITERACTION,this.springLength=this.cnSPRINGLENGTH}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"SymmetricalLayout"},t.prototype.doGraphLayout=function(t){var e=this.selectedNode;e.treeInfo.Bounds=t.getModelBounds(t.nodes);var i=e.treeInfo.GraphNodes,n=this.convertGraphNodes(i),r=n.length;r=Math.min(this.maxIteration,r*r*r),this.preLayoutNodes(n,e.treeInfo.Bounds);for(var o=0,s=r;o<s;o++)this.makeSymmetricLayout(n),this.appendForces(n);this.resetGraphPosition(n,e)},t.prototype.preLayoutNodes=function(t,e){for(var i=Math.max(e?e.width:25,e?e.height:25),n=i/2,r=i/2,o=2*Math.PI/t.length,s=o,a=0;a<t.length;a++){var l=t[a];this.getForceNode(l).location={x:n+i*Number(Math.cos(s).toFixed(2)),y:r+i*Number(Math.sin(s).toFixed(2))},s-=o}},t.prototype.doLayout=function(t){this.selectedNode=t.selectedNode,this.doGraphLayout(t)},t.prototype.makeSymmetricLayout=function(t){for(var e,i,n=0;n<t.length;n++){for(var r=t[n],o=(e=this.getForceNode(r)).nodes,s=0;s<o.length;s++){XS((f=o[s]).id,t)&&this.calcNodesForce(e,this.getForceNode(f))}for(var a=0,l=o.length;a<l&&!(l<2);a++){var h=this.getForceNode(o[a]),c=a+1>=l?this.getForceNode(o[0]):this.getForceNode(o[a+1]),d=360/o.length/2*Math.PI/180,p=2*this.springLength*Math.sin(d);this.calcRelatesForce(h,c,p)}for(var u=0;u<t.length;u++){var f;XS((f=t[u]).id,o)||f.id===r.id||(i=this.getForceNode(f),this.updateNeigbour(e,i))}}},t.prototype.appendForces=function(t){for(var e=null,i=0;i<t.length;i++){var n=t[i],r=(e=this.getForceNode(n)).location;r.x+=Math.min(e.velocityX,this.mszMaxForceVelocity.width),r.y+=Math.min(e.velocityY,this.mszMaxForceVelocity.height),e.velocityX=0,e.velocityY=0,e.location=r}},t.prototype.resetGraphPosition=function(t,e){for(var i,n={width:Number.MAX_VALUE,height:Number.MAX_VALUE},r=null,o=0;o<t.length;o++){i=t[o];var s={x:(r=this.getForceNode(i)).location.x-i.actualSize.width/2,y:r.location.y-i.actualSize.height/2};n.width=Math.min(n.width,s.x),n.height=Math.min(n.height,s.y)}for(o=0;o<t.length;o++){i=t[o],(s=(r=this.getForceNode(i)).location).x-=n.width-(e.treeInfo.location?e.treeInfo.location.x:0),s.y-=n.height-(e.treeInfo.location?e.treeInfo.location.y:0),r.location=s,r.applyChanges()}},t.prototype.convertGraphNodes=function(t){for(var e=[],i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];if(t[r]){var o=t[r],s=new WS(o);o.treeInfo.tag=s,e.push(o)}}return e},t.prototype.getForceNode=function(t){return t.treeInfo.tag},t.prototype.updateNeigbour=function(t,e){if(null!=e&&null!=t){var i=this.pointDistance(t.location,e.location),n=this.lineAngle(t.location,e.location),r=.9*this.springLength;i<r&&this.calcForce(i,r,n,e)}},t.prototype.lineAngle=function(t,e){var i=0,n=e.x-t.x,r=e.y-t.y;return 0===n?i=r<=0?3*Math.PI/2:Math.PI/2:0===r?i=n<0?Math.PI:0:(i=Math.atan(r/n),n<0&&r>0?i=Math.PI+i:n<0&&r<0?i=Math.PI+i:n>0&&r<0&&(i=2*Math.PI+i)),i},t.prototype.pointDistance=function(t,e){var i=0,n=e.x-t.x,r=e.y-t.y,o=n*n+r*r;return o>0&&(i=Math.sqrt(o)),i},t.prototype.calcRelatesForce=function(t,e,i){var n=this.pointDistance(t.location,e.location),r=this.lineAngle(t.location,e.location);n<i&&this.calcForce(n,i,r,e)},t.prototype.updateLayout=function(t,e,i,n,r,o){(new GS).updateLayout(t,e,i,n,r,o)},t.prototype.calcNodesForce=function(t,e){var i=this.pointDistance(t.location,e.location),n=this.lineAngle(t.location,e.location);(i>this.springLength||i<this.springLength)&&this.calcForce(i,this.springLength,n,e)},t.prototype.calcForce=function(t,e,i,n){var r=n.nodes.length,o=t-e,s=this.springFactor/(r*r)*Math.sqrt(r);if(0!==o){var a=o*s,l=Math.cos(i)*a,h=Math.sin(i)*a;n.velocityX-=l,n.velocityY-=h}},t}(),GS=function(){function t(){this.visitedStack=[],this.cycleEdgesCollection=[],this.graphObjects=[],this.passedNodes=[]}return t.prototype.updateLayout=function(t,e,i,n,r,o){this.nameTable=n,this.nodes=t,this.connectors=e;var s=t;s.length>0&&(this.mhelperSelectedNode=gb(s[0]));for(var a=0,l=t;a<l.length;a++){var h=void 0;(h=g=l[a]).treeInfo={},h.treeInfo.graphType="Node",this.graphObjects.push(h)}for(var c=0,d=e;c<d.length;c++){var p=void 0;(p=d[c]).treeInfo={},p.treeInfo.graphType="Connector",this.graphObjects.push(p)}this.updateLayout1(this.graphObjects,i);for(var u=this.getModelBounds(s),f=0;f<s.length;f++){var g=s[f],m=(o.x-u.width)/2,y=r.margin||{};y.left=y.left||0,y.right=y.right||0,y.top=y.top||0,y.bottom=y.bottom||0,r.margin.left&&(y.left=r.margin.left),r.margin.top&&(y.top=r.margin.top);var v=g.treeInfo.tag.location.x-(g.offsetX-g.actualSize.width/2)-u.x+m+y.left,b=g.treeInfo.tag.location.y-(g.offsetY-g.actualSize.height/2)-u.y+y.top;g.offsetX+=v,g.offsetY+=b,delete g.treeInfo}return!0},t.prototype.getModelBounds=function(t){t=t.slice();for(var e,i=null,n=null,r=0;r<t.length;r++){var o=qS(e=t[r]);i=new np(e.treeInfo.tag?e.treeInfo.tag.location.x:o.x,e.treeInfo.tag?e.treeInfo.tag.location.y:o.y,e.actualSize.width,e.actualSize.height),n=n?n.uniteRect(i):i}return n},t.prototype.updateLayout1=function(t,e){this.detectCyclesInGraph(t);var i=t.length;if(i>0){for(var n=[],r=[],o=[],s=0;s<t.length;s++){var a=t[s];void 0===a.treeInfo.isCycleEdge&&(a.treeInfo.isCycleEdge=!1),"Connector"!==a.treeInfo.graphType||a.treeInfo.isCycleEdge?"Connector"===a.treeInfo.graphType?n.push(a):o.push(a):r.push(a)}for(r=r.concat(o),r=n.concat(r);i>this.dictionaryLength(this.passedNodes);)if(this.getNodesToPosition(r),null!=this.selectedNode){e.doLayout(this),this.selectedNode=null,this.visitedStack=[];for(var l=0,h=this.cycleEdgesCollection;l<h.length;l++){h[l].treeInfo.isCycleEdge=!1}}this.passedNodes=null,this.selectedNode=null}return!1},t.prototype.getNodesToPosition=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(!XS(i.id,this.passedNodes)){i&&this.selectNodes(i);break}}},t.prototype.selectNodes=function(t){var e=t;"Connector"===t.treeInfo.graphType?this.exploreGraphEdge(t):null!=e&&this.addNode(t,"passed")&&(this.addNode(t,"selected"),this.isConnectedToAnotherNode(e)?(this.selectedNode={treeInfo:{}},this.selectedNode.treeInfo.LeftMargin=10,this.selectedNode.treeInfo.TopMargin=10,this.selectConnectedNodes(e)):this.selectedNode=t)},t.prototype.selectConnectedNodes=function(t){var e=this.selectedNode;e.treeInfo.GraphNodes||(e.treeInfo.GraphNodes={});var i=t;if(null!=i&&this.addNode(i,"passed")){var n=i.id;if(this.dictionaryContains(e.treeInfo.GraphNodes,i)){var r=e.treeInfo.GraphNodes[n];r.treeInfo.Added&&(r.treeInfo.Added=!1,this.getConnectedRelatives(r),this.exploreRelatives(t))}else{var o=this.addGraphNode(i);this.getConnectedRelatives(o),this.exploreRelatives(t)}}},t.prototype.exploreRelatives=function(t){this.exploreRelatives1(t,"Parents"),this.exploreRelatives1(t,"Children")},t.prototype.exploreRelatives1=function(t,e){var i=[];"Parents"===e?i=t.inEdges:"Children"===e&&(i=t.outEdges);for(var n=0;n<i.length;n++){var r=this.nameTable[i[n]];if(this.addNode(r,"passed")){var o=this.nameTable[r.sourceID],s=this.nameTable[r.targetID];"Parents"===e&&null!=o&&XS(o.id,this.nodes)?this.selectConnectedNodes(this.nameTable[r.sourceID]):"Children"===e&&null!=s&&XS(s.id,this.nodes)&&this.selectConnectedNodes(this.nameTable[r.targetID])}}},t.prototype.getConnectedRelatives=function(t){this.getConnectedParents(t),this.getConnectedChildren(t)},t.prototype.dictionaryContains=function(t,e){for(var i=Object.keys(t),n=0;n<i.length;n++)if(i[n]===e.id)return!0;return!1},t.prototype.dictionaryLength=function(t){return Object.keys(t).length},t.prototype.getConnectedChildren=function(t){for(var e=this.selectedNode,i=t,n=0;n<i.outEdges.length;n++){var r=this.nameTable[i.outEdges[n]];if(!r.treeInfo.isCycleEdge){var o=this.nameTable[r.targetID];if(XS(o.id,this.nodes)&&null!=o&&o.visible){var s=void 0;this.dictionaryContains(e.treeInfo.GraphNodes,o)?s=e.treeInfo.GraphNodes[o.id]:(s=this.addGraphNode(o)).treeInfo.Added=!0,t.treeInfo.children||(t.treeInfo.children=[]),s.treeInfo.parents||(s.treeInfo.parents=[]),this.setNode(s.treeInfo.parents,t),this.findNode(t.treeInfo.children,s.id)<0&&t.treeInfo.children.push(s)}}}},t.prototype.getConnectedParents=function(t){for(var e=this.selectedNode,i=t,n=0;n<i.inEdges.length;n++){var r=this.nameTable[i.inEdges[n]];if(!r.treeInfo.isCycleEdge){var o=this.nameTable[r.sourceID];if(XS(o.id,this.nodes)&&null!=o&&o.visible){var s=void 0;this.dictionaryContains(e.treeInfo.GraphNodes,o)?s=e.treeInfo.GraphNodes[o.id]:(s=this.addGraphNode(o)).treeInfo.Added=!0,t.treeInfo.parents||(t.treeInfo.parents=[]),s.treeInfo.children||(s.treeInfo.children=[]),this.setNode(s.treeInfo.children,t),this.findNode(t.treeInfo.parents,s.id)<0&&t.treeInfo.parents.push(s)}}}},t.prototype.setNode=function(t,e){var i=this.findNode(t,e.id);i>=0&&i<t.length?t[i]=e:t.push(e)},t.prototype.findNode=function(t,e){var i=-1;if(null!=t&&""!==e)for(var n=0,r=t.length;n<r;n++){var o=t[n];if("string"==typeof o&&o===e){i=n;break}if(null!=o&&o.id===e){i=n;break}}return i},t.prototype.addGraphNode=function(t){var e=this.selectedNode;e.treeInfo.GraphNodes||(e.treeInfo.GraphNodes={});var i=t;if(null!=e){e.treeInfo.GraphNodes[i.id]=i;var n=this.mhelperSelectedNode;null!=n&&t.id===n.id&&(this.mhelperSelectedNode=i)}return i},t.prototype.isConnectedToAnotherNode=function(t){var e=!1;return t.inEdges.concat(t.outEdges).length>0&&(null!=t.inEdges&&t.inEdges.length>0&&(e=this.searchEdgeCollection(t.inEdges,"FromNode")),!e&&null!=t.outEdges&&t.outEdges.length>0&&(e=this.searchEdgeCollection(t.outEdges,"ToNode"))),e},t.prototype.searchEdgeCollection=function(t,e){for(var i=!1,n=0;n<t.length-1;n++){var r=this.nameTable[t[n]];if(this.addNode(r,"passed")&&(!r.treeInfo.isCycleEdge&&("FromNode"===e&&null!=this.nameTable[r.sourceID]||"ToNode"===e&&null!=this.nameTable[r.targetID]))){i=!0;break}}return i},t.prototype.exploreGraphEdge=function(t){var e=t;if(null!=e&&!e.treeInfo.isCycleEdge&&this.addNode(t,"passed")){this.addNode(t,"selected");var i=this.nameTable[e.sourceID],n=this.nameTable[e.targetID];null!=i?this.selectNodes(i):null!=n?this.selectNodes(n):this.selectedNode=t}},t.prototype.addNode=function(t,e){var i=t;return"passed"!==e&&i.visible||this.dictionaryContains(this.passedNodes,i)||(this.passedNodes[i.id]=i),!!i.visible},t.prototype.detectCyclesInGraph=function(t){for(var e=[],i=[],n=0;n<t.length;n++)"Connector"!==t[n].treeInfo.graphType&&e.push(t[n]);if(e.length>0)for(i.push(e[0]),this.visitedStack.push(e[0]);i.length>0;){var r=i[i.length-1],o=this.getUnVisitedChildNodes(r);if(o.length>0){var s=o[0],a=o[o.length-1];XS(s.id,this.visitedStack)?(a.treeInfo.isCycleEdge=!0,this.cycleEdgesCollection.push(a)):(i.push(s),this.visitedStack.splice(0,0,s))}else i.pop()}},t.prototype.getUnVisitedChildNodes=function(t){var e=[];if(t.outEdges.length>0){for(var i=0;i<t.outEdges.length;i++){var n=this.nameTable[t.outEdges[i]];if(!XS(n.id,this.visitedStack)){var r=this.nameTable[n.targetID];return null!=r&&e.push(r),e.push(n),this.visitedStack.splice(0,0,n),e}}return e}return e},t}();function qS(t){var e=t.offsetX-t.actualSize.width*t.pivot.x,i=t.offsetY-t.actualSize.height*t.pivot.y;return new np(e,i,t.actualSize.width,t.actualSize.height)}function XS(t,e){for(var i=0;i<e.length;i++)if(e[i].id===t)return!0;return!1}var YS=function(){function t(){}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"ComplexHierarchicalTree"},t.prototype.doLayout=function(t,e,i,n){(new ZS).doLayout(t,e,i,n)},t.prototype.getLayoutNodesCollection=function(t){for(var e,i=[],n=0;n<t.length;n++)(e=t[n]).inEdges.length+e.outEdges.length>0&&!e.parentId&&!e.processId&&i.push(e);return i},t}(),ZS=function(){function t(){this.nameTable={},this.crossReduction=new JS}return t.prototype.createVertex=function(t,e,i,n,r,o){return{value:e,geometry:{x:i,y:n,width:r,height:o},name:e,vertex:!0,inEdges:t.inEdges.slice(),outEdges:t.outEdges.slice()}},t.prototype.getEdges=function(t){var e=[];if(t){for(var i=0;t.inEdges.length>0&&i<t.inEdges.length;i++)e.push(this.nameTable[t.inEdges[i]]);for(i=0;t.outEdges.length>0&&i<t.outEdges.length;i++)e.push(this.nameTable[t.outEdges[i]])}return e},t.prototype.findRoots=function(t){for(var e=[],i=null,n=-1e5,r=0,o=Object.keys(t);r<o.length;r++){for(var s=t[o[r]],a=this.getEdges(s),l=0,h=0,c=0;c<a.length;c++){this.getVisibleTerminal(a[c],!0).name===s.name?l++:h++}0===h&&l>0&&e.push(s);var d=l-h;d>n&&(n=d,i=s)}return 0===e.length&&null!=i&&e.push(i),e},t.prototype.getVisibleTerminal=function(t,e){var i=this.nameTable[t.targetID];e&&(i=this.nameTable[t.sourceID]);for(var n=0;n<this.vertices.length;n++)if(this.vertices[n].name===i.id)return this.vertices[n];return null},t.prototype.traverse=function(t,e,i,n,r,o){if(null!=t){var s=t.name;if(null==o||null!=o[s]){null==n[s]&&(n[s]=t),null!=o&&delete o[s];for(var a=this.getEdges(t),l=[],h=0;h<a.length;h++)l[h]=this.getVisibleTerminal(a[h],!0)===t;for(h=0;h<a.length;h++)if(!e||l[h]){for(var c=this.getVisibleTerminal(a[h],!l[h]),d=1,p=0;p<a.length;p++)if(p!==h){var u=l[p];this.getVisibleTerminal(a[p],!u)===c&&(u?d++:d--)}d>=0&&(n=this.traverse(c,e,a[h],n,r,o))}}else if(null==n[s])for(h=0;h<r.length;h++){var f=r[h];if(null!=f[s]){for(var g=0,m=Object.keys(f);g<m.length;g++){var y=m[g];n[y]=f[y]}return r.splice(h,1),n}}}return n},t.prototype.getModelBounds=function(t){t=t.slice();for(var e=null,i=null,n=0;n<t.length;n++)if(e=t[n].geometry,i){var r=Math.max(i.x+i.width,e.x+e.width),o=Math.max(i.y+i.height,e.y+e.height);i.x=Math.min(i.x,e.x),i.y=Math.min(i.y,e.y),i.width=r-i.x,i.height=o-i.y}else i={x:e.x,y:e.y,width:e.width,height:e.height};return i},t.prototype.doLayout=function(t,e,i,n){this.nameTable=e;var r={horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,orientation:i.orientation,marginX:i.margin.left,marginY:i.margin.top};this.vertices=[];for(var o={},s=0;s<t.length;s++){var a=this.createVertex(t[s],t[s].id,0,0,t[s].actualSize.width,t[s].actualSize.height);this.vertices.push(a),o[a.name]=a}var l,h=[];l=this.findRoots(o);for(s=0;s<l.length;s++){var c={};h.push(c),this.traverse(l[s],!0,null,c,h,o)}var d={marginX:0,marginY:0};for(s=0;s<h.length;s++){c=h[s];for(var p=[],u=0,f=Object.keys(c);u<f.length;u++){var g=f[u];p.push(c[g])}var m=new KS(this,p,l,r);this.cycleStage(m),this.layeringStage(m),this.crossingStage(m),d=this.placementStage(m,d.marginX,d.marginY)}var y=this.getModelBounds(this.vertices);this.updateMargin(i,r,y,n);for(s=0;s<this.vertices.length;s++){var v=this.vertices[s];if(v){var b=this.nameTable[v.name];b.offsetX=0,b.offsetY=0;var w=v.geometry.x-(b.offsetX-b.actualSize.width/2)+r.marginX,S=v.geometry.y-(b.offsetY-b.actualSize.height/2)+r.marginY,x=w,C=S;"BottomToTop"===r.orientation?C=y.height-S:"RightToLeft"===r.orientation&&(x=y.width-w),b.offsetX+=x-b.offsetX,b.offsetY+=C-b.offsetY}}for(s=0;s<this.vertices.length;s++)this.isNodeOverLap(this.nameTable[this.vertices[s].name],i)},t.prototype.calculateRectValue=function(t){var e={x:0,y:0,right:0,bottom:0,height:0,width:0};return e.x=t.offsetX-t.actualSize.width/2,e.right=t.offsetX+t.actualSize.width/2,e.y=t.offsetY-t.actualSize.height/2,e.bottom=t.offsetY+t.actualSize.height/2,e},t.prototype.isNodeOverLap=function(t,e){for(var i={x:0,y:0,right:0,bottom:0,height:0,width:0},n=0;n<this.vertices.length;n++){var r,o={x:0,y:0,width:0,height:0};r=this.nameTable[this.vertices[n].value],t.id!==r.id&&0!==r.offsetX&&0!==r.offsetY&&(i=this.calculateRectValue(t),o=this.calculateRectValue(r),this.isIntersect(o,i,e)&&("TopToBottom"===e.orientation||"BottomToTop"===e.orientation?t.offsetX+=e.horizontalSpacing:t.offsetY+=e.verticalSpacing,this.isNodeOverLap(t,e)))}},t.prototype.isIntersect=function(t,e,i){return!(t.right+i.horizontalSpacing<=e.x||t.x-i.horizontalSpacing>=e.right||t.y-i.verticalSpacing>=e.bottom||t.bottom+i.verticalSpacing<=e.y)},t.prototype.updateMargin=function(t,e,i,n){var r,o={x:0,y:0,width:n.x,height:n.y},s=i.x,a=i.y,l=i.x+i.width,h=i.y+i.height;if(r=t.bounds?t.bounds:o,"TopToBottom"===e.orientation||"BottomToTop"===e.orientation){switch(t.horizontalAlignment){case"Auto":case"Left":e.marginX=r.x-s+t.margin.left;break;case"Right":e.marginX=r.x+r.width-t.margin.right-l;break;case"Center":e.marginX=r.x+r.width/2-(s+l)/2}switch(t.verticalAlignment){case"Top":var c;c=r.y+t.margin.top,e.marginY="TopToBottom"===e.orientation?c:-c;break;case"Bottom":var d;d=r.y+r.height-t.margin.bottom,e.marginY="TopToBottom"===e.orientation?d-h:-(d-h);break;case"Auto":case"Center":var p=void 0;p=r.y+r.height/2,e.marginY="TopToBottom"===e.orientation?p-(a+h)/2:(a+h)/2-p}}else{switch(t.horizontalAlignment){case"Auto":case"Left":var u;u=r.x+t.margin.left,e.marginX="LeftToRight"===e.orientation?u:-u;break;case"Right":var f;f=r.x+r.width-t.margin.right,e.marginX="LeftToRight"===e.orientation?f-l:l-f;break;case"Center":p=void 0;p=r.width/2+r.x,e.marginX="LeftToRight"===e.orientation?p-(a+h)/2:(s+l)/2-p}switch(t.verticalAlignment){case"Top":e.marginY=r.y+t.margin.top-s;break;case"Auto":case"Center":e.marginY=r.y+r.height/2-(a+h)/2;break;case"Bottom":e.marginY=r.y+r.height-t.margin.bottom-h}}},t.prototype.placementStage=function(t,e,i){var n=this.coordinateAssignment(e,i,parent,t);return n.model=t,n.widestRankValue=null,this.placementStageExecute(n),{marginX:n.marginX+t.layout.horizontalSpacing,marginY:n.marginY+t.layout.verticalSpacing}},t.prototype.coordinateAssignment=function(t,e,i,n){var r={};return"TopToBottom"===n.layout.orientation||"BottomToTop"===n.layout.orientation?(r.horizontalSpacing=n.layout.horizontalSpacing,r.verticalSpacing=n.layout.verticalSpacing):(r.horizontalSpacing=n.layout.verticalSpacing,r.verticalSpacing=n.layout.horizontalSpacing),r.orientation="north",r.marginX=r.marginX=t,r.marginY=r.marginY=e,r},t.prototype.calculateWidestRank=function(t,e,i){var n=!1;"LeftToRight"!==t.model.layout.orientation&&"RightToLeft"!==t.model.layout.orientation||(n=!0);var r=-t.verticalSpacing,o=0;t.rankSizes=[],t.rankOffset=[];for(var s=i.maxRank;s>=0;s--){for(var a=0,l=i.ranks[s],h=n?t.marginY:t.marginX,c=0;c<l.length;c++){var d=l[c];if(this.crossReduction.isVertex(d)){var p=d;if(p.cell&&(p.cell.inEdges||p.cell.outEdges)){var u=this.nameTable[p.cell.name];p.width=u.actualSize.width,p.height=u.actualSize.height,a=Math.max(a,n?p.width:p.height)}}else if(d){var f=d,g=1;null!=f.edges&&(g=f.edges.length),d.width=10*(g-1)}n&&(d.height||(d.height=0)),h+=(n?d.height:d.width)/2,this.setXY(d,s,h,!!n),this.setTempVariable(d,s,h),(h+=(n?d.height:d.width)/2+t.horizontalSpacing)>t.widestRankValue&&(t.widestRankValue=h,t.widestRank=s),t.rankSizes[s]=h}t.rankOffset[s]=r;var m=a/2+o/2+t.verticalSpacing;o=a,"north"===t.orientation||"west"===t.orientation?r+=m:r-=m;for(c=0;c<l.length;c++){var y=l[c];this.setXY(y,s,r,!n)}}},t.prototype.setTempVariable=function(t,e,i){this.crossReduction.isVertex(t)?t.temp[0]=i:t.temp[e-t.minRank-1]=i},t.prototype.setXY=function(t,e,i,n){t&&t.cell&&(t.cell.inEdges||t.cell.outEdges?n?t.y[0]=i:t.x[0]=i:n?t.y[e-t.minRank-1]=i:t.x[e-t.minRank-1]=i)},t.prototype.rankCoordinates=function(t,e,i,n){var r=!1;"LeftToRight"!==t.model.layout.orientation&&"RightToLeft"!==t.model.layout.orientation||(r=!0);for(var o=n.ranks[e],s=0,a=(r?t.marginY:t.marginX)+(t.widestRankValue-t.rankSizes[e])/2,l=0;l<o.length;l++){var h=o[l];if(this.crossReduction.isVertex(h)){var c=this.nameTable[h.cell.name];h.width=c.actualSize.width,h.height=c.actualSize.height,s=Math.max(s,h.height)}else{var d=h,p=1;null!=d.edges&&(p=d.edges.length),r?h.height=10*(p-1):h.width=10*(p-1)}var u=(r?h.height:h.width)/2;a+=u,this.setXY(h,e,a,!!r),this.setTempVariable(h,e,a),a+=u+t.horizontalSpacing}},t.prototype.initialCoords=function(t,e,i){this.calculateWidestRank(t,e,i);for(var n=t.widestRank;n>=0;n--)n<i.maxRank&&this.rankCoordinates(t,n,e,i);for(n=t.widestRank+1;n<=i.maxRank;n++)n>0&&this.rankCoordinates(t,n,e,i)},t.prototype.isAncestor=function(t,e){if(null!=e&&null!=t.hashCode&&null!=e.hashCode&&t.hashCode.length<e.hashCode.length){if(t.hashCode===e.hashCode)return!0;if(null==t.hashCode||null==t.hashCode)return!1;for(var i=0;i<t.hashCode.length;i++)if(t.hashCode[i]!==e.hashCode[i])return!1;return!0}return!1},t.prototype.weightedCellSorter=function(t,e){var i={};return i.cell=t||null,i.weightedValue=e||0,i.visited=!1,i.rankIndex=null,i},t.prototype.minNode=function(t,e){for(var i=[],n={map:{}},r=[],o=0;o<=e.maxRank;o++){r[o]=e.ranks[o];for(var s=0;s<r[o].length;s++){var a=r[o][s],l=this.weightedCellSorter(a,o);l.rankIndex=s,l.visited=!0,i.push(l),e.setDictionaryForSorter(n,a,l,!0)}}for(var h=10*i.length,c=0;i.length>0&&c<=h;){var d=i.shift(),p=d.cell,u=d.weightedValue,f=d.rankIndex,g=this.crossReduction.getConnectedCellsOnLayer(p,u),m=this.crossReduction.getConnectedCellsOnLayer(p,u,!0),y=g.length,v=m.length,b=this.medianXValue(t,g,u+1),w=this.medianXValue(t,m,u-1),S=y+v,x=this.crossReduction.getTempVariable(p,u),C=x;S>0&&(C=(b*y+w*v)/S),1===y&&1===v?C=w*v/v:1===y&&(C=b*y/y);var P=!1,O=void 0;if(C<x-1)if(0===f)O=C,P=!0;else{var E=r[u][f-1],L=this.crossReduction.getTempVariable(E,u);(L=L+E.width/2+t.intraCellSpacing+p.width/2)<C?(O=C,P=!0):L<this.crossReduction.getTempVariable(p,u)-1&&(O=L,P=!0)}else if(C>x+1){if(f===r[u].length-1)O=C,P=!0;else{var I=r[u][f+1],T=this.crossReduction.getTempVariable(I,u);(T=T-I.width/2-t.intraCellSpacing-p.width/2)>C?(O=C,P=!0):T>this.crossReduction.getTempVariable(p,u)+1&&(O=T,P=!0)}}P&&(this.setTempVariable(p,u,O),this.updateNodeList(i,n,g,e),this.updateNodeList(i,n,m,e)),this.crossReduction.isVertex(d.cell)&&(d.visited=!1),c++}},t.prototype.updateNodeList=function(t,e,i,n){for(var r=0;r<i.length;r++){var o=i[r],s=n.getDictionaryForSorter(e,o);null!=s&&!1===s.visited&&(s.visited=!0,t.push(s))}},t.prototype.medianXValue=function(t,e,i){if(0===e.length)return 0;for(var n=[],r=0;r<e.length;r++)n[r]=this.crossReduction.getTempVariable(e[r],i);if(n.sort(function(t,e){return t-e}),e.length%2==1)return n[Math.floor(e.length/2)];var o=e.length/2;return(n[o-1]+n[o])/2},t.prototype.placementStageExecute=function(t){var e=!1;"LeftToRight"!==t.model.layout.orientation&&"RightToLeft"!==t.model.layout.orientation||(e=!0),t.jettyPositions={};var i=t.model;e?t.currentYDelta=0:t.currentXDelta=0,this.initialCoords(t,{model:i},i),this.minNode(t,i);var n=1e8;t.maxIterations||(t.maxIterations=8);for(var r=0;r<t.maxIterations;r++){if((e?t.currentYDelta:t.currentXDelta)<n){for(var o=0;o<i.ranks.length;o++)for(var s=i.ranks[o],a=0;a<s.length;a++){var l=s[a];this.setXY(l,o,this.crossReduction.getTempVariable(l,o),!!e)}n=e?t.currentYDelta:t.currentXDelta}e?t.currentYDelta=0:t.currentXDelta=0}this.setCellLocations(t,i)},t.prototype.setCellLocations=function(t,e){for(var i=this.getValues(e.vertexMapper),n=0;n<i.length;n++)this.setVertexLocation(t,i[n])},t.prototype.garphModelsetVertexLocation=function(t,e,i,n){t.model;var r=e.geometry,o=null;return null!=r&&(o={x:i,y:n,width:r.width,height:r.height},r.x===i&&r.y===n||(e.geometry=o)),o},t.prototype.setVertexLocation=function(t,e){var i=!1;"LeftToRight"!==t.model.layout.orientation&&"RightToLeft"!==t.model.layout.orientation||(i=!0);var n=e.cell,r=e.x[0]-e.width/2,o=e.y[0]-e.height/2;this.garphModelsetVertexLocation(t,n,r,o),i?(t.marginY||(t.marginY=0),t.marginY=Math.max(t.marginY,o+e.height)):(t.marginX||(t.marginX=0),t.marginX=Math.max(t.marginX,r+e.width))},t.prototype.getValues=function(t){var e=[];if(t.map)for(var i=0,n=Object.keys(t.map);i<n.length;i++){var r=n[i];e.push(t.map[r])}return e},t.prototype.crossingStage=function(t){this.crossReduction.execute(t)},t.prototype.layeringStage=function(t){this.initialRank(t),this.fixRanks(t)},t.prototype.initialRank=function(t){for(var e=t.startNodes,i=t.getDictionaryValues(t.vertexMapper),n=e.slice();e.length>0;){for(var r=(d=e[0]).connectsAsTarget,o=d.connectsAsSource,s=!0,a=1e8,l=0;l<r.length;l++){if(5270620!==(f=r[l]).temp[0]){s=!1;break}var h=f.source;a=Math.min(a,h.temp[0]-1)}if(s){if(d.temp[0]=a,t.maxRank||(t.maxRank=1e8),t.maxRank=Math.min(t.maxRank,a),null!=o)for(l=0;l<o.length;l++){(f=o[l]).temp[0]=5270620,-1===(h=f.target).temp[0]&&(e.push(h),h.temp[0]=-2)}e.shift()}else{var c=e.shift();if(e.push(d),c===d&&1===e.length)break}}for(l=0;l<i.length;l++)i[l].temp[0]-=t.maxRank;for(l=0;l<n.length;l++)for(var d,p=0,u=(r=(d=n[l]).connectsAsSource,0);u<r.length;u++){var f;h=(f=r[u]).target;d.temp[0]=Math.max(p,h.temp[0]+1),p=d.temp[0]}t.maxRank=1e8-t.maxRank},t.prototype.fixRanks=function(t){t.fixRanks()},t.prototype.cycleStage=function(t){var e={};t.startNodes=[];for(var i=t.getDictionaryValues(t.vertexMapper),n=[],r=0;r<i.length;r++)i[r].temp[0]=-1,n[i[r].id]=i[r];var o=null;if(null!=t.roots){var s=t.roots;o=[];for(r=0;r<s.length;r++)o[r]=t.getDictionary(t.vertexMapper,s[r]),null!=o[r]&&t.startNodes.push(o[r])}t.visit("removeParentConnection",o,!0,null,{seenNodes:e,unseenNodes:n});var a=t.clone(e,null,!0);t.visit("removeNodeConnection",n,!0,a,{seenNodes:e,unseenNodes:n})},t.prototype.remove=function(t,e){var i=e.indexOf(t);return-1!==i&&e.splice(i,1),t},t.prototype.invert=function(t,e){var i=t.source;t.source=t.target,t.target=i,t.isReversed=!t.isReversed},t.prototype.getEdgesBetween=function(t,e,i){i=null!=i&&i;for(var n=this.getEdges(t),r=[],o=0;o<n.length;o++){var s=this.getVisibleTerminal(n[o],!0),a=this.getVisibleTerminal(n[o],!1);(s===t&&a===e||!i&&s===e&&a===t)&&r.push(n[o])}return r},t}(),KS=function(){function t(t,e,i,n){this.multiObjectIdentityCounter=0,this.dfsCount=0,this.hierarchicalUtil=new ZS,this.roots=i,this.vertexMapper={map:{}};var r=[];this.layout=n,this.maxRank=1e8,this.hierarchicalLayout=t,this.createInternalCells(t,e,r);for(var o=0;o<e.length;o++){for(var s=r[o].connectsAsSource,a=0;a<s.length;a++){var l=s[a],h=l.edges;if(null!=h&&h.length>0){var c=h[0],d=t.getVisibleTerminal(c,!1),p=this.getDictionary(this.vertexMapper,d);r[o]===p&&(d=t.getVisibleTerminal(c,!0),p=this.getDictionary(this.vertexMapper,d)),null!=p&&r[o]!==p&&(l.target=p,0===p.connectsAsTarget.length&&(p.connectsAsTarget=[]),p.connectsAsTarget.indexOf(l)<0&&p.connectsAsTarget.push(l))}}r[o].temp[0]=1}}return t.prototype.createInternalCells=function(t,e,i){for(var n=0;n<e.length;n++){i[n]={x:[],y:[],temp:[],cell:e[n],id:e[n].name,connectsAsTarget:[],connectsAsSource:[]},this.setDictionary(this.vertexMapper,e[n],i[n]);var r=t.getEdges(e[n]);i[n].connectsAsSource=[];for(var o=0;o<r.length;o++){var s=t.getVisibleTerminal(r[o],!1);if(s!==e[n]){var a=t.getEdgesBetween(e[n],s,!1),l=t.getEdgesBetween(e[n],s,!0);if(null!=a&&a.length>0&&2*l.length>=a.length){for(var h={x:[],y:[],temp:[],edges:a,ids:[]},c=0;c<a.length;c++)h.ids.push(a[c].id);h.source=i[n],i[n].connectsAsSource||(i[n].connectsAsSource=[]),i[n].connectsAsSource.indexOf(h)<0&&i[n].connectsAsSource.push(h)}}}i[n].temp[0]=0}},t.prototype.fixRanks=function(){var t=[];this.ranks=[];for(var e=0;e<this.maxRank+1;e++)t[e]=[],this.ranks[e]=t[e];var i=null;if(null!=this.roots){var n=this.roots;i=[];for(e=0;e<n.length;e++){var r=n[e],o=this.getDictionary(this.vertexMapper,r);i[e]=o}}this.visit("updateMinMaxRank",i,!1,null,{seenNodes:null,unseenNodes:null,rankList:t})},t.prototype.updateMinMaxRank=function(t,e,i){i.seenNodes,i.unseenNodes;var n=i.parent,r=i.root,o=i.edge,s=i.rankList;if((r.maxRank||0===r.maxRank||(r.maxRank=-1),r.minRank||0===r.minRank||(r.minRank=-1),0===e&&r.maxRank<0&&r.minRank<0&&(s[r.temp[0]].push(r),r.maxRank=r.temp[0],r.minRank=r.temp[0],r.temp[0]=s[r.maxRank].length-1),null!=n&&null!=o)&&n.maxRank-r.maxRank>1){o.maxRank=n.maxRank,o.minRank=r.maxRank,o.temp=[],o.x=[],o.y=[];for(var a=o.minRank+1;a<o.maxRank;a++)s[a].push(o),this.hierarchicalUtil.setTempVariable(o,a,s[a].length-1)}},t.prototype.setDictionary=function(t,e,i){var n=e.name,r=t.map[n];return t.map[n]=i,r},t.prototype.setDictionaryForSorter=function(t,e,i,n){var r=e.id,o=t.map[r];return t.map[r]=i,o},t.prototype.getDictionary=function(t,e){this.multiObjectIdentityCounter||0===this.multiObjectIdentityCounter||(this.multiObjectIdentityCounter=0);var i=e.name;return i?t.map[i]:e.layoutObjectId?t.map[e.layoutObjectId]:(e.layoutObjectId="graphHierarchyNode#"+this.multiObjectIdentityCounter++,e.layoutObjectId)},t.prototype.getDictionaryForSorter=function(t,e){this.multiObjectIdentityCounter||0===this.multiObjectIdentityCounter||(this.multiObjectIdentityCounter=0);var i=e.id;return i?t.map[i]:e.layoutObjectId?t.map[e.layoutObjectId]:(e.layoutObjectId="graphHierarchyNode#"+this.multiObjectIdentityCounter++,e.layoutObjectId)},t.prototype.getDictionaryValues=function(t){for(var e=[],i=0,n=Object.keys(t.map);i<n.length;i++){var r=n[i];e.push(t.map[r])}return e},t.prototype.visit=function(t,e,i,n,r){r.seenNodes,r.unseenNodes,r.rankList;if(null!=e){for(var o=0;o<e.length;o++){var s=e[o];null!=s&&(null==n&&(n=new Object),r.parent=null,r.root=s,r.edge=null,i?(s.hashCode=[],s.hashCode[0]=this.dfsCount,s.hashCode[1]=o,this.extendedDfs(t,n,o,0,r)):this.depthFirstSearch(t,n,0,r))}this.dfsCount++}},t.prototype.depthFirstSearch=function(t,e,i,n){n.seenNodes,n.unseenNodes,n.rankList,n.parent;var r=n.root;n.edge;if(null!=r){var o=r.id;if(null==e[o]){e[o]=r,this.updateConnectionRank(t,i,0,n);for(var s=r.connectsAsSource.slice(),a=0;a<s.length;a++){var l=s[a],h=l.target;n.parent=r,n.root=h,n.edge=l,this.depthFirstSearch(t,e,i+1,n)}}else this.updateConnectionRank(t,i,1,n)}},t.prototype.updateConnectionRank=function(t,e,i,n){var r=n.parent,o=n.root,s=n.edge;if("removeParentConnection"===t||"removeNodeConnection"===t){var a="removeNodeConnection"===t;this.removeConnectionEdge(r,o,s,e,n,a)}"updateMinMaxRank"===t&&this.updateMinMaxRank(e,i,n)},t.prototype.removeConnectionEdge=function(t,e,i,n,r,o){var s=r.seenNodes,a=r.unseenNodes;r.rankList;this.hierarchicalUtil.isAncestor(e,t)&&(this.hierarchicalUtil.invert(i,0),this.hierarchicalUtil.remove(i,t.connectsAsSource),o?(e.connectsAsSource.push(i),t.connectsAsTarget.push(i),this.hierarchicalUtil.remove(i,e.connectsAsTarget)):(t.connectsAsTarget.push(i),this.hierarchicalUtil.remove(i,e.connectsAsTarget),e.connectsAsSource.push(i))),s[e.id]=e,delete a[e.id]},t.prototype.extendedDfs=function(t,e,i,n,r){r.seenNodes,r.unseenNodes,r.rankList;var o=r.parent,s=r.root;r.edge;if(null!=s){if(null!=o&&(null==s.hashCode||s.hashCode[0]!==o.hashCode[0])){var a=o.hashCode.length+1;s.hashCode=o.hashCode.slice(),s.hashCode[a-1]=i}var l=s.id;if(null==e[l]){e[l]=s,this.updateConnectionRank(t,n,0,r);for(var h=s.connectsAsSource.slice(),c=0;c<h.length;c++){var d=h[c],p=d.target;r.parent=s,r.root=p,r.edge=d,this.extendedDfs(t,e,c,n+1,r)}}else this.updateConnectionRank(t,n,1,r)}},t.prototype.clone=function(t,e,i){if(i=null!=i&&i,null!=t&&"function"==typeof t.constructor){for(var n=t.constructor(),r=0,o=Object.keys(t);r<o.length;r++){var s=o[r];"layoutObjectId"!==s&&(null==e||e.indexOf(s)<0)&&(i||"object"!=typeof t[s])&&(n[s]=t[s])}return n}return null},t}(),JS=function(){function t(){}return t.prototype.calculateCrossings=function(t){for(var e=t.ranks.length,i=0,n=1;n<e;n++)i+=this.calculateRankCrossing(n,t);return i},t.prototype.getTempVariable=function(t,e){return t?this.isVertex(t)?t.temp[0]:t.temp[e-t.minRank-1]:0},t.prototype.calculateRankCrossing=function(t,e){for(var i=0,n=e.ranks[t],r=e.ranks[t-1],o=[],s=0;s<n.length;s++){for(var a=n[s],l=this.getTempVariable(a,t),h=this.getConnectedCellsOnLayer(a,t,!0),c=[],d=0;d<h.length;d++){var p=h[d],u=this.getTempVariable(p,t-1);c.push(u)}c.sort(function(t,e){return t-e}),o[l]=c}var f=[];for(s=0;s<o.length;s++)f=f.concat(o[s]);for(var g=1;g<r.length;)g<<=1;var m=2*g-1;g-=1;var y=[];for(s=0;s<m;++s)y[s]=0;for(s=0;s<f.length;s++){var v=f[s]+g;for(++y[v];v>0;)v%2&&(i+=y[v+1]),++y[v=v-1>>1]}return i},t.prototype.execute=function(t){this.nestedBestRanks=[];for(var e=0;e<t.ranks.length;e++)this.nestedBestRanks[e]=t.ranks[e].slice();var i=0,n=this.calculateCrossings(t);for(e=0;e<24&&i<2;e++){this.weightedMedian(e,t);var r=this.calculateCrossings(t);if(r<n){n=r,i=0;for(var o=0;o<this.nestedBestRanks.length;o++)for(var s=t.ranks[o],a=0;a<s.length;a++){var l=s[a],h=this.nestedBestRanks[o][l.temp[0]],c=!0;l.edges&&h&&!h.edges&&(c=!1),h&&c&&(this.nestedBestRanks[o][l.temp[0]]=l)}}else{i++;for(o=0;o<this.nestedBestRanks.length;o++)for(s=t.ranks[o],a=0;a<s.length;a++){l=s[a];this.setTempVariable(l,o,a)}}if(0===n)break}var d=[],p=[];for(e=0;e<t.maxRank+1;e++)p[e]=[],d[e]=p[e];for(e=0;e<this.nestedBestRanks.length;e++)for(o=0;o<this.nestedBestRanks[e].length;o++)p[e].push(this.nestedBestRanks[e][o]);t.ranks=d},t.prototype.isVertex=function(t){return!(!t||!t.cell||!t.cell.inEdges&&!t.cell.outEdges)},t.prototype.weightedMedian=function(t,e){var i=t%2==0;if(i)for(var n=e.maxRank-1;n>=0;n--)this.medianRank(n,i);else for(n=1;n<e.maxRank;n++)this.medianRank(n,i)},t.prototype.getConnectedCellsOnLayer=function(t,e,i){void 0===i&&(i=!1);var n="nextLayerConnectedCells",r="connectsAsTarget";if(i&&(n="previousLayerConnectedCells",r="connectsAsSource"),t){if(this.isVertex(t)){if(null==t[n]){t[n]=[],t[n][0]=[];for(var o=0;o<t[r].length;o++){var s=t[r][o];void 0===s.maxRank&&(s.maxRank=-1),-1===s.maxRank||(i?s.minRank===e-1:s.maxRank===e+1)?t[n][0].push(i?s.target:s.source):t[n][0].push(s)}}return t[n][0]}if(null==t[n]){t[n]=[];for(o=0;o<t.temp.length;o++)t[n][o]=[],o===(i?0:t.temp.length-1)?t[n][o].push(i?t.target:t.source):t[n][o].push(t)}return t[n][e-t.minRank-1]}return null},t.prototype.medianValue=function(t,e){for(var i=[],n=0,r=0;r<t.length;r++){var o=t[r];i[n++]=this.getTempVariable(o,e)}if(i.sort(function(t,e){return t-e}),n%2==1)return i[Math.floor(n/2)];if(2===n)return(i[0]+i[1])/2;var s=n/2,a=i[s-1]-i[0],l=i[n-1]-i[s];return(i[s-1]*l+i[s]*a)/(a+l)},t.prototype.setTempVariable=function(t,e,i){t&&(t.temp[0]=i)},t.prototype.medianRank=function(t,e){for(var i=this.nestedBestRanks[t].length,n=[],r=[],o=0;o<i;o++){var s=this.nestedBestRanks[t][o],a={medianValue:0};a.cell=s;var l=void 0,h=void 0;h=e?t+1:t-1,null!=(l=e?this.getConnectedCellsOnLayer(s,t):this.getConnectedCellsOnLayer(s,t,!0))&&0!==l.length?(a.medianValue=this.medianValue(l,h),n.push(a)):r[this.getTempVariable(s,t)]=!0}n.sort(this.compare);for(o=0;o<i;o++)if(null==r[o]&&n.length>0){s=n.shift().cell;this.setTempVariable(s,t,o)}},t.prototype.compare=function(t,e){if(null!=t&&null!=e){if(e.medianValue>t.medianValue)return-1;if(e.medianValue<t.medianValue)return 1}return 0},t}(),QS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$S=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},tx=function(t){var e=t;return e.sourcePoint||e.targetPoint||e.sourceID||e.targetID||e.sourcePortID||e.targetPortID||e.sourceDecorator||e.targetDecorator?Gf:(t.shape&&(t.shape instanceof $y||t.shape.type),Lv)},ex=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return QS(e,t),$S([Hi("")],e.prototype,"id",void 0),$S([Hi()],e.prototype,"height",void 0),$S([Hi(!0)],e.prototype,"expanded",void 0),$S([Hi("")],e.prototype,"iconCss",void 0),$S([Hi("")],e.prototype,"title",void 0),$S([Wi(tx)],e.prototype,"symbols",void 0),e}(ln),ix=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return QS(e,t),$S([Hi()],e.prototype,"width",void 0),$S([Hi()],e.prototype,"height",void 0),e}(ln),nx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return QS(e,t),$S([Hi()],e.prototype,"width",void 0),$S([Hi()],e.prototype,"height",void 0),$S([_i({},qd)],e.prototype,"offset",void 0),e}(ln),rx=function(t){function e(e,i){var n,r,o=t.call(this,e,i)||this;o.symbolTable={},o.childTable={},o.info="info",o.oldObject=null,o.laneTable={},o.isExpand=!1,o.isExpandMode=!1,o.isMethod=!1,o.paletteid=88123,o.helper=function(t){var e,i=o.selectedSymbol&&o.selectedSymbol.id||t.sender.target.id.split("_container")[0],n=o.symbolTable[i];if(n&&o.selectedSymbol){o.selectedSymbols=o.selectedSymbol.id===n.id?n:o.selectedSymbol;o.getMousePosition(t.sender);(e=o.getSymbolPreview(o.selectedSymbols,t.sender,o.element)).setAttribute("paletteId",o.element.id)}return e};for(var s=0;o&&o.palettes&&s<o.palettes.length;s++)for(var a=0;a<o.palettes[s].symbols.length;a++)n=o.palettes[s].symbols[a],r=e.palettes[s].symbols[a],n&&"UmlActivity"===n.shape.type&&_m(r,n),(o.nodeDefaults||o.connectorDefaults)&&Um(n,r,n instanceof Lv?o.nodeDefaults:o.connectorDefaults);return o}return QS(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=!1,n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"width":this.element.style.width=this.width.toString();break;case"height":this.element.style.height=this.height.toString();break;case"symbolPreview":break;case"symbolWidth":case"symbolHeight":case"getSymbolInfo":i=!0;break;case"enableSearch":if(t.enableSearch)this.createTextbox();else{var o=document.getElementById(this.element.id+"_search");o&&o.parentNode.removeChild(o)}break;case"palettes":for(var s=0,a=Object.keys(t.palettes);s<a.length;s++){var l=a[s],h=Number(l);this.accordionElement.items[h]||(this.accordionElement.items[h]={header:t.palettes[h].title||"",expanded:t.palettes[h].expanded,iconCss:t.palettes[h].iconCss||""}),void 0!==t.palettes[h].iconCss&&(this.accordionElement.items[h].iconCss=t.palettes[h].iconCss||"",i=!0),void 0!==t.palettes[h].expanded&&(this.palettes[h].isInteraction?this.palettes[h].isInteraction=!1:(this.accordionElement.items[h].expanded=t.palettes[h].expanded,this.isExpand=!0),this.isExpandMode||this.isMethod||this.isExpand||(this.isExpand=!0)),$()&&null===t.palettes[h].symbols&&this.updateBlazorProperties(t)}break;case"enableAnimation":this.enableAnimation?this.accordionElement.animation={expand:{duration:400},collapse:{duration:400}}:this.accordionElement.animation={expand:{duration:0},collapse:{duration:0}};break;case"expandMode":this.accordionElement.expandMode=this.expandMode,i=!0,this.isExpandMode=!0;break;case"allowDrag":this.allowDrag=t.allowDrag,this.allowDrag?this.draggable.helper=this.helper:this.draggable.helper=function(){return null}}}if(i&&this.refreshPalettes(),this.isExpand&&!i){this.refresh(),this.isExpand=!1;for(var c=0;c<this.palettes.length;c++){var d=this.palettes[c].id;window[d]&&window[d].length>1&&(window[d][1].parentNode.removeChild(window[d][1]),window[d][1]=null)}}this.isMethod=!1},e.prototype.updateBlazorProperties=function(t){if(window&&window.Blazor){var e={methodName:"UpdateBlazorProperties",paletteobj:{palette:t.palettes}};window.sfBlazor.updateBlazorProperties(e,this)}},e.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},e.prototype.preRender=function(){var t=this;if(""===this.element.id){var e=document.getElementsByClassName("e-symbolpalette").length;this.element.id="symbolpalette_"+this.paletteid+"_"+e}this.element.style.overflow="auto",this.element.style.height=this.height.toString(),this.element.style.width=this.width.toString(),this.enableSearch&&this.createTextbox();var i=Jv("div",{id:this.element.id+"_container"});this.accordionElement=new qn({expandMode:this.expandMode}),this.enableAnimation||(this.accordionElement.animation={expand:{duration:0},collapse:{duration:0}}),this.accordionElement.expanded=function(e){var i=t.accordionElement.items.indexOf(e.item),n=t.allowServerDataBinding;t.allowServerDataBinding=!1,t.palettes[i].expanded=e.isExpanded,t.palettes[i].isInteraction=!0,t.allowServerDataBinding=n},this.element.appendChild(i);window.measureElement&&(window.measureElement=null),ab(),this.unWireEvents(),this.wireEvents()},e.prototype.render=function(){this.diagramRenderer=new Ab(this.element.id,new Tb,!1),this.svgRenderer=new Ab(this.element.id,new Tb,!0),this.updatePalettes(),this.accordionElement.appendTo("#"+this.element.id+"_container"),this.renderComplete()},e.prototype.getModuleName=function(){return"SymbolPalette"},e.prototype.requiredModules=function(){var t=[];return t.push({member:"Bpmn",args:[]}),t},e.prototype.destroy=function(){if(this.allowDrag){this.draggable.destroy(),this.unWireEvents(),this.notify("destroy",{}),t.prototype.destroy.call(this);var e=document.getElementById(this.element.id+"_container");if(e){this.element.removeChild(e);if(window.measureElement){window.measureElement.usageCount-=1;window.measureElementCount--,0===window.measureElementCount&&(window.measureElement.parentNode.removeChild(window.measureElement),window.measureElement=null)}}(e=document.getElementById(this.element.id+"_search"))&&e.parentNode.removeChild(e),this.element.classList.remove("e-symbolpalette")}},e.prototype.addPalettes=function(t){for(var e,i=0;i<t.length;i++){var n=this.allowServerDataBinding;this.isProtectedOnChange=!0,this.allowServerDataBinding=!1,e=new ex(this,"palettes",t[i],!0),this.palettes.push(e),this.initSymbols(e),this.allowServerDataBinding=n,this.isProtectedOnChange=!1,this.renderPalette(e)}this.bulkChanges={},this.accordionElement.refresh()},e.prototype.removePalette=function(t){for(var e=0;e<this.palettes.length;e++)if(this.palettes[e].id===t){this.palettes.splice(e,1),this.accordionElement.items.splice(e,1);break}},e.prototype.removePalettes=function(t){var e=this.allowServerDataBinding;this.allowServerDataBinding=!1;for(var i=0;i<t.length;i++)this.removePalette(t[i]);this.accordionElement.refresh(),this.allowServerDataBinding=e},e.prototype.initSymbols=function(t){for(var e=[],i=0,n=0,r=0,o=t.symbols;r<o.length;r++){if("SwimLane"===(C=o[r]).shape.type){var s=C,a=C.shape,l="Horizontal"===a.orientation;if(a.isLane){i=l?this.symbolHeight-this.symbolHeight/2:this.symbolHeight-this.symbolHeight/4,n=l?this.symbolWidth-this.symbolWidth/4:this.symbolWidth-this.symbolWidth/2,this.laneTable[C.id]={height:i,width:n};var h=a.lanes[0].header,c=a.lanes[0].style,d=h.style,p={id:"header"+cb(),shape:{type:"Basic",shape:"Rectangle"},width:l?h.width:s.width,height:l?s.height:h.height,style:d,annotations:[{content:h.annotation.content}]};p.offsetX=p.width/2,p.offsetY=p.height/2,this.addPaletteItem(t.id,p);var u={id:"lane"+cb(),shape:{type:"Basic",shape:"Rectangle"},width:l?s.width-h.width:s.width,height:l?s.height:s.height-h.height,style:c};u.offsetX=l?p.width+u.width/2:u.width/2,u.offsetY=l?u.height/2:p.height+u.height/2,this.addPaletteItem(t.id,u),s.children=[p.id,u.id]}else a.isPhase&&(i=s.height?s.height:this.symbolHeight,n=s.width?s.width:this.symbolWidth,C.shape.type="Path",C.shape.data=l?"M0,0 L"+n+",0":"M0,0 L0,"+n)}if(C instanceof Lv){var f=Lb(this.getNodeDefaults);f&&f(C,this)}else if(C instanceof Gf){var g=Lb(this.getConnectorDefaults);g&&g(C,this)}this.symbolTable[C.id]=C,C instanceof Lv&&C.children&&e.push(C)}for(var m=0;m<e.length;m++)for(var y=void 0,v=0;v<e[m].children.length;v++)(y=this.symbolTable[e[m].children[v]])&&(this.childTable[y.id]=y,y.parentId=e[m].id);for(var b=0,w=t.symbols;b<w.length;b++){(C=w[b])instanceof Lv&&C.children||this.prepareSymbol(C)}for(var S=0,x=e;S<x.length;S++){var C=x[S];this.prepareSymbol(C)}},e.prototype.renderPalette=function(t){var e="display:none;overflow:auto;";t.height&&(e+="height:"+t.height+"px");var i=Jv("div",{id:t.id,style:e,class:"e-remove-palette"});this.element.appendChild(i);var n={header:t.title,expanded:t.expanded,content:"#"+t.id,iconCss:t.iconCss};this.accordionElement.items.push(n),this.renderSymbols(t,i)},e.prototype.addPaletteItem=function(t,e,i){e=gb(e);for(var n=0;n<this.palettes.length;n++){var r=this.palettes[n];if(-1!==r.id.indexOf(t)){for(var o=[void 0,r,"symbols",{},!0],s=new(Function.prototype.bind.apply(tx(e),o)),a=0;a<Object.keys(e).length;a++){var l=this.allowServerDataBinding;this.allowServerDataBinding=!1,s[Object.keys(e)[a]]=e[Object.keys(e)[a]],this.allowServerDataBinding=l}Um(s,e,s instanceof Lv?this.nodeDefaults:this.connectorDefaults),r.symbols.push(s);var h=this.allowServerDataBinding;if(this.allowServerDataBinding=!1,this.prepareSymbol(s),this.allowServerDataBinding=h,this.symbolTable[s.id]=s,i)this.childTable[s.id]=s;else{var c=document.getElementById(r.id);c&&c.appendChild(this.getSymbolContainer(s,c))}break}}},e.prototype.removePaletteItem=function(t,e){for(var i,n=0;n<this.palettes.length;n++){var r=this.palettes[n];if(-1!==r.id.indexOf(t))for(var o=0,s=r.symbols;o<s.length;o++){var a=s[o];if(-1!==a.id.indexOf(e)){var l=r.symbols.indexOf(a);if(r.symbols.splice(l,1),a.children)for(var h=a.children,c=0;c<h.length;c++)delete this.symbolTable[h[c]];delete this.symbolTable[a.id];var d=document.getElementById(a.id+"_container");d.parentNode.removeChild(d),i=!0;break}}if(i)break}},e.prototype.prepareSymbol=function(t){var e,i,n,r,o,s=new Wy,a=t,l=new tu,h=t instanceof Lv?t.initContainer():null;h&&!h.children&&(h.children=[]);var c=Lb(this.getSymbolTemplate);if(c&&(o=c(t)),o||(a.children?o=this.getContainer(a,h):(o=t.init(this),t instanceof Lv&&t.parentId&&h.children.push(o))),!t.parentId){var d={width:this.symbolWidth,height:this.symbolHeight},p=Lb(this.getSymbolInfo);if(p?d=p(t):$()&&(d.fit=this.symbolInfo.fit,d.width=this.symbolInfo.width,d.height=this.symbolInfo.height),d=d||this.symbolInfo||{},t.shape&&t.shape.isPhase&&(d.width=d.width||this.symbolWidth,d.height=d.height||this.symbolHeight),o.relativeMode="Object",o.horizontalAlignment=o.verticalAlignment="Center",l.style.strokeColor=l.style.fill="none",l.children=[o],o.measure(new Wd),o.arrange(o.desiredSize),e=d.width=d.width||(void 0!==a.width?o.actualSize.width:void 0)||this.symbolWidth,n=d.height=d.height||(void 0!==a.height?o.actualSize.height:void 0)||this.symbolHeight,void 0!==e&&void 0!==n){var u=e,f=n,g=(t.shape.isLane,!!t.shape.isPhase);void 0!==this.symbolWidth?u=this.symbolWidth-this.symbolMargin.left-this.symbolMargin.right:e+=a.style.strokeWidth,void 0!==this.symbolHeight?f=this.symbolHeight-this.symbolMargin.top-this.symbolMargin.bottom:n+=a.style.strokeWidth,d.description&&""!==d.description.text&&(f-=20),i=u/(!g&&o.width||e),r=f/(!g&&o.height||n),d.fit&&(i=u/d.width,r=f/d.height),e=u,n=f,i=r=Math.min(i,r),l.width=e,l.height=n,o.width=d.width,o.height=d.height,this.scaleSymbol(t,l,i,r,e,n)}else{var m=void 0;t instanceof Gf&&(m=of(t)),o.width=t.width||m?m.width:o.actualSize.width,o.height=t.height||m?m.height:o.actualSize.height}t.wrapper=s,s.children=[l],o.pivot=s.pivot={x:0,y:0},s.id=o.id+"_symbol",s.style.fill=s.style.strokeColor="transparent",t instanceof Lv?(s.offsetX=t.style.strokeWidth/2,s.offsetY=t.style.strokeWidth/2):(s.offsetX=.5,s.offsetY=.5),this.getSymbolDescription(d,e,s),s.measure(new Wd),s.arrange(s.desiredSize),d.width=d.width||o.actualSize.width,d.height=d.height||o.actualSize.height,t[this.info]=d}t.parentId&&(h.measure(new Wd(a.width,a.height)),h.arrange(h.desiredSize))},e.prototype.getContainer=function(t,e){var i;e.measureChildren=!1;var n=t.children;e.children=[];for(var r=0;r<n.length;r++)this.symbolTable[n[r]]&&e.children.push(this.symbolTable[n[r]].wrapper);return e.measure(new Wd(t.width,t.height)),e.arrange(e.desiredSize),0===e.bounds.x&&0===e.bounds.y||(Cy(t,(i=e.bounds).x,i.y,this.symbolTable,!1,this),e=this.getContainer(t,e)),e},e.prototype.getSymbolDescription=function(t,e,i){if(t&&t.description&&t.description.text){var n=new Qp;t.description.overflow=t.description.overflow||"Ellipsis",t.description.wrap=t.description.wrap||"WrapWithOverflow",n.id=i.id+"_text",n.content=t.description.text,n.width=e,n.height=20,n.style.strokeColor="transparent",n.style.fill="transparent",n.style.strokeWidth=0,n.style.textWrapping=t.description.wrap,n.style.textOverflow=t.description.overflow,n.margin={left:0,right:0,top:0,bottom:5},i.children.push(n)}},e.prototype.renderSymbols=function(t,e){for(var i=0,n=t.symbols;i<n.length;i++){var r=n[i];r.parentId||this.getSymbolContainer(r,e)}},e.prototype.getSymbolPreview=function(t,e,i){var n,r,o;this.allowServerDataBinding=!1;var s=t.wrapper.children[0].desiredSize.width+t.style.strokeWidth,a=t.wrapper.children[0].desiredSize.height+t.style.strokeWidth,l=t.wrapper.children[0].children[0],h=t.previewSize;if(t&&(h.width||h.height)||void 0!==this.symbolPreview.width||void 0!==this.symbolPreview.height){s=(h.width||this.symbolPreview.width||s)-t.style.strokeWidth,a=(h.height||this.symbolPreview.height||a)-t.style.strokeWidth,r=s/l.actualSize.width,o=a/l.actualSize.height,r=o=Math.min(r,o);var c=l.actualSize.width*r,d=l.actualSize.height*o;t.wrapper.children[0].width=s,t.wrapper.children[0].height=a,this.measureAndArrangeSymbol(l,t instanceof Lv),this.scaleSymbol(t,t.wrapper.children[0],r,o,c,d,!0),s=c,a=d}var p={x:l.offsetX,y:l.offsetY};l.offsetX=l.offsetY=t.style.strokeWidth/2,l.pivot={x:0,y:0},this.measureAndArrangeSymbol(l,t instanceof Lv);var u,f=Jv("div",{draggable:"true",class:"e-dragclone",style:"pointer-events:none"});document.body.appendChild(f);var g="margin:5px;";if("Native"===t.shape.type){n=Qv("svg",{id:t.id+"_preview",width:Math.ceil(s)+1,height:Math.ceil(a)+1});var m=Qv("g",{id:t.id+"_g"});n.appendChild(m),f.appendChild(n),this.svgRenderer.renderElement(l,m,void 0,void 0,n)}else if("HTML"===t.shape.type)u=this.getHtmlSymbol(t,n,f,a,s,!0);else if(t.children&&t.children.length>0&&Wm(t,"HTML",this.childTable))u=this.getGroupParent(t,n,f,t.wrapper.actualSize.height,t.wrapper.actualSize.width,!0);else{n=Ib.createCanvas(t.id+"_preview",2*(Math.ceil(s)+t.style.strokeWidth+1),2*(Math.ceil(a)+t.style.strokeWidth+1)),f.appendChild(n),"Basic"===t.shape.type||"Flow"===t.shape.type?g+="transform: scale(0.5) translate(-"+n.width/2+"px, -"+n.height/2+"px);":g+="transform:scale(0.5);",n.setAttribute("transform-origin","0 0");var y=2;t instanceof Gf&&(y=1.9),n.getContext("2d").setTransform(y,0,0,y,0,0),this.diagramRenderer.renderElement(l,n,void 0)}return ob(u&&("HTML"===t.shape.type||t.children&&t.children.length>0)?u:n,g),l.offsetX=p.x,l.offsetY=p.y,this.allowServerDataBinding=!0,f},e.prototype.measureAndArrangeSymbol=function(t,e){t.children&&!e&&(t.children[0].transform=Pp.Self),t.measure(new Wd),t.arrange(t.desiredSize),t.children&&(t.children[0].transform=Pp.Parent)},e.prototype.updateSymbolSize=function(t,e,i){var n=t.wrapper.children[0].children[0],r=t.style.strokeWidth;n.width=(e||n.width)-(r+1),n.height=(i||n.height)-(r+1),t.wrapper.measure(new Wd),t.wrapper.arrange(t.wrapper.desiredSize)},e.prototype.getSymbolContainer=function(t,e,i){var n,r,o,s=this.symbolTable[t.id][this.info],a=this.getSymbolSize(t,s),l=a.width+1,h=a.height+1,c=Jv("div",{id:t.id+"_container",style:"width:"+l+"px;height:"+h+"px;float:left;overflow:hidden",title:s.tooltip?s.tooltip:t.id});if(e.appendChild(c),"Native"===t.shape.type)n=Qv("svg",{id:t.id,width:Math.ceil(t.wrapper.actualSize.width)+1,height:Math.ceil(t.wrapper.actualSize.height)+1}),r=Qv("g",{id:t.id+"_g"}),n.appendChild(r),c.appendChild(n),this.updateSymbolSize(t),this.svgRenderer.renderElement(t.wrapper,r,void 0,void 0,n);else if("HTML"===t.shape.type)o=this.getHtmlSymbol(t,n,c,t.wrapper.actualSize.height,t.wrapper.actualSize.width,!1);else if(t.children&&t.children.length>0&&Wm(t,"HTML",this.childTable))o=this.getGroupParent(t,n,c,t.wrapper.actualSize.height,t.wrapper.actualSize.width,!1);else{n=Ib.createCanvas(t.id,Math.ceil(2*(t.wrapper.actualSize.width+t.style.strokeWidth))+1,Math.ceil(2*(t.wrapper.actualSize.height+t.style.strokeWidth))+1),c.appendChild(n);var d=2;t instanceof Gf&&(d=1.9),n.getContext("2d").setTransform(d,0,0,d,0,0),this.diagramRenderer.renderElement(t.wrapper,r||n,void 0,void 0,void 0,void 0,!0,void 0,!0)}if(!i){var p=t.wrapper.actualSize.width+t.style.strokeWidth,u=t.wrapper.actualSize.height+t.style.strokeWidth,f="pointer-events:none;transform-origin:0 0;overflow:hidden;";return t.shape.isPhase?"Horizontal"===t.shape.orientation?f+="margin-left:"+Math.max(this.symbolMargin.left,(l-p)/2)+"px;margin-top:"+a.height/2+"px;":f+="margin-left:"+a.width/2+"px;margin-top:"+Math.max(this.symbolMargin.top,(h-u)/2)+"px;":f+="margin-left:"+Math.max(this.symbolMargin.left,(l-p)/2)+"px;margin-top:"+Math.max(this.symbolMargin.top,(h-u)/2)+"px;",n instanceof HTMLCanvasElement&&(f+="transform:scale(.5,.5);"),ob(o&&("HTML"===t.shape.type||t.children&&t.children.length>0)?o:n,f),c.classList.add("e-symbol-draggable"),c}return n},e.prototype.getGroupParent=function(t,e,i,n,r,o){var s=Jv("div",{id:t.id+(o?"_html_div_preview":"_html_div")}),a=Jv("div",{id:t.id+(o?"_htmlLayer_preview":"_htmlLayer"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute",class:"e-html-layer"}),l=Jv("div",{id:t.id+(o?"_htmlLayer_div_preview":"_htmlLayer_div"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute"});return a.appendChild(l),s.appendChild(a),e=Ib.createCanvas(o?t.id+"_preview":t.id,Math.ceil(r)+1,Math.ceil(n)+1),s.appendChild(e),i.appendChild(s),this.diagramRenderer.renderElement(t.wrapper.children[0].children[0],e,a),s},e.prototype.getHtmlSymbol=function(t,e,i,n,r,o){var s=Jv("div",{id:t.id+(o?"_html_div_preview":"_html_div")}),a=Jv("div",{id:t.id+(o?"_htmlLayer_preview":"_htmlLayer"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute",class:"e-html-layer"}),l=Jv("div",{id:t.id+(o?"_htmlLayer_div_preview":"_htmlLayer_div"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute"});return a.appendChild(l),s.appendChild(a),e=Ib.createCanvas(t.id,Math.ceil(2*(t.wrapper.actualSize.width+t.style.strokeWidth))+1,Math.ceil(2*(t.wrapper.actualSize.height+t.style.strokeWidth))+1),i.appendChild(e),e.getContext("2d").setTransform(2,0,0,2,0,0),s.appendChild(e),i.appendChild(s),this.diagramRenderer.renderElement(t.wrapper.children[0].children[0],e,a),s},e.prototype.getSymbolSize=function(t,e){var i=t.wrapper.actualSize.width,n=t.wrapper.actualSize.height;return this.symbolWidth||this.symbolHeight?(i=this.symbolWidth,n=Math.max(this.symbolHeight,n)):(i+=this.symbolMargin.left+this.symbolMargin.right+t.style.strokeWidth,n+=this.symbolMargin.top+this.symbolMargin.bottom+t.style.strokeWidth),new Wd(i,n)},e.prototype.getMousePosition=function(t){var e,i,n;if(-1!==t.type.indexOf("touch")){var r=(n=t).changedTouches[0].clientY,o=n.changedTouches[0].clientX;e=r-this.element.offsetTop,i=o-this.element.offsetLeft}else e=t.clientY-this.element.offsetTop,i=t.clientX-this.element.offsetLeft;return{x:i,y:e}},e.prototype.mouseMove=function(t,e){!this.highlightedSymbol||this.selectedSymbol&&this.selectedSymbol.id+"_container"===this.highlightedSymbol.id||(this.highlightedSymbol.classList.remove("e-symbol-hover"),this.highlightedSymbol.style.backgroundColor="",this.highlightedSymbol=null);var i=t.target.id.split("_container")[0];if(this.symbolTable[i]){var n=document.getElementById(i+"_container");n.classList.add("e-symbol-hover"),this.highlightedSymbol=n}t.preventDefault()},e.prototype.mouseUp=function(t){if(this.isMethod=!0,t&&t.target)if("iconSearch"===t.srcElement.id){var e=document.getElementById("iconSearch");e.classList.contains("e-clear-searchtext")&&(e.className="e-input-group-icon e-search e-icons",document.getElementById("textEnter").value="",this.searchPalette(""))}else{var i=t.target.id.split("_container")[0];if(i&&this.selectedSymbol){var n={oldValue:this.oldObject,newValue:i};this.trigger("paletteSelectionChange",n),this.oldObject=i,t.preventDefault()}}},e.prototype.keyUp=function(t){var e=this;if(this.enableSearch){var i=this;document.getElementById("iconSearch").className="e-input-group-icon e-clear-searchtext e-icons",!t||"Enter"!==t.key&&13!==t.keyCode?(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.target instanceof HTMLInputElement&&(i.searchPalette(t.target.value),e.timer=null)},500)):t.target instanceof HTMLInputElement&&this.searchPalette(t.target.value)}},e.prototype.mouseDown=function(t){var e=t.target.id.split("_container")[0];if(this.selectedSymbol){var i,n=document.getElementById(this.selectedSymbol.id+"_container");e!==this.selectedSymbol.id&&n&&n.classList.remove("e-symbol-selected"),(i=document.getElementById(this.selectedSymbol.id+"_container"))&&(i.style.backgroundColor=""),this.selectedSymbol=null}this.symbolTable[e]&&((i=document.getElementById(e+"_container")).classList.add("e-symbol-selected"),this.selectedSymbol=this.symbolTable[e],t.preventDefault())},e.prototype.keyDown=function(t){if(t&&"Escape"===t.key){var e=this.draggable.helperElement;e&&e.parentNode&&(e.parentNode.removeChild(e),this.draggable.intDestroy())}},e.prototype.initDraggable=function(){if(this.allowDrag){this.draggable=new bn(this.element,{dragTarget:".e-symbol-draggable",helper:this.helper,dragStart:this.dragStart,preventDefault:!1,dragStop:this.dragStop,drag:function(t){var e=$v(t.target,"e-droppable");if(e&&e.classList.contains("e-diagram")){e.ej2_instances[0].droppable.over(t)}},cursorAt:{left:this.symbolPreview.offset.x,top:this.symbolPreview.offset.y}})}},e.prototype.dragStart=function(t){var e=this.helper[0];e&&e.setAttribute("paletteId",this.element.id),$()&&t.bindEvents(t.dragElement)},e.prototype.dragStop=function(t){$v(t.target,"e-diagram")||li(t.helper)},e.prototype.scaleSymbol=function(t,e,i,n,r,o,s){if(t instanceof Gf){var a=t.wrapper;t.wrapper=e.children[0];for(var l=t.scale(i,n,r,o,e.children[0]),h=r/2-e.children[0].children[0].offsetX+l.x/2,c=o/2-e.children[0].children[0].offsetY+l.y/2,d=0,p=e.children[0].children;d<p.length;d++){var u=p[d];u.offsetX+=h,u.offsetY+=c,u.staticSize=!1}t.wrapper=a}else if("Bpmn"===t.shape.type&&this.bpmnModule){a=t.wrapper;t.wrapper=e,e.children[0].width=r,e.children[0].height=o,this.bpmnModule.updateBPMN({width:r,height:o},t,t,null),t.wrapper=a}else if(t.children){var f,g,m=t.children;if(!s)for(var y=void 0,v=void 0,b=0;b<m.length;b++)(v=e.children[0].children[b])&&(v.children[0].children&&this.measureChild(v),y=this.symbolTable[v.id],v.width=y.width,v.height=y.height,v.measure(new Wd),v.arrange(v.children[0].desiredSize));if(f=r/e.children[0].desiredSize.width,g=o/e.children[0].desiredSize.height,e.children[0].measure(new Wd),e.children[0].arrange(e.children[0].desiredSize),!s){var w=void 0;for(b=0;b<m.length;b++)(w=e.children[0].children[b])&&(w.children[0].children&&this.scaleChildren(w,f,g,t),this.scaleGroup(w,f,g,t))}if(s){y=void 0;var S=void 0,x=void 0;for(w=void 0,b=0;b<m.length;b++)y=this.symbolTable[m[b]],S=r/t.wrapper.children[0].desiredSize.width,x=o/t.wrapper.children[0].desiredSize.height,(w=e.children[0].children[b])&&(w.children[0].children&&this.scaleChildren(w,S,x,t,!0),this.scaleGroup(w,S,x,t,!0));t.wrapper.children[0].measure(new Wd),t.wrapper.children[0].arrange(t.wrapper.children[0].desiredSize)}}else!function t(e,i,n,r){if(void 0!==e.width&&void 0!==e.height&&(e.width*=i,e.height*=n),e instanceof Kp){var o=op(),s=r.width||r.actualSize.width,a=r.height||r.actualSize.height;if(void 0!==s&&void 0!==a){var l=r.offsetX-s*r.pivot.x,h=r.offsetY-a*r.pivot.y,c={x:l+s*r.pivot.x,y:h+a*r.pivot.y};c=Eb(r.rotateAngle,r.offsetX,r.offsetY,c),ap(o,-r.rotateAngle,c.x,c.y),lp(o,i,n,c.x,c.y),ap(o,r.rotateAngle,c.x,c.y);for(var d=0,p=e.children;d<p.length;d++){var u=p[d];if(void 0!==u.width&&void 0!==u.height){var f=sp(o,{x:u.offsetX,y:u.offsetY});u.offsetX=f.x,u.offsetY=f.y,t(u,i,n,r)}}}}}(e.children[0],i,n,e)},e.prototype.scaleChildren=function(t,e,i,n,r){for(var o,s=0;s<t.children.length;s++)(o=t.children[s]).children[0].children?this.scaleChildren(o,e,i,n,r):this.scaleGroup(o,e,i,n,r)},e.prototype.measureChild=function(t){for(var e,i,n=0;n<t.children.length;n++)(e=t.children[n]).children[0].children?this.measureChild(e):(i=this.symbolTable[e.id],e.width=i.width,e.height=i.height,e.measure(new Wd),e.arrange(e.children[0].desiredSize))},e.prototype.scaleGroup=function(t,e,i,n,r){t.width=t.width*e,t.height=t.height*i,t.offsetX=r?t.offsetX*e-n.style.strokeWidth:t.offsetX*e+n.style.strokeWidth/2,t.offsetY=r?t.offsetY*i-n.style.strokeWidth:t.offsetY*i+n.style.strokeWidth/2,t.measure(new Wd),t.arrange(t.children[0].desiredSize)},e.prototype.refreshPalettes=function(){this.accordionElement.items=[],function(t,e){var i;for(i=e?document.getElementById(e).getElementsByClassName(t):document.getElementsByClassName(t);i.length>0;)i[0].parentNode.removeChild(i[0])}("e-remove-palette",this.element.id),this.updatePalettes(),this.accordionElement.dataBind()},e.prototype.updatePalettes=function(){for(var t=0;t<this.palettes.length;t++){var e=this.palettes[t];this.initSymbols(e),this.renderPalette(e)}},e.prototype.createTextbox=function(){var t=Jv("div",{id:this.element.id+"_search"});ob(t,"backgroundColor:white;height:30px"),t.className="e-input-group",this.element.appendChild(t);var e=Jv("input",{});e.placeholder="Search Shapes",e.id="textEnter",ob(e,"width:100%;height:auto"),e.className="e-input",t.appendChild(e);var i=Jv("span",{id:"iconSearch",className:"e-input-group-icon e-search e-icons"});t.appendChild(i)},e.prototype.getFilterSymbol=function(t){for(var e=[],i=0;i<t.length;i++)for(var n=0;n<this.ignoreSymbolsOnSearch.length;n++)this.ignoreSymbolsOnSearch[n]!==t[i].id&&e.push(t[0]);return e},e.prototype.searchPalette=function(t){var e,i=[],n=document.getElementById("SearchPalette");if(n)for(var r=n.children.length-1;r>=0;r--)n.removeChild(n.children[r]);for(var o=0;o<this.palettes.length;o++)for(var s=this.palettes[o],a=0;a<s.symbols.length;a++){var l=s.symbols[a];""!==t&&-1!==l.id.toLowerCase().indexOf(t.toLowerCase())&&i.push(l)}var h=Lb(this.filterSymbols);if(h&&(i=h(i)||[]),this.ignoreSymbolsOnSearch&&this.ignoreSymbolsOnSearch.length>0&&(i=this.getFilterSymbol(i)),n||(n=e=this.createSearchPalette(e)),i.length>0)for(var c=0,d=i;c<d.length;c++){var p=d[c];this.getSymbolContainer(p,n)}else if(""!==t){var u=Jv("div",{id:"EmptyDiv",style:"text-align:center;font-style:italic"});u.innerHTML="No Items To Display",n.appendChild(u)}else{document.getElementById("iconSearch").className="e-input-group-icon e-search e-icons",this.accordionElement.removeItem(0);var f=document.getElementById("SearchPalette");f&&f.remove()}},e.prototype.createSearchPalette=function(t){t=Jv("div",{id:"SearchPalette",style:"display:none;overflow:auto;"}),this.element.appendChild(t);return this.accordionElement.addItem({header:"Search Results",expanded:!0,content:"#SearchPalette"},0),t},e.prototype.wireEvents=function(){var t=te.touchStartEvent,e=te.touchEndEvent,i=te.touchMoveEvent;ee.add(this.element,t,this.mouseDown,this),ee.add(this.element,i,this.mouseMove,this),ee.add(this.element,e,this.mouseUp,this),ee.add(this.element,"keyup",this.keyUp,this),ee.add(document,"keydown",this.keyDown,this),this.initDraggable()},e.prototype.unWireEvents=function(){var t=te.touchStartEvent,e=te.touchEndEvent,i=te.touchMoveEvent;te.isPointer;ee.remove(this.element,t,this.mouseDown),ee.remove(this.element,i,this.mouseMove),ee.remove(this.element,e,this.mouseUp),ee.remove(this.element,"keyup",this.keyUp),ee.remove(document,"keydown",this.keyDown)},$S([Hi("S")],e.prototype,"accessKey",void 0),$S([Hi("100%")],e.prototype,"width",void 0),$S([Hi("100%")],e.prototype,"height",void 0),$S([Fi([],ex)],e.prototype,"palettes",void 0),$S([Hi()],e.prototype,"getSymbolInfo",void 0),$S([Hi({fit:!0})],e.prototype,"symbolInfo",void 0),$S([Hi()],e.prototype,"filterSymbols",void 0),$S([Hi()],e.prototype,"ignoreSymbolsOnSearch",void 0),$S([Hi()],e.prototype,"getSymbolTemplate",void 0),$S([Hi()],e.prototype,"symbolWidth",void 0),$S([Hi()],e.prototype,"symbolHeight",void 0),$S([_i({left:10,right:10,top:10,bottom:10},Np)],e.prototype,"symbolMargin",void 0),$S([Hi(!0)],e.prototype,"allowDrag",void 0),$S([_i({},nx)],e.prototype,"symbolPreview",void 0),$S([_i({},ix)],e.prototype,"symbolDragSize",void 0),$S([Hi(!1)],e.prototype,"enableSearch",void 0),$S([Hi(!0)],e.prototype,"enableAnimation",void 0),$S([Hi("Multiple")],e.prototype,"expandMode",void 0),$S([Ui()],e.prototype,"paletteSelectionChange",void 0),$S([Hi()],e.prototype,"getNodeDefaults",void 0),$S([Hi()],e.prototype,"nodeDefaults",void 0),$S([Hi()],e.prototype,"getConnectorDefaults",void 0),$S([Hi()],e.prototype,"connectorDefaults",void 0),e}(un),ox=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sx=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},ax=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.mode="Canvas",n.id="overview",n.actionName="",n.startPoint=null,n.currentPoint=null,n.prevPoint=null,n.scale=null,n.inAction=!1,n.viewPortRatio=1,n.horizontalOffset=0,n.verticalOffset=0,n.model={},n.event=!0,n.overviewid=88123,n.model={width:n.width,height:n.height},n}return ox(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"sourceID":this.setParent(t.sourceID);break;case"width":case"height":this.renderCanvas(),this.setParent(this.sourceID)}}},e.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},e.prototype.preRender=function(){if(""===this.element.id){var t=document.getElementsByClassName("e-overview").length;this.element.id="overview_"+this.overviewid+"_"+t}this.element.style.background="transparent",this.unWireEvents(),this.wireEvents()},e.prototype.render=function(){this.diagramRenderer=new Ab(this.element.id,new Tb,!1),this.renderCanvas(),this.setParent(this.sourceID),this.renderComplete()},e.prototype.getSizeValue=function(t){return t.toString().indexOf("px")>0||t.toString().indexOf("%")>0?t.toString():t.toString()+"px"},e.prototype.renderCanvas=function(t){var e=document.getElementById(this.element.id+"_canvas");e||(e=Jv("div",{}),this.element.appendChild(e)),sb(e,{id:this.element.id+"_canvas",class:"drawing",style:"position:relative; margin-top:6px; height:"+this.getSizeValue(this.model.height)+"; width:"+this.getSizeValue(this.model.width)+";style:-ms-touch-action: none;touch-action: none;"}),this.element.setAttribute("tabindex",String(0)),this.element.style.overflow="hidden",this.element.style.height=String(this.model.height),this.element.style.width=String(this.model.width),this.canvas=e},e.prototype.setParent=function(t){var e=document.getElementById(t);if(this.parent){var i=this.parent;this.parent=null,i.setOverview(null,this.element.id),this.removeDocument(this)}this.parent=this.getDiagram(e,"ej2_instances"),this.parent&&this.parent.setOverview(this)},e.prototype.getDiagram=function(t,e){for(var i,n=t[e].length,r=0;r<n;r++)if(tb(t[e][r].element,"e-diagram")){i=t[e][r];break}return i},e.prototype.unWireEvents=function(){var t=te.touchStartEvent,e=te.touchMoveEvent,i=te.isPointer?"pointerleave":"mouseleave",n=te.isPointer,r=(te.info.name,te.touchEndEvent);ee.remove(this.element,t,this.mouseDown),ee.remove(this.element,e,this.mouseMove),ee.remove(this.element,r,this.mouseUp),ee.remove(this.element,i,this.documentMouseUp),ee.remove(window,"resize",this.windowResize);var o=document.getElementById(this.sourceID+"content");o&&ee.remove(o,"scroll",this.scrolled)},e.prototype.wireEvents=function(){var t=te.touchStartEvent,e=te.touchEndEvent,i=te.touchMoveEvent,n=te.isPointer?"pointerleave":"mouseleave",r=te.isPointer;te.info.name;ee.add(this.element,t,this.mouseDown,this),ee.add(this.element,i,this.mouseMove,this),ee.add(this.element,e,this.mouseUp,this),ee.add(this.element,n,this.documentMouseUp,this),ee.add(window,"resize",this.windowResize,this);var o=document.getElementById(this.sourceID+"content");o&&ee.add(o,"scroll",this.scrolled,this)},e.prototype.renderDocument=function(t){t.canvas=this.canvas;var e=document.getElementById(this.canvas.id+"_svg");e&&e.parentNode.removeChild(e);var i=Qv("svg",{id:this.canvas.id+"_svg",version:"1.1",xlink:"http://www.w3.org/1999/xlink",class:"overview_svg"});this.svg=i,t.svg=i,t.canvas.appendChild(i);var n,r=document.getElementById(this.element.id),o=r.clientWidth,s=r.clientHeight,a=r.getBoundingClientRect(),l=window.screenX<0?-1*window.screenX:window.screenX,h=window.screenY<0?-1*window.screenY:window.screenY;if(0===o){var c=Math.floor(window.innerWidth-l-Math.floor(a.left));o=c>0?c:Math.floor(window.innerWidth)}if(0===s){var d=Math.floor(window.innerHeight-h-Math.floor(a.top));s=d>0?d:Math.floor(window.innerHeight)}if(o>0&&(i.setAttribute("width",String(o)),this.model.height=s),s>0&&(i.setAttribute("height",String(s)),this.model.width=o),!t.diagramLayerDiv){t.diagramLayerDiv=Jv("div",{});document.getElementById(this.element.id);t.diagramLayer=Ib.createCanvas(this.element.id+"_diagramLayer",this.model.width,this.model.height),t.diagramLayer.setAttribute("style","position:absolute; left:0px;  top:0px "),t.diagramLayerDiv.appendChild(t.diagramLayer),t.canvas.appendChild(t.diagramLayerDiv)}n={id:this.element.id+"_diagramLayer_div",style:"width:"+this.model.width+"px; height:"+this.model.height+"px;position:absolute;top:0px;left:0px"},sb(t.diagramLayerDiv,n),this.renderHtmlLayer(t.canvas),this.renderNativeLayer(t.canvas,t),this.addOverviewRectPanel(t)},e.prototype.removeDocument=function(t){var e=document.getElementById(this.canvas.id+"_svg");this.canvas.removeChild(e);var i=document.getElementById(this.element.id+"_htmlLayer");this.canvas.removeChild(i);var n=document.getElementById(this.element.id+"_diagramLayer_div");this.canvas.removeChild(n),t.diagramLayerDiv=null,t.diagramLayer=null},e.prototype.renderHtmlLayer=function(t){var e=Jv("div",{id:this.element.id+"_htmlLayer",class:"e-html-layer",style:"pointer-events:none;position:absolute;top:0px;left:0px;"}),i=Jv("div",{id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;"});return e.appendChild(i),t.appendChild(e),e},e.prototype.renderNativeLayer=function(t,e){if(!document.getElementById(this.element.id+"_nativeLayer_svg")){var i=this.parent.createSvg(this.element.id+"_nativeLayer_svg",this.model.width,this.model.height),n=Qv("g",{id:this.element.id+"_nativeLayer"});i.appendChild(n),e.diagramLayerDiv.appendChild(i),rb(i,{class:"e-native-layer"})}},e.prototype.addOverviewRectPanel=function(t){var e=document.getElementById(this.canvas.id+"_overviewsvg");e&&e.parentNode.removeChild(e),e=Qv("svg",{id:this.canvas.id+"_overviewsvg",class:"overviewsvg",version:"1.1",xlink:"http://www.w3.org/1999/xlink",style:"position:absolute;left:0px;top:0px; aria-label:Specifies overview",width:this.model.width,height:this.model.height}),t.canvas.appendChild(e);var i=Qv("g",{id:this.element.id+"_overviewlayer",style:"pointer-events:none"});e.appendChild(i);var n=Qv("rect",{fill:"transparent",width:"100%",height:"100%",class:"overviewbackrect",id:this.canvas.id+"overviewbackrect"});n.setAttribute("style"," pointer-events: none; "),i.appendChild(n);var r=Qv("g",{id:this.canvas.id+"overviewhandle",style:"pointer-events:all"});i.appendChild(r);var o=Qv("rect",{id:this.canvas.id+"overviewrect",fill:"transparent"});r.appendChild(o),this.renderOverviewCorner("left",r),this.renderOverviewCorner("right",r),this.renderOverviewCorner("top",r),this.renderOverviewCorner("bottom",r),this.renderOverviewCorner("topleft",r),this.renderOverviewCorner("topright",r),this.renderOverviewCorner("bottomleft",r),this.renderOverviewCorner("bottomright",r)},e.prototype.renderOverviewCorner=function(t,e){this.svg;var i,n=Qv(i="top"===t||"bottom"===t||"right"===t||"left"===t?"rect":"circle",{id:this.canvas.id+"visible"+t});e.appendChild(n);var r=Qv(i,{id:this.canvas.id+t,class:"overviewresizer",fill:"transparent"});e.appendChild(r)},e.prototype.updateOverviewRectangle=function(){var t=this.currentPoint.x-this.prevPoint.x,e=this.currentPoint.y-this.prevPoint.y,i=new Wd;i.width=0,i.height=0;var n=0,r=0;switch(this.resizeDirection){case"left":i.width-=t,i.height-=t/this.viewPortRatio,n=t,r=t/this.viewPortRatio,r/=2;break;case"right":i.width+=t,i.height+=t/this.viewPortRatio,r=t/this.viewPortRatio,r/=-2;break;case"top":i.height-=e,i.width-=e*this.viewPortRatio,r=e,n=e*this.viewPortRatio,n/=2;break;case"bottom":i.height+=e,i.width+=e*this.viewPortRatio,n=e*this.viewPortRatio,n/=-2;break;case"topleft":Math.abs(e)>Math.abs(t)?t=e*this.viewPortRatio:e=t/this.viewPortRatio,i.width-=t,i.height-=e,n=t,r=e;break;case"topright":Math.abs(e)>Math.abs(t)?t=-e*this.viewPortRatio:e=-t/this.viewPortRatio,r=e,i.width+=t,i.height-=e;break;case"bottomleft":Math.abs(e)>Math.abs(t)?t=-e*this.viewPortRatio:e=-t/this.viewPortRatio,n=t,i.width-=t,i.height+=e;break;case"bottomright":Math.abs(e)>Math.abs(t)?t=e*this.viewPortRatio:e=t/this.viewPortRatio,i.width+=t,i.height+=e}this.updateHelper(n,r,i,void 0,void 0)},e.prototype.updateHelper=function(t,e,i,n,r){var o,s,a,l=this.element.getElementsByTagName("svg")[2].getElementById("helper");if(i)o=(a=l.getBBox()).x+t,s=a.y+e,n=a.width+i.width,r=a.height+i.height;else{var h,c;h=this.currentPoint.x>this.startPoint.x?this.currentPoint.x-this.prevPoint.x:this.prevPoint.x-this.currentPoint.x,c=this.currentPoint.y>this.startPoint.y?this.currentPoint.y-this.prevPoint.y:this.prevPoint.y-this.currentPoint.y;Math.abs(c)>Math.abs(h)?(h=this.viewPortRatio*c,!0,!1):(c=h/this.viewPortRatio,!0,!1),a=l.getBBox(),o=this.startPoint.x>this.currentPoint.x?a.x-h:a.x,s=this.startPoint.y>this.currentPoint.y?a.y-c:a.y,n=a.width+h,r=a.height+c}rb(this.helper,{id:this.helper.id,x:o,y:s,width:Math.max(0,n),height:Math.max(0,r)})},e.prototype.updateOverviewrect=function(t,e,i,n){sb(document.getElementById(this.canvas.id+"overviewrect"),{x:t,y:e,width:Math.max(1,i),height:Math.max(1,n)}),this.updateOverviewCorner("top",t+8,e+1,Math.max(0,i-16),2),this.updateOverviewCorner("bottom",t+8,e+n+3,Math.max(0,i-16),2),this.updateOverviewCorner("left",t-2,e+11,2,Math.max(0,n-16)),this.updateOverviewCorner("right",t+i,e+11,2,Math.max(0,n-16)),this.updateOverviewCorner("topleft",t,e+3,5,5),this.updateOverviewCorner("topright",t+i,e+3,5,5),this.updateOverviewCorner("bottomleft",t,e+n+3,5,5),this.updateOverviewCorner("bottomright",t+i,e+n+3,5,5)},e.prototype.updateOverviewCorner=function(t,e,i,n,r){var o,s,a="visible"+t;"top"===t||"bottom"===t||"right"===t||"left"===t?(o={x:e,y:i,width:n,height:r,fill:"#ED1C24"},s={x:e-2,y:i-2,width:2===n?4:n,height:2===r?4:r}):(o={cx:e,cy:i,r:4,fill:"#ED1C24"},s={cx:e,cy:i,r:6,fill:"transparent"}),sb(document.getElementById(this.canvas.id+a),o),sb(document.getElementById(this.canvas.id+t),s)},e.prototype.translateOverviewRectangle=function(){var t=Number(this.model.width),e=Number(this.model.height),i=this.currentPoint.x-this.prevPoint.x,n=this.currentPoint.y-this.prevPoint.y,r=(Math.min(this.parent.scroller.viewPortWidth/t,this.parent.scroller.viewPortHeight/e),this.element.getElementsByClassName("overviewsvg")[0].getElementById(this.canvas.id+"overviewrect").getBBox()),o=r.x+i,s=r.y+n,a=r.width,l=r.height;this.updateOverviewrect(o,s,a,l),this.updateParentView(this.parent.scroller.currentZoom,o,s,a,l,null)},e.prototype.renderOverviewRect=function(t,e,i,n){var r=Number(this.model.width),o=Number(this.model.height),s=i/r*this.contentWidth,a=n/o*this.contentHeight,l=Math.max(this.parent.scroller.viewPortWidth/s,this.parent.scroller.viewPortHeight/a);if(l>=.25&&l<=30){this.updateParentView(l,t,e,i,n,{x:0,y:0});var h=this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom,!0);if(this.helper){var c=this.element.getElementsByTagName("rect")[10].getBBox();h.x=c.x,h.y=c.y}this.updateOverviewrect(h.x,h.y,h.width,h.height)}},e.prototype.scrollOverviewRect=function(t,e,i,n){if(!this.actionName||n){var r=Number(this.model.width),o=Number(this.model.height),s=Math.min(this.contentWidth/r,this.contentHeight/o),a=new np,l=a.x=t/i/s,h=a.y=e/i/s,c=a.width=this.parent.scroller.viewPortWidth/i/s,d=a.height=this.parent.scroller.viewPortHeight/i/s;this.parent.scroller.viewPortWidth,this.parent.scroller.viewPortHeight;if(n){var p=new np;return p.x=l,p.y=h,p.width=c,p.height=d,p}this.updateOverviewrect(-l,-h,c,d)}return null},e.prototype.updateParentView=function(t,e,i,n,r,o){var s,a,l=Number(this.model.width),h=Number(this.model.height),c=e*(this.contentWidth/l)*t,d=i*(this.contentHeight/h)*t;this.parent.scroller.getPageBounds();1===t&&"pan"!==this.actionName||(s=-c-this.parent.scroller.horizontalOffset,a=-d-this.parent.scroller.verticalOffset),"scale"===this.actionName||"draw"===this.actionName?this.parent.scroller.zoom(t/this.parent.scroller.currentZoom,s,a,o):this.parent.pan(s,a,o)},e.prototype.updateHtmlLayer=function(t){var e=Kv(t.element.id),i=this.parent.scroller.getPageBounds(!0),n=i.width,r=i.height,o=Math.max(n,this.parent.scroller.viewPortWidth),s=Math.max(r,this.parent.scroller.viewPortHeight),a=Math.min(Number(this.model.width)/o,Number(this.model.height)/s);e.style.transform="scale("+a+") translate("+this.parent.scroller.transform.tx+"px,"+this.parent.scroller.transform.ty+"px)"},e.prototype.updateView=function(t){var e,i,n=this.parent.scroller.getPageBounds(),r=this.parent.scroller.viewPortWidth/this.parent.scroller.currentZoom,o=this.parent.scroller.viewPortHeight/this.parent.scroller.currentZoom,s=0,a=0;this.parent.scroller.currentZoom<1&&r>n.width&&o>n.height&&(s=(r-n.width)/2,a=(o-n.height)/2),e=n.width,i=n.height;var l,h=Number(this.model.width),c=Number(this.model.height),d=Math.max(e,this.parent.scroller.viewPortWidth),p=Math.max(i,this.parent.scroller.viewPortHeight);this.contentWidth=d=Math.max(d,h/c*p),this.contentHeight=p=Math.max(p,c/h*d),l=Math.min(h/d,c/p);var u=document.getElementById(this.element.id+"_htmlLayer");u.style.webkitTransform="scale("+l+") translate("+-n.x+"px,"+-n.y+"px)",u.style.transform="scale("+l+") translate("+(-n.x+s)+"px,"+(-n.y+a)+"px)",document.getElementById(this.element.id+"_overviewlayer").setAttribute("transform","translate("+-n.x*l+","+-n.y*l+")"),this.horizontalOffset=n.x*l,this.verticalOffset=n.y*l;var f=document.getElementById(this.element.id+"_diagramLayer"),g=Zv(this.element.id),m=f.getContext("2d"),y=Number(this.model.width)/this.contentWidth,v=Number(this.model.height)/this.contentHeight;y=Math.min(y,v),g.setAttribute("transform","translate(0,0),scale("+y+")"),m.setTransform(y,0,0,y,0,0),m.fillStyle="red",this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom)},e.prototype.scrolled=function(t){if(this.event){var e=this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom,!0);this.updateOverviewrect(-e.x,-e.y,e.width,e.height)}},e.prototype.updateCursor=function(t){if(tb(t.target,"overviewresizer"))switch(t.target.id){case this.canvas.id+"left":this.canvas.style.cursor="w-resize";break;case this.canvas.id+"right":this.canvas.style.cursor="e-resize";break;case this.canvas.id+"top":this.canvas.style.cursor="n-resize";break;case this.canvas.id+"bottom":this.canvas.style.cursor="s-resize";break;case this.canvas.id+"topleft":this.canvas.style.cursor="nw-resize";break;case this.canvas.id+"topright":this.canvas.style.cursor="ne-resize";break;case this.canvas.id+"bottomleft":this.canvas.style.cursor="sw-resize";break;case this.canvas.id+"bottomright":this.canvas.style.cursor="se-resize"}else this.canvas.style.cursor="default"},e.prototype.mouseMove=function(t){if(this.event=!1,this.updateCursor(t),this.currentPoint=this.mousePosition(t),this.actionName)switch(this.actionName){case"draw":this.inAction||this.startPoint.x===this.currentPoint.x&&this.startPoint.y===this.currentPoint.y||(this.initHelper(),this.inAction=!0),this.inAction&&this.updateHelper();break;case"scale":this.inAction||(this.initHelper(),this.inAction=!0),this.updateOverviewRectangle();break;case"pan":(this.startPoint.x!==this.currentPoint.x||this.startPoint.y===this.currentPoint.y||this.inAction)&&(this.inAction=!0,this.translateOverviewRectangle())}this.prevPoint=this.currentPoint},e.prototype.documentMouseUp=function(t){this.inAction=!1,this.actionName="",this.helper&&(this.helper.parentNode.removeChild(this.helper),this.helper=null),this.event=!0,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="all"},e.prototype.windowResize=function(t){var e=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){var t=document.getElementById(e.element.id).getBoundingClientRect();e.model.width=t.width>0?t.width:e.model.width,e.model.height=t.height>0?t.height:e.model.height,e.renderCanvas(),e.setParent(e.sourceID)},10),!1},e.prototype.mouseDown=function(t){if(t.target.id===this.canvas.id+"_overviewsvg"&&(this.actionName="draw"),t.target.id===this.canvas.id+"overviewrect"&&(this.actionName="pan"),tb(t.target,"overviewresizer"))switch(this.actionName="scale",t.target.id){case this.canvas.id+"left":this.resizeDirection="left";break;case this.canvas.id+"right":this.resizeDirection="right";break;case this.canvas.id+"top":this.resizeDirection="top";break;case this.canvas.id+"bottom":this.resizeDirection="bottom";break;case this.canvas.id+"topleft":this.resizeDirection="topleft";break;case this.canvas.id+"topright":this.resizeDirection="topright";break;case this.canvas.id+"bottomleft":this.resizeDirection="bottomleft";break;case this.canvas.id+"bottomright":this.resizeDirection="bottomright"}this.startPoint=this.prevPoint=this.mousePosition(t),this.viewPortRatio=this.parent.scroller.viewPortWidth/this.parent.scroller.viewPortHeight,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="none"},e.prototype.mouseUp=function(t){this.currentPoint=this.mousePosition(t);Number(this.model.width),Number(this.model.height);if(this.actionName)if(this.startPoint.x!==this.currentPoint.x||this.startPoint.y!==this.currentPoint.y){if("pan"===this.actionName);else if(this.helper){var e=this.element.getElementsByTagName("rect")[10].getBBox();this.resizeDirection=this.resizeDirection||"";var i=e.x,n=e.y,r=e.width,o=e.height;"topleft"===this.resizeDirection||"topright"===this.resizeDirection||"bottomleft"===this.resizeDirection||this.resizeDirection;this.renderOverviewRect(i,n,r,o)}}else if(t.target.id===this.canvas.id+"_overviewsvg"||"helper"===t.target.id){r=(e=this.element.getElementsByTagName("svg")[2].getElementById(this.canvas.id+"overviewrect").getBBox()).width,o=e.height;this.inAction=!0,this.actionName="pan",this.renderOverviewRect(this.currentPoint.x-r/2,this.currentPoint.y-o/2,r,o),this.inAction=!1}this.helper&&(this.helper.parentNode.removeChild(this.helper),this.helper=null),this.actionName="",this.startPoint=null,this.currentPoint=null,this.prevPoint=null,this.helper=null,this.viewPortRatio=1,this.resizeDirection="",this.inAction=!1,this.event=!0,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="all"},e.prototype.initHelper=function(){var t=this.element.getElementsByTagName("svg")[2],e=(this.parent.scroller.currentZoom,this.startPoint.x),i=this.startPoint.y,n=1,r=1;if("scale"===this.actionName){var o=t.getElementById(this.canvas.id+"overviewrect").getBBox();e=o.x,i=o.y,n=o.width,r=o.height}var s=Qv("rect",{id:"helper",x:e,y:i,width:n,height:r,fill:"transparent",stroke:"gray","stroke-dasharray":"2 2","shape-rendering":"crispEdges"});t.getElementById(this.element.id+"_overviewlayer").appendChild(s),this.helper=s},e.prototype.mousePosition=function(t){var e,i,n;if(-1!==t.type.indexOf("touch")){var r=(e=t).changedTouches[0].clientX,o=e.changedTouches[0].clientY;i=r-this.element.offsetLeft,n=o-this.element.offsetTop}else i=t.clientX,n=t.clientY;var s=this.element.getBoundingClientRect();return i-=s.left,n-=s.top,{x:i+this.horizontalOffset,y:n+this.verticalOffset}},e.prototype.destroy=function(){if(this.unWireEvents(),this.notify("destroy",{}),t.prototype.destroy.call(this),document.getElementById(this.element.id)){this.element.classList.remove("e-overview");var e=document.getElementById(this.element.id+"_canvas");e&&this.element.removeChild(e)}this.parent.views.splice(this.parent.views.indexOf(this.element.id),1),this.diagramLayerDiv=null,this.canvas=null,this.parent=null},e.prototype.getModuleName=function(){return"Overview"},sx([Hi("100%")],e.prototype,"width",void 0),sx([Hi("100%")],e.prototype,"height",void 0),sx([Hi("")],e.prototype,"sourceID",void 0),sx([Ui()],e.prototype,"created",void 0),e}(un),lx={},hx={},cx={},dx={},px={};iS.Inject(_S,VS,FS,YS,rS,zS,nS,PS,US,RS,jS,NS,CS,HS,Bw),Object(I.copy)(lx,{Diagram:iS,HierarchicalTree:_S,MindMap:VS,RadialTree:FS,ComplexHierarchicalTree:YS,DataBinding:rS,Snapping:zS,PrintAndExport:nS,BpmnDiagrams:PS,SymmetricLayout:US,ConnectorBridging:RS,UndoRedo:jS,LayoutAnimation:NS,DiagramContextMenu:CS,LineRouting:HS,ConnectorEditing:Bw}),Object(I.copy)(lx,C),Object(I.copy)(hx,n),Object(I.copy)(cx,m),Object(I.copy)(dx,x),Object(I.copy)(dx,r),Object(I.copy)(px,l);var ux,fx={},gx={},mx={},yx={};mc.Inject(yc),Object(I.copy)(fx,{ListView:mc,Virtualization:yc}),Object(I.copy)(gx,n),Object(I.copy)(mx,s),Object(I.copy)(yx,m),function(t){t.axisLabelFont={size:"12px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},t.axisTitleFont={size:"14px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},t.chartTitleFont={size:"15px",fontWeight:"500",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},t.chartSubTitleFont={size:"11px",fontWeight:"500",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},t.crosshairLabelFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},t.tooltipLabelFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},t.legendLabelFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},t.stripLineLabelFont={size:"12px",fontWeight:"Regular",color:"#353535",fontStyle:"Normal",fontFamily:"Segoe UI"},t.stockEventFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"}}(ux||(ux={}));!function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}();var vx=function(){function t(t){this.svgLink="http://www.w3.org/2000/svg",this.rootId=t}return t.prototype.getOptionValue=function(t,e){return t[e]},t.prototype.createSvg=function(t){return F(t.id)&&(t.id=this.rootId+"_svg"),this.svgObj=document.getElementById(t.id),F(document.getElementById(t.id))&&(this.svgObj=document.createElementNS(this.svgLink,"svg")),this.svgObj=this.setElementAttributes(t,this.svgObj),this.setSVGSize(t.width,t.height),this.svgObj},t.prototype.setSVGSize=function(t,e){var i=document.getElementById(this.rootId),n=F(i)?null:i.getBoundingClientRect();F(this.width)||this.width<=0?this.svgObj.setAttribute("width",t?t.toString():n.width.toString()):this.svgObj.setAttribute("width",this.width.toString()),F(this.height)||this.height<=0?this.svgObj.setAttribute("height",e?e.toString():"450"):this.svgObj.setAttribute("height",this.height.toString())},t.prototype.drawPath=function(t,e){var i=document.getElementById(t.id);return null===i&&(i=document.createElementNS(this.svgLink,"path")),i=this.setElementAttributes(t,i)},t.prototype.drawLine=function(t){var e=document.getElementById(t.id);return null===e&&(e=document.createElementNS(this.svgLink,"line")),e=this.setElementAttributes(t,e)},t.prototype.drawRectangle=function(t,e){var i=document.getElementById(t.id);return null===i&&(i=document.createElementNS(this.svgLink,"rect")),i=this.setElementAttributes(t,i)},t.prototype.drawCircle=function(t){var e=document.getElementById(t.id);return null===e&&(e=document.createElementNS(this.svgLink,"circle")),e=this.setElementAttributes(t,e)},t.prototype.drawPolyline=function(t){var e=document.getElementById(t.id);return null===e&&(e=document.createElementNS(this.svgLink,"polyline")),e=this.setElementAttributes(t,e)},t.prototype.drawEllipse=function(t){var e=document.getElementById(t.id);return null===e&&(e=document.createElementNS(this.svgLink,"ellipse")),e=this.setElementAttributes(t,e)},t.prototype.drawPolygon=function(t){var e=document.getElementById(t.id);return null===e&&(e=document.createElementNS(this.svgLink,"polygon")),e=this.setElementAttributes(t,e)},t.prototype.drawImage=function(t){var e=document.createElementNS(this.svgLink,"image");return e.setAttributeNS(null,"height",t.height.toString()),e.setAttributeNS(null,"width",t.width.toString()),e.setAttributeNS("http://www.w3.org/1999/xlink","href",t.href),e.setAttributeNS(null,"x",t.x.toString()),e.setAttributeNS(null,"y",t.y.toString()),e.setAttributeNS(null,"id",t.id),e.setAttributeNS(null,"visibility",t.visibility),F(this.getOptionValue(t,"clip-path"))||e.setAttributeNS(null,"clip-path",this.getOptionValue(t,"clip-path")),F(t.preserveAspectRatio)||e.setAttributeNS(null,"preserveAspectRatio",t.preserveAspectRatio),e},t.prototype.createText=function(t,e,i,n,r,o){var s=document.createElementNS(this.svgLink,"text");return s=this.setElementAttributes(t,s),F(e)||(s.textContent=e),s},t.prototype.createTSpan=function(t,e){var i=document.createElementNS(this.svgLink,"tspan");return i=this.setElementAttributes(t,i),F(e)||(i.textContent=e),i},t.prototype.createTitle=function(t){var e=document.createElementNS(this.svgLink,"title");return e.textContent=t,e},t.prototype.createDefs=function(){return document.createElementNS(this.svgLink,"defs")},t.prototype.createClipPath=function(t){var e=document.createElementNS(this.svgLink,"clipPath");return e=this.setElementAttributes(t,e)},t.prototype.createForeignObject=function(t){var e=document.createElementNS(this.svgLink,"foreignObject");return e=this.setElementAttributes(t,e)},t.prototype.createGroup=function(t){var e=document.createElementNS(this.svgLink,"g");return e=this.setElementAttributes(t,e)},t.prototype.createPattern=function(t,e){var i=document.createElementNS(this.svgLink,e);return i=this.setElementAttributes(t,i)},t.prototype.createRadialGradient=function(t,e,i){var n;if(F(t[0].colorStop))n=t[0].color.toString();else{var r={id:this.rootId+"_"+e+"radialGradient",cx:i.cx+"%",cy:i.cy+"%",r:i.r+"%",fx:i.fx+"%",fy:i.fy+"%"};this.drawGradient("radialGradient",r,t),n="url(#"+this.rootId+"_"+e+"radialGradient)"}return n},t.prototype.createLinearGradient=function(t,e,i){var n;if(F(t[0].colorStop))n=t[0].color.toString();else{var r={id:this.rootId+"_"+e+"linearGradient",x1:i.x1+"%",y1:i.y1+"%",x2:i.x2+"%",y2:i.y2+"%"};this.drawGradient("linearGradient",r,t),n="url(#"+this.rootId+"_"+e+"linearGradient)"}return n},t.prototype.drawGradient=function(t,e,i){var n=this.createDefs(),r=document.createElementNS(this.svgLink,t);r=this.setElementAttributes(e,r);for(var o=0;o<i.length;o++){var s=document.createElementNS(this.svgLink,"stop");s.setAttribute("offset",i[o].colorStop),s.setAttribute("stop-color",i[o].color),s.setAttribute("stop-opacity",i[o].opacity?i[o].opacity:"1"),F(i[o].style)||s.setAttribute("style",i[o].style),r.appendChild(s)}return n.appendChild(r),n},t.prototype.drawClipPath=function(t){var e=this.createDefs(),i=this.createClipPath({id:t.id});t.id=t.id+"_Rect";var n=this.drawRectangle(t);return i.appendChild(n),e.appendChild(i),e},t.prototype.drawCircularClipPath=function(t){var e=this.createDefs(),i=this.createClipPath({id:t.id});t.id=t.id+"_Circle";var n=this.drawCircle(t);return i.appendChild(n),e.appendChild(i),e},t.prototype.setElementAttributes=function(t,e){for(var i=Object.keys(t),n=0;n<i.length;n++)e.setAttribute(i[n],t[i[n]]);return e},t.prototype.createCanvas=function(t){return null},t}(),bx=function(){function t(t){this.rootId=t}return t.prototype.getOptionValue=function(t,e){return t[e]},t.prototype.createCanvas=function(t){var e=document.createElement("canvas");return e.setAttribute("id",this.rootId+"_canvas"),this.ctx=e.getContext("2d"),this.canvasObj=e,this.setCanvasSize(t.width,t.height),this.canvasObj},t.prototype.setCanvasSize=function(t,e){var i=document.getElementById(this.rootId),n=F(i)?null:i.getBoundingClientRect();F(this.width)?this.canvasObj.setAttribute("width",t?t.toString():n.width.toString()):this.canvasObj.setAttribute("width",this.width.toString()),F(this.height)?this.canvasObj.setAttribute("height",e?e.toString():"450"):this.canvasObj.setAttribute("height",this.height.toString())},t.prototype.setAttributes=function(t){this.ctx.lineWidth=this.getOptionValue(t,"stroke-width");var e=this.getOptionValue(t,"stroke-dasharray");if(!F(e)){var i=e.split(",");this.ctx.setLineDash([parseInt(i[0],10),parseInt(i[1],10)])}this.ctx.strokeStyle=this.getOptionValue(t,"stroke")},t.prototype.drawLine=function(t){this.ctx.save(),this.ctx.beginPath(),this.ctx.lineWidth=this.getOptionValue(t,"stroke-width"),this.ctx.strokeStyle=t.stroke,this.ctx.moveTo(t.x1,t.y1),this.ctx.lineTo(t.x2,t.y2),this.ctx.stroke(),this.ctx.restore()},t.prototype.drawRectangle=function(t,e){var i=this.ctx,n=t.rx;return this.ctx.save(),this.ctx.beginPath(),e&&this.ctx.translate(e[0],e[1]),this.ctx.globalAlpha=this.getOptionValue(t,"opacity"),this.setAttributes(t),this.ctx.rect(t.x,t.y,t.width,t.height),null!==n&&n>=0?this.drawCornerRadius(t):("none"===t.fill&&(t.fill="transparent"),this.ctx.fillStyle=t.fill,this.ctx.fillRect(t.x,t.y,t.width,t.height),this.ctx.stroke()),this.ctx.restore(),this.ctx=i,this.canvasObj},t.prototype.drawCornerRadius=function(t){var e=t.rx,i=t.x,n=t.y,r=t.width,o=t.height;"none"===t.fill&&(t.fill="transparent"),this.ctx.fillStyle=t.fill,r<2*e&&(e=r/2),o<2*e&&(e=o/2),this.ctx.beginPath(),this.ctx.moveTo(i+r-e,n),this.ctx.arcTo(i+r,n,i+r,n+o,e),this.ctx.arcTo(i+r,n+o,i,n+o,e),this.ctx.arcTo(i,n+o,i,n,e),this.ctx.arcTo(i,n,i+r,n,e),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke()},t.prototype.drawPath=function(t,e){var i=t.d.split(" "),n=this.getOptionValue(t,"stroke-width"),r=this.ctx,o=!0;this.ctx.save(),this.ctx.beginPath(),e&&this.ctx.translate(e[0],e[1]),this.ctx.globalAlpha=t.opacity?t.opacity:this.getOptionValue(t,"fill-opacity"),this.setAttributes(t);for(var s=0;s<i.length;s+=3){var a=parseFloat(i[s+1]),l=parseFloat(i[s+2]);switch(i[s]){case"M":t.innerR||t.cx||this.ctx.moveTo(a,l);break;case"L":t.innerR||this.ctx.lineTo(a,l);break;case"Q":var h=parseFloat(i[s+3]),c=parseFloat(i[s+4]);this.ctx.quadraticCurveTo(a,l,h,c),s+=2;break;case"C":var d=parseFloat(i[s+3]),p=parseFloat(i[s+4]),u=parseFloat(i[s+5]),f=parseFloat(i[s+6]);this.ctx.bezierCurveTo(a,l,d,p,u,f),s+=4;break;case"A":t.innerR?o&&(this.ctx.arc(t.x,t.y,t.radius,t.start,t.end,t.counterClockWise),this.ctx.arc(t.x,t.y,t.innerR,t.end,t.start,!t.counterClockWise),o=!1):t.cx?this.ctx.arc(t.cx,t.cy,t.radius,0,2*Math.PI,t.counterClockWise):(this.ctx.moveTo(t.x,t.y),this.ctx.arc(t.x,t.y,t.radius,t.start,t.end,t.counterClockWise),this.ctx.lineTo(t.x,t.y)),s+=5;break;case"z":case"Z":this.ctx.closePath(),s-=2}}return"none"!==t.fill&&void 0!==t.fill&&(this.ctx.fillStyle=t.fill,this.ctx.fill()),n>0&&this.ctx.stroke(),this.ctx.restore(),this.ctx=r,this.canvasObj},t.prototype.createText=function(t,e,i,n,r,o){var s=this.getOptionValue(t,"font-weight");F(s)||"regular"!==s.toLowerCase()||(s="normal");var a=this.getOptionValue(t,"font-size"),l=this.getOptionValue(t,"font-family"),h=this.getOptionValue(t,"font-style").toLowerCase()+" "+s+" "+a+" "+l,c=this.getOptionValue(t,"text-anchor"),d=void 0!==t.opacity?t.opacity:1;F(t.labelRotation)||t.labelRotation;if("middle"===c&&(c="center"),this.ctx.save(),this.ctx.fillStyle=t.fill,this.ctx.font=h,this.ctx.textAlign=c,this.ctx.globalAlpha=d,t.baseline&&(this.ctx.textBaseline=t.baseline),!o){this.ctx.translate(t.x+0+(i||0),t.y+(n||0)),this.ctx.rotate(t.labelRotation*Math.PI/180)}return this.ctx.fillText(e,o?t.x:0,o?r:0),this.ctx.restore(),this.canvasObj},t.prototype.drawCircle=function(t,e){var i=this.ctx;return this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.cx,t.cy,t.r,0,2*Math.PI),this.ctx.fillStyle=t.fill,this.ctx.globalAlpha=t.opacity,this.ctx.fill(),e&&this.ctx.translate(e[0],e[1]),this.setAttributes(t),this.ctx.stroke(),this.ctx.restore(),this.ctx=i,this.canvasObj},t.prototype.drawPolyline=function(t){this.ctx.save(),this.ctx.beginPath();for(var e=t.points.split(" "),i=0;i<e.length-1;i++){var n=e[i].split(","),r=parseFloat(n[0]),o=parseFloat(n[1]);0===i?this.ctx.moveTo(r,o):this.ctx.lineTo(r,o)}this.ctx.lineWidth=this.getOptionValue(t,"stroke-width"),this.ctx.strokeStyle=t.stroke,this.ctx.stroke(),this.ctx.restore()},t.prototype.drawEllipse=function(t,e){var i=this.ctx,n=Math.max(t.rx,t.ry),r=t.rx/n,o=t.ry/n;this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(t.cx,t.cy),e&&this.ctx.translate(e[0],e[1]),this.ctx.save(),this.ctx.scale(r,o),this.ctx.arc(0,0,n,0,2*Math.PI,!1),this.ctx.fillStyle=t.fill,this.ctx.fill(),this.ctx.restore(),this.ctx.lineWidth=this.getOptionValue(t,"stroke-width"),this.ctx.strokeStyle=t.stroke,this.ctx.stroke(),this.ctx.restore(),this.ctx=i},t.prototype.drawImage=function(t){this.ctx.save();var e=new Image;F(t.href)||(e.src=t.href,this.ctx.drawImage(e,t.x,t.y,t.width,t.height)),this.ctx.restore()},t.prototype.createLinearGradient=function(t){var e;return F(t[0].colorStop)||(e=this.ctx.createLinearGradient(0,0,0,this.canvasObj.height)),this.setGradientValues(t,e)},t.prototype.createRadialGradient=function(t){var e;return F(t[0].colorStop)||(e=this.ctx.createRadialGradient(0,0,0,0,0,this.canvasObj.height)),this.setGradientValues(t,e)},t.prototype.setGradientValues=function(t,e){var i;if(F(t[0].colorStop))i=t[0].color.toString();else{for(var n=0;n<=t.length-1;n++){var r=t[n].color,o=t[n].colorStop.slice(0,-1),s=parseInt(o,10)/100;e.addColorStop(s,r)}i=e.toString()}return i},t.prototype.setElementAttributes=function(t,e){for(var i=Object.keys(t),n=Object.keys(t).map(function(e){return t[e]}),r=0;r<i.length;r++)e.setAttribute(i[r],n[r]);return null},t.prototype.updateCanvasAttributes=function(t){this.setElementAttributes(t,this.canvasObj);var e=this.ctx;if(!F(this.dataUrl)){var i=new Image;i.onload=function(){e.drawImage(i,0,0)},i.src=this.dataUrl}},t.prototype.clearRect=function(t){this.ctx.restore(),this.ctx.clearRect(t.x,t.y,t.width,t.height)},t.prototype.createGroup=function(t){return null},t.prototype.drawClipPath=function(t){return null},t.prototype.canvasClip=function(t){this.ctx.save(),this.ctx.fillStyle="transparent",this.ctx.rect(t.x,t.y,t.width,t.height),this.ctx.fill(),this.ctx.clip()},t.prototype.canvasRestore=function(){this.ctx.restore()},t.prototype.drawPolygon=function(t){return null},t.prototype.createDefs=function(){return null},t.prototype.createClipPath=function(t){return null},t.prototype.createSvg=function(t){return null},t}();function wx(t){var e;switch(t){case"Highcontrast":case"HighContrast":e={tooltipFill:"#ffffff",tooltipBoldLabel:"#000000",tooltipLightLabel:"#000000",tooltipHeaderLine:"#969696"};break;case"MaterialDark":case"FabricDark":case"BootstrapDark":e={tooltipFill:"#F4F4F4",tooltipBoldLabel:"#282727",tooltipLightLabel:"#333232",tooltipHeaderLine:"#9A9A9A"};break;case"Bootstrap4":e={tooltipFill:"rgba(0, 0, 0, 0.9)",tooltipBoldLabel:"rgba(255, 255, 255)",tooltipLightLabel:"rgba(255, 255, 255, 0.9)",tooltipHeaderLine:"rgba(255, 255, 255, 0.2)"};break;default:e={tooltipFill:"rgba(0, 8, 22, 0.75)",tooltipBoldLabel:"#ffffff",tooltipLightLabel:"#dbdbdb",tooltipHeaderLine:"#ffffff"}}return e}var Sx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function xx(t,e){var i=t||"",n=document.getElementById("chartmeasuretext");if(null===n&&(n=$e("text",{id:"chartmeasuretext"}),document.body.appendChild(n)),"string"==typeof t&&(t.indexOf("<")>-1||t.indexOf(">")>-1)){for(var r=t.split(" "),o=0;o<r.length;o++)-1===r[o].indexOf("<br/>")&&(r[o]=r[o].replace(/[<>]/g,"&"));t=r.join(" ")}return n.innerHTML=i.indexOf("<br>")>-1||i.indexOf("<br/>")>-1?i:t,n.style.position="fixed",n.style.fontSize=e.size,n.style.fontWeight=e.fontWeight,n.style.fontStyle=e.fontStyle,n.style.fontFamily=e.fontFamily,n.style.visibility="hidden",n.style.top="-100",n.style.left="0",n.style.whiteSpace="nowrap",n.style.lineHeight="normal",new Px(n.clientWidth,n.clientHeight)}function Cx(t,e,i,n,r,o,s,a,l,h,c){var d="",p=i.x,u=i.y,f=i.x+i.width,g=i.y+i.height;return c=c||0,o?(d=(d=d.concat("M "+p+" "+(u+e)+" Q "+p+" "+u+" "+(p+t)+" "+u+"  L "+(f-t)+" "+u+" Q "+f+" "+u+" "+f+" "+(u+e))).concat(" L "+f+" "+(g-e)+" Q "+f+" "+g+" "+(f-t)+" "+g),0!==r&&(d=(d=d.concat(" L "+(n.x+r/2)+" "+g)).concat(" L "+(l+c)+" "+(g+r-c)),d+=" Q "+l+" "+(g+r)+" "+(l-c)+" "+(g+r-c)),d=n.x-r/2>p?d.concat(" L "+(n.x-r/2)+" "+g+" L "+(p+t)+" "+g+" Q "+p+" "+g+" "+p+" "+(g-e)+" z"):0===r?d.concat(" L "+(p+t)+" "+g+" Q "+p+" "+g+" "+p+" "+(g-e)+" z"):d.concat(" L "+p+" "+(g+e)+" z")):s?(d=(d=d.concat("M "+p+" "+(u+e)+" Q "+p+" "+u+" "+(p+t)+" "+u+" L "+(n.x-r/2)+" "+u)).concat(" L "+(l-c)+" "+(n.y+c)),d=(d=(d+=" Q "+l+" "+n.y+" "+(l+c)+" "+(n.y+c)).concat(" L "+(n.x+r/2)+" "+u+" L "+(f-t)+" "+u+" Q "+f+" "+u+" "+f+" "+(u+e))).concat(" L "+f+" "+(g-e)+" Q "+f+" "+g+" "+(f-t)+" "+g+" L "+(p+t)+" "+g+" Q "+p+" "+g+" "+p+" "+(g-e)+" z")):a?(d=(d=(d=d.concat("M "+p+" "+(u+e)+" Q "+p+" "+u+" "+(p+t)+" "+u)).concat(" L "+(f-t)+" "+u+" Q "+f+" "+u+" "+f+" "+(u+e)+" L "+f+" "+(n.y-r/2))).concat(" L "+(f+r-c)+" "+(h-c)),d=(d=(d+=" Q "+(f+r)+" "+h+" "+(f+r-c)+" "+(h+c)).concat(" L "+f+" "+(n.y+r/2)+" L "+f+" "+(g-e)+" Q "+f+" "+g+" "+(f-t)+" "+g)).concat(" L "+(p+t)+" "+g+" Q "+p+" "+g+" "+p+" "+(g-e)+" z")):(d=(d=d.concat("M "+(p+t)+" "+u+" Q "+p+" "+u+" "+p+" "+(u+e)+" L "+p+" "+(n.y-r/2))).concat(" L "+(p-r+c)+" "+(h-c)),d=(d=(d+=" Q "+(p-r)+" "+h+" "+(p-r+c)+" "+(h+c)).concat(" L "+p+" "+(n.y+r/2)+" L "+p+" "+(g-e)+" Q "+p+" "+g+" "+(p+t)+" "+g)).concat(" L "+(f-t)+" "+g+" Q "+f+" "+g+" "+f+" "+(g-e)+" L "+f+" "+(u+e)+" Q "+f+" "+u+" "+(f-t)+" "+u+" z")),d}var Px=function(){return function(t,e){this.width=t,this.height=e}}(),Ox=function(){return function(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}}(),Ex=function(){return function(t,e){this.isRight=e,this.isBottom=t}}(),Lx=function(){return function(t){this.id=t}}(),Ix=function(t){function e(e,i,n,r,o,s,a,l){void 0===s&&(s="");var h=t.call(this,e)||this;return h.transform="",h.baseLine="auto",h.labelRotation=0,h.x=i,h.y=n,h.anchor=r,h.text=o,h.transform=s,h.baseLine=a,h.labelRotation=l,h}return Sx(e,t),e}(Lx);function Tx(t){return document.getElementById(t)}function Ax(t){var e=Tx(t);e&&li(e)}function Bx(t,e,i,n,r,o){var s=new vx(""),a=kx(t,i,e,r,n),l=s["draw"+a.functionName](a.renderOption);return l.setAttribute("aria-label",o),l}function kx(t,e,i,n,r){var o,s="Path",a=e.width,l=e.height,h=t.x,c=t.y,d=t.x+-a/2,p=t.y+-l/2;switch(i){case"Circle":case"Bubble":s="Ellipse",_(n,{rx:a/2,ry:l/2,cx:h,cy:c});break;case"Cross":_(n,{d:o="M "+d+" "+c+" L "+(h+a/2)+" "+c+" M "+h+" "+(c+l/2)+" L "+h+" "+(c+-l/2)});break;case"HorizontalLine":_(n,{d:o="M "+d+" "+c+" L "+(h+a/2)+" "+c});break;case"VerticalLine":_(n,{d:o="M "+h+" "+(c+l/2)+" L "+h+" "+(c+-l/2)});break;case"Diamond":_(n,{d:o="M "+d+" "+c+" L "+h+" "+(c+-l/2)+" L "+(h+a/2)+" "+c+" L "+h+" "+(c+l/2)+" L "+d+" "+c+" z"});break;case"Rectangle":_(n,{d:o="M "+d+" "+(c+-l/2)+" L "+(h+a/2)+" "+(c+-l/2)+" L "+(h+a/2)+" "+(c+l/2)+" L "+d+" "+(c+l/2)+" L "+d+" "+(c+-l/2)+" z"});break;case"Triangle":_(n,{d:o="M "+d+" "+(c+l/2)+" L "+h+" "+(c+-l/2)+" L "+(h+a/2)+" "+(c+l/2)+" L "+d+" "+(c+l/2)+" z"});break;case"InvertedTriangle":_(n,{d:o="M "+(h+a/2)+" "+(c-l/2)+" L "+h+" "+(c+l/2)+" L "+(h-a/2)+" "+(c-l/2)+" L "+(h+a/2)+" "+(c-l/2)+" z"});break;case"Pentagon":for(var u=void 0,f=void 0,g=0;g<=5;g++)u=a/2*Math.cos(Math.PI/180*(72*g)),f=l/2*Math.sin(Math.PI/180*(72*g)),o=0===g?"M "+(h+u)+" "+(c+f)+" ":o.concat("L "+(h+u)+" "+(c+f)+" ");_(n,{d:o=o.concat("Z")});break;case"Image":s="Image",_(n,{href:r,height:l,width:a,x:d,y:p})}return{renderOption:n,functionName:s}}var Mx=function(t){function e(e,i,n,r,o,s,a){var l=t.call(this,e)||this;return l.opacity=o,l.fill=i,l.stroke=r,l["stroke-width"]=n,l["stroke-dasharray"]=s,l.d=a,l}return Sx(e,t),e}(Lx);function Dx(t,e,i,n){var r,o,s,a=new vx("");return r={id:t.id,x:t.x,y:t.y,fill:i,"font-size":e.size,"font-style":e.fontStyle,"font-family":e.fontFamily,"font-weight":e.fontWeight,"text-anchor":t.anchor,transform:t.transform,opacity:e.opacity,"dominant-baseline":t.baseLine},s="string"==typeof t.text?t.text:t.text[0],o=a.createText(r,s),n.appendChild(o),o}var Rx=function(){return function(t,e){this.x=t,this.y=e}}(),zx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),jx=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Nx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zx(e,t),jx([Hi(null)],e.prototype,"size",void 0),jx([Hi("")],e.prototype,"color",void 0),jx([Hi("Segoe UI")],e.prototype,"fontFamily",void 0),jx([Hi("Normal")],e.prototype,"fontWeight",void 0),jx([Hi("Normal")],e.prototype,"fontStyle",void 0),jx([Hi(1)],e.prototype,"opacity",void 0),e}(ln),Hx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zx(e,t),jx([Hi("")],e.prototype,"color",void 0),jx([Hi(1)],e.prototype,"width",void 0),e}(ln),_x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zx(e,t),jx([Hi(0)],e.prototype,"x",void 0),jx([Hi(0)],e.prototype,"y",void 0),jx([Hi(0)],e.prototype,"width",void 0),jx([Hi(0)],e.prototype,"height",void 0),e}(ln),Vx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zx(e,t),jx([Hi(0)],e.prototype,"x",void 0),jx([Hi(0)],e.prototype,"y",void 0),e}(ln),Fx=function(t){function e(e,i){return t.call(this,e,i)||this}return zx(e,t),e.prototype.preRender=function(){this.allowServerDataBinding=!1,this.initPrivateVariable(),this.isCanvas||this.removeSVG(),this.createTooltipElement()},e.prototype.initPrivateVariable=function(){this.renderer=new vx(this.element.id),this.themeStyle=wx(this.theme),this.formattedText=[],this.padding=5,this.isFirst=!0,this.markerPoint=[]},e.prototype.removeSVG=function(){var t=document.getElementById(this.element.id+"_svg"),e=document.getElementById(this.element.id+"parent_template");this.blazorTemplate&&Be(this.element.id+"parent_template_blazorTemplate"),t&&t.parentNode&&li(t),e&&e.parentNode&&li(e)},e.prototype.render=function(){if(this.fadeOuted=!1,this.template)this.updateTemplateFn(),this.createTemplate(this.areaBounds,this.location);else{this.renderText(this.isFirst);var t={cancel:!1,name:"tooltipRender",tooltip:this};this.trigger("tooltipRender",t);var e=this.renderTooltipElement(this.areaBounds,this.location);this.drawMarker(e.isBottom,e.isRight,this.markerSize)}this.trigger("loaded",{tooltip:this});var i=document.getElementById("chartmeasuretext");i&&li(i),this.allowServerDataBinding=!0},e.prototype.createTooltipElement=function(){if(this.textElements=[],!this.template||this.shared){var t=this.renderer.createSvg({id:this.element.id+"_svg"});this.element.appendChild(t);var e=document.getElementById(this.element.id+"_group");e||(e=this.renderer.createGroup({id:this.element.id+"_group"})).setAttribute("transform","translate(0,0)"),t.appendChild(e);var i=this.renderer.drawPath({id:this.element.id+"_path","stroke-width":"Bootstrap4"===this.theme?0:this.border.width,fill:this.fill||this.themeStyle.tooltipFill,opacity:"Bootstrap4"===this.theme?.9:this.opacity,stroke:this.border.color});e.appendChild(i)}},e.prototype.drawMarker=function(t,e,i){if(this.shapes.length<=0)return null;for(var n,r=0,o=this.renderer.createGroup({id:this.element.id+"_trackball_group"}),s=Tx(this.element.id+"_group"),a=2*this.marginX+i/2+(e?this.arrowPadding:0),l=0,h=this.shapes;l<h.length;l++){var c=h[l];"None"!==c&&(n=new Mx(this.element.id+"_Trackball_"+r,this.palette[r],1,"#cccccc",1,null),this.markerPoint[r]&&o.appendChild(Bx(new Rx(a,this.markerPoint[r]-this.padding+(t?this.arrowPadding:0)),c,new Px(i,i),"",n,null)),r++)}s.appendChild(o)},e.prototype.renderTooltipElement=function(t,e){var i,n=Tx(this.element.id),r=new Rx(0,0),o=new Rx(0,0),s=Tx(this.element.id+"_svg"),a=Tx(this.element.id+"_group"),l=Tx(this.element.id+"_path"),h=!1,c=!1,d=!1,p=0,u=0;if(this.tipRadius=1,""!==this.header&&(this.elementSize.height+=this.marginY),this.content.length>1?(i=this.sharedTooltipLocation(t,this.location.x,this.location.y),h=!0):(i=this.tooltipLocation(t,e,r,o),this.inverted?p=(c=i.x<e.x+this.clipBounds.x)?0:this.arrowPadding:(d=!(h=i.y<e.y+this.clipBounds.y),u=h?0:this.arrowPadding)),""!==this.header){var f=xx(this.isWrap?this.wrappedText:this.header,this.textStyle).height+2*this.marginY+(d?this.arrowPadding:0)+(this.isWrap?5:0),g="M "+(3*this.marginX+(c||h||d?0:this.arrowPadding))+" "+f+"L "+(i.width+(c||h||d?0:this.arrowPadding)-2*this.marginX)+" "+f,m=this.renderer.drawPath({id:this.element.id+"_header_path","stroke-width":1,fill:null,opacity:.8,stroke:this.themeStyle.tooltipHeaderLine,d:g});a.appendChild(m)}var y=this.border.width/2,v=new Ox(y+p,y+u,i.width-y,i.height-y);if(a.setAttribute("opacity","1"),!this.enableAnimation||this.shared||this.isFirst?this.updateDiv(n,i.x,i.y):this.animateTooltipDiv(n,i),s.setAttribute("height",(i.height+this.border.width+(this.inverted?0:this.arrowPadding)+5).toString()),s.setAttribute("width",(i.width+this.border.width+(this.inverted?this.arrowPadding:0)+5).toString()),s.setAttribute("opacity","1"),F(this.tooltipPlacement)||(h=this.tooltipPlacement.indexOf("Top")>-1,d=this.tooltipPlacement.indexOf("Bottom")>-1,c=this.tooltipPlacement.indexOf("Left")>-1),l.setAttribute("d",Cx(this.rx,this.ry,v,r,this.arrowPadding,h,d,c,o.x,o.y,this.tipRadius)),this.enableShadow&&"Bootstrap4"!==this.theme){var b=this.element.id+"_shadow";l.setAttribute("filter",te.isIE?"":"url(#"+b+")");var w='<filter id="'+b+'" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="3"/>';w+='<feOffset dx="3" dy="3" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="0.5"/>',w+='</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';var S=this.renderer.createDefs();S.setAttribute("id",this.element.id+"SVG_tooltip_definition"),a.appendChild(S),S.innerHTML=w}return l.setAttribute("stroke",this.border.color),this.changeText(new Rx(p,u),d,!c&&!h&&!d,i),new Ex(d,!c&&!h&&!d)},e.prototype.changeText=function(t,e,i,n){var r=document.getElementById(this.element.id+"_text");e&&r.setAttribute("transform","translate(0,"+this.arrowPadding+")"),i&&r.setAttribute("transform","translate("+this.arrowPadding+" 0)")},e.prototype.findFormattedText=function(){this.formattedText=[],""!==this.header.replace(/<b>/g,"").replace(/<\/b>/g,"").trim()&&(this.formattedText=this.formattedText.concat(this.header)),this.formattedText=this.formattedText.concat(this.content)},e.prototype.renderText=function(t){var e,i,n,r,o,s,a,l=0,h=0,c=0,d=V({},this.textStyle,null,!0).properties,p=Tx(this.element.id+"_group"),u="";this.findFormattedText();var f="rtl"===document.body.getAttribute("dir")?"end":"start";this.leftSpace=this.areaBounds.x+this.location.x,this.rightSpace=this.areaBounds.x+this.areaBounds.width-this.leftSpace;var g=this.header.replace(/<b>/g,"").replace(/<\/b>/g,"").trim(),m=this.header.indexOf("<b>")>-1&&this.header.indexOf("</b>")>-1,y=xx(this.formattedText[0],d).width+2*this.marginX+this.arrowPadding,v=this.location.x-y<this.location.x,b=this.areaBounds.x+this.areaBounds.width<this.location.x+y,w=""!==g?this.marginY:0,S=!0,x=!0;this.markerPoint=[];var C,P=this.shapes.length>0?10:0,O=this.shapes.length>0?5:0,E="Normal",L=this.themeStyle.tooltipLightLabel,I=22/parseFloat("13px")*parseFloat(d.size);t&&!this.isCanvas||(Ax(this.element.id+"_text"),Ax(this.element.id+"_header_path"),Ax(this.element.id+"_trackball_group"),Ax(this.element.id+"SVG_tooltip_definition"));var T=new Ix(this.element.id+"_text",2*this.marginX,2*this.marginY+2*this.padding+(2===this.marginY?3:0),f,""),A=Dx(T,d,null,p),B=1===this.formattedText.length&&this.formattedText[0].indexOf(" : <b>")>-1;i=(a=""!==this.header)&&m?16:13;for(var k=0,M=this.formattedText.length;k<M;k++)if(r=this.formattedText[k].replace(/<(b|strong)>/g,"<b>").replace(/<\/(b|strong)>/g,"</b>").split(/<br.*?>/g),0===k&&!B&&this.isTextWrap&&(this.leftSpace<y||v)&&(this.rightSpace<y||b)&&(C=Math.round(this.leftSpace>this.rightSpace?this.leftSpace/i:this.rightSpace/i),r=(""!==g?g:this.formattedText[k]).match(new RegExp(".{1,"+C+"}","g")),this.wrappedText=m?"<b>"+r.join("<br>")+"</b>":r.join("<br>"),this.isWrap=r.length>1),""!==r[0]){0===k&&""!==g||this.markerPoint.push((""!==g?this.marginY:0)+T.y+l);for(var D=0,R=r.length;D<R;D++){c=0,x=!0,l+=I;for(var z=0,j=(e=r[D].replace(/<b>/g,"<br><b>").replace(/<\/b>/g,"</b><br>").replace(/:/g,"<br>‎:<br>").split("<br>")).length;z<j;z++)if(o=e[z],/\S/.test(o)||""===o||(o=" "),!x&&" "===o||""!==o.replace(/<b>/g,"").replace(/<\/b>/g,"").trim()){c+=" "!==o?4:0,x&&!S?(s={x:2*this.marginX+(P+O),dy:I+(x?w:0),fill:""},w=null):s=S&&x?{x:""===g?2*this.marginX+(P+O):2*this.marginX+(this.isWrap?P+O:0)}:{},x=!1,n=this.renderer.createTSpan(s,""),A.appendChild(n),o.indexOf("<b>")>-1||m&&0===z&&0===k&&(a||this.isWrap)?(E="bold",L=this.themeStyle.tooltipBoldLabel,u="font-weight:"+E,d.fontWeight=E,n.setAttribute("fill",this.textStyle.color||L)):(u="bold"===E?"font-weight:"+E:"",d.fontWeight=E,n.setAttribute("fill",this.textStyle.color||L)),(o.indexOf("</b>")>-1||m&&z===j-1&&0===k&&(a||this.isWrap))&&(E="Normal",L=this.themeStyle.tooltipLightLabel);var N=/[\u0590-\u07FF\u200F\u202B\u202E\uFB1D-\uFDFD\uFE70-\uFEFC]/.test(o);n.textContent=o=o.replace(/<[a-zA-Z\/](.|\n)*?>/g,N?"‎":""),c+=xx(o,d).width,""!==u&&n.setAttribute("style",u),S=!1}c-=4,h=Math.max(h,c)}}this.elementSize=new Px(h+(h>0?2*this.marginX:0),l),this.elementSize.width+=P+O;var H=A.childNodes[0];if(""!==g&&H&&!this.isWrap){d.fontWeight="bold";var _=(this.elementSize.width+2*this.padding)/2-xx(g,d).width/2;H.setAttribute("x",_.toString())}},e.prototype.createTemplate=function(t,e){var i={cancel:!1,name:"tooltipRender",tooltip:this};this.trigger("tooltipRender",i);var n=document.getElementById(this.element.id);this.isCanvas&&this.removeSVG();var r=n.firstElementChild;if(r&&li(r),i.cancel)li(Tx(this.element.id+"_tooltip"));else{for(var o=$e("div",{id:this.element.id+"parent_template"}),s=this.templateFn(this.data,null,null,o.id+"_blazorTemplate","");s&&s.length>0;)$()?(o.appendChild(s[0]),s=null):o.appendChild(s[0]);n.appendChild(o);var a=this.isCanvas?o:this.element,l=a.getBoundingClientRect();this.padding=0,this.elementSize=new Px(l.width,l.height);var h=this.tooltipLocation(t,e,new Rx(0,0),new Rx(0,0));if(!this.enableAnimation||this.shared||this.isFirst?this.updateDiv(a,h.x,h.y):this.animateTooltipDiv(this.element,h),this.blazorTemplate){var c=function(){var i=Tx(d.element.id).getBoundingClientRect();d.elementSize=new Px(i.width,i.height);var n=d.tooltipLocation(t,e,new Rx(0,0),new Rx(0,0));d.updateDiv(Tx(d.element.id),n.x,n.y)},d=this;c.bind(d,t,e),Ae(this.element.id+"parent_template_blazorTemplate",this.blazorTemplate.name,this.blazorTemplate.parent,void 0,c)}}},e.prototype.sharedTooltipLocation=function(t,e,i){var n=this.elementSize.width+2*this.marginX,r=this.elementSize.height+2*this.marginY,o=new Ox(e+2*this.padding,i-r-this.padding,n,r);return o.y<t.y&&(o.y+=o.height+2*this.padding),o.x+o.width>t.x+t.width&&(o.x-=o.width+4*this.padding),o},e.prototype.getCurrentPosition=function(t,e,i,n){var r=this.tooltipPlacement,o=this.clipBounds.x,s=this.clipBounds.y,a=this.offset,l=this.elementSize.width+2*this.marginX,h=this.elementSize.height+2*this.marginY,c=new Rx(e.x,e.y);return"Top"===r||"Bottom"===r?(c=new Rx(c.x+o-this.elementSize.width/2-this.padding,c.y+s-this.elementSize.height-2*this.padding-this.arrowPadding-a),i.x=n.x=l/2,"Bottom"===r&&(c.y=e.y+s+a),t.x+t.width<c.x+l?(c.x=t.width>l?t.x+t.width-l+6:t.x,i.x=n.x=t.width>l?t.x+e.x-c.x:e.x):t.x>c.x&&(c.x=t.x,i.x=n.x=e.x)):(c=new Rx(c.x+o+a,c.y+s-this.elementSize.height/2-this.padding),i.y=n.y=h/2,"Left"===r&&(c.x=e.x+o-a-(l+this.arrowPadding)),t.y+t.height<c.y+h?(c.y=t.height>h?t.y+t.height-h+6:t.y,i.y=n.y=t.height>h?t.y+e.y-c.y:e.y):t.y>c.y&&(c.y=t.y,i.y=n.y=e.y)),new Ox(c.x,c.y,l,h)},e.prototype.tooltipLocation=function(t,e,i,n){if(!F(this.tooltipPlacement))return this.getCurrentPosition(t,e,i,n);var r=new Rx(e.x,e.y),o=this.elementSize.width+2*this.marginX,s=this.elementSize.height+2*this.marginY,a=this.offset,l=this.clipBounds.x,h=this.clipBounds.y,c=t.x,d=t.y;return this.inverted?(r=new Rx(r.x+l+a,r.y+h-this.elementSize.height/2-this.padding),i.y=n.y=s/2,(r.x+o+this.arrowPadding>c+t.width||this.isNegative)&&(r.x=(e.x>t.width?t.width:e.x)+l-a-(o+this.arrowPadding)),r.x<c&&(r.x=(e.x<0?0:e.x)+l+a),r.y<=d&&(i.y-=d-r.y,n.y-=d-r.y,r.y=d),r.y+s>=d+t.height&&(i.y+=r.y+s-(d+t.height),n.y+=r.y+s-(d+t.height),r.y-=r.y+s-(d+t.height)),i.y+this.arrowPadding/2>s-this.ry&&(i.y=s-this.ry-this.arrowPadding/2,n.y=s,this.tipRadius=0),i.y-this.arrowPadding/2<this.ry&&(i.y=this.ry+this.arrowPadding/2,n.y=0,this.tipRadius=0)):(r=new Rx(r.x+l-this.elementSize.width/2-this.padding,r.y+h-this.elementSize.height-2*this.padding-this.arrowPadding-a),i.x=n.x=o/2,(r.y<d||this.isNegative)&&(r.y=(e.y<0?0:e.y)+h+a),r.y+s+this.arrowPadding>d+t.height&&(r.y=(e.y>t.height?t.height:e.y)+h-this.elementSize.height-2*this.padding-this.arrowPadding-a),n.x=o/2,r.x<c&&(i.x-=c-r.x,n.x-=c-r.x,r.x=c),r.x+o>c+t.width&&(i.x+=r.x+o-(c+t.width),n.x+=r.x+o-(c+t.width),r.x-=r.x+o-(c+t.width)),i.x+this.arrowPadding/2>o-this.rx&&(i.x=o-this.rx-this.arrowPadding/2,n.x=o,this.tipRadius=0),i.x-this.arrowPadding/2<this.rx&&(i.x=this.rx+this.arrowPadding/2,n.x=0,this.tipRadius=0)),new Ox(r.x,r.y,o,s)},e.prototype.animateTooltipDiv=function(t,e){var i,n=this,r=parseFloat(t.style.left),o=parseFloat(t.style.top);new Ji({}).animate(t,{duration:this.duration,progress:function(n){i=n.timeStamp/n.duration,t.style.animation=null,t.style.left=r+i*(e.x-r)+"px",t.style.top=o+i*(e.y-o)+"px"},end:function(i){n.updateDiv(t,e.x,e.y),n.trigger("animationComplete",{tooltip:n})}})},e.prototype.updateDiv=function(t,e,i){t.style.left=e+"px",t.style.top=i+"px"},e.prototype.updateTemplateFn=function(){if(this.template){try{document.querySelectorAll(this.template).length&&(this.templateFn=Te(document.querySelector(this.template).innerHTML.trim()))}catch(t){this.templateFn=Te(this.template)}}},e.prototype.fadeOut=function(){var t=this,e=this.isCanvas&&!this.template?Tx(this.element.id+"_svg"):Tx(this.element.id);if(e){var i,n=e.firstChild;this.isCanvas&&!this.template&&(n=document.getElementById(this.element.id+"_group")?document.getElementById(this.element.id+"_group"):n),n&&(i=parseFloat(n.getAttribute("opacity"))||1),new Ji({}).animate(n,{duration:200,progress:function(e){t.progressAnimation(n,i,e.timeStamp/e.duration)},end:function(e){t.fadeOuted=!0,t.endAnimation(n)}})}},e.prototype.progressAnimation=function(t,e,i){t.style.animation="",t.setAttribute("opacity",(e-i).toString())},e.prototype.endAnimation=function(t){t.setAttribute("opacity","0"),this.template&&!this.shared&&(t.style.display="none"),this.trigger("animationComplete",{tooltip:this})},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.getModuleName=function(){return"tooltip"},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.element.classList.remove("e-tooltip")},e.prototype.onPropertyChanged=function(t,e){this.blazorTemplate&&Be(this.element.id+"parent_template_blazorTemplate"),this.isFirst=!1,this.render()},jx([Hi(!1)],e.prototype,"enable",void 0),jx([Hi(!1)],e.prototype,"shared",void 0),jx([Hi(!0)],e.prototype,"enableShadow",void 0),jx([Hi(null)],e.prototype,"fill",void 0),jx([Hi("")],e.prototype,"header",void 0),jx([Hi(.75)],e.prototype,"opacity",void 0),jx([_i({size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},Nx)],e.prototype,"textStyle",void 0),jx([Hi(null)],e.prototype,"template",void 0),jx([Hi(!0)],e.prototype,"enableAnimation",void 0),jx([Hi(300)],e.prototype,"duration",void 0),jx([Hi(!1)],e.prototype,"inverted",void 0),jx([Hi(!1)],e.prototype,"isNegative",void 0),jx([_i({color:"#cccccc",width:.5},Hx)],e.prototype,"border",void 0),jx([Hi([])],e.prototype,"content",void 0),jx([Hi(10)],e.prototype,"markerSize",void 0),jx([_i({x:0,y:0},Vx)],e.prototype,"clipBounds",void 0),jx([Hi([])],e.prototype,"palette",void 0),jx([Hi([])],e.prototype,"shapes",void 0),jx([_i({x:0,y:0},Vx)],e.prototype,"location",void 0),jx([Hi(0)],e.prototype,"offset",void 0),jx([Hi(2)],e.prototype,"rx",void 0),jx([Hi(2)],e.prototype,"ry",void 0),jx([Hi(5)],e.prototype,"marginX",void 0),jx([Hi(5)],e.prototype,"marginY",void 0),jx([Hi(12)],e.prototype,"arrowPadding",void 0),jx([Hi(null)],e.prototype,"data",void 0),jx([Hi("Material")],e.prototype,"theme",void 0),jx([_i({x:0,y:0,width:0,height:0},_x)],e.prototype,"areaBounds",void 0),jx([Hi(null)],e.prototype,"availableSize",void 0),jx([Hi()],e.prototype,"blazorTemplate",void 0),jx([Hi(!1)],e.prototype,"isCanvas",void 0),jx([Hi(!1)],e.prototype,"isTextWrap",void 0),jx([Hi(null)],e.prototype,"tooltipPlacement",void 0),jx([Ui()],e.prototype,"tooltipRender",void 0),jx([Ui()],e.prototype,"loaded",void 0),jx([Ui()],e.prototype,"animationComplete",void 0),e=jx([Gi],e)}(un);(function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}})(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}();(function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}})(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}();function Wx(t){return"[object String]"===Object.prototype.toString.call(t)?"$s"+t:"$o"+t.toString()}var Ux=function(){function t(t){this.table={},this.nElements=0,this.toStr=t||Wx}return t.prototype.getValue=function(t){var e=this.table["$"+this.toStr(t)];if(void 0!==e)return e.value},t.prototype.setValue=function(t,e){var i="$"+this.toStr(t);this.table[i];this.nElements++,this.table[i]={key:t,value:e}},t.prototype.remove=function(t){var e="$"+this.toStr(t),i=this.table[e];return delete this.table[e],this.nElements--,i.value},t.prototype.keys=function(){for(var t=[],e=Object.keys(this.table),i=0;i<e.length;i++){var n=this.table[e[i]];t.push(n.key)}return t},t.prototype.values=function(){for(var t=[],e=Object.keys(this.table),i=0;i<e.length;i++){var n=this.table[e[i]];t.push(n.value)}return t},t.prototype.containsKey=function(t){return!(void 0===this.getValue(t))},t.prototype.clear=function(){this.table={},this.nElements=0},t.prototype.size=function(){return this.nElements},t}(),Gx=function(){function t(t){this.stringStartMark="/",this.internalValue="",this.isSaving6=!1,this.position6=-1,this.internalValue=this.normalizeValue(t)}return Object.defineProperty(t.prototype,"status",{get:function(){return this.status6},set:function(t){this.status6=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSaving",{get:function(){return this.isSaving6},set:function(t){this.isSaving6=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objectCollectionIndex",{get:function(){return this.index6},set:function(t){this.index6=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.position6},set:function(t){this.position6=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clonedObject",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.internalValue},set:function(t){var e=t;null!==t&&t.length>0?(e=t,this.internalValue=this.normalizeValue(e)):this.internalValue=e},enumerable:!0,configurable:!0}),t.prototype.save=function(t){t.write(this.toString())},t.prototype.toString=function(){return this.stringStartMark+this.escapeString(this.value)},t.prototype.clone=function(e){var i=new t;return i.value=this.internalValue,i},t.prototype.escapeString=function(e){for(var i="",n=0,r=e.length;n<r;n++){var o=e[n];t.delimiters.indexOf(o);i+=o}return i},t.prototype.normalizeValue=function(t,e){return t},t.delimiters="()<>[]{}/%}",t.replacements=[" ","\t","\n","\r"],t}(),qx=function(){function t(){this.forTest="test",this.forTest=t.obj}return t.obj="obj",t.endObj="endobj",t.r="R",t.whiteSpace=" ",t.slash="/",t.newLine="\r\n",t.stream="stream",t.endStream="endstream",t.xref="xref",t.f="f",t.n="n",t.trailer="trailer",t.startxref="startxref",t.eof="%%EOF",t.header="%PDF-1.5",t.beginText="BT",t.endText="ET",t.beginPath="m",t.appendLineSegment="l",t.stroke="S",t.fill="f",t.fillEvenOdd="f*",t.fillStroke="B",t.fillStrokeEvenOdd="B*",t.appendbeziercurve="c",t.appendRectangle="re",t.saveState="q",t.restoreState="Q",t.paintXObject="Do",t.modifyCtm="cm",t.modifyTM="Tm",t.setLineWidth="w",t.setLineCapStyle="J",t.setLineJoinStyle="j",t.setDashPattern="d",t.setFlatnessTolerance="i",t.closePath="h",t.closeStrokePath="s",t.closeFillStrokePath="b",t.setCharacterSpace="Tc",t.setWordSpace="Tw",t.setHorizontalScaling="Tz",t.setTextLeading="TL",t.setFont="Tf",t.setRenderingMode="Tr",t.setTextRise="Ts",t.setTextScaling="Tz",t.setCoords="Td",t.goToNextLine="T*",t.setText="Tj",t.setTextWithFormatting="TJ",t.setTextOnNewLine="'",t.selectcolorspaceforstroking="CS",t.selectcolorspacefornonstroking="cs",t.setrbgcolorforstroking="RG",t.setrbgcolorfornonstroking="rg",t.setcmykcolorforstroking="K",t.setcmykcolorfornonstroking="k",t.setgraycolorforstroking="G",t.setgraycolorfornonstroking="g",t.clipPath="W",t.clipPathEvenOdd="W*",t.endPath="n",t.setGraphicsState="gs",t.comment="%",t.evenOdd="*",t.setMiterLimit="M",t.setColorAndPattern="scn",t.setColorAndPatternStroking="SCN",t}(),Xx=function(){return function(){this.pages="Pages",this.kids="Kids",this.count="Count",this.resources="Resources",this.type="Type",this.size="Size",this.mediaBox="MediaBox",this.parent="Parent",this.root="Root",this.decodeParms="DecodeParms",this.filter="Filter",this.font="Font",this.type1="Type1",this.baseFont="BaseFont",this.encoding="Encoding",this.subtype="Subtype",this.contents="Contents",this.procset="ProcSet",this.colorSpace="ColorSpace",this.extGState="ExtGState",this.pattern="Pattern",this.xObject="XObject",this.length="Length",this.width="Width",this.height="Height",this.bitsPerComponent="BitsPerComponent",this.image="Image",this.dctdecode="DCTDecode",this.columns="Columns",this.blackIs1="BlackIs1",this.k="K",this.s="S",this.predictor="Predictor",this.deviceRgb="DeviceRGB",this.next="Next",this.action="Action",this.link="Link",this.a="A",this.annot="Annot",this.p="P",this.c="C",this.rect="Rect",this.uri="URI",this.annots="Annots",this.ca="ca",this.CA="CA",this.xyz="XYZ",this.fit="Fit",this.dest="Dest",this.BM="BM",this.flatedecode="FlateDecode",this.rotate="Rotate",this.bBox="BBox",this.form="Form",this.w="W",this.cIDFontType2="CIDFontType2",this.cIDToGIDMap="CIDToGIDMap",this.identity="Identity",this.dw="DW",this.fontDescriptor="FontDescriptor",this.cIDSystemInfo="CIDSystemInfo",this.fontName="FontName",this.flags="Flags",this.fontBBox="FontBBox",this.missingWidth="MissingWidth",this.stemV="StemV",this.italicAngle="ItalicAngle",this.capHeight="CapHeight",this.ascent="Ascent",this.descent="Descent",this.leading="Leading",this.avgWidth="AvgWidth",this.fontFile2="FontFile2",this.maxWidth="MaxWidth",this.xHeight="XHeight",this.stemH="StemH",this.registry="Registry",this.ordering="Ordering",this.supplement="Supplement",this.type0="Type0",this.identityH="Identity-H",this.toUnicode="ToUnicode",this.descendantFonts="DescendantFonts",this.background="Background",this.shading="Shading",this.matrix="Matrix",this.antiAlias="AntiAlias",this.function="Function",this.extend="Extend",this.shadingType="ShadingType",this.coords="Coords",this.domain="Domain",this.range="Range",this.functionType="FunctionType",this.bitsPerSample="BitsPerSample",this.patternType="PatternType",this.paintType="PaintType",this.tilingType="TilingType",this.xStep="XStep",this.yStep="YStep"}}(),Yx=function(){function t(t){if(this.position7=-1,this.primitiveItems=new Ux,this.prefix="<<",this.suffix=">>",this.resources=[],this.object=null,this.archive=!0,this.isFont=!1,void 0===t)this.primitiveItems=new Ux,this.encrypt=!0,this.dictionaryProperties=new Xx;else{this.primitiveItems=new Ux;for(var e=t.items.keys(),i=t.items.values(),n=0;n<t.items.size();n++)this.primitiveItems.setValue(e[n],i[n]);this.status=t.status,this.freezeChanges(this),this.encrypt=!0,this.dictionaryProperties=new Xx}}return Object.defineProperty(t.prototype,"items",{get:function(){return this.primitiveItems},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.status7},set:function(t){this.status7=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSaving",{get:function(){return this.isSaving7},set:function(t){this.isSaving7=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objectCollectionIndex",{get:function(){return this.index7},set:function(t){this.index7=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clonedObject",{get:function(){return this.object},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.position7},set:function(t){this.position7=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Count",{get:function(){return this.primitiveItems.size()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dictionary",{get:function(){return this},enumerable:!0,configurable:!0}),t.prototype.getArchive=function(){return this.archive},t.prototype.setArchive=function(t){this.archive=t},t.prototype.setEncrypt=function(t){this.encrypt=t,this.modify()},t.prototype.getEncrypt=function(){return this.encrypt},t.prototype.freezeChanges=function(t){this.bChanged=!1},t.prototype.clone=function(e){return new t},t.prototype.modify=function(){this.bChanged=!0},t.prototype.remove=function(t){"string"!=typeof t?(this.primitiveItems.remove(t.value),this.modify()):this.remove(new Gx(t))},t.prototype.containsKey=function(t){return this.primitiveItems.containsKey(t.toString())},t.prototype.onBeginSave=function(){this.beginSave.sender.beginSave()},t.prototype.onFontDictionaryBeginSave=function(){this.fontDictionaryBeginSave.sender.fontDictionaryBeginSave()},t.prototype.onDescendantFontBeginSave=function(){this.descendantFontBeginSave.sender.descendantFontBeginSave()},t.prototype.onTemplateBeginSave=function(){this.pageBeginDrawTemplate.sender.pageBeginSave()},t.prototype.onBeginAnnotationSave=function(){this.annotationBeginSave.sender.beginSave()},t.prototype.onSectionBeginSave=function(t){var e=this.sectionBeginSave;e.sender.beginSave(e.state,t)},t.prototype.save=function(t,e){void 0===e?this.save(t,!0):(t.write(this.prefix),void 0!==this.beginSave&&this.onBeginSave(),void 0!==this.descendantFontBeginSave&&this.onDescendantFontBeginSave(),void 0!==this.fontDictionaryBeginSave&&this.onFontDictionaryBeginSave(),void 0!==this.annotationBeginSave&&this.onBeginAnnotationSave(),void 0!==this.sectionBeginSave&&this.onSectionBeginSave(t),void 0!==this.pageBeginDrawTemplate&&this.onTemplateBeginSave(),this.Count>0&&this.saveItems(t),t.write(this.suffix),t.write(qx.newLine))},t.prototype.saveItems=function(t){t.write(qx.newLine);for(var e=this.primitiveItems.keys(),i=this.primitiveItems.values(),n=0;n<e.length;n++){var r=e[n];new Gx(r).save(t),t.write(qx.whiteSpace),i[n].save(t),t.write(qx.newLine)}},t}(),Zx=function(){return function(t){this.sender=t}}(),Kx=function(){return function(t){this.sender=t}}(),Jx=function(){return function(t){this.sender=t}}(),Qx=function(){return function(t){this.sender=t}}(),$x=function(){return function(t,e){this.sender=t,this.state=e}}(),tC=function(){return function(t){this.sender=t}}(),eC=function(){function t(t){this.position5=-1,this.value=t}return Object.defineProperty(t.prototype,"intValue",{get:function(){return this.value},set:function(t){this.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isInteger",{get:function(){return this.integer},set:function(t){this.integer=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.status5},set:function(t){this.status5=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSaving",{get:function(){return this.isSaving5},set:function(t){this.isSaving5=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objectCollectionIndex",{get:function(){return this.index5},set:function(t){this.index5=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.position5},set:function(t){this.position5=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clonedObject",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.save=function(t){t.write(this.intValue.toString())},t.prototype.clone=function(e){return new t(this.value)},t.floatToString=function(t){var e=t.toFixed(2);return"0.00"===e&&(e=".00"),e},t.min=function(t,e,i){var n=Math.min(t,e);return Math.min(i,n)},t}(),iC=function(){function t(e){if(this.startMark="[",this.endMark="]",this.position9=-1,this.clonedObject9=null,this.isFont=!1,void 0===e)this.internalElements=[];else if(void 0===e||e instanceof t){var i=e;this.internalElements=[];for(r=0;r<i.elements.length;r++)this.internalElements.push(i.elements[r])}else for(var n=e,r=0;r<n.length;r++){var o=new eC(n[r]);this.add(o)}}return t.prototype.items=function(t){return this.internalElements[t]},Object.defineProperty(t.prototype,"count",{get:function(){return this.internalElements.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.status9},set:function(t){this.status9=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSaving",{get:function(){return this.isSaving9},set:function(t){this.isSaving9=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clonedObject",{get:function(){return this.clonedObject9},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.position9},set:function(t){this.position9=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objectCollectionIndex",{get:function(){return this.index9},set:function(t){this.index9=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CrossTable",{get:function(){return this.pdfCrossTable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elements",{get:function(){return this.internalElements},enumerable:!0,configurable:!0}),t.prototype.add=function(t){void 0===this.internalElements&&(this.internalElements=[]),this.internalElements.push(t),this.markedChange()},t.prototype.markedChange=function(){this.bChanged=!0},t.prototype.contains=function(t){for(var e=0;e<this.internalElements.length;e++){var i=this.internalElements[e],n=t;if(null!=i&&void 0!==i&&null!=n&&void 0!==n&&i.value===n.value)return!0}return!1},t.prototype.getItems=function(t){return this.internalElements[t]},t.prototype.save=function(t){t.write(this.startMark);for(var e=0,i=this.count;e<i;e++)this.getItems(e).save(t),e+1!==i&&t.write(qx.whiteSpace);t.write(this.endMark)},t.prototype.clone=function(e){this.clonedObject9=null;for(var i=new t,n=0;n<this.internalElements.length;n++){var r=this.internalElements[n];i.add(r.clone(e))}return i.pdfCrossTable=e,this.clonedObject9=i,i},t.fromRectangle=function(e){return new t([e.x,e.y,e.width,e.height])},t.prototype.insert=function(t,e){if(t<this.internalElements.length&&t>0){for(var i=[],n=0;n<t;n++)i.push(this.internalElements[n]);i.push(e);for(n=t;n<this.internalElements.length;n++)i.push(this.internalElements[n]);this.internalElements=i}else this.internalElements.push(e);this.markChanged()},t.prototype.indexOf=function(t){return this.internalElements.indexOf(t)},t.prototype.remove=function(t){var e=this.internalElements.indexOf(t);this.internalElements[e]=null,this.markChanged()},t.prototype.removeAt=function(t){if(this.internalElements.length>t){for(var e=[],i=0;i<t;i++)e.push(this.internalElements[i]);for(i=t+1;i<this.internalElements.length;i++)e.push(this.internalElements[i]);this.internalElements=e}this.markChanged()},t.prototype.clear=function(){this.internalElements=[],this.markChanged()},t.prototype.markChanged=function(){this.bChanged=!0},t}(),nC=function(){function t(){}return t.save=function(t,e){if(null==t||""===t)throw new Error("ArgumentException: fileName cannot be undefined, null or empty");var i=t.substring(t.lastIndexOf(".")+1,t.length),n=this.getMimeType(i);if(""!==n&&(e=new Blob([e],{type:n})),this.isMicrosoftBrowser)navigator.msSaveBlob(e,t);else{var r=document.createElementNS("http://www.w3.org/1999/xhtml","a");this.saveInternal(t,i,e,r,"download"in r)}},t.saveInternal=function(t,e,i,n,r){if(r){n.download=t;var o=window.URL.createObjectURL(i);n.href=o;var s=document.createEvent("MouseEvent");s.initEvent("click",!0,!0),n.dispatchEvent(s),setTimeout(function(){window.URL.revokeObjectURL(o),o=void 0})}else if("docx"!==e&&"xlsx"!==e){var a=window.URL.createObjectURL(i);window.open(a,"_blank")||(window.location.href=a)}else{var l=new FileReader;l.onloadend=function(){window.open(l.result,"_blank")||(window.location.href=l.result)},l.readAsDataURL(i)}},t.getMimeType=function(t){var e="";switch(t){case"html":e="text/html";break;case"pdf":e="application/pdf";break;case"docx":e="application/vnd.openxmlformats-officedocument.wordprocessingml.document";break;case"xlsx":e="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";break;case"txt":e="text/plain"}return e},t}(),rC=function(){function t(){this.contentPos=0,this.bufferText="",this.bufferBlob=new Blob([""],{type:"text/plain"}),this.currentState="Initial",this.namespaceStack=[],this.namespaceStack.push(new oC),this.namespaceStack[0].set("xmlns","http://www.w3.org/2000/xmlns/","Special"),this.namespaceStack.push(new oC),this.namespaceStack[1].set("xml","http://www.w3.org/XML/1998/namespace","Special"),this.namespaceStack.push(new oC),this.namespaceStack[2].set("","","Implied"),this.elementStack=[],this.elementStack.push(new sC),this.elementStack[0].set("","","",this.namespaceStack.length-1),this.attributeStack=[],nC.isMicrosoftBrowser=!!navigator.msSaveBlob}return Object.defineProperty(t.prototype,"buffer",{get:function(){return this.flush(),this.bufferBlob},enumerable:!0,configurable:!0}),t.prototype.writeProcessingInstruction=function(t,e){if(null==t||0===t.length)throw new Error("ArgumentException: name should not be undefined, null or empty");if(this.checkName(t),null==e&&(e=""),3===t.length&&"xml"===t&&"Initial"!==this.currentState)throw new Error("InvalidArgumentException: Cannot write XML declaration.WriteStartDocument method has already written it");if("Initial"!==this.currentState||void 0===this.bufferBlob)throw new Error("InvalidOperationException: Wrong Token");this.writeStartDocument(),this.writeProcessingInstructionInternal(t,e)},t.prototype.writeStartDocument=function(t){if("Initial"!==this.currentState||void 0===this.bufferBlob)throw new Error("InvalidOperationException: Wrong Token");this.currentState="StartDocument",this.rawText('<?xml version="1.0" encoding="utf-8'),null!=t&&(this.rawText('" standalone="'),this.rawText(t?"yes":"no")),this.rawText('"?>')},t.prototype.writeEndDocument=function(){for(;this.elementStack.length-1>0;)this.writeEndElement();this.currentState="EndDocument",this.flush()},t.prototype.writeStartElement=function(t,e,i){if(void 0===this.bufferBlob)throw new Error("InvalidOperationException: Wrong Token");if(null==e||0===e.length)throw new Error("ArgumentException: localName cannot be undefined, null or empty");if(this.checkName(e),"Initial"===this.currentState&&this.writeStartDocument(),"StartElement"===this.currentState&&this.startElementContent(),this.currentState="StartElement",null==t)null!=i&&(t=this.lookupPrefix(i)),null==t&&(t="");else if(t.length>0&&(null==i&&(i=this.lookupNamespace(t)),null==i||void 0!==i&&0===i.length))throw new Error("ArgumentException: Cannot use a prefix with an empty namespace");null==i&&(i=this.lookupNamespace(t)),this.writeStartElementInternal(t,e,i)},t.prototype.writeEndElement=function(){"StartElement"===this.currentState?(this.startElementContent(),this.currentState="ElementContent"):"ElementContent"===this.currentState&&(this.currentState="ElementContent"),this.currentState="EndElement";var t=this.elementStack.length-1;this.writeEndElementInternal(this.elementStack[t].prefix,this.elementStack[t].localName),this.namespaceStack.splice(this.elementStack[t].previousTop+1),this.elementStack.splice(t),this.bufferText.length>10240&&this.flush()},t.prototype.writeElementString=function(t,e,i,n){this.writeStartElement(t,e,i),null!=n&&0!==n.length&&this.writeString(n),this.writeEndElement()},t.prototype.writeAttributeString=function(t,e,i,n){this.writeStartAttribute(t,e,i,n),this.writeStringInternal(n,!0),this.writeEndAttribute()},t.prototype.writeString=function(t){this.writeInternal(t,!1)},t.prototype.writeRaw=function(t){this.writeInternal(t,!0)},t.prototype.writeInternal=function(t,e){if(null!=t){if("StartElement"!==this.currentState&&"ElementContent"!==this.currentState)throw new Error("InvalidOperationException: Wrong Token");"StartElement"===this.currentState&&this.startElementContent(),this.currentState="ElementContent",e?this.rawText(t):this.writeStringInternal(t,!1)}},t.prototype.save=function(t){for(;this.elementStack.length-1>0;)this.writeEndElement();""!==this.bufferText&&this.flush(),nC.save(t,this.buffer)},t.prototype.destroy=function(){this.bufferBlob=void 0;for(var t=0;t<this.namespaceStack.length;t++)this.namespaceStack[t].destroy();this.namespaceStack=[];for(t=0;t<this.elementStack.length;t++)this.elementStack[t].destroy();this.elementStack=[],this.bufferText="",this.contentPos=0},t.prototype.flush=function(){void 0!==this.bufferBlob&&(this.bufferBlob=new Blob([this.bufferBlob,this.bufferText],{type:"text/plain"}),this.bufferText="")},t.prototype.writeProcessingInstructionInternal=function(t,e){this.bufferText+="<?",this.rawText(t),e.length>0&&(this.bufferText+=" ",e=e.replace(/\?\>/g,"? >"),this.bufferText+=e),this.bufferText+="?",this.bufferText+=">"},t.prototype.writeStartAttribute=function(t,e,i,n){if(null==e||0===e.length){if("xmlns"!==t)throw new Error("ArgumentException: localName cannot be undefined, null or empty");e="xmlns",t=""}if("StartElement"!==this.currentState)throw new Error("InvalidOperationException: Wrong Token");this.checkName(e),this.writeStartAttributePrefixAndNameSpace(t,e,i,n)},t.prototype.writeStartAttributePrefixAndNameSpace=function(t,e,i,n){null==t&&(null!=i&&("xmlns"===e&&"http://www.w3.org/2000/xmlns/"===i||(t=this.lookupPrefix(i))),null==t&&(t="")),null==i&&(null!=t&&t.length>0&&(i=this.lookupNamespace(t)),null==i&&(i="")),this.writeStartAttributeSpecialAttribute(t,e,i,n)},t.prototype.writeStartAttributeSpecialAttribute=function(t,e,i,n){if(0===t.length){if("x"===e[0]&&"xmlns"===e)return this.skipPushAndWrite(t,e,i),void this.pushNamespaceExplicit("",n);i.length>0&&(t=this.lookupPrefix(i))}else{if("x"===t[0]){if("xmlns"===t)return this.skipPushAndWrite(t,e,i),void this.pushNamespaceExplicit(e,n);if("xml"===t&&("space"===e||"lang"===e))return void this.skipPushAndWrite(t,e,i)}0===i.length&&(t="")}null!=t&&0!==t.length&&this.pushNamespaceImplicit(t,i),this.skipPushAndWrite(t,e,i)},t.prototype.writeEndAttribute=function(){this.currentState="StartElement",this.bufferText+='"'},t.prototype.writeStartElementInternal=function(t,e,i){this.bufferText+="<",t.length>0&&(this.rawText(t),this.bufferText+=":"),this.rawText(e);var n=this.elementStack.length;this.elementStack.push(new sC),this.elementStack[n].set(t,e,i,this.namespaceStack.length-1),this.pushNamespaceImplicit(t,i);for(var r=0;r<this.attributeStack.length;r++)this.attributeStack[r].destroy();this.attributeStack=[]},t.prototype.writeEndElementInternal=function(t,e){this.contentPos!==this.bufferText.length+1?(this.bufferText+="</",null!=t&&0!==t.length&&(this.rawText(t),this.bufferText+=":"),this.rawText(e),this.bufferText+=">"):(this.bufferText=this.bufferText.substring(0,this.bufferText.length-1),this.bufferText+=" />")},t.prototype.writeStartAttributeInternal=function(t,e,i){this.bufferText+=" ",null!=t&&t.length>0&&(this.rawText(t),this.bufferText+=":"),this.rawText(e),this.bufferText+="=",this.bufferText+='"'},t.prototype.writeNamespaceDeclaration=function(t,e){this.writeStartNamespaceDeclaration(t),this.writeStringInternal(e,!0),this.bufferText+='"'},t.prototype.writeStartNamespaceDeclaration=function(t){null==t||0===t.length?this.rawText(' xmlns="'):(this.rawText(" xmlns:"),this.rawText(t),this.bufferText+="=",this.bufferText+='"')},t.prototype.writeStringInternal=function(t,e){null==t&&(t="");t=(t=(t=t.replace(/\&/g,"&amp;")).replace(/\</g,"&lt;")).replace(/\>/g,"&gt;"),e&&(t=t.replace(/\"/g,"&quot;")),this.bufferText+=t,e||(this.contentPos=0)},t.prototype.startElementContent=function(){for(var t=this.elementStack[this.elementStack.length-1].previousTop,e=this.namespaceStack.length-1;e>t;e--)"NeedToWrite"===this.namespaceStack[e].kind&&this.writeNamespaceDeclaration(this.namespaceStack[e].prefix,this.namespaceStack[e].namespaceUri);this.bufferText+=">",this.contentPos=this.bufferText.length+1},t.prototype.rawText=function(t){this.bufferText+=t},t.prototype.addNamespace=function(t,e,i){var n=this.namespaceStack.length;this.namespaceStack.push(new oC),this.namespaceStack[n].set(t,e,i)},t.prototype.lookupPrefix=function(t){for(var e=this.namespaceStack.length-1;e>=0;e--)if(this.namespaceStack[e].namespaceUri===t)return this.namespaceStack[e].prefix},t.prototype.lookupNamespace=function(t){for(var e=this.namespaceStack.length-1;e>=0;e--)if(this.namespaceStack[e].prefix===t)return this.namespaceStack[e].namespaceUri},t.prototype.lookupNamespaceIndex=function(t){for(var e=this.namespaceStack.length-1;e>=0;e--)if(this.namespaceStack[e].prefix===t)return e;return-1},t.prototype.pushNamespaceImplicit=function(t,e){var i,n=this.lookupNamespaceIndex(t);if(-1!==n){if(n>this.elementStack[this.elementStack.length-1].previousTop){if(this.namespaceStack[n].namespaceUri!==e)throw new Error("XmlException namespace Uri needs to be the same as the one that is already declared");return}if("Special"===this.namespaceStack[n].kind){if("xml"!==t)throw new Error('InvalidArgumentException: Prefix "xmlns" is reserved for use by XML.');if(e!==this.namespaceStack[n].namespaceUri)throw new Error("InvalidArgumentException: Xml String");i="Implied"}else i=this.namespaceStack[n].namespaceUri===e?"Implied":"NeedToWrite"}else{if("http://www.w3.org/XML/1998/namespace"===e&&"xml"!==t||"http://www.w3.org/2000/xmlns/"===e&&"xmlns"!==t)throw new Error("InvalidArgumentException");i="NeedToWrite"}this.addNamespace(t,e,i)},t.prototype.pushNamespaceExplicit=function(t,e){var i=this.lookupNamespaceIndex(t);-1!==i&&i>this.elementStack[this.elementStack.length-1].previousTop?this.namespaceStack[i].kind="Written":this.addNamespace(t,e,"Written")},t.prototype.addAttribute=function(t,e,i){var n=this.attributeStack.length;this.attributeStack.push(new aC),this.attributeStack[n].set(t,e,i);for(var r=0;r<n;r++)if(this.attributeStack[r].isDuplicate(t,e,i))throw new Error("XmlException: duplicate attribute name")},t.prototype.skipPushAndWrite=function(t,e,i){this.addAttribute(t,e,i),this.writeStartAttributeInternal(t,e,i)},t.prototype.checkName=function(t){if(/[ !@#$%^&*()+\=\[\]{};':"\\|,<>\/?]/.test(t))throw new Error("InvalidArgumentException: invalid name character")},t}(),oC=function(){function t(){}return t.prototype.set=function(t,e,i){this.prefix=t,this.namespaceUri=e,this.kind=i},t.prototype.destroy=function(){this.prefix=void 0,this.namespaceUri=void 0,this.kind=void 0},t}(),sC=function(){function t(){}return t.prototype.set=function(t,e,i,n){this.previousTop=n,this.prefix=t,this.namespaceUri=i,this.localName=e},t.prototype.destroy=function(){this.previousTop=void 0,this.prefix=void 0,this.localName=void 0,this.namespaceUri=void 0},t}(),aC=function(){function t(){}return t.prototype.set=function(t,e,i){this.prefix=t,this.namespaceUri=i,this.localName=e},t.prototype.isDuplicate=function(t,e,i){return this.localName===e&&(this.prefix===t||this.namespaceUri===i)},t.prototype.destroy=function(){this.prefix=void 0,this.namespaceUri=void 0,this.localName=void 0},t}(),lC=function(){function t(t){this.emitBOM=!0,this.encodingType="Ansi",this.initBOM(t)}return Object.defineProperty(t.prototype,"includeBom",{get:function(){return this.emitBOM},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.encodingType},set:function(t){this.encodingType=t},enumerable:!0,configurable:!0}),t.prototype.initBOM=function(t){this.emitBOM=null==t||t},t.prototype.getByteCount=function(t){return hC(t,"string"),""===t?this.utf8Len(t.charCodeAt(0)):(null!==this.type&&void 0!==this.type||(this.type="Ansi"),this.getByteCountInternal(t,0,t.length))},t.prototype.utf8Len=function(t){return t<=127?1:t<=2047?2:t<=65535?3:t<=2097151?4:0},t.prototype.isHighSurrogate=function(t){return t>=55296&&t<=56319},t.prototype.toCodepoint=function(t,e){return((t=(1023&t)<<10)|1023&e)+65536},t.prototype.getByteCountInternal=function(t,e,i){var n=0;if("Utf8"===this.encodingType||"Unicode"===this.encodingType){for(var r="Utf8"===this.encodingType,o=0;o<i;o++){var s=t.charCodeAt(r?e:e++);if(this.isHighSurrogate(s))if(r){var a=s,l=t.charCodeAt(++e);n+=this.utf8Len(this.toCodepoint(a,l))}else n+=4,++o;else n+=r?this.utf8Len(s):2;r&&e++}return n}return n=i},t.prototype.getBytes=function(t,e,i){if(hC(t,"string"),hC(e,"charIndex"),hC(i,"charCount"),e<0||i<0)throw new RangeError("Argument Out Of Range Exception: charIndex or charCount is less than zero");if(t.length-e<i)throw new RangeError("Argument Out Of Range Exception: charIndex and charCount do not denote a valid range in string");if(""===t)return new ArrayBuffer(0);null!==this.type&&void 0!==this.type||(this.type="Ansi");var n=this.getByteCountInternal(t,e,i);switch(this.type){case"Utf8":return this.getBytesOfUtf8Encoding(n,t,e,i);case"Unicode":return this.getBytesOfUnicodeEncoding(n,t,e,i);default:return this.getBytesOfAnsiEncoding(n,t,e,i)}},t.prototype.getString=function(t,e,i){if(hC(t,"bytes"),hC(e,"index"),hC(i,"count"),e<0||i<0)throw new RangeError("Argument Out Of Range Exception: index or count is less than zero");if(t.byteLength-e<i)throw new RangeError("Argument Out Of Range Exception: index and count do not denote a valid range in bytes");if(0===t.byteLength||0===i)return"";null!==this.type&&void 0!==this.type||(this.type="Ansi");var n="",r=new Uint8Array(t);switch(this.type){case"Utf8":return this.getStringOfUtf8Encoding(r,e,i);case"Unicode":var o=new Uint16Array(t);return n=this.getStringofUnicodeEncoding(o,e,i);default:for(var s=e,a=0;a<i;a++){var l=r[s];n+=String.fromCharCode(l),s++}return n}},t.prototype.getBytesOfAnsiEncoding=function(t,e,i,n){for(var r=new ArrayBuffer(t),o=new Uint8Array(r),s=0,a=0;a<n;a++){var l=e.charCodeAt(i++);o[s]=l<2048?l:63,s++}return r},t.prototype.getBytesOfUtf8Encoding=function(t,e,i,n){for(var r=new ArrayBuffer(t),o=new Uint8Array(r),s=i,a=0,l=0;l<n;l++){var h=e.charCodeAt(s);h<=127?o[a]=h:h<2048?(o[a]=192|h>>6,o[++a]=128|63&h):h<55296||h>=57344?(o[a]=224|h>>12,o[++a]=128|h>>6&63,o[++a]=128|63&h):(o[a]=239,o[++a]=191,o[++a]=189),++a,++s}return r},t.prototype.getBytesOfUnicodeEncoding=function(t,e,i,n){for(var r=new ArrayBuffer(t),o=new Uint16Array(r),s=0;s<n;s++){var a=e.charCodeAt(s);o[s]=a}return r},t.prototype.getStringOfUtf8Encoding=function(t,e,i){for(var n=0,r=e,o="";n<i;n++){for(var s=t[r++];r>t.length;)return o;s>127&&(s>191&&s<224&&r<i?s=(31&s)<<6|63&t[r]:s>223&&s<240&&r<t.byteLength?s=(15&s)<<12|(63&t[r])<<6|63&t[++r]:s>239&&s<248&&r<t.byteLength&&(s=(7&s)<<18|(63&t[r])<<12|(63&t[++r])<<6|63&t[++r]),++r),o+=String.fromCharCode(s)}return o},t.prototype.getStringofUnicodeEncoding=function(t,e,i){if(i>t.length)throw new RangeError("ArgumentOutOfRange_Count");for(var n=new Uint16Array(i),r=0;r<i&&r<t.length;r++)n[r]=t[e++];return String.fromCharCode.apply(null,n)},t.prototype.destroy=function(){this.emitBOM=void 0,this.encodingType=void 0},t}();function hC(t,e){if(null==t)throw new Error("ArgumentException: "+e+" cannot be null or undefined")}var cC,dC=function(){function t(t){this.bufferBlob=new Blob([""]),this.bufferText="",this.init(t),nC.isMicrosoftBrowser=!!navigator.msSaveBlob}return Object.defineProperty(t.prototype,"buffer",{get:function(){return this.flush(),this.bufferBlob},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"encoding",{get:function(){return this.enc},enumerable:!0,configurable:!0}),t.prototype.init=function(t){null==t?(this.enc=new lC(!1),this.enc.type="Utf8"):(this.enc=t,this.setBomByte())},t.prototype.setBomByte=function(){if(this.encoding.includeBom)switch(this.encoding.type){case"Unicode":var t=new ArrayBuffer(2),e=new Uint8Array(t);e[0]=255,e[1]=254,this.bufferBlob=new Blob([t]);break;case"Utf8":var i=new ArrayBuffer(3),n=new Uint8Array(i);n[0]=239,n[1]=187,n[2]=191,this.bufferBlob=new Blob([i]);break;default:this.bufferBlob=new Blob([""])}},t.prototype.save=function(t){""!==this.bufferText&&this.flush(),nC.save(t,this.buffer)},t.prototype.write=function(t){if(void 0===this.encoding)throw new Error("Object Disposed Exception: current writer is disposed");hC(t,"string"),this.bufferText+=t,this.bufferText.length>=10240&&this.flush()},t.prototype.flush=function(){if(void 0!==this.bufferText&&null!==this.bufferText&&0!==this.bufferText.length){var t=this.encoding.getBytes(this.bufferText,0,this.bufferText.length);this.bufferText="",this.bufferBlob=new Blob([this.bufferBlob,t])}},t.prototype.writeLine=function(t){if(void 0===this.encoding)throw new Error("Object Disposed Exception: current writer is disposed");hC(t,"string"),this.bufferText=this.bufferText+t+"\r\n",this.bufferText.length>=10240&&this.flush()},t.prototype.destroy=function(){this.bufferBlob=void 0,this.bufferText=void 0,this.enc instanceof lC&&this.enc.destroy(),this.enc=void 0},t}(),pC=new Int16Array(286),uC=new Uint8Array(286),fC=new Int16Array(30),gC=new Uint8Array(30),mC=function(){function t(e){this.pendingBuffer=new Uint8Array(65536),this.pendingBufLength=0,this.pendingBufCache=0,this.pendingBufBitsInCache=0,this.bufferPosition=0,this.extraBits=0,this.currentHash=0,this.matchStart=0,this.matchLength=0,this.matchPrevAvail=!1,this.blockStart=0,this.stringStart=0,this.lookAhead=0,this.totalBytesIn=0,this.inputOffset=0,this.inputEnd=0,this.windowSize=32768,this.windowMask=this.windowSize-1,this.hashSize=32768,this.hashMask=this.hashSize-1,this.hashShift=Math.floor(17/3),this.maxDist=this.windowSize-262,this.checkSum=1,this.noWrap=!1,t.isHuffmanTreeInitiated||(t.initHuffmanTree(),t.isHuffmanTreeInitiated=!0),this.treeLiteral=new yC(this,286,257,15),this.treeDistances=new yC(this,30,1,15),this.treeCodeLengths=new yC(this,19,4,7),this.arrDistances=new Uint16Array(16384),this.arrLiterals=new Uint8Array(16384),this.stream=[],this.dataWindow=new Uint8Array(2*this.windowSize),this.hashHead=new Int16Array(this.hashSize),this.hashPrevious=new Int16Array(this.windowSize),this.blockStart=this.stringStart=1,this.noWrap=e,e||this.writeZLibHeader()}return Object.defineProperty(t.prototype,"compressedData",{get:function(){return this.stream},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getCompressedString",{get:function(){var t="";if(void 0!==this.stream)for(var e=0;e<this.stream.length;e++)t+=String.fromCharCode.apply(null,this.stream[e]);return t},enumerable:!0,configurable:!0}),t.prototype.write=function(t,e,i){if(null==t)throw new Error("ArgumentException: data cannot null or undefined");var n=e+i;if(0>e||e>n||n>t.length)throw new Error("ArgumentOutOfRangeException: Offset or length is incorrect");if("string"==typeof t){var r=new lC(!1);r.type="Utf8",n=e+(t=new Uint8Array(r.getBytes(t,0,t.length))).length}for(this.inputBuffer=t,this.inputOffset=e,this.inputEnd=n,this.noWrap||(this.checkSum=vC.checksumUpdate(this.checkSum,this.inputBuffer,this.inputOffset,n));this.inputEnd!==this.inputOffset||0!==this.pendingBufLength;)this.pendingBufferFlush(),this.compressData(!1)},t.prototype.writeZLibHeader=function(){var t=30720;t|=64,t+=31-t%31,this.pendingBufferWriteShortBytes(t)},t.prototype.pendingBufferWriteShortBytes=function(t){this.pendingBuffer[this.pendingBufLength++]=t>>8,this.pendingBuffer[this.pendingBufLength++]=t},t.prototype.compressData=function(t){var e;do{this.fillWindow();var i=t&&this.inputEnd===this.inputOffset;e=this.compressSlow(i,t)}while(0===this.pendingBufLength&&e);return e},t.prototype.compressSlow=function(t,e){if(this.lookAhead<262&&!t)return!1;for(;this.lookAhead>=262||t;){if(0===this.lookAhead)return this.lookAheadCompleted(e);this.stringStart>=2*this.windowSize-262&&this.slideWindow();var i=this.matchStart,n=this.matchLength;if(this.lookAhead>=3&&this.discardMatch(),n>=3&&this.matchLength<=n?n=this.matchPreviousBest(i,n):this.matchPreviousAvailable(),this.bufferPosition>=16384)return this.huffmanIsFull(e)}return!0},t.prototype.discardMatch=function(){var t=this.insertString();0!==t&&this.stringStart-t<=this.maxDist&&this.findLongestMatch(t)&&this.matchLength<=5&&3===this.matchLength&&this.stringStart-this.matchStart>4096&&(this.matchLength=2)},t.prototype.matchPreviousAvailable=function(){this.matchPrevAvail&&this.huffmanTallyLit(255&this.dataWindow[this.stringStart-1]),this.matchPrevAvail=!0,this.stringStart++,this.lookAhead--},t.prototype.matchPreviousBest=function(t,e){this.huffmanTallyDist(this.stringStart-1-t,e),e-=2;do{this.stringStart++,this.lookAhead--,this.lookAhead>=3&&this.insertString()}while(--e>0);return this.stringStart++,this.lookAhead--,this.matchPrevAvail=!1,this.matchLength=2,e},t.prototype.lookAheadCompleted=function(t){return this.matchPrevAvail&&this.huffmanTallyLit(255&this.dataWindow[this.stringStart-1]),this.matchPrevAvail=!1,this.huffmanFlushBlock(this.dataWindow,this.blockStart,this.stringStart-this.blockStart,t),this.blockStart=this.stringStart,!1},t.prototype.huffmanIsFull=function(t){var e=this.stringStart-this.blockStart;this.matchPrevAvail&&e--;var i=t&&0===this.lookAhead&&!this.matchPrevAvail;return this.huffmanFlushBlock(this.dataWindow,this.blockStart,e,i),this.blockStart+=e,!i},t.prototype.fillWindow=function(){for(this.stringStart>=this.windowSize+this.maxDist&&this.slideWindow();this.lookAhead<262&&this.inputOffset<this.inputEnd;){var t=2*this.windowSize-this.lookAhead-this.stringStart;t>this.inputEnd-this.inputOffset&&(t=this.inputEnd-this.inputOffset),this.dataWindow.set(this.inputBuffer.subarray(this.inputOffset,this.inputOffset+t),this.stringStart+this.lookAhead),this.inputOffset+=t,this.totalBytesIn+=t,this.lookAhead+=t}this.lookAhead>=3&&this.updateHash()},t.prototype.slideWindow=function(){this.dataWindow.set(this.dataWindow.subarray(this.windowSize,this.windowSize+this.windowSize),0),this.matchStart-=this.windowSize,this.stringStart-=this.windowSize,this.blockStart-=this.windowSize;for(var t=0;t<this.hashSize;++t){var e=65535&this.hashHead[t];this.hashHead[t]=e>=this.windowSize?e-this.windowSize:0}for(t=0;t<this.windowSize;t++){e=65535&this.hashPrevious[t];this.hashPrevious[t]=e>=this.windowSize?e-this.windowSize:0}},t.prototype.insertString=function(){var t,e=(this.currentHash<<this.hashShift^this.dataWindow[this.stringStart+2])&this.hashMask;return this.hashPrevious[this.stringStart&this.windowMask]=t=this.hashHead[e],this.hashHead[e]=this.stringStart,this.currentHash=e,65535&t},t.prototype.findLongestMatch=function(t){var e,i=4096,n=258,r=this.stringStart,o=this.stringStart+this.matchLength,s=Math.max(this.matchLength,2),a=Math.max(this.stringStart-this.maxDist,0),l=this.stringStart+258-1,h=this.dataWindow[o-1],c=this.dataWindow[o],d=this.dataWindow;s>=32&&(i>>=2),n>this.lookAhead&&(n=this.lookAhead);do{if(d[t+s]===c&&d[t+s-1]===h&&d[t]===d[r]&&d[t+1]===d[r+1]){for(e=t+2,r+=2;d[++r]===d[++e]&&d[++r]===d[++e]&&d[++r]===d[++e]&&d[++r]===d[++e]&&d[++r]===d[++e]&&d[++r]===d[++e]&&d[++r]===d[++e]&&d[++r]===d[++e]&&r<l;);if(r>o){if(this.matchStart=t,o=r,(s=r-this.stringStart)>=n)break;h=d[o-1],c=d[o]}r=this.stringStart}}while((t=65535&this.hashPrevious[t&this.windowMask])>a&&0!=--i);return this.matchLength=Math.min(s,this.lookAhead),this.matchLength>=3},t.prototype.updateHash=function(){this.currentHash=this.dataWindow[this.stringStart]<<this.hashShift^this.dataWindow[this.stringStart+1]},t.prototype.huffmanTallyLit=function(t){return this.arrDistances[this.bufferPosition]=0,this.arrLiterals[this.bufferPosition++]=t,this.treeLiteral.codeFrequencies[t]++,this.bufferPosition>=16384},t.prototype.huffmanTallyDist=function(t,e){this.arrDistances[this.bufferPosition]=t,this.arrLiterals[this.bufferPosition++]=e-3;var i=this.huffmanLengthCode(e-3);this.treeLiteral.codeFrequencies[i]++,i>=265&&i<285&&(this.extraBits+=Math.floor((i-261)/4));var n=this.huffmanDistanceCode(t-1);return this.treeDistances.codeFrequencies[n]++,n>=4&&(this.extraBits+=Math.floor(n/2-1)),this.bufferPosition>=16384},t.prototype.huffmanFlushBlock=function(t,e,i,n){this.treeLiteral.codeFrequencies[256]++,this.treeLiteral.buildTree(),this.treeDistances.buildTree(),this.treeLiteral.calculateBLFreq(this.treeCodeLengths),this.treeDistances.calculateBLFreq(this.treeCodeLengths),this.treeCodeLengths.buildTree();for(var r=4,o=18;o>r;o--)this.treeCodeLengths.codeLengths[yC.huffCodeLengthOrders[o]]>0&&(r=o+1);var s=14+3*r+this.treeCodeLengths.getEncodedLength()+this.treeLiteral.getEncodedLength()+this.treeDistances.getEncodedLength()+this.extraBits,a=this.extraBits;for(o=0;o<286;o++)a+=this.treeLiteral.codeFrequencies[o]*uC[o];for(o=0;o<30;o++)a+=this.treeDistances.codeFrequencies[o]*gC[o];s>=a&&(s=a),e>=0&&i+4<s>>3?this.huffmanFlushStoredBlock(t,e,i,n):s==a?(this.pendingBufferWriteBits(2+(n?1:0),3),this.treeLiteral.setStaticCodes(pC,uC),this.treeDistances.setStaticCodes(fC,gC),this.huffmanCompressBlock(),this.huffmanReset()):(this.pendingBufferWriteBits(4+(n?1:0),3),this.huffmanSendAllTrees(r),this.huffmanCompressBlock(),this.huffmanReset())},t.prototype.huffmanFlushStoredBlock=function(t,e,i,n){this.pendingBufferWriteBits(0+(n?1:0),3),this.pendingBufferAlignToByte(),this.pendingBufferWriteShort(i),this.pendingBufferWriteShort(~i),this.pendingBufferWriteByteBlock(t,e,i),this.huffmanReset()},t.prototype.huffmanLengthCode=function(t){if(255===t)return 285;for(var e=257;t>=8;)e+=4,t>>=1;return e+t},t.prototype.huffmanDistanceCode=function(t){for(var e=0;t>=4;)e+=2,t>>=1;return e+t},t.prototype.huffmanSendAllTrees=function(t){this.treeCodeLengths.buildCodes(),this.treeLiteral.buildCodes(),this.treeDistances.buildCodes(),this.pendingBufferWriteBits(this.treeLiteral.treeLength-257,5),this.pendingBufferWriteBits(this.treeDistances.treeLength-1,5),this.pendingBufferWriteBits(t-4,4);for(var e=0;e<t;e++)this.pendingBufferWriteBits(this.treeCodeLengths.codeLengths[yC.huffCodeLengthOrders[e]],3);this.treeLiteral.writeTree(this.treeCodeLengths),this.treeDistances.writeTree(this.treeCodeLengths)},t.prototype.huffmanReset=function(){this.bufferPosition=0,this.extraBits=0,this.treeLiteral.reset(),this.treeDistances.reset(),this.treeCodeLengths.reset()},t.prototype.huffmanCompressBlock=function(){for(var t=0;t<this.bufferPosition;t++){var e=255&this.arrLiterals[t],i=this.arrDistances[t];if(0!=i--){var n=this.huffmanLengthCode(e);this.treeLiteral.writeCodeToStream(n);var r=Math.floor((n-261)/4);r>0&&r<=5&&this.pendingBufferWriteBits(e&(1<<r)-1,r);var o=this.huffmanDistanceCode(i);this.treeDistances.writeCodeToStream(o),(r=Math.floor(o/2-1))>0&&this.pendingBufferWriteBits(i&(1<<r)-1,r)}else this.treeLiteral.writeCodeToStream(e)}this.treeLiteral.writeCodeToStream(256)},t.prototype.pendingBufferWriteBits=function(t,e){var i=new Uint32Array(1);i[0]=this.pendingBufCache|t<<this.pendingBufBitsInCache,this.pendingBufCache=i[0],this.pendingBufBitsInCache+=e,this.pendingBufferFlushBits()},t.prototype.pendingBufferFlush=function(t){if(this.pendingBufferFlushBits(),this.pendingBufLength>0){var e=new Uint8Array(this.pendingBufLength);e.set(this.pendingBuffer.subarray(0,this.pendingBufLength),0),this.stream.push(e)}this.pendingBufLength=0},t.prototype.pendingBufferFlushBits=function(){for(var t=0;this.pendingBufBitsInCache>=8&&this.pendingBufLength<65536;)this.pendingBuffer[this.pendingBufLength++]=this.pendingBufCache,this.pendingBufCache>>=8,this.pendingBufBitsInCache-=8,t++;return t},t.prototype.pendingBufferWriteByteBlock=function(t,e,i){var n=t.subarray(e,e+i);this.pendingBuffer.set(n,this.pendingBufLength),this.pendingBufLength+=i},t.prototype.pendingBufferWriteShort=function(t){this.pendingBuffer[this.pendingBufLength++]=t,this.pendingBuffer[this.pendingBufLength++]=t>>8},t.prototype.pendingBufferAlignToByte=function(){this.pendingBufBitsInCache>0&&(this.pendingBuffer[this.pendingBufLength++]=this.pendingBufCache),this.pendingBufCache=0,this.pendingBufBitsInCache=0},t.initHuffmanTree=function(){for(var t=0;t<144;)pC[t]=yC.bitReverse(48+t<<8),uC[t++]=8;for(;t<256;)pC[t]=yC.bitReverse(256+t<<7),uC[t++]=9;for(;t<280;)pC[t]=yC.bitReverse(-256+t<<9),uC[t++]=7;for(;t<286;)pC[t]=yC.bitReverse(-88+t<<8),uC[t++]=8;for(t=0;t<30;t++)fC[t]=yC.bitReverse(t<<11),gC[t]=5},t.prototype.close=function(){do{this.pendingBufferFlush(!0),this.compressData(!0)||(this.pendingBufferFlush(!0),this.pendingBufferAlignToByte(),this.noWrap||(this.pendingBufferWriteShortBytes(this.checkSum>>16),this.pendingBufferWriteShortBytes(65535&this.checkSum)),this.pendingBufferFlush(!0))}while(this.inputEnd!==this.inputOffset||0!==this.pendingBufLength)},t.prototype.destroy=function(){this.stream=[],this.stream=void 0,this.pendingBuffer=void 0,this.treeLiteral=void 0,this.treeDistances=void 0,this.treeCodeLengths=void 0,this.arrLiterals=void 0,this.arrDistances=void 0,this.hashHead=void 0,this.hashPrevious=void 0,this.dataWindow=void 0,this.inputBuffer=void 0,this.pendingBufLength=void 0,this.pendingBufCache=void 0,this.pendingBufBitsInCache=void 0,this.bufferPosition=void 0,this.extraBits=void 0,this.currentHash=void 0,this.matchStart=void 0,this.matchLength=void 0,this.matchPrevAvail=void 0,this.blockStart=void 0,this.stringStart=void 0,this.lookAhead=void 0,this.totalBytesIn=void 0,this.inputOffset=void 0,this.inputEnd=void 0,this.windowSize=void 0,this.windowMask=void 0,this.hashSize=void 0,this.hashMask=void 0,this.hashShift=void 0,this.maxDist=void 0,this.checkSum=void 0,this.noWrap=void 0},t.isHuffmanTreeInitiated=!1,t}(),yC=function(){function t(t,e,i,n){this.writer=t,this.codeMinCount=i,this.maxLength=n,this.codeFrequency=new Uint16Array(e),this.lengthCount=new Int32Array(n)}return Object.defineProperty(t.prototype,"treeLength",{get:function(){return this.codeCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"codeLengths",{get:function(){return this.codeLength},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"codeFrequencies",{get:function(){return this.codeFrequency},enumerable:!0,configurable:!0}),t.prototype.setStaticCodes=function(t,e){var i=new Int16Array(t.length);i.set(t,0),this.codes=i;var n=new Uint8Array(e.length);n.set(e,0),this.codeLength=n},t.prototype.reset=function(){for(var t=0;t<this.codeFrequency.length;t++)this.codeFrequency[t]=0;this.codes=void 0,this.codeLength=void 0},t.prototype.writeCodeToStream=function(t){this.writer.pendingBufferWriteBits(65535&this.codes[t],this.codeLength[t])},t.prototype.buildCodes=function(){var e=new Int32Array(this.maxLength);this.codes=new Int16Array(this.codeCount);for(var i=0,n=0;n<this.maxLength;n++)e[n]=i,i+=this.lengthCount[n]<<15-n;for(var r=0;r<this.codeCount;r++){var o=this.codeLength[r];o>0&&(this.codes[r]=t.bitReverse(e[o-1]),e[o-1]+=1<<16-o)}},t.bitReverse=function(e){return t.reverseBits[15&e]<<12|t.reverseBits[e>>4&15]<<8|t.reverseBits[e>>8&15]<<4|t.reverseBits[e>>12]},t.prototype.getEncodedLength=function(){for(var t=0,e=0;e<this.codeFrequency.length;e++)t+=this.codeFrequency[e]*this.codeLength[e];return t},t.prototype.calculateBLFreq=function(t){for(var e,i,n,r=-1,o=0;o<this.codeCount;){n=1;var s=this.codeLength[o];for(0===s?(e=138,i=3):(e=6,i=3,r!==s&&(t.codeFrequency[s]++,n=0)),r=s,o++;o<this.codeCount&&r===this.codeLength[o]&&(o++,!(++n>=e)););n<i?t.codeFrequency[r]+=n:0!==r?t.codeFrequency[16]++:n<=10?t.codeFrequency[17]++:t.codeFrequency[18]++}},t.prototype.writeTree=function(t){for(var e,i,n,r=-1,o=0;o<this.codeCount;){n=1;var s=this.codeLength[o];for(0===s?(e=138,i=3):(e=6,i=3,r!==s&&(t.writeCodeToStream(s),n=0)),r=s,o++;o<this.codeCount&&r===this.codeLength[o]&&(o++,!(++n>=e)););if(n<i)for(;n-- >0;)t.writeCodeToStream(r);else 0!==r?(t.writeCodeToStream(16),this.writer.pendingBufferWriteBits(n-3,2)):n<=10?(t.writeCodeToStream(17),this.writer.pendingBufferWriteBits(n-3,3)):(t.writeCodeToStream(18),this.writer.pendingBufferWriteBits(n-11,7))}},t.prototype.buildTree=function(){for(var t=this.codeFrequency.length,e=new Int32Array(t),i=0,n=0,r=0;r<t;r++){var o=this.codeFrequency[r];if(0!==o){for(var s=i++,a=0;s>0&&this.codeFrequency[e[a=Math.floor((s-1)/2)]]>o;)e[s]=e[a],s=a;e[s]=r,n=r}}for(;i<2;)e[i++]=n<2?++n:0;this.codeCount=Math.max(n+1,this.codeMinCount);for(var l=i,h=new Int32Array(4*i-2),c=new Int32Array(2*i-1),d=0;d<i;d++){var p=e[d],u=2*d;h[u]=p,h[u+1]=-1,c[d]=this.codeFrequency[p]<<8,e[d]=d}this.constructHuffmanTree(e,i,c,l,h),this.buildLength(h)},t.prototype.constructHuffmanTree=function(t,e,i,n,r){do{for(var o=t[0],s=t[--e],a=i[s],l=0,h=1;h<e;)h+1<e&&i[t[h]]>i[t[h+1]]&&h++,t[l]=t[h],h=2*(l=h)+1;for(;(h=l)>0&&i[t[l=Math.floor((h-1)/2)]]>a;)t[h]=t[l];t[h]=s;var c=t[0];r[2*(s=n++)]=o,r[2*s+1]=c;var d=Math.min(255&i[o],255&i[c]);for(i[s]=a=i[o]+i[c]-d+1,l=0,h=1;h<e;)h+1<e&&i[t[h]]>i[t[h+1]]&&h++,t[l]=t[h],h=2*(l=h)+1;for(;(h=l)>0&&i[t[l=Math.floor((h-1)/2)]]>a;)t[h]=t[l];t[h]=s}while(e>1)},t.prototype.buildLength=function(t){this.codeLength=new Uint8Array(this.codeFrequency.length);for(var e=Math.floor(t.length/2),i=Math.floor((e+1)/2),n=0,r=0;r<this.maxLength;r++)this.lengthCount[r]=0;if(0!==(n=this.calculateOptimalCodeLength(t,n,e))){var o=this.maxLength-1;do{for(;0===this.lengthCount[--o];);do{this.lengthCount[o]--,this.lengthCount[++o]++,n-=1<<this.maxLength-1-o}while(n>0&&o<this.maxLength-1)}while(n>0);this.recreateTree(t,n,i)}},t.prototype.recreateTree=function(t,e,i){this.lengthCount[this.maxLength-1]+=e,this.lengthCount[this.maxLength-2]-=e;for(var n=2*i,r=this.maxLength;0!==r;r--)for(var o=this.lengthCount[r-1];o>0;){var s=2*t[n++];-1===t[s+1]&&(this.codeLength[t[s]]=r,o--)}},t.prototype.calculateOptimalCodeLength=function(t,e,i){var n=new Int32Array(i);n[i-1]=0;for(var r=i-1;r>=0;r--){var o=2*r+1;if(-1!==t[o]){(s=n[r]+1)>this.maxLength&&(s=this.maxLength,e++),n[t[o-1]]=n[t[o]]=s}else{var s=n[r];this.lengthCount[s-1]++,this.codeLength[t[o-1]]=n[r]}}return e},t.reverseBits=[0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15],t.huffCodeLengthOrders=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],t}(),vC=function(){function t(){}return t.checksumUpdate=function(e,i,n,r){var o=new Uint32Array(1);o[0]=e;for(var s=o[0],a=o[0]=65535&s,l=o[0]=s>>t.checkSumBitOffset;r>0;){var h=Math.min(r,t.checksumIterationCount);for(r-=h;--h>=0;)l+=a+=o[0]=255&i[n++];a%=t.checksumBase,l%=t.checksumBase}return s=l<<t.checkSumBitOffset|a},t.checkSumBitOffset=16,t.checksumBase=65521,t.checksumIterationCount=3800,t}(),bC=[],wC=function(){function t(){0===bC.length&&t.initCrc32Table(),this.files=[],this.level="Normal",nC.isMicrosoftBrowser=!!navigator.msSaveBlob}return Object.defineProperty(t.prototype,"compressionLevel",{get:function(){return this.level},set:function(t){this.level=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return void 0===this.files?0:this.files.length},enumerable:!0,configurable:!0}),t.prototype.addItem=function(t){if(null==t)throw new Error("ArgumentException: item cannot be null or undefined");for(var e=0;e<this.files.length;e++){var i=this.files[e];if(i instanceof SC&&i.name===t.name)throw new Error("item with same name already exist")}this.files.push(t)},t.prototype.addDirectory=function(t){if(null==t)throw new Error("ArgumentException: string cannot be null or undefined");if(0===t.length)throw new Error("ArgumentException: string cannot be empty");if("/"!==t.slice(-1)&&(t+="/"),-1!==this.files.indexOf(t))throw new Error("item with same name already exist");this.files.push(t)},t.prototype.getItem=function(t){if(t>=0&&t<this.files.length)return this.files[t]},t.prototype.contains=function(t){return-1!==this.files.indexOf(t)},t.prototype.save=function(t){if(null==t||0===t.length)throw new Error("ArgumentException: fileName cannot be null or undefined");if(0===this.files.length)throw new Error("InvalidOperation");var e=this;return new Promise(function(i,n){e.saveInternal(t,!1).then(function(){i(e)})})},t.prototype.saveAsBlob=function(){var t=this;return new Promise(function(e,i){t.saveInternal("",!0).then(function(t){e(t)})})},t.prototype.saveInternal=function(t,e){var i=this,n=this;return new Promise(function(r,o){for(var s=[],a=0,l=0;l<n.files.length;l++){i.getCompressedData(i.files[l]).then(function(i){if(a=n.constructZippedObject(s,i,a,i.isDirectory),s.length===n.files.length){var o=n.writeZippedContent(t,s,a,e);r(o)}})}})},t.prototype.destroy=function(){if(void 0!==this.files&&this.files.length>0){for(var t=0;t<this.files.length;t++){var e=this.files[t];e instanceof SC&&e.destroy(),e=void 0}this.files=[]}this.files=void 0,this.level=void 0},t.prototype.getCompressedData=function(t){var e=this;return new Promise(function(i,n){if(t instanceof SC){var r=new FileReader;r.onload=function(){var n=new Uint8Array(r.result),o={fileName:t.name,crc32Value:0,compressedData:[],compressedSize:void 0,uncompressedDataSize:n.length,compressionType:void 0,isDirectory:!1};if("Normal"===e.level){e.compressData(n,o,bC);for(var s=0,a=0;a<o.compressedData.length;a++)s+=o.compressedData[a].length;o.compressedSize=s,o.compressionType="\b\0"}else o.compressedSize=n.length,o.crc32Value=e.calculateCrc32Value(0,n,bC),o.compressionType="\0\0",o.compressedData.push(n);i(o)},r.readAsArrayBuffer(t.data)}else{i({fileName:t,crc32Value:0,compressedData:"",compressedSize:0,uncompressedDataSize:0,compressionType:"\0\0",isDirectory:!0})}})},t.prototype.compressData=function(t,e,i){var n=new mC(!0),r=0,o=0;do{if(r>=t.length){n.close();break}o=Math.min(t.length,r+16384);var s=t.subarray(r,o);e.crc32Value=this.calculateCrc32Value(e.crc32Value,s,i),n.write(s,0,o-r),r=o}while(r<=t.length);e.compressedData=n.compressedData,n.destroy()},t.prototype.constructZippedObject=function(t,e,i,n){var r=0,o=new Date;n&&(r|=16),r|=0;var s=this.writeHeader(e,o),a="PK"+s+e.fileName,l=this.writeCentralDirectory(e,s,i,r);return t.push({localHeader:a,centralDir:l,compressedData:e}),i+a.length+e.compressedSize},t.prototype.writeHeader=function(t,e){var i="";return i+="\n\0\0\0",i+=t.compressionType,i+=this.getBytes(this.getModifiedTime(e),2),i+=this.getBytes(this.getModifiedDate(e),2),i+=this.getBytes(t.crc32Value,4),i+=this.getBytes(t.compressedSize,4),i+=this.getBytes(t.uncompressedDataSize,4),i+=this.getBytes(t.fileName.length,2),i+=this.getBytes(0,2)},t.prototype.writeZippedContent=function(t,e,i,n){for(var r=0,o=[],s=0;s<e.length;s++){var a=e[s];for(r+=a.centralDir.length,o.push(this.getArrayBuffer(a.localHeader));a.compressedData.compressedData.length;)o.push(a.compressedData.compressedData.shift().buffer)}for(s=0;s<e.length;s++)o.push(this.getArrayBuffer(e[s].centralDir));o.push(this.getArrayBuffer(this.writeFooter(e,r,i)));var l=new Blob(o,{type:"application/zip"});return n||nC.save(t,l),l},t.prototype.writeCentralDirectory=function(t,e,i,n){return"PK"+this.getBytes(20,2)+e+this.getBytes(0,2)+"\0\0\0\0"+this.getBytes(n,4)+this.getBytes(i,4)+t.fileName},t.prototype.writeFooter=function(t,e,i){return"PK\0\0\0\0"+this.getBytes(t.length,2)+this.getBytes(t.length,2)+this.getBytes(e,4)+this.getBytes(i,4)+this.getBytes(0,2)},t.prototype.getArrayBuffer=function(t){for(var e=new Uint8Array(t.length),i=0;i<t.length;++i)e[i]=255&t.charCodeAt(i);return e.buffer},t.prototype.getBytes=function(t,e){for(var i="",n=0;n<e;n++)i+=String.fromCharCode(255&t),t>>>=8;return i},t.prototype.getModifiedTime=function(t){var e=t.getHours();return e<<=6,e|=t.getMinutes(),(e<<=5)|t.getSeconds()/2},t.prototype.getModifiedDate=function(t){var e=t.getFullYear()-1980;return e<<=4,e|=t.getMonth()+1,(e<<=5)|t.getDate()},t.prototype.calculateCrc32Value=function(t,e,i){t^=-1;for(var n=0;n<e.length;n++)t=t>>>8^i[255&(t^e[n])];return-1^t},t.initCrc32Table=function(){for(var t,e=0;e<256;e++){t=e;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;bC[e]=t}},t}(),SC=function(){function t(t,e){if(null==t)throw new Error("ArgumentException: data cannot be null or undefined");if(null==e)throw new Error("ArgumentException: string cannot be null or undefined");if(0===e.length)throw new Error("string cannot be empty");this.data=t,this.name=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this.fileName},set:function(t){this.fileName=t},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.fileName=void 0,this.data=void 0},t}(),xC=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),CC=function(t){function e(e,i){var n=t.call(this,e)||this;return n.dicPrefix="stream",n.dicSuffix="endstream",n.clonedObject2=null,n.bCompress=!0,n.isImageStream=!1,n.isFontStream=!1,void 0!==e||void 0!==i?(n.dataStream2=[],n.dataStream2=i,n.bCompress2=!1):(n.dataStream2=[],n.bCompress2=!0),n}return xC(e,t),Object.defineProperty(e.prototype,"internalStream",{get:function(){return this.dataStream2},set:function(t){this.dataStream2=[],this.dataStream2=t,this.modify()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isImage",{get:function(){return this.isImageStream},set:function(t){this.isImageStream=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFont",{get:function(){return this.isFontStream},set:function(t){this.isFontStream=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"compress",{get:function(){return this.bCompress},set:function(t){this.bCompress=t,this.modify()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.dataStream2},set:function(t){this.dataStream2=[],this.dataStream2=t,this.modify()},enumerable:!0,configurable:!0}),e.prototype.clearStream=function(){this.internalStream=[],this.items.containsKey(this.dictionaryProperties.filter)&&this.remove(this.dictionaryProperties.filter),this.bCompress=!0,this.modify()},e.prototype.write=function(t){if(null==t)throw new Error("ArgumentNullException:text");if(t.length<=0)throw new Error("ArgumentException: Can not write an empty string, text");this.dataStream2.push(t),this.modify()},e.prototype.writeBytes=function(t){if(null===t)throw new Error("ArgumentNullException:data");if(t.length<=0)throw new Error("ArgumentException: Can not write an empty bytes, data");for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);this.dataStream2.push(e),this.modify()},e.prototype.onCmapBeginSave=function(){this.cmapBeginSave.sender.cmapBeginSave()},e.prototype.onFontProgramBeginSave=function(){this.fontProgramBeginSave.sender.fontProgramBeginSave()},e.prototype.compressContent=function(t,e){if(this.bCompress){for(var i=[],n=0;n<t.length;n++)i.push(t.charCodeAt(n));var r=new Uint8Array(i),o=new mC;o.write(r,0,r.length),o.close(),t=o.getCompressedString,this.addFilter(this.dictionaryProperties.flatedecode)}return t},e.prototype.addFilter=function(t){var e=this.items.getValue(this.dictionaryProperties.filter);e instanceof VC&&(e=e.object);var i=e,n=e;null!=n&&((i=new iC).insert(0,n),this.items.setValue(this.dictionaryProperties.filter,i)),n=new Gx(t),null==i?this.items.setValue(this.dictionaryProperties.filter,n):i.insert(0,n)},e.prototype.save=function(e){void 0!==this.cmapBeginSave&&this.onCmapBeginSave(),void 0!==this.fontProgramBeginSave&&this.onFontProgramBeginSave();for(var i="",n=0;n<this.data.length;n++)i+=this.data[n];i.length>1&&!this.isImage&&!this.isFont&&(i="q\r\n"+i+"Q\r\n");var r=(i=this.compressContent(i,e)).length;this.items.setValue(this.dictionaryProperties.length,new eC(r)),t.prototype.save.call(this,e,!1),e.write(this.dicPrefix),e.write(qx.newLine),i.length>0&&e.write(i),e.write(qx.newLine),e.write(this.dicSuffix),e.write(qx.newLine)},e.bytesToString=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e},e}(Yx),PC=function(){return function(t){this.sender=t}}(),OC=function(){return function(t){this.sender=t}}();!function(t){var e;!function(t){t[t.None=0]="None",t[t.Ascii=1]="Ascii",t[t.Unicode=2]="Unicode"}(t.ForceEncoding||(t.ForceEncoding={})),function(t){t[t.StringValue=0]="StringValue",t[t.ByteBuffer=1]="ByteBuffer"}(e||(e={}))}(cC||(cC={}));var EC,LC,IC,TC,AC,BC,kC,MC,DC,RC,zC,jC,NC,HC=function(){function t(t){if(this.bHex=!1,this.position1=-1,this.clonedObject1=null,this.bDecrypted=!1,this.isParentDecrypted=!1,this.isPacked=!1,this.isFormField=!1,this.isColorSpace=!1,this.isHexString=!0,void 0===t)this.bHex=!1;else if(!(t.length>0&&"0xfeff"===t[0])){this.stringValue=t,this.data=[];for(var e=0;e<t.length;++e)this.data.push(t.charCodeAt(e))}}return Object.defineProperty(t.prototype,"hex",{get:function(){return this.bHex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.stringValue},set:function(t){this.stringValue=t,this.data=null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.status1},set:function(t){this.status1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSaving",{get:function(){return this.isSaving1},set:function(t){this.isSaving1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objectCollectionIndex",{get:function(){return this.index1},set:function(t){this.index1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clonedObject",{get:function(){return this.clonedObject1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.position1},set:function(t){this.position1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CrossTable",{get:function(){return this.crossTable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"converted",{get:function(){return this.bConverted},set:function(t){this.bConverted=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"encode",{get:function(){return this.bForceEncoding},set:function(t){this.bForceEncoding=t},enumerable:!0,configurable:!0}),t.bytesToHex=function(t){if(null==t)return"";return""},t.prototype.save=function(e){if(null===e)throw new Error("ArgumentNullException : writer");void 0!==this.encode&&this.encode===cC.ForceEncoding.Ascii?e.write(this.pdfEncode()):e.write(t.stringMark[0]+this.value+t.stringMark[1])},t.prototype.pdfEncode=function(){var e="";if(void 0!==this.encode&&this.encode===cC.ForceEncoding.Ascii){for(var i=this.escapeSymbols(this.value),n=0;n<i.length;n++)e+=String.fromCharCode(i[n]);e=t.stringMark[0]+e+t.stringMark[1]}else e=this.value;return e},t.prototype.escapeSymbols=function(t){for(var e=[],i=0;i<t.length;i++){var n=t.charCodeAt(i);switch(n){case 40:case 41:e.push(92),e.push(n);break;case 13:e.push(92),e.push(114);break;case 92:e.push(92),e.push(n);break;default:e.push(n)}}return e},t.prototype.clone=function(e){if(null!==this.clonedObject1&&this.clonedObject1.CrossTable===e)return this.clonedObject1;this.clonedObject1=null;var i=new t(this.stringValue);return i.bHex=this.bHex,i.crossTable=e,i.isColorSpace=this.isColorSpace,this.clonedObject1=i,i},t.toUnicodeArray=function(t,e){if(null==t)throw new Error("Argument Null Exception : value");for(var i=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);i.push(r/256>>>0),i.push(255&r)}return i},t.byteToString=function(t){if(null==t)throw new Error("Argument Null Exception : stream");for(var e="",i=0;i<t.length;++i)e+=String.fromCharCode(t[i]);return e},t.stringMark="()",t.hexStringMark="<>",t.hexFormatPattern="{0:X2}",t}(),_C=function(){function t(t,e){this.index3=-1,this.position3=-1,this.objNumber=0,this.genNumber=0,"number"==typeof t&&"number"==typeof e?(this.objNumber=t,this.genNumber=e):(this.objNumber=Number(t),this.genNumber=Number(e))}return Object.defineProperty(t.prototype,"status",{get:function(){return this.status3},set:function(t){this.status3=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSaving",{get:function(){return this.isSaving3},set:function(t){this.isSaving3=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objectCollectionIndex",{get:function(){return this.index3},set:function(t){this.index3=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.position3},set:function(t){this.position3=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clonedObject",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.save=function(t){t.write(this.toString())},t.prototype.toString=function(){return this.objNumber.toString()+" "+this.genNumber.toString()+" R"},t.prototype.clone=function(t){return null},t}(),VC=function(){function t(t,e){this.index4=-1,this.position4=-1,this.objectIndex=-1,this.dictionaryProperties=new Xx,this.initialize(t)}return Object.defineProperty(t.prototype,"status",{get:function(){return this.status4},set:function(t){this.status4=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSaving",{get:function(){return this.isSaving4},set:function(t){this.isSaving4=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objectCollectionIndex",{get:function(){return this.index4},set:function(t){this.index4=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.position4},set:function(t){this.position4=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clonedObject",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"object",{get:function(){return this.primitiveObject},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reference",{get:function(){return this.pdfReference},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.objectIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.primitiveObject},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t){if(t instanceof iC||t instanceof Yx||t instanceof Gx||t instanceof eC||t instanceof CC||t instanceof _C||t instanceof HC)this.primitiveObject=t;else{var e=t;this.initialize(e.element)}},t.prototype.save=function(t){t.position;var e=t.document.crossTable;this.object.isSaving=!0;e.getReference(this.object).save(t)},t.prototype.clone=function(t){return null},t}(),FC=function(){function t(){this.action=null,this.dictionaryProperties=new Xx,this.initialize()}return Object.defineProperty(t.prototype,"next",{get:function(){return this.action},set:function(t){this.action=t,this.dictionary.items.setValue(this.dictionaryProperties.next,new VC(this.action))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dictionary",{get:function(){return void 0===this.pdfDictionary&&(this.pdfDictionary=new Yx),this.pdfDictionary},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this.dictionary.items.setValue(this.dictionaryProperties.type,new Gx(this.dictionaryProperties.action))},Object.defineProperty(t.prototype,"element",{get:function(){return this.dictionary},enumerable:!0,configurable:!0}),t}(),WC=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),UC=function(t){function e(e){var i=t.call(this)||this;return i.uniformResourceIdentifier="",i}return WC(e,t),Object.defineProperty(e.prototype,"uri",{get:function(){return this.uniformResourceIdentifier},set:function(t){this.uniformResourceIdentifier=t,this.dictionary.items.setValue(this.dictionaryProperties.uri,new HC(this.uniformResourceIdentifier))},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){t.prototype.initialize.call(this),this.dictionary.items.setValue(this.dictionaryProperties.s,new Gx(this.dictionaryProperties.uri))},e}(FC);!function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right"}(EC||(EC={})),function(t){t[t.Top=0]="Top",t[t.Middle=1]="Middle",t[t.Bottom=2]="Bottom"}(LC||(LC={})),function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right",t[t.Justify=3]="Justify"}(IC||(IC={})),function(t){t[t.Fill=0]="Fill",t[t.Stroke=1]="Stroke",t[t.FillStroke=2]="FillStroke",t[t.None=3]="None",t[t.ClipFlag=4]="ClipFlag",t[t.ClipFill=4]="ClipFill",t[t.ClipStroke=5]="ClipStroke",t[t.ClipFillStroke=6]="ClipFillStroke",t[t.Clip=7]="Clip"}(TC||(TC={})),function(t){t[t.Miter=0]="Miter",t[t.Round=1]="Round",t[t.Bevel=2]="Bevel"}(AC||(AC={})),function(t){t[t.Flat=0]="Flat",t[t.Round=1]="Round",t[t.Square=2]="Square"}(BC||(BC={})),function(t){t[t.Solid=0]="Solid",t[t.Dash=1]="Dash",t[t.Dot=2]="Dot",t[t.DashDot=3]="DashDot",t[t.DashDotDot=4]="DashDotDot",t[t.Custom=5]="Custom"}(kC||(kC={})),function(t){t[t.Winding=0]="Winding",t[t.Alternate=1]="Alternate"}(MC||(MC={})),function(t){t[t.Rgb=0]="Rgb",t[t.Cmyk=1]="Cmyk",t[t.GrayScale=2]="GrayScale",t[t.Indexed=3]="Indexed"}(DC||(DC={})),function(t){t[t.Normal=0]="Normal",t[t.Multiply=1]="Multiply",t[t.Screen=2]="Screen",t[t.Overlay=3]="Overlay",t[t.Darken=4]="Darken",t[t.Lighten=5]="Lighten",t[t.ColorDodge=6]="ColorDodge",t[t.ColorBurn=7]="ColorBurn",t[t.HardLight=8]="HardLight",t[t.SoftLight=9]="SoftLight",t[t.Difference=10]="Difference",t[t.Exclusion=11]="Exclusion",t[t.Hue=12]="Hue",t[t.Saturation=13]="Saturation",t[t.Color=14]="Color",t[t.Luminosity=15]="Luminosity"}(RC||(RC={})),function(t){t[t.Centimeter=0]="Centimeter",t[t.Pica=1]="Pica",t[t.Pixel=2]="Pixel",t[t.Point=3]="Point",t[t.Inch=4]="Inch",t[t.Document=5]="Document",t[t.Millimeter=6]="Millimeter"}(zC||(zC={})),function(t){t[t.Fit=0]="Fit",t[t.Center=1]="Center",t[t.Stretch=2]="Stretch",t[t.Tile=3]="Tile"}(jC||(jC={})),function(t){t[t.None=0]="None",t[t.LeftToRight=1]="LeftToRight",t[t.RightToLeft=2]="RightToLeft"}(NC||(NC={}));var GC,qC,XC,YC,ZC,KC,JC,QC,$C,tP,eP,iP,nP,rP=function(){function t(e,i,n,r){void 0===e?void 0!==i&&void 0!==n&&void 0!==r?this.assignRGB(i,n,r):this.filled=!1:e instanceof t?(this.redColor=e.r,this.greenColor=e.g,this.blueColor=e.b,this.grayColor=e.gray,this.alpha=e.alpha,this.filled=0!==this.alpha):"number"==typeof e&&void 0===i&&void 0===n&&void 0===r?(e<0&&(e=0),e>1&&(e=1),this.redColor=e*t.maxColourChannelValue,this.greenColor=e*t.maxColourChannelValue,this.blueColor=e*t.maxColourChannelValue,this.cyanColor=e,this.magentaColor=e,this.yellowColor=e,this.blackColor=e,this.grayColor=e,this.alpha=t.maxColourChannelValue,this.filled=!0):void 0===r?this.assignRGB(e,i,n):this.assignRGB(i,n,r,e)}return t.prototype.assignRGB=function(e,i,n,r){void 0===e||void 0===i||void 0===n?this.filled=!1:(this.cyanColor=0,this.magentaColor=0,this.yellowColor=0,this.blackColor=0,this.grayColor=0,this.redColor=e,this.greenColor=i,this.blueColor=n,this.alpha=void 0===r?t.maxColourChannelValue:r,this.filled=!0,this.assignCMYK(e,i,n))},t.prototype.assignCMYK=function(e,i,n){var r=e/t.maxColourChannelValue,o=i/t.maxColourChannelValue,s=n/t.maxColourChannelValue,a=eC.min(1-r,1-o,1-s),l=1===a?0:(1-r-a)/(1-a),h=1===a?0:(1-o-a)/(1-a),c=1===a?0:(1-s-a)/(1-a);this.blackColor=a,this.cyanColor=l,this.magentaColor=h,this.yellowColor=c},Object.defineProperty(t.prototype,"r",{get:function(){return this.redColor},set:function(t){this.redColor=t,this.assignCMYK(this.redColor,this.greenColor,this.blueColor),this.filled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"red",{get:function(){return this.r/t.maxColourChannelValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this.blueColor},set:function(t){this.blueColor=t,this.assignCMYK(this.redColor,this.greenColor,this.blueColor),this.filled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blue",{get:function(){return this.b/t.maxColourChannelValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"c",{get:function(){return this.cyanColor},set:function(t){this.cyanColor=t<0?0:t>1?1:t,this.assignRGB(this.cyanColor,this.magentaColor,this.yellowColor,this.blackColor),this.filled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return this.blackColor},set:function(t){this.blackColor=t<0?0:t>1?1:t,this.assignRGB(this.cyanColor,this.magentaColor,this.yellowColor,this.blackColor),this.filled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"m",{get:function(){return this.magentaColor},set:function(t){this.magentaColor=t<0?0:t>1?1:t,this.assignRGB(this.cyanColor,this.magentaColor,this.yellowColor,this.blackColor),this.filled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.yellowColor},set:function(t){this.yellowColor=t<0?0:t>1?1:t,this.assignRGB(this.cyanColor,this.magentaColor,this.yellowColor,this.blackColor),this.filled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"g",{get:function(){return this.greenColor},set:function(t){this.greenColor=t,this.assignCMYK(this.redColor,this.greenColor,this.blueColor),this.filled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"green",{get:function(){return this.g/t.maxColourChannelValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gray",{get:function(){return(this.redColor+this.greenColor+this.blueColor)/(3*t.maxColourChannelValue)},set:function(e){this.grayColor=e<0?0:e>1?1:e,this.r=this.grayColor*t.maxColourChannelValue,this.g=this.grayColor*t.maxColourChannelValue,this.b=this.grayColor*t.maxColourChannelValue,this.assignCMYK(this.redColor,this.greenColor,this.blueColor),this.filled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return!this.filled},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"a",{get:function(){return this.alpha},set:function(t){this.alpha=t<0?0:t,this.filled=!0},enumerable:!0,configurable:!0}),t.prototype.toString=function(t,e){if(this.isEmpty)return"";var i="";switch(t){case DC.Rgb:i=this.rgbToString(e);break;case DC.GrayScale:i=this.grayScaleToString(e);break;case DC.Cmyk:i=this.cmykToString(e)}return i},t.prototype.grayScaleToString=function(e){var i=this.gray,n="",r=null;return null==(r=e?t.grayStringsSroke.containsKey(i)?t.grayStringsSroke.getValue(i):null:t.grayStringsFill.containsKey(i)?t.grayStringsFill.getValue(i):null)?e&&(n=i.toString()+" G",t.grayStringsSroke.setValue(i,n)):n=r.toString(),n+qx.newLine},t.prototype.rgbToString=function(e){var i=this.r,n=this.g,r=this.b,o=(i<<16)+(n<<8)+r;e&&(o+=1<<24);var s="",a=null;if(t.rgbStrings.containsKey(o)&&(a=t.rgbStrings.getValue(o)),null==a){var l=i/t.maxColourChannelValue,h=n/t.maxColourChannelValue,c=r/t.maxColourChannelValue;s=e?l.toString()+" "+h.toString()+" "+c.toString()+" RG":l.toString()+" "+h.toString()+" "+c.toString()+" rg",t.rgbStrings.setValue(o,s)}else s=a.toString();return s+qx.newLine},t.prototype.cmykToString=function(t){var e=this.c,i=this.m,n=this.y,r=this.b;return e.toString()+" "+i.toString()+" "+n.toString()+" "+r.toString()+" K"+qx.newLine},t.prototype.toArray=function(t){var e=new iC;switch(t){case DC.Rgb:e.add(new eC(this.red)),e.add(new eC(this.green)),e.add(new eC(this.blue))}return e},t.rgbStrings=new Ux,t.grayStringsSroke=new Ux,t.grayStringsFill=new Ux,t.maxColourChannelValue=255,t}(),oP=function(){return function(t,e){void 0===t?(this.x=0,this.y=0):(this.x=null!==t?t:0,this.y=null!==e?e:0)}}(),sP=function(){return function(t,e){void 0===e?(this.height=0,this.width=0):(this.height=null!==e?e:0,this.width=null!==t?t:0)}}(),aP=function(){return function(t,e,i,n){if(typeof t==typeof t&&void 0===t)this.x=0,this.y=0,this.height=0,this.width=0;else if(t instanceof oP&&e instanceof sP&&void 0===i){var r=t;this.x=r.x,this.y=r.y;var o=e;this.height=o.height,this.width=o.width}else{var s=t,a=e,l=i,h=n;this.x=s,this.y=a,this.height=h,this.width=l}}}(),lP=function(){function t(t,e,i,n){this.left=t,this.top=e,this.right=i,this.bottom=n}return Object.defineProperty(t.prototype,"width",{get:function(){return this.right-this.left},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.bottom-this.top},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new oP(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return new sP(this.width,this.height)},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.topLeft+"x"+this.size},t}(),hP=function(){function t(){}return t.prototype.clone=function(){return this},t}(),cP=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dP=function(t){function e(e){var i=t.call(this)||this;return i.pdfColor=e,i}return cP(e,t),Object.defineProperty(e.prototype,"color",{get:function(){return this.pdfColor},set:function(t){this.pdfColor=t},enumerable:!0,configurable:!0}),e.prototype.monitorChanges=function(t,e,i,n,r){if(null==e)throw new Error("ArgumentNullException:streamWriter");var o=!1;if(null==t)return o=!0,e.setColorAndSpace(this.pdfColor,r,!1),o;return o=!0,e.setColorAndSpace(this.pdfColor,r,!1),o},e.prototype.resetChanges=function(t){t.setColorAndSpace(new rP(0,0,0),DC.Rgb,!1)},e}(hP);!function(t){t[t.Regular=0]="Regular",t[t.Bold=1]="Bold",t[t.Italic=2]="Italic",t[t.Underline=4]="Underline",t[t.Strikeout=8]="Strikeout"}(GC||(GC={})),function(t){t[t.Helvetica=0]="Helvetica",t[t.Courier=1]="Courier",t[t.TimesRoman=2]="TimesRoman",t[t.Symbol=3]="Symbol",t[t.ZapfDingbats=4]="ZapfDingbats"}(qC||(qC={})),function(t){t[t.Standard=0]="Standard",t[t.TrueType=1]="TrueType",t[t.TrueTypeEmbedded=2]="TrueTypeEmbedded"}(XC||(XC={})),function(t){t[t.None=0]="None",t[t.Word=1]="Word",t[t.WordOnly=2]="WordOnly",t[t.Character=3]="Character"}(YC||(YC={})),function(t){t[t.None=0]="None",t[t.SuperScript=1]="SuperScript",t[t.SubScript=2]="SubScript"}(ZC||(ZC={})),function(t){t[t.Unknown=0]="Unknown",t[t.StandardEncoding=1]="StandardEncoding",t[t.MacRomanEncoding=2]="MacRomanEncoding",t[t.MacExpertEncoding=3]="MacExpertEncoding",t[t.WinAnsiEncoding=4]="WinAnsiEncoding",t[t.PdfDocEncoding=5]="PdfDocEncoding",t[t.IdentityH=6]="IdentityH"}(KC||(KC={})),function(t){t[t.Apple=0]="Apple",t[t.Microsoft=4]="Microsoft",t[t.Trimmed=6]="Trimmed"}(JC||(JC={})),function(t){t[t.Unknown=0]="Unknown",t[t.Symbol=1]="Symbol",t[t.Unicode=2]="Unicode",t[t.Macintosh=3]="Macintosh"}(QC||(QC={})),function(t){t[t.AppleUnicode=0]="AppleUnicode",t[t.Macintosh=1]="Macintosh",t[t.Iso=2]="Iso",t[t.Microsoft=3]="Microsoft"}($C||($C={})),function(t){t[t.Undefined=0]="Undefined",t[t.Unicode=1]="Unicode"}(tP||(tP={})),function(t){t[t.Roman=0]="Roman",t[t.Japanese=1]="Japanese",t[t.Chinese=2]="Chinese"}(eP||(eP={})),function(t){t[t.FixedPitch=1]="FixedPitch",t[t.Serif=2]="Serif",t[t.Symbolic=4]="Symbolic",t[t.Script=8]="Script",t[t.Nonsymbolic=32]="Nonsymbolic",t[t.Italic=64]="Italic",t[t.ForceBold=262144]="ForceBold"}(iP||(iP={})),function(t){t[t.Arg1And2AreWords=1]="Arg1And2AreWords",t[t.ArgsAreXyValues=2]="ArgsAreXyValues",t[t.RoundXyToGrid=4]="RoundXyToGrid",t[t.WeHaveScale=8]="WeHaveScale",t[t.Reserved=16]="Reserved",t[t.MoreComponents=32]="MoreComponents",t[t.WeHaveAnXyScale=64]="WeHaveAnXyScale",t[t.WeHaveTwoByTwo=128]="WeHaveTwoByTwo",t[t.WeHaveInstructions=256]="WeHaveInstructions",t[t.UseMyMetrics=512]="UseMyMetrics"}(nP||(nP={}));var pP,uP=function(){function t(t,e){this.scalingFactor=100,this.wordWrapType=YC.Word,this.internalLineLimit=!0,this.wordWrapType=YC.Word,void 0!==t&&"string"!=typeof t&&(this.textAlignment=t),void 0!==e&&(this.verticalAlignment=e)}return Object.defineProperty(t.prototype,"alignment",{get:function(){return this.textAlignment},set:function(t){this.textAlignment=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textDirection",{get:function(){return this.direction},set:function(t){this.direction=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineAlignment",{get:function(){return void 0===this.verticalAlignment||null==this.verticalAlignment?LC.Top:this.verticalAlignment},set:function(t){this.verticalAlignment=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightToLeft",{get:function(){return void 0!==this.isRightToLeft&&null!=this.isRightToLeft&&this.isRightToLeft},set:function(t){this.isRightToLeft=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"characterSpacing",{get:function(){return void 0===this.internalCharacterSpacing||null==this.internalCharacterSpacing?0:this.internalCharacterSpacing},set:function(t){this.internalCharacterSpacing=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wordSpacing",{get:function(){return void 0===this.internalWordSpacing||null==this.internalWordSpacing?0:this.internalWordSpacing},set:function(t){this.internalWordSpacing=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineSpacing",{get:function(){return void 0===this.leading||null==this.leading?0:this.leading},set:function(t){this.leading=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clipPath",{get:function(){return void 0!==this.clip&&null!=this.clip&&this.clip},set:function(t){this.clip=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subSuperScript",{get:function(){return void 0===this.pdfSubSuperScript||null==this.pdfSubSuperScript?ZC.None:this.pdfSubSuperScript},set:function(t){this.pdfSubSuperScript=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paragraphIndent",{get:function(){return void 0===this.internalParagraphIndent||null==this.internalParagraphIndent?0:this.internalParagraphIndent},set:function(t){this.internalParagraphIndent=t,this.firstLineIndent=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineLimit",{get:function(){return this.internalLineLimit},set:function(t){this.internalLineLimit=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"measureTrailingSpaces",{get:function(){return void 0!==this.trailingSpaces&&null!=this.trailingSpaces&&this.trailingSpaces},set:function(t){this.trailingSpaces=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"noClip",{get:function(){return void 0!==this.isNoClip&&null!=this.isNoClip&&this.isNoClip},set:function(t){this.isNoClip=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this.wordWrapType},set:function(t){this.wordWrapType=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalScalingFactor",{get:function(){return this.scalingFactor},set:function(t){if(t<=0)throw new Error("ArgumentOutOfRangeException:The scaling factor cant be less of equal to zero, ScalingFactor");this.scalingFactor=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLineIndent",{get:function(){return void 0===this.initialLineIndent||null==this.initialLineIndent?0:this.initialLineIndent},set:function(t){this.initialLineIndent=t},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return this},t}(),fP=function(){function t(t){if(this.currentPosition=0,null==t)throw new Error("ArgumentNullException:text");this.text=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this.text.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.currentPosition===this.text.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.currentPosition},set:function(t){this.currentPosition=t},enumerable:!0,configurable:!0}),t.getCharsCount=function(t,e){if("string"==typeof e){if(null==t)throw new Error("ArgumentNullException:wholeText");for(var i=0,n=0;-1!==(n=t.indexOf(e,n));)i++,n++;return i}if(null==t)throw new Error("ArgumentNullException:text");if(null==e)throw new Error("ArgumentNullException:symbols");for(var r=0,o=0,s=t.length;o<s;o++){var a=t[o];this.contains(e,a)&&r++}return r},t.prototype.readLine=function(){for(var t=this.currentPosition;t<this.length;){switch(this.text[t]){case"\r":case"\n":var e=this.text.substring(this.currentPosition,t-this.currentPosition);return this.currentPosition=t+1,this.currentPosition++,e}t++}if(t>this.currentPosition){var i=this.text.substring(this.currentPosition,t-this.currentPosition);return this.currentPosition=t,i}return null},t.prototype.peekLine=function(){var t=this.currentPosition,e=this.readLine();return this.currentPosition=t,e},t.prototype.readWord=function(){for(var t=this.currentPosition;t<this.length;){var e=this.text[t];switch(e){case"\r":case"\n":var i=this.text.substr(this.currentPosition,t-this.currentPosition);return this.currentPosition=t+1,"\r"===e&&this.currentPosition<this.length&&"\n"===this.text[this.currentPosition]&&this.currentPosition++,i;case" ":case"\t":t===this.currentPosition&&t++;var n=this.text.substr(this.currentPosition,t-this.currentPosition);return this.currentPosition=t,n}t++}if(t>this.currentPosition){var r=this.text.substr(this.currentPosition,t-this.currentPosition);return this.currentPosition=t,r}return null},t.prototype.peekWord=function(){var t=this.currentPosition,e=this.readWord();return this.currentPosition=t,e},t.prototype.read=function(t){if(void 0===t){var e="0";return this.end||(e=this.text[this.currentPosition],this.currentPosition++),e}for(var i=0,n="";!this.end&&i<t;){n+=e=this.read(),i++}return n},t.prototype.peek=function(){var t="0";return this.end||(t=this.text[this.currentPosition]),t},t.prototype.close=function(){this.text=null},t.prototype.readToEnd=function(){var t;return t=0===this.currentPosition?this.text:this.text.substring(this.length,this.currentPosition),this.currentPosition=this.length,t},t.contains=function(t,e){for(var i=!1,n=0;n<t.length;n++)if(t[n]===e){i=!0;break}return i},t.whiteSpace=" ",t.tab="\t",t.spaces=[t.whiteSpace,t.tab],t.whiteSpacePattern="^[ \t]+$",t}(),gP=function(){function t(){this.isOverloadWithPosition=!1}return t.prototype.layout=function(t,e,i,n,r,o,s){if(n instanceof aP){this.initialize(t,e,i,n,r),this.isOverloadWithPosition=o,this.clientSize=s;var a=this.doLayout();return this.clear(),a}this.initialize(t,e,i,n),this.isOverloadWithPosition=r,this.clientSize=o;a=this.doLayout();return this.clear(),a},t.prototype.initialize=function(t,e,i,n,r){if("number"==typeof r){if(null==t)throw new Error("ArgumentNullException:text");if(null==e)throw new Error("ArgumentNullException:font");this.text=t,this.font=e,this.format=i,this.size=new sP(n.width,n.height),this.rectangle=n,this.pageHeight=r,this.reader=new fP(t)}else this.initialize(t,e,i,new aP(new oP(0,0),n),0)},t.prototype.clear=function(){this.font=null,this.format=null,this.reader.close(),this.reader=null,this.text=null},t.prototype.doLayout=function(){for(var t=new mP,e=new mP,i=[],n=this.reader.peekLine(),r=this.getLineIndent(!0);null!=n;){if(null!==(e=this.layoutLine(n,r))||void 0!==e){var o=0,s=this.copyToResult(t,e,i,o),a=s.success;if(o=s.numInserted,!a){this.reader.read(o);break}}this.reader.readLine(),n=this.reader.peekLine(),r=this.getLineIndent(!1)}return this.finalizeResult(t,i),t},t.prototype.getLineIndent=function(t){var e=0;return null!=this.format&&(e=t?this.format.firstLineIndent:this.format.paragraphIndent,e=this.size.width>0?Math.min(this.size.width,e):e),e},t.prototype.getLineHeight=function(){var t=this.font.height;return null!=this.format&&0!==this.format.lineSpacing&&(t=this.format.lineSpacing+this.font.height),t},t.prototype.getLineWidth=function(t){return this.font.getLineWidth(t,this.format)},t.prototype.layoutLine=function(t,e){var i=new mP;i.layoutLineHeight=this.getLineHeight();var n=[],r=this.size.width,o=this.getLineWidth(t)+e,s=pP.FirstParagraphLine,a=!0;if(r<=0||Math.round(o)<=Math.round(r))this.addToLineResult(i,n,t,o,pP.NewLineBreak|s);else{var l="",h="";o=e;var c=e,d=new fP(t),p=d.peekWord();for(p.length!==d.length&&" "===p&&(h+=p,l+=p,d.position+=1,p=d.peekWord());null!=p;){h+=p;var u=this.getLineWidth(h.toString())+c;if(" "===h.toString()&&(h="",u=0),u>r){if(this.getWrapType()===YC.None)break;if(h.length===p.length){if(this.getWrapType()===YC.WordOnly){i.textRemainder=t.substring(d.position);break}if(1===h.length){l+=p;break}a=!1,h="",p=d.peek().toString();continue}this.getLineWidth(p.toString())>r?this.format.wordWrap=YC.Character:void 0!==this.format&&null!==this.format&&(this.format.wordWrap=YC.Word),this.getWrapType()===YC.Character&&a?(a=!1,h="",h+=l.toString(),p=d.peek().toString()):(" "!==(f=l.toString())&&this.addToLineResult(i,n,f,o,pP.LayoutBreak|s),this.isOverloadWithPosition&&(r=this.clientSize.width),h="",l="",o=0,c=0,u=0,s=pP.None,p=a?p:d.peekWord(),a=!0)}else l+=p,o=u,a?(d.readWord(),p=d.peekWord()):(d.read(),p=d.peek().toString())}if(l.length>0){var f=l.toString();this.addToLineResult(i,n,f,o,pP.NewLineBreak|pP.LastParagraphLine)}d.close()}i.layoutLines=[];for(var g=0;g<n.length;g++)i.layoutLines.push(n[g]);return n=[],i},t.prototype.addToLineResult=function(t,e,i,n,r){var o=new yP;o.text=i,o.width=n,o.lineType=r,e.push(o);var s=t.actualSize;s.height+=this.getLineHeight(),s.width=Math.max(s.width,n),t.size=s},t.prototype.copyToResult=function(t,e,i,n){var r=!0,o=null!=this.format&&!this.format.lineLimit,s=t.actualSize.height,a=this.size.height;if(this.pageHeight>0&&a+this.rectangle.y>this.pageHeight&&(a=this.rectangle.y-this.pageHeight,a=Math.max(a,-a)),n=0,null!=e.lines)for(var l=0,h=e.lines.length;l<h;l++){var c=s+e.lineHeight;if(!(c<=a||a<=0||o)){r=!1;break}var d=e.lines[l];n+=d.text.length,d=this.trimLine(d,0===i.length),i.push(d);var p=t.actualSize;p.width=Math.max(p.width,d.width),t.size=p,s=c}if(s!=t.size.height){var u=t.actualSize;u.height=s,t.size=u}return{success:r,numInserted:n}},t.prototype.finalizeResult=function(t,e){t.layoutLines=[];for(var i=0;i<e.length;i++)t.layoutLines.push(e[i]);t.layoutLineHeight=this.getLineHeight(),this.reader.end||(t.textRemainder=this.reader.readToEnd()),e=[]},t.prototype.trimLine=function(t,e){var i=t.text,n=t.width;t.lineType,pP.FirstParagraphLine,null==this.format||this.format.rightToLeft,fP.spaces;return(i=i.trim()).length!==t.text.length&&(n=this.getLineWidth(i),(t.lineType&pP.FirstParagraphLine)>0&&(n+=this.getLineIndent(e))),t.text=i,t.width=n,t},t.prototype.getWrapType=function(){return null!=this.format?this.format.wordWrap:YC.Word},t}(),mP=function(){function t(){}return Object.defineProperty(t.prototype,"remainder",{get:function(){return this.textRemainder},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actualSize",{get:function(){return void 0===this.size&&(this.size=new sP(0,0)),this.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lines",{get:function(){return this.layoutLines},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this.layoutLineHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return null==this.layoutLines||0===this.layoutLines.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.empty?0:this.layoutLines.length},enumerable:!0,configurable:!0}),t}(),yP=function(){function t(){}return Object.defineProperty(t.prototype,"lineType",{get:function(){return this.type},set:function(t){this.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.content},set:function(t){this.content=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.lineWidth},set:function(t){this.lineWidth=t},enumerable:!0,configurable:!0}),t}();!function(t){t[t.None=0]="None",t[t.NewLineBreak=1]="NewLineBreak",t[t.LayoutBreak=2]="LayoutBreak",t[t.FirstParagraphLine=4]="FirstParagraphLine",t[t.LastParagraphLine=8]="LastParagraphLine"}(pP||(pP={}));var vP,bP=function(){function t(t,e){this.fontStyle=GC.Regular,"number"==typeof t&&void 0===e?this.fontSize=t:(this.fontSize=t,this.setStyle(e))}return Object.defineProperty(t.prototype,"name",{get:function(){return this.metrics.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.fontSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.metrics.getHeight(null)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this.fontStyle},set:function(t){this.fontStyle=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bold",{get:function(){return(this.style&GC.Bold)>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"italic",{get:function(){return(this.style&GC.Italic)>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strikeout",{get:function(){return(this.style&GC.Strikeout)>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"underline",{get:function(){return(this.style&GC.Underline)>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metrics",{get:function(){return this.fontMetrics},set:function(t){this.fontMetrics=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.pdfFontInternals},enumerable:!0,configurable:!0}),t.prototype.measureString=function(t,e,i,n,r){if("string"==typeof t&&void 0===e)return this.measureString(t,null);if("string"==typeof t&&(e instanceof uP||null==e)&&void 0===i&&void 0===n){var o=e;return this.measureString(t,o,0,0)}if("string"==typeof t&&(e instanceof uP||null==e)&&"number"==typeof i&&"number"==typeof n){o=e;return this.measureString(t,0,o,i,n)}if("string"==typeof t&&"number"==typeof e&&(i instanceof uP||null==i)&&"number"==typeof n&&"number"==typeof r){var s=new sP(e,0),a=i;return this.measureString(t,s,a,n,r)}if(null==t)throw Error('ArgumentNullException("text")');o=e,a=i;var l=(new gP).layout(t,this,a,o,!1,new sP(0,0));return n=t.length,r=l.empty?0:l.lines.length,l.actualSize},t.prototype.equalsTo=function(t){return this.equalsToFont(t)},t.prototype.getInternals=function(){return this.pdfFontInternals},t.prototype.setInternals=function(t){if(null==t)throw new Error("ArgumentNullException:internals");this.pdfFontInternals=t},t.prototype.setStyle=function(t){this.fontStyle=t},t.prototype.applyFormatSettings=function(t,e,i){var n=i;if(null!=e&&i>0&&(0!==e.characterSpacing&&(n+=(t.length-1)*e.characterSpacing),0!==e.wordSpacing)){var r=fP.spaces;n+=fP.getCharsCount(t,r)*e.wordSpacing}return n},t.charSizeMultiplier=.001,t.syncObject=new Object,t}(),wP=function(){function t(t){this.streamWriter=t}return Object.defineProperty(t.prototype,"document",{get:function(){return this.pdfDocument},set:function(t){this.pdfDocument=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.streamWriter.buffer.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.streamWriter.buffer.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stream",{get:function(){return this.streamWriter},enumerable:!0,configurable:!0}),t.prototype.write=function(t){var e=t;this.streamWriter.write(e)},t}();!function(t){t[t.None=0]="None",t[t.Registered=1]="Registered"}(vP||(vP={}));var SP,xP=function(){function t(){this.objectCollections=[],this.mainObjectCollection=new Ux,this.primitiveObjectCollection=new Ux}return Object.defineProperty(t.prototype,"count",{get:function(){return this.objectCollections.length},enumerable:!0,configurable:!0}),t.prototype.items=function(t){return this.objectCollections[t]},Object.defineProperty(t.prototype,"outIsNew",{get:function(){return this.isNew},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=new CP(t);this.objectCollections.push(e),this.primitiveObjectCollection.containsKey(t)||this.primitiveObjectCollection.setValue(t,this.objectCollections.length-1),t.position=this.index=this.objectCollections.length-1,t.status=vP.Registered},t.prototype.lookFor=function(t){var e=-1;if(-1!==t.position)return t.position;if(this.primitiveObjectCollection.containsKey(t)&&this.count===this.primitiveObjectCollection.size())e=this.primitiveObjectCollection.getValue(t);else for(var i=this.count-1;i>=0;i--){if(this.objectCollections[i].object===t){e=i;break}}return e},t.prototype.getReference=function(t,e){return this.index=this.lookFor(t),this.isNew=!1,{reference:this.objectCollections[this.index].reference,wasNew:e}},t.prototype.trySetReference=function(t,e,i){return!0,this.index=this.lookFor(t),this.objectCollections[this.index].setReference(e),!0},t.prototype.destroy=function(){for(var t=0,e=this.objectCollections;t<e.length;t++){var i=e[t];void 0!==i&&(i.pdfObject.position=-1,i.pdfObject.isSaving=void 0,i.pdfObject.objectCollectionIndex=void 0,i.pdfObject.position=void 0)}this.objectCollections=[],this.mainObjectCollection=new Ux,this.primitiveObjectCollection=new Ux},t}(),CP=function(){function t(t,e){this.pdfObject=t,this.pdfReference=e}return Object.defineProperty(t.prototype,"object",{get:function(){return this.pdfObject},set:function(t){this.pdfObject=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reference",{get:function(){return this.pdfReference},enumerable:!0,configurable:!0}),t.prototype.setReference=function(t){this.pdfReference=t},t}(),PP=function(){function t(t){this.isStreamCopied=!1,t instanceof fE&&(this.document=t)}return Object.defineProperty(t.prototype,"pdfObjects",{get:function(){return this.objects},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"crossTable",{get:function(){return this.pdfCrossTable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentSavingObj",{get:function(){return this.currentSavingObject},set:function(t){this.currentSavingObject=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"catalog",{get:function(){return this.pdfCatalog},set:function(t){this.pdfCatalog=t},enumerable:!0,configurable:!0}),t.prototype.setMainObjectCollection=function(t){this.objects=t},t.prototype.setCrossTable=function(t){this.pdfCrossTable=t},t.prototype.setCatalog=function(t){this.pdfCatalog=t},t.prototype.save=function(t){var e=this,i=new lC(!0),n=new dC(i);if(void 0===t){var r=new lC(!0),o=new dC(r);return new Promise(function(t,i){var n={};n.blobData=new Blob([e.document.docSave(o,!0)],{type:"application/pdf"}),t(n)})}this.document.docSave(n,t,!0)},t.prototype.clone=function(){return this.document},t}();!function(t){t[t.Free=0]="Free",t[t.Normal=1]="Normal",t[t.Packed=2]="Packed"}(SP||(SP={}));var OP,EP,LP,IP,TP,AP,BP=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kP=function(t){function e(){var e=t.call(this)||this;return e.sections=null,e.tempDictionaryProperties=new Xx,e.items.setValue((new Xx).type,new Gx("Catalog")),e}return BP(e,t),Object.defineProperty(e.prototype,"pages",{get:function(){return this.sections},set:function(t){t.element;this.sections=t,this.items.setValue(this.tempDictionaryProperties.pages,new VC(t))},enumerable:!0,configurable:!0}),e}(Yx),MP=function(){function t(){this.objects=new Ux,this.maxGenNumIndex=0,this.objectCount=0,this.dictionaryProperties=new Xx}return Object.defineProperty(t.prototype,"isMerging",{get:function(){return this.merging},set:function(t){this.merging=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trailer",{get:function(){return null==this.internalTrailer&&(this.internalTrailer=new CC),this.internalTrailer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"document",{get:function(){return this.pdfDocument},set:function(t){this.pdfDocument=t,this.items=this.pdfDocument.pdfObjects},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pdfObjects",{get:function(){return this.items},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objectCollection",{get:function(){return this.pdfDocument.pdfObjects},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this.objectCount},set:function(t){this.objectCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextObjNumber",{get:function(){return this.count=this.count+1,this.count},enumerable:!0,configurable:!0}),t.prototype.save=function(t,e){this.saveHead(t);this.mappedReferences=null,this.objects.clear(),this.markTrailerReferences(),this.saveObjects(t);var i=this.count,n=t.position;this.registerObject(0,new _C(0,-1),!0);t.write(qx.xref),t.write(qx.newLine),this.saveSections(t),this.saveTrailer(t,this.count,0),this.saveTheEndess(t,n),this.count=i;for(var r=0;r<this.objectCollection.count;++r){this.objectCollection.items(r).object.isSaving=!1}if(void 0===e)return t.stream.buffer;t.stream.save(e)},t.prototype.saveTheEndess=function(t,e){t.write(qx.newLine+qx.startxref+qx.newLine),t.write(e.toString()+qx.newLine),t.write(qx.eof+qx.newLine)},t.prototype.saveTrailer=function(t,e,i){t.write(qx.trailer+qx.newLine);var n=this.trailer;n.items.setValue(this.dictionaryProperties.size,new eC(this.objectCount+1)),(n=new Yx(n)).setEncrypt(!1),n.save(t)},t.prototype.saveSections=function(t){var e=0,i=0;do{i=this.prepareSubsection(e),this.saveSubsection(t,e,i),e+=i}while(0!==i)},t.prototype.saveSubsection=function(t,e,i){if(!(i<=0||e>=this.count)){t.write(e+" "+(i+1)+qx.newLine);for(var n=e;n<=e+i;++n){var r=this.objects.getValue(n),o="";o=r.type===SP.Free?this.getItem(r.offset,65535,!0):this.getItem(r.offset,r.generation,!1),t.write(o)}}},t.prototype.getItem=function(t,e,i){var n="",r=10-t.toString().length;e<=0&&(e=0);for(var o=5-e.toString().length<=0?0:5-e.toString().length,s=0;s<r;s++)n+="0";n=n+t.toString()+" ";for(s=0;s<o;s++)n+="0";return n=(n=n+e.toString()+" ")+(i?qx.f:qx.n)+qx.newLine},t.prototype.prepareSubsection=function(t){for(var e,i=0,n=this.count,r=0;r<this.document.pdfObjects.count;r++)this.document.pdfObjects.items(r).reference.toString().split(" ");if(t>=n)return i;for(t=e=t;e<n;++e)++i;return i},t.prototype.markTrailerReferences=function(){this.trailer.items.keys(),this.trailer.items.values()},t.prototype.saveHead=function(t){var e=this.generateFileVersion(t.document);t.write("%PDF-"+e),t.write(qx.newLine)},t.prototype.generateFileVersion=function(t){return"1."+4..toString()},t.prototype.getReference=function(t,e){if(void 0===e){return this.getReference(t,!1)}return this.getSubReference(t,e)},t.prototype.getSubReference=function(t,e){var i,n=!1,r=null;if(this.items.count>0&&t.objectCollectionIndex>0&&this.items.count>t.objectCollectionIndex-1){var o=this.document.pdfObjects.getReference(t,i);r=o.reference,i=o.wasNew}if(i=null==r&&t.status!==vP.Registered,null==r){var s=this.nextObjNumber;r=new _C(s,0);if(i){this.document.pdfObjects.add(t),this.document.pdfObjects.trySetReference(t,r,void 0);var a=this.document.pdfObjects.count-1,l=this.document.pdfObjects.objectCollections[a].reference.objNumber,h=this.document.pdfObjects.objectCollections[this.document.pdfObjects.count-1];this.document.pdfObjects.mainObjectCollection.setValue(l,h),t.position=-1}else this.document.pdfObjects.trySetReference(t,r,void 0);t.objectCollectionIndex=r.objNumber,t.status=vP.None,n=!0}return n||this.bForceNew,r},t.prototype.saveObjects=function(t){for(var e=this.objectCollection,i=0;i<e.count;++i){var n=e.items(i).object;n.isSaving=!0,this.saveIndirectObject(n,t)}},t.prototype.saveIndirectObject=function(t,e){var i=this.getReference(t);t instanceof kP&&this.trailer.items.setValue(this.dictionaryProperties.root,i),this.pdfDocument.currentSavingObj=i;t.getArchive();this.registerObject(e.position,i),this.doSaveObject(t,i,e)},t.prototype.doSaveObject=function(t,e,i){i.length;i.write(e.objNumber.toString()),i.write(qx.whiteSpace),i.write(e.genNumber.toString()),i.write(qx.whiteSpace),i.write(qx.obj),i.write(qx.newLine),t.save(i);i.stream;i.write(qx.endObj),i.write(qx.newLine)},t.prototype.registerObject=function(t,e,i){"boolean"==typeof i?(this.objects.setValue(e.objNumber,new DP(t,e,i)),this.maxGenNumIndex=Math.max(this.maxGenNumIndex,e.genNumber)):void 0===i&&(this.objects.setValue(e.objNumber,new DP(t,e)),this.maxGenNumIndex=Math.max(this.maxGenNumIndex,e.genNumber))},t.dereference=function(t){return null!=t&&(t=t.object),t},t}(),DP=function(){function t(t,e,i){var n=t;this.offsetNumber=n;var r=e;this.generation=r.genNumber,this.object=r.objNumber,this.type=void 0===i?SP.Normal:SP.Free}return Object.defineProperty(t.prototype,"objectNumber",{get:function(){return this.object},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this.offsetNumber},enumerable:!0,configurable:!0}),t}(),RP=function(){function t(){}return t.letter=new sP(612,792),t.note=new sP(540,720),t.legal=new sP(612,1008),t.a0=new sP(2380,3368),t.a1=new sP(1684,2380),t.a2=new sP(1190,1684),t.a3=new sP(842,1190),t.a4=new sP(595,842),t.a5=new sP(421,595),t.a6=new sP(297,421),t.a7=new sP(210,297),t.a8=new sP(148,210),t.a9=new sP(105,148),t.a10=new sP(74,105),t.b0=new sP(2836,4008),t.b1=new sP(2004,2836),t.b2=new sP(1418,2004),t.b3=new sP(1002,1418),t.b4=new sP(709,1002),t.b5=new sP(501,709),t.archE=new sP(2592,3456),t.archD=new sP(1728,2592),t.archC=new sP(1296,1728),t.archB=new sP(864,1296),t.archA=new sP(648,864),t.flsa=new sP(612,936),t.halfLetter=new sP(396,612),t.letter11x17=new sP(792,1224),t.ledger=new sP(1224,792),t}();!function(t){t[t.Portrait=0]="Portrait",t[t.Landscape=1]="Landscape"}(OP||(OP={})),function(t){t[t.RotateAngle0=0]="RotateAngle0",t[t.RotateAngle90=1]="RotateAngle90",t[t.RotateAngle180=2]="RotateAngle180",t[t.RotateAngle270=3]="RotateAngle270"}(EP||(EP={})),function(t){t[t.None=0]="None",t[t.Numeric=1]="Numeric",t[t.LowerLatin=2]="LowerLatin",t[t.LowerRoman=3]="LowerRoman",t[t.UpperLatin=4]="UpperLatin",t[t.UpperRoman=5]="UpperRoman"}(LP||(LP={})),function(t){t[t.None=0]="None",t[t.Bottom=1]="Bottom",t[t.Top=2]="Top",t[t.Left=3]="Left",t[t.Right=4]="Right",t[t.Fill=5]="Fill"}(IP||(IP={})),function(t){t[t.None=0]="None",t[t.TopLeft=1]="TopLeft",t[t.TopCenter=2]="TopCenter",t[t.TopRight=3]="TopRight",t[t.MiddleLeft=4]="MiddleLeft",t[t.MiddleCenter=5]="MiddleCenter",t[t.MiddleRight=6]="MiddleRight",t[t.BottomLeft=7]="BottomLeft",t[t.BottomCenter=8]="BottomCenter",t[t.BottomRight=9]="BottomRight"}(TP||(TP={})),function(t){t[t.None=0]="None",t[t.Top=1]="Top",t[t.Bottom=2]="Bottom",t[t.Left=3]="Left",t[t.Right=4]="Right"}(AP||(AP={}));var zP,jP=function(){function t(){this.pdfMargin=40,this.setMargins(this.pdfMargin)}return Object.defineProperty(t.prototype,"left",{get:function(){return this.leftMargin},set:function(t){this.leftMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.topMargin},set:function(t){this.topMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.rightMargin},set:function(t){this.rightMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.bottomMargin},set:function(t){this.bottomMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"all",{set:function(t){this.setMargins(t)},enumerable:!0,configurable:!0}),t.prototype.setMargins=function(t,e,i,n){void 0===e?this.leftMargin=this.topMargin=this.rightMargin=this.bottomMargin=t:void 0===i?(this.leftMargin=this.rightMargin=t,this.bottomMargin=this.topMargin=e):(this.leftMargin=t,this.topMargin=e,this.rightMargin=i,this.bottomMargin=n)},t.prototype.clone=function(){return this},t}(),NP=function(){function t(t){this.pageMargins=new jP,this.pageSize=RP.a4,this.rotateAngle=EP.RotateAngle0,this.pageOrientation=OP.Portrait,this.pageOrigin=new oP(0,0),this.isRotation=!1,"number"==typeof t&&this.pageMargins.setMargins(t)}return Object.defineProperty(t.prototype,"size",{get:function(){return this.pageSize},set:function(t){this.setSize(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this.pageOrientation},set:function(t){this.pageOrientation!==t&&(this.pageOrientation=t,this.updateSize(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"margins",{get:function(){return this.pageMargins},set:function(t){this.pageMargins=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.pageSize.width},set:function(t){this.pageSize.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.pageSize.height},set:function(t){this.pageSize.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"origin",{get:function(){return this.pageOrigin},set:function(t){this.pageOrigin=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this.rotateAngle},set:function(t){this.rotateAngle=t,this.isRotation=!0},enumerable:!0,configurable:!0}),t.prototype.updateSize=function(t){var e=Math.min(this.pageSize.width,this.pageSize.height),i=Math.max(this.pageSize.width,this.pageSize.height);switch(t){case OP.Portrait:this.pageSize=new sP(e,i);break;case OP.Landscape:this.pageSize=new sP(i,e)}},t.prototype.clone=function(){return this.pageMargins=this.pageMargins.clone(),this},t.prototype.getActualSize=function(){var t=this.width-(this.margins.left+this.margins.right),e=this.height-(this.margins.top+this.margins.bottom);return new sP(t,e)},t.prototype.setSize=function(t){var e=Math.min(t.width,t.height),i=Math.max(t.width,t.height);this.orientation===OP.Portrait?this.pageSize=new sP(e,i):this.pageSize=new sP(i,e)},t}(),HP=function(){function t(t){if(null==t)throw new Error("ArgumentNullException:stream");this.stream=t}return t.prototype.clear=function(){this.stream.clearStream()},t.prototype.setGraphicsState=function(t){t instanceof Gx?(this.stream.write(t.toString()),this.stream.write(qx.whiteSpace),this.writeOperator(qx.setGraphicsState)):(this.stream.write(qx.slash),this.stream.write(t),this.stream.write(qx.whiteSpace),this.writeOperator(qx.setGraphicsState))},t.prototype.executeObject=function(t){this.stream.write(t.toString()),this.stream.write(qx.whiteSpace),this.writeOperator(qx.paintXObject),this.stream.write(qx.newLine)},t.prototype.closePath=function(){this.writeOperator(qx.closePath)},t.prototype.clipPath=function(t){this.stream.write(qx.clipPath),t&&this.stream.write(qx.evenOdd),this.stream.write(qx.whiteSpace),this.stream.write(qx.endPath),this.stream.write(qx.newLine)},t.prototype.closeFillStrokePath=function(t){this.stream.write(qx.closeFillStrokePath),t?(this.stream.write(qx.evenOdd),this.stream.write(qx.newLine)):this.stream.write(qx.newLine)},t.prototype.fillStrokePath=function(t){this.stream.write(qx.fillStroke),t?(this.stream.write(qx.evenOdd),this.stream.write(qx.newLine)):this.stream.write(qx.newLine)},t.prototype.fillPath=function(t){this.stream.write(qx.fill),t?(this.stream.write(qx.evenOdd),this.stream.write(qx.newLine)):this.stream.write(qx.newLine)},t.prototype.endPath=function(){this.writeOperator(qx.n)},t.prototype.closeFillPath=function(t){this.writeOperator(qx.closePath),this.stream.write(qx.fill),t?(this.stream.write(qx.evenOdd),this.stream.write(qx.newLine)):this.stream.write(qx.newLine)},t.prototype.closeStrokePath=function(){this.writeOperator(qx.closeStrokePath)},t.prototype.setTextScaling=function(t){this.stream.write(eC.floatToString(t)),this.stream.write(qx.whiteSpace),this.writeOperator(qx.setTextScaling)},t.prototype.strokePath=function(){this.writeOperator(qx.stroke)},t.prototype.restoreGraphicsState=function(){this.writeOperator(qx.restoreState)},t.prototype.saveGraphicsState=function(){this.writeOperator(qx.saveState)},t.prototype.startNextLine=function(t,e){void 0===t?this.writeOperator(qx.goToNextLine):t instanceof oP?(this.writePoint(t),this.writeOperator(qx.setCoords)):(this.writePoint(t,e),this.writeOperator(qx.setCoords))},t.prototype.showText=function(t){this.checkTextParam(t),this.writeText(t),this.writeOperator(qx.setText)},t.prototype.setLeading=function(t){this.stream.write(eC.floatToString(t)),this.stream.write(qx.whiteSpace),this.writeOperator(qx.setTextLeading)},t.prototype.beginPath=function(t,e){this.writePoint(t,e),this.writeOperator(qx.beginPath)},t.prototype.beginText=function(){this.writeOperator(qx.beginText)},t.prototype.endText=function(){this.writeOperator(qx.endText)},t.prototype.appendRectangle=function(t,e,i,n){t instanceof aP?this.appendRectangle(t.x,t.y,t.width,t.height):(this.writePoint(t,e),this.writePoint(i,n),this.writeOperator(qx.appendRectangle))},t.prototype.appendLineSegment=function(t,e){t instanceof oP?this.appendLineSegment(t.x,t.y):(this.writePoint(t,e),this.writeOperator(qx.appendLineSegment))},t.prototype.setTextRenderingMode=function(t){this.stream.write(t.toString()),this.stream.write(qx.whiteSpace),this.writeOperator(qx.setRenderingMode)},t.prototype.setCharacterSpacing=function(t){this.stream.write(eC.floatToString(t)),this.stream.write(qx.whiteSpace),this.stream.write(qx.setCharacterSpace),this.stream.write(qx.newLine)},t.prototype.setWordSpacing=function(t){this.stream.write(eC.floatToString(t)),this.stream.write(qx.whiteSpace),this.writeOperator(qx.setWordSpace)},t.prototype.showNextLineText=function(t,e){t instanceof HC?(this.checkTextParam(t),this.writeText(t),this.writeOperator(qx.setTextOnNewLine)):(this.checkTextParam(t),this.writeText(t,e),this.writeOperator(qx.setTextOnNewLine))},t.prototype.setColorSpace=function(t,e){if(t instanceof Gx&&"boolean"==typeof e){var i=t,n=(r=e)?qx.selectcolorspaceforstroking:qx.selectcolorspacefornonstroking;this.stream.write(i.toString()),this.stream.write(qx.whiteSpace),this.stream.write(n),this.stream.write(qx.newLine)}else{i=t;var r=e;this.setColorSpace(new Gx(i),r)}},t.prototype.modifyCtm=function(t){if(null==t)throw new Error("ArgumentNullException:matrix");this.stream.write(t.toString()),this.stream.write(qx.whiteSpace),this.writeOperator(qx.modifyCtm)},t.prototype.setFont=function(t,e,i){if("string"==typeof e)this.setFont(t,new Gx(e),i);else{if(null==t)throw new Error("ArgumentNullException:font");this.stream.write(e.toString()),this.stream.write(qx.whiteSpace),this.stream.write(eC.floatToString(i)),this.stream.write(qx.whiteSpace),this.writeOperator(qx.setFont)}},t.prototype.writeOperator=function(t){this.stream.write(t),this.stream.write(qx.newLine)},t.prototype.checkTextParam=function(t){if(null==t)throw new Error("ArgumentNullException:text");if("string"==typeof t&&""===t)throw new Error("ArgumentException:The text can not be an empty string, text")},t.prototype.writeText=function(t,e){if(t instanceof HC&&void 0===e)this.stream.write(t.pdfEncode());else{var i=void 0,n=void 0;e?(i=HC.hexStringMark[0],n=HC.hexStringMark[1]):(i=HC.stringMark[0],n=HC.stringMark[1]),this.stream.write(i),this.stream.write(t),this.stream.write(n)}},t.prototype.writePoint=function(t,e){if(t instanceof oP&&void 0===e)this.writePoint(t.x,t.y);else{var i=t;this.stream.write(eC.floatToString(i)),this.stream.write(qx.whiteSpace),e=this.updateY(e),this.stream.write(eC.floatToString(e)),this.stream.write(qx.whiteSpace)}},t.prototype.updateY=function(t){return-t},t.prototype.write=function(t){var e="";e+=t,e+=qx.newLine,this.writeOperator(e)},t.prototype.writeComment=function(t){if(!(null!=t&&t.length>0))throw new Error("Invalid comment");var e="";e+=qx.comment,e+=qx.whiteSpace,e+=t,this.writeOperator(e)},t.prototype.setColorAndSpace=function(t,e,i){t.isEmpty||(this.stream.write(t.toString(e,i)),this.stream.write(qx.newLine))},t.prototype.setLineDashPattern=function(t,e){this.setLineDashPatternHelper(t,e)},t.prototype.setLineDashPatternHelper=function(t,e){var i="[";if(t.length>1)for(var n=0;n<t.length;n++)n===t.length-1?i+=t[n].toString():i+=t[n].toString()+" ";i+="] ",i+=e.toString(),i+=" "+qx.setDashPattern,this.stream.write(i),this.stream.write(qx.newLine)},t.prototype.setMiterLimit=function(t){this.stream.write(eC.floatToString(t)),this.stream.write(qx.whiteSpace),this.writeOperator(qx.setMiterLimit)},t.prototype.setLineWidth=function(t){this.stream.write(eC.floatToString(t)),this.stream.write(qx.whiteSpace),this.writeOperator(qx.setLineWidth)},t.prototype.setLineCap=function(t){this.stream.write(t.toString()),this.stream.write(qx.whiteSpace),this.writeOperator(qx.setLineCapStyle)},t.prototype.setLineJoin=function(t){this.stream.write(t.toString()),this.stream.write(qx.whiteSpace),this.writeOperator(qx.setLineJoinStyle)},Object.defineProperty(t.prototype,"position",{get:function(){return this.stream.position},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){var t=0;if(0!==this.stream.data.length&&-1!==this.stream.data.length)for(var e=0;e<this.stream.data.length;e++)t+=this.stream.data[e].length;return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"document",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.appendBezierSegment=function(t,e,i,n,r,o){t instanceof oP&&e instanceof oP&&i instanceof oP?(this.writePoint(t.x,t.y),this.writePoint(e.x,e.y),this.writePoint(i.x,i.y)):(this.writePoint(t,e),this.writePoint(i,n),this.writePoint(r,o)),this.writeOperator(qx.appendbeziercurve)},t.prototype.setColourWithPattern=function(t,e,i){if(null!=t){var n=t.length,r=0;for(r=0;r<n;++r)this.stream.write(t[r].toString()),this.stream.write(qx.whiteSpace)}null!=e&&(this.stream.write(e.toString()),this.stream.write(qx.whiteSpace)),i?this.writeOperator(qx.setColorAndPatternStroking):this.writeOperator(qx.setColorAndPattern)},t}(),_P=function(){function t(t,e){this.pdfColor=new rP(0,0,0),this.dashOffsetValue=0,this.penDashPattern=[0],this.pdfDashStyle=kC.Solid,this.pdfLineCap=0,this.pdfLineJoin=0,this.penWidth=1,this.internalMiterLimit=0,this.colorSpace=DC.Rgb,t instanceof hP?this.setBrush(t):t instanceof rP&&(this.color=t),"number"==typeof e&&(this.width=e)}return Object.defineProperty(t.prototype,"color",{get:function(){return this.pdfColor},set:function(t){this.pdfColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dashOffset",{get:function(){return void 0===this.dashOffsetValue||null==this.dashOffsetValue?0:this.dashOffsetValue},set:function(t){this.dashOffsetValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dashPattern",{get:function(){return this.penDashPattern},set:function(t){this.penDashPattern=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dashStyle",{get:function(){return this.pdfDashStyle},set:function(t){if(this.pdfDashStyle!==t)switch(this.pdfDashStyle=t,this.pdfDashStyle){case kC.Custom:break;case kC.Dash:this.penDashPattern=[3,1];break;case kC.Dot:this.penDashPattern=[1,1];break;case kC.DashDot:this.penDashPattern=[3,1,1,1];break;case kC.DashDotDot:this.penDashPattern=[3,1,1,1,1,1];break;case kC.Solid:break;default:this.pdfDashStyle=kC.Solid,this.penDashPattern=[0]}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineCap",{get:function(){return this.pdfLineCap},set:function(t){this.pdfLineCap=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this.pdfLineJoin},set:function(t){this.pdfLineJoin=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this.internalMiterLimit},set:function(t){this.internalMiterLimit=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.penWidth},set:function(t){this.penWidth=t},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return this},t.prototype.setBrush=function(t){var e=t;null!=e&&e instanceof dP&&(this.color=e.color,this.pdfBrush=e),this.color=e.color,this.pdfBrush=e},t.prototype.monitorChanges=function(t,e,i,n,r,o){this.dashControl(t,!0,e),e.setLineWidth(this.width),e.setLineJoin(this.lineJoin),e.setLineCap(this.lineCap);var s=this.miterLimit;s>0&&e.setMiterLimit(s);this.pdfBrush;return e.setColorAndSpace(this.color,r,!0),!0},t.prototype.dashControl=function(t,e,i){var n=this.width,r=this.getPattern();return i.setLineDashPattern(r,this.dashOffset*n),!0},t.prototype.getPattern=function(){for(var t=this.dashPattern,e=0;e<t.length;++e)t[e]*=this.width;return t},t}(),VP=function(){function t(t){this.radDegFactor=180/Math.PI,this.transformationMatrix=new FP(1,0,0,void 0===t?1:-1,0,0)}return Object.defineProperty(t.prototype,"matrix",{get:function(){return this.transformationMatrix},set:function(t){this.transformationMatrix=t},enumerable:!0,configurable:!0}),t.prototype.translate=function(t,e){this.transformationMatrix.translate(t,e)},t.prototype.scale=function(t,e){this.transformationMatrix.elements[0]=t,this.transformationMatrix.elements[3]=e},t.prototype.rotate=function(t){t=t*Math.PI/180,this.transformationMatrix.elements[0]=Math.cos(t),this.transformationMatrix.elements[1]=Math.sin(t),this.transformationMatrix.elements[2]=-Math.sin(t),this.transformationMatrix.elements[3]=Math.cos(t)},t.prototype.toString=function(){for(var t="",e=0,i=this.transformationMatrix.elements.length;e<i;e++){this.matrix.elements[e];t+=eC.floatToString(this.transformationMatrix.elements[e]),t+=" "}return t},t.prototype.multiply=function(t){this.transformationMatrix.multiply(t.matrix)},t.degreesToRadians=function(t){return this.degRadFactor*t},t.prototype.radiansToDegrees=function(t){return this.radDegFactor*t},t.prototype.clone=function(){return this},t.degRadFactor=Math.PI/180,t}(),FP=function(){function t(t,e,i,n,r,o){void 0===t?this.metrixElements=[]:"number"==typeof t?(this.metrixElements=[],this.metrixElements.push(t),this.metrixElements.push(e),this.metrixElements.push(i),this.metrixElements.push(n),this.metrixElements.push(r),this.metrixElements.push(o)):this.metrixElements=t}return Object.defineProperty(t.prototype,"elements",{get:function(){return this.metrixElements},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){return this.metrixElements[4]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this.metrixElements[5]},enumerable:!0,configurable:!0}),t.prototype.translate=function(t,e){this.metrixElements[4]=t,this.metrixElements[5]=e},t.prototype.transform=function(t){var e=t.x,i=t.y,n=e*this.elements[0]+i*this.elements[2]+this.offsetX,r=e*this.elements[1]+i*this.elements[3]+this.offsetY;return new oP(n,r)},t.prototype.multiply=function(t){var e=[];e.push(this.elements[0]*t.elements[0]+this.elements[1]*t.elements[2]),e[1]=this.elements[0]*t.elements[1]+this.elements[1]*t.elements[3],e[2]=this.elements[2]*t.elements[0]+this.elements[3]*t.elements[2],e[3]=this.elements[2]*t.elements[1]+this.elements[3]*t.elements[3],e[4]=this.offsetX*t.elements[0]+this.offsetY*t.elements[2]+t.offsetX,e[5]=this.offsetX*t.elements[1]+this.offsetY*t.elements[3]+t.offsetY;for(var i=0;i<e.length;i++)this.elements[i]=e[i]},t.prototype.dispose=function(){this.metrixElements=null},t.prototype.clone=function(){return new t(this.metrixElements)},t}(),WP=function(){return function(){this.pdf="PDF",this.text="Text",this.imageB="ImageB",this.imageC="ImageC",this.imageI="ImageI"}}(),UP=function(){function t(){this.mKeys=[],this.mValues=[]}return t.prototype.size=function(){return this.mKeys.length},t.prototype.add=function(t,e){if(null==t||null==e)throw new ReferenceError("Provided key or value is not valid.");if(this.mKeys.indexOf(t)<0)return this.mKeys.push(t),this.mValues.push(e),1;throw new RangeError("An item with the same key has already been added.")},t.prototype.keys=function(){return this.mKeys},t.prototype.values=function(){return this.mValues},t.prototype.getValue=function(t){if(null==t)throw new ReferenceError("Provided key is not valid.");var e=this.mKeys.indexOf(t);if(e<0)throw new RangeError("No item with the specified key has been added.");return this.mValues[e]},t.prototype.setValue=function(t,e){if(null==t)throw new ReferenceError("Provided key is not valid.");var i=this.mKeys.indexOf(t);i<0?(this.mKeys.push(t),this.mValues.push(e)):this.mValues[i]=e},t.prototype.remove=function(t){if(null==t)throw new ReferenceError("Provided key is not valid.");var e=this.mKeys.indexOf(t);if(e<0)throw new RangeError("No item with the specified key has been added.");return this.mKeys.splice(e,1),this.mValues.splice(e,1),!0},t.prototype.containsKey=function(t){if(null==t)throw new ReferenceError("Provided key is not valid.");return!(this.mKeys.indexOf(t)<0)},t.prototype.clear=function(){this.mKeys=[],this.mValues=[]},t}(),GP=function(){function t(t,e,i){this.dictionary=new Yx,this.dictionaryProperties=new Xx,this.dictionary.items.setValue(this.dictionaryProperties.CA,new eC(t)),this.dictionary.items.setValue(this.dictionaryProperties.ca,new eC(e)),this.dictionary.items.setValue(this.dictionaryProperties.BM,new Gx(i.toString()))}return Object.defineProperty(t.prototype,"element",{get:function(){return this.dictionary},enumerable:!0,configurable:!0}),t}(),qP=function(){function t(){this.automaticFieldsInformation=[]}return Object.defineProperty(t.prototype,"automaticFields",{get:function(){return this.automaticFieldsInformation},enumerable:!0,configurable:!0}),t.prototype.add=function(t){return this.automaticFields.push(t)},t}(),XP=function(){function t(){}return t.prototype.drawHelper=function(t,e,i){var n=0!==e||0!==i,r=null;n&&(r=t.save(),t.translateTransform(e,i)),this.drawInternal(t),n&&t.restore(r)},t}(),YP=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ZP=function(t){function e(){var e=t.call(this)||this;return e.internalBounds=new aP(0,0,0,0),e.internalTemplateSize=new sP(0,0),e}return YP(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.internalBounds},set:function(t){this.internalBounds=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return new sP(this.bounds.width,this.bounds.height)},set:function(t){this.bounds.width=t.width,this.bounds.height=t.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"location",{get:function(){return new oP(this.bounds.x,this.bounds.y)},set:function(t){this.bounds.x=t.x,this.bounds.y=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this.internalFont},set:function(t){this.internalFont=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"brush",{get:function(){return this.internalBrush},set:function(t){this.internalBrush=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pen",{get:function(){return this.internalPen},set:function(t){this.internalPen=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stringFormat",{get:function(){return this.internalStringFormat},set:function(t){this.internalStringFormat=t},enumerable:!0,configurable:!0}),e.prototype.performDrawHelper=function(t,e,i,n){if(0===this.bounds.height||0===this.bounds.width){var r=this.getValue(t);this.internalTemplateSize=this.getFont().measureString(r,this.size,this.stringFormat)}},e.prototype.draw=function(t,e,i){if(void 0===e){var n=new oP(0,0);this.draw(t,n)}else if(e instanceof oP)this.draw(t,e.x,e.y);else{this.drawHelper(t,e,i);var r=new KP(this,new oP(e,i));t.automaticFields.add(r)}},e.prototype.getSize=function(){return 0===this.bounds.height||0===this.bounds.width?this.internalTemplateSize:this.size},e.prototype.drawInternal=function(t){},e.prototype.getBrush=function(){return void 0===this.internalBrush||null==this.internalBrush?new dP(new rP(0,0,0)):this.internalBrush},e.prototype.getFont=function(){return void 0===this.internalFont||null==this.internalFont?fE.defaultFont:this.internalFont},e.prototype.getPageFromGraphics=function(t){return void 0!==t.page&&null!==t.page?t.page:t.currentPage},e}(XP),KP=function(){function t(e,i,n,r){this.pageNumberFieldLocation=new oP,this.pageNumberField=null,this.scaleX=1,this.scaleY=1,void 0===i&&e instanceof t?(this.pageNumberField=e.field,this.pageNumberFieldLocation=e.location,this.scaleX=e.scalingX,this.scaleY=e.scalingY):void 0===n&&i instanceof oP&&e instanceof ZP?(this.pageNumberField=e,this.pageNumberFieldLocation=i):(this.pageNumberField=e,this.pageNumberFieldLocation=i,this.scaleX=n,this.scaleY=r)}return Object.defineProperty(t.prototype,"location",{get:function(){return this.pageNumberFieldLocation},set:function(t){this.pageNumberFieldLocation=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"field",{get:function(){return this.pageNumberField},set:function(t){this.pageNumberField=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scalingX",{get:function(){return this.scaleX},set:function(t){this.scaleX=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scalingY",{get:function(){return this.scaleY},set:function(t){this.scaleY=t},enumerable:!0,configurable:!0}),t}(),JP=function(){function t(t){this.mPosition=0,this.buffer=new Uint8Array(t),this.dataView=new DataView(this.buffer.buffer)}return Object.defineProperty(t.prototype,"position",{get:function(){return this.mPosition},set:function(t){this.mPosition=t},enumerable:!0,configurable:!0}),t.prototype.read=function(t,e,i){for(var n=e;n<i;n++){var r=this.position;t.buffer[n]=this.readByte(r),this.position++}},t.prototype.getBuffer=function(t){return this.buffer[t]},t.prototype.writeFromBase64String=function(t){var e=this.encodedString(t);this.buffer=e},t.prototype.encodedString=function(t){var e,i,n,r,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,l=0,h=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;t.charAt(t.length-1)===s.charAt(64)&&h--;for(var c=new Uint8Array(0|h);a<t.length;)e=s.indexOf(t.charAt(a++))<<2|(r=s.indexOf(t.charAt(a++)))>>4,i=(15&r)<<4|(o=s.indexOf(t.charAt(a++)))>>2,n=(3&o)<<6|s.indexOf(t.charAt(a++)),c[l++]=e,c[l++]=i,c[l++]=n;return c},t.prototype.readByte=function(t){return this.buffer[t]},Object.defineProperty(t.prototype,"internalBuffer",{get:function(){return this.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this.buffer.byteLength},enumerable:!0,configurable:!0}),t.prototype.readNextTwoBytes=function(t){var e=t.readByte(this.position);return this.position++,e<<=8,e|=t.readByte(this.position),this.position++,e},t}(),QP=function(){function t(t){this.currentPosition=-1,this.value=t}return Object.defineProperty(t.prototype,"status",{get:function(){return this.objectStatus},set:function(t){this.objectStatus=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSaving",{get:function(){return this.saving},set:function(t){this.saving=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objectCollectionIndex",{get:function(){return this.index},set:function(t){this.index=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.currentPosition},set:function(t){this.currentPosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clonedObject",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.save=function(t){t.write(this.boolToStr(this.value))},t.prototype.clone=function(e){return new t(this.value)},t.prototype.boolToStr=function(t){return t?"true":"false"},t}();!function(t){t[t.Unknown=0]="Unknown",t[t.Bmp=1]="Bmp",t[t.Emf=2]="Emf",t[t.Gif=3]="Gif",t[t.Jpeg=4]="Jpeg",t[t.Png=5]="Png",t[t.Wmf=6]="Wmf",t[t.Icon=7]="Icon"}(zP||(zP={}));var $P,tO,eO,iO=function(){function t(t){this.sof1Marker=193,this.sof2Marker=194,this.sof3Marker=195,this.sof5Marker=197,this.sof6Marker=198,this.sof7Marker=199,this.sof9Marker=201,this.sof10Marker=202,this.sof11Marker=203,this.sof13Marker=205,this.sof14Marker=206,this.sof15Marker=207,this.mFormat=zP.Unknown,this.mbitsPerComponent=8,this.dictionaryProperties=new Xx,this.mStream=t,this.initialize()}return Object.defineProperty(t.prototype,"height",{get:function(){return this.mHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.mWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bitsPerComponent",{get:function(){return this.mbitsPerComponent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.mImageData.count},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageData",{get:function(){return this.mImageData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDataAsNumberArray",{get:function(){return this.mImageData.internalBuffer.buffer},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this.mFormat===zP.Unknown&&this.checkIfJpeg()&&(this.mFormat=zP.Jpeg,this.parseJpegImage()),this.reset(),this.mImageData=new JP(this.mStream.count),this.mStream.read(this.mImageData,0,this.mImageData.count)},t.prototype.reset=function(){this.mStream.position=0},t.prototype.parseJpegImage=function(){this.reset();var t=new JP(this.mStream.count);this.mStream.read(t,0,t.count);for(var e=4,i=!1,n=256*t.getBuffer(e)+t.getBuffer(e+1);e<t.count;){if(!((e+=n)<t.count)){i=!0;break}if(192===t.getBuffer(e+1))return this.mHeight=256*t.getBuffer(e+5)+t.getBuffer(e+6),void(this.mWidth=256*t.getBuffer(e+7)+t.getBuffer(e+8));e+=2,n=256*t.getBuffer(e)+t.getBuffer(e+1)}i&&(this.mStream.position=0,this.skip(this.mStream,2),this.readExceededJPGImage(this.mStream))},Object.defineProperty(t.prototype,"format",{get:function(){return this.mFormat},enumerable:!0,configurable:!0}),t.prototype.checkIfJpeg=function(){this.reset();for(var e=0;e<t.mJpegHeader.length;e++){if(t.mJpegHeader[e]!==this.mStream.readByte(e))return!1;this.mStream.position++}return!0},t.prototype.getImageDictionary=function(){if(this.mFormat===zP.Jpeg){this.imageData.internalBuffer.length;this.imageStream=new CC,this.imageStream.isImage=!0;for(var t="",e="",i=0;i<this.imageDataAsNumberArray.byteLength;i++)t+=String.fromCharCode(null,this.mStream.readByte(i));for(i=0;i<t.length;i++)i%2!=0&&(e+=t[i]);return this.imageStream.data=[e],this.imageStream.compress=!1,this.imageStream.items.setValue(this.dictionaryProperties.type,new Gx(this.dictionaryProperties.xObject)),this.imageStream.items.setValue(this.dictionaryProperties.subtype,new Gx(this.dictionaryProperties.image)),this.imageStream.items.setValue(this.dictionaryProperties.width,new eC(this.width)),this.imageStream.items.setValue(this.dictionaryProperties.height,new eC(this.height)),this.imageStream.items.setValue(this.dictionaryProperties.bitsPerComponent,new eC(this.bitsPerComponent)),this.imageStream.items.setValue(this.dictionaryProperties.filter,new Gx(this.dictionaryProperties.dctdecode)),this.imageStream.items.setValue(this.dictionaryProperties.colorSpace,new Gx(this.getColorSpace())),this.imageStream.items.setValue(this.dictionaryProperties.decodeParms,this.getDecodeParams()),this.imageStream}return this.imageStream},t.prototype.getColorSpace=function(){return this.dictionaryProperties.deviceRgb},t.prototype.getDecodeParams=function(){var t=new Yx;return t.items.setValue(this.dictionaryProperties.columns,new eC(this.width)),t.items.setValue(this.dictionaryProperties.blackIs1,new QP(!0)),t.items.setValue(this.dictionaryProperties.k,new eC(-1)),t.items.setValue(this.dictionaryProperties.predictor,new eC(15)),t.items.setValue(this.dictionaryProperties.bitsPerComponent,new eC(this.bitsPerComponent)),t},t.prototype.readExceededJPGImage=function(t){this.mStream=t;for(var e=!0;e;){switch(this.getMarker(t)){case this.sof1Marker:case this.sof2Marker:case this.sof3Marker:case this.sof5Marker:case this.sof6Marker:case this.sof7Marker:case this.sof9Marker:case this.sof10Marker:case this.sof11Marker:case this.sof13Marker:case this.sof14Marker:case this.sof15Marker:t.position+=3,this.mHeight=this.mStream.readNextTwoBytes(t),this.mWidth=this.mStream.readNextTwoBytes(t),e=!1;break;default:this.skipStream(t)}}},t.prototype.skip=function(t,e){this.mStream=t;var i=new JP(e);this.mStream.read(i,0,i.count)},t.prototype.getMarker=function(t){var e=32;for(e=t.readByte(this.mStream.position),t.position++;255!==e;)0,e=t.readByte(this.mStream.position),t.position++;do{e=t.readByte(this.mStream.position),t.position++}while(255===e);return e},t.prototype.skipStream=function(t){var e=this.mStream.readNextTwoBytes(t)-2;e>0&&(t.position+=e)},t.mPngHeader=[137,80,78,71,13,10,26,10],t.mJpegHeader=[255,216],t.GIF_HEADER="G,I,F,8",t.BMP_HEADER="B,M",t}(),nO=function(){function t(t){this.updateProportionsHelper(t)}return t.prototype.convertUnits=function(t,e,i){return this.convertFromPixels(this.convertToPixels(t,e),i)},t.prototype.convertToPixels=function(t,e){var i=e;return t*this.proportions[i]},t.prototype.convertFromPixels=function(t,e){var i=e;return t/this.proportions[i]},t.prototype.updateProportionsHelper=function(t){this.proportions=[t/2.54,t/6,1,t/72,t,t/300,t/25.4]},t.horizontalResolution=96,t.verticalResolution=96,t}(),rO=function(){function t(){}return Object.defineProperty(t.prototype,"width",{get:function(){return this.imageWidth},set:function(t){this.imageWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.imageHeight},set:function(t){this.imageHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{set:function(t){this.width=t.width,this.height=t.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"physicalDimension",{get:function(){return this.imagePhysicalDimension=this.getPointSize(this.width,this.height,this.horizontalResolution,this.verticalResolution),new sP(this.width,this.height)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.imageStream},enumerable:!0,configurable:!0}),t.prototype.getPointSize=function(t,e,i,n){if(void 0===i){var r=nO.horizontalResolution,o=nO.verticalResolution;return this.getPointSize(t,e,r,o)}var s=new nO(i),a=new nO(n),l=s.convertUnits(t,zC.Pixel,zC.Point),h=a.convertUnits(e,zC.Pixel,zC.Point);return new sP(l,h)},t}(),oO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sO=function(t){function e(e){var i=t.call(this)||this;return i.imageStatus=!0,i.dictionaryProperties=new Xx,i.loadImage(e),i}return oO(e,t),e.prototype.loadImage=function(t){this.initializeAsync(t)},e.prototype.initializeAsync=function(t){var e=new JP(t.length);e.writeFromBase64String(t),this.decoder=new iO(e),this.height=this.decoder.height,this.width=this.decoder.width,this.bitsPerComponent=this.decoder.bitsPerComponent},e.prototype.save=function(){this.imageStatus=!0,this.imageStream=this.decoder.getImageDictionary()},e}(rO),aO=function(){function t(){}return Object.defineProperty(t.prototype,"empty",{get:function(){return this.offset===this.length&&this.length===this.checksum&&0===this.checksum},enumerable:!0,configurable:!0}),t}(),lO=function(){return function(){}}(),hO=function(){return function(){}}(),cO=function(){return function(){}}(),dO=function(){function t(){}return Object.defineProperty(t.prototype,"isItalic",{get:function(){return 0!=(2&this.macStyle)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBold",{get:function(){return 0!=(1&this.macStyle)},enumerable:!0,configurable:!0}),t}(),pO=function(){return function(){}}(),uO=function(){return function(){}}(),fO=function(){return function(){}}(),gO=function(){return function(){}}(),mO=function(){return function(){}}(),yO=function(){return function(){}}(),vO=function(){function t(){}return Object.defineProperty(t.prototype,"empty",{get:function(){return this.index===this.width&&this.width===this.charCode&&0===this.charCode},enumerable:!0,configurable:!0}),t.prototype.compareTo=function(t){var e=t;return this.index-e.index},t}(),bO=function(){return function(){}}(),wO=function(){return function(){}}(),SO=function(){return function(){}}(),xO=function(){return function(){}}(),CO=function(){return function(){}}(),PO=function(){function t(t){this.int32Size=4,this.int16Size=2,this.int64Size=8,this.bufferLength=t,this.buffer=[]}return Object.defineProperty(t.prototype,"data",{get:function(){if(this.buffer.length<this.bufferLength)for(var t=this.bufferLength-this.buffer.length,e=0;e<t;e++)this.buffer.push(0);return this.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return void 0!==this.internalPosition&&null!==this.internalPosition||(this.internalPosition=0),this.internalPosition},enumerable:!0,configurable:!0}),t.prototype.writeShort=function(t){var e=[(65280&t)>>8,255&t];this.flush(e)},t.prototype.writeInt=function(t){var e=(4278190080&t)>>24;e=e<0?256+e:e;var i=(16711680&t)>>16;i=i<0?256+i:i;var n=(65280&t)>>8;n=n<0?256+n:n;var r=255&t;r=r<0?256+r:r;var o=[(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t];this.flush(o)},t.prototype.writeUInt=function(t){var e=[(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t];this.flush(e)},t.prototype.writeString=function(t){if(null==t)throw new Error("Argument Null Exception : value");for(var e=[],i=0;i<t.length;i++)e.push(t.charCodeAt(i));this.flush(e)},t.prototype.writeBytes=function(t){this.flush(t)},t.prototype.flush=function(t){if(null===t)throw new Error("Argument Null Exception : buff");for(var e=this.position,i=0;i<t.length;i++)this.buffer[e]=t[i],e++;this.internalPosition+=t.length},t}(),OO=function(){function t(t){this.int32Size=4,this.isTtcFont=!1,this.isMacTtf=!1,this.metricsName="",this.isMacTTF=!1,this.missedGlyphs=0,this.tableNames=["cvt ","fpgm","glyf","head","hhea","hmtx","loca","maxp","prep"],this.entrySelectors=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4],this.fontData=t,this.initialize()}return Object.defineProperty(t.prototype,"macintosh",{get:function(){return null!==this.macintoshDictionary&&void 0!==this.macintoshDictionary||(this.macintoshDictionary=new Ux),this.macintoshDictionary},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"microsoft",{get:function(){return null!==this.microsoftDictionary&&void 0!==this.microsoftDictionary||(this.microsoftDictionary=new Ux),this.microsoftDictionary},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"macintoshGlyphs",{get:function(){return null!==this.internalMacintoshGlyphs&&void 0!==this.internalMacintoshGlyphs||(this.internalMacintoshGlyphs=new Ux),this.internalMacintoshGlyphs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"microsoftGlyphs",{get:function(){return null!==this.internalMicrosoftGlyphs&&void 0!==this.internalMicrosoftGlyphs||(this.internalMicrosoftGlyphs=new Ux),this.internalMicrosoftGlyphs},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){void 0===this.metrics&&(this.metrics=new dO),this.readFontDictionary();var t=this.readNameTable(),e=this.readHeadTable();this.initializeFontName(t),this.metrics.macStyle=e.macStyle},t.prototype.readFontDictionary=function(){this.offset=0;this.checkPreambula();var t=this.readInt16(this.offset);this.readInt16(this.offset),this.readInt16(this.offset),this.readInt16(this.offset);void 0===this.tableDirectory&&(this.tableDirectory=new Ux);for(var e=0;e<t;++e){var i=new aO,n=this.readString(this.int32Size);i.checksum=this.readInt32(this.offset),i.offset=this.readInt32(this.offset),i.length=this.readInt32(this.offset),this.tableDirectory.setValue(n,i)}this.lowestPosition=this.offset,this.isTtcFont||this.fixOffsets()},t.prototype.fixOffsets=function(){for(var t=Number.MAX_VALUE,e=this.tableDirectory.keys(),i=0;i<e.length;i++){var n=(s=this.tableDirectory.getValue(e[i])).offset;if(t>n&&(t=n)<=this.lowestPosition)break}var r=t-this.lowestPosition;if(0!==r){var o=new Ux;for(i=0;i<e.length;i++){var s;(s=this.tableDirectory.getValue(e[i])).offset-=r,o.setValue(e[i],s)}this.tableDirectory=o}},t.prototype.checkPreambula=function(){var t=this.readInt32(this.offset);if(this.isMacTtf=1953658213===t,65536!==t&&1953658213!==t&&1330926671!==t){if(this.isTtcFont=!0,this.offset=0,"ttcf"!==this.readString(4))throw new Error("Can not read TTF font data");if(this.offset+=4,this.readInt32(this.offset)<0)throw new Error("Can not read TTF font data");this.offset=this.readInt32(this.offset),t=this.readInt32(this.offset)}return t},t.prototype.readNameTable=function(){var t=this.getTable("name");this.offset=t.offset;var e=new lO;e.formatSelector=this.readUInt16(this.offset),e.recordsCount=this.readUInt16(this.offset),e.offset=this.readUInt16(this.offset),e.nameRecords=[];for(var i=this.offset,n=0;n<e.recordsCount;n++){this.offset=i;var r=new hO;r.platformID=this.readUInt16(this.offset),r.encodingID=this.readUInt16(this.offset),r.languageID=this.readUInt16(this.offset),r.nameID=this.readUInt16(this.offset),r.length=this.readUInt16(this.offset),r.offset=this.readUInt16(this.offset),this.offset=t.offset+e.offset+r.offset;var o=0===r.platformID||3===r.platformID;r.name=this.readString(r.length,o),e.nameRecords[n]=r,i+=12}return e},t.prototype.readHeadTable=function(){var t=this.getTable("head");this.offset=t.offset;var e=new cO;return e.version=this.readFixed(this.offset),e.fontRevision=this.readFixed(this.offset),e.checkSumAdjustment=this.readUInt32(this.offset),e.magicNumber=this.readUInt32(this.offset),e.flags=this.readUInt16(this.offset),e.unitsPerEm=this.readUInt16(this.offset),e.created=this.readInt64(this.offset),e.modified=this.readInt64(this.offset),e.xMin=this.readInt16(this.offset),e.yMin=this.readInt16(this.offset),e.xMax=this.readInt16(this.offset),e.yMax=this.readInt16(this.offset),e.macStyle=this.readUInt16(this.offset),e.lowestReadableSize=this.readUInt16(this.offset),e.fontDirectionHint=this.readInt16(this.offset),e.indexToLocalFormat=this.readInt16(this.offset),e.glyphDataFormat=this.readInt16(this.offset),e},t.prototype.readHorizontalHeaderTable=function(){var t=this.getTable("hhea");this.offset=t.offset;var e=new pO;return e.version=this.readFixed(this.offset),e.ascender=this.readInt16(this.offset),e.descender=this.readInt16(this.offset),e.lineGap=this.readInt16(this.offset),e.advanceWidthMax=this.readUInt16(this.offset),e.minLeftSideBearing=this.readInt16(this.offset),e.minRightSideBearing=this.readInt16(this.offset),e.xMaxExtent=this.readInt16(this.offset),e.caretSlopeRise=this.readInt16(this.offset),e.caretSlopeRun=this.readInt16(this.offset),this.offset+=10,e.metricDataFormat=this.readInt16(this.offset),e.numberOfHMetrics=this.readUInt16(this.offset),e},t.prototype.readOS2Table=function(){var t=this.getTable("OS/2");this.offset=t.offset;var e=new uO;return e.version=this.readUInt16(this.offset),e.xAvgCharWidth=this.readInt16(this.offset),e.usWeightClass=this.readUInt16(this.offset),e.usWidthClass=this.readUInt16(this.offset),e.fsType=this.readInt16(this.offset),e.ySubscriptXSize=this.readInt16(this.offset),e.ySubscriptYSize=this.readInt16(this.offset),e.ySubscriptXOffset=this.readInt16(this.offset),e.ySubscriptYOffset=this.readInt16(this.offset),e.ySuperscriptXSize=this.readInt16(this.offset),e.ySuperscriptYSize=this.readInt16(this.offset),e.ySuperscriptXOffset=this.readInt16(this.offset),e.ySuperscriptYOffset=this.readInt16(this.offset),e.yStrikeoutSize=this.readInt16(this.offset),e.yStrikeoutPosition=this.readInt16(this.offset),e.sFamilyClass=this.readInt16(this.offset),e.panose=this.readBytes(10),e.ulUnicodeRange1=this.readUInt32(this.offset),e.ulUnicodeRange2=this.readUInt32(this.offset),e.ulUnicodeRange3=this.readUInt32(this.offset),e.ulUnicodeRange4=this.readUInt32(this.offset),e.vendorIdentifier=this.readBytes(4),e.fsSelection=this.readUInt16(this.offset),e.usFirstCharIndex=this.readUInt16(this.offset),e.usLastCharIndex=this.readUInt16(this.offset),e.sTypoAscender=this.readInt16(this.offset),e.sTypoDescender=this.readInt16(this.offset),e.sTypoLineGap=this.readInt16(this.offset),e.usWinAscent=this.readUInt16(this.offset),e.usWinDescent=this.readUInt16(this.offset),e.ulCodePageRange1=this.readUInt32(this.offset),e.ulCodePageRange2=this.readUInt32(this.offset),e.version>1?(e.sxHeight=this.readInt16(this.offset),e.sCapHeight=this.readInt16(this.offset),e.usDefaultChar=this.readUInt16(this.offset),e.usBreakChar=this.readUInt16(this.offset),e.usMaxContext=this.readUInt16(this.offset)):(e.sxHeight=0,e.sCapHeight=0,e.usDefaultChar=0,e.usBreakChar=0,e.usMaxContext=0),e},t.prototype.readPostTable=function(){var t=this.getTable("post");this.offset=t.offset;var e=new fO;return e.formatType=this.readFixed(this.offset),e.italicAngle=this.readFixed(this.offset),e.underlinePosition=this.readInt16(this.offset),e.underlineThickness=this.readInt16(this.offset),e.isFixedPitch=this.readUInt32(this.offset),e.minType42=this.readUInt32(this.offset),e.maxType42=this.readUInt32(this.offset),e.minType1=this.readUInt32(this.offset),e.maxType1=this.readUInt32(this.offset),e},t.prototype.readWidthTable=function(t,e){var i=this.getTable("hmtx");this.offset=i.offset;for(var n=[],r=0;r<t;r++){var o=new gO;o.advanceWidth=this.readUInt16(this.offset),o.lsb=this.readInt16(this.offset);var s=1e3*o.advanceWidth/e;n.push(Math.floor(s))}return n},t.prototype.readCmapTable=function(){var t=this.getTable("cmap");this.offset=t.offset;var e=new yO;e.version=this.readUInt16(this.offset),e.tablesCount=this.readUInt16(this.offset);for(var i=this.offset,n=[],r=0;r<e.tablesCount;r++){this.offset=i;var o=new mO;o.platformID=this.readUInt16(this.offset),o.encodingID=this.readUInt16(this.offset),o.offset=this.readUInt32(this.offset),i=this.offset,this.readCmapSubTable(o),n[r]=o}return n},t.prototype.readCmapSubTable=function(t){var e=this.getTable("cmap");this.offset=e.offset+t.offset;var i=this.readUInt16(this.offset),n=this.getCmapEncoding(t.platformID,t.encodingID);n===QC.Macintosh?$C.Macintosh:$C.Microsoft;if(n!==QC.Unknown)switch(i){case JC.Apple:this.readAppleCmapTable(t,n);break;case JC.Microsoft:this.readMicrosoftCmapTable(t,n);break;case JC.Trimmed:this.readTrimmedCmapTable(t,n)}},t.prototype.readAppleCmapTable=function(t,e){var i=this.getTable("cmap");this.offset=i.offset+t.offset;var n=new wO;n.format=this.readUInt16(this.offset),n.length=this.readUInt16(this.offset),n.version=this.readUInt16(this.offset),null!==this.maxMacIndex&&void 0!==this.maxMacIndex||(this.maxMacIndex=0);for(var r=0;r<256;++r){var o=new vO;o.index=this.readByte(this.offset),o.width=this.getWidth(o.index),o.charCode=r,this.macintosh.setValue(r,o),this.addGlyph(o,e),this.maxMacIndex=Math.max(r,this.maxMacIndex)}},t.prototype.readMicrosoftCmapTable=function(t,e){var i=this.getTable("cmap");this.offset=i.offset+t.offset;var n=e===QC.Unicode?this.microsoft:this.macintosh,r=new SO;r.format=this.readUInt16(this.offset),r.length=this.readUInt16(this.offset),r.version=this.readUInt16(this.offset),r.segCountX2=this.readUInt16(this.offset),r.searchRange=this.readUInt16(this.offset),r.entrySelector=this.readUInt16(this.offset),r.rangeShift=this.readUInt16(this.offset);var o=r.segCountX2/2;r.endCount=this.readUshortArray(o),r.reservedPad=this.readUInt16(this.offset),r.startCount=this.readUshortArray(o),r.idDelta=this.readUshortArray(o),r.idRangeOffset=this.readUshortArray(o);var s=r.length/2-8-4*o;r.glyphID=this.readUshortArray(s);for(var a=0,l=0,h=0;h<o;h++)for(var c=r.startCount[h];c<=r.endCount[h]&&65535!==c;c++){if(0===r.idRangeOffset[h])a=c+r.idDelta[h]&65535;else{if((l=h+r.idRangeOffset[h]/2-o+c-r.startCount[h])>=r.glyphID.length)continue;a=r.glyphID[l]+r.idDelta[h]&65535}var d=new vO;d.index=a,d.width=this.getWidth(d.index);var p=e===QC.Symbol&&61440==(65280&c)?255&c:c;d.charCode=p,n.setValue(p,d),this.addGlyph(d,e)}},t.prototype.readTrimmedCmapTable=function(t,e){var i=this.getTable("cmap");this.offset=i.offset+t.offset;var n=new xO;n.format=this.readUInt16(this.offset),n.length=this.readUInt16(this.offset),n.version=this.readUInt16(this.offset),n.firstCode=this.readUInt16(this.offset),n.entryCount=this.readUInt16(this.offset);for(var r=0;r<n.entryCount;++r){var o=new vO;o.index=this.readUInt16(this.offset),o.width=this.getWidth(o.index),o.charCode=r+n.firstCode,this.macintosh.setValue(r,o),this.addGlyph(o,e),this.maxMacIndex=Math.max(r,this.maxMacIndex)}},t.prototype.initializeFontName=function(t){for(var e=0;e<t.recordsCount;e++){var i=t.nameRecords[e];if(1===i.nameID?this.metrics.fontFamily=i.name:6===i.nameID&&(this.metrics.postScriptName=i.name),null!==this.metrics.fontFamily&&void 0!==this.metrics.fontFamily&&null!==this.metrics.postScriptName&&void 0!==this.metrics.postScriptName)break}},t.prototype.getTable=function(t){var e,i=new aO;return this.tableDirectory.containsKey(t)&&(e=this.tableDirectory.getValue(t)),null!=e&&(i=e),i},t.prototype.getWidth=function(t){return t=t<this.width.length?t:this.width.length-1,this.width[t]},t.prototype.getCmapEncoding=function(t,e){var i=QC.Unknown;return t==$C.Microsoft&&e==tP.Undefined?i=QC.Symbol:t==$C.Microsoft&&e==tP.Unicode?i=QC.Unicode:t==$C.Macintosh&&e==eP.Roman&&(i=QC.Macintosh),i},t.prototype.addGlyph=function(t,e){var i=null;switch(e){case QC.Unicode:i=this.microsoftGlyphs;break;case QC.Macintosh:case QC.Symbol:i=this.macintoshGlyphs}i.setValue(t.index,t)},t.prototype.initializeMetrics=function(t,e,i,n,r,o){this.initializeFontName(t);for(var s=!1,a=0;a<o.length;a++){var l=o[a];if(this.getCmapEncoding(l.platformID,l.encodingID)===QC.Symbol){s=!0;break}}this.metrics.isSymbol=s,this.metrics.macStyle=e.macStyle,this.metrics.isFixedPitch=0!==r.isFixedPitch,this.metrics.italicAngle=r.italicAngle;var h=1e3/e.unitsPerEm;this.metrics.winAscent=n.sTypoAscender*h,this.metrics.macAscent=i.ascender*h,this.metrics.capHeight=0!==n.sCapHeight?n.sCapHeight:.7*e.unitsPerEm*h,this.metrics.winDescent=n.sTypoDescender*h,this.metrics.macDescent=i.descender*h,this.metrics.leading=(n.sTypoAscender-n.sTypoDescender+n.sTypoLineGap)*h,this.metrics.lineGap=Math.ceil(i.lineGap*h);var c=e.xMin*h,d=Math.ceil(this.metrics.macAscent+this.metrics.lineGap),p=e.xMax*h,u=this.metrics.macDescent;this.metrics.fontBox=new lP(c,d,p,u),this.metrics.stemV=80,this.metrics.widthTable=this.updateWidth(),this.metrics.contains=this.tableDirectory.containsKey("CFF"),this.metrics.subScriptSizeFactor=e.unitsPerEm/n.ySubscriptYSize,this.metrics.superscriptSizeFactor=e.unitsPerEm/n.ySuperscriptYSize},t.prototype.updateWidth=function(){var t=[];if(this.metrics.isSymbol)for(var e=0;e<256;e++){var i=this.getGlyph(String.fromCharCode(e));t[e]=i.empty?0:i.width}else{var n=[],r=String.fromCharCode(32);for(e=0;e<256;e++){n[0]=e;var o=this.getString(n,0,n.length),s=o.length>0?o[0]:"?";(i=this.getGlyph(s)).empty?(i=this.getGlyph(r),t[e]=i.empty?0:i.width):t[e]=i.width}}return t},t.prototype.getDefaultGlyph=function(){return this.getGlyph(fP.whiteSpace)},t.prototype.getString=function(t,e,i){for(var n="",r=0;r<i;r++)n+=String.fromCharCode(t[r+e]);return n},t.prototype.readLocaTable=function(t){var e=this.getTable("loca");this.offset=e.offset;var i=new bO,n=null;if(t){var r=e.length/2;n=[];for(var o=0;o<r;o++)n[o]=2*this.readUInt16(this.offset)}else{r=e.length/4;n=[];for(o=0;o<r;o++)n[o]=this.readUInt32(this.offset)}return i.offsets=n,i},t.prototype.updateGlyphChars=function(t,e){t.containsKey(0)||t.setValue(0,0);for(var i=new Ux,n=t.keys(),r=0;r<n.length;r++)i.setValue(n[r],t.getValue(n[r]));for(r=0;r<n.length;r++){var o=n[r];this.processCompositeGlyph(t,o,e)}},t.prototype.processCompositeGlyph=function(t,e,i){if(e<i.offsets.length-1){var n=i.offsets[e];if(n!==i.offsets[e+1]){var r=this.getTable("glyf");this.offset=r.offset+n;var o=new CO;if(o.numberOfContours=this.readInt16(this.offset),o.xMin=this.readInt16(this.offset),o.yMin=this.readInt16(this.offset),o.xMax=this.readInt16(this.offset),o.yMax=this.readInt16(this.offset),o.numberOfContours<0)for(var s=0;;){var a=this.readUInt16(this.offset),l=this.readUInt16(this.offset);if(t.containsKey(l)||t.setValue(l,0),0==(a&nP.MoreComponents))break;s=0!=(a&nP.Arg1And2AreWords)?4:2,0!=(a&nP.WeHaveScale)?s+=2:0!=(a&nP.WeHaveAnXyScale)?s+=4:0!=(a&nP.WeHaveTwoByTwo)&&(s+=8),this.offset+=s}}}},t.prototype.generateGlyphTable=function(t,e,i,n){i=[];var r=t.keys();r.sort(function(t,e){return t-e});for(var o=0,s=0;s<r.length;s++){var a=r[s];e.offsets.length>0&&(o+=e.offsets[a+1]-e.offsets[a])}var l=this.align(o);n=[];for(s=0;s<l;s++)n.push(0);var h=0,c=0,d=this.getTable("glyf");for(s=0;s<e.offsets.length;s++)if(i.push(h),c<r.length&&r[c]===s){++c,i[s]=h;var p=e.offsets[s],u=e.offsets[s+1]-p;if(u>0)this.offset=d.offset+p,n=this.read(n,h,u).buffer,h+=u}return{glyphTableSize:o,newLocaTable:i,newGlyphTable:n}},t.prototype.updateLocaTable=function(t,e,i){if(null===t)throw new Error("Argument Null Exception : newLocaTable");for(var n=e?2*t.length:4*t.length,r=this.align(n),o=new PO(r),s=0;s<t.length;s++){var a=t[s];e?(a/=2,o.writeShort(a)):o.writeInt(a)}return{newLocaUpdated:o.data,newLocaSize:n}},t.prototype.align=function(t){return t+3&-4},t.prototype.getFontProgram=function(t,e,i,n){if(null===t)throw new Error("Argument Null Exception : newLocaTableOut");if(null===e)throw new Error("Argument Null Exception : newGlyphTable");this.tableNames;var r=this.getFontProgramLength(t,e,0),o=r.fontProgramLength,s=r.numTables,a=new PO(o);a.writeInt(65536),a.writeShort(s);var l=this.entrySelectors[s];return a.writeShort(16*(1<<(31&l))),a.writeShort(l),a.writeShort(16*(s-(1<<(31&l)))),this.writeCheckSums(a,s,t,e,i,n),this.writeGlyphs(a,t,e),a.data},t.prototype.getFontProgramLength=function(t,e,i){if(null===t)throw new Error("Argument Null Exception : newLocaTableOut");if(null===e)throw new Error("Argument Null Exception : newGlyphTable");i=2;for(var n=this.tableNames,r=0,o=0;o<n.length;o++){var s=n[o];if("glyf"!==s&&"loca"!==s){var a=this.getTable(s);a.empty||(++i,r+=this.align(a.length))}}return r+=t.length,r+=e.length,{fontProgramLength:r+=16*i+12,numTables:i}},t.prototype.writeCheckSums=function(t,e,i,n,r,o){if(null===t)throw new Error("Argument Null Exception : writer");if(null===i)throw new Error("Argument Null Exception : newLocaTableOut");if(null===n)throw new Error("Argument Null Exception : newGlyphTable");for(var s=this.tableNames,a=16*e+12,l=0,h=0;h<s.length;h++){var c=s[h],d=this.getTable(c);if(!d.empty){if(t.writeString(c),"glyf"===c){var p=this.calculateCheckSum(n);t.writeInt(p),l=r}else if("loca"===c){p=this.calculateCheckSum(i);t.writeInt(p),l=o}else t.writeInt(d.checksum),l=d.length;t.writeUInt(a),t.writeUInt(l),a+=this.align(l)}}},t.prototype.calculateCheckSum=function(t){if(null===t)throw new Error("Argument Null Exception : bytes");for(var e=0,i=0,n=0,r=0,o=0,s=0;s<(t.length+1)/4;s++)o+=255&t[e++],r+=255&t[e++],n+=255&t[e++],i+=255&t[e++];var a=i;return a+=n<<8,a+=r<<16,a+=o<<24},t.prototype.writeGlyphs=function(t,e,i){if(null===t)throw new Error("Argument Null Exception : writer");if(null===e)throw new Error("Argument Null Exception : newLocaTableOut");if(null===i)throw new Error("Argument Null Exception : newGlyphTable");for(var n=this.tableNames,r=0;r<n.length;r++){var o=n[r],s=this.getTable(o);if(!s.empty)if("glyf"===o)t.writeBytes(i);else if("loca"===o)t.writeBytes(e);else{for(var a=this.align(s.length),l=[],h=0;h<a;h++)l.push(0);this.offset=s.offset;var c=this.read(l,0,s.length);t.writeBytes(c.buffer)}}},t.prototype.setOffset=function(t){this.offset=t},t.prototype.createInternals=function(){this.metrics=new dO;var t=this.readNameTable(),e=this.readHeadTable();this.bIsLocaShort=0===e.indexToLocalFormat;var i=this.readHorizontalHeaderTable(),n=this.readOS2Table(),r=this.readPostTable();this.width=this.readWidthTable(i.numberOfHMetrics,e.unitsPerEm);var o=this.readCmapTable();this.initializeMetrics(t,e,i,n,r,o)},t.prototype.getGlyph=function(t){if("number"==typeof t){var e=null;return this.metrics.isSymbol||null==this.microsoftGlyphs?this.metrics.isSymbol&&null!=this.macintoshGlyphs&&this.macintoshGlyphs.containsKey(t)&&(e=this.macintoshGlyphs.getValue(t)):this.microsoftGlyphs.containsKey(t)&&(e=this.microsoftGlyphs.getValue(t)),null!=e?e:this.getDefaultGlyph()}var i=null,n=t.charCodeAt(0);return this.metrics.isSymbol||null===this.microsoft?(this.metrics.isSymbol&&null!==this.macintosh||this.isMacTTF)&&(0!==this.maxMacIndex?n%=this.maxMacIndex+1:n=61440==(65280&n)?255&n:n,this.macintosh.containsKey(n)&&(i=this.macintosh.getValue(n),this.isFontPresent=!0)):this.microsoft.containsKey(n)?(i=this.microsoft.getValue(n),n!==fP.whiteSpace.charCodeAt(0)&&(this.isFontPresent=!0)):n!==fP.whiteSpace.charCodeAt(0)&&(this.isFontPresent=!1),t===fP.whiteSpace&&null===i&&(i=new vO),null!==i?i:this.getDefaultGlyph()},t.prototype.getGlyphChars=function(t){if(null==t)throw new Error("Argument Null Exception : chars");for(var e=new Ux,i=t.keys(),n=0;n<i.length;n++){var r=i[n],o=this.getGlyph(r);o.empty||e.setValue(o.index,r.charCodeAt(0))}return e},t.prototype.getAllGlyphs=function(){for(var t=[],e=new vO,i=0,n=0;n<this.width.length;n++){var r=this.width[n];e.index=i,e.width=r,t.push(e),i++}return t},t.prototype.readFontProgram=function(t){var e=this.getGlyphChars(t),i=this.readLocaTable(this.bIsLocaShort);e.size()<t.size()&&(this.missedGlyphs=t.size()-e.size()),this.updateGlyphChars(e,i);var n=this.generateGlyphTable(e,i,null,null),r=n.glyphTableSize,o=n.newLocaTable,s=n.newGlyphTable,a=this.updateLocaTable(o,this.bIsLocaShort,null),l=a.newLocaSize,h=a.newLocaUpdated;return this.getFontProgram(h,s,r,l)},t.prototype.convertString=function(t){if(null===t)throw new Error("Argument Null Exception : text");for(var e="",i=0;i<t.length;i++){var n=t[i],r=this.getGlyph(n);r.empty||(e+=String.fromCharCode(r.index),0)}return e},t.prototype.getCharWidth=function(t){var e=this.getGlyph(t);return(e=e.empty?this.getDefaultGlyph():e).empty?0:e.width},t.prototype.readString=function(t,e){if(void 0===e)return this.readString(t,!1);var i="";if(e)for(var n=0;n<t;n++)n%2!=0&&(i+=String.fromCharCode(this.fontData[this.offset])),this.offset+=1;else for(n=0;n<t;n++)i+=String.fromCharCode(this.fontData[this.offset]),this.offset+=1;return i},t.prototype.readFixed=function(t){return this.readInt16(t)+this.readInt16(t+2)/16384},t.prototype.readInt32=function(t){var e=this.fontData[t+3],i=this.fontData[t+2],n=this.fontData[t+1],r=this.fontData[t];return this.offset+=4,e+(i<<8)+(n<<16)+(r<<24)},t.prototype.readUInt32=function(t){var e=this.fontData[t+3],i=this.fontData[t+2],n=this.fontData[t+1],r=this.fontData[t];return this.offset+=4,e|i<<8|n<<16|r<<24},t.prototype.readInt16=function(t){var e=(this.fontData[t]<<8)+this.fontData[t+1];return e=32768&e?e-65536:e,this.offset+=2,e},t.prototype.readInt64=function(t){var e=this.readInt32(t+4),i=4294967296*this.readInt32(t)+e;return e<0&&(i+=4294967296),i},t.prototype.readUInt16=function(t){var e=this.fontData[t]<<8|this.fontData[t+1];return this.offset+=2,e},t.prototype.readUshortArray=function(t){for(var e=[],i=0;i<t;i++)e[i]=this.readUInt16(this.offset);return e},t.prototype.readBytes=function(t){for(var e=[],i=0;i<t;i++)e.push(this.fontData[this.offset]),this.offset+=1;return e},t.prototype.readByte=function(t){var e=this.fontData[t];return this.offset+=1,e},t.prototype.read=function(t,e,i){if(null===t)throw new Error("Argument Null Exception : buffer");var n=0,r=0;do{for(var o=0;o<i-n&&this.offset+o<this.fontData.length;o++)t[e+o]=this.fontData[this.offset+o];r=i-n,this.offset+=r,n+=r}while(n<i);return{buffer:t,written:n}},t}(),EO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),LO=function(){function t(){this.lineGap=0}return t.prototype.getAscent=function(t){return this.ascent*bP.charSizeMultiplier*this.getSize(t)},t.prototype.getDescent=function(t){return this.descent*bP.charSizeMultiplier*this.getSize(t)},t.prototype.getLineGap=function(t){return this.lineGap*bP.charSizeMultiplier*this.getSize(t)},t.prototype.getHeight=function(t){for(var e=["cambria","candara","constantia","corbel","cariadings"],i=[],n=0;n<e.length;n++){var r=e[n];i.push(r)}return this.getDescent(t)<0?this.getAscent(t)-this.getDescent(t)+this.getLineGap(t):this.getAscent(t)+this.getDescent(t)+this.getLineGap(t)},t.prototype.getSize=function(t){var e=this.size;if(null!=t)switch(t.subSuperScript){case ZC.SubScript:e/=this.subScriptSizeFactor;break;case ZC.SuperScript:e/=this.superscriptSizeFactor}return e},t.prototype.clone=function(){return this.widthTable=IO.clone(),this},Object.defineProperty(t.prototype,"widthTable",{get:function(){return this.internalWidthTable},set:function(t){this.internalWidthTable=t},enumerable:!0,configurable:!0}),t}(),IO=function(){function t(){}return t.clone=function(){return null},t}(),TO=function(t){function e(e){var i=t.call(this)||this;if(null==e)throw new Error("ArgumentNullException:widths");return i.widths=e,i}return EO(e,t),e.prototype.items=function(t){if(t<0||t>=this.widths.length)throw new Error("ArgumentOutOfRangeException:index, The character is not supported by the font.");return this.widths[t]},Object.defineProperty(e.prototype,"length",{get:function(){return this.widths.length},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return this.widths=this.widths,this},e.prototype.toArray=function(){return new iC(this.widths)},e}(IO),AO=function(){function t(t,e){if(this.nameString="ABCDEFGHIJKLMNOPQRSTUVWXYZ",this.dictionaryProperties=new Xx,this.isCompress=!1,this.isEmbedFont=!1,this.cmapPrefix="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap"+qx.newLine+"/CIDSystemInfo << /Registry (Adobe)/Ordering (UCS)/Supplement 0>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange"+qx.newLine,this.cmapEndCodespaceRange="endcodespacerange"+qx.newLine,this.cmapBeginRange="beginbfrange"+qx.newLine,this.cmapEndRange="endbfrange"+qx.newLine,this.cmapSuffix="endbfrange\nendcmap\nCMapName currentdict /CMap defineresource pop\nend end"+qx.newLine,null==t)throw new Error("ArgumentNullException:base64String");this.fontSize=e,this.fontString=t,this.Initialize()}return t.prototype.getCharWidth=function(t){return this.ttfReader.getCharWidth(t)},t.prototype.getLineWidth=function(t){for(var e=0,i=0,n=t.length;i<n;i++){var r=t[i];e+=this.getCharWidth(r)}return e},t.prototype.Initialize=function(){var t=new JP(this.fontString.length);t.writeFromBase64String(this.fontString),this.fontData=t.internalBuffer,this.ttfReader=new OO(this.fontData),this.ttfMetrics=this.ttfReader.metrics},t.prototype.createInternals=function(){this.fontDictionary=new Yx,this.fontProgram=new CC,this.cmap=new CC,this.descendantFont=new Yx,this.metrics=new LO,this.ttfReader.createInternals(),this.ttfMetrics=this.ttfReader.metrics,this.initializeMetrics(),this.subsetName=this.getFontName(),this.createDescendantFont(),this.createCmap(),this.createFontDictionary(),this.createFontProgram()},t.prototype.getInternals=function(){return this.fontDictionary},t.prototype.initializeMetrics=function(){var t=this.ttfReader.metrics;this.metrics.ascent=t.macAscent,this.metrics.descent=t.macDescent,this.metrics.height=t.macAscent-t.macDescent+t.lineGap,this.metrics.name=t.fontFamily,this.metrics.postScriptName=t.postScriptName,this.metrics.size=this.fontSize,this.metrics.widthTable=new TO(t.widthTable),this.metrics.lineGap=t.lineGap,this.metrics.subScriptSizeFactor=t.subScriptSizeFactor,this.metrics.superscriptSizeFactor=t.superscriptSizeFactor,this.metrics.isBold=t.isBold},t.prototype.getFontName=function(){for(var t,e="",i=0;i<6;i++){var n=Math.floor(26*Math.random())+0;e+=this.nameString[n]}return e+="+",t=(e+=this.ttfReader.metrics.postScriptName).toString(),t=this.formatName(t)},t.prototype.formatName=function(t){var e=t.replace("(","#28");return(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(")","#29")).replace("[","#5B")).replace("]","#5D")).replace("<","#3C")).replace(">","#3E")).replace("{","#7B")).replace("}","#7D")).replace("/","#2F")).replace("%","#25")).replace(" ","#20")},t.prototype.createDescendantFont=function(){this.descendantFont.isFont=!0,this.descendantFont.descendantFontBeginSave=new Kx(this),this.descendantFont.items.setValue(this.dictionaryProperties.type,new Gx(this.dictionaryProperties.font)),this.descendantFont.items.setValue(this.dictionaryProperties.subtype,new Gx(this.dictionaryProperties.cIDFontType2)),this.descendantFont.items.setValue(this.dictionaryProperties.baseFont,new Gx(this.subsetName)),this.descendantFont.items.setValue(this.dictionaryProperties.cIDToGIDMap,new Gx(this.dictionaryProperties.identity)),this.descendantFont.items.setValue(this.dictionaryProperties.dw,new eC(1e3)),this.fontDescriptor=this.createFontDescriptor(),this.descendantFont.items.setValue(this.dictionaryProperties.fontDescriptor,new VC(this.fontDescriptor));var t=this.createSystemInfo();this.descendantFont.items.setValue(this.dictionaryProperties.cIDSystemInfo,t)},t.prototype.createFontDescriptor=function(){var t=new Yx,e=this.ttfReader.metrics;return t.isFont=!0,t.items.setValue(this.dictionaryProperties.type,new Gx(this.dictionaryProperties.fontDescriptor)),t.items.setValue(this.dictionaryProperties.fontName,new Gx(this.subsetName)),t.items.setValue(this.dictionaryProperties.flags,new eC(this.getDescriptorFlags())),t.items.setValue(this.dictionaryProperties.fontBBox,iC.fromRectangle(this.getBoundBox())),t.items.setValue(this.dictionaryProperties.missingWidth,new eC(e.widthTable[32])),t.items.setValue(this.dictionaryProperties.stemV,new eC(e.stemV)),t.items.setValue(this.dictionaryProperties.italicAngle,new eC(e.italicAngle)),t.items.setValue(this.dictionaryProperties.capHeight,new eC(e.capHeight)),t.items.setValue(this.dictionaryProperties.ascent,new eC(e.winAscent)),t.items.setValue(this.dictionaryProperties.descent,new eC(e.winDescent)),t.items.setValue(this.dictionaryProperties.leading,new eC(e.leading)),t.items.setValue(this.dictionaryProperties.avgWidth,new eC(e.widthTable[32])),t.items.setValue(this.dictionaryProperties.fontFile2,new VC(this.fontProgram)),t.items.setValue(this.dictionaryProperties.maxWidth,new eC(e.widthTable[32])),t.items.setValue(this.dictionaryProperties.xHeight,new eC(0)),t.items.setValue(this.dictionaryProperties.stemH,new eC(0)),t},t.prototype.createCmap=function(){this.cmap.cmapBeginSave=new PC(this)},t.prototype.createFontDictionary=function(){this.fontDictionary.isFont=!0,this.fontDictionary.fontDictionaryBeginSave=new Jx(this),this.fontDictionary.items.setValue(this.dictionaryProperties.type,new Gx(this.dictionaryProperties.font)),this.fontDictionary.items.setValue(this.dictionaryProperties.baseFont,new Gx(this.subsetName)),this.fontDictionary.items.setValue(this.dictionaryProperties.subtype,new Gx(this.dictionaryProperties.type0)),this.fontDictionary.items.setValue(this.dictionaryProperties.encoding,new Gx(this.dictionaryProperties.identityH));var t=new iC,e=new VC(this.descendantFont);t.isFont=!0,t.add(e),this.fontDictionary.items.setValue(this.dictionaryProperties.descendantFonts,t)},t.prototype.createFontProgram=function(){this.fontProgram.fontProgramBeginSave=new OC(this)},t.prototype.createSystemInfo=function(){var t=new Yx;return t.items.setValue(this.dictionaryProperties.registry,new HC("Adobe")),t.items.setValue(this.dictionaryProperties.ordering,new HC(this.dictionaryProperties.identity)),t.items.setValue(this.dictionaryProperties.supplement,new eC(0)),t},t.prototype.descendantFontBeginSave=function(){if(null!==this.usedChars&&void 0!==this.usedChars&&this.usedChars.size()>0){var t=this.getDescendantWidth();null!==t&&this.descendantFont.items.setValue(this.dictionaryProperties.w,t)}},t.prototype.cmapBeginSave=function(){this.generateCmap()},t.prototype.fontDictionaryBeginSave=function(){null!==this.usedChars&&void 0!==this.usedChars&&this.usedChars.size()>0&&!this.fontDictionary.containsKey(this.dictionaryProperties.toUnicode)&&this.fontDictionary.items.setValue(this.dictionaryProperties.toUnicode,new VC(this.cmap))},t.prototype.fontProgramBeginSave=function(){this.isCompress=!0,this.generateFontProgram()},t.prototype.getDescendantWidth=function(){var t=new iC;if(null!==this.usedChars&&void 0!==this.usedChars&&this.usedChars.size()>0){for(var e=[],i=this.usedChars.keys(),n=0;n<i.length;n++){var r=i[n];(h=this.ttfReader.getGlyph(r)).empty||e.push(h)}e.sort(function(t,e){return t.index-e.index});var o=0,s=0,a=!1,l=new iC;for(n=0;n<e.length;n++){var h=e[n];a||(a=!0,o=h.index,s=h.index-1),(s+1!==h.index||n+1===e.length)&&e.length>1&&(t.add(new eC(o)),0!==n&&t.add(l),o=h.index,l=new iC),l.add(new eC(h.width)),n+1===e.length&&(t.add(new eC(o)),t.add(l)),s=h.index}}return t},t.prototype.generateCmap=function(){if(null!==this.usedChars&&void 0!==this.usedChars&&this.usedChars.size()>0){var t=this.ttfReader.getGlyphChars(this.usedChars);if(t.size()>0){var e=t.keys().sort(),i=e[0],n=e[e.length-1],r=this.toHexString(i,!1)+this.toHexString(n,!1)+qx.newLine,o="";o+=this.cmapPrefix,o+=r,o+=this.cmapEndCodespaceRange;for(var s=0,a=0;a<e.length;a++){0===s&&(0!==a&&(o+=this.cmapEndRange),o+=s=Math.min(100,e.length-a),o+=qx.whiteSpace,o+=this.cmapBeginRange),s-=1;var l=e[a];o+=this.toHexString(l,!0)+this.toHexString(l,!0)+this.toHexString(t.getValue(l),!0)+"\n"}o+=this.cmapSuffix,this.cmap.clearStream(),this.cmap.isFont=!0,this.cmap.write(o)}}},t.prototype.generateFontProgram=function(){var t;this.usedChars=null===this.usedChars||void 0===this.usedChars?new Ux:this.usedChars,this.ttfReader.setOffset(0),t=this.ttfReader.readFontProgram(this.usedChars),this.fontProgram.clearStream(),this.fontProgram.isFont=!0,this.fontProgram.writeBytes(t)},t.prototype.getDescriptorFlags=function(){var t=0,e=this.ttfReader.metrics;return e.isFixedPitch&&(t|=iP.FixedPitch),e.isSymbol?t|=iP.Symbolic:t|=iP.Nonsymbolic,e.isItalic&&(t|=iP.Italic),e.isBold&&(t|=iP.ForceBold),t},t.prototype.getBoundBox=function(){var t=this.ttfReader.metrics.fontBox,e=Math.abs(t.right-t.left),i=Math.abs(t.top-t.bottom);return new aP(t.left,t.bottom,e,i)},t.prototype.toHexString=function(t,e){var i=t.toString(16);return e&&(i=i.toUpperCase()),"<0000".substring(0,5-i.length)+i+">"},t.prototype.setSymbols=function(t){if(null===t)throw new Error("Argument Null Exception : text");null!==this.usedChars&&void 0!==this.usedChars||(this.usedChars=new Ux);for(var e=0;e<t.length;e++){var i=t[e];this.usedChars.setValue(i,String.fromCharCode(0))}!1===this.isEmbedFont&&this.getDescendantWidth()},t}(),BO=function(){function t(){this.arabicCharTable=[["ء","ﺀ"],["آ","ﺁ","ﺂ"],["أ","ﺃ","ﺄ"],["ؤ","ﺅ","ﺆ"],["إ","ﺇ","ﺈ"],["ئ","ﺉ","ﺊ","ﺋ","ﺌ"],["ا","ﺍ","ﺎ"],["ب","ﺏ","ﺐ","ﺑ","ﺒ"],["ة","ﺓ","ﺔ"],["ت","ﺕ","ﺖ","ﺗ","ﺘ"],["ث","ﺙ","ﺚ","ﺛ","ﺜ"],["ج","ﺝ","ﺞ","ﺟ","ﺠ"],["ح","ﺡ","ﺢ","ﺣ","ﺤ"],["خ","ﺥ","ﺦ","ﺧ","ﺨ"],["د","ﺩ","ﺪ"],["ذ","ﺫ","ﺬ"],["ر","ﺭ","ﺮ"],["ز","ﺯ","ﺰ"],["س","ﺱ","ﺲ","ﺳ","ﺴ"],["ش","ﺵ","ﺶ","ﺷ","ﺸ"],["ص","ﺹ","ﺺ","ﺻ","ﺼ"],["ض","ﺽ","ﺾ","ﺿ","ﻀ"],["ط","ﻁ","ﻂ","ﻃ","ﻄ"],["ظ","ﻅ","ﻆ","ﻇ","ﻈ"],["ع","ﻉ","ﻊ","ﻋ","ﻌ"],["غ","ﻍ","ﻎ","ﻏ","ﻐ"],["ـ","ـ","ـ","ـ","ـ"],["ف","ﻑ","ﻒ","ﻓ","ﻔ"],["ق","ﻕ","ﻖ","ﻗ","ﻘ"],["ك","ﻙ","ﻚ","ﻛ","ﻜ"],["ل","ﻝ","ﻞ","ﻟ","ﻠ"],["م","ﻡ","ﻢ","ﻣ","ﻤ"],["ن","ﻥ","ﻦ","ﻧ","ﻨ"],["ه","ﻩ","ﻪ","ﻫ","ﻬ"],["و","ﻭ","ﻮ"],["ى","ﻯ","ﻰ","ﯨ","ﯩ"],["ي","ﻱ","ﻲ","ﻳ","ﻴ"],["ٱ","ﭐ","ﭑ"],["ٹ","ﭦ","ﭧ","ﭨ","ﭩ"],["ٺ","ﭞ","ﭟ","ﭠ","ﭡ"],["ٻ","ﭒ","ﭓ","ﭔ","ﭕ"],["پ","ﭖ","ﭗ","ﭘ","ﭙ"],["ٿ","ﭢ","ﭣ","ﭤ","ﭥ"],["ڀ","ﭚ","ﭛ","ﭜ","ﭝ"],["ڃ","ﭶ","ﭷ","ﭸ","ﭹ"],["ڄ","ﭲ","ﭳ","ﭴ","ﭵ"],["چ","ﭺ","ﭻ","ﭼ","ﭽ"],["ڇ","ﭾ","ﭿ","ﮀ","ﮁ"],["ڈ","ﮈ","ﮉ"],["ڌ","ﮄ","ﮅ"],["ڍ","ﮂ","ﮃ"],["ڎ","ﮆ","ﮇ"],["ڑ","ﮌ","ﮍ"],["ژ","ﮊ","ﮋ"],["ڤ","ﭪ","ﭫ","ﭬ","ﭭ"],["ڦ","ﭮ","ﭯ","ﭰ","ﭱ"],["ک","ﮎ","ﮏ","ﮐ","ﮑ"],["ڭ","ﯓ","ﯔ","ﯕ","ﯖ"],["گ","ﮒ","ﮓ","ﮔ","ﮕ"],["ڱ","ﮚ","ﮛ","ﮜ","ﮝ"],["ڳ","ﮖ","ﮗ","ﮘ","ﮙ"],["ں","ﮞ","ﮟ"],["ڻ","ﮠ","ﮡ","ﮢ","ﮣ"],["ھ","ﮪ","ﮫ","ﮬ","ﮭ"],["ۀ","ﮤ","ﮥ"],["ہ","ﮦ","ﮧ","ﮨ","ﮩ"],["ۅ","ﯠ","ﯡ"],["ۆ","ﯙ","ﯚ"],["ۇ","ﯗ","ﯘ"],["ۈ","ﯛ","ﯜ"],["ۉ","ﯢ","ﯣ"],["ۋ","ﯞ","ﯟ"],["ی","ﯼ","ﯽ","ﯾ","ﯿ"],["ې","ﯤ","ﯥ","ﯦ","ﯧ"],["ے","ﮮ","ﮯ"],["ۓ","ﮰ","ﮱ"]],this.alef="ا",this.alefHamza="أ",this.alefHamzaBelow="إ",this.alefMadda="آ",this.lam="ل",this.hamza="ء",this.zeroWidthJoiner="‍",this.hamzaAbove="ٔ",this.hamzaBelow="ٕ",this.wawHamza="ؤ",this.yehHamza="ئ",this.waw="و",this.alefMaksura="ى",this.yeh="ي",this.farsiYeh="ی",this.shadda="ّ",this.madda="ٓ",this.lwa="ﻻ",this.lwawh="ﻷ",this.lwawhb="ﻹ",this.lwawm="ﻵ",this.bwhb="ۓ",this.fathatan="ً",this.superScriptalef="ٰ",this.vowel=1,this.arabicMapTable=new Ux;for(var t=0;t<this.arabicCharTable.length;t++)this.arabicMapTable.setValue(this.arabicCharTable[t][0],this.arabicCharTable[t])}return t.prototype.getCharacterShape=function(t,e){if(t>=this.hamza&&t<=this.bwhb){if(this.arabicMapTable.getValue(t))return this.arabicMapTable.getValue(t)[e+1]}else if(t>=this.lwawm&&t<=this.lwa)return t;return t},t.prototype.shape=function(t,e){for(var i="",n="",r=0;r<t.length;r++){var o=t[r];if(o>="؀"&&o<="ۿ")n+=o;else{if(n.length>0)i+=this.doShape(n.toString(),0),n="";i+=o}}n.length>0&&(i+=this.doShape(n.toString(),0));return i.toString()},t.prototype.doShape=function(t,e){for(var i="",n=0,r=0,o="",s=new kO,a=new kO;r<t.length;)if(o=t[r++],0===this.ligature(o,a)){var l=this.getShapeCount(o);n=1===l?0:2,s.Shapes>2&&(n+=1),n%=a.Shapes,a.Value=this.getCharacterShape(a.Value,n),i=this.append(i,s,e),s=a,(a=new kO).Value=o,a.Shapes=l,a.Ligature++}return n=s.Shapes>2?1:0,n%=a.Shapes,a.Value=this.getCharacterShape(a.Value,n),i=this.append(i,s,e),(i=this.append(i,a,e)).toString()},t.prototype.append=function(t,e,i){return""!==e.Value&&(t+=e.Value,e.Ligature-=1,""!==e.Type&&(0==(i&this.vowel)?(t+=e.Type,e.Ligature-=1):e.Ligature-=1),""!==e.vowel&&(0==(i&this.vowel)?(t+=e.vowel,e.Ligature-=1):e.Ligature-=1)),t},t.prototype.ligature=function(t,e){if(""!==e.Value){var i=0;if(t>=this.fathatan&&t<=this.hamzaBelow||t===this.superScriptalef){if(i=1,""!==e.vowel&&t!==this.shadda&&(i=2),t===this.shadda){if(null!=e.Type)return 0;e.Type=this.shadda}else t===this.hamzaBelow?e.Value===this.alef?(e.Value=this.alefHamzaBelow,i=2):t===this.lwa?(e.Value=this.lwawhb,i=2):e.Type=this.hamzaBelow:t===this.hamzaAbove?e.Value===this.alef?(e.Value=this.alefHamza,i=2):e.Value===this.lwa?(e.Value=this.lwawh,i=2):e.Value===this.waw?(e.Value=this.wawHamza,i=2):e.Value===this.yeh||e.Value===this.alefMaksura||e.Value===this.farsiYeh?(e.Value=this.yehHamza,i=2):e.Type=this.hamzaAbove:t===this.madda?e.Value===this.alef&&(e.Value=this.alefMadda,i=2):e.vowel=t;return 1===i&&e.Ligature++,i}return""!==e.vowel?0:(e.Value===this.lam&&(t===this.alef?(e.Value=this.lwa,e.Shapes=2,i=3):t===this.alefHamza?(e.Value=this.lwawh,e.Shapes=2,i=3):t===this.alefHamzaBelow?(e.Value=this.lwawhb,e.Shapes=2,i=3):t===this.alefMadda&&(e.Value=this.lwawm,e.Shapes=2,i=3)),i)}return 0},t.prototype.getShapeCount=function(t){if(t>=this.hamza&&t<=this.bwhb&&!(t>=this.fathatan&&t<=this.hamzaBelow||t===this.superScriptalef)){if(this.arabicMapTable.getValue(t))return this.arabicMapTable.getValue(t).length-1}else if(t===this.zeroWidthJoiner)return 4;return 1},t}(),kO=function(){function t(){this.shapeValue="",this.shapeType="",this.shapeVowel="",this.shapeLigature=0,this.shapeShapes=1}return Object.defineProperty(t.prototype,"Value",{get:function(){return this.shapeValue},set:function(t){this.shapeValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Type",{get:function(){return this.shapeType},set:function(t){this.shapeType=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vowel",{get:function(){return this.shapeVowel},set:function(t){this.shapeVowel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Ligature",{get:function(){return this.shapeLigature},set:function(t){this.shapeLigature=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Shapes",{get:function(){return this.shapeShapes},set:function(t){this.shapeShapes=t},enumerable:!0,configurable:!0}),t}(),MO=function(){function t(){this.indexes=[],this.indexLevels=[],this.mirroringShapeCharacters=new Ux,this.update()}return t.prototype.doMirrorShaping=function(t){for(var e=[],i=0;i<t.length;i++)1==(1&this.indexLevels[i])&&this.mirroringShapeCharacters.containsKey(t[i].charCodeAt(0))?e[i]=String.fromCharCode(this.mirroringShapeCharacters.getValue(t[i].charCodeAt(0))):e[i]=t[i].toString();for(var n="",r=0;r<e.length;r++)n+=e[r];return n},t.prototype.getLogicalToVisualString=function(t,e){var i=new DO;this.indexLevels=i.getVisualOrder(t,e),this.setDefaultIndexLevel(),this.doOrder(0,this.indexLevels.length-1);for(var n=this.doMirrorShaping(t),r="",o=0;o<this.indexes.length;o++){r+=n[this.indexes[o]]}return r.toString()},t.prototype.setDefaultIndexLevel=function(){for(var t=0;t<this.indexLevels.length;t++)this.indexes[t]=t},t.prototype.doOrder=function(t,e){for(var i=this.indexLevels[t],n=i,r=i,o=i,s=t+1;s<=e;++s){var a=this.indexLevels[s];a>i?i=a:a<n&&(n=a),r&=a,o|=a}if(0!=(1&o))if(1!=(1&r))for(n|=1;i>=n;){for(var l=t;;){for(;l<=e&&!(this.indexLevels[l]>=i);)l+=1;if(l>e)break;for(var h=l+1;h<=e&&!(this.indexLevels[h]<i);)h+=1;this.reArrange(l,h),l=h+1}i-=1}else this.reArrange(t,e+1)},t.prototype.reArrange=function(t,e){var i=(t+e)/2;for(--e;t<i;++t,--e){var n=this.indexes[t];this.indexes[t]=this.indexes[e],this.indexes[e]=n}},t.prototype.update=function(){this.mirroringShapeCharacters.setValue(40,41),this.mirroringShapeCharacters.setValue(41,40),this.mirroringShapeCharacters.setValue(60,62),this.mirroringShapeCharacters.setValue(62,60),this.mirroringShapeCharacters.setValue(91,93),this.mirroringShapeCharacters.setValue(93,91),this.mirroringShapeCharacters.setValue(123,125),this.mirroringShapeCharacters.setValue(125,123),this.mirroringShapeCharacters.setValue(171,187),this.mirroringShapeCharacters.setValue(187,171),this.mirroringShapeCharacters.setValue(8249,8250),this.mirroringShapeCharacters.setValue(8250,8249),this.mirroringShapeCharacters.setValue(8261,8262),this.mirroringShapeCharacters.setValue(8262,8261),this.mirroringShapeCharacters.setValue(8317,8318),this.mirroringShapeCharacters.setValue(8318,8317),this.mirroringShapeCharacters.setValue(8333,8334),this.mirroringShapeCharacters.setValue(8334,8333),this.mirroringShapeCharacters.setValue(8712,8715),this.mirroringShapeCharacters.setValue(8713,8716),this.mirroringShapeCharacters.setValue(8714,8717),this.mirroringShapeCharacters.setValue(8715,8712),this.mirroringShapeCharacters.setValue(8716,8713),this.mirroringShapeCharacters.setValue(8717,8714),this.mirroringShapeCharacters.setValue(8725,10741),this.mirroringShapeCharacters.setValue(8764,8765),this.mirroringShapeCharacters.setValue(8765,8764),this.mirroringShapeCharacters.setValue(8771,8909),this.mirroringShapeCharacters.setValue(8786,8787),this.mirroringShapeCharacters.setValue(8787,8786),this.mirroringShapeCharacters.setValue(8788,8789),this.mirroringShapeCharacters.setValue(8789,8788),this.mirroringShapeCharacters.setValue(8804,8805),this.mirroringShapeCharacters.setValue(8805,8804),this.mirroringShapeCharacters.setValue(8806,8807),this.mirroringShapeCharacters.setValue(8807,8806),this.mirroringShapeCharacters.setValue(8808,8809),this.mirroringShapeCharacters.setValue(8809,8808),this.mirroringShapeCharacters.setValue(8810,8811),this.mirroringShapeCharacters.setValue(8811,8810),this.mirroringShapeCharacters.setValue(8814,8815),this.mirroringShapeCharacters.setValue(8815,8814),this.mirroringShapeCharacters.setValue(8816,8817),this.mirroringShapeCharacters.setValue(8817,8816),this.mirroringShapeCharacters.setValue(8818,8819),this.mirroringShapeCharacters.setValue(8819,8818),this.mirroringShapeCharacters.setValue(8820,8821),this.mirroringShapeCharacters.setValue(8821,8820),this.mirroringShapeCharacters.setValue(8822,8823),this.mirroringShapeCharacters.setValue(8823,8822),this.mirroringShapeCharacters.setValue(8824,8825),this.mirroringShapeCharacters.setValue(8825,8824),this.mirroringShapeCharacters.setValue(8826,8827),this.mirroringShapeCharacters.setValue(8827,8826),this.mirroringShapeCharacters.setValue(8828,8829),this.mirroringShapeCharacters.setValue(8829,8828),this.mirroringShapeCharacters.setValue(8830,8831),this.mirroringShapeCharacters.setValue(8831,8830),this.mirroringShapeCharacters.setValue(8832,8833),this.mirroringShapeCharacters.setValue(8833,8832),this.mirroringShapeCharacters.setValue(8834,8835),this.mirroringShapeCharacters.setValue(8835,8834),this.mirroringShapeCharacters.setValue(8836,8837),this.mirroringShapeCharacters.setValue(8837,8836),this.mirroringShapeCharacters.setValue(8838,8839),this.mirroringShapeCharacters.setValue(8839,8838),this.mirroringShapeCharacters.setValue(8840,8841),this.mirroringShapeCharacters.setValue(8841,8840),this.mirroringShapeCharacters.setValue(8842,8843),this.mirroringShapeCharacters.setValue(8843,8842),this.mirroringShapeCharacters.setValue(8847,8848),this.mirroringShapeCharacters.setValue(8848,8847),this.mirroringShapeCharacters.setValue(8849,8850),this.mirroringShapeCharacters.setValue(8850,8849),this.mirroringShapeCharacters.setValue(8856,10680),this.mirroringShapeCharacters.setValue(8866,8867),this.mirroringShapeCharacters.setValue(8867,8866),this.mirroringShapeCharacters.setValue(8870,10974),this.mirroringShapeCharacters.setValue(8872,10980),this.mirroringShapeCharacters.setValue(8873,10979),this.mirroringShapeCharacters.setValue(8875,10981),this.mirroringShapeCharacters.setValue(8880,8881),this.mirroringShapeCharacters.setValue(8881,8880),this.mirroringShapeCharacters.setValue(8882,8883),this.mirroringShapeCharacters.setValue(8883,8882),this.mirroringShapeCharacters.setValue(8884,8885),this.mirroringShapeCharacters.setValue(8885,8884),this.mirroringShapeCharacters.setValue(8886,8887),this.mirroringShapeCharacters.setValue(8887,8886),this.mirroringShapeCharacters.setValue(8905,8906),this.mirroringShapeCharacters.setValue(8906,8905),this.mirroringShapeCharacters.setValue(8907,8908),this.mirroringShapeCharacters.setValue(8908,8907),this.mirroringShapeCharacters.setValue(8909,8771),this.mirroringShapeCharacters.setValue(8912,8913),this.mirroringShapeCharacters.setValue(8913,8912),this.mirroringShapeCharacters.setValue(8918,8919),this.mirroringShapeCharacters.setValue(8919,8918),this.mirroringShapeCharacters.setValue(8920,8921),this.mirroringShapeCharacters.setValue(8921,8920),this.mirroringShapeCharacters.setValue(8922,8923),this.mirroringShapeCharacters.setValue(8923,8922),this.mirroringShapeCharacters.setValue(8924,8925),this.mirroringShapeCharacters.setValue(8925,8924),this.mirroringShapeCharacters.setValue(8926,8927),this.mirroringShapeCharacters.setValue(8927,8926),this.mirroringShapeCharacters.setValue(8928,8929),this.mirroringShapeCharacters.setValue(8929,8928),this.mirroringShapeCharacters.setValue(8930,8931),this.mirroringShapeCharacters.setValue(8931,8930),this.mirroringShapeCharacters.setValue(8932,8933),this.mirroringShapeCharacters.setValue(8933,8932),this.mirroringShapeCharacters.setValue(8934,8935),this.mirroringShapeCharacters.setValue(8935,8934),this.mirroringShapeCharacters.setValue(8936,8937),this.mirroringShapeCharacters.setValue(8937,8936),this.mirroringShapeCharacters.setValue(8938,8939),this.mirroringShapeCharacters.setValue(8939,8938),this.mirroringShapeCharacters.setValue(8940,8941),this.mirroringShapeCharacters.setValue(8941,8940),this.mirroringShapeCharacters.setValue(8944,8945),this.mirroringShapeCharacters.setValue(8945,8944),this.mirroringShapeCharacters.setValue(8946,8954),this.mirroringShapeCharacters.setValue(8947,8955),this.mirroringShapeCharacters.setValue(8948,8956),this.mirroringShapeCharacters.setValue(8950,8957),this.mirroringShapeCharacters.setValue(8951,8958),this.mirroringShapeCharacters.setValue(8954,8946),this.mirroringShapeCharacters.setValue(8955,8947),this.mirroringShapeCharacters.setValue(8956,8948),this.mirroringShapeCharacters.setValue(8957,8950),this.mirroringShapeCharacters.setValue(8958,8951),this.mirroringShapeCharacters.setValue(8968,8969),this.mirroringShapeCharacters.setValue(8969,8968),this.mirroringShapeCharacters.setValue(8970,8971),this.mirroringShapeCharacters.setValue(8971,8970),this.mirroringShapeCharacters.setValue(9001,9002),this.mirroringShapeCharacters.setValue(9002,9001),this.mirroringShapeCharacters.setValue(10088,10089),this.mirroringShapeCharacters.setValue(10089,10088),this.mirroringShapeCharacters.setValue(10090,10091),this.mirroringShapeCharacters.setValue(10091,10090),this.mirroringShapeCharacters.setValue(10092,10093),this.mirroringShapeCharacters.setValue(10093,10092),this.mirroringShapeCharacters.setValue(10094,10095),this.mirroringShapeCharacters.setValue(10095,10094),this.mirroringShapeCharacters.setValue(10096,10097),this.mirroringShapeCharacters.setValue(10097,10096),this.mirroringShapeCharacters.setValue(10098,10099),this.mirroringShapeCharacters.setValue(10099,10098),this.mirroringShapeCharacters.setValue(10100,10101),this.mirroringShapeCharacters.setValue(10101,10100),this.mirroringShapeCharacters.setValue(10197,10198),this.mirroringShapeCharacters.setValue(10198,10197),this.mirroringShapeCharacters.setValue(10205,10206),this.mirroringShapeCharacters.setValue(10206,10205),this.mirroringShapeCharacters.setValue(10210,10211),this.mirroringShapeCharacters.setValue(10211,10210),this.mirroringShapeCharacters.setValue(10212,10213),this.mirroringShapeCharacters.setValue(10213,10212),this.mirroringShapeCharacters.setValue(10214,10215),this.mirroringShapeCharacters.setValue(10215,10214),this.mirroringShapeCharacters.setValue(10216,10217),this.mirroringShapeCharacters.setValue(10217,10216),this.mirroringShapeCharacters.setValue(10218,10219),this.mirroringShapeCharacters.setValue(10219,10218),this.mirroringShapeCharacters.setValue(10627,10628),this.mirroringShapeCharacters.setValue(10628,10627),this.mirroringShapeCharacters.setValue(10629,10630),this.mirroringShapeCharacters.setValue(10630,10629),this.mirroringShapeCharacters.setValue(10631,10632),this.mirroringShapeCharacters.setValue(10632,10631),this.mirroringShapeCharacters.setValue(10633,10634),this.mirroringShapeCharacters.setValue(10634,10633),this.mirroringShapeCharacters.setValue(10635,10636),this.mirroringShapeCharacters.setValue(10636,10635),this.mirroringShapeCharacters.setValue(10637,10640),this.mirroringShapeCharacters.setValue(10638,10639),this.mirroringShapeCharacters.setValue(10639,10638),this.mirroringShapeCharacters.setValue(10640,10637),this.mirroringShapeCharacters.setValue(10641,10642),this.mirroringShapeCharacters.setValue(10642,10641),this.mirroringShapeCharacters.setValue(10643,10644),this.mirroringShapeCharacters.setValue(10644,10643),this.mirroringShapeCharacters.setValue(10645,10646),this.mirroringShapeCharacters.setValue(10646,10645),this.mirroringShapeCharacters.setValue(10647,10648),this.mirroringShapeCharacters.setValue(10648,10647),this.mirroringShapeCharacters.setValue(10680,8856),this.mirroringShapeCharacters.setValue(10688,10689),this.mirroringShapeCharacters.setValue(10689,10688),this.mirroringShapeCharacters.setValue(10692,10693),this.mirroringShapeCharacters.setValue(10693,10692),this.mirroringShapeCharacters.setValue(10703,10704),this.mirroringShapeCharacters.setValue(10704,10703),this.mirroringShapeCharacters.setValue(10705,10706),this.mirroringShapeCharacters.setValue(10706,10705),this.mirroringShapeCharacters.setValue(10708,10709),this.mirroringShapeCharacters.setValue(10709,10708),this.mirroringShapeCharacters.setValue(10712,10713),this.mirroringShapeCharacters.setValue(10713,10712),this.mirroringShapeCharacters.setValue(10714,10715),this.mirroringShapeCharacters.setValue(10715,10714),this.mirroringShapeCharacters.setValue(10741,8725),this.mirroringShapeCharacters.setValue(10744,10745),this.mirroringShapeCharacters.setValue(10745,10744),this.mirroringShapeCharacters.setValue(10748,10749),this.mirroringShapeCharacters.setValue(10749,10748),this.mirroringShapeCharacters.setValue(10795,10796),this.mirroringShapeCharacters.setValue(10796,10795),this.mirroringShapeCharacters.setValue(10797,10796),this.mirroringShapeCharacters.setValue(10798,10797),this.mirroringShapeCharacters.setValue(10804,10805),this.mirroringShapeCharacters.setValue(10805,10804),this.mirroringShapeCharacters.setValue(10812,10813),this.mirroringShapeCharacters.setValue(10813,10812),this.mirroringShapeCharacters.setValue(10852,10853),this.mirroringShapeCharacters.setValue(10853,10852),this.mirroringShapeCharacters.setValue(10873,10874),this.mirroringShapeCharacters.setValue(10874,10873),this.mirroringShapeCharacters.setValue(10877,10878),this.mirroringShapeCharacters.setValue(10878,10877),this.mirroringShapeCharacters.setValue(10879,10880),this.mirroringShapeCharacters.setValue(10880,10879),this.mirroringShapeCharacters.setValue(10881,10882),this.mirroringShapeCharacters.setValue(10882,10881),this.mirroringShapeCharacters.setValue(10883,10884),this.mirroringShapeCharacters.setValue(10884,10883),this.mirroringShapeCharacters.setValue(10891,10892),this.mirroringShapeCharacters.setValue(10892,10891),this.mirroringShapeCharacters.setValue(10897,10898),this.mirroringShapeCharacters.setValue(10898,10897),this.mirroringShapeCharacters.setValue(10899,10900),this.mirroringShapeCharacters.setValue(10900,10899),this.mirroringShapeCharacters.setValue(10901,10902),this.mirroringShapeCharacters.setValue(10902,10901),this.mirroringShapeCharacters.setValue(10903,10904),this.mirroringShapeCharacters.setValue(10904,10903),this.mirroringShapeCharacters.setValue(10905,10906),this.mirroringShapeCharacters.setValue(10906,10905),this.mirroringShapeCharacters.setValue(10907,10908),this.mirroringShapeCharacters.setValue(10908,10907),this.mirroringShapeCharacters.setValue(10913,10914),this.mirroringShapeCharacters.setValue(10914,10913),this.mirroringShapeCharacters.setValue(10918,10919),this.mirroringShapeCharacters.setValue(10919,10918),this.mirroringShapeCharacters.setValue(10920,10921),this.mirroringShapeCharacters.setValue(10921,10920),this.mirroringShapeCharacters.setValue(10922,10923),this.mirroringShapeCharacters.setValue(10923,10922),this.mirroringShapeCharacters.setValue(10924,10925),this.mirroringShapeCharacters.setValue(10925,10924),this.mirroringShapeCharacters.setValue(10927,10928),this.mirroringShapeCharacters.setValue(10928,10927),this.mirroringShapeCharacters.setValue(10931,10932),this.mirroringShapeCharacters.setValue(10932,10931),this.mirroringShapeCharacters.setValue(10939,10940),this.mirroringShapeCharacters.setValue(10940,10939),this.mirroringShapeCharacters.setValue(10941,10942),this.mirroringShapeCharacters.setValue(10942,10941),this.mirroringShapeCharacters.setValue(10943,10944),this.mirroringShapeCharacters.setValue(10944,10943),this.mirroringShapeCharacters.setValue(10945,10946),this.mirroringShapeCharacters.setValue(10946,10945),this.mirroringShapeCharacters.setValue(10947,10948),this.mirroringShapeCharacters.setValue(10948,10947),this.mirroringShapeCharacters.setValue(10949,10950),this.mirroringShapeCharacters.setValue(10950,10949),this.mirroringShapeCharacters.setValue(10957,10958),this.mirroringShapeCharacters.setValue(10958,10957),this.mirroringShapeCharacters.setValue(10959,10960),this.mirroringShapeCharacters.setValue(10960,10959),this.mirroringShapeCharacters.setValue(10961,10962),this.mirroringShapeCharacters.setValue(10962,10961),this.mirroringShapeCharacters.setValue(10963,10964),this.mirroringShapeCharacters.setValue(10964,10963),this.mirroringShapeCharacters.setValue(10965,10966),this.mirroringShapeCharacters.setValue(10966,10965),this.mirroringShapeCharacters.setValue(10974,8870),this.mirroringShapeCharacters.setValue(10979,8873),this.mirroringShapeCharacters.setValue(10980,8872),this.mirroringShapeCharacters.setValue(10981,8875),this.mirroringShapeCharacters.setValue(10988,10989),this.mirroringShapeCharacters.setValue(10989,10988),this.mirroringShapeCharacters.setValue(10999,11e3),this.mirroringShapeCharacters.setValue(11e3,10999),this.mirroringShapeCharacters.setValue(11001,11002),this.mirroringShapeCharacters.setValue(11002,11001),this.mirroringShapeCharacters.setValue(12296,12297),this.mirroringShapeCharacters.setValue(12297,12296),this.mirroringShapeCharacters.setValue(12298,12299),this.mirroringShapeCharacters.setValue(12299,12298),this.mirroringShapeCharacters.setValue(12300,12301),this.mirroringShapeCharacters.setValue(12301,12300),this.mirroringShapeCharacters.setValue(12302,12303),this.mirroringShapeCharacters.setValue(12303,12302),this.mirroringShapeCharacters.setValue(12304,12305),this.mirroringShapeCharacters.setValue(12305,12304),this.mirroringShapeCharacters.setValue(12308,12309),this.mirroringShapeCharacters.setValue(12309,12308),this.mirroringShapeCharacters.setValue(12310,12311),this.mirroringShapeCharacters.setValue(12311,12310),this.mirroringShapeCharacters.setValue(12312,12313),this.mirroringShapeCharacters.setValue(12313,12312),this.mirroringShapeCharacters.setValue(12314,12315),this.mirroringShapeCharacters.setValue(12315,12314),this.mirroringShapeCharacters.setValue(65288,65289),this.mirroringShapeCharacters.setValue(65289,65288),this.mirroringShapeCharacters.setValue(65308,65310),this.mirroringShapeCharacters.setValue(65310,65308),this.mirroringShapeCharacters.setValue(65339,65341),this.mirroringShapeCharacters.setValue(65341,65339),this.mirroringShapeCharacters.setValue(65371,65373),this.mirroringShapeCharacters.setValue(65373,65371),this.mirroringShapeCharacters.setValue(65375,65376),this.mirroringShapeCharacters.setValue(65376,65375),this.mirroringShapeCharacters.setValue(65378,65379),this.mirroringShapeCharacters.setValue(65379,65378)},t}(),DO=function(){function t(){this.types=[],this.textOrder=-1,this.rtlCharacterTypes=new Array(65536),this.L=0,this.LRE=1,this.LRO=2,this.R=3,this.AL=4,this.RLE=5,this.RLO=6,this.PDF=7,this.EN=8,this.ES=9,this.ET=10,this.AN=11,this.CS=12,this.NSM=13,this.BN=14,this.B=15,this.S=16,this.WS=17,this.ON=18,this.charTypes=[this.L,this.EN,this.BN,this.ES,this.ES,this.S,this.ET,this.ET,this.B,this.AN,this.AN,this.S,this.CS,this.CS,this.WS,this.NSM,this.NSM,this.B,this.BN,27,this.BN,28,30,this.B,31,31,this.S,32,32,this.WS,33,34,this.ON,35,37,this.ET,38,42,this.ON,43,43,this.ET,44,44,this.CS,45,45,this.ET,46,46,this.CS,47,47,this.CS,48,57,this.EN,58,58,this.CS,59,64,this.ON,65,90,this.L,91,96,this.ON,97,122,this.L,123,126,this.ON,127,132,this.BN,133,133,this.B,134,159,this.BN,160,160,this.CS,161,161,this.ON,162,165,this.ET,166,169,this.ON,170,170,this.L,171,175,this.ON,176,177,this.ET,178,179,this.EN,180,180,this.ON,181,181,this.L,182,184,this.ON,185,185,this.EN,186,186,this.L,187,191,this.ON,192,214,this.L,215,215,this.ON,216,246,this.L,247,247,this.ON,248,696,this.L,697,698,this.ON,699,705,this.L,706,719,this.ON,720,721,this.L,722,735,this.ON,736,740,this.L,741,749,this.ON,750,750,this.L,751,767,this.ON,768,855,this.NSM,856,860,this.L,861,879,this.NSM,880,883,this.L,884,885,this.ON,886,893,this.L,894,894,this.ON,895,899,this.L,900,901,this.ON,902,902,this.L,903,903,this.ON,904,1013,this.L,1014,1014,this.ON,1015,1154,this.L,1155,1158,this.NSM,1159,1159,this.L,1160,1161,this.NSM,1162,1417,this.L,1418,1418,this.ON,1419,1424,this.L,1425,1441,this.NSM,1442,1442,this.L,1443,1465,this.NSM,1466,1466,this.L,1467,1469,this.NSM,1470,1470,this.R,1471,1471,this.NSM,1472,1472,this.R,1473,1474,this.NSM,1475,1475,this.R,1476,1476,this.NSM,1477,1487,this.L,1488,1514,this.R,1515,1519,this.L,1520,1524,this.R,1525,1535,this.L,1536,1539,this.AL,1540,1547,this.L,1548,1548,this.CS,1549,1549,this.AL,1550,1551,this.ON,1552,1557,this.NSM,1558,1562,this.L,1563,1563,this.AL,1564,1566,this.L,1567,1567,this.AL,1568,1568,this.L,1569,1594,this.AL,1595,1599,this.L,1600,1610,this.AL,1611,1624,this.NSM,1625,1631,this.L,1632,1641,this.AN,1642,1642,this.ET,1643,1644,this.AN,1645,1647,this.AL,1648,1648,this.NSM,1649,1749,this.AL,1750,1756,this.NSM,1757,1757,this.AL,1758,1764,this.NSM,1765,1766,this.AL,1767,1768,this.NSM,1769,1769,this.ON,1770,1773,this.NSM,1774,1775,this.AL,1776,1785,this.EN,1786,1805,this.AL,1806,1806,this.L,1807,1807,this.BN,1808,1808,this.AL,1809,1809,this.NSM,1810,1839,this.AL,1840,1866,this.NSM,1867,1868,this.L,1869,1871,this.AL,1872,1919,this.L,1920,1957,this.AL,1958,1968,this.NSM,1969,1969,this.AL,1970,2304,this.L,2305,2306,this.NSM,2307,2363,this.L,2364,2364,this.NSM,2365,2368,this.L,2369,2376,this.NSM,2377,2380,this.L,2381,2381,this.NSM,2382,2384,this.L,2385,2388,this.NSM,2389,2401,this.L,2402,2403,this.NSM,2404,2432,this.L,2433,2433,this.NSM,2434,2491,this.L,2492,2492,this.NSM,2493,2496,this.L,2497,2500,this.NSM,2501,2508,this.L,2509,2509,this.NSM,2510,2529,this.L,2530,2531,this.NSM,2532,2545,this.L,2546,2547,this.ET,2548,2560,this.L,2561,2562,this.NSM,2563,2619,this.L,2620,2620,this.NSM,2621,2624,this.L,2625,2626,this.NSM,2627,2630,this.L,2631,2632,this.NSM,2633,2634,this.L,2635,2637,this.NSM,2638,2671,this.L,2672,2673,this.NSM,2674,2688,this.L,2689,2690,this.NSM,2691,2747,this.L,2748,2748,this.NSM,2749,2752,this.L,2753,2757,this.NSM,2758,2758,this.L,2759,2760,this.NSM,2761,2764,this.L,2765,2765,this.NSM,2766,2785,this.L,2786,2787,this.NSM,2788,2800,this.L,2801,2801,this.ET,2802,2816,this.L,2817,2817,this.NSM,2818,2875,this.L,2876,2876,this.NSM,2877,2878,this.L,2879,2879,this.NSM,2880,2880,this.L,2881,2883,this.NSM,2884,2892,this.L,2893,2893,this.NSM,2894,2901,this.L,2902,2902,this.NSM,2903,2945,this.L,2946,2946,this.NSM,2947,3007,this.L,3008,3008,this.NSM,3009,3020,this.L,3021,3021,this.NSM,3022,3058,this.L,3059,3064,this.ON,3065,3065,this.ET,3066,3066,this.ON,3067,3133,this.L,3134,3136,this.NSM,3137,3141,this.L,3142,3144,this.NSM,3145,3145,this.L,3146,3149,this.NSM,3150,3156,this.L,3157,3158,this.NSM,3159,3259,this.L,3260,3260,this.NSM,3261,3275,this.L,3276,3277,this.NSM,3278,3392,this.L,3393,3395,this.NSM,3396,3404,this.L,3405,3405,this.NSM,3406,3529,this.L,3530,3530,this.NSM,3531,3537,this.L,3538,3540,this.NSM,3541,3541,this.L,3542,3542,this.NSM,3543,3632,this.L,3633,3633,this.NSM,3634,3635,this.L,3636,3642,this.NSM,3643,3646,this.L,3647,3647,this.ET,3648,3654,this.L,3655,3662,this.NSM,3663,3760,this.L,3761,3761,this.NSM,3762,3763,this.L,3764,3769,this.NSM,3770,3770,this.L,3771,3772,this.NSM,3773,3783,this.L,3784,3789,this.NSM,3790,3863,this.L,3864,3865,this.NSM,3866,3892,this.L,3893,3893,this.NSM,3894,3894,this.L,3895,3895,this.NSM,3896,3896,this.L,3897,3897,this.NSM,3898,3901,this.ON,3902,3952,this.L,3953,3966,this.NSM,3967,3967,this.L,3968,3972,this.NSM,3973,3973,this.L,3974,3975,this.NSM,3976,3983,this.L,3984,3991,this.NSM,3992,3992,this.L,3993,4028,this.NSM,4029,4037,this.L,4038,4038,this.NSM,4039,4140,this.L,4141,4144,this.NSM,4145,4145,this.L,4146,4146,this.NSM,4147,4149,this.L,4150,4151,this.NSM,4152,4152,this.L,4153,4153,this.NSM,4154,4183,this.L,4184,4185,this.NSM,4186,5759,this.L,5760,5760,this.WS,5761,5786,this.L,5787,5788,this.ON,5789,5905,this.L,5906,5908,this.NSM,5909,5937,this.L,5938,5940,this.NSM,5941,5969,this.L,5970,5971,this.NSM,5972,6001,this.L,6002,6003,this.NSM,6004,6070,this.L,6071,6077,this.NSM,6078,6085,this.L,6086,6086,this.NSM,6087,6088,this.L,6089,6099,this.NSM,6100,6106,this.L,6107,6107,this.ET,6108,6108,this.L,6109,6109,this.NSM,6110,6127,this.L,6128,6137,this.ON,6138,6143,this.L,6144,6154,this.ON,6155,6157,this.NSM,6158,6158,this.WS,6159,6312,this.L,6313,6313,this.NSM,6314,6431,this.L,6432,6434,this.NSM,6435,6438,this.L,6439,6443,this.NSM,6444,6449,this.L,6450,6450,this.NSM,6451,6456,this.L,6457,6459,this.NSM,6460,6463,this.L,6464,6464,this.ON,6465,6467,this.L,6468,6469,this.ON,6470,6623,this.L,6624,6655,this.ON,6656,8124,this.L,8125,8125,this.ON,8126,8126,this.L,8127,8129,this.ON,8130,8140,this.L,8141,8143,this.ON,8144,8156,this.L,8157,8159,this.ON,8160,8172,this.L,8173,8175,this.ON,8176,8188,this.L,8189,8190,this.ON,8191,8191,this.L,8192,8202,this.WS,8203,8205,this.BN,8206,8206,this.L,8207,8207,this.R,8208,8231,this.ON,8232,8232,this.WS,8233,8233,this.B,8234,8234,this.LRE,8235,8235,this.RLE,8236,8236,this.PDF,8237,8237,this.LRO,8238,8238,this.RLO,8239,8239,this.WS,8240,8244,this.ET,8245,8276,this.ON,8277,8278,this.L,8279,8279,this.ON,8280,8286,this.L,8287,8287,this.WS,8288,8291,this.BN,8292,8297,this.L,8298,8303,this.BN,8304,8304,this.EN,8305,8307,this.L,8308,8313,this.EN,8314,8315,this.ET,8316,8318,this.ON,8319,8319,this.L,8320,8329,this.EN,8330,8331,this.ET,8332,8334,this.ON,8335,8351,this.L,8352,8369,this.ET,8370,8399,this.L,8400,8426,this.NSM,8427,8447,this.L,8448,8449,this.ON,8450,8450,this.L,8451,8454,this.ON,8455,8455,this.L,8456,8457,this.ON,8458,8467,this.L,8468,8468,this.ON,8469,8469,this.L,8470,8472,this.ON,8473,8477,this.L,8478,8483,this.ON,8484,8484,this.L,8485,8485,this.ON,8486,8486,this.L,8487,8487,this.ON,8488,8488,this.L,8489,8489,this.ON,8490,8493,this.L,8494,8494,this.ET,8495,8497,this.L,8498,8498,this.ON,8499,8505,this.L,8506,8507,this.ON,8508,8511,this.L,8512,8516,this.ON,8517,8521,this.L,8522,8523,this.ON,8524,8530,this.L,8531,8543,this.ON,8544,8591,this.L,8592,8721,this.ON,8722,8723,this.ET,8724,9013,this.ON,9014,9082,this.L,9083,9108,this.ON,9109,9109,this.L,9110,9168,this.ON,9169,9215,this.L,9216,9254,this.ON,9255,9279,this.L,9280,9290,this.ON,9291,9311,this.L,9312,9371,this.EN,9372,9449,this.L,9450,9450,this.EN,9451,9751,this.ON,9752,9752,this.L,9753,9853,this.ON,9854,9855,this.L,9856,9873,this.ON,9874,9887,this.L,9888,9889,this.ON,9890,9984,this.L,9985,9988,this.ON,9989,9989,this.L,9990,9993,this.ON,9994,9995,this.L,9996,10023,this.ON,10024,10024,this.L,10025,10059,this.ON,10060,10060,this.L,10061,10061,this.ON,10062,10062,this.L,10063,10066,this.ON,10067,10069,this.L,10070,10070,this.ON,10071,10071,this.L,10072,10078,this.ON,10079,10080,this.L,10081,10132,this.ON,10133,10135,this.L,10136,10159,this.ON,10160,10160,this.L,10161,10174,this.ON,10175,10191,this.L,10192,10219,this.ON,10220,10223,this.L,10224,11021,this.ON,11022,11903,this.L,11904,11929,this.ON,11930,11930,this.L,11931,12019,this.ON,12020,12031,this.L,12032,12245,this.ON,12246,12271,this.L,12272,12283,this.ON,12284,12287,this.L,12288,12288,this.WS,12289,12292,this.ON,12293,12295,this.L,12296,12320,this.ON,12321,12329,this.L,12330,12335,this.NSM,12336,12336,this.ON,12337,12341,this.L,12342,12343,this.ON,12344,12348,this.L,12349,12351,this.ON,12352,12440,this.L,12441,12442,this.NSM,12443,12444,this.ON,12445,12447,this.L,12448,12448,this.ON,12449,12538,this.L,12539,12539,this.ON,12540,12828,this.L,12829,12830,this.ON,12831,12879,this.L,12880,12895,this.ON,12896,12923,this.L,12924,12925,this.ON,12926,12976,this.L,12977,12991,this.ON,12992,13003,this.L,13004,13007,this.ON,13008,13174,this.L,13175,13178,this.ON,13179,13277,this.L,13278,13279,this.ON,13280,13310,this.L,13311,13311,this.ON,13312,19903,this.L,19904,19967,this.ON,19968,42127,this.L,42128,42182,this.ON,42183,64284,this.L,64285,64285,this.R,64286,64286,this.NSM,64287,64296,this.R,64297,64297,this.ET,64298,64310,this.R,64311,64311,this.L,64312,64316,this.R,64317,64317,this.L,64318,64318,this.R,64319,64319,this.L,64320,64321,this.R,64322,64322,this.L,64323,64324,this.R,64325,64325,this.L,64326,64335,this.R,64336,64433,this.AL,64434,64466,this.L,64467,64829,this.AL,64830,64831,this.ON,64832,64847,this.L,64848,64911,this.AL,64912,64913,this.L,64914,64967,this.AL,64968,65007,this.L,65008,65020,this.AL,65021,65021,this.ON,65022,65023,this.L,65024,65039,this.NSM,65040,65055,this.L,65056,65059,this.NSM,65060,65071,this.L,65072,65103,this.ON,65104,65104,this.CS,65105,65105,this.ON,65106,65106,this.CS,65107,65107,this.L,65108,65108,this.ON,65109,65109,this.CS,65110,65118,this.ON,65119,65119,this.ET,65120,65121,this.ON,65122,65123,this.ET,65124,65126,this.ON,65127,65127,this.L,65128,65128,this.ON,65129,65130,this.ET,65131,65131,this.ON,65132,65135,this.L,65136,65140,this.AL,65141,65141,this.L,65142,65276,this.AL,65277,65278,this.L,65279,65279,this.BN,65280,65280,this.L,65281,65282,this.ON,65283,65285,this.ET,65286,65290,this.ON,65291,65291,this.ET,65292,65292,this.CS,65293,65293,this.ET,65294,65294,this.CS,65295,65295,this.ES,65296,65305,this.EN,65306,65306,this.CS,65307,65312,this.ON,65313,65338,this.L,65339,65344,this.ON,65345,65370,this.L,65371,65381,this.ON,65382,65503,this.L,65504,65505,this.ET,65506,65508,this.ON,65509,65510,this.ET,65511,65511,this.L,65512,65518,this.ON,65519,65528,this.L,65529,65531,this.BN,65532,65533,this.ON,65534,65535,this.L];for(var t=0;t<this.charTypes.length;++t)for(var e=this.charTypes[t],i=this.charTypes[++t],n=this.charTypes[++t];e<=i;)this.rtlCharacterTypes[e++]=n}return t.prototype.getVisualOrder=function(t,e){this.types=this.getCharacterCode(t),this.textOrder=e?this.LRE:this.L,this.doVisualOrder();for(var i=[],n=0;n<this.levels.length;n++)i[n]=this.levels[n];return i},t.prototype.getCharacterCode=function(t){for(var e=[],i=0;i<t.length;i++)e[i]=this.rtlCharacterTypes[t[i].charCodeAt(0)];return e},t.prototype.setDefaultLevels=function(){for(var t=0;t<this.length;t++)this.levels[t]=this.textOrder},t.prototype.setLevels=function(){this.setDefaultLevels();for(var t=0;t<this.length;++t){var e=this.levels[t];0!=(128&e)&&(e&=127,this.result[t]=0==(1&e)?this.L:this.R),this.levels[t]=e}},t.prototype.updateLevels=function(t,e,i){if(0==(1&e))for(var n=t;n<i;++n)this.result[n]===this.R?this.levels[n]+=1:this.result[n]!==this.L&&(this.levels[n]+=2);else for(n=t;n<i;++n)this.result[n]!==this.R&&(this.levels[n]+=1)},t.prototype.doVisualOrder=function(){this.length=this.types.length,this.result=this.types,this.levels=[],this.setLevels(),this.length=this.getEmbeddedCharactersLength();for(var t=this.textOrder,e=0;e<this.length;){for(var i=this.levels[e],n=0==(1&Math.max(t,i))?this.L:this.R,r=e+1;r<this.length&&this.levels[r]===i;)++r;var o=r<this.length?this.levels[r]:this.textOrder,s=0==(1&Math.max(o,i))?this.L:this.R;this.checkNSM(e,r,i,n,s),this.updateLevels(e,i,r),t=i,e=r}this.checkEmbeddedCharacters(this.length)},t.prototype.getEmbeddedCharactersLength=function(){for(var t=0,e=0;e<this.length;++e)this.types[e]!==this.LRE&&this.types[e]!==this.RLE&&this.types[e]!==this.LRO&&this.types[e]!==this.RLO&&this.types[e]!==this.PDF&&this.types[e]!==this.BN&&(this.result[t]=this.result[e],this.levels[t]=this.levels[e],t++);return t},t.prototype.checkEmbeddedCharacters=function(t){for(var e=this.types.length-1;e>=0;--e)this.types[e]===this.LRE||this.types[e]===this.RLE||this.types[e]===this.LRO||this.types[e]===this.RLO||this.types[e]===this.PDF||this.types[e]===this.BN?(this.result[e]=this.types[e],this.levels[e]=-1):(t-=1,this.result[e]=this.result[t],this.levels[e]=this.levels[t]);for(e=0;e<this.types.length;e++)-1===this.levels[e]&&(this.levels[e]=0===e?this.textOrder:this.levels[e-1])},t.prototype.checkNSM=function(t,e,i,n,r){for(var o=n,s=t;s<e;++s)this.result[s]===this.NSM?this.result[s]=o:o=this.result[s];this.checkEuropeanDigits(t,e,i,n,r)},t.prototype.checkEuropeanDigits=function(t,e,i,n,r){for(var o=t;o<e;++o)if(this.result[o]===this.EN)for(var s=o-1;s>=t;--s)if(this.result[s]===this.L||this.result[s]===this.R||this.result[s]===this.AL){this.result[s]===this.AL&&(this.result[o]=this.AN);break}this.checkArabicCharacters(t,e,i,n,r)},t.prototype.checkArabicCharacters=function(t,e,i,n,r){for(var o=t;o<e;++o)this.result[o]===this.AL&&(this.result[o]=this.R);this.checkEuropeanNumberSeparator(t,e,i,n,r)},t.prototype.checkEuropeanNumberSeparator=function(t,e,i,n,r){for(var o=t+1;o<e-1;++o)if(this.result[o]===this.ES||this.result[o]===this.CS){var s=this.result[o-1],a=this.result[o+1];s===this.EN&&a===this.EN?this.result[o]=this.EN:this.result[o]===this.CS&&s===this.AN&&a===this.AN&&(this.result[o]=this.AN)}this.checkEuropeanNumberTerminator(t,e,i,n,r)},t.prototype.checkEuropeanNumberTerminator=function(t,e,i,n,r){for(var o=t;o<e;++o)if(this.result[o]===this.ET){var s=o,a=[];a.push(this.ET);var l=this.getLength(s,e,a),h=s===t?n:this.result[s-1];if(h!==this.EN&&(h=l===e?r:this.result[l]),h===this.EN)for(var c=s;c<l;++c)this.result[c]=this.EN;o=l}this.checkOtherNeutrals(t,e,i,n,r)},t.prototype.checkOtherNeutrals=function(t,e,i,n,r){for(var o=t;o<e;++o)this.result[o]!==this.ES&&this.result[o]!==this.ET&&this.result[o]!==this.CS||(this.result[o]=this.ON);this.checkOtherCharacters(t,e,i,n,r)},t.prototype.checkOtherCharacters=function(t,e,i,n,r){for(var o=t;o<e;++o)if(this.result[o]===this.EN){for(var s=n,a=o-1;a>=t;--a)if(this.result[a]===this.L||this.result[a]===this.R){s=this.result[a];break}s===this.L&&(this.result[o]=this.L)}this.checkCommanCharacters(t,e,i,n,r)},t.prototype.getLength=function(t,e,i){for(--t;++t<e;){for(var n=this.result[t],r=0;r<i.length;++r)n===i[r]&&(t=this.getLength(++t,e,i));return t}return e},t.prototype.checkCommanCharacters=function(t,e,i,n,r){for(var o=t;o<e;++o)if(this.result[o]===this.WS||this.result[o]===this.ON||this.result[o]===this.B||this.result[o]===this.S){var s=o,a=[this.B,this.S,this.WS,this.ON],l=this.getLength(s,e,a),h=0,c=0,d=0;s===t?h=n:(h=this.result[s-1])===this.AN?h=this.R:h===this.EN&&(h=this.R),l===e?c=r:(c=this.result[l])===this.AN?c=this.R:c===this.EN&&(c=this.R),d=h===c?h:0==(1&i)?this.L:this.R;for(var p=s;p<l;++p)this.result[p]=d;o=l}},t}(),RO=function(){function t(){this.openBracket="(",this.closeBracket=")"}return t.prototype.layout=function(t,e,i,n,r){if(null==t)throw new Error("ArgumentNullException : line");if(null==e)throw new Error("ArgumentNullException : font");var o=[];return e.Unicode?o=this.customLayout(t,i,r,e,n):(o=[])[0]=t,o},t.prototype.splitLayout=function(t,e,i,n,r){if(null==t)throw new Error("ArgumentNullException : line");if(null==e)throw new Error("ArgumentNullException : font");return this.customSplitLayout(t,e,i,n,r)},t.prototype.getGlyphIndex=function(t,e,i,n,r){if(null==t)throw new Error("ArgumentNullException : line");if(null==e)throw new Error("ArgumentNullException : font");if(n=null,0===t.length)return{success:!1,glyphs:n};var o=(new BO).shape(t,0),s=e.fontInternal.ttfReader;n=new Uint16Array(o.length);for(var a=0,l=0,h=o.length;l<h;l++){var c=o[l],d=s.getGlyph(c);null!=d&&(n[a++]=d.index)}return{success:!0,glyphs:n}},t.prototype.customLayout=function(t,e,i,n,r){if(null==r){if(null==t)throw new Error("ArgumentNullException : line");var o=null;if(null!==i&&i.textDirection!==NC.None)o=(new MO).getLogicalToVisualString(t,e);return o}if(null==t)throw new Error("ArgumentNullException : line");if(null==n)throw new Error("ArgumentNullException : font");var s=null;if(null!==i&&i.textDirection!==NC.None){var a=(new BO).shape(t,0);s=this.customLayout(a,e,i)}o=[];if(r){for(var l=s.split(""),h=l.length,c=0;c<h;c++)l[c]=this.addChars(n,l[c]);o=l}else(o=[])[0]=this.addChars(n,s);return o},t.prototype.addChars=function(t,e){var i=e;if(null==t)throw new Error("ArgumentNullException : font");if(null==i)throw new Error("ArgumentNullException : line");var n=i,r=t.fontInternal.ttfReader;t.setSymbols(n),n=r.convertString(n);var o=HC.toUnicodeArray(n,!1);return n=HC.byteToString(o)},t.prototype.customSplitLayout=function(t,e,i,n,r){if(null==t)throw new Error("ArgumentNullException : line");if(null==e)throw new Error("ArgumentNullException : font");return this.customLayout(t,i,r).split("")},t}();!function(t){t[t.Paginate=0]="Paginate",t[t.OnePage=1]="OnePage"}($P||($P={})),function(t){t[t.FitPage=0]="FitPage",t[t.FitElement=1]="FitElement",t[t.FitColumnsToPage=2]="FitColumnsToPage"}(tO||(tO={})),function(t){t[t.Start=0]="Start",t[t.Line=1]="Line",t[t.Bezier3=3]="Bezier3",t[t.Bezier=3]="Bezier",t[t.PathTypeMask=7]="PathTypeMask",t[t.DashMode=16]="DashMode",t[t.PathMarker=32]="PathMarker",t[t.CloseSubpath=128]="CloseSubpath"}(eO||(eO={}));var zO,jO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),NO=function(t){function e(e){var i=t.call(this)||this;return i.mbackground=new rP(255,255,255),i.mbStroking=!1,i.mfunction=null,i.dictionaryProperties=new Xx,i.mpatternDictionary=new Yx,i.mpatternDictionary.items.setValue(i.dictionaryProperties.type,new Gx(i.dictionaryProperties.pattern)),i.mpatternDictionary.items.setValue(i.dictionaryProperties.patternType,new eC(2)),i.shading=e,i.colorSpace=DC.Rgb,i}return jO(e,t),Object.defineProperty(e.prototype,"background",{get:function(){return this.mbackground},set:function(t){this.mbackground=t;var e=this.shading;t.isEmpty?e.remove(this.dictionaryProperties.background):e.items.setValue(this.dictionaryProperties.background,t.toArray(this.colorSpace))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAlias",{get:function(){return this.shading.items.getValue(this.dictionaryProperties.antiAlias).value},set:function(t){var e=this.shading,i=e.items.getValue(this.dictionaryProperties.antiAlias);null==i&&void 0===i?(i=new QP(t),e.items.setValue(this.dictionaryProperties.antiAlias,i)):i.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"function",{get:function(){return this.mfunction},set:function(t){this.mfunction=t,null!=t&&void 0!==t?this.shading.items.setValue(this.dictionaryProperties.function,new VC(this.mfunction)):this.shading.remove(this.dictionaryProperties.function)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bBox",{get:function(){return this.shading.items.getValue(this.dictionaryProperties.bBox)},set:function(t){var e=this.shading;null==t&&void 0===t?e.remove(this.dictionaryProperties.bBox):e.items.setValue(this.dictionaryProperties.bBox,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorSpace",{get:function(){return this.mcolorSpace},set:function(t){var e=this.shading.items.getValue(this.dictionaryProperties.colorSpace);if(t!==this.mcolorSpace||null==e){this.mcolorSpace=t;var i=this.colorSpaceToDeviceName(t);this.shading.items.setValue(this.dictionaryProperties.colorSpace,new Gx(i))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroking",{get:function(){return this.mbStroking},set:function(t){this.mbStroking=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"patternDictionary",{get:function(){return null==this.mpatternDictionary&&(this.mpatternDictionary=new Yx),this.mpatternDictionary},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shading",{get:function(){return this.mshading},set:function(t){if(null==t)throw new Error("ArgumentNullException : Shading");t!==this.mshading&&(this.mshading=t,this.patternDictionary.items.setValue(this.dictionaryProperties.shading,new VC(this.mshading)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"matrix",{get:function(){return this.mmatrix},set:function(t){if(null==t)throw new Error("ArgumentNullException : Matrix");if(t!==this.mmatrix){this.mmatrix=t.clone();var e=new iC(this.mmatrix.matrix.elements);this.mpatternDictionary.items.setValue(this.dictionaryProperties.matrix,e)}},enumerable:!0,configurable:!0}),e.prototype.monitorChanges=function(t,i,n,r,o){var s=!1;if(t instanceof e){this.colorSpace!==o&&(this.colorSpace=o,this.resetFunction()),i.setColorSpace("Pattern",this.mbStroking);var a=n.getResources().getName(this);i.setColourWithPattern(null,a,this.mbStroking),s=!0}return s},e.prototype.resetChanges=function(t){},e.prototype.colorSpaceToDeviceName=function(t){var e;switch(t){case DC.Rgb:e="DeviceRGB"}return e},e.prototype.resetPatternDictionary=function(t){this.mpatternDictionary=t},e.prototype.cloneAntiAliasingValue=function(t){if(null==t)throw new Error("ArgumentNullException : brush");var e=this.shading.items.getValue(this.dictionaryProperties.antiAlias);null!=e&&t.shading.items.setValue(this.dictionaryProperties.antiAlias,new QP(e.value))},e.prototype.cloneBackgroundValue=function(t){var e=this.background;e.isEmpty||(t.background=e)},Object.defineProperty(e.prototype,"element",{get:function(){return this.patternDictionary},enumerable:!0,configurable:!0}),e}(hP),HO=function(){function t(t,e){if(this.dictionaryProperties=new Xx,this.writeTransformation=!0,void 0===t);else if(t instanceof sP&&void 0===e){this.content=new CC;var i=new sP(t.width,t.height);this.setSize(i),this.initialize()}else this.content=new CC,this.setSize(new sP(t,e)),this.initialize()}return Object.defineProperty(t.prototype,"size",{get:function(){return this.templateSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.size.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"graphics",{get:function(){if(null==this.pdfGraphics||void 0===this.pdfGraphics){var t=new qO(this),e=new GO(this.size,t,this.content);this.pdfGraphics=e,this.pdfGraphics.initializeCoordinates()}return this.pdfGraphics},enumerable:!0,configurable:!0}),t.prototype.getResources=function(){return null==this.resources&&(this.resources=new VO,this.content.items.setValue(this.dictionaryProperties.resources,this.resources)),this.resources},t.prototype.initialize=function(){this.addType(),this.addSubType()},t.prototype.addType=function(){var t=new Gx(this.dictionaryProperties.xObject);this.content.items.setValue(this.dictionaryProperties.type,t)},t.prototype.addSubType=function(){var t=new Gx(this.dictionaryProperties.form);this.content.items.setValue(this.dictionaryProperties.subtype,t)},t.prototype.reset=function(t){void 0===t?(null!=this.resources&&(this.resources=null,this.content.remove(this.dictionaryProperties.resources)),null!=this.graphics&&this.graphics.reset(this.size)):(this.setSize(t),this.reset())},t.prototype.setSize=function(t){var e=new aP(new oP(0,0),t),i=iC.fromRectangle(e);this.content.items.setValue(this.dictionaryProperties.bBox,i),this.templateSize=t},Object.defineProperty(t.prototype,"element",{get:function(){return this.content},enumerable:!0,configurable:!0}),t}(),_O=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),VO=function(t){function e(e){var i=t.call(this,e)||this;return i.properties=new Yx,i}return _O(e,t),Object.defineProperty(e.prototype,"names",{get:function(){return this.getNames()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"document",{get:function(){return this.pdfDocument},set:function(t){this.pdfDocument=t},enumerable:!0,configurable:!0}),e.prototype.getName=function(t){var e=t.element,i=null;if(this.names.containsKey(e)&&(i=this.names.getValue(e)),null==i){var n=this.generateName();i=new Gx(n),this.names.setValue(e,i),t instanceof bP?this.add(t,i):t instanceof HO?this.add(t,i):t instanceof NO||t instanceof UO?this.add(t,i):t instanceof GP?this.add(t,i):(t instanceof rO||t instanceof sO)&&this.add(t,i)}return i},e.prototype.getNames=function(){null==this.pdfNames&&(this.pdfNames=new UP);var t=this.items.getValue(this.dictionaryProperties.font);if(null!=t){MP.dereference(t)}return this.pdfNames},e.prototype.requireProcedureSet=function(t){if(null==t)throw new Error("ArgumentNullException:procedureSetName");var e=this.items.getValue(this.dictionaryProperties.procset);null==e&&(e=new iC,this.items.setValue(this.dictionaryProperties.procset,e));var i=new Gx(t);e.contains(i)||e.add(i)},e.prototype.removeFont=function(t){for(var e=null,i=this.pdfNames.keys(),n=0;n<this.pdfNames.size();n++)if(this.pdfNames.getValue(i[n])===new Gx(t)){e=i[n];break}null!=e&&this.pdfNames.remove(e)},e.prototype.generateName=function(){return FO.getNewGuidString()},e.prototype.add=function(t,e){if(t instanceof bP){var i=null,n=this.items.getValue(this.dictionaryProperties.font);if(null!=n){var r=n;i=n,i=n}else i=new Yx,this.items.setValue(this.dictionaryProperties.font,i);i.items.setValue(e.value,new VC(t.element))}else if(t instanceof HO){var o=void 0;null==(o=this.items.getValue(this.dictionaryProperties.xObject))&&(o=new Yx,this.items.setValue(this.dictionaryProperties.xObject,o)),o.items.setValue(e.value,new VC(t.element))}else if(t instanceof hP){if(t instanceof NO||t instanceof UO)if(null!=(a=t.element)){var s=this.items.getValue(this.dictionaryProperties.pattern);null==s&&(s=new Yx,this.items.setValue(this.dictionaryProperties.pattern,s)),s.items.setValue(e.value,new VC(a))}}else if(t instanceof GP){var a=t.element,l=null;null==(l=this.items.getValue(this.dictionaryProperties.extGState))&&(l=new Yx,this.items.setValue(this.dictionaryProperties.extGState,l)),l.items.setValue(e.value,new VC(a))}else{o=this.Dictionary.items.getValue(this.dictionaryProperties.xObject);var h=void 0;void 0!==this.pdfDocument&&(h=this.pdfDocument.sections.element.items.getValue(this.dictionaryProperties.resources).items.getValue(this.dictionaryProperties.xObject));this.Dictionary.items.values();var c=!1,d=void 0;if(void 0===this.pdfDocument||void 0!==typeof h&&null!=h){if(void 0!==this.pdfDocument)for(var p=h.items.values(),u=0;u<p.length;u++)void 0!==p[u]&&void 0!==p[u].element&&p[u].element.data[0]===t.element.data[0]&&(d=p[u],c=!0)}else h=new Yx,this.pdfDocument.sections.element.items.getValue(this.dictionaryProperties.resources).items.setValue(this.dictionaryProperties.xObject,h);if(null==o&&(o=new Yx,this.Dictionary.items.setValue(this.dictionaryProperties.xObject,o)),c&&void 0!==d)o.items.setValue(e.value,d);else{r=new VC(t.element);o.items.setValue(e.value,r),void 0!==this.pdfDocument&&h.items.setValue(e.value,r)}}},e}(Yx),FO=function(){function t(){}return t.getNewGuidString=function(){return"aaaaaaaa-aaaa-4aaa-baaa-aaaaaaaaaaaa".replace(/[ab]/g,function(t){var e=16*Math.random()|0;return("a"===t?e:3&e|8).toString(16)})},t}(),WO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),UO=function(t){function e(e,i){var n=t.call(this)||this;n.mStroking=!1,n.mLocation=new oP(0,0),n.mDictionaryProperties=new Xx;var r=null;return e instanceof lP?r=e:e instanceof sP&&(r=new lP(0,0,e.width,e.height)),null!==i&&i instanceof iE&&(n.mPage=i),n.brushStream=new CC,n.mResources=new VO,n.brushStream.items.setValue(n.mDictionaryProperties.resources,n.mResources),n.setBox(r),n.setObligatoryFields(),null!==i&&i instanceof iE&&(n.mPage=i,n.graphics.colorSpace=i.document.colorSpace),n}return WO(e,t),e.prototype.initialize=function(t,e,i,n){this.mPage=e,this.mLocation=i,this.mTransformationMatrix=n,this.tempBrushStream=this.brushStream,this.brushStream=new CC;var r=new VO;return this.brushStream.items.setValue(this.mDictionaryProperties.resources,r),this.setBox(t),this.setObligatoryFields(),this},Object.defineProperty(e.prototype,"location",{get:function(){return this.mLocation},set:function(t){this.mLocation=t},enumerable:!0,configurable:!0}),e.prototype.setObligatoryFields=function(){if(this.brushStream.items.setValue(this.mDictionaryProperties.patternType,new eC(1)),this.brushStream.items.setValue(this.mDictionaryProperties.paintType,new eC(1)),this.brushStream.items.setValue(this.mDictionaryProperties.tilingType,new eC(1)),this.brushStream.items.setValue(this.mDictionaryProperties.xStep,new eC(this.mBox.right-this.mBox.left)),this.brushStream.items.setValue(this.mDictionaryProperties.yStep,new eC(this.mBox.bottom-this.mBox.top)),null!=this.mPage&&null!=this.mLocation)if(null==this.mTransformationMatrix&&void 0===this.mTransformationMatrix){var t=this.mPage.size.height%this.rectangle.size.height-this.mLocation.y;this.brushStream.items.setValue(this.mDictionaryProperties.matrix,new iC([1,0,0,1,this.mLocation.x,t]))}else{t=0;var e=this.mTransformationMatrix.matrix.elements;t=this.mPage.size.height>this.rectangle.size.height?this.mTransformationMatrix.matrix.offsetY-this.mPage.size.height%this.rectangle.size.height:this.mPage.size.height%this.rectangle.size.height+this.mTransformationMatrix.matrix.offsetY,this.brushStream.items.setValue(this.mDictionaryProperties.matrix,new iC([e[0],e[1],e[2],e[3],e[4],t]))}},e.prototype.setBox=function(t){this.mBox=t;var e=new aP(this.mBox.left,this.mBox.top,this.mBox.right,this.mBox.bottom);this.brushStream.items.setValue(this.mDictionaryProperties.bBox,iC.fromRectangle(e))},Object.defineProperty(e.prototype,"rectangle",{get:function(){return this.mBox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.mBox.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"graphics",{get:function(){if(null==this.mGraphics&&void 0===this.mGraphics){var t=new qO(this),e=new GO(this.size,t,this.brushStream);this.mGraphics=e,this.mResources=this.getResources(),this.mGraphics.initializeCoordinates()}return this.mGraphics},enumerable:!0,configurable:!0}),e.prototype.getResources=function(){return this.mResources},Object.defineProperty(e.prototype,"stroking",{get:function(){return this.mStroking},set:function(t){this.mStroking=t},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var t=this.initialize(this.rectangle,this.mPage,this.location,this.mTransformationMatrix);return null!=this.mTransformationMatrix&&null!=this.mTransformationMatrix.matrix&&t.brushStream.items.setValue(this.mDictionaryProperties.matrix,new iC(this.mTransformationMatrix.matrix.elements)),t.brushStream.data=this.tempBrushStream.data,t.mResources=new VO(this.mResources),t.brushStream.items.setValue(this.mDictionaryProperties.resources,t.mResources),t},e.prototype.monitorChanges=function(t,i,n,r,o){var s=!1;if(t!==this){i.setColorSpace("Pattern",this.mStroking);var a=n.getResources().getName(this);i.setColourWithPattern(null,a,this.mStroking),s=!0}else if(t instanceof e){i.setColorSpace("Pattern",this.mStroking);var l=n.getResources().getName(this);i.setColourWithPattern(null,l,this.mStroking),s=!0}return s},e.prototype.resetChanges=function(t){},Object.defineProperty(e.prototype,"element",{get:function(){return this.brushStream},enumerable:!0,configurable:!0}),e}(hP),GO=function(){function t(t,e,i){this.currentColorSpace=DC.Rgb,this.previousTextRenderingMode=TC.Fill,this.previousCharacterSpacing=0,this.previousWordSpacing=0,this.previousTextScaling=100,this.procedureSets=new WP,this.isNormalRender=!0,this.isUseFontSize=!1,this.isItalic=!1,this.isEmfTextScaled=!1,this.isEmf=!1,this.isEmfPlus=!1,this.isBaselineFormat=!0,this.emfScalingFactor=new sP(0,0),this.colorSpaceChanged=!1,this.dictionaryProperties=new Xx,this.isOverloadWithPosition=!1,this.isPointOverload=!1,this.currentColorSpaces=["RGB","CMYK","GrayScale","Indexed"],this.isImageOptimized=!1,this.graphicsState=[],this.istransparencySet=!1,this.internalAutomaticFields=null,this.startCutIndex=-1,this.getResources=e,this.canvasSize=t,this.pdfStreamWriter=i instanceof HP?i:new HP(i),this.initialize()}return Object.defineProperty(t.prototype,"stringLayoutResult",{get:function(){return this.pdfStringLayoutResult},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.canvasSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mediaBoxUpperRightBound",{get:function(){return void 0===this.internalMediaBoxUpperRightBound&&(this.internalMediaBoxUpperRightBound=0),this.internalMediaBoxUpperRightBound},set:function(t){this.internalMediaBoxUpperRightBound=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientSize",{get:function(){return new sP(this.clipBounds.width,this.clipBounds.height)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorSpace",{get:function(){return this.currentColorSpace},set:function(t){this.currentColorSpace=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"streamWriter",{get:function(){return this.pdfStreamWriter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"matrix",{get:function(){return null==this.transformationMatrix&&(this.transformationMatrix=new VP),this.transformationMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layer",{get:function(){return this.pageLayer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"page",{get:function(){return this.pageLayer.page},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"automaticFields",{get:function(){return null!=this.internalAutomaticFields&&void 0!==this.internalAutomaticFields||(this.internalAutomaticFields=new qP),this.internalAutomaticFields},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this.bStateSaved=!1,this.currentPen=null,this.currentBrush=null,this.currentFont=null,this.currentColorSpace=DC.Rgb,this.bCSInitialized=!1,this.transformationMatrix=null,this.previousTextRenderingMode=-1,this.previousCharacterSpacing=-1,this.previousWordSpacing=-1,this.previousTextScaling=-100,this.currentStringFormat=null,this.clipBounds=new aP(new oP(0,0),this.size),this.getResources.getResources().requireProcedureSet(this.procedureSets.pdf)},t.prototype.drawPdfTemplate=function(t,e,i){if(void 0===i){if(null==t)throw Error("ArgumentNullException-template");this.drawPdfTemplate(t,e,t.size)}else{if(null==t)throw Error("ArgumentNullException-template");var n=t.width>0?i.width/t.width:1,r=t.height>0?i.height/t.height:1,o=!(1===n&&1===r),s=this.save(),a=new VP;null!=this.pageLayer&&this.getTranslateTransform(e.x,e.y+i.height,a),o&&this.getScaleTransform(n,r,a),this.pdfStreamWriter.modifyCtm(a);var l=this.getResources.getResources().getName(t);this.pdfStreamWriter.executeObject(l),this.restore(s);var h=t.graphics;if(null!=h)for(var c=0;c<h.automaticFields.automaticFields.length;c++){var d=h.automaticFields.automaticFields[c],p=new oP(d.location.x+e.x,d.location.y+e.y),u=0==t.size.width?0:i.width/t.size.width,f=0==t.size.height?0:i.height/t.size.height;this.automaticFields.add(new KP(d.field,p,u,f)),this.page.dictionary.modify()}this.getResources.getResources().requireProcedureSet(this.procedureSets.imageB),this.getResources.getResources().requireProcedureSet(this.procedureSets.imageC),this.getResources.getResources().requireProcedureSet(this.procedureSets.imageI),this.getResources.getResources().requireProcedureSet(this.procedureSets.text)}},t.prototype.drawString=function(t,e,i,n,r,o,s,a,l){if("string"==typeof t&&e instanceof bP&&(i instanceof _P||null===i)&&(n instanceof hP||null===n)&&"number"==typeof r&&"number"==typeof o&&(s instanceof uP||null===s)&&void 0===a)this.isOverloadWithPosition=!0,this.drawString(t,e,i,n,r,o,this.clientSize.width-r,0,s);else{var h=i,c=n,d=r,p=o,u=s,f=a,g=l,m=(new gP).layout(t,e,g,new sP(u,f),this.isOverloadWithPosition,this.clientSize);if(!m.empty){var y=this.checkCorrectLayoutRectangle(m.actualSize,d,p,g);u<=0&&(d=y.x,u=y.width),f<=0&&(p=y.y,f=y.height),this.drawStringLayoutResult(m,e,h,c,new aP(d,p,u,f),g),this.isEmfTextScaled=!1,this.emfScalingFactor=new sP(0,0)}this.getResources.getResources().requireProcedureSet(this.procedureSets.text),this.isNormalRender=!0,this.pdfStringLayoutResult=m,this.isUseFontSize=!1}},t.prototype.drawLine=function(t,e,i,n,r){if(e instanceof oP){var o=e,s=i;this.drawLine(t,o.x,o.y,s.x,s.y)}else{o=e,s=i;var a=n,l=r;this.stateControl(t,null,null);var h=this.streamWriter;h.beginPath(o,s),h.appendLineSegment(a,l),h.strokePath(),this.getResources.getResources().requireProcedureSet(this.procedureSets.pdf)}},t.prototype.drawRectangle=function(t,e,i,n,r,o){if(t instanceof _P&&"number"==typeof e){var s=i;this.drawRectangle(t,null,e,s,n,r)}else if(t instanceof hP&&"number"==typeof e){s=i;this.drawRectangle(null,t,e,s,n,r)}else{s=i;var a=n,l=r,h=o;if(e instanceof UO){this.bCSInitialized=!1;var c=this.matrix.matrix.offsetX+s,d=void 0;d=null!=this.layer&&null!=this.layer.page?this.layer.page.size.height-this.matrix.matrix.offsetY+a:this.clientSize.height-this.matrix.matrix.offsetY+a,e.location=new oP(c,d),e.graphics.colorSpace=this.colorSpace}else e instanceof NO&&(e.colorSpace=this.colorSpace);e instanceof dP&&e.color.isEmpty&&(e=null);var p=t,u=e;this.stateControl(p,u,null),this.streamWriter.appendRectangle(s,a,l,h),this.drawPathHelper(p,u,!1)}},t.prototype.drawPathHelper=function(t,e,i,n){if("boolean"==typeof i){var r=i;this.drawPathHelper(t,e,MC.Winding,r)}else{var o=null!=t,s=null!=e,a=(r=i)===MC.Alternate;o&&s?this.streamWriter.fillStrokePath(a):o||s?o?this.streamWriter.strokePath():this.streamWriter.fillPath(a):this.streamWriter.endPath()}},t.prototype.drawImage=function(t,e,i,n,r){if("number"==typeof e&&"number"==typeof i&&void 0===n){var o=t.physicalDimension;this.drawImage(t,e,i,o.width,o.height)}else{var s=e,a=i,l=r;t.save();var h=new VP;this.getTranslateTransform(s,a+l,h),this.getScaleTransform(n,r,h),this.pdfStreamWriter.write("q"),this.pdfStreamWriter.modifyCtm(h);var c=this.getResources.getResources();void 0!==this.pageLayer&&null!=this.page&&(c.document=this.page.document);var d=c.getName(t);void 0!==this.pageLayer&&this.page.setResources(c),this.pdfStreamWriter.executeObject(d),this.pdfStreamWriter.write(qx.restoreState),this.pdfStreamWriter.write(qx.newLine);var p=this.getResources.getResources();p.requireProcedureSet(this.procedureSets.imageB),p.requireProcedureSet(this.procedureSets.imageC),p.requireProcedureSet(this.procedureSets.imageI),p.requireProcedureSet(this.procedureSets.text)}},t.prototype.getLineBounds=function(t,e,i,n,r){var o;if(!e.empty&&t<e.lineCount&&t>=0){var s=e.lines[t],a=this.getTextVerticalAlignShift(e.actualSize.height,n.height,r)+n.y+e.lineHeight*t,l=s.width,h=this.getHorizontalAlignShift(l,n.width,r),c=this.getLineIndent(s,r,n,0===t);h+=this.rightToLeft(r)?0:c;var d=n.x+h,p=this.shouldJustify(s,n.width,r)?n.width-c:l-c,u=e.lineHeight;o=new aP(d,a,p,u)}else o=new aP(0,0,0,0);return o},t.prototype.checkCorrectLayoutRectangle=function(t,e,i,n){var r=new aP(e,i,t.width,t.width);if(null!=n){switch(n.alignment){case IC.Center:r.x-=r.width/2;break;case IC.Right:r.x-=r.width}switch(n.lineAlignment){case LC.Middle:r.y-=r.height/2;break;case LC.Bottom:r.y-=r.height}}return r},t.prototype.setLayer=function(t){this.pageLayer=t;var e=t.page;null!=e&&void 0!==e&&(e.beginSave=this.pageSave)},t.prototype.pageSave=function(t){if(null!=t.graphics.automaticFields)for(var e=0;e<t.graphics.automaticFields.automaticFields.length;e++){var i=t.graphics.automaticFields.automaticFields[e];i.field.performDraw(t.graphics,i.location,i.scalingX,i.scalingY)}},t.prototype.drawStringLayoutResult=function(t,e,i,n,r,o){if(t.empty)throw new Error("ArgumentNullException:result");this.applyStringSettings(e,i,n,o,r);var s=null!=o?o.horizontalScalingFactor:100;s===this.previousTextScaling||this.isEmfTextScaled||(this.pdfStreamWriter.setTextScaling(s),this.previousTextScaling=s);var a,l=null==o||0===o.lineSpacing?e.height:o.lineSpacing+e.height;a=null!=o&&o.subSuperScript===ZC.SubScript?l-(e.height+e.metrics.getDescent(o)):l-e.metrics.getAscent(o),this.shift=a,this.pdfStreamWriter.startNextLine(r.x,r.y-a),this.pdfStreamWriter.setLeading(+l);for(var h=0,c="",d=0;d<t.lines.length;d++)if(h+=t.lineHeight,r.y+h>this.clientSize.height){this.startCutIndex=d;break}for(var p=this.startCutIndex;p<t.lines.length&&p>=0;p++)c+=t.lines[p].text;var u=new aP(r.x,r.y,r.width,r.height);this.drawLayoutResult(t,e,o,r),this.underlineStrikeoutText(i,n,t,e,u,o),this.isEmfPlus=!1,this.isUseFontSize=!1,-1!==this.startCutIndex&&this.getNextPage().graphics.drawString(c,e,i,n,r.x,0,r.width,0,o)},t.prototype.getNextPage=function(){var t=this.currentPage.section,e=t.indexOf(this.currentPage);return e===t.count-1?t.add():t.getPages()[e+1]},t.prototype.setClip=function(t,e){void 0===e?this.setClip(t,MC.Winding):(this.pdfStreamWriter.appendRectangle(t),this.pdfStreamWriter.clipPath(e===MC.Alternate))},t.prototype.applyStringSettings=function(t,e,i,n,r){i instanceof UO?(this.bCSInitialized=!1,i.graphics.colorSpace=this.colorSpace):i instanceof NO&&(this.bCSInitialized=!1,i.colorSpace=this.colorSpace);var o=this.getTextRenderingMode(e,i,n);this.stateControl(e,i,t,n),this.pdfStreamWriter.beginText(),o!==this.previousTextRenderingMode&&(this.pdfStreamWriter.setTextRenderingMode(o),this.previousTextRenderingMode=o);var s=null!=n?n.characterSpacing:0;s===this.previousCharacterSpacing||this.isEmfTextScaled||(this.pdfStreamWriter.setCharacterSpacing(s),this.previousCharacterSpacing=s);var a=null!=n?n.wordSpacing:0;a!==this.previousWordSpacing&&(this.pdfStreamWriter.setWordSpacing(a),this.previousWordSpacing=a)},t.prototype.getTextVerticalAlignShift=function(t,e,i){var n=0;if(e>=0&&null!=i&&i.lineAlignment!==LC.Top)switch(i.lineAlignment){case LC.Middle:n=(e-t)/2;break;case LC.Bottom:n=e-t}return n},t.prototype.drawLayoutResult=function(t,e,i,n){var r=this.getTextVerticalAlignShift(t.actualSize.height,n.height,i);0!==r&&this.pdfStreamWriter.startNextLine(0,r);for(var o=e,s=null!=o&&o.isUnicode,a=(null!=o&&o.isEmbedFont,t.lines),l=0,h=a.length;l<h&&l!==this.startCutIndex;l++){var c=a[l],d=(c.text,c.width),p=this.getHorizontalAlignShift(d,n.width,i),u=this.getLineIndent(c,i,n,0===l);0===(p+=this.rightToLeft(i)?0:u)||this.isEmfTextScaled||this.pdfStreamWriter.startNextLine(p,0),s?this.drawUnicodeLine(c,n,e,i):this.drawAsciiLine(c,n,e,i),0===p||this.isEmfTextScaled||this.pdfStreamWriter.startNextLine(-p,0),this.isOverloadWithPosition&&a.length>1&&(this.pdfStreamWriter.startNextLine(-n.x,0),n.x=0,n.width=this.clientSize.width,this.isOverloadWithPosition=!1,this.isPointOverload=!0)}this.getResources.getResources().requireProcedureSet(this.procedureSets.text),0!==r&&this.pdfStreamWriter.startNextLine(0,-(r-t.lineHeight)),this.pdfStreamWriter.endText()},t.prototype.drawAsciiLine=function(t,e,i,n){this.justifyLine(t,e.width,n);var r="";if(-1!==t.text.indexOf("(")||-1!==t.text.indexOf(")"))for(var o=0;o<t.text.length;o++)"("===t.text[o]?r+="\\(":")"===t.text[o]?r+="\\)":r+=t.text[o];""===r&&(r=t.text);var s="("+r+")";this.pdfStreamWriter.showNextLineText(new HC(s))},t.prototype.drawUnicodeLine=function(t,e,i,n){var r=t.text,o=(t.width,null!==n&&n.rightToLeft),s=null!==n&&(0!==n.wordSpacing||n.alignment===IC.Justify),a=i,l=this.justifyLine(t,e.width,n),h=new RO;if(o||null!==n&&n.textDirection!==NC.None){var c=null,d=null!==n&&n.alignment===IC.Right,p=null;p=(c=null!==n&&n.textDirection!==NC.None?h.layout(r,a,n.textDirection===NC.RightToLeft,s,n):h.layout(r,a,d,s,n)).length>1?null!==n&&n.textDirection!==NC.None?h.splitLayout(r,a,n.textDirection===NC.RightToLeft,s,n):h.splitLayout(r,a,d,s,n):[r],this.drawUnicodeBlocks(c,p,a,n,l)}else if(s){var u=this.breakUnicodeLine(r,a,null);c=u.tokens,p=u.words;this.drawUnicodeBlocks(c,p,a,n,l)}else{var f=this.convertToUnicode(r,a),g=this.getUnicodeString(f);this.streamWriter.showNextLineText(g)}},t.prototype.drawUnicodeBlocks=function(t,e,i,n,r){if(null==t)throw new Error("Argument Null Exception : blocks");if(null==e)throw new Error("Argument Null Exception : words");if(null==i)throw new Error("Argument Null Exception : font");this.streamWriter.startNextLine();var o=0,s=0,a=0,l=0;try{null!==n&&(a=n.firstLineIndent,l=n.paragraphIndent,n.firstLineIndent=0,n.paragraphIndent=0);var h=i.getCharWidth(fP.whiteSpace,n)+r,c=null!=n?n.characterSpacing:0;h+=c+(null!==n&&0===r?n.wordSpacing:0);for(var d=0;d<t.length;d++){var p=t[d],u=e[d],f=0;if(0!==o&&this.streamWriter.startNextLine(o,0),u.length>0){f+=i.measureString(u,n).width,f+=c;var g=this.getUnicodeString(p);this.streamWriter.showText(g)}d!==t.length-1&&(s+=o=f+h)}s>0&&this.streamWriter.startNextLine(-s,0)}finally{null!==n&&(n.firstLineIndent=a,n.paragraphIndent=l)}},t.prototype.breakUnicodeLine=function(t,e,i){if(null===t)throw new Error("Argument Null Exception : line");i=t.split(null);for(var n=[],r=0;r<i.length;r++){var o=i[r],s=this.convertToUnicode(o,e);n[r]=s}return{tokens:n,words:i}},t.prototype.getUnicodeString=function(t){if(null===t)throw new Error("Argument Null Exception : token");var e=new HC(t);return e.converted=!0,e.encode=cC.ForceEncoding.Ascii,e},t.prototype.convertToUnicode=function(t,e){var i=null;if(null==t)throw new Error("Argument Null Exception : text");if(null==e)throw new Error("Argument Null Exception : ttfFont");if(e.fontInternal instanceof AO){var n=e.fontInternal.ttfReader;e.setSymbols(t),i=n.convertString(t);var r=HC.toUnicodeArray(i,!1);i=HC.byteToString(r)}return i},t.prototype.justifyLine=function(t,e,i){var n=t.text,r=t.width,o=this.shouldJustify(t,e,i),s=null!=i&&0!==i.wordSpacing,a=fP.spaces,l=fP.getCharsCount(n,a),h=0;o?(s&&(r-=l*i.wordSpacing),h=(e-r)/l,this.pdfStreamWriter.setWordSpacing(h)):s?this.pdfStreamWriter.setWordSpacing(i.wordSpacing):this.pdfStreamWriter.setWordSpacing(0);return h},t.prototype.reset=function(t){this.canvasSize=t,this.streamWriter.clear(),this.initialize(),this.initializeCoordinates()},t.prototype.shouldJustify=function(t,e,i){var n=t.text,r=t.width,o=null!=i&&i.alignment===IC.Justify,s=e>=0&&r<e,a=fP.spaces,l=fP.getCharsCount(n,a)>0&&n[0]!==fP.whiteSpace,h=(t.lineType&pP.LayoutBreak)>0;return o&&s&&l&&(h||i.alignment===IC.Justify)},t.prototype.underlineStrikeoutText=function(t,e,i,n,r,o){if(n.underline||n.strikeout){var s=this.createUnderlineStikeoutPen(t,e,n,o);if(null!=s){var a=this.getTextVerticalAlignShift(i.actualSize.height,r.height,o),l=0;l=r.y+a+n.metrics.getAscent(o)+1.5*s.width;for(var h=r.y+a+n.metrics.getHeight(o)/2+1.5*s.width,c=i.lines,d=0,p=i.lineCount;d<p;d++){var u=c[d],f=(u.text,u.width),g=this.getHorizontalAlignShift(f,r.width,o),m=this.getLineIndent(u,o,r,0===d);g+=this.rightToLeft(o)?0:m;var y=r.x+g,v=this.shouldJustify(u,r.width,o)?y+r.width-m:y+f-m;if(n.underline){var b=l;this.drawLine(s,y,b,v,b),l+=i.lineHeight}if(n.strikeout){b=h;this.drawLine(s,y,b,v,b),h+=i.lineHeight}this.isPointOverload&&c.length>1&&(r.x=0,r.width=this.clientSize.width)}this.isPointOverload=!1}}},t.prototype.createUnderlineStikeoutPen=function(t,e,i,n){var r=i.metrics.getSize(n)/20,o=null;return null!=t?o=new _P(t.color,r):null!=e&&(o=new _P(e,r)),o},t.prototype.getTextRenderingMode=function(t,e,i){var n=TC.None;return n=null!=t&&null!=e?TC.FillStroke:null!=t?TC.Stroke:TC.Fill,null!=i&&i.clipPath&&(n|=TC.ClipFlag),n},t.prototype.getLineIndent=function(t,e,i,n){var r=0,o=(t.lineType&pP.FirstParagraphLine)>0;return null!=e&&o&&(r=n?e.firstLineIndent:e.paragraphIndent,r=i.width>0?Math.min(i.width,r):r),r},t.prototype.getHorizontalAlignShift=function(t,e,i){var n=0;if(e>=0&&null!=i&&i.alignment!==IC.Left)switch(i.alignment){case IC.Center:n=(e-t)/2;break;case IC.Right:n=e-t}return n},t.prototype.rightToLeft=function(t){var e=null!=t&&t.rightToLeft;return null!=t&&t.textDirection!==NC.None&&void 0!==t.textDirection&&(e=!0),e},t.prototype.stateControl=function(t,e,i,n){if(void 0===n)this.stateControl(t,e,i,null);else{e instanceof NO&&(this.bCSInitialized=!1,e.colorSpace=this.colorSpace),e instanceof UO&&(this.bCSInitialized=!1,e.graphics.colorSpace=this.colorSpace);if(null!==e){void 0!==this.pageLayer&&null!=this.pageLayer&&!1===this.colorSpaceChanged&&(this.lastDocumentCS=this.pageLayer.page.document.colorSpace,this.lastGraphicsCS=this.pageLayer.page.graphics.colorSpace,this.colorSpace=this.pageLayer.page.document.colorSpace,this.currentColorSpace=this.pageLayer.page.document.colorSpace,this.colorSpaceChanged=!0),this.initCurrentColorSpace(this.currentColorSpace)}else if(null!=t){void 0!==this.pageLayer&&null!=this.pageLayer&&(this.colorSpace=this.pageLayer.page.document.colorSpace,this.currentColorSpace=this.pageLayer.page.document.colorSpace),this.initCurrentColorSpace(this.currentColorSpace)}this.penControl(t,!1),this.brushControl(e,!1),this.fontControl(i,n,!1)}},t.prototype.initCurrentColorSpace=function(t){this.getResources.getResources();this.bCSInitialized||(this.currentColorSpace!=DC.GrayScale?(this.pdfStreamWriter.setColorSpace("Device"+this.currentColorSpaces[this.currentColorSpace],!0),this.pdfStreamWriter.setColorSpace("Device"+this.currentColorSpaces[this.currentColorSpace],!1),this.bCSInitialized=!0):(this.pdfStreamWriter.setColorSpace("DeviceGray",!0),this.pdfStreamWriter.setColorSpace("DeviceGray",!1),this.bCSInitialized=!0))},t.prototype.penControl=function(t,e){null!=t&&(this.currentPen=t,t.monitorChanges(this.currentPen,this.pdfStreamWriter,this.getResources,e,this.colorSpace,this.matrix.clone()),this.currentPen=t.clone())},t.prototype.brushControl=function(t,e){if(null!=t&&void 0!==t){var i=t.clone(),n=i;if(!(null==n||t instanceof dP||t instanceof UO)){var r=n.matrix,o=this.matrix.clone();null!=r&&(r.multiply(o),o=r),n.matrix=o}this.currentBrush=n;i.monitorChanges(this.currentBrush,this.pdfStreamWriter,this.getResources,e,this.colorSpace),this.currentBrush=t,t=null}},t.prototype.fontControl=function(t,e,i){if(null!=t){var n=null!=e?e.subSuperScript:ZC.None,r=null!=this.currentStringFormat?this.currentStringFormat.subSuperScript:ZC.None;if(i||t!==this.currentFont||n!==r){var o=this.getResources.getResources();this.currentFont=t,this.currentStringFormat=e;var s=t.metrics.getSize(e);this.isEmfTextScaled=!1;var a=o.getName(t);this.pdfStreamWriter.setFont(t,a,s)}}},t.prototype.setTransparency=function(t,e,i){if(void 0===e)this.istransparencySet=!0,this.setTransparency(t,t,RC.Normal);else if("number"==typeof e&&void 0===i)this.setTransparency(t,e,RC.Normal);else{null==this.trasparencies&&(this.trasparencies=new UP);var n=null,r=new YO(t,e,i);this.trasparencies.containsKey(r)&&(n=this.trasparencies.getValue(r)),null==n&&(n=new GP(t,e,i),this.trasparencies.setValue(r,n));var o=this.getResources.getResources().getName(n);this.streamWriter.setGraphicsState(o)}},t.prototype.clipTranslateMargins=function(t,e,i,n,r,o){if(t instanceof aP&&void 0===e)this.clipBounds=t,this.pdfStreamWriter.writeComment("Clip margins."),this.pdfStreamWriter.appendRectangle(t),this.pdfStreamWriter.closePath(),this.pdfStreamWriter.clipPath(!1),this.pdfStreamWriter.writeComment("Translate co-ordinate system."),this.translateTransform(t.x,t.y);else if("number"==typeof t){var s=new aP(i,n,this.size.width-i-r,this.size.height-n-o);this.clipBounds=s,this.pdfStreamWriter.writeComment("Clip margins."),this.pdfStreamWriter.appendRectangle(s),this.pdfStreamWriter.closePath(),this.pdfStreamWriter.clipPath(!1),this.pdfStreamWriter.writeComment("Translate co-ordinate system."),this.translateTransform(t,e)}},t.prototype.updateY=function(t){return-t},t.prototype.translateTransform=function(t,e){var i=new VP;this.getTranslateTransform(t,e,i),this.pdfStreamWriter.modifyCtm(i),this.matrix.multiply(i)},t.prototype.getTranslateTransform=function(t,e,i){return i.translate(t,this.updateY(e)),i},t.prototype.scaleTransform=function(t,e){var i=new VP;this.getScaleTransform(t,e,i),this.pdfStreamWriter.modifyCtm(i),this.matrix.multiply(i)},t.prototype.getScaleTransform=function(t,e,i){return null==i&&(i=new VP),i.scale(t,e),i},t.prototype.rotateTransform=function(t){var e=new VP;this.getRotateTransform(t,e),this.pdfStreamWriter.modifyCtm(e),this.matrix.multiply(e)},t.prototype.initializeCoordinates=function(){this.pdfStreamWriter.writeComment("Change co-ordinate system to left/top."),this.mediaBoxUpperRightBound!==-this.size.height&&null==this.cropBox&&(this.mediaBoxUpperRightBound===this.size.height||0===this.mediaBoxUpperRightBound?this.translateTransform(0,this.updateY(this.size.height)):this.translateTransform(0,this.updateY(this.mediaBoxUpperRightBound)))},t.prototype.getRotateTransform=function(t,e){return null!=e&&void 0!==e||(e=new VP),e.rotate(this.updateY(t)),e},t.prototype.save=function(){var t=new XO(this,this.matrix.clone());return t.brush=this.currentBrush,t.pen=this.currentPen,t.font=this.currentFont,t.colorSpace=this.currentColorSpace,t.characterSpacing=this.previousCharacterSpacing,t.wordSpacing=this.previousWordSpacing,t.textScaling=this.previousTextScaling,t.textRenderingMode=this.previousTextRenderingMode,this.graphicsState.push(t),this.pdfStreamWriter.saveGraphicsState(),t},t.prototype.restore=function(t){if(void 0===t)this.graphicsState.length>0&&this.doRestoreState();else if(-1!==this.graphicsState.indexOf(t))for(;0!==this.graphicsState.length;){if(this.doRestoreState()===t)break}},t.prototype.doRestoreState=function(){var t=this.graphicsState.pop();return this.transformationMatrix=t.matrix,this.currentBrush=t.brush,this.currentPen=t.pen,this.currentFont=t.font,this.currentColorSpace=t.colorSpace,this.previousCharacterSpacing=t.characterSpacing,this.previousWordSpacing=t.wordSpacing,this.previousTextScaling=t.textScaling,this.previousTextRenderingMode=t.textRenderingMode,this.pdfStreamWriter.restoreGraphicsState(),t},t.prototype.drawPath=function(t,e,i){e instanceof UO?(this.bCSInitialized=!1,e.graphics.colorSpace=this.colorSpace):e instanceof NO&&(this.bCSInitialized=!1,e.colorSpace=this.colorSpace),this.stateControl(t,e,null),this.buildUpPath(i.pathPoints,i.pathTypes),this.drawPathHelper(t,e,i.fillMode,!1)},t.prototype.drawArc=function(t,e,i,n,r,o,s){e instanceof aP?this.drawArc(t,e.x,e.y,e.width,e.height,i,n):0!==s&&(this.stateControl(t,null,null),this.constructArcPath(e,i,e+n,i+r,o,s),this.drawPathHelper(t,null,!1))},t.prototype.buildUpPath=function(e,i){for(var n=e.length,r=0;r<n;++r){var o,s=e[r];switch(i[r]&t.pathTypesValuesMask){case eO.Start:this.pdfStreamWriter.beginPath(s.x,s.y);break;case eO.Bezier3:var a=new oP(0,0),l=new oP(0,0),h=this.getBezierPoints(e,i,r,a,l);this.pdfStreamWriter.appendBezierSegment(s,h.p2,h.p3),r=h.i;break;case eO.Line:this.pdfStreamWriter.appendLineSegment(s);break;default:throw new Error("ArithmeticException - Incorrect path formation.")}o=i[r],this.checkFlags(o)}},t.prototype.getBezierPoints=function(e,i,n,r,o){if((i[++n]&t.pathTypesValuesMask)!==eO.Bezier3)throw new Error("ArgumentException : errorMsg");if(r=e[n],(i[++n]&t.pathTypesValuesMask)!==eO.Bezier3)throw new Error("ArgumentException : errorMsg");return{i:n,p2:r,p3:e[n]}},t.prototype.checkFlags=function(t){(t&eO.CloseSubpath)===eO.CloseSubpath&&this.pdfStreamWriter.closePath()},t.prototype.constructArcPath=function(t,e,i,n,r,o){var s=this.getBezierArc(t,e,i,n,r,o);if(0!==s.length){var a=[s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7]];this.pdfStreamWriter.beginPath(a[0],a[1]);var l=0;for(l=0;l<s.length;l+=8)a=[s[l],s[l+1],s[l+2],s[l+3],s[l+4],s[l+5],s[l+6],s[l+7]],this.pdfStreamWriter.appendBezierSegment(a[2],a[3],a[4],a[5],a[6],a[7])}},t.prototype.getBezierArc=function(t,e,i,n,r,o){if(t>i){var s=void 0;s=t,t=i,i=s}if(n>e){s=void 0;s=e,e=n,n=s}var a,l;Math.abs(o)<=90?(a=o,l=1):a=o/(l=Math.ceil(Math.abs(o)/90));for(var h=(t+i)/2,c=(e+n)/2,d=(i-t)/2,p=(n-e)/2,u=a*(Math.PI/360),f=Math.abs(4/3*(1-Math.cos(u))/Math.sin(u)),g=[],m=0;m<l;m++){var y=(r+m*a)*(Math.PI/180),v=(r+(m+1)*a)*(Math.PI/180),b=Math.cos(y),w=Math.cos(v),S=Math.sin(y),x=Math.sin(v);a>0?g.push(h+d*b,c-p*S,h+d*(b-f*S),c-p*(S+f*b),h+d*(w+f*x),c-p*(x-f*w),h+d*w,c-p*x):g.push(h+d*b,c-p*S,h+d*(b+f*S),c-p*(S-f*b),h+d*(w-f*x),c-p*(x+f*w),h+d*w,c-p*x)}return g},t.pathTypesValuesMask=15,t.transparencyObject=!1,t}(),qO=function(){function t(t){this.sender=t}return t.prototype.getResources=function(){return this.sender.getResources()},t}(),XO=function(){function t(t,e){this.internalTextRenderingMode=TC.Fill,this.internalCharacterSpacing=0,this.internalWordSpacing=0,this.internalTextScaling=100,this.pdfColorSpace=DC.Rgb,void 0!==t&&(this.pdfGraphics=t,this.transformationMatrix=e)}return Object.defineProperty(t.prototype,"graphics",{get:function(){return this.pdfGraphics},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"matrix",{get:function(){return this.transformationMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"characterSpacing",{get:function(){return this.internalCharacterSpacing},set:function(t){this.internalCharacterSpacing=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wordSpacing",{get:function(){return this.internalWordSpacing},set:function(t){this.internalWordSpacing=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textScaling",{get:function(){return this.internalTextScaling},set:function(t){this.internalTextScaling=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pen",{get:function(){return this.pdfPen},set:function(t){this.pdfPen=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"brush",{get:function(){return this.pdfBrush},set:function(t){this.pdfBrush=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this.pdfFont},set:function(t){this.pdfFont=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorSpace",{get:function(){return this.pdfColorSpace},set:function(t){this.pdfColorSpace=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textRenderingMode",{get:function(){return this.internalTextRenderingMode},set:function(t){this.internalTextRenderingMode=t},enumerable:!0,configurable:!0}),t}(),YO=function(){return function(t,e,i){this.alphaPen=t,this.alphaBrush=e,this.blendMode=i}}(),ZO=function(){function t(t,e){if(this.pdfColorSpace=DC.Rgb,this.isVisible=!0,this.sublayer=!1,this.contentLength=0,this.dictionaryProperties=new Xx,null===t)throw new Error("ArgumentNullException:page");if(this.pdfPage=t,this.clipPageTemplates=!0,void 0===e)this.content=new CC;else if(e instanceof CC||null===e){if(null===e)throw new Error("ArgumentNullException:stream");this.content=e}else this.content=new CC,this.clipPageTemplates=e}return Object.defineProperty(t.prototype,"colorSpace",{get:function(){return this.pdfColorSpace},set:function(t){this.pdfColorSpace=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"page",{get:function(){return this.pdfPage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layerId",{get:function(){return this.layerid},set:function(t){this.layerid=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.layerName},set:function(t){this.layerName=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this.isVisible},set:function(t){this.isVisible=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"graphics",{get:function(){return null==this.pdfGraphics&&this.initializeGraphics(this.page),this.pdfGraphics},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layers",{get:function(){return null==this.layer?(this.layer=new QO(this.page),this.layer.sublayer=!0,this.layer):this.layer},enumerable:!0,configurable:!0}),t.prototype.add=function(){var e=new t(this.pdfPage);return e.name="",e},t.prototype.sign=function(t){return 0===t?0:t>0?1:-1},t.prototype.initializeGraphics=function(t){var e=t,i=new qO(this.page);if(this.pdfGraphics=new GO(t.size,i,this.content),this.pdfGraphics.mediaBoxUpperRightBound=0,null!=e){var n=e.section.parent;null!=n&&(this.pdfGraphics.colorSpace=n.document.colorSpace,this.colorSpace=n.document.colorSpace)}var r=this.sign(t.origin.y)===this.sign(t.origin.x);(t.origin.x>=0&&t.origin.y>=0||!r)&&this.pdfGraphics.initializeCoordinates();var o=e.section.getActualBounds(e,!0),s=e.section.pageSettings.margins;this.clipPageTemplates?t.origin.x>=0&&t.origin.y>=0&&this.pdfGraphics.clipTranslateMargins(o):this.graphics.clipTranslateMargins(o.x,o.y,s.left,s.top,s.right,s.bottom),this.pdfGraphics.setLayer(this)},Object.defineProperty(t.prototype,"element",{get:function(){return this.content},enumerable:!0,configurable:!0}),t}(),KO=function(){function t(){}return Object.defineProperty(t.prototype,"count",{get:function(){return void 0===this.collection&&(this.collection=[]),this.collection.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"list",{get:function(){return void 0===this.collection&&(this.collection=[]),this.collection},enumerable:!0,configurable:!0}),t}(),JO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),QO=function(t){function e(e){var i=t.call(this)||this;if(i.parentLayerCount=0,i.sublayer=!1,i.optionalContent=new Yx,e instanceof $O){i.page=e;var n=e;i.parseLayers(n)}return i}return JO(e,t),e.prototype.items=function(t,e){if("number"==typeof t&&void 0===e)return this.list[t];if(null==e)throw new Error("ArgumentNullException: layer");if(e.page!==this.page)throw new Error("ArgumentException: The layer belongs to another page")},e.prototype.add=function(t,e){if(void 0===t){var i=new ZO(this.page);return i.name="",this.add(i),i}if(t instanceof ZO){var n=this.list.push(t);return this.addLayer(n,t),n}return 0},e.prototype.addLayer=function(t,e){var i=new VC(e);this.page.contents.add(i)},e.prototype.insert=function(t,e){for(var i=[],n=this.list.length,r=t;r<n;r++)i.push(this.list.pop());this.list.push(e);for(r=0;r<i.length;r++)this.list.push(i[r]);this.insertLayer(t,e)},e.prototype.insertLayer=function(t,e){if(null==e)throw new Error("ArgumentNullException:layer");var i=new VC(e);this.page.contents.insert(t,i)},e.prototype.parseLayers=function(t){var e=this.page.contents;this.page.getResources();t.crossTable;var i=new CC,n=new CC,r=[];r.push("q"),i.data=r,e.insert(0,new VC(i)),(r=[]).push("Q"),n.data=r,e.insert(e.count,new VC(n))},e.prototype.indexOf=function(t){if(null==t)throw new Error("ArgumentNullException: layer");return this.list.indexOf(t)},e}(KO),$O=function(){function t(t){this.defLayerIndex=-1,this.modified=!1,this.dictionaryProperties=new Xx,this.pageDictionary=t}return Object.defineProperty(t.prototype,"section",{get:function(){return this.pdfSection},set:function(t){this.pdfSection=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dictionary",{get:function(){return this.pageDictionary},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.pageDictionary},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultLayer",{get:function(){var t=this.layers,e=this.defaultLayerIndex;return t.items(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultLayerIndex",{get:function(){if(0===this.layerCollection.count||-1===this.defLayerIndex){var t=this.layerCollection.add();this.defLayerIndex=this.layerCollection.indexOf(t)}return this.defLayerIndex},set:function(t){if(t<0||t>this.layers.count-1)throw new Error("ArgumentOutOfRangeException : value, Index can not be less 0 and greater Layers.Count - 1");this.defLayerIndex=t,this.modified=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layers",{get:function(){return null!=this.layerCollection&&void 0!==this.layerCollection||(this.layerCollection=new QO(this)),this.layerCollection},enumerable:!0,configurable:!0}),t.prototype.getResources=function(){return null==this.resources&&(this.resources=new VO,this.dictionary.items.setValue(this.dictionaryProperties.resources,this.resources)),this.resources},Object.defineProperty(t.prototype,"contents",{get:function(){var t=this.pageDictionary.items.getValue(this.dictionaryProperties.contents),e=t;return null==e&&(e=new iC,this.pageDictionary.items.setValue(this.dictionaryProperties.contents,e)),e},enumerable:!0,configurable:!0}),t.prototype.setResources=function(t){this.resources=t,this.dictionary.items.setValue(this.dictionaryProperties.resources,this.resources),this.modified=!0},t}(),tE=function(){function t(t){this.alreadyExistsAnnotationError="This annotatation had been already added to page",this.missingAnnotationException="Annotation is not contained in collection.",this.dictionaryProperties=new Xx,this.internalAnnotations=new iC,this.lists=[],void 0!==t&&(this.page=t)}return Object.defineProperty(t.prototype,"annotations",{get:function(){return this.internalAnnotations},set:function(t){this.internalAnnotations=t},enumerable:!0,configurable:!0}),t.prototype.add=function(t){this.doAdd(t)},t.prototype.doAdd=function(t){if(void 0===t.destination)return t.setPage(this.page),this.internalAnnotations.add(new VC(t)),this.lists.push(t);var e=(new gP).layout(t.text,t.font,t.stringFormat,new sP(t.bounds.width,0),!1,new sP(0,0)),i=t.bounds.y;if(1===e.lines.length){var n=t.font.measureString(e.lines[0].text);t.bounds=new aP(new oP(t.bounds.x,i),n),t.text=e.lines[0].text,this.page.graphics.drawString(t.text,t.font,null,t.brush,t.bounds.x,t.bounds.y,t.bounds.width,t.bounds.height,null),t.setPage(this.page),this.setColor(t),this.internalAnnotations.add(new VC(t)),this.lists.push(t)}else for(var r=0;r<e.lines.length;r++){n=t.font.measureString(e.lines[r].text);if(0===r)t.bounds=new aP(t.bounds.x,i,n.width,n.height),t.text=e.lines[r].text,this.page.graphics.drawString(t.text,t.font,null,t.brush,t.bounds.x,i,n.width,n.height,null),t.setPage(this.page),this.setColor(t),this.internalAnnotations.add(new VC(t)),this.lists.push(t),i+=t.bounds.height;else{var o=t.clone();o.bounds=new aP(new oP(t.bounds.x,i),n),o.text=e.lines[r].text,this.page.graphics.drawString(o.text,o.font,null,o.brush,o.bounds.x,o.bounds.y,o.bounds.width,o.bounds.height,null),o.setPage(this.page),this.setColor(o),this.internalAnnotations.add(new VC(o)),this.lists.push(o),i+=o.bounds.height}}},t.prototype.setColor=function(t){var e=DC.Rgb,i=t.color.toArray(e);t.dictionary.items.setValue(this.dictionaryProperties.c,i)},Object.defineProperty(t.prototype,"element",{get:function(){return this.internalAnnotations},enumerable:!0,configurable:!0}),t}(),eE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),iE=function(t){function e(){var e=t.call(this,new Yx)||this;return e.annotationCollection=null,e.beginSave=null,e.initialize(),e}return eE(e,t),Object.defineProperty(e.prototype,"document",{get:function(){return null!==this.section&&null!==this.section.parent?this.section.parent.document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"graphics",{get:function(){var t=this.defaultLayer.graphics;return t.currentPage=this,t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"crossTable",{get:function(){if(null===this.section)throw new Error("PdfDocumentException : Page is not created");return null===this.section.parent?this.section.parentDocument.crossTable:this.section.parent.document.crossTable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.section.pageSettings.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"origin",{get:function(){return this.section.pageSettings.origin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"annotations",{get:function(){return null==this.annotationCollection&&(this.annotationCollection=new tE(this),this.dictionary.items.setValue(this.dictionaryProperties.annots,this.annotationCollection.element),this.annotationCollection.annotations=this.dictionary.items.getValue(this.dictionaryProperties.annots)),this.annotationCollection},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.dictionary.items.setValue(this.dictionaryProperties.type,new Gx("Page")),this.dictionary.pageBeginDrawTemplate=new tC(this)},e.prototype.setSection=function(t){this.section=t,this.dictionary.items.setValue(this.dictionaryProperties.parent,new VC(t))},e.prototype.resetProgress=function(){this.isProgressOn=!1},e.prototype.getClientSize=function(){var t=this.section.getActualBounds(this,!0);return new sP(t.width,t.height)},e.prototype.pageBeginSave=function(){var t=this.document;void 0!==typeof t&&null!=t&&this.drawPageTemplates(t),null!=this.beginSave&&void 0!==this.beginSave&&this.beginSave(this)},e.prototype.drawPageTemplates=function(t){if(this.section.containsTemplates(t,this,!1)){var e=new ZO(this,!1);if(this.layers.insert(0,e),this.section.drawTemplates(this,e,t,!1),null!==e.graphics&&void 0!==e.graphics)for(var i=0;i<e.graphics.automaticFields.automaticFields.length;i++){var n=e.graphics.automaticFields.automaticFields[i];n.field.performDraw(e.graphics,n.location,n.scalingX,n.scalingY)}}if(this.section.containsTemplates(t,this,!0)){var r=new ZO(this,!1);this.layers.add(r),this.section.drawTemplates(this,r,t,!0)}},e}($O),nE=function(){function t(t){this.pdfPage=void 0!==t?t:null}return Object.defineProperty(t.prototype,"page",{get:function(){return this.pdfPage},enumerable:!0,configurable:!0}),t}(),rE=function(){function t(t){if(this.pdfSection=null,null==t)throw Error('ArgumentNullException("section")');this.section=t}return Object.defineProperty(t.prototype,"section",{get:function(){return this.pdfSection},set:function(t){this.pdfSection=t},enumerable:!0,configurable:!0}),t.prototype.contains=function(t){return this.section.contains(t)},t.prototype.remove=function(t){this.section.remove(t)},t.prototype.add=function(){return this.section.add()},t}(),oE=function(){function t(){}return Object.defineProperty(t.prototype,"left",{get:function(){return this.leftTemplate},set:function(t){this.leftTemplate=this.checkElement(t,AP.Left)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.topTemplate},set:function(t){this.topTemplate=this.checkElement(t,AP.Top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.rightTemplate},set:function(t){this.rightTemplate=this.checkElement(t,AP.Right)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.bottomTemplate},set:function(t){this.bottomTemplate=this.checkElement(t,AP.Bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EvenLeft",{get:function(){return this.evenLeft},set:function(t){this.evenLeft=this.checkElement(t,AP.Left)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EvenTop",{get:function(){return this.evenTop},set:function(t){this.evenTop=this.checkElement(t,AP.Top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EvenRight",{get:function(){return this.evenRight},set:function(t){this.evenRight=this.checkElement(t,AP.Right)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EvenBottom",{get:function(){return this.evenBottom},set:function(t){this.evenBottom=this.checkElement(t,AP.Bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"OddLeft",{get:function(){return this.oddLeft},set:function(t){this.oddLeft=this.checkElement(t,AP.Left)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"OddTop",{get:function(){return this.oddTop},set:function(t){this.oddTop=this.checkElement(t,AP.Top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"OddRight",{get:function(){return this.oddRight},set:function(t){this.oddRight=this.checkElement(t,AP.Right)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"OddBottom",{get:function(){return this.oddBottom},set:function(t){this.oddBottom=this.checkElement(t,AP.Bottom)},enumerable:!0,configurable:!0}),t.prototype.getLeft=function(t){if(null==t)throw new Error("ArgumentNullException:page");return this.isEven(t)?null!=this.EvenLeft?this.EvenLeft:this.left:null!=this.OddLeft?this.OddLeft:this.left},t.prototype.getTop=function(t){if(null==t)throw new Error("ArgumentNullException:page");return this.isEven(t)?null!=this.EvenTop?this.EvenTop:this.top:null!=this.OddTop?this.OddTop:this.top},t.prototype.getRight=function(t){if(null==t)throw new Error("ArgumentNullException:page");return this.isEven(t)?null!=this.EvenRight?this.EvenRight:this.right:null!=this.OddRight?this.OddRight:this.right},t.prototype.getBottom=function(t){if(null==t)throw new Error("ArgumentNullException:page");return this.isEven(t)?null!=this.EvenBottom?this.EvenBottom:this.bottom:null!=this.OddBottom?this.OddBottom:this.bottom},t.prototype.isEven=function(t){var e=t.section.document.pages;return(e.pageCollectionIndex.containsKey(t)?e.pageCollectionIndex.getValue(t)+1:e.indexOf(t)+1)%2==0},t.prototype.checkElement=function(t,e){if(null!=t){if(void 0!==t.type&&t.type!==AP.None)throw new Error("NotSupportedException:Can not reassign the template element. Please, create new one.");t.type=e}return t},t}(),sE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),aE=function(t){function e(){var e=t.call(this)||this;return e.leftValue=e.topValue=e.rightValue=e.bottomValue=e.stampValue=!0,e}return sE(e,t),Object.defineProperty(e.prototype,"applyDocumentLeftTemplate",{get:function(){return this.leftValue},set:function(t){this.leftValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"applyDocumentTopTemplate",{get:function(){return this.topValue},set:function(t){this.topValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"applyDocumentRightTemplate",{get:function(){return this.rightValue},set:function(t){this.rightValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"applyDocumentBottomTemplate",{get:function(){return this.bottomValue},set:function(t){this.bottomValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"applyDocumentStamps",{get:function(){return this.stampValue},set:function(t){this.stampValue=t},enumerable:!0,configurable:!0}),e}(oE),lE=function(){function t(t,e){this.pageAdded=new nE,this.pdfPages=[],this.dictionaryProperties=new Xx,this.pdfDocument=t,void 0===e?(this.settings=t.pageSettings.clone(),this.initialSettings=this.settings.clone()):(this.settings=e.clone(),this.initialSettings=this.settings.clone()),this.initialize()}return Object.defineProperty(t.prototype,"parent",{get:function(){return this.sectionCollection},set:function(t){this.sectionCollection=t,this.section.items.setValue(this.dictionaryProperties.parent,new VC(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentDocument",{get:function(){return this.pdfDocument},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageSettings",{get:function(){return this.settings},set:function(t){if(null==t)throw Error("Value can not be null.");this.settings=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.section},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this.pagesReferences.count},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return null==this.pageTemplate&&(this.pageTemplate=new aE),this.pageTemplate},set:function(t){this.pageTemplate=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"document",{get:function(){return this.sectionCollection.document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pages",{get:function(){return null!=this.pagesCollection&&void 0!==this.pagesCollection||(this.pagesCollection=new rE(this)),this.pagesCollection},enumerable:!0,configurable:!0}),t.prototype.getPages=function(){return this.pdfPages},t.prototype.pointToNativePdf=function(t,e){var i=this.getActualBounds(t,!0);return e.x+=i.x,e.y=this.pageSettings.height-e.y,e},t.prototype.setPageSettings=function(t){this.settings=t,this.state.orientation=t.orientation,this.state.rotate=t.rotate,this.state.size=t.size,this.state.origin=t.origin},t.prototype.initialize=function(){this.pagesReferences=new iC,this.section=new Yx,this.state=new hE(this.pdfDocument),this.section.sectionBeginSave=new $x(this,this.state),this.pageCount=new eC(0),this.section.items.setValue(this.dictionaryProperties.count,this.pageCount),this.section.items.setValue(this.dictionaryProperties.type,new Gx(this.dictionaryProperties.pages)),this.section.items.setValue(this.dictionaryProperties.kids,this.pagesReferences)},t.prototype.containsTemplates=function(t,e,i){var n=this.getDocumentTemplates(t,e,i),r=this.getSectionTemplates(e,i);return n.length>0||r.length>0},t.prototype.getDocumentTemplates=function(t,e,i){var n=[];return this.template.applyDocumentTopTemplate&&null!=t.template.getTop(e)&&(!t.template.getTop(e).foreground&&!i||t.template.getTop(e).foreground&&i)&&n.push(t.template.getTop(e)),this.template.applyDocumentBottomTemplate&&null!=t.template.getBottom(e)&&(!t.template.getBottom(e).foreground&&!i||t.template.getBottom(e).foreground&&i)&&n.push(t.template.getBottom(e)),this.template.applyDocumentLeftTemplate&&null!=t.template.getLeft(e)&&(!t.template.getLeft(e).foreground&&!i||t.template.getLeft(e).foreground&&i)&&n.push(t.template.getLeft(e)),this.template.applyDocumentRightTemplate&&null!=t.template.getRight(e)&&(!t.template.getRight(e).foreground&&!i||t.template.getRight(e).foreground&&i)&&n.push(t.template.getRight(e)),n},t.prototype.getSectionTemplates=function(t,e){var i,n=[];null!=this.template.getTop(t)&&((!(i=this.template.getTop(t)).foreground&&!e||i.foreground&&e)&&n.push(i));null!=this.template.getBottom(t)&&((!(i=this.template.getBottom(t)).foreground&&!e||i.foreground&&e)&&n.push(i));null!=this.template.getLeft(t)&&((!(i=this.template.getLeft(t)).foreground&&!e||i.foreground&&e)&&n.push(i));null!=this.template.getRight(t)&&((!(i=this.template.getRight(t)).foreground&&!e||i.foreground&&e)&&n.push(i));return n},t.prototype.add=function(t){if(void 0===t){var e=new iE;return this.add(e),e}var i=this.checkPresence(t);this.pdfPages.push(t),this.pagesReferences.add(i),t.setSection(this),t.resetProgress(),this.pageAddedMethod(t)},t.prototype.checkPresence=function(t){for(var e=new VC(t),i=!1,n=this.parent,r=0;r<n.section.length;r++){var o=n.section[r];i=i||o.contains(t)}return e},t.prototype.contains=function(t){return 0<=this.indexOf(t)},t.prototype.indexOf=function(t){for(var e=0;e<this.pdfPages.length;e++)if(this.pdfPages[e]===t)return this.pdfPages.indexOf(t);var i=new VC(t);return this.pagesReferences.indexOf(i)},t.prototype.pageAddedMethod=function(t){var e=new nE(t);this.onPageAdded(e),this.parent.document.pages.onPageAdded(e),this.pageCount.intValue=this.count},t.prototype.onPageAdded=function(t){},t.prototype.getActualBounds=function(t,e,i){if(t instanceof iE&&"boolean"==typeof e){var n=this.parent.document;return this.getActualBounds(n,t,e)}t=t,e=e,i=i;var r=new aP(0,0,0,0);r.height=i?this.pageSettings.size.height:this.pageSettings.getActualSize().height,r.width=i?this.pageSettings.size.width:this.pageSettings.getActualSize().width;var o=this.getLeftIndentWidth(t,e,i),s=this.getTopIndentHeight(t,e,i),a=this.getRightIndentWidth(t,e,i),l=this.getBottomIndentHeight(t,e,i);return r.x+=o,r.y+=s,r.width-=o+a,r.height-=s+l,r},t.prototype.getLeftIndentWidth=function(t,e,i){if(null==t)throw new Error("ArgumentNullException:document");if(null==e)throw new Error("ArgumentNullException:page");var n=i?this.pageSettings.margins.left:0,r=null!=this.template.getLeft(e)?this.template.getLeft(e).width:0,o=null!=t.template.getLeft(e)?t.template.getLeft(e).width:0;return n+=this.template.applyDocumentLeftTemplate?Math.max(r,o):r},t.prototype.getTopIndentHeight=function(t,e,i){if(null==t)throw new Error("ArgumentNullException:document");if(null==e)throw new Error("ArgumentNullException:page");var n=i?this.pageSettings.margins.top:0,r=null!=this.template.getTop(e)?this.template.getTop(e).height:0,o=null!=t.template.getTop(e)?t.template.getTop(e).height:0;return n+=this.template.applyDocumentTopTemplate?Math.max(r,o):r},t.prototype.getRightIndentWidth=function(t,e,i){if(null==t)throw new Error("ArgumentNullException:document");if(null==e)throw new Error("ArgumentNullException:page");var n=i?this.pageSettings.margins.right:0,r=null!=this.template.getRight(e)?this.template.getRight(e).width:0,o=null!=t.template.getRight(e)?t.template.getRight(e).width:0;return n+=this.template.applyDocumentRightTemplate?Math.max(r,o):r},t.prototype.getBottomIndentHeight=function(t,e,i){if(null==t)throw new Error("ArgumentNullException:document");if(null==e)throw new Error("ArgumentNullException:page");var n=i?this.pageSettings.margins.bottom:0,r=null!=this.template.getBottom(e)?this.template.getBottom(e).height:0,o=null!=t.template.getBottom(e)?t.template.getBottom(e).height:0;return n+=this.template.applyDocumentBottomTemplate?Math.max(r,o):r},t.prototype.remove=function(t){if(null==t)throw Error('ArgumentNullException("page")');var e=this.pdfPages.indexOf(t);this.pagesReferences.removeAt(e);for(var i=[],n=0;n<e;n++)i.push(this.pdfPages[n]);for(n=e+1;n<this.pdfPages.length;n++)i.push(this.pdfPages[n]);this.pdfPages=i},t.prototype.applyPageSettings=function(t,e,i){var n=new aP(i.origin,i.size);t.items.setValue(this.dictionaryProperties.mediaBox,iC.fromRectangle(n));var r;r=cE.rotateFactor*i.rotate;var o=new eC(r);t.items.setValue(this.dictionaryProperties.rotate,o)},t.prototype.beginSave=function(t,e){var i=e.document;this.applyPageSettings(this.section,i.pageSettings,t)},t.prototype.drawTemplates=function(t,e,i,n){var r=this.getDocumentTemplates(i,t,n),o=this.getSectionTemplates(t,n);this.drawTemplatesHelper(e,i,r),this.drawTemplatesHelper(e,i,o)},t.prototype.drawTemplatesHelper=function(t,e,i){if(null!=i&&i.length>0)for(var n=i.length,r=0;r<n;r++){i[r].draw(t,e)}},t}(),hE=function(){function t(t){this.pageOrientation=t.pageSettings.orientation,this.pageRotate=t.pageSettings.rotate,this.pageSize=t.pageSettings.size,this.pageOrigin=t.pageSettings.origin}return Object.defineProperty(t.prototype,"orientation",{get:function(){return this.pageOrientation},set:function(t){this.pageOrientation=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this.pageRotate},set:function(t){this.pageRotate=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.pageSize},set:function(t){this.pageSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"origin",{get:function(){return this.pageOrigin},set:function(t){this.pageOrigin=t},enumerable:!0,configurable:!0}),t}(),cE=function(){function t(t){this.sections=[],this.dictionaryProperties=new Xx,this.pdfDocument=t.clone(),this.initialize()}return Object.defineProperty(t.prototype,"section",{get:function(){return this.sections},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"document",{get:function(){return this.pdfDocument},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this.sections.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.pages},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this.sectionCount=new eC(0),this.sectionCollection=new iC,this.pages=new Yx,this.pages.beginSave=new Zx(this),this.pages.items.setValue(this.dictionaryProperties.type,new Gx("Pages")),this.pages.items.setValue(this.dictionaryProperties.kids,this.sectionCollection),this.pages.items.setValue(this.dictionaryProperties.count,this.sectionCount),this.pages.items.setValue(this.dictionaryProperties.resources,new Yx),this.setPageSettings(this.pages,this.pdfDocument.pageSettings)},t.prototype.pdfSectionCollection=function(t){if(t<0||t>=this.count)throw new Error("IndexOutOfRangeException()");return this.sections[t]},t.prototype.setPageSettings=function(t,e){var i=new aP(new oP,e.size);t.items.setValue(this.dictionaryProperties.mediaBox,iC.fromRectangle(i))},t.prototype.add=function(t){if(void 0===t){var e=new lE(this.pdfDocument);return this.add(e),e}var i=this.checkSection(t);return this.sections.push(t),t.parent=this,this.sectionCollection.add(i),this.sections.indexOf(t)},t.prototype.checkSection=function(t){var e=new VC(t);this.sectionCollection.contains(e);return e},t.prototype.countPages=function(){var t=0;return this.sections.forEach(function(e){return t+=e.count}),t},t.prototype.beginSave=function(){this.sectionCount.intValue=this.countPages()},t.rotateFactor=90,t}(),dE=function(){function t(t){this.pdfPageCollectionIndex=new Ux,this.document=t}return Object.defineProperty(t.prototype,"count",{get:function(){return this.countPages()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageCollectionIndex",{get:function(){return this.pdfPageCollectionIndex},enumerable:!0,configurable:!0}),t.prototype.add=function(t){if(void 0===t){var e=new iE;return this.add(e),e}this.getLastSection().add(t)},t.prototype.getLastSection=function(){var t=this.document.sections;return 0===t.section.length&&t.add(),t.section[t.section.length-1]},t.prototype.onPageAdded=function(t){},t.prototype.countPages=function(){for(var t=this.document.sections,e=0,i=0;i<t.section.length;i++)e+=t.section[i].count;return e},t.prototype.getPageByIndex=function(t){return this.getPage(t)},t.prototype.getPage=function(t){if(t<0||t>=this.count)throw Error('ArgumentOutOfRangeException("index", "Value can not be less 0")');for(var e=null,i=0,n=0,r=0,o=this.document.sections.count,s=0;s<o;s++){var a=this.document.sections.section[s];if(n=a.count,r=t-i,t>=i&&r<n){e=a.getPages()[r];break}i+=n}return e},t.prototype.indexOf=function(t){var e=-1;if(null==t)throw new Error("ArgumentNullException: page");for(var i=0,n=0,r=this.document.sections.count;n<r;n++){var o=this.document.sections.pdfSectionCollection(n);if((e=o.indexOf(t))>=0){e+=i;break}e=-1,i+=o.count}return e},t.prototype.remove=function(t){if(null==t)throw Error('ArgumentNullException("page")');for(var e=null,i=0,n=this.document.sections.count;i<n;i++)if((e=this.document.sections.pdfSectionCollection(i)).pages.contains(t)){e.pages.remove(t);break}return e},t}(),pE=function(){function t(){this.referenceObjects=[],this.pdfFontCollection=new Ux}return t.prototype.search=function(t){var e=null,i=this.getGroup(t);return null==i?i=this.createNewGroup():i.length>0&&(e=i[0]),i.push(t),e},t.prototype.createNewGroup=function(){var t=[];return this.referenceObjects.push(t),t},t.prototype.getGroup=function(t){var e=null;if(null!==t)for(var i=this.referenceObjects.length,n=0;n<i;n++){if(this.referenceObjects.length>0){var r=this.referenceObjects[n];if(r.length>0){var o=r[0];if(t.equalsTo(o)){e=r;break}}else this.removeGroup(r)}i=this.referenceObjects.length}return e},t.prototype.removeGroup=function(t){if(null!==t){var e=this.referenceObjects.indexOf(t);this.referenceObjects.slice(e,e+1)}},t.prototype.destroy=function(){this.pdfFontCollection=void 0,this.referenceObjects=void 0},t}(),uE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fE=function(t){function e(i){var n=t.call(this)||this;n.defaultMargin=40,n.streamWriter=null,n.document=n;var r=!1;void 0===i?(e.cacheCollection=new pE,r=!1):r=i;var o=new xP;n.setMainObjectCollection(o);var s=new MP;s.isMerging=r,s.document=n,n.setCrossTable(s);var a=new kP;return n.setCatalog(a),o.add(a),a.position=-1,n.sectionCollection=new cE(n),n.documentPageCollection=new dE(n),a.pages=n.sectionCollection,n}return uE(e,t),Object.defineProperty(e,"defaultFont",{get:function(){return null==this.defaultStandardFont&&(this.defaultStandardFont=new yE(qC.Helvetica,8)),this.defaultStandardFont},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sections",{get:function(){return this.sectionCollection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageSettings",{get:function(){return null==this.settings&&(this.settings=new NP(this.defaultMargin)),this.settings},set:function(t){this.settings=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pages",{get:function(){return this.documentPageCollection},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cache",{get:function(){return void 0===e.cacheCollection||null==e.cacheCollection?new pE:e.cacheCollection},set:function(t){this.cacheCollection=t},enumerable:!0,configurable:!0}),Object.defineProperty(e,"enableCache",{get:function(){return this.isCacheEnabled},set:function(t){this.isCacheEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorSpace",{get:function(){return this.pdfColorSpace===DC.Rgb||this.pdfColorSpace===DC.Cmyk||this.pdfColorSpace===DC.GrayScale?this.pdfColorSpace:DC.Rgb},set:function(t){t===DC.Rgb||t===DC.Cmyk||t===DC.GrayScale?this.pdfColorSpace=t:this.pdfColorSpace=DC.Rgb},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"template",{get:function(){return null==this.pageTemplate&&(this.pageTemplate=new oE),this.pageTemplate},set:function(t){this.pageTemplate=t},enumerable:!0,configurable:!0}),e.prototype.docSave=function(t,e,i){if(this.checkPagesPresence(),null===t)throw new Error("ArgumentNullException : stream");this.streamWriter=t;var n=new wP(t);if(n.document=this,"boolean"==typeof e&&void 0===i)return this.crossTable.save(n);this.crossTable.save(n,e)},e.prototype.checkPagesPresence=function(){0===this.pages.count&&this.pages.add()},e.prototype.destroy=function(){this.catalog=void 0,this.colorSpace=void 0,this.currentSavingObj=void 0,this.documentPageCollection=void 0,this.isStreamCopied=void 0,this.pageSettings=void 0,this.pageTemplate=void 0,this.pdfColorSpace=void 0,this.sectionCollection=void 0,e.cache.destroy(),this.crossTable.pdfObjects.destroy(),e.cache=void 0,this.streamWriter.destroy()},e.defaultStandardFont=null,e.isCacheEnabled=!0,e}(PP),gE=function(){function t(){}return t.getMetrics=function(t,e,i){var n=null;switch(t){case qC.Helvetica:n=this.getHelveticaMetrics(t,e,i);break;case qC.Courier:n=this.getCourierMetrics(t,e,i);break;case qC.TimesRoman:n=this.getTimesMetrics(t,e,i);break;case qC.Symbol:n=this.getSymbolMetrics(t,e,i);break;case qC.ZapfDingbats:n=this.getZapfDingbatsMetrics(t,e,i);break;default:n=this.getHelveticaMetrics(qC.Helvetica,e,i)}return n.name=t.toString(),n.subScriptSizeFactor=this.subSuperScriptFactor,n.superscriptSizeFactor=this.subSuperScriptFactor,n},t.getHelveticaMetrics=function(t,e,i){var n=new LO;return(e&GC.Bold)>0&&(e&GC.Italic)>0?(n.ascent=this.helveticaBoldItalicAscent,n.descent=this.helveticaBoldItalicDescent,n.postScriptName=this.helveticaBoldItalicName,n.size=i,n.widthTable=new TO(this.arialBoldWidth),n.height=n.ascent-n.descent):(e&GC.Bold)>0?(n.ascent=this.helveticaBoldAscent,n.descent=this.helveticaBoldDescent,n.postScriptName=this.helveticaBoldName,n.size=i,n.widthTable=new TO(this.arialBoldWidth),n.height=n.ascent-n.descent):(e&GC.Italic)>0?(n.ascent=this.helveticaItalicAscent,n.descent=this.helveticaItalicDescent,n.postScriptName=this.helveticaItalicName,n.size=i,n.widthTable=new TO(this.arialWidth),n.height=n.ascent-n.descent):(n.ascent=this.helveticaAscent,n.descent=this.helveticaDescent,n.postScriptName=this.helveticaName,n.size=i,n.widthTable=new TO(this.arialWidth),n.height=n.ascent-n.descent),n},t.getCourierMetrics=function(t,e,i){var n=new LO;return(e&GC.Bold)>0&&(e&GC.Italic)>0?(n.ascent=this.courierBoldItalicAscent,n.descent=this.courierBoldItalicDescent,n.postScriptName=this.courierBoldItalicName,n.size=i,n.widthTable=new TO(this.fixedWidth),n.height=n.ascent-n.descent):(e&GC.Bold)>0?(n.ascent=this.courierBoldAscent,n.descent=this.courierBoldDescent,n.postScriptName=this.courierBoldName,n.size=i,n.widthTable=new TO(this.fixedWidth),n.height=n.ascent-n.descent):(e&GC.Italic)>0?(n.ascent=this.courierItalicAscent,n.descent=this.courierItalicDescent,n.postScriptName=this.courierItalicName,n.size=i,n.widthTable=new TO(this.fixedWidth),n.height=n.ascent-n.descent):(n.ascent=this.courierAscent,n.descent=this.courierDescent,n.postScriptName=this.courierName,n.size=i,n.widthTable=new TO(this.fixedWidth),n.height=n.ascent-n.descent),n},t.getTimesMetrics=function(t,e,i){var n=new LO;return(e&GC.Bold)>0&&(e&GC.Italic)>0?(n.ascent=this.timesBoldItalicAscent,n.descent=this.timesBoldItalicDescent,n.postScriptName=this.timesBoldItalicName,n.size=i,n.widthTable=new TO(this.timesRomanBoldItalicWidths),n.height=n.ascent-n.descent):(e&GC.Bold)>0?(n.ascent=this.timesBoldAscent,n.descent=this.timesBoldDescent,n.postScriptName=this.timesBoldName,n.size=i,n.widthTable=new TO(this.timesRomanBoldWidth),n.height=n.ascent-n.descent):(e&GC.Italic)>0?(n.ascent=this.timesItalicAscent,n.descent=this.timesItalicDescent,n.postScriptName=this.timesItalicName,n.size=i,n.widthTable=new TO(this.timesRomanItalicWidth),n.height=n.ascent-n.descent):(n.ascent=this.timesAscent,n.descent=this.timesDescent,n.postScriptName=this.timesName,n.size=i,n.widthTable=new TO(this.timesRomanWidth),n.height=n.ascent-n.descent),n},t.getSymbolMetrics=function(t,e,i){var n=new LO;return n.ascent=this.symbolAscent,n.descent=this.symbolDescent,n.postScriptName=this.symbolName,n.size=i,n.widthTable=new TO(this.symbolWidth),n.height=n.ascent-n.descent,n},t.getZapfDingbatsMetrics=function(t,e,i){var n=new LO;return n.ascent=this.zapfDingbatsAscent,n.descent=this.zapfDingbatsDescent,n.postScriptName=this.zapfDingbatsName,n.size=i,n.widthTable=new TO(this.zapfDingbatsWidth),n.height=n.ascent-n.descent,n},t.subSuperScriptFactor=1.52,t.helveticaAscent=931,t.helveticaDescent=-225,t.helveticaName="Helvetica",t.helveticaBoldAscent=962,t.helveticaBoldDescent=-228,t.helveticaBoldName="Helvetica-Bold",t.helveticaItalicAscent=931,t.helveticaItalicDescent=-225,t.helveticaItalicName="Helvetica-Oblique",t.helveticaBoldItalicAscent=962,t.helveticaBoldItalicDescent=-228,t.helveticaBoldItalicName="Helvetica-BoldOblique",t.courierAscent=805,t.courierDescent=-250,t.courierName="Courier",t.courierBoldAscent=801,t.courierBoldDescent=-250,t.courierBoldName="Courier-Bold",t.courierItalicAscent=805,t.courierItalicDescent=-250,t.courierItalicName="Courier-Oblique",t.courierBoldItalicAscent=801,t.courierBoldItalicDescent=-250,t.courierBoldItalicName="Courier-BoldOblique",t.timesAscent=898,t.timesDescent=-218,t.timesName="Times-Roman",t.timesBoldAscent=935,t.timesBoldDescent=-218,t.timesBoldName="Times-Bold",t.timesItalicAscent=883,t.timesItalicDescent=-217,t.timesItalicName="Times-Italic",t.timesBoldItalicAscent=921,t.timesBoldItalicDescent=-218,t.timesBoldItalicName="Times-BoldItalic",t.symbolAscent=1010,t.symbolDescent=-293,t.symbolName="Symbol",t.zapfDingbatsAscent=820,t.zapfDingbatsDescent=-143,t.zapfDingbatsName="ZapfDingbats",t.arialWidth=[278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,0,556,0,222,556,333,1e3,556,556,333,1e3,667,333,1e3,0,611,0,0,222,222,333,333,350,556,1e3,333,1e3,500,333,944,0,500,667,0,333,556,556,556,556,260,556,333,737,370,556,584,0,737,333,400,584,333,333,333,556,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,584,611,556,556,556,556,500,556,500],t.arialBoldWidth=[278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,0,556,0,278,556,500,1e3,556,556,333,1e3,667,333,1e3,0,611,0,0,278,278,500,500,350,556,1e3,333,1e3,556,333,944,0,500,667,0,333,556,556,556,556,280,556,333,737,370,556,584,0,737,333,400,584,333,333,333,611,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,584,611,611,611,611,611,556,611,556],t.fixedWidth=[600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600],t.timesRomanWidth=[250,333,408,500,500,833,778,180,333,333,500,564,250,333,250,278,500,500,500,500,500,500,500,500,500,500,278,278,564,564,564,444,921,722,667,667,722,611,556,722,722,333,389,722,611,889,722,722,556,722,667,556,611,722,722,944,722,722,611,333,278,333,469,500,333,444,500,444,500,444,333,500,500,278,278,500,278,778,500,500,500,500,333,389,278,500,500,722,500,500,444,480,200,480,541,0,500,0,333,500,444,1e3,500,500,333,1e3,556,333,889,0,611,0,0,333,333,444,444,350,500,1e3,333,980,389,333,722,0,444,722,0,333,500,500,500,500,200,500,333,760,276,500,564,0,760,333,400,564,300,300,333,500,453,250,333,300,310,500,750,750,750,444,722,722,722,722,722,722,889,667,611,611,611,611,333,333,333,333,722,722,722,722,722,722,722,564,722,722,722,722,722,722,556,500,444,444,444,444,444,444,667,444,444,444,444,444,278,278,278,278,500,500,500,500,500,500,500,564,500,500,500,500,500,500,500,500],t.timesRomanBoldWidth=[250,333,555,500,500,1e3,833,278,333,333,500,570,250,333,250,278,500,500,500,500,500,500,500,500,500,500,333,333,570,570,570,500,930,722,667,722,722,667,611,778,778,389,500,778,667,944,722,778,611,778,722,556,667,722,722,1e3,722,722,667,333,278,333,581,500,333,500,556,444,556,444,333,500,556,278,333,556,278,833,556,500,556,556,444,389,333,556,500,722,500,500,444,394,220,394,520,0,500,0,333,500,500,1e3,500,500,333,1e3,556,333,1e3,0,667,0,0,333,333,500,500,350,500,1e3,333,1e3,389,333,722,0,444,722,0,333,500,500,500,500,220,500,333,747,300,500,570,0,747,333,400,570,300,300,333,556,540,250,333,300,330,500,750,750,750,500,722,722,722,722,722,722,1e3,722,667,667,667,667,389,389,389,389,722,722,778,778,778,778,778,570,778,722,722,722,722,722,611,556,500,500,500,500,500,500,722,444,444,444,444,444,278,278,278,278,500,556,500,500,500,500,500,570,500,556,556,556,556,500,556,500],t.timesRomanItalicWidth=[250,333,420,500,500,833,778,214,333,333,500,675,250,333,250,278,500,500,500,500,500,500,500,500,500,500,333,333,675,675,675,500,920,611,611,667,722,611,611,722,722,333,444,667,556,833,667,722,611,722,611,500,556,722,611,833,611,556,556,389,278,389,422,500,333,500,500,444,500,444,278,500,500,278,278,444,278,722,500,500,500,500,389,389,278,500,444,667,444,444,389,400,275,400,541,0,500,0,333,500,556,889,500,500,333,1e3,500,333,944,0,556,0,0,333,333,556,556,350,500,889,333,980,389,333,667,0,389,556,0,389,500,500,500,500,275,500,333,760,276,500,675,0,760,333,400,675,300,300,333,500,523,250,333,300,310,500,750,750,750,500,611,611,611,611,611,611,889,667,611,611,611,611,333,333,333,333,722,667,722,722,722,722,722,675,722,722,722,722,722,556,611,500,500,500,500,500,500,500,667,444,444,444,444,444,278,278,278,278,500,500,500,500,500,500,500,675,500,500,500,500,500,444,500,444],t.timesRomanBoldItalicWidths=[250,389,555,500,500,833,778,278,333,333,500,570,250,333,250,278,500,500,500,500,500,500,500,500,500,500,333,333,570,570,570,500,832,667,667,667,722,667,667,722,778,389,500,667,611,889,722,722,611,722,667,556,611,722,667,889,667,611,611,333,278,333,570,500,333,500,500,444,500,444,333,500,556,278,278,500,278,778,556,500,500,500,389,389,278,556,444,667,500,444,389,348,220,348,570,0,500,0,333,500,500,1e3,500,500,333,1e3,556,333,944,0,611,0,0,333,333,500,500,350,500,1e3,333,1e3,389,333,722,0,389,611,0,389,500,500,500,500,220,500,333,747,266,500,606,0,747,333,400,570,300,300,333,576,500,250,333,300,300,500,750,750,750,500,667,667,667,667,667,667,944,667,667,667,667,667,389,389,389,389,722,722,722,722,722,722,722,570,722,722,722,722,722,611,611,500,500,500,500,500,500,500,722,444,444,444,444,444,278,278,278,278,500,556,500,500,500,500,500,570,500,556,556,556,556,444,500,444],t.symbolWidth=[250,333,713,500,549,833,778,439,333,333,500,549,250,549,250,278,500,500,500,500,500,500,500,500,500,500,278,278,549,549,549,444,549,722,667,722,612,611,763,603,722,333,631,722,686,889,722,722,768,741,556,592,611,690,439,768,645,795,611,333,863,333,658,500,500,631,549,549,494,439,521,411,603,329,603,549,549,576,521,549,549,521,549,603,439,576,713,686,493,686,494,480,200,480,549,750,620,247,549,167,713,500,753,753,753,753,1042,987,603,987,603,400,549,411,549,549,713,494,460,549,549,549,549,1e3,603,1e3,658,823,686,795,987,768,768,823,768,768,713,713,713,713,713,713,713,768,713,790,790,890,823,549,250,713,603,603,1042,987,603,987,603,494,329,790,790,786,713,384,384,384,384,384,384,494,494,494,494,329,274,686,686,686,384,384,384,384,384,384,494,494,494,-1],t.zapfDingbatsWidth=[278,974,961,974,980,719,789,790,791,690,960,939,549,855,911,933,911,945,974,755,846,762,761,571,677,763,760,759,754,494,552,537,577,692,786,788,788,790,793,794,816,823,789,841,823,833,816,831,923,744,723,749,790,792,695,776,768,792,759,707,708,682,701,826,815,789,789,707,687,696,689,786,787,713,791,785,791,873,761,762,762,759,759,892,892,788,784,438,138,277,415,392,392,668,668,390,390,317,317,276,276,509,509,410,410,234,234,334,334,732,544,544,910,667,760,760,776,595,694,626,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,894,838,1016,458,748,924,748,918,927,928,928,834,873,828,924,924,917,930,931,463,883,836,836,867,867,696,696,874,874,760,946,771,865,771,888,967,888,831,873,927,970,918],t}(),mE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),yE=function(t){function e(i,n,r){var o=t.call(this,n,void 0===r?i instanceof e?i.style:GC.Regular:r)||this;return o.dictionaryProperties=new Xx,o.encodings=["Unknown","StandardEncoding","MacRomanEncoding","MacExpertEncoding","WinAnsiEncoding","PDFDocEncoding","IdentityH"],o.pdfFontFamily=void 0===i?qC.Helvetica:i instanceof e?i.fontFamily:i,o.checkStyle(),o.initializeInternals(),o}return mE(e,t),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this.pdfFontFamily},enumerable:!0,configurable:!0}),e.prototype.checkStyle=function(){if(this.fontFamily===qC.Symbol||this.fontFamily===qC.ZapfDingbats){var t=this.style;t&=~(GC.Bold|GC.Italic),this.setStyle(t)}},e.prototype.getLineWidth=function(t,i){if(null==t)throw new Error("ArgumentNullException:line");for(var n=0,r=(this.name,0),o=(t=e.convert(t)).length;r<o;r++){var s=t[r];n+=this.getCharWidthInternal(s,i)}var a=this.metrics.getSize(i);return n*=bP.charSizeMultiplier*a,n=this.applyFormatSettings(t,i,n)},e.prototype.equalsToFont=function(t){var e=!1,i=t;if(null!=i){var n=this.fontFamily===i.fontFamily,r=~(GC.Underline|GC.Strikeout),o=(this.style&r)==(i.style&r);e=n&&o}return e},e.prototype.initializeInternals=function(){fE.cache.search(this);var t,e=gE.getMetrics(this.pdfFontFamily,this.style,this.size);this.metrics=e,t=this.createInternals(),this.setInternals(t)},e.prototype.createInternals=function(){var t=new Yx;if(t.items.setValue(this.dictionaryProperties.type,new Gx(this.dictionaryProperties.font)),t.items.setValue(this.dictionaryProperties.subtype,new Gx(this.dictionaryProperties.type1)),t.items.setValue(this.dictionaryProperties.baseFont,new Gx(this.metrics.postScriptName)),this.fontFamily!==qC.Symbol&&this.fontFamily!==qC.ZapfDingbats){var e=this.encodings[KC.WinAnsiEncoding];t.items.setValue(this.dictionaryProperties.encoding,new Gx(e))}return t},e.prototype.getCharWidthInternal=function(t,i){var n=0;return n=t.charCodeAt(0),"0"!==this.name&&"1"!==this.name&&"2"!==this.name&&"3"!==this.name&&"4"!==this.name||(n-=e.charOffset),n=n>=0&&128!==n?n:0,this.metrics.widthTable.items(n)},e.convert=function(t){return t},e.charOffset=32,e}(bP),vE=function(){function t(t){this.dictionaryProperties=new Xx,this.pdfColor=new rP(255,255,255),this.rectangle=new aP(0,0,0,0),this.pdfPage=null,this.textBrush=new dP(new rP(0,0,0)),this.textFont=new yE(qC.TimesRoman,10),this.format=new uP(IC.Left),this.content="",this.pdfDictionary=new Yx,this.internalColor=new rP,this.darkness=1,void 0===t?this.initialize():(this.initialize(),this.bounds=t)}return Object.defineProperty(t.prototype,"color",{get:function(){return this.pdfColor},set:function(t){this.pdfColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerColor",{get:function(){return this.internalColor},set:function(t){this.internalColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bounds",{get:function(){return this.rectangle},set:function(t){this.rectangle=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"page",{get:function(){return this.pdfPage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this.textFont},set:function(t){this.textFont=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stringFormat",{get:function(){return this.format},set:function(t){this.format=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"brush",{get:function(){return this.textBrush},set:function(t){this.textBrush=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.content},set:function(t){this.content=t,this.dictionary.items.setValue(this.dictionaryProperties.contents,new HC(this.content))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dictionary",{get:function(){return this.pdfDictionary},set:function(t){this.pdfDictionary=t},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this.pdfDictionary.annotationBeginSave=new Qx(this),this.pdfDictionary.items.setValue(this.dictionaryProperties.type,new Gx(this.dictionaryProperties.annot))},t.prototype.setPage=function(t){this.pdfPage=t,this.pdfDictionary.items.setValue(this.dictionaryProperties.p,new VC(this.pdfPage))},t.prototype.beginSave=function(){this.save()},t.prototype.save=function(){var t=new aP(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height),e=this.pdfPage.section,i=t.height,n=e.pointToNativePdf(this.page,new oP(t.x,t.y));t.x=n.x,t.width=n.x+t.width,t.y=n.y-this.page.document.pageSettings.margins.top,t.height=t.y-i,this.pdfDictionary.items.setValue(this.dictionaryProperties.rect,iC.fromRectangle(t)),this.dictionary.items.setValue(this.dictionaryProperties.ca,new eC(this.darkness))},Object.defineProperty(t.prototype,"element",{get:function(){return this.pdfDictionary},enumerable:!0,configurable:!0}),t}(),bE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wE=function(t){function e(e){return t.call(this,e)||this}return bE(e,t),e.prototype.initialize=function(){t.prototype.initialize.call(this),this.dictionary.items.setValue(this.dictionaryProperties.subtype,new Gx(this.dictionaryProperties.link))},e}(vE),SE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xE=function(t){function e(e){var i=t.call(this,e)||this;return i.pdfAction=null,i}return SE(e,t),e.prototype.getSetAction=function(t){if(void 0===t)return this.pdfAction;this.pdfAction=t},e}(wE),CE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),PE=function(t){function e(e,i){var n=t.call(this,e)||this;return n.pdfDestination=null,void 0!==i&&(n.destination=i),n}return CE(e,t),Object.defineProperty(e.prototype,"destination",{get:function(){return this.pdfDestination},set:function(t){this.pdfDestination=t},enumerable:!0,configurable:!0}),e.prototype.save=function(){t.prototype.save.call(this),null!=this.pdfDestination&&this.dictionary.items.setValue(this.dictionaryProperties.dest,this.pdfDestination.element)},e.prototype.clone=function(){var t=new e(this.bounds,this.destination);return t.color=this.color,t.brush=this.brush,t.destination=this.destination,t.font=this.font,t},e}(wE),OE=function(){function t(t){this.layoutElement=t}return Object.defineProperty(t.prototype,"elements",{get:function(){return this.layoutElement},enumerable:!0,configurable:!0}),t.prototype.getElement=function(){return this.layoutElement},t.prototype.layout=function(t){return this.layoutInternal(t)},t.prototype.Layouter=function(t){return this.layoutInternal(t)},t.prototype.getNextPage=function(t){return t.section.add()},t.prototype.getPaginateBounds=function(t){if(null==t)throw new Error("ArgumentNullException : param");return t.format.usePaginateBounds?t.format.paginateBounds:new aP(t.bounds.x,0,t.bounds.width,t.bounds.height)},t}(),EE=function(){function t(t){void 0===t||(this.break=t.break,this.layout=t.layout,this.paginateBounds=t.paginateBounds,this.boundsSet=t.usePaginateBounds)}return Object.defineProperty(t.prototype,"layout",{get:function(){return this.layoutType},set:function(t){this.layoutType=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"break",{get:function(){return this.breakType},set:function(t){this.breakType=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paginateBounds",{get:function(){return void 0===this.layoutPaginateBounds&&null==this.layoutPaginateBounds&&(this.layoutPaginateBounds=new aP(0,0,0,0)),this.layoutPaginateBounds},set:function(t){this.layoutPaginateBounds=t,this.boundsSet=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"usePaginateBounds",{get:function(){return this.boundsSet},enumerable:!0,configurable:!0}),t}(),LE=function(){function t(){}return Object.defineProperty(t.prototype,"page",{get:function(){return this.pdfPage},set:function(t){this.pdfPage=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bounds",{get:function(){return new aP(this.layoutBounds.x,this.layoutBounds.y,this.layoutBounds.width,this.layoutBounds.height)},set:function(t){this.layoutBounds=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this.layoutFormat},set:function(t){this.layoutFormat=t},enumerable:!0,configurable:!0}),t}(),IE=function(){function t(t,e){this.pdfPage=t,this.layoutBounds=e}return Object.defineProperty(t.prototype,"page",{get:function(){return this.pdfPage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bounds",{get:function(){return this.layoutBounds},enumerable:!0,configurable:!0}),t}(),TE=function(){function t(){var t=new _P(new rP(0,0,0));t.dashStyle=kC.Solid;var e=new _P(new rP(0,0,0));e.dashStyle=kC.Solid;var i=new _P(new rP(0,0,0));i.dashStyle=kC.Solid;var n=new _P(new rP(0,0,0));n.dashStyle=kC.Solid,this.leftPen=t,this.rightPen=e,this.topPen=i,this.bottomPen=n}return Object.defineProperty(t.prototype,"left",{get:function(){return this.leftPen},set:function(t){this.leftPen=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.rightPen},set:function(t){this.rightPen=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.topPen},set:function(t){this.topPen=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.bottomPen},set:function(t){this.bottomPen=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"all",{set:function(t){this.leftPen=this.rightPen=this.topPen=this.bottomPen=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAll",{get:function(){return this.leftPen===this.rightPen&&this.leftPen===this.topPen&&this.leftPen===this.bottomPen},enumerable:!0,configurable:!0}),Object.defineProperty(t,"default",{get:function(){return new t},enumerable:!0,configurable:!0}),t}(),AE=function(){function t(t,e,i,n){this.hasLeftPad=!1,this.hasRightPad=!1,this.hasTopPad=!1,this.hasBottomPad=!1,void 0===t?(this.leftPad=this.rightPad=5.76,this.bottomPad=this.topPad=.5):(this.leftPad=t,this.rightPad=e,this.topPad=i,this.bottomPad=n,this.hasLeftPad=!0,this.hasRightPad=!0,this.hasTopPad=!0,this.hasBottomPad=!0)}return Object.defineProperty(t.prototype,"left",{get:function(){return this.leftPad},set:function(t){this.leftPad=t,this.hasLeftPad=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.rightPad},set:function(t){this.rightPad=t,this.hasRightPad=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.topPad},set:function(t){this.topPad=t,this.hasTopPad=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.bottomPad},set:function(t){this.bottomPad=t,this.hasBottomPad=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"all",{set:function(t){this.leftPad=this.rightPad=this.topPad=this.bottomPad=t,this.hasLeftPad=!0,this.hasRightPad=!0,this.hasTopPad=!0,this.hasBottomPad=!0},enumerable:!0,configurable:!0}),t}(),BE=function(){function t(){}return Object.defineProperty(t.prototype,"raiseBeginPageLayout",{get:function(){return void 0!==this.beginPageLayout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"raiseEndPageLayout",{get:function(){return void 0!==this.endPageLayout},enumerable:!0,configurable:!0}),t.prototype.onBeginPageLayout=function(t){this.beginPageLayout&&this.beginPageLayout(this,t)},t.prototype.onEndPageLayout=function(t){this.endPageLayout&&this.endPageLayout(this,t)},t.prototype.drawHelper=function(t,e,i,n){if(e instanceof oP&&void 0===e.width&&void 0===i)return this.drawHelper(t,e.x,e.y);if("number"==typeof e&&"number"==typeof i&&void 0===n)return this.drawHelper(t,e,i,null);if(e instanceof aP&&void 0!==e.width&&void 0===i)return this.drawHelper(t,e,null);if(e instanceof oP&&void 0===e.width&&i instanceof EE)return this.drawHelper(t,e.x,e.y,i);if("number"==typeof e&&"number"==typeof i&&(n instanceof EE||null==n)){var r=t.graphics.clientSize.width-e,o=new aP(e,i,r,0);return this.drawHelper(t,o,n)}if(e instanceof aP&&void 0!==e.width&&"boolean"==typeof i)return this.bEmbedFonts=i,this.drawHelper(t,e,null);var s=new LE,a=e,l=i;if(s.page=t,s.bounds=a,null!=s){var h=s.bounds.x,c=s.bounds.y;0===s.bounds.x&&(h=TE.default.right.width/2),0===s.bounds.y&&(c=TE.default.top.width/2);var d=new aP(h,c,s.bounds.width,s.bounds.height);s.bounds=d}return s.format=null!=l?l:new EE,this.layout(s)},t}(),kE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ME=function(t){function e(e){return t.call(this,e)||this}return kE(e,t),Object.defineProperty(e.prototype,"element",{get:function(){return t.prototype.getElement.call(this)},enumerable:!0,configurable:!0}),e.prototype.layoutInternal=function(t){this.format=null!==this.element.stringFormat&&void 0!==this.element.stringFormat?this.element.stringFormat:null;var e=t.page,i=t.bounds,n=this.element.value,r=null,o=new DE;for(o.page=e,o.remainder=n;;){o=this.layoutOnPage(n,e,i,t),r=this.getLayoutResult(o);break}return r},e.prototype.getLayoutResult=function(t){return new RE(t.page,t.bounds,t.remainder,t.lastLineBounds)},e.prototype.layoutOnPage=function(t,e,i,n){var r=new DE;r.remainder=t,r.page=e,i=this.checkCorrectBounds(e,i);var o=(new gP).layout(t,this.element.font,this.format,i,e.getClientSize().height,!1,new sP(0,0)),s=null==o.remainder,a=(n.format.break===tO.FitElement||o.empty,e.graphics),l=this.element.getBrush();this.element instanceof VE&&(l.color=new rP(0,0,255)),a.drawStringLayoutResult(o,this.element.font,this.element.pen,l,i,this.format);o.lines[o.lineCount-1];return r.lastLineBounds=a.getLineBounds(o.lineCount-1,o,this.element.font,i,this.format),r.bounds=this.getTextPageBounds(e,i,o),r.remainder=o.remainder,r.end=s,r},e.prototype.checkCorrectBounds=function(t,e){var i=t.graphics.clientSize;return e.height=e.height>0?e.height:i.height-e.y,e},e.prototype.getTextPageBounds=function(t,e,i){var n=i.actualSize,r=e.x,o=e.y,s=e.width>0?e.width:n.width,a=n.height;r=t.graphics.checkCorrectLayoutRectangle(n,e.x,e.y,this.format).x;var l=t.graphics.getTextVerticalAlignShift(n.height,e.height,this.format);return new aP(r,o+=l,s,a)},e}(OE),DE=function(){return function(){}}(),RE=function(t){function e(e,i,n,r){var o=t.call(this,e,i)||this;return o.remainderText=n,o.lastLineTextBounds=r,o}return kE(e,t),Object.defineProperty(e.prototype,"remainder",{get:function(){return this.remainderText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastLineBounds",{get:function(){return this.lastLineTextBounds},enumerable:!0,configurable:!0}),e}(IE),zE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),jE=function(t){function e(e,i,n,r,o){var s=t.call(this)||this;return s.content="",s.elementValue="",s.hasPointOverload=!1,s.isPdfTextElement=!1,void 0===e||("string"==typeof e&&void 0===i?(s.content=e,s.elementValue=e):"string"==typeof e&&i instanceof bP&&void 0===n?(s.content=e,s.elementValue=e,s.pdfFont=i):"string"==typeof e&&i instanceof bP&&n instanceof _P&&void 0===r?(s.content=e,s.elementValue=e,s.pdfFont=i,s.pdfPen=n):"string"==typeof e&&i instanceof bP&&n instanceof hP&&void 0===r?(s.content=e,s.elementValue=e,s.pdfFont=i,s.pdfBrush=n):(s.content=e,s.elementValue=e,s.pdfFont=i,s.pdfPen=n,s.pdfBrush=r,s.format=o)),s}return zE(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this.content},set:function(t){this.elementValue=t,this.content=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.elementValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pen",{get:function(){return this.pdfPen},set:function(t){this.pdfPen=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"brush",{get:function(){return this.pdfBrush},set:function(t){this.pdfBrush=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this.pdfFont},set:function(t){this.pdfFont=t,this.pdfFont instanceof yE&&null!=this.content?this.elementValue=yE.convert(this.content):this.elementValue=this.content},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stringFormat",{get:function(){return this.format},set:function(t){this.format=t},enumerable:!0,configurable:!0}),e.prototype.getBrush=function(){return null==this.pdfBrush||void 0===this.pdfBrush?new dP(new rP(0,0,0)):this.pdfBrush},e.prototype.layout=function(t){return new ME(this).layout(t)},e.prototype.drawText=function(t,e,i,n){if(e instanceof oP&&void 0===e.width&&void 0===i)return this.hasPointOverload=!0,this.drawText(t,e.x,e.y);if("number"==typeof e&&"number"==typeof i&&void 0===n)return this.hasPointOverload=!0,this.drawText(t,e,i,null);if(e instanceof aP&&void 0!==e.width&&void 0===i)return this.drawText(t,e,null);if(e instanceof oP&&void 0===e.width&&i instanceof EE)return this.hasPointOverload=!0,this.drawText(t,e.x,e.y,i);if("number"==typeof e&&"number"==typeof i&&(n instanceof EE||null==n)){this.hasPointOverload=!0;var r=t.graphics.clientSize.width-e,o=new aP(e,i,r,0);return this.drawText(t,o,n)}if(e instanceof aP&&void 0!==e.width&&"boolean"==typeof i)return this.drawText(t,e,null);var s=new gP;if(this.hasPointOverload){var a=s.layout(this.value,this.font,this.stringFormat,new sP(t.graphics.clientSize.width-e.x,0),!0,t.graphics.clientSize),l=void 0,h=e,c=i;(m=new LE).page=t;if(m.bounds=h,m.format=null!=c?c:new EE,a.lines.length>1){if(this.text=a.layoutLines[0].text,m.bounds.y<=m.page.graphics.clientSize.height){var d=new oP(m.bounds.x,m.bounds.y);l=this.layout(m);for(var p=new aP(0,l.bounds.y+a.lineHeight,t.graphics.clientSize.width,a.lineHeight),u=1;u<a.lines.length;u++)if(m.page=l.page,m.bounds=new aP(new oP(p.x,p.y),new sP(p.width,p.height)),this.text=a.layoutLines[u].text,p.y+a.lineHeight>l.page.graphics.clientSize.height&&(!0,m.page=m.page.graphics.getNextPage(),p=d.y>l.page.graphics.clientSize.height-l.bounds.height?new aP(0,l.bounds.height,l.page.graphics.clientSize.width,a.lineHeight):new aP(0,0,l.page.graphics.clientSize.width,a.lineHeight),m.bounds=p),l=this.layout(m),u!==a.lines.length-1)p=new aP(0,l.bounds.y+a.lineHeight,l.page.graphics.clientSize.width,a.lineHeight);else{var f=this.font.measureString(this.text,this.format).width;l=this.calculateResultBounds(l,f,l.page.graphics.clientSize.width,0)}}return l}var g=this.font.measureString(this.text,this.format);return m.bounds.y<=m.page.graphics.clientSize.height&&(l=this.layout(m),l=this.calculateResultBounds(l,g.width,l.page.graphics.clientSize.width,0)),l}l=s.layout(this.value,this.font,this.stringFormat,new sP(e.width,0),!1,t.graphics.clientSize);var m,y=void 0;h=e,c=i;if((m=new LE).page=t,m.bounds=h,m.format=null!=c?c:new EE,l.lines.length>1){if(this.text=l.layoutLines[0].text,m.bounds.y<=m.page.graphics.clientSize.height){d=new oP(m.bounds.x,m.bounds.y);y=this.layout(m);for(p=new aP(h.x,y.bounds.y+l.lineHeight,h.width,l.lineHeight),u=1;u<l.lines.length;u++)if(m.page=y.page,m.bounds=new aP(p.x,p.y,p.width,p.height),this.text=l.layoutLines[u].text,p.y+l.lineHeight>y.page.graphics.clientSize.height&&(!0,m.page=m.page.graphics.getNextPage(),p=d.y>y.page.graphics.clientSize.height-y.bounds.height?new aP(h.x,l.lineHeight,h.width,l.lineHeight):new aP(h.x,0,h.width,l.lineHeight),m.bounds=p),y=this.layout(m),u!==l.lines.length-1)p=new aP(h.x,y.bounds.y+l.lineHeight,h.width,l.lineHeight);else{f=this.font.measureString(this.text,this.format).width;y=this.calculateResultBounds(y,f,h.width,h.x)}}return y}g=this.font.measureString(this.text,this.format);return m.bounds.y<=m.page.graphics.clientSize.height&&(y=this.layout(m),y=this.calculateResultBounds(y,g.width,h.width,h.x)),y},e.prototype.calculateResultBounds=function(t,e,i,n){return null!=this.stringFormat&&void 0!==this.stringFormat&&this.stringFormat.alignment===IC.Center?(t.bounds.x=n+(i-e)/2,t.bounds.width=e):null!=this.stringFormat&&void 0!==this.stringFormat&&this.stringFormat.alignment===IC.Right?(t.bounds.x=n+(i-e),t.bounds.width=e):null!=this.stringFormat&&void 0!==this.stringFormat&&this.stringFormat.alignment===IC.Justify?(t.bounds.x=n,t.bounds.width=i):(t.bounds.width=n,t.bounds.width=e),t},e}(BE),NE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),HE=function(t){function e(e,i){var n=t.call(this,e)||this;return void 0!==i&&(n.uri=i),n}return NE(e,t),Object.defineProperty(e.prototype,"uriAction",{get:function(){return void 0===this.pdfUriAction&&(this.pdfUriAction=new UC),this.pdfUriAction},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uri",{get:function(){return this.uriAction.uri},set:function(t){this.uriAction.uri!==t&&(this.uriAction.uri=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"action",{get:function(){return this.getSetAction()},set:function(t){this.getSetAction(t),this.uriAction.next=t},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){t.prototype.initialize.call(this),this.dictionary.items.setValue(this.dictionaryProperties.subtype,new Gx(this.dictionaryProperties.link));this.uriAction.element;this.dictionary.items.setValue(this.dictionaryProperties.a,this.uriAction.element)},e}(xE),_E=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),VE=function(t){function e(){var e=t.call(this)||this;e.uniformResourceLocator="",e.uriAnnotation=null,e.recalculateBounds=!1,e.defaultBorder=new iC;for(var i=0;i<3;i++)e.defaultBorder.add(new eC(0));return e}return _E(e,t),Object.defineProperty(e.prototype,"url",{get:function(){return this.uniformResourceLocator},set:function(t){if(0===t.length)throw new Error("ArgumentException : Url - string can not be empty");this.uniformResourceLocator=t},enumerable:!0,configurable:!0}),e.prototype.draw=function(t,e){if(t instanceof iE){var i=new gP,n=this.font.style;if(e instanceof oP){if(this.recalculateBounds=!0,this.font.style=GC.Underline,1===(a=i.layout(this.value,this.font,this.stringFormat,new sP(t.graphics.clientSize.width-e.x,0),!0,t.graphics.clientSize)).lines.length){var r=this.font.measureString(this.value),o=new aP(e,r);o=this.calculateBounds(o,r.width,t.graphics.clientSize.width,e.x),this.uriAnnotation=new HE(o,this.url),this.uriAnnotation.dictionary.items.setValue("Border",this.defaultBorder),t.annotations.add(this.uriAnnotation);var s=this.drawText(t,e);return this.font.style=n,s}s=this.drawMultipleLineWithPoint(a,t,e);return this.font.style=n,s}var a=i.layout(this.value,this.font,this.stringFormat,new sP(e.width,0),!1,new sP(0,0));if(this.font.style=GC.Underline,1===a.lines.length){r=this.font.measureString(this.value),o=new aP(new oP(e.x,e.y),r);o=this.calculateBounds(o,r.width,e.width,e.x),this.uriAnnotation=new HE(o,this.url),this.uriAnnotation.dictionary.items.setValue("Border",this.defaultBorder),t.annotations.add(this.uriAnnotation);var l=this.drawText(t,e);return this.font.style=n,l}l=this.drawMultipleLineWithBounds(a,t,e);return this.font.style=n,l}var h=new iE;return h=t.page,this.draw(h,e)},e.prototype.drawMultipleLineWithPoint=function(t,e,i){for(var n,r=0;r<t.layoutLines.length;r++){var o=this.font.measureString(t.lines[r].text),s=new aP(i,o);if(0!==r&&(s.x=0),this.text=t.lines[r].text,s.y+o.height>e.graphics.clientSize.height){if(0===r)break;e=e.graphics.getNextPage(),s=new aP(0,0,e.graphics.clientSize.width,o.height),i.y=0}s=this.calculateBounds(s,o.width,e.graphics.clientSize.width,s.x),this.uriAnnotation=new HE(s,this.url),this.uriAnnotation.dictionary.items.setValue("Border",this.defaultBorder),e.annotations.add(this.uriAnnotation),n=0!==r?this.drawText(e,new oP(0,s.y)):this.drawText(e,s.x,s.y),i.y+=o.height}return n},e.prototype.drawMultipleLineWithBounds=function(t,e,i){for(var n,r=0;r<t.layoutLines.length;r++){var o=this.font.measureString(t.lines[r].text),s=new aP(new oP(i.x,i.y),o);if(s=this.calculateBounds(s,o.width,i.width,i.x),this.text=t.lines[r].text,i.y+o.height>e.graphics.clientSize.height){if(0===r)break;e=e.graphics.getNextPage(),i=new aP(i.x,0,i.width,o.height),s.y=0}this.uriAnnotation=new HE(s,this.url),this.uriAnnotation.dictionary.items.setValue("Border",this.defaultBorder),e.annotations.add(this.uriAnnotation),n=this.drawText(e,i),i.y+=o.height}return n},e.prototype.calculateBounds=function(t,e,i,n){return null!=this.stringFormat&&void 0!==this.stringFormat&&this.stringFormat.alignment===IC.Center?(t.x=n+(i-e)/2,t.width=e):null!=this.stringFormat&&void 0!==this.stringFormat&&this.stringFormat.alignment===IC.Right?(t.x=n+(i-e),t.width=e):null!=this.stringFormat&&void 0!==this.stringFormat&&this.stringFormat.alignment===IC.Justify?(t.x=n,t.width=i):(t.width=n,t.width=e),t},e}(jE),FE=function(){function t(){}return t.convert=function(t,e){var i="";switch(e){case LP.None:i="";break;case LP.Numeric:i=t.toString();break;case LP.LowerLatin:i=this.arabicToLetter(t).toLowerCase();break;case LP.LowerRoman:i=this.arabicToRoman(t).toLowerCase();break;case LP.UpperLatin:i=this.arabicToLetter(t);break;case LP.UpperRoman:i=this.arabicToRoman(t)}return i},t.arabicToRoman=function(t){var e="",i=this.generateNumber(t,1e3,"M");e+=i.returnValue,t=i.intArabic;var n=this.generateNumber(t,900,"CM");e+=n.returnValue,t=n.intArabic;var r=this.generateNumber(t,500,"D");e+=r.returnValue,t=r.intArabic;var o=this.generateNumber(t,400,"CD");e+=o.returnValue,t=o.intArabic;var s=this.generateNumber(t,100,"C");e+=s.returnValue,t=s.intArabic;var a=this.generateNumber(t,90,"XC");e+=a.returnValue,t=a.intArabic;var l=this.generateNumber(t,50,"L");e+=l.returnValue,t=l.intArabic;var h=this.generateNumber(t,40,"XL");e+=h.returnValue,t=h.intArabic;var c=this.generateNumber(t,10,"X");e+=c.returnValue,t=c.intArabic;var d=this.generateNumber(t,9,"IX");e+=d.returnValue,t=d.intArabic;var p=this.generateNumber(t,5,"V");e+=p.returnValue,t=p.intArabic;var u=this.generateNumber(t,4,"IV");e+=u.returnValue,t=u.intArabic;var f=this.generateNumber(t,1,"I");return e+=f.returnValue,t=f.intArabic,e.toString()},t.arabicToLetter=function(t){for(var e=this.convertToLetter(t),i="";e.length>0;){var n=e.pop();i=this.appendChar(i,n)}return i.toString()},t.generateNumber=function(t,e,i){for(var n="";t>=e;)t-=e,n+=i;return{returnValue:n.toString(),intArabic:t}},t.convertToLetter=function(t){if(t<=0)throw Error("ArgumentOutOfRangeException-arabic, Value can not be less 0");for(var e=[];t>this.letterLimit;){var i=t%this.letterLimit;0===i?(t=t/this.letterLimit-1,i=this.letterLimit):t/=this.letterLimit,e.push(i)}return e.push(t),e},t.appendChar=function(e,i){return e+=String.fromCharCode(t.acsiiStartIndex+i)},t.letterLimit=26,t.acsiiStartIndex=64,t}(),WE=function(){function t(t,e){this.pdfTemplate=null,this.content="",void 0===t||(this.template=t,this.value=e)}return Object.defineProperty(t.prototype,"template",{get:function(){return this.pdfTemplate},set:function(t){this.pdfTemplate=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.content},set:function(t){this.content=t},enumerable:!0,configurable:!0}),t}(),UE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),GE=function(t){function e(){var e=t.call(this)||this;return e.list=new UP,e}return UE(e,t),e.prototype.performDraw=function(e,i,n,r){t.prototype.performDrawHelper.call(this,e,i,n,r);var o=this.getValue(e),s=new HO(this.getSize());this.list.setValue(e,new WE(s,o));s.graphics;var a=this.getSize();s.graphics.drawString(o,this.getFont(),this.pen,this.getBrush(),0,0,a.width,a.height,this.stringFormat);var l=new oP(i.x+this.location.x,i.y+this.location.y);e.drawPdfTemplate(s,l,new sP(s.width*n,s.height*r))},e}(ZP),qE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),XE=function(t){function e(e,i){var n=t.call(this)||this;return n.internalNumberStyle=LP.Numeric,void 0===i?n.font=e:i instanceof hP?(n.font=e,n.brush=i):(n.font=e,n.bounds=i),n}return qE(e,t),Object.defineProperty(e.prototype,"numberStyle",{get:function(){return this.internalNumberStyle},set:function(t){this.internalNumberStyle=t},enumerable:!0,configurable:!0}),e.prototype.getValue=function(t){var e=this.getPageFromGraphics(t);return this.internalGetValue(e)},e.prototype.internalGetValue=function(t){var e=t.document.pages.indexOf(t)+1;return FE.convert(e,this.numberStyle)},e}(GE),YE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ZE=function(t){function e(e,i,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var s=t.call(this)||this;return s.internalAutomaticFields=null,s.internalText="",s.font=e,s.brush=i,s.text=n,s.automaticFields=r,s}return YE(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this.internalText},set:function(t){this.internalText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"automaticFields",{get:function(){return this.internalAutomaticFields},set:function(t){this.internalAutomaticFields=t},enumerable:!0,configurable:!0}),e.prototype.getValue=function(t){var e=this.text.toString();if(void 0!==this.automaticFields&&null!=this.automaticFields&&this.automaticFields.length>0)for(var i=0;i<this.automaticFields.length;i++){var n=this.automaticFields[i];e=e.replace("{"+i+"}",n.getValue(t))}return e},e}(GE),KE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),JE=function(t){function e(){var e=t.call(this)||this;return e.list=new UP,e.painterGraphics=[],e}return KE(e,t),e.prototype.performDraw=function(e,i,n,r){t.prototype.performDrawHelper.call(this,e,i,n,r);var o=this.getPageFromGraphics(e).document,s=this.getValue(e);if(this.list.containsKey(o)){var a=this.list.getValue(o),l=new oP(i.x+this.location.x,i.y+this.location.y);e.drawPdfTemplate(a.template,l,new sP(a.template.width*n,a.template.height*r)),this.painterGraphics.push(e)}else{var h=this.getSize(),c=new HO(h);this.list.setValue(o,new WE(c,s)),c.graphics.drawString(s,this.getFont(),this.pen,this.getBrush(),0,0,h.width,h.height,this.stringFormat);l=new oP(i.x+this.location.x,i.y+this.location.y);e.drawPdfTemplate(c,l,new sP(c.width*n,c.height*r)),this.painterGraphics.push(e)}},e}(ZP),QE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$E=function(t){function e(e,i){var n=t.call(this)||this;return n.internalNumberStyle=LP.Numeric,void 0===i?n.font=e:i instanceof hP?(n.font=e,n.brush=i):(n.font=e,n.bounds=i),n}return QE(e,t),Object.defineProperty(e.prototype,"numberStyle",{get:function(){return this.internalNumberStyle},set:function(t){this.internalNumberStyle=t},enumerable:!0,configurable:!0}),e.prototype.getValue=function(t){var e=this.getPageFromGraphics(t).section.parent.document.pages.count;return FE.convert(e,this.numberStyle)},e}(JE);!function(t){t[t.Location=0]="Location",t[t.FitToPage=1]="FitToPage",t[t.FitR=2]="FitR"}(zO||(zO={}));var tL,eL,iL,nL,rL=function(){function t(t,e){this.dictionaryProperties=new Xx,this.destinationMode=zO.Location,this.zoomFactor=0,this.destinationLocation=new oP(0,0),this.bounds=new aP,this.array=new iC;EP.RotateAngle0;this.destinationLocation=new oP(0,this.destinationLocation.y),this.pdfPage=t,e instanceof oP?this.destinationLocation=e:this.bounds=e}return Object.defineProperty(t.prototype,"zoom",{get:function(){return this.zoomFactor},set:function(t){this.zoomFactor=t,this.initializePrimitive()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"page",{get:function(){return this.pdfPage},set:function(t){this.pdfPage=t,this.initializePrimitive()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mode",{get:function(){return this.destinationMode},set:function(t){this.destinationMode=t,this.initializePrimitive()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"location",{get:function(){return this.destinationLocation},set:function(t){this.destinationLocation=t,this.initializePrimitive()},enumerable:!0,configurable:!0}),t.prototype.pointToNativePdf=function(t,e){return t.section.pointToNativePdf(t,e)},t.prototype.initializePrimitive=function(){switch(this.array.clear(),this.array.add(new VC(this.pdfPage)),this.destinationMode){case zO.Location:var t=this.pdfPage,e=new oP;e=this.pointToNativePdf(t,this.destinationLocation),this.array.add(new Gx(this.dictionaryProperties.xyz)),this.array.add(new eC(e.x)),this.array.add(new eC(e.y)),this.array.add(new eC(this.zoomFactor));break;case zO.FitToPage:this.array.add(new Gx(this.dictionaryProperties.fit))}},Object.defineProperty(t.prototype,"element",{get:function(){return this.initializePrimitive(),this.array},enumerable:!0,configurable:!0}),t}(),oL=function(){function t(t){this.mDictionary=null,this.mDictionaryProperties=new Xx,this.mDictionary=t}return Object.defineProperty(t.prototype,"domain",{get:function(){return this.mDictionary.items.getValue(this.mDictionaryProperties.domain)},set:function(t){this.mDictionary.items.setValue(this.mDictionaryProperties.domain,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){return this.mDictionary.items.getValue(this.mDictionaryProperties.range)},set:function(t){this.mDictionary.items.setValue(this.mDictionaryProperties.range,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dictionary",{get:function(){return this.mDictionary},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.mDictionary},enumerable:!0,configurable:!0}),t}(),sL=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),aL=function(t){function e(e,i,n,r){var o=t.call(this,new CC)||this;return void 0===e?o.dictionary.items.setValue(o.mDictionaryProperties.functionType,new eC(0)):(o.dictionary.items.setValue(o.mDictionaryProperties.functionType,new eC(0)),o.checkParams(e,i,n,r),o.setDomainAndRange(e,i),o.setSizeAndValues(n,r)),o}return sL(e,t),e.prototype.checkParams=function(t,e,i,n){e.length,t.length,n.length},e.prototype.setDomainAndRange=function(t,e){this.domain=new iC(t),this.range=new iC(e)},e.prototype.setSizeAndValues=function(t,e){var i=this.dictionary;this.dictionary.items.setValue(this.mDictionaryProperties.size,new iC(t)),this.dictionary.items.setValue(this.mDictionaryProperties.bitsPerSample,new eC(8)),i.writeBytes(e)},e}(oL);!function(t){t[t.None=0]="None",t[t.Start=1]="Start",t[t.End=2]="End",t[t.Both=3]="Both"}(tL||(tL={})),function(t){t[t.BackwardDiagonal=0]="BackwardDiagonal",t[t.ForwardDiagonal=1]="ForwardDiagonal",t[t.Horizontal=2]="Horizontal",t[t.Vertical=3]="Vertical"}(eL||(eL={})),function(t){t[t.Function=1]="Function",t[t.Axial=2]="Axial",t[t.Radial=3]="Radial"}(iL||(iL={})),function(t){t[t.ActiveBorder=1]="ActiveBorder",t[t.ActiveCaption=2]="ActiveCaption",t[t.ActiveCaptionText=3]="ActiveCaptionText",t[t.AppWorkspace=4]="AppWorkspace",t[t.Control=5]="Control",t[t.ControlDark=6]="ControlDark",t[t.ControlDarkDark=7]="ControlDarkDark",t[t.ControlLight=8]="ControlLight",t[t.ControlLightLight=9]="ControlLightLight",t[t.ControlText=10]="ControlText",t[t.Desktop=11]="Desktop",t[t.GrayText=12]="GrayText",t[t.Highlight=13]="Highlight",t[t.HighlightText=14]="HighlightText",t[t.HotTrack=15]="HotTrack",t[t.InactiveBorder=16]="InactiveBorder",t[t.InactiveCaption=17]="InactiveCaption",t[t.InactiveCaptionText=18]="InactiveCaptionText",t[t.Info=19]="Info",t[t.InfoText=20]="InfoText",t[t.Menu=21]="Menu",t[t.MenuText=22]="MenuText",t[t.ScrollBar=23]="ScrollBar",t[t.Window=24]="Window",t[t.WindowFrame=25]="WindowFrame",t[t.WindowText=26]="WindowText",t[t.Transparent=27]="Transparent",t[t.AliceBlue=28]="AliceBlue",t[t.AntiqueWhite=29]="AntiqueWhite",t[t.Aqua=30]="Aqua",t[t.Aquamarine=31]="Aquamarine",t[t.Azure=32]="Azure",t[t.Beige=33]="Beige",t[t.Bisque=34]="Bisque",t[t.Black=35]="Black",t[t.BlanchedAlmond=36]="BlanchedAlmond",t[t.Blue=37]="Blue",t[t.BlueViolet=38]="BlueViolet",t[t.Brown=39]="Brown",t[t.BurlyWood=40]="BurlyWood",t[t.CadetBlue=41]="CadetBlue",t[t.Chartreuse=42]="Chartreuse",t[t.Chocolate=43]="Chocolate",t[t.Coral=44]="Coral",t[t.CornflowerBlue=45]="CornflowerBlue",t[t.Cornsilk=46]="Cornsilk",t[t.Crimson=47]="Crimson",t[t.Cyan=48]="Cyan",t[t.DarkBlue=49]="DarkBlue",t[t.DarkCyan=50]="DarkCyan",t[t.DarkGoldenrod=51]="DarkGoldenrod",t[t.DarkGray=52]="DarkGray",t[t.DarkGreen=53]="DarkGreen",t[t.DarkKhaki=54]="DarkKhaki",t[t.DarkMagenta=55]="DarkMagenta",t[t.DarkOliveGreen=56]="DarkOliveGreen",t[t.DarkOrange=57]="DarkOrange",t[t.DarkOrchid=58]="DarkOrchid",t[t.DarkRed=59]="DarkRed",t[t.DarkSalmon=60]="DarkSalmon",t[t.DarkSeaGreen=61]="DarkSeaGreen",t[t.DarkSlateBlue=62]="DarkSlateBlue",t[t.DarkSlateGray=63]="DarkSlateGray",t[t.DarkTurquoise=64]="DarkTurquoise",t[t.DarkViolet=65]="DarkViolet",t[t.DeepPink=66]="DeepPink",t[t.DeepSkyBlue=67]="DeepSkyBlue",t[t.DimGray=68]="DimGray",t[t.DodgerBlue=69]="DodgerBlue",t[t.Firebrick=70]="Firebrick",t[t.FloralWhite=71]="FloralWhite",t[t.ForestGreen=72]="ForestGreen",t[t.Fuchsia=73]="Fuchsia",t[t.Gainsboro=74]="Gainsboro",t[t.GhostWhite=75]="GhostWhite",t[t.Gold=76]="Gold",t[t.Goldenrod=77]="Goldenrod",t[t.Gray=78]="Gray",t[t.Green=79]="Green",t[t.GreenYellow=80]="GreenYellow",t[t.Honeydew=81]="Honeydew",t[t.HotPink=82]="HotPink",t[t.IndianRed=83]="IndianRed",t[t.Indigo=84]="Indigo",t[t.Ivory=85]="Ivory",t[t.Khaki=86]="Khaki",t[t.Lavender=87]="Lavender",t[t.LavenderBlush=88]="LavenderBlush",t[t.LawnGreen=89]="LawnGreen",t[t.LemonChiffon=90]="LemonChiffon",t[t.LightBlue=91]="LightBlue",t[t.LightCoral=92]="LightCoral",t[t.LightCyan=93]="LightCyan",t[t.LightGoldenrodYellow=94]="LightGoldenrodYellow",t[t.LightGray=95]="LightGray",t[t.LightGreen=96]="LightGreen",t[t.LightPink=97]="LightPink",t[t.LightSalmon=98]="LightSalmon",t[t.LightSeaGreen=99]="LightSeaGreen",t[t.LightSkyBlue=100]="LightSkyBlue",t[t.LightSlateGray=101]="LightSlateGray",t[t.LightSteelBlue=102]="LightSteelBlue",t[t.LightYellow=103]="LightYellow",t[t.Lime=104]="Lime",t[t.LimeGreen=105]="LimeGreen",t[t.Linen=106]="Linen",t[t.Magenta=107]="Magenta",t[t.Maroon=108]="Maroon",t[t.MediumAquamarine=109]="MediumAquamarine",t[t.MediumBlue=110]="MediumBlue",t[t.MediumOrchid=111]="MediumOrchid",t[t.MediumPurple=112]="MediumPurple",t[t.MediumSeaGreen=113]="MediumSeaGreen",t[t.MediumSlateBlue=114]="MediumSlateBlue",t[t.MediumSpringGreen=115]="MediumSpringGreen",t[t.MediumTurquoise=116]="MediumTurquoise",t[t.MediumVioletRed=117]="MediumVioletRed",t[t.MidnightBlue=118]="MidnightBlue",t[t.MintCream=119]="MintCream",t[t.MistyRose=120]="MistyRose",t[t.Moccasin=121]="Moccasin",t[t.NavajoWhite=122]="NavajoWhite",t[t.Navy=123]="Navy",t[t.OldLace=124]="OldLace",t[t.Olive=125]="Olive",t[t.OliveDrab=126]="OliveDrab",t[t.Orange=127]="Orange",t[t.OrangeRed=128]="OrangeRed",t[t.Orchid=129]="Orchid",t[t.PaleGoldenrod=130]="PaleGoldenrod",t[t.PaleGreen=131]="PaleGreen",t[t.PaleTurquoise=132]="PaleTurquoise",t[t.PaleVioletRed=133]="PaleVioletRed",t[t.PapayaWhip=134]="PapayaWhip",t[t.PeachPuff=135]="PeachPuff",t[t.Peru=136]="Peru",t[t.Pink=137]="Pink",t[t.Plum=138]="Plum",t[t.PowderBlue=139]="PowderBlue",t[t.Purple=140]="Purple",t[t.Red=141]="Red",t[t.RosyBrown=142]="RosyBrown",t[t.RoyalBlue=143]="RoyalBlue",t[t.SaddleBrown=144]="SaddleBrown",t[t.Salmon=145]="Salmon",t[t.SandyBrown=146]="SandyBrown",t[t.SeaGreen=147]="SeaGreen",t[t.SeaShell=148]="SeaShell",t[t.Sienna=149]="Sienna",t[t.Silver=150]="Silver",t[t.SkyBlue=151]="SkyBlue",t[t.SlateBlue=152]="SlateBlue",t[t.SlateGray=153]="SlateGray",t[t.Snow=154]="Snow",t[t.SpringGreen=155]="SpringGreen",t[t.SteelBlue=156]="SteelBlue",t[t.Tan=157]="Tan",t[t.Teal=158]="Teal",t[t.Thistle=159]="Thistle",t[t.Tomato=160]="Tomato",t[t.Turquoise=161]="Turquoise",t[t.Violet=162]="Violet",t[t.Wheat=163]="Wheat",t[t.White=164]="White",t[t.WhiteSmoke=165]="WhiteSmoke",t[t.Yellow=166]="Yellow",t[t.YellowGreen=167]="YellowGreen",t[t.ButtonFace=168]="ButtonFace",t[t.ButtonHighlight=169]="ButtonHighlight",t[t.ButtonShadow=170]="ButtonShadow",t[t.GradientActiveCaption=171]="GradientActiveCaption",t[t.GradientInactiveCaption=172]="GradientInactiveCaption",t[t.MenuBar=173]="MenuBar",t[t.MenuHighlight=174]="MenuHighlight"}(nL||(nL={}));var lL,hL=function(){function t(){}return Object.defineProperty(t,"AliceBlue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.AliceBlue)&&(t=this.sBrushes.getValue(nL.AliceBlue)),null==t&&(t=this.getBrush(nL.AliceBlue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"AntiqueWhite",{get:function(){var t=null;return this.sBrushes.containsKey(nL.AntiqueWhite)&&(t=this.sBrushes.getValue(nL.AntiqueWhite)),null==t&&(t=this.getBrush(nL.AntiqueWhite)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Aqua",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Aqua)&&(t=this.sBrushes.getValue(nL.Aqua)),null==t&&(t=this.getBrush(nL.Aqua)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Aquamarine",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Aquamarine)&&(t=this.sBrushes.getValue(nL.Aquamarine)),null==t&&(t=this.getBrush(nL.Aquamarine)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Azure",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Azure)&&(t=this.sBrushes.getValue(nL.Azure)),null==t&&(t=this.getBrush(nL.Azure)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Beige",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Beige)&&(t=this.sBrushes.getValue(nL.Beige)),null==t&&(t=this.getBrush(nL.Beige)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Bisque",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Bisque)&&(t=this.sBrushes.getValue(nL.Bisque)),null==t&&(t=this.getBrush(nL.Bisque)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Black",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Black)&&(t=this.sBrushes.getValue(nL.Black)),null==t&&(t=this.getBrush(nL.Black)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BlanchedAlmond",{get:function(){var t=null;return this.sBrushes.containsKey(nL.BlanchedAlmond)&&(t=this.sBrushes.getValue(nL.BlanchedAlmond)),null==t&&(t=this.getBrush(nL.BlanchedAlmond)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Blue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Blue)&&(t=this.sBrushes.getValue(nL.Blue)),null==t&&(t=this.getBrush(nL.Blue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BlueViolet",{get:function(){var t=null;return this.sBrushes.containsKey(nL.BlueViolet)&&(t=this.sBrushes.getValue(nL.BlueViolet)),null==t&&(t=this.getBrush(nL.BlueViolet)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Brown",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Brown)&&(t=this.sBrushes.getValue(nL.Brown)),null==t&&(t=this.getBrush(nL.Brown)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BurlyWood",{get:function(){var t=null;return this.sBrushes.containsKey(nL.BurlyWood)&&(t=this.sBrushes.getValue(nL.BurlyWood)),null==t&&(t=this.getBrush(nL.BurlyWood)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CadetBlue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.CadetBlue)&&(t=this.sBrushes.getValue(nL.CadetBlue)),null==t&&(t=this.getBrush(nL.CadetBlue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Chartreuse",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Chartreuse)&&(t=this.sBrushes.getValue(nL.Chartreuse)),null==t&&(t=this.getBrush(nL.Chartreuse)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Chocolate",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Chocolate)&&(t=this.sBrushes.getValue(nL.Chocolate)),null==t&&(t=this.getBrush(nL.Chocolate)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Coral",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Coral)&&(t=this.sBrushes.getValue(nL.Coral)),null==t&&(t=this.getBrush(nL.Coral)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CornflowerBlue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.CornflowerBlue)&&(t=this.sBrushes.getValue(nL.CornflowerBlue)),null==t&&(t=this.getBrush(nL.CornflowerBlue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Cornsilk",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Cornsilk)&&(t=this.sBrushes.getValue(nL.Cornsilk)),null==t&&(t=this.getBrush(nL.Cornsilk)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Crimson",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Crimson)&&(t=this.sBrushes.getValue(nL.Crimson)),null==t&&(t=this.getBrush(nL.Crimson)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Cyan",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Cyan)&&(t=this.sBrushes.getValue(nL.Cyan)),null==t&&(t=this.getBrush(nL.Cyan)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DarkBlue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DarkBlue)&&(t=this.sBrushes.getValue(nL.DarkBlue)),null==t&&(t=this.getBrush(nL.DarkBlue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DarkCyan",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DarkCyan)&&(t=this.sBrushes.getValue(nL.DarkCyan)),null==t&&(t=this.getBrush(nL.DarkCyan)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DarkGoldenrod",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DarkGoldenrod)&&(t=this.sBrushes.getValue(nL.DarkGoldenrod)),null==t&&(t=this.getBrush(nL.DarkGoldenrod)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DarkGray",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DarkGray)&&(t=this.sBrushes.getValue(nL.DarkGray)),null==t&&(t=this.getBrush(nL.DarkGray)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DarkGreen",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DarkGreen)&&(t=this.sBrushes.getValue(nL.DarkGreen)),null==t&&(t=this.getBrush(nL.DarkGreen)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DarkKhaki",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DarkKhaki)&&(t=this.sBrushes.getValue(nL.DarkKhaki)),null==t&&(t=this.getBrush(nL.DarkKhaki)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DarkMagenta",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DarkMagenta)&&(t=this.sBrushes.getValue(nL.DarkMagenta)),null==t&&(t=this.getBrush(nL.DarkMagenta)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DarkOliveGreen",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DarkOliveGreen)&&(t=this.sBrushes.getValue(nL.DarkOliveGreen)),null==t&&(t=this.getBrush(nL.DarkOliveGreen)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DarkOrange",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DarkOrange)&&(t=this.sBrushes.getValue(nL.DarkOrange)),null==t&&(t=this.getBrush(nL.DarkOrange)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DarkOrchid",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DarkOrchid)&&(t=this.sBrushes.getValue(nL.DarkOrchid)),null==t&&(t=this.getBrush(nL.DarkOrchid)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DarkRed",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DarkRed)&&(t=this.sBrushes.getValue(nL.DarkRed)),null==t&&(t=this.getBrush(nL.DarkRed)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DarkSalmon",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DarkSalmon)&&(t=this.sBrushes.getValue(nL.DarkSalmon)),null==t&&(t=this.getBrush(nL.DarkSalmon)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DarkSeaGreen",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DarkSeaGreen)&&(t=this.sBrushes.getValue(nL.DarkSeaGreen)),null==t&&(t=this.getBrush(nL.DarkSeaGreen)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DarkSlateBlue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DarkSlateBlue)&&(t=this.sBrushes.getValue(nL.DarkSlateBlue)),null==t&&(t=this.getBrush(nL.DarkSlateBlue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DarkSlateGray",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DarkSlateGray)&&(t=this.sBrushes.getValue(nL.DarkSlateGray)),null==t&&(t=this.getBrush(nL.DarkSlateGray)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DarkTurquoise",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DarkTurquoise)&&(t=this.sBrushes.getValue(nL.DarkTurquoise)),null==t&&(t=this.getBrush(nL.DarkTurquoise)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DarkViolet",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DarkViolet)&&(t=this.sBrushes.getValue(nL.DarkViolet)),null==t&&(t=this.getBrush(nL.DarkViolet)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DeepPink",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DeepPink)&&(t=this.sBrushes.getValue(nL.DeepPink)),null==t&&(t=this.getBrush(nL.DeepPink)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DeepSkyBlue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DeepSkyBlue)&&(t=this.sBrushes.getValue(nL.DeepSkyBlue)),null==t&&(t=this.getBrush(nL.DeepSkyBlue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DimGray",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DimGray)&&(t=this.sBrushes.getValue(nL.DimGray)),null==t&&(t=this.getBrush(nL.DimGray)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DodgerBlue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.DodgerBlue)&&(t=this.sBrushes.getValue(nL.DodgerBlue)),null==t&&(t=this.getBrush(nL.DodgerBlue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Firebrick",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Firebrick)&&(t=this.sBrushes.getValue(nL.Firebrick)),null==t&&(t=this.getBrush(nL.Firebrick)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"FloralWhite",{get:function(){var t=null;return this.sBrushes.containsKey(nL.FloralWhite)&&(t=this.sBrushes.getValue(nL.FloralWhite)),null==t&&(t=this.getBrush(nL.FloralWhite)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ForestGreen",{get:function(){var t=null;return this.sBrushes.containsKey(nL.ForestGreen)&&(t=this.sBrushes.getValue(nL.ForestGreen)),null==t&&(t=this.getBrush(nL.ForestGreen)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Fuchsia",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Fuchsia)&&(t=this.sBrushes.getValue(nL.Fuchsia)),null==t&&(t=this.getBrush(nL.Fuchsia)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Gainsboro",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Gainsboro)&&(t=this.sBrushes.getValue(nL.Gainsboro)),null==t&&(t=this.getBrush(nL.Gainsboro)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"GhostWhite",{get:function(){var t=null;return this.sBrushes.containsKey(nL.GhostWhite)&&(t=this.sBrushes.getValue(nL.GhostWhite)),null==t&&(t=this.getBrush(nL.GhostWhite)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Gold",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Gold)&&(t=this.sBrushes.getValue(nL.Gold)),null==t&&(t=this.getBrush(nL.Gold)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Goldenrod",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Goldenrod)&&(t=this.sBrushes.getValue(nL.Goldenrod)),null==t&&(t=this.getBrush(nL.Goldenrod)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Gray",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Gray)&&(t=this.sBrushes.getValue(nL.Gray)),null==t&&(t=this.getBrush(nL.Gray)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Green",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Green)&&(t=this.sBrushes.getValue(nL.Green)),null==t&&(t=this.getBrush(nL.Green)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"GreenYellow",{get:function(){var t=null;return this.sBrushes.containsKey(nL.GreenYellow)&&(t=this.sBrushes.getValue(nL.GreenYellow)),null==t&&(t=this.getBrush(nL.GreenYellow)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Honeydew",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Honeydew)&&(t=this.sBrushes.getValue(nL.Honeydew)),null==t&&(t=this.getBrush(nL.Honeydew)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"HotPink",{get:function(){var t=null;return this.sBrushes.containsKey(nL.HotPink)&&(t=this.sBrushes.getValue(nL.HotPink)),null==t&&(t=this.getBrush(nL.HotPink)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IndianRed",{get:function(){var t=null;return this.sBrushes.containsKey(nL.IndianRed)&&(t=this.sBrushes.getValue(nL.IndianRed)),null==t&&(t=this.getBrush(nL.IndianRed)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Indigo",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Indigo)&&(t=this.sBrushes.getValue(nL.Indigo)),null==t&&(t=this.getBrush(nL.Indigo)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Ivory",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Ivory)&&(t=this.sBrushes.getValue(nL.Ivory)),null==t&&(t=this.getBrush(nL.Ivory)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Khaki",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Khaki)&&(t=this.sBrushes.getValue(nL.Khaki)),null==t&&(t=this.getBrush(nL.Khaki)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Lavender",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Lavender)&&(t=this.sBrushes.getValue(nL.Lavender)),null==t&&(t=this.getBrush(nL.Lavender)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LavenderBlush",{get:function(){var t=null;return this.sBrushes.containsKey(nL.LavenderBlush)&&(t=this.sBrushes.getValue(nL.LavenderBlush)),null==t&&(t=this.getBrush(nL.LavenderBlush)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LawnGreen",{get:function(){var t=null;return this.sBrushes.containsKey(nL.LawnGreen)&&(t=this.sBrushes.getValue(nL.LawnGreen)),null==t&&(t=this.getBrush(nL.LawnGreen)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LemonChiffon",{get:function(){var t=null;return this.sBrushes.containsKey(nL.LemonChiffon)&&(t=this.sBrushes.getValue(nL.LemonChiffon)),null==t&&(t=this.getBrush(nL.LemonChiffon)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LightBlue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.LightBlue)&&(t=this.sBrushes.getValue(nL.LightBlue)),null==t&&(t=this.getBrush(nL.LightBlue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LightCoral",{get:function(){var t=null;return this.sBrushes.containsKey(nL.LightCoral)&&(t=this.sBrushes.getValue(nL.LightCoral)),null==t&&(t=this.getBrush(nL.LightCoral)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LightCyan",{get:function(){var t=null;return this.sBrushes.containsKey(nL.LightCyan)&&(t=this.sBrushes.getValue(nL.LightCyan)),null==t&&(t=this.getBrush(nL.LightCyan)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LightGoldenrodYellow",{get:function(){var t=null;return this.sBrushes.containsKey(nL.LightGoldenrodYellow)&&(t=this.sBrushes.getValue(nL.LightGoldenrodYellow)),null==t&&(t=this.getBrush(nL.LightGoldenrodYellow)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LightGray",{get:function(){var t=null;return this.sBrushes.containsKey(nL.LightGray)&&(t=this.sBrushes.getValue(nL.LightGray)),null==t&&(t=this.getBrush(nL.LightGray)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LightGreen",{get:function(){var t=null;return this.sBrushes.containsKey(nL.LightGreen)&&(t=this.sBrushes.getValue(nL.LightGreen)),null==t&&(t=this.getBrush(nL.LightGreen)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LightPink",{get:function(){var t=null;return this.sBrushes.containsKey(nL.LightPink)&&(t=this.sBrushes.getValue(nL.LightPink)),null==t&&(t=this.getBrush(nL.LightPink)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LightSalmon",{get:function(){var t=null;return this.sBrushes.containsKey(nL.LightSalmon)&&(t=this.sBrushes.getValue(nL.LightSalmon)),null==t&&(t=this.getBrush(nL.LightSalmon)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LightSeaGreen",{get:function(){var t=null;return this.sBrushes.containsKey(nL.LightSeaGreen)&&(t=this.sBrushes.getValue(nL.LightSeaGreen)),null==t&&(t=this.getBrush(nL.LightSeaGreen)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LightSkyBlue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.LightSkyBlue)&&(t=this.sBrushes.getValue(nL.LightSkyBlue)),null==t&&(t=this.getBrush(nL.LightSkyBlue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LightSlateGray",{get:function(){var t=null;return this.sBrushes.containsKey(nL.LightSlateGray)&&(t=this.sBrushes.getValue(nL.LightSlateGray)),null==t&&(t=this.getBrush(nL.LightSlateGray)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LightSteelBlue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.LightSteelBlue)&&(t=this.sBrushes.getValue(nL.LightSteelBlue)),null==t&&(t=this.getBrush(nL.LightSteelBlue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LightYellow",{get:function(){var t=null;return this.sBrushes.containsKey(nL.LightYellow)&&(t=this.sBrushes.getValue(nL.LightYellow)),null==t&&(t=this.getBrush(nL.LightYellow)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Lime",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Lime)&&(t=this.sBrushes.getValue(nL.Lime)),null==t&&(t=this.getBrush(nL.Lime)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LimeGreen",{get:function(){var t=null;return this.sBrushes.containsKey(nL.LimeGreen)&&(t=this.sBrushes.getValue(nL.LimeGreen)),null==t&&(t=this.getBrush(nL.LimeGreen)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Linen",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Linen)&&(t=this.sBrushes.getValue(nL.Linen)),null==t&&(t=this.getBrush(nL.Linen)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Magenta",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Magenta)&&(t=this.sBrushes.getValue(nL.Magenta)),null==t&&(t=this.getBrush(nL.Magenta)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Maroon",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Maroon)&&(t=this.sBrushes.getValue(nL.Maroon)),null==t&&(t=this.getBrush(nL.Maroon)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MediumAquamarine",{get:function(){var t=null;return this.sBrushes.containsKey(nL.MediumAquamarine)&&(t=this.sBrushes.getValue(nL.MediumAquamarine)),null==t&&(t=this.getBrush(nL.MediumAquamarine)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MediumBlue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.MediumBlue)&&(t=this.sBrushes.getValue(nL.MediumBlue)),null==t&&(t=this.getBrush(nL.MediumBlue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MediumOrchid",{get:function(){var t=null;return this.sBrushes.containsKey(nL.MediumOrchid)&&(t=this.sBrushes.getValue(nL.MediumOrchid)),null==t&&(t=this.getBrush(nL.MediumOrchid)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MediumPurple",{get:function(){var t=null;return this.sBrushes.containsKey(nL.MediumPurple)&&(t=this.sBrushes.getValue(nL.MediumPurple)),null==t&&(t=this.getBrush(nL.MediumPurple)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MediumSeaGreen",{get:function(){var t=null;return this.sBrushes.containsKey(nL.MediumSeaGreen)&&(t=this.sBrushes.getValue(nL.MediumSeaGreen)),null==t&&(t=this.getBrush(nL.MediumSeaGreen)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MediumSlateBlue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.MediumSlateBlue)&&(t=this.sBrushes.getValue(nL.MediumSlateBlue)),null==t&&(t=this.getBrush(nL.MediumSlateBlue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MediumSpringGreen",{get:function(){var t=null;return this.sBrushes.containsKey(nL.MediumSpringGreen)&&(t=this.sBrushes.getValue(nL.MediumSpringGreen)),null==t&&(t=this.getBrush(nL.MediumSpringGreen)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MediumTurquoise",{get:function(){var t=null;return this.sBrushes.containsKey(nL.MediumTurquoise)&&(t=this.sBrushes.getValue(nL.MediumTurquoise)),null==t&&(t=this.getBrush(nL.MediumTurquoise)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MediumVioletRed",{get:function(){var t=null;return this.sBrushes.containsKey(nL.MediumVioletRed)&&(t=this.sBrushes.getValue(nL.MediumVioletRed)),null==t&&(t=this.getBrush(nL.MediumVioletRed)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MidnightBlue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.MidnightBlue)&&(t=this.sBrushes.getValue(nL.MidnightBlue)),null==t&&(t=this.getBrush(nL.MidnightBlue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MintCream",{get:function(){var t=null;return this.sBrushes.containsKey(nL.MintCream)&&(t=this.sBrushes.getValue(nL.MintCream)),null==t&&(t=this.getBrush(nL.MintCream)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MistyRose",{get:function(){var t=null;return this.sBrushes.containsKey(nL.MistyRose)&&(t=this.sBrushes.getValue(nL.MistyRose)),null==t&&(t=this.getBrush(nL.MistyRose)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Moccasin",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Moccasin)&&(t=this.sBrushes.getValue(nL.Moccasin)),null==t&&(t=this.getBrush(nL.Moccasin)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"NavajoWhite",{get:function(){var t=null;return this.sBrushes.containsKey(nL.NavajoWhite)&&(t=this.sBrushes.getValue(nL.NavajoWhite)),null==t&&(t=this.getBrush(nL.NavajoWhite)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Navy",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Navy)&&(t=this.sBrushes.getValue(nL.Navy)),null==t&&(t=this.getBrush(nL.Navy)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"OldLace",{get:function(){var t=null;return this.sBrushes.containsKey(nL.OldLace)&&(t=this.sBrushes.getValue(nL.OldLace)),null==t&&(t=this.getBrush(nL.OldLace)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Olive",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Olive)&&(t=this.sBrushes.getValue(nL.Olive)),null==t&&(t=this.getBrush(nL.Olive)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"OliveDrab",{get:function(){var t=null;return this.sBrushes.containsKey(nL.OliveDrab)&&(t=this.sBrushes.getValue(nL.OliveDrab)),null==t&&(t=this.getBrush(nL.OliveDrab)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Orange",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Orange)&&(t=this.sBrushes.getValue(nL.Orange)),null==t&&(t=this.getBrush(nL.Orange)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"OrangeRed",{get:function(){var t=null;return this.sBrushes.containsKey(nL.OrangeRed)&&(t=this.sBrushes.getValue(nL.OrangeRed)),null==t&&(t=this.getBrush(nL.OrangeRed)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Orchid",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Orchid)&&(t=this.sBrushes.getValue(nL.Orchid)),null==t&&(t=this.getBrush(nL.Orchid)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"PaleGoldenrod",{get:function(){var t=null;return this.sBrushes.containsKey(nL.PaleGoldenrod)&&(t=this.sBrushes.getValue(nL.PaleGoldenrod)),null==t&&(t=this.getBrush(nL.PaleGoldenrod)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"PaleGreen",{get:function(){var t=null;return this.sBrushes.containsKey(nL.PaleGreen)&&(t=this.sBrushes.getValue(nL.PaleGreen)),null==t&&(t=this.getBrush(nL.PaleGreen)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"PaleTurquoise",{get:function(){var t=null;return this.sBrushes.containsKey(nL.PaleTurquoise)&&(t=this.sBrushes.getValue(nL.PaleTurquoise)),null==t&&(t=this.getBrush(nL.PaleTurquoise)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"PaleVioletRed",{get:function(){var t=null;return this.sBrushes.containsKey(nL.PaleVioletRed)&&(t=this.sBrushes.getValue(nL.PaleVioletRed)),null==t&&(t=this.getBrush(nL.PaleVioletRed)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"PapayaWhip",{get:function(){var t=null;return this.sBrushes.containsKey(nL.PapayaWhip)&&(t=this.sBrushes.getValue(nL.PapayaWhip)),null==t&&(t=this.getBrush(nL.PapayaWhip)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"PeachPuff",{get:function(){var t=null;return this.sBrushes.containsKey(nL.PeachPuff)&&(t=this.sBrushes.getValue(nL.PeachPuff)),null==t&&(t=this.getBrush(nL.PeachPuff)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Peru",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Peru)&&(t=this.sBrushes.getValue(nL.Peru)),null==t&&(t=this.getBrush(nL.Peru)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Pink",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Pink)&&(t=this.sBrushes.getValue(nL.Pink)),null==t&&(t=this.getBrush(nL.Pink)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Plum",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Plum)&&(t=this.sBrushes.getValue(nL.Plum)),null==t&&(t=this.getBrush(nL.Plum)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"PowderBlue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.PowderBlue)&&(t=this.sBrushes.getValue(nL.PowderBlue)),null==t&&(t=this.getBrush(nL.PowderBlue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Purple",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Purple)&&(t=this.sBrushes.getValue(nL.Purple)),null==t&&(t=this.getBrush(nL.Purple)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Red",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Red)&&(t=this.sBrushes.getValue(nL.Red)),null==t&&(t=this.getBrush(nL.Red)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RosyBrown",{get:function(){var t=null;return this.sBrushes.containsKey(nL.RosyBrown)&&(t=this.sBrushes.getValue(nL.RosyBrown)),null==t&&(t=this.getBrush(nL.RosyBrown)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RoyalBlue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.RoyalBlue)&&(t=this.sBrushes.getValue(nL.RoyalBlue)),null==t&&(t=this.getBrush(nL.RoyalBlue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SaddleBrown",{get:function(){var t=null;return this.sBrushes.containsKey(nL.SaddleBrown)&&(t=this.sBrushes.getValue(nL.SaddleBrown)),null==t&&(t=this.getBrush(nL.SaddleBrown)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Salmon",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Salmon)&&(t=this.sBrushes.getValue(nL.Salmon)),null==t&&(t=this.getBrush(nL.Salmon)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SandyBrown",{get:function(){var t=null;return this.sBrushes.containsKey(nL.SandyBrown)&&(t=this.sBrushes.getValue(nL.SandyBrown)),null==t&&(t=this.getBrush(nL.SandyBrown)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SeaGreen",{get:function(){var t=null;return this.sBrushes.containsKey(nL.SeaGreen)&&(t=this.sBrushes.getValue(nL.SeaGreen)),null==t&&(t=this.getBrush(nL.SeaGreen)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SeaShell",{get:function(){var t=null;return this.sBrushes.containsKey(nL.SeaShell)&&(t=this.sBrushes.getValue(nL.SeaShell)),null==t&&(t=this.getBrush(nL.SeaShell)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Sienna",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Sienna)&&(t=this.sBrushes.getValue(nL.Sienna)),null==t&&(t=this.getBrush(nL.Sienna)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Silver",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Silver)&&(t=this.sBrushes.getValue(nL.Silver)),null==t&&(t=this.getBrush(nL.Silver)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SkyBlue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.SkyBlue)&&(t=this.sBrushes.getValue(nL.SkyBlue)),null==t&&(t=this.getBrush(nL.SkyBlue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SlateBlue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.SlateBlue)&&(t=this.sBrushes.getValue(nL.SlateBlue)),null==t&&(t=this.getBrush(nL.SlateBlue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SlateGray",{get:function(){var t=null;return this.sBrushes.containsKey(nL.SlateGray)&&(t=this.sBrushes.getValue(nL.SlateGray)),null==t&&(t=this.getBrush(nL.SlateGray)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Snow",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Snow)&&(t=this.sBrushes.getValue(nL.Snow)),null==t&&(t=this.getBrush(nL.Snow)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SpringGreen",{get:function(){var t=null;return this.sBrushes.containsKey(nL.SpringGreen)&&(t=this.sBrushes.getValue(nL.SpringGreen)),null==t&&(t=this.getBrush(nL.SpringGreen)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SteelBlue",{get:function(){var t=null;return this.sBrushes.containsKey(nL.SteelBlue)&&(t=this.sBrushes.getValue(nL.SteelBlue)),null==t&&(t=this.getBrush(nL.SteelBlue)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Tan",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Tan)&&(t=this.sBrushes.getValue(nL.Tan)),null==t&&(t=this.getBrush(nL.Tan)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Teal",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Teal)&&(t=this.sBrushes.getValue(nL.Teal)),null==t&&(t=this.getBrush(nL.Teal)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Thistle",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Thistle)&&(t=this.sBrushes.getValue(nL.Thistle)),null==t&&(t=this.getBrush(nL.Thistle)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Tomato",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Tomato)&&(t=this.sBrushes.getValue(nL.Tomato)),null==t&&(t=this.getBrush(nL.Tomato)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Transparent",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Transparent)&&(t=this.sBrushes.getValue(nL.Transparent)),null==t&&(t=this.getBrush(nL.Transparent)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Turquoise",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Turquoise)&&(t=this.sBrushes.getValue(nL.Turquoise)),null==t&&(t=this.getBrush(nL.Turquoise)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Violet",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Violet)&&(t=this.sBrushes.getValue(nL.Violet)),null==t&&(t=this.getBrush(nL.Violet)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Wheat",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Wheat)&&(t=this.sBrushes.getValue(nL.Wheat)),null==t&&(t=this.getBrush(nL.Wheat)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"White",{get:function(){var t=null;return this.sBrushes.containsKey(nL.White)&&(t=this.sBrushes.getValue(nL.White)),null==t&&(t=this.getBrush(nL.White)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WhiteSmoke",{get:function(){var t=null;return this.sBrushes.containsKey(nL.WhiteSmoke)&&(t=this.sBrushes.getValue(nL.WhiteSmoke)),null==t&&(t=this.getBrush(nL.WhiteSmoke)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Yellow",{get:function(){var t=null;return this.sBrushes.containsKey(nL.Yellow)&&(t=this.sBrushes.getValue(nL.Yellow)),null==t&&(t=this.getBrush(nL.Yellow)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"YellowGreen",{get:function(){var t=null;return this.sBrushes.containsKey(nL.YellowGreen)&&(t=this.sBrushes.getValue(nL.YellowGreen)),null==t&&(t=this.getBrush(nL.YellowGreen)),t},enumerable:!0,configurable:!0}),t.getBrush=function(t){var e=this.getColorValue(t),i=new dP(e);return this.sBrushes.setValue(t,i),i},t.getColorValue=function(t){var e=new rP;switch(t){case nL.Transparent:e=new rP(0,255,255,255);break;case nL.AliceBlue:e=new rP(255,240,248,255);break;case nL.AntiqueWhite:e=new rP(255,250,235,215);break;case nL.Aqua:e=new rP(255,0,255,255);break;case nL.Aquamarine:e=new rP(255,127,255,212);break;case nL.Azure:e=new rP(255,240,255,255);break;case nL.Beige:e=new rP(255,245,245,220);break;case nL.Bisque:e=new rP(255,255,228,196);break;case nL.Black:e=new rP(255,0,0,0);break;case nL.BlanchedAlmond:e=new rP(255,255,235,205);break;case nL.Blue:e=new rP(255,0,0,255);break;case nL.BlueViolet:e=new rP(255,138,43,226);break;case nL.Brown:e=new rP(255,165,42,42);break;case nL.BurlyWood:e=new rP(255,222,184,135);break;case nL.CadetBlue:e=new rP(255,95,158,160);break;case nL.Chartreuse:e=new rP(255,127,255,0);break;case nL.Chocolate:e=new rP(255,210,105,30);break;case nL.Coral:e=new rP(255,255,127,80);break;case nL.CornflowerBlue:e=new rP(255,100,149,237);break;case nL.Cornsilk:e=new rP(255,255,248,220);break;case nL.Crimson:e=new rP(255,220,20,60);break;case nL.Cyan:e=new rP(255,0,255,255);break;case nL.DarkBlue:e=new rP(255,0,0,139);break;case nL.DarkCyan:e=new rP(255,0,139,139);break;case nL.DarkGoldenrod:e=new rP(255,184,134,11);break;case nL.DarkGray:e=new rP(255,169,169,169);break;case nL.DarkGreen:e=new rP(255,0,100,0);break;case nL.DarkKhaki:e=new rP(255,189,183,107);break;case nL.DarkMagenta:e=new rP(255,139,0,139);break;case nL.DarkOliveGreen:e=new rP(255,85,107,47);break;case nL.DarkOrange:e=new rP(255,255,140,0);break;case nL.DarkOrchid:e=new rP(255,153,50,204);break;case nL.DarkRed:e=new rP(255,139,0,0);break;case nL.DarkSalmon:e=new rP(255,233,150,122);break;case nL.DarkSeaGreen:e=new rP(255,143,188,139);break;case nL.DarkSlateBlue:e=new rP(255,72,61,139);break;case nL.DarkSlateGray:e=new rP(255,47,79,79);break;case nL.DarkTurquoise:e=new rP(255,0,206,209);break;case nL.DarkViolet:e=new rP(255,148,0,211);break;case nL.DeepPink:e=new rP(255,255,20,147);break;case nL.DeepSkyBlue:e=new rP(255,0,191,255);break;case nL.DimGray:e=new rP(255,105,105,105);break;case nL.DodgerBlue:e=new rP(255,30,144,255);break;case nL.Firebrick:e=new rP(255,178,34,34);break;case nL.FloralWhite:e=new rP(255,255,250,240);break;case nL.ForestGreen:e=new rP(255,34,139,34);break;case nL.Fuchsia:e=new rP(255,255,0,255);break;case nL.Gainsboro:e=new rP(255,220,220,220);break;case nL.GhostWhite:e=new rP(255,248,248,255);break;case nL.Gold:e=new rP(255,255,215,0);break;case nL.Goldenrod:e=new rP(255,218,165,32);break;case nL.Gray:e=new rP(255,128,128,128);break;case nL.Green:e=new rP(255,0,128,0);break;case nL.GreenYellow:e=new rP(255,173,255,47);break;case nL.Honeydew:e=new rP(255,240,255,240);break;case nL.HotPink:e=new rP(255,255,105,180);break;case nL.IndianRed:e=new rP(255,205,92,92);break;case nL.Indigo:e=new rP(255,75,0,130);break;case nL.Ivory:e=new rP(255,255,255,240);break;case nL.Khaki:e=new rP(255,240,230,140);break;case nL.Lavender:e=new rP(255,230,230,250);break;case nL.LavenderBlush:e=new rP(255,255,240,245);break;case nL.LawnGreen:e=new rP(255,124,252,0);break;case nL.LemonChiffon:e=new rP(255,255,250,205);break;case nL.LightBlue:e=new rP(255,173,216,230);break;case nL.LightCoral:e=new rP(255,240,128,128);break;case nL.LightCyan:e=new rP(255,224,255,255);break;case nL.LightGoldenrodYellow:e=new rP(255,250,250,210);break;case nL.LightGreen:e=new rP(255,144,238,144);break;case nL.LightGray:e=new rP(255,211,211,211);break;case nL.LightPink:e=new rP(255,255,182,193);break;case nL.LightSalmon:e=new rP(255,255,160,122);break;case nL.LightSeaGreen:e=new rP(255,32,178,170);break;case nL.LightSkyBlue:e=new rP(255,135,206,250);break;case nL.LightSlateGray:e=new rP(255,119,136,153);break;case nL.LightSteelBlue:e=new rP(255,176,196,222);break;case nL.LightYellow:e=new rP(255,255,255,224);break;case nL.Lime:e=new rP(255,0,255,0);break;case nL.LimeGreen:e=new rP(255,50,205,50);break;case nL.Linen:e=new rP(255,250,240,230);break;case nL.Magenta:e=new rP(255,255,0,255);break;case nL.Maroon:e=new rP(255,128,0,0);break;case nL.MediumAquamarine:e=new rP(255,102,205,170);break;case nL.MediumBlue:e=new rP(255,0,0,205);break;case nL.MediumOrchid:e=new rP(255,186,85,211);break;case nL.MediumPurple:e=new rP(255,147,112,219);break;case nL.MediumSeaGreen:e=new rP(255,60,179,113);break;case nL.MediumSlateBlue:e=new rP(255,123,104,238);break;case nL.MediumSpringGreen:e=new rP(255,0,250,154);break;case nL.MediumTurquoise:e=new rP(255,72,209,204);break;case nL.MediumVioletRed:e=new rP(255,199,21,133);break;case nL.MidnightBlue:e=new rP(255,25,25,112);break;case nL.MintCream:e=new rP(255,245,255,250);break;case nL.MistyRose:e=new rP(255,255,228,225);break;case nL.Moccasin:e=new rP(255,255,228,181);break;case nL.NavajoWhite:e=new rP(255,255,222,173);break;case nL.Navy:e=new rP(255,0,0,128);break;case nL.OldLace:e=new rP(255,253,245,230);break;case nL.Olive:e=new rP(255,128,128,0);break;case nL.OliveDrab:e=new rP(255,107,142,35);break;case nL.Orange:e=new rP(255,255,165,0);break;case nL.OrangeRed:e=new rP(255,255,69,0);break;case nL.Orchid:e=new rP(255,218,112,214);break;case nL.PaleGoldenrod:e=new rP(255,238,232,170);break;case nL.PaleGreen:e=new rP(255,152,251,152);break;case nL.PaleTurquoise:e=new rP(255,175,238,238);break;case nL.PaleVioletRed:e=new rP(255,219,112,147);break;case nL.PapayaWhip:e=new rP(255,255,239,213);break;case nL.PeachPuff:e=new rP(255,255,218,185);break;case nL.Peru:e=new rP(255,205,133,63);break;case nL.Pink:e=new rP(255,255,192,203);break;case nL.Plum:e=new rP(255,221,160,221);break;case nL.PowderBlue:e=new rP(255,176,224,230);break;case nL.Purple:e=new rP(255,128,0,128);break;case nL.Red:e=new rP(255,255,0,0);break;case nL.RosyBrown:e=new rP(255,188,143,143);break;case nL.RoyalBlue:e=new rP(255,65,105,225);break;case nL.SaddleBrown:e=new rP(255,139,69,19);break;case nL.Salmon:e=new rP(255,250,128,114);break;case nL.SandyBrown:e=new rP(255,244,164,96);break;case nL.SeaGreen:e=new rP(255,46,139,87);break;case nL.SeaShell:e=new rP(255,255,245,238);break;case nL.Sienna:e=new rP(255,160,82,45);break;case nL.Silver:e=new rP(255,192,192,192);break;case nL.SkyBlue:e=new rP(255,135,206,235);break;case nL.SlateBlue:e=new rP(255,106,90,205);break;case nL.SlateGray:e=new rP(255,112,128,144);break;case nL.Snow:e=new rP(255,255,250,250);break;case nL.SpringGreen:e=new rP(255,0,255,127);break;case nL.SteelBlue:e=new rP(255,70,130,180);break;case nL.Tan:e=new rP(255,210,180,140);break;case nL.Teal:e=new rP(255,0,128,128);break;case nL.Thistle:e=new rP(255,216,191,216);break;case nL.Tomato:e=new rP(255,255,99,71);break;case nL.Turquoise:e=new rP(255,64,224,208);break;case nL.Violet:e=new rP(255,238,130,238);break;case nL.Wheat:e=new rP(255,245,222,179);break;case nL.White:e=new rP(255,255,255,255);break;case nL.WhiteSmoke:e=new rP(255,245,245,245);break;case nL.Yellow:e=new rP(255,255,255,0);break;case nL.YellowGreen:e=new rP(255,154,205,50)}return e},t.sBrushes=new Ux,t}(),cL=function(){function t(t){this.precision=1e3}return Object.defineProperty(t.prototype,"factors",{get:function(){return this.mFactors},set:function(t){if(null==t)throw new Error("ArgumentNullException : Factors");this.mFactors=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this.mPositions},set:function(t){for(var e=t,i=0;i<e.length;i++)(e[i]<0||e[i]>1)&&(e[i]=0);this.mPositions=e,this.mPositions=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this.mCount},enumerable:!0,configurable:!0}),t.prototype.generateColorBlend=function(t,e){if(null==t)throw new Error("ArgumentNullException : colours");null==this.positions&&(this.positions=[0]);var i=new pL(this.count),n=this.positions,r=null;if(1===n.length)(n=[3])[0]=0,n[1]=this.positions[0],n[2]=1,(r=new Array(3))[0]=t[0],r[1]=t[0],r[2]=t[1];else{var o=t[0],s=t[1];r=new Array(this.count);var a=0,l=this.count;for(a=0;a<l;++a)r[a]=this.interpolate(this.mFactors[a],o,s,e)}return i.positions=n,i.colors=r,i},t.prototype.clonePdfBlend=function(){return null!=this.mFactors&&(this.factors=this.mFactors),null!=this.positions&&(this.positions=this.positions),this},t.prototype.gcd=function(t,e){if("number"==typeof t&&"number"==typeof e&&void 0!==e){if(t<0||t>1)throw new Error("ArgumentOutOfRangeException : u");if(e<0||e>1)throw new Error("ArgumentOutOfRangeException : v");var i=Math.max(1,t*this.precision),n=Math.max(1,e*this.precision);return this.gcdInt(i,n)/this.precision}var r=t;if(null==r)throw new Error("ArgumentNullException : values");if(r.length<1)throw new Error("ArgumentException : Not enough values in the array. - values");var o=r[0];if(r.length>1)for(var s=r.length,a=1;a<s&&(o=this.gcd(r[a],o))!==1/this.precision;++a);return o},t.prototype.gcdInt=function(t,e){if(t<=0)throw new Error("ArgumentOutOfRangeException"+t+"The arguments cannot be less or equal to zero.");if(e<=0)throw new Error("ArgumentOutOfRangeException"+e+"The arguments cannot be less or equal to zero.");if(1===t||1===e)return 1;for(var i=0;this.isEven(t,e);)++i,t>>=1,e>>=1;for(;(1&t)<=0;)t>>=1;do{for(;(1&e)<=0;)e>>=1;if(t>e){var n=e;e=t,t=n}e-=t}while(0!==e);return t<<i},t.prototype.isEven=function(t,e){if("number"==typeof e&&void 0!==e){var i=!0;return i=(i=i&&(1&t)<=0)&&(1&e)<=0}return(1&t)<=0},t.prototype.interpolate=function(t,e,i,n){if(e instanceof rP){var r=new rP;switch(n){case DC.Rgb:var o=this.interpolate(t,e.red,i.red),s=this.interpolate(t,e.green,i.green),a=this.interpolate(t,e.blue,i.blue);r=new rP(o,s,a);break;case DC.GrayScale:var l=this.interpolate(t,e.gray,i.gray);r=new rP(l);break;case DC.Cmyk:var h=this.interpolate(t,e.c,i.c),c=this.interpolate(t,e.m,i.m),d=this.interpolate(t,e.y,i.y),p=this.interpolate(t,e.k,i.k);r=new rP(h,c,d,p)}return r}return 0===t?e:1===t?i:e+(i-e)/1*(t-0)},t}(),dL=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),pL=function(t){function e(e){var i=t.call(this)||this;return"number"==typeof e&&(i=t.call(this,e)||this),i}return dL(e,t),Object.defineProperty(e.prototype,"colors",{get:function(){return this.mcolors},set:function(t){if(null==t)throw new Error("ArgumentNullException : Colors");this.mcolors=t},enumerable:!0,configurable:!0}),e.prototype.getFunction=function(t){var e=this.getColorComponentsCount(t),i=this.getMaxComponentValue(t),n=this.setRange(e,i),r=null;if(null==this.mbrush&&void 0===this.mbrush){var o=[1],s=void 0,a=1;if(2===this.positions.length)s=2;else{var l=this.positions,h=this.getIntervals(l),c=this.gcd(h);a=c,s=1/c+1}o[0]=s;var d=this.getSamplesValues(t,s,i,a);return r=new aL([0,1],n,o,d)}return r},e.prototype.cloneColorBlend=function(){return null!=this.mcolors&&void 0!==this.mcolors&&(this.colors=this.mcolors),null!=this.positions&&void 0!==this.positions&&(this.positions=this.positions),this},e.prototype.setRange=function(t,e){for(var i=[2*t],n=0;n<t;++n)i[2*n]=0,i[2*n+1]=1;return i},e.prototype.getColorComponentsCount=function(t){var e=0;switch(t){case DC.Rgb:e=3;break;case DC.Cmyk:e=4;break;case DC.GrayScale:e=1;break;default:throw new Error("ArgumentException - Unsupported color space: "+t+" colorSpace")}return e},e.prototype.getSamplesValues=function(t,e,i,n){var r;switch(t){case DC.GrayScale:r=this.getGrayscaleSamples(e,i,n);break;case DC.Cmyk:r=this.getCmykSamples(e,i,n);break;case DC.Rgb:r=this.getRgbSamples(e,i,n);break;default:throw new Error("ArgumentException - Unsupported color space: "+t+" colorSpace")}return r},e.prototype.getGrayscaleSamples=function(t,e,i){for(var n=[2*t],r=0;r<t;++r)this.getNextColor(r,i,DC.GrayScale);return n},e.prototype.getRgbSamples=function(t,e,i){for(var n=[3*t],r=0;r<t;++r){var o=this.getNextColor(r,i,DC.Rgb),s=3*r;n[s]=o.r,n[s+1]=o.g,n[s+2]=o.b}return n},e.prototype.getCmykSamples=function(t,e,i){for(var n=[4*t],r=0;r<t;r++){var o=this.getNextColor(r,i,DC.Cmyk),s=4*r;n[s]=o.c*e,n[s+1]=o.m*e,n[s+2]=o.y*e,n[s+3]=o.k*e}return n},e.prototype.getNextColor=function(t,e,i){var n,r,o,s=e*t,a=this.getIndices(s,r,n);if((r=a.indexLow)===(n=a.indexHi))o=this.mcolors[r];else{var l=this.positions[r],h=this.positions[n],c=this.mcolors[r],d=this.mcolors[n],p=(s-l)/(h-l);o=this.interpolate(p,c,d,i)}return o},e.prototype.getIndices=function(t,e,i){var n=this.positions;e=0,i=0;for(var r=0;r<this.mcolors.length;++r){var o=n[r];if(o===t){i=r,e=r;break}if(o>t){i=r;break}e=r,i=r}return{indexLow:e,indexHi:i}},e.prototype.getMaxComponentValue=function(t){var e=0;switch(t){case DC.Cmyk:case DC.Rgb:e=255;break;case DC.GrayScale:e=65535;break;default:throw new Error("ArgumentException - Unsupported color space: "+t+"colorSpace")}return e},e.prototype.getIntervals=function(t){for(var e=t.length,i=[e-1],n=t[0],r=1;r<e;++r){var o=t[r];i[r-1]=o-n,n=o}return i},e}(cL),uL=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fL=function(t){function e(e,i,n,r){var o=t.call(this,new Yx)||this;if(o.mDictionaryProperties=new Xx,e instanceof oP&&i instanceof oP&&n instanceof rP&&r instanceof rP)o.initialize(n,r),o.mPointStart=e,o.mPointEnd=i,o.setPoints(o.mPointStart,o.mPointEnd);else if(e instanceof lP)if(o.initialize(i,n),r===eL.BackwardDiagonal||r===eL.ForwardDiagonal||r===eL.Horizontal||r===eL.Vertical){switch(o.mBoundaries=e,r){case eL.BackwardDiagonal:o.mPointStart=new oP(e.right,e.top),o.mPointEnd=new oP(e.left,e.bottom);break;case eL.ForwardDiagonal:o.mPointStart=new oP(e.left,e.top),o.mPointEnd=new oP(e.right,e.bottom);break;case eL.Horizontal:o.mPointStart=new oP(e.left,e.top),o.mPointEnd=new oP(e.right,e.top);break;case eL.Vertical:o.mPointStart=new oP(e.left,e.top),o.mPointEnd=new oP(e.left,e.bottom);break;default:throw new Error("ArgumentException -- Unsupported linear gradient mode: "+r+" mode")}o.setPoints(o.mPointStart,o.mPointEnd)}else if("number"==typeof r&&void 0!==r){if(o.mBoundaries=e,0===(r%=360))o.mPointStart=new oP(e.left,e.top),o.mPointEnd=new oP(e.right,e.top);else if(90===r)o.mPointStart=new oP(e.left,e.top),o.mPointEnd=new oP(e.left,e.bottom);else if(180===r)o.mPointEnd=new oP(e.left,e.top),o.mPointStart=new oP(e.right,e.top);else if(270===r)o.mPointEnd=new oP(e.left,e.top),o.mPointStart=new oP(e.left,e.bottom);else{var s=r*(Math.PI/180),a=Math.tan(s),l=o.mBoundaries.left+(o.mBoundaries.right-o.mBoundaries.left)/2,h=o.mBoundaries.top+(o.mBoundaries.bottom-o.mBoundaries.top)/2,c=new oP(l,h);h=a*(l=o.mBoundaries.width/(2*Math.cos(s))),l+=c.x,h+=c.y;var d=new oP(l,h),p=o.subPoints(d,c),u=o.choosePoint(r),f=o.mulPoints(o.subPoints(u,c),p)/o.mulPoints(p,p);o.mPointEnd=o.addPoints(c,o.mulPoint(p,f)),o.mPointStart=o.addPoints(c,o.mulPoint(p,-1*f))}o.setPoints(o.mPointEnd,o.mPointStart)}return o}return uL(e,t),e.prototype.initialize=function(t,e){this.mColours=[t,e],this.mColourBlend=new pL(2),this.mColourBlend.positions=[0,1],this.mColourBlend.colors=this.mColours,this.initShading()},Object.defineProperty(e.prototype,"blend",{get:function(){return this.mBlend},set:function(t){if(null==t)throw new Error("ArgumentNullException : Blend");if(null==this.mColours)throw new Error("NotSupportedException : There is no starting and ending colours specified.");this.mBlend=t,this.mColourBlend=this.mBlend.generateColorBlend(this.mColours,this.colorSpace),this.resetFunction()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interpolationColors",{get:function(){return this.mColourBlend},set:function(t){if(null==t)throw new Error("ArgumentNullException : InterpolationColors");this.mBlend=null,this.mColours=null,this.mColourBlend=t,this.resetFunction()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linearColors",{get:function(){return this.mColours},set:function(t){if(null==t)throw new Error("ArgumentNullException : LinearColors");if(t.length<2)throw new Error("ArgumentException : The array is too small - LinearColors");null==this.mColours&&void 0===this.mColours?this.mColours=[t[0],t[1]]:(this.mColours[0]=t[0],this.mColours[1]=t[1]),null==this.mBlend&&void 0===this.mBlend?(this.mColourBlend=new pL(2),this.mColourBlend.colors=this.mColours,this.mColourBlend.positions=[0,1]):this.mColourBlend=this.mBlend.generateColorBlend(this.mColours,this.colorSpace),this.resetFunction()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rectangle",{get:function(){return this.mBoundaries},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extend",{get:function(){var t=tL.None,e=this.shading.items.getValue(this.mDictionaryProperties.extend);if(null!=e){var i=e.items(0),n=e.items(1);i.value&&(t|=tL.Start),n.value&&(t|=tL.End)}return t},set:function(t){var e,i,n=this.shading.items.getValue(this.mDictionaryProperties.extend);null==n?(e=new QP(!1),i=new QP(!1),(n=new iC).add(e),n.add(i),this.shading.items.setValue(this.mDictionaryProperties.extend,n)):(e=n.items(0),i=n.items(1))},enumerable:!0,configurable:!0}),e.prototype.addPoints=function(t,e){var i=t.x+e.x,n=t.y+e.y;return new oP(i,n)},e.prototype.subPoints=function(t,e){var i=t.x-e.x,n=t.y-e.y;return new oP(i,n)},e.prototype.mulPoints=function(t,e){return t.x*e.x+t.y*e.y},e.prototype.mulPoint=function(t,e){return t.x=t.x*e,t.y=t.y*e,t},e.prototype.choosePoint=function(t){var e=new oP(0,0);if(t<90&&t>0)e=new oP(this.mBoundaries.right,this.mBoundaries.bottom);else if(t<180&&t>90)e=new oP(this.mBoundaries.left,this.mBoundaries.bottom);else if(t<270&&t>180)e=new oP(this.mBoundaries.left,this.mBoundaries.top);else{if(!(t>270))throw new Error("PdfException - Internal error.");e=new oP(this.mBoundaries.right,this.mBoundaries.top)}return e},e.prototype.setPoints=function(t,e){var i=new iC;i.add(new eC(t.x)),i.add(new eC(this.updateY(t.y))),i.add(new eC(e.x)),i.add(new eC(this.updateY(e.y))),this.shading.items.setValue(this.mDictionaryProperties.coords,i)},e.prototype.updateY=function(t){return 0!==t?-t:t},e.prototype.initShading=function(){this.colorSpace=DC.Rgb,this.function=this.mColourBlend.getFunction(this.colorSpace),this.shading.items.setValue(this.mDictionaryProperties.shadingType,new eC(iL.Axial))},e.prototype.clone=function(){return this.resetPatternDictionary(new Yx(this.patternDictionary)),this.shading=new Yx,this.initShading(),this.setPoints(this.mPointStart,this.mPointEnd),null!==this&&this instanceof e&&null!=this.matrix&&void 0!==this.matrix&&(this.matrix=this.matrix.clone()),null!=this.mColours&&void 0!==this.mColours&&(this.mColours=this.mColours),null!=this.blend&&void 0!==this.blend?this.blend=this.blend.clonePdfBlend():null!=this.interpolationColors&&void 0!==this.interpolationColors&&(this.interpolationColors=this.interpolationColors.cloneColorBlend()),this.extend=this.extend,this.cloneBackgroundValue(this),this.cloneAntiAliasingValue(this),this},e.prototype.resetFunction=function(){this.function=this.mColourBlend.getFunction(this.colorSpace)},e}(NO),gL=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mL=function(t){function e(e,i,n,r,o,s){var a=t.call(this,new Yx)||this;if(a.mDictionaryProperties=new Xx,a.initialize(o,s),i<0)throw new Error("ArgumentOutOfRangeException : radiusStart - The radius cannot be less then zero.");if(r<0)throw new Error("ArgumentOutOfRangeException : radiusEnd - The radius cannpt be less then zero.");return a.mPointEnd=n,a.mPointStart=e,a.mRadiusStart=i,a.mRadiusEnd=r,a.setPoints(a.mPointStart,a.mPointEnd,a.mRadiusStart,a.mRadiusEnd),a}return gL(e,t),e.prototype.initialize=function(t,e){this.mColour=[t,e],this.mColourBlends=new pL(2),this.mColourBlends.positions=[0,1],this.mColourBlends.colors=this.mColour,this.initShading()},Object.defineProperty(e.prototype,"blend",{get:function(){return this.mBlend},set:function(t){if(null==t)throw new Error("ArgumentNullException : Blend");if(null==this.mColour&&void 0===this.mColour)throw new Error("NotSupportedException : There is no starting and ending colours specified.");this.mBlend=t,this.mColourBlends=this.mBlend.generateColorBlend(this.mColour,this.colorSpace),this.resetFunction()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interpolationColors",{get:function(){return this.mColourBlends},set:function(t){if(null==t)throw new Error("ArgumentNullException : InterpolationColors");this.mBlend=null,this.mColour=null,this.mColourBlends=t,this.resetFunction()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linearColors",{get:function(){return this.mColour},set:function(t){if(null==t)throw new Error("ArgumentNullException : radial LinearColors");if(t.length<2)throw new Error("ArgumentException : The array is too small LinearColors");null==this.mColour&&void 0===this.mColour?this.mColour=[t[0],t[1]]:(this.mColour[0]=t[0],this.mColour[1]=t[1]),null==this.mBlend&&void 0===this.mBlend?(this.mColourBlends=new pL(2),this.mColourBlends.colors=this.mColour,this.mColourBlends.positions=[0,1]):this.mColourBlends=this.mBlend.generateColorBlend(this.mColour,this.colorSpace),this.resetFunction()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rectangle",{get:function(){return this.mBoundaries},set:function(t){this.mBoundaries=t,this.bBox=iC.fromRectangle(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extend",{get:function(){var t=tL.None,e=this.shading.items.getValue(this.mDictionaryProperties.extend);if(null!=e){var i=e.items(0),n=e.items(1);i.value&&(t|=tL.Start),n.value&&(t|=tL.End)}return t},set:function(t){var e,i,n=this.shading.items.getValue(this.mDictionaryProperties.extend);null==n&&void 0===n?(e=new QP(!1),i=new QP(!1),(n=new iC).add(e),n.add(i),this.shading.items.setValue(this.mDictionaryProperties.extend,n)):(e=n.items(0),i=n.items(1))},enumerable:!0,configurable:!0}),e.prototype.setPoints=function(t,e,i,n){var r=new iC;r.add(new eC(t.x)),r.add(new eC(this.updateY(t.y))),r.add(new eC(i)),r.add(new eC(e.x)),r.add(new eC(this.updateY(e.y))),i!==n?r.add(new eC(n)):r.add(new eC(0)),this.shading.items.setValue(this.mDictionaryProperties.coords,r)},e.prototype.updateY=function(t){return 0!==t?-t:t},e.prototype.initShading=function(){this.colorSpace=DC.Rgb,this.function=this.mColourBlends.getFunction(this.colorSpace),this.shading.items.setValue(this.mDictionaryProperties.shadingType,new eC(iL.Radial))},e.prototype.clone=function(){return this.resetPatternDictionary(new Yx(this.patternDictionary)),this.shading=new Yx,this.initShading(),this.setPoints(this.mPointStart,this.mPointEnd,this.mRadiusStart,this.mRadiusEnd),this instanceof e&&null!==this.matrix&&void 0!==this.matrix&&(this.matrix=this.matrix.clone()),null!==this.mColour&&void 0!==this.mColour&&(this.mColour=this.mColour),null!==this.blend&&void 0!==this.blend?this.blend=this.blend.clonePdfBlend():null!==this.interpolationColors&&void 0!==this.interpolationColors&&(this.interpolationColors=this.interpolationColors.cloneColorBlend()),this.extend=this.extend,this.cloneBackgroundValue(this),this.cloneAntiAliasingValue(this),this},e.prototype.resetFunction=function(){this.function=this.mColourBlends.getFunction(this.colorSpace)},e}(NO);!function(t){t[t.Overlap=0]="Overlap",t[t.Inside=1]="Inside"}(lL||(lL={}));var yL,vL=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bL=function(){function t(){}return Object.defineProperty(t.prototype,"backgroundBrush",{get:function(){return this.gridBackgroundBrush},set:function(t){this.gridBackgroundBrush=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textBrush",{get:function(){return this.gridTextBrush},set:function(t){this.gridTextBrush=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textPen",{get:function(){return this.gridTextPen},set:function(t){this.gridTextPen=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this.gridFont},set:function(t){this.gridFont=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundImage",{get:function(){return this.gridBackgroundImage},set:function(t){this.gridBackgroundImage=t},enumerable:!0,configurable:!0}),t}(),wL=function(t){function e(){var e=t.call(this)||this;return e.gridBorderOverlapStyle=lL.Overlap,e.bAllowHorizontalOverflow=!1,e.gridHorizontalOverflowType=yL.LastPage,e}return vL(e,t),Object.defineProperty(e.prototype,"cellSpacing",{get:function(){return void 0===this.gridCellSpacing&&(this.gridCellSpacing=0),this.gridCellSpacing},set:function(t){this.gridCellSpacing=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalOverflowType",{get:function(){return this.gridHorizontalOverflowType},set:function(t){this.gridHorizontalOverflowType=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowHorizontalOverflow",{get:function(){return this.bAllowHorizontalOverflow},set:function(t){this.bAllowHorizontalOverflow=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellPadding",{get:function(){return void 0===this.gridCellPadding&&(this.gridCellPadding=new AE),this.gridCellPadding},set:function(t){void 0===this.gridCellPadding?(this.gridCellPadding=new AE,this.gridCellPadding=t):this.gridCellPadding=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderOverlapStyle",{get:function(){return this.gridBorderOverlapStyle},set:function(t){this.gridBorderOverlapStyle=t},enumerable:!0,configurable:!0}),e}(bL),SL=function(t){function e(){var e=t.call(this)||this;return e.gridCellBorders=TE.default,e}return vL(e,t),Object.defineProperty(e.prototype,"stringFormat",{get:function(){return this.format},set:function(t){this.format=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borders",{get:function(){return this.gridCellBorders},set:function(t){this.gridCellBorders=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellPadding",{get:function(){return this.gridCellPadding},set:function(t){null!=this.gridCellPadding&&void 0!==this.gridCellPadding||(this.gridCellPadding=new AE),this.gridCellPadding=t},enumerable:!0,configurable:!0}),e}(bL),xL=function(){function t(){}return Object.defineProperty(t.prototype,"backgroundBrush",{get:function(){return this.gridRowBackgroundBrush},enumerable:!0,configurable:!0}),t.prototype.setBackgroundBrush=function(t){if(this.gridRowBackgroundBrush=t,void 0!==this.parent)for(var e=0;e<this.parent.cells.count;e++)this.parent.cells.getCell(e).style.backgroundBrush=t},Object.defineProperty(t.prototype,"textBrush",{get:function(){return this.gridRowTextBrush},enumerable:!0,configurable:!0}),t.prototype.setTextBrush=function(t){if(this.gridRowTextBrush=t,void 0!==this.parent)for(var e=0;e<this.parent.cells.count;e++)this.parent.cells.getCell(e).style.textBrush=t},Object.defineProperty(t.prototype,"textPen",{get:function(){return this.gridRowTextPen},enumerable:!0,configurable:!0}),t.prototype.setTextPen=function(t){if(this.gridRowTextPen=t,void 0!==this.parent)for(var e=0;e<this.parent.cells.count;e++)this.parent.cells.getCell(e).style.textPen=t},Object.defineProperty(t.prototype,"font",{get:function(){return this.gridRowFont},enumerable:!0,configurable:!0}),t.prototype.setFont=function(t){if(this.gridRowFont=t,void 0!==this.parent)for(var e=0;e<this.parent.cells.count;e++)this.parent.cells.getCell(e).style.font=t},Object.defineProperty(t.prototype,"border",{get:function(){return void 0===this.gridRowBorder&&this.setBorder(new TE),this.gridRowBorder},enumerable:!0,configurable:!0}),t.prototype.setBorder=function(t){if(this.gridRowBorder=t,void 0!==this.parent)for(var e=0;e<this.parent.cells.count;e++)this.parent.cells.getCell(e).style.borders=t},t.prototype.setParent=function(t){this.parent=t},Object.defineProperty(t.prototype,"backgroundImage",{get:function(){return this.gridRowBackgroundImage},enumerable:!0,configurable:!0}),t}();!function(t){t[t.NextPage=0]="NextPage",t[t.LastPage=1]="LastPage"}(yL||(yL={}));var CL=function(){function t(t){this.cellWidth=0,this.cellHeight=0,this.tempval=0,this.fontSpilt=!1,this.finsh=!0,this.rowSpanRemainingHeight=0,this.hasRowSpan=!1,this.hasColSpan=!1,this.isFinish=!0,this.present=!1,this.gridRowSpan=1,this.colSpan=1,void 0!==t&&(this.gridRow=t)}return Object.defineProperty(t.prototype,"isCellMergeContinue",{get:function(){return this.internalIsCellMergeContinue},set:function(t){this.internalIsCellMergeContinue=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRowMergeContinue",{get:function(){return this.internalIsRowMergeContinue},set:function(t){this.internalIsRowMergeContinue=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCellMergeStart",{get:function(){return this.internalIsCellMergeStart},set:function(t){this.internalIsCellMergeStart=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRowMergeStart",{get:function(){return this.internalIsRowMergeStart},set:function(t){this.internalIsRowMergeStart=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"remainingString",{get:function(){return this.remaining},set:function(t){this.remaining=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FinishedDrawingCell",{get:function(){return this.isFinish},set:function(t){this.isFinish=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stringFormat",{get:function(){return null==this.format&&(this.format=new uP),this.format},set:function(t){this.format=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"row",{get:function(){return this.gridRow},set:function(t){this.gridRow=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.objectValue},set:function(t){if(this.objectValue=t,this.objectValue instanceof BL){this.row.grid.isSingleGrid=!1,this.objectValue.ParentCell=this,this.objectValue.isChildGrid=!0;for(var e=this.row.grid.rows.count,i=0;i<e;i++)for(var n=this.row.grid.rows.getRow(i),r=n.cells.count,o=0;o<r;o++){n.cells.getCell(o).parent=this}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowSpan",{get:function(){return this.gridRowSpan},set:function(t){if(t<1)throw new Error("ArgumentException : Invalid span specified, must be greater than or equal to 1");this.gridRowSpan=t,this.row.rowSpanExists=!0,this.row.grid.hasRowSpanSpan=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return null==this.cellStyle&&(this.cellStyle=new SL),this.cellStyle},set:function(t){this.cellStyle=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return 0===this.cellHeight&&(this.cellHeight=this.measureHeight()),this.cellHeight},set:function(t){this.cellHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnSpan",{get:function(){return this.colSpan},set:function(t){if(t<1)throw Error("Invalid span specified, must be greater than or equal to 1");this.colSpan=t,this.row.columnSpanExists=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return(0===this.cellWidth||this.row.grid.isComplete)&&(this.cellWidth=this.measureWidth()),Math.round(this.cellWidth)},set:function(t){this.cellWidth=t},enumerable:!0,configurable:!0}),t.prototype.measureWidth=function(){var t=0,e=new gP;if("string"==typeof this.objectValue)t+=e.layout(this.objectValue,this.getTextFont(),this.stringFormat,new sP(Number.MAX_VALUE,Number.MAX_VALUE),!1,new sP(0,0)).actualSize.width,t+=2*(this.style.borders.left.width+this.style.borders.right.width);else if(this.objectValue instanceof BL)t=this.objectValue.size.width;else if(this.objectValue instanceof rO||this.objectValue instanceof sO)t+=this.objectValue.width;else if(this.objectValue instanceof VE){var i=this.objectValue;t+=e.layout(i.text,i.font,i.stringFormat,new sP(0,0),!1,new sP(0,0)).actualSize.width,t+=2*(this.style.borders.left.width+this.style.borders.right.width)}return this.objectValue instanceof BL?null!=this.style.cellPadding||void 0!==this.style.cellPadding?(void 0!==this.style.cellPadding.left&&this.style.cellPadding.hasLeftPad&&(t+=this.style.cellPadding.left),void 0!==this.style.cellPadding.right&&this.style.cellPadding.hasRightPad&&(t+=this.style.cellPadding.right)):(void 0!==this.row.grid.style.cellPadding.left&&this.row.grid.style.cellPadding.hasLeftPad&&(t+=this.row.grid.style.cellPadding.left),void 0!==this.row.grid.style.cellPadding.right&&this.row.grid.style.cellPadding.hasRightPad&&(t+=this.row.grid.style.cellPadding.right)):null!=this.style.cellPadding?t+=this.style.cellPadding.left+this.style.cellPadding.right:t+=this.row.grid.style.cellPadding.left+this.row.grid.style.cellPadding.right,t+=this.row.grid.style.cellSpacing},t.prototype.drawCellBackground=function(t,e){var i=this.getBackgroundBrush();if(null!=i&&(t.save(),t.drawRectangle(i,e.x,e.y,e.width,e.height),t.restore()),null!=this.style.backgroundImage){this.getBackgroundImage();t.drawImage(this.style.backgroundImage,e.x,e.y,e.width,e.height)}},t.prototype.adjustContentLayoutArea=function(t){var e=new aP(t.x,t.y,t.width,t.height);return this.objectValue instanceof BL?(null==this.style.cellPadding||void 0===this.style.cellPadding?(void 0!==this.gridRow.grid.style.cellPadding.left&&this.gridRow.grid.style.cellPadding.hasLeftPad&&(e.x+=this.gridRow.grid.style.cellPadding.left+this.cellStyle.borders.left.width,e.width-=this.gridRow.grid.style.cellPadding.left),void 0!==this.gridRow.grid.style.cellPadding.top&&this.gridRow.grid.style.cellPadding.hasTopPad&&(e.y+=this.gridRow.grid.style.cellPadding.top+this.cellStyle.borders.top.width,e.height-=this.gridRow.grid.style.cellPadding.top),void 0!==this.gridRow.grid.style.cellPadding.right&&this.gridRow.grid.style.cellPadding.hasRightPad&&(e.width-=this.gridRow.grid.style.cellPadding.right),void 0!==this.gridRow.grid.style.cellPadding.bottom&&this.gridRow.grid.style.cellPadding.hasBottomPad&&(e.height-=this.gridRow.grid.style.cellPadding.bottom)):(void 0!==this.style.cellPadding.left&&this.style.cellPadding.hasLeftPad&&(e.x+=this.style.cellPadding.left+this.cellStyle.borders.left.width,e.width-=this.style.cellPadding.left),void 0!==this.style.cellPadding.top&&this.style.cellPadding.hasTopPad&&(e.y+=this.style.cellPadding.top+this.cellStyle.borders.top.width,e.height-=this.style.cellPadding.top),void 0!==this.style.cellPadding.right&&this.style.cellPadding.hasRightPad&&(e.width-=this.style.cellPadding.right),void 0!==this.style.cellPadding.bottom&&this.style.cellPadding.hasBottomPad&&(e.height-=this.style.cellPadding.bottom)),e.width-=this.cellStyle.borders.left.width+this.cellStyle.borders.right.width,e.height-=this.cellStyle.borders.top.width+this.cellStyle.borders.bottom.width):void 0===this.style.cellPadding||null==this.style.cellPadding?(e.x+=this.gridRow.grid.style.cellPadding.left+this.cellStyle.borders.left.width,e.y+=this.gridRow.grid.style.cellPadding.top+this.cellStyle.borders.top.width,e.width-=this.gridRow.grid.style.cellPadding.right+this.gridRow.grid.style.cellPadding.left,e.height-=this.gridRow.grid.style.cellPadding.bottom+this.gridRow.grid.style.cellPadding.top,e.height-=this.cellStyle.borders.top.width+this.cellStyle.borders.bottom.width):(e.x+=this.style.cellPadding.left+this.cellStyle.borders.left.width,e.y+=this.style.cellPadding.top+this.cellStyle.borders.top.width,e.width-=this.style.cellPadding.right+this.style.cellPadding.left,e.width-=this.cellStyle.borders.left.width+this.cellStyle.borders.right.width,e.height-=this.style.cellPadding.bottom+this.style.cellPadding.top,e.height-=this.cellStyle.borders.top.width+this.cellStyle.borders.bottom.width,1===this.rowSpan&&(e.width-=this.style.borders.left.width)),e},t.prototype.draw=function(t,e,i){var n=null;if(this.internalIsCellMergeContinue||this.internalIsRowMergeContinue){if(!this.internalIsCellMergeContinue||!this.row.grid.style.allowHorizontalOverflow)return n;if(this.row.rowOverflowIndex>0&&this.row.cells.indexOf(this)!=this.row.rowOverflowIndex+1||0==this.row.rowOverflowIndex&&this.internalIsCellMergeContinue)return n}e=this.adjustOuterLayoutArea(e,t),this.drawCellBackground(t,e);var r=this.getTextPen(),o=this.getTextBrush();void 0===r&&void 0===o&&(o=new dP(new rP(0,0,0)));var s=this.getTextFont(),a=this.getStringFormat(),l=e;if(l.height>=t.clientSize.height&&this.row.grid.allowRowBreakAcrossPages&&(l.height-=l.y),l=this.adjustContentLayoutArea(l),"string"==typeof this.objectValue||"string"==typeof this.remaining){var h=void 0,c=void 0;if(c=l.height<s.height?new aP(l.x,l.y,l.width,s.height):l,l.height<s.height&&this.row.grid.isChildGrid&&null!=this.row.grid.ParentCell){var d=c.height-this.row.grid.ParentCell.row.grid.style.cellPadding.bottom-this.row.grid.style.cellPadding.bottom;-1!=this.row.grid.splitChildRowIndex&&(this.fontSpilt=!0,this.row.rowFontSplit=!0),d>0&&d<s.height&&(c.height=d)}0!=this.gridRow.grid.style.cellSpacing&&(c.width-=this.gridRow.grid.style.cellSpacing,e.width-=this.gridRow.grid.style.cellSpacing),this.isFinish?(h=""===this.remaining?this.remaining:this.objectValue,t.drawString(h,s,r,o,c.x,c.y,c.width,c.height,a),-1==this.row.grid.splitChildRowIndex||this.row.grid.isChildGrid||void 0!==this.remaining||(this.remaining="")):(void 0!==this.remaining&&null!==this.remaining||(this.remaining=""),this.row.repeatFlag&&t.drawString(this.remaining,s,r,o,c.x,c.y,c.width,c.height,a),this.isFinish=!0),n=t.stringLayoutResult}else if(this.objectValue instanceof BL){var p=this.objectValue;p.isChildGrid=!0,p.ParentCell=this;var u;u=l,0!=this.gridRow.grid.style.cellSpacing&&(e.width-=this.gridRow.grid.style.cellSpacing);var f=new ML(p),g=new RL;null!=this.row.grid.LayoutFormat?g=this.row.grid.LayoutFormat:g.layout=$P.Paginate;var m=new LE;if(null!=t.layer){m.page=t.page,m.bounds=u,m.format=g,p.setSpan(),p.checkSpan();var y=f.Layouter(m);this.value=p,-1!==this.row.grid.splitChildRowIndex&&(this.height=this.row.rowBreakHeightValue),m.page!=y.page&&(y.bounds.height=this.row.rowBreakHeightValue,0==this.row.rowBreakHeight?this.row.NestedGridLayoutResult=y:this.row.rowBreakHeight=this.row.rowBreakHeightValue)}}else if(this.objectValue instanceof rO||this.objectValue instanceof sO){var v=void 0;v=this.objectValue.width<=l.width?new aP(l.x,l.y,this.objectValue.width,l.height):l,t.drawImage(this.objectValue,v.x,v.y,v.width,v.height)}else this.objectValue instanceof VE?this.objectValue.draw(t.currentPage,l):void 0===this.objectValue&&(this.objectValue="",t.drawString(this.objectValue,s,r,o,l.x,l.y,l.width,l.height,a),null!=this.style.cellPadding&&0==this.style.cellPadding.bottom&&0==this.style.cellPadding.left&&0==this.style.cellPadding.right&&0==this.style.cellPadding.top&&(e.width-=this.style.borders.left.width+this.style.borders.right.width),0!=this.gridRow.grid.style.cellSpacing&&(e.width-=this.gridRow.grid.style.cellSpacing));return null!=this.style.borders&&(this.fontSpilt?-1!=this.row.grid.ParentCell.row.grid.splitChildRowIndex&&(this.row.rowFontSplit=!1,this.drawCellBorders(t,e)):this.drawCellBorders(t,e)),n},t.prototype.drawCellBorders=function(t,e){this.row.grid.style.borderOverlapStyle===lL.Inside&&(e.x+=this.style.borders.left.width,e.y+=this.style.borders.top.width,e.width-=this.style.borders.right.width,e.height-=this.style.borders.bottom.width);var i=new oP(e.x,e.y+e.height),n=new oP(e.x,e.y),r=this.cellStyle.borders.left;this.cellStyle.borders.left.dashStyle===kC.Solid&&(r.lineCap=BC.Square),0!==r.width&&t.drawLine(r,i,n),i=new oP(e.x+e.width,e.y),n=new oP(e.x+e.width,e.y+e.height),r=this.cellStyle.borders.right,e.x+e.width>t.clientSize.width-r.width/2&&(i=new oP(t.clientSize.width-r.width/2,e.y),n=new oP(t.clientSize.width-r.width/2,e.y+e.height)),this.cellStyle.borders.right.dashStyle===kC.Solid&&(r.lineCap=BC.Square),0!==r.width&&t.drawLine(r,i,n),i=new oP(e.x,e.y),n=new oP(e.x+e.width,e.y),r=this.cellStyle.borders.top,this.cellStyle.borders.top.dashStyle===kC.Solid&&(r.lineCap=BC.Square),0!==r.width&&t.drawLine(r,i,n),i=new oP(e.x+e.width,e.y+e.height),n=new oP(e.x,e.y+e.height),r=this.cellStyle.borders.bottom,e.y+e.height>t.clientSize.height-r.width/2&&(i=new oP(e.x+e.width,t.clientSize.height-r.width/2),n=new oP(e.x,t.clientSize.height-r.width/2)),this.cellStyle.borders.bottom.dashStyle===kC.Solid&&(r.lineCap=BC.Square),0!==r.width&&t.drawLine(r,i,n)},t.prototype.adjustOuterLayoutArea=function(t,e){var i=!1,n=this.row.grid.style.cellSpacing;n>0&&(t=new aP(t.x+n,t.y+n,t.width-n,t.height-n));var r=this.row.cells.indexOf(this);if(this.columnSpan>1||this.row.rowOverflowIndex>0&&r==this.row.rowOverflowIndex+1&&this.isCellMergeContinue){if(1==(h=this.columnSpan)&&this.isCellMergeContinue)for(var o=r+1;o<this.row.grid.columns.count&&this.row.cells.getCell(o).isCellMergeContinue;o++)h++;for(var s=0,a=r;a<r+h;a++){if(this.row.grid.style.allowHorizontalOverflow){var l=this.row.grid.size.width<e.clientSize.width?this.row.grid.size.width:e.clientSize.width;if((this.row.grid.size.width>e.clientSize.width?t.x+s+this.row.grid.columns.getColumn(a).width:s+this.row.grid.columns.getColumn(a).width)>l)break}s+=this.row.grid.columns.getColumn(a).width}s-=this.row.grid.style.cellSpacing,t.width=s}if(this.rowSpan>1||this.row.rowSpanExists){var h=this.rowSpan,c=this.row.grid.rows.rowCollection.indexOf(this.row);-1==c&&-1!=(c=this.row.grid.headers.indexOf(this.row))&&(i=!0);var d=0;for(a=c;a<c+h;a++){d+=i?this.row.grid.headers.getHeader(a).height:this.row.grid.rows.getRow(a).height;var p=this.row.grid.rows.getRow(a);this.row.grid.rows.rowCollection.indexOf(p)}this.row.cells.indexOf(this);d-=this.row.grid.style.cellSpacing,t.height=d,this.row.rowMergeComplete||(t.height=d)}return t},t.prototype.getTextFont=function(){return void 0!==this.style.font&&null!=this.style.font?this.style.font:void 0!==this.row.style.font&&null!=this.row.style.font?this.row.style.font:void 0!==this.row.grid.style.font&&null!=this.row.grid.style.font?this.row.grid.style.font:fE.defaultFont},t.prototype.getTextBrush=function(){return void 0!==this.style.textBrush&&null!=this.style.textBrush?this.style.textBrush:void 0!==this.row.style.textBrush&&null!=this.row.style.textBrush?this.row.style.textBrush:this.row.grid.style.textBrush},t.prototype.getTextPen=function(){return void 0!==this.style.textPen&&null!=this.style.textPen?this.style.textPen:void 0!==this.row.style.textPen&&null!=this.row.style.textPen?this.row.style.textPen:this.row.grid.style.textPen},t.prototype.getBackgroundBrush=function(){return void 0!==this.style.backgroundBrush&&null!=this.style.backgroundBrush?this.style.backgroundBrush:void 0!==this.row.style.backgroundBrush&&null!=this.row.style.backgroundBrush?this.row.style.backgroundBrush:this.row.grid.style.backgroundBrush},t.prototype.getBackgroundImage=function(){return void 0!==this.style.backgroundImage&&null!=this.style.backgroundImage?this.style.backgroundImage:void 0!==this.row.style.backgroundImage&&null!=this.row.style.backgroundImage?this.row.style.backgroundImage:this.row.grid.style.backgroundImage},t.prototype.getStringFormat=function(){return void 0!==this.style.stringFormat&&null!=this.style.stringFormat?this.style.stringFormat:this.stringFormat},t.prototype.measureHeight=function(){var t=this.calculateWidth();null==this.style.cellPadding||void 0===this.style.cellPadding?t-=this.gridRow.grid.style.cellPadding.right+this.gridRow.grid.style.cellPadding.left:(t-=this.style.cellPadding.right+this.style.cellPadding.left,t-=this.style.borders.left.width+this.style.borders.right.width);var e=0,i=new gP;if("string"==typeof this.objectValue||"string"==typeof this.remaining){var n=this.objectValue;this.isFinish||(n=null!==this.remaining&&""!==this.remaining&&void 0!==this.remaining?this.remaining:this.objectValue);var r=this.row.cells.indexOf(this);0!=this.gridRow.grid.style.cellSpacing&&(t-=2*this.gridRow.grid.style.cellSpacing),this.row.cells.getCell(r).hasColSpan||this.row.cells.getCell(r).hasRowSpan||(this.gridRow.grid.isChildGrid?(t<0?(this.tempval=t,null==this.style.cellPadding||void 0===this.style.cellPadding?this.tempval+=this.gridRow.grid.style.cellPadding.right+this.gridRow.grid.style.cellPadding.left:(this.tempval+=this.style.cellPadding.right+this.style.cellPadding.left,this.tempval+=this.style.borders.left.width+this.style.borders.right.width)):this.tempval=t,e+=i.layout(n,this.getTextFont(),this.stringFormat,new sP(this.tempval,0),!1,new sP(0,0)).actualSize.height):e+=i.layout(n,this.getTextFont(),this.stringFormat,new sP(t,0),!1,new sP(0,0)).actualSize.height),e+=2*(this.style.borders.top.width+this.style.borders.bottom.width)}else if(this.objectValue instanceof BL){r=this.row.cells.indexOf(this);var o=0;null!=this.style.cellPadding||void 0!==this.style.cellPadding?(o=this.calculateWidth(),void 0!==this.style.cellPadding.left&&this.style.cellPadding.hasLeftPad&&(o-=this.style.cellPadding.left),void 0!==this.style.cellPadding.right&&this.style.cellPadding.hasRightPad&&(o-=this.style.cellPadding.right)):null!=this.row.grid.style.cellPadding||void 0!==this.row.grid.style.cellPadding?(o=this.calculateWidth(),void 0!==this.row.grid.style.cellPadding.left&&this.row.grid.style.cellPadding.hasLeftPad&&(o-=this.row.grid.style.cellPadding.left),void 0!==this.row.grid.style.cellPadding.right&&this.row.grid.style.cellPadding.hasRightPad&&(o-=this.row.grid.style.cellPadding.right)):o=this.calculateWidth(),this.objectValue.tempWidth=o,this.row.cells.getCell(r).hasColSpan||this.row.cells.getCell(r).hasRowSpan?e+=2*(this.style.borders.top.width+this.style.borders.bottom.width):e=this.objectValue.size.height,0!==this.gridRow.grid.style.cellSpacing&&(t-=2*this.gridRow.grid.style.cellSpacing),null==this.style.cellPadding&&void 0===this.style.cellPadding||(void 0!==this.row.grid.style.cellPadding.top&&this.row.grid.style.cellPadding.hasTopPad&&(e+=this.row.grid.style.cellPadding.top),this.row.grid.style.cellPadding.hasBottomPad&&void 0!==this.row.grid.style.cellPadding.bottom&&(e+=this.row.grid.style.cellPadding.bottom)),e+=this.objectValue.style.cellSpacing}else if(this.objectValue instanceof rO||this.objectValue instanceof sO)e+=this.objectValue.height;else if(this.objectValue instanceof VE){var s=this.objectValue;e+=i.layout(s.text,s.font,s.stringFormat,new sP(t,0),!1,new sP(0,0)).actualSize.height,e+=2*(this.style.borders.top.width+this.style.borders.bottom.width)}else void 0===this.objectValue&&(null==this.style.cellPadding||void 0===this.style.cellPadding?t-=this.gridRow.grid.style.cellPadding.right+this.gridRow.grid.style.cellPadding.left:(t-=this.style.cellPadding.right+this.style.cellPadding.left,t-=this.style.borders.left.width+this.style.borders.right.width),e+=2*(this.style.borders.top.width+this.style.borders.bottom.width));return this.objectValue instanceof BL?null==this.style.cellPadding||void 0===this.style.cellPadding?(void 0!==this.row.grid.style.cellPadding.top&&this.row.grid.style.cellPadding.hasTopPad&&(e+=this.row.grid.style.cellPadding.top),void 0!==this.row.grid.style.cellPadding.bottom&&this.row.grid.style.cellPadding.hasBottomPad&&(e+=this.row.grid.style.cellPadding.bottom)):(void 0!==this.style.cellPadding.top&&this.style.cellPadding.hasTopPad&&(e+=this.style.cellPadding.top),void 0!==this.style.cellPadding.bottom&&this.style.cellPadding.hasBottomPad&&(e+=this.style.cellPadding.bottom)):null==this.style.cellPadding||void 0===this.style.cellPadding?e+=this.row.grid.style.cellPadding.top+this.row.grid.style.cellPadding.bottom:e+=this.style.cellPadding.top+this.style.cellPadding.bottom,e+=this.row.grid.style.cellSpacing},t.prototype.calculateWidth=function(){var t=this.row.cells.indexOf(this),e=(this.row.grid.rows.rowCollection.indexOf(this.row),this.columnSpan),i=0;if(1===e)for(var n=0;n<e;n++)i+=this.row.grid.columns.getColumn(t+n).width;else if(e>1)for(n=0;n<e;n++)i+=this.row.grid.columns.getColumn(t+n).width,n+1<e&&(this.row.cells.getCell(t+n+1).hasColSpan=!0);if(null!=this.parent&&this.parent.row.width>0&&this.row.grid.isChildGrid&&null!=this.parent&&this.row.width>this.parent.row.width){i=0;for(var r=0;r<this.parent.columnSpan;r++)i+=this.parent.row.grid.columns.getColumn(r).width;i/=this.row.cells.count}return i},t}(),PL=function(){function t(t){this.cells=[],this.gridRow=t}return t.prototype.getCell=function(t){if(t<0||t>=this.count)throw new Error("IndexOutOfRangeException");return this.cells[t]},Object.defineProperty(t.prototype,"count",{get:function(){return this.cells.length},enumerable:!0,configurable:!0}),t.prototype.add=function(t){if(void 0===t){var e=new CL;return this.add(e),t}t.row=this.gridRow,this.cells.push(t)},t.prototype.indexOf=function(t){return this.cells.indexOf(t)},t}(),OL=function(){function t(t){this.columnWidth=0,this.grid=t}return Object.defineProperty(t.prototype,"width",{get:function(){return this.columnWidth},set:function(t){this.isCustomWidth=!0,this.columnWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return null==this.stringFormat&&(this.stringFormat=new uP),this.stringFormat},set:function(t){this.stringFormat=t},enumerable:!0,configurable:!0}),t}(),EL=function(){function t(t){this.internalColumns=[],this.columnWidth=0,this.grid=t,this.internalColumns=[]}return t.prototype.add=function(t){for(var e=0;e<t;e++){this.internalColumns.push(new OL(this.grid));for(var i=0;i<this.grid.rows.count;i++){var n=this.grid.rows.getRow(i),r=new CL;r.value="",n.cells.add(r)}}},Object.defineProperty(t.prototype,"count",{get:function(){return this.internalColumns.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return 0===this.columnWidth&&(this.columnWidth=this.measureColumnsWidth()),0===this.grid.initialWidth||this.columnWidth===this.grid.initialWidth||this.grid.style.allowHorizontalOverflow||(this.columnWidth=this.grid.initialWidth,this.grid.isPageWidth=!0),this.columnWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this.internalColumns},enumerable:!0,configurable:!0}),t.prototype.getColumn=function(t){if(t>=0&&t<=this.columns.length)return this.columns[t];throw Error("can not get the column from the index: "+t)},t.prototype.measureColumnsWidth=function(){var t=0;this.grid.measureColumnsWidth();for(var e=0,i=this.internalColumns.length;e<i;e++)t+=this.internalColumns[e].width;return t},t.prototype.getDefaultWidths=function(t){for(var e=[],i=this.count,n=0;n<this.count;n++)this.grid.isPageWidth&&t>=0&&!this.internalColumns[n].isCustomWidth?this.internalColumns[n].width=0:(e[n]=this.internalColumns[n].width,this.internalColumns[n].width>0&&this.internalColumns[n].isCustomWidth?(t-=this.internalColumns[n].width,i--):e[n]=0);for(n=0;n<this.count;n++){var r=t/i;e[n]<=0&&(e[n]=r)}return e},t}(),LL=function(){function t(t){this.gridRowOverflowIndex=0,this.rowHeight=0,this.rowWidth=0,this.isrowFinish=!1,this.isRowSpanRowHeightSet=!1,this.noOfPageCount=0,this.isRowHeightSet=!1,this.isPageBreakRowSpanApplied=!1,this.isRowMergeComplete=!0,this.repeatFlag=!1,this.rowFontSplit=!1,this.pdfGrid=t}return Object.defineProperty(t.prototype,"rowSpanExists",{get:function(){return this.bRowSpanExists},set:function(t){this.bRowSpanExists=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cells",{get:function(){return null==this.gridCells&&(this.gridCells=new PL(this)),this.gridCells},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){return this.pdfGrid},set:function(t){this.pdfGrid=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return void 0===this.rowStyle&&(this.rowStyle=new xL,this.rowStyle.setParent(this)),this.rowStyle},set:function(t){this.rowStyle=t;for(var e=0;e<this.cells.count;e++)this.cells.getCell(e).style.borders=t.border,void 0!==t.font&&(this.cells.getCell(e).style.font=t.font),void 0!==t.backgroundBrush&&(this.cells.getCell(e).style.backgroundBrush=t.backgroundBrush),void 0!==t.backgroundImage&&(this.cells.getCell(e).style.backgroundImage=t.backgroundImage),void 0!==t.textBrush&&(this.cells.getCell(e).style.textBrush=t.textBrush),void 0!==t.textPen&&(this.cells.getCell(e).style.textPen=t.textPen)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowBreakHeight",{get:function(){return void 0===this.gridRowBreakHeight&&(this.gridRowBreakHeight=0),this.gridRowBreakHeight},set:function(t){this.gridRowBreakHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowOverflowIndex",{get:function(){return this.gridRowOverflowIndex},set:function(t){this.gridRowOverflowIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.isRowHeightSet||(this.rowHeight=this.measureHeight()),this.rowHeight},set:function(t){this.rowHeight=t,this.isRowHeightSet=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return 0!==this.rowWidth&&void 0!==this.rowWidth||(this.rowWidth=this.measureWidth()),this.rowWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"NestedGridLayoutResult",{get:function(){return this.gridResult},set:function(t){this.gridResult=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnSpanExists",{get:function(){return this.bColumnSpanExists},set:function(t){this.bColumnSpanExists=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowMergeComplete",{get:function(){return this.isRowMergeComplete},set:function(t){this.isRowMergeComplete=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowIndex",{get:function(){return this.grid.rows.rowCollection.indexOf(this)},enumerable:!0,configurable:!0}),t.prototype.measureHeight=function(){var t,e=0,i=0;t=this.cells.getCell(0).rowSpan>1?0:this.cells.getCell(0).height;for(var n=0;n<this.cells.count;n++){var r=this.cells.getCell(n);if(r.rowSpanRemainingHeight>e&&(e=r.rowSpanRemainingHeight),this.rowMergeComplete=!1,r.rowSpan>1){for(var o=n,s=this.grid.rows.rowCollection.indexOf(this),a=0;a<r.rowSpan;a++)a+1<r.rowSpan&&(this.grid.rows.getRow(s+a+1).cells.getCell(o).hasRowSpan=!0);i<r.height&&(i=r.height)}else t=Math.max(t,r.height)}return i>t&&(t=i),0===t?t=i:e>0&&(t+=e),t},t.prototype.measureWidth=function(){for(var t=0,e=0;e<this.grid.columns.count;e++){t+=this.grid.columns.getColumn(e).width}return t},t}(),IL=function(){function t(t){this.rows=[],this.grid=t}return Object.defineProperty(t.prototype,"count",{get:function(){return this.rows.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowCollection",{get:function(){return this.rows},enumerable:!0,configurable:!0}),t.prototype.addRow=function(t){if(void 0===t){var e=new LL(this.grid);return this.addRow(e),e}if(t.style.setBackgroundBrush(this.grid.style.backgroundBrush),t.style.setFont(this.grid.style.font),t.style.setTextBrush(this.grid.style.textBrush),t.style.setTextPen(this.grid.style.textPen),0===t.cells.count)for(var i=0;i<this.grid.columns.count;i++)t.cells.add(new CL);this.rows.push(t)},t.prototype.getRow=function(t){return this.rows[t]},t}(),TL=function(){function t(t){this.rows=[],this.grid=t,this.rows=[]}return t.prototype.getHeader=function(t){return this.rows[t]},Object.defineProperty(t.prototype,"count",{get:function(){return this.rows.length},enumerable:!0,configurable:!0}),t.prototype.add=function(t){if("number"==typeof t){for(var e=void 0,i=0;i<t;i++){e=new LL(this.grid);for(var n=0;n<this.grid.columns.count;n++)e.cells.add(new CL);this.rows.push(e)}return this.rows}this.rows.push(t)},t.prototype.indexOf=function(t){return this.rows.indexOf(t)},t}(),AL=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),BL=function(t){function e(){var e=t.call(this)||this;return e.gridSize=new sP(0,0),e.isGridSplit=!1,e.isRearranged=!1,e.pageBounds=new aP,e.listOfNavigatePages=[],e.parentCellIndex=0,e.tempWidth=0,e.breakRow=!0,e.splitChildRowIndex=-1,e.hasRowSpanSpan=!1,e.hasColumnSpan=!1,e.isSingleGrid=!0,e}return AL(e,t),Object.defineProperty(e.prototype,"raiseBeginCellDraw",{get:function(){return void 0!==this.beginCellDraw&&null!==typeof this.beginCellDraw},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"raiseEndCellDraw",{get:function(){return void 0!==this.endCellDraw&&null!==typeof this.endCellDraw},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"repeatHeader",{get:function(){return null!=this.bRepeatHeader&&void 0!==this.bRepeatHeader||(this.bRepeatHeader=!1),this.bRepeatHeader},set:function(t){this.bRepeatHeader=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowRowBreakAcrossPages",{get:function(){return this.breakRow},set:function(t){this.breakRow=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return null!=this.gridColumns&&void 0!==this.gridColumns||(this.gridColumns=new EL(this)),this.gridColumns},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return null==this.gridRows&&(this.gridRows=new IL(this)),this.gridRows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){return null!=this.gridHeaders&&void 0!==this.gridHeaders||(this.gridHeaders=new TL(this)),this.gridHeaders},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initialWidth",{get:function(){return this.gridInitialWidth},set:function(t){this.gridInitialWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return null==this.gridStyle&&(this.gridStyle=new wL),this.gridStyle},set:function(t){null==this.gridStyle&&(this.gridStyle=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPageWidth",{get:function(){return this.ispageWidth},set:function(t){this.ispageWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isChildGrid",{get:function(){return this.ischildGrid},set:function(t){this.ischildGrid=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return 0!==this.gridSize.width&&void 0!==this.gridSize.width||0!==this.gridSize.height||(this.gridSize=this.measure()),this.gridSize},set:function(t){this.gridSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ParentCell",{get:function(){return this.parentCell},set:function(t){this.parentCell=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LayoutFormat",{get:function(){return this.layoutFormat},enumerable:!0,configurable:!0}),e.prototype.draw=function(t,e,i,n){if(e instanceof oP&&void 0===e.width&&void 0===i)return this.drawHelper(t,e.x,e.y);if("number"==typeof e&&"number"==typeof i&&void 0===n)return this.drawHelper(t,e,i,null);if(e instanceof aP&&void 0!==e.width&&void 0===i)return this.drawHelper(t,e,null);if(e instanceof oP&&void 0===e.width&&i instanceof EE)return this.drawHelper(t,e.x,e.y,i);if("number"==typeof e&&"number"==typeof i&&(n instanceof EE||null==n)){var r=t.graphics.clientSize.width-e,o=new aP(e,i,r,0);return this.drawHelper(t,o,n)}return e instanceof aP&&void 0!==e.width&&"boolean"==typeof i?this.drawHelper(t,e,null):this.drawHelper(t,e,i)},e.prototype.measure=function(){for(var t=0,e=this.columns.width,i=0;i<this.headers.count;i++){t+=this.headers.getHeader(i).height}for(i=0;i<this.rows.count;i++){t+=this.rows.getRow(i).height}return new sP(e,t)},e.prototype.onBeginCellDraw=function(t){this.raiseBeginCellDraw&&this.beginCellDraw(this,t)},e.prototype.onEndCellDraw=function(t){this.raiseEndCellDraw&&this.endCellDraw(this,t)},e.prototype.layout=function(t){if(0!==this.rows.count){var e=this.rows.getRow(0).cells.getCell(0).style;if(null!=e.borders&&(null!=e.borders.left&&1!==e.borders.left.width||null!=e.borders.top&&1!==e.borders.top.width)){var i=e.borders.left.width/2,n=e.borders.top.width/2;if(t.bounds.x===TE.default.right.width/2&&t.bounds.y===TE.default.right.width/2){var r=new aP(i,n,this.gridSize.width,this.gridSize.height);t.bounds=r}}}return this.setSpan(),this.checkSpan(),this.layoutFormat=t.format,this.gridLocation=t.bounds,new ML(this).Layouter(t)},e.prototype.setSpan=function(){for(var t=1,e=1,i=0,n=0,r=0,o=this.headers.count,s=0;s<o;s++){var a=this.headers.getHeader(s);r=0;for(var l=a.cells.count,h=0;h<l;h++){var c=a.cells.getCell(h);if(r=Math.max(r,c.rowSpan),!c.isCellMergeContinue&&!c.isRowMergeContinue&&(c.columnSpan>1||c.rowSpan>1)){if(c.columnSpan+h>a.cells.count)throw new Error("Invalid span specified at row "+h.toString()+" column "+s.toString());if(c.rowSpan+s>this.headers.count)throw new Error("Invalid span specified at Header "+h.toString()+" column "+s.toString());if(c.columnSpan>1&&c.rowSpan>1){for(t=c.columnSpan,e=c.rowSpan,i=h,n=s,c.isCellMergeStart=!0,c.isRowMergeStart=!0;t>1;)i++,a.cells.getCell(i).isCellMergeContinue=!0,a.cells.getCell(i).isRowMergeContinue=!0,a.cells.getCell(i).rowSpan=e,t--;for(i=h,t=c.columnSpan;e>1;){for(n++,this.headers.getHeader(n).cells.getCell(h).isRowMergeContinue=!0,this.headers.getHeader(n).cells.getCell(i).isRowMergeContinue=!0,e--;t>1;)i++,this.headers.getHeader(n).cells.getCell(i).isCellMergeContinue=!0,this.headers.getHeader(n).cells.getCell(i).isRowMergeContinue=!0,t--;t=c.columnSpan,i=h}}else if(c.columnSpan>1&&1===c.rowSpan)for(t=c.columnSpan,i=h,c.isCellMergeStart=!0;t>1;)i++,a.cells.getCell(i).isCellMergeContinue=!0,t--;else if(1===c.columnSpan&&c.rowSpan>1)for(e=c.rowSpan,n=s;e>1;)n++,this.headers.getHeader(n).cells.getCell(h).isRowMergeContinue=!0,e--}}a.maximumRowSpan=r}},e.prototype.checkSpan=function(){var t,e,i=1,n=0,r=0;if(t=i=1,e=r=0,this.hasRowSpanSpan||this.hasColumnSpan)for(var o=this.rows.count,s=0;s<o;s++){var a=this.rows.getRow(s);n=0;for(var l=a.cells.count,h=0;h<l;h++){var c=a.cells.getCell(h);if(n=Math.max(n,c.rowSpan),!c.isCellMergeContinue&&!c.isRowMergeContinue&&(c.columnSpan>1||c.rowSpan>1)){if(c.columnSpan+h>a.cells.count)throw new Error("Invalid span specified at row  "+h.toString()+" column "+s.toString());if(c.rowSpan+s>this.rows.count)throw new Error("Invalid span specified at row  "+h.toString()+" column "+s.toString());if(c.columnSpan>1&&c.rowSpan>1){for(t=c.columnSpan,i=c.rowSpan,e=h,r=s,c.isCellMergeStart=!0,c.isRowMergeStart=!0;t>1;)e++,a.cells.getCell(e).isCellMergeContinue=!0,a.cells.getCell(e).isRowMergeContinue=!0,t--;for(e=h,t=c.columnSpan;i>1;){for(r++,this.rows.getRow(r).cells.getCell(h).isRowMergeContinue=!0,this.rows.getRow(r).cells.getCell(e).isRowMergeContinue=!0,i--;t>1;)e++,this.rows.getRow(r).cells.getCell(e).isCellMergeContinue=!0,this.rows.getRow(r).cells.getCell(e).isRowMergeContinue=!0,t--;t=c.columnSpan,e=h}}else if(c.columnSpan>1&&1===c.rowSpan)for(t=c.columnSpan,e=h,c.isCellMergeStart=!0;t>1;)e++,a.cells.getCell(e).isCellMergeContinue=!0,t--;else if(1===c.columnSpan&&c.rowSpan>1)for(i=c.rowSpan,r=s;i>1;)r++,this.rows.getRow(r).cells.getCell(h).isRowMergeContinue=!0,i--}}a.maximumRowSpan=n}},e.prototype.measureColumnsWidth=function(t){if(void 0!==t){this.isPageWidth=!1;for(var e=this.columns.getDefaultWidths(t.width-t.x),i=0,n=this.columns.count;i<n;i++)this.columns.getColumn(i).columnWidth=e[i],this.tempWidth=e[i];if(null!=this.ParentCell&&0==this.style.allowHorizontalOverflow&&0==this.ParentCell.row.grid.style.allowHorizontalOverflow){var r=0,o=0,s=this.columns.count,a=0;null==this.ParentCell.style.cellPadding&&void 0===this.ParentCell.style.cellPadding||(void 0!==this.ParentCell.style.cellPadding.left&&this.ParentCell.style.cellPadding.hasLeftPad&&(r+=this.ParentCell.style.cellPadding.left),void 0!==this.ParentCell.style.cellPadding.right&&this.ParentCell.style.cellPadding.hasRightPad&&(r+=this.ParentCell.style.cellPadding.right));for(i=0;i<this.ParentCell.columnSpan;i++)o+=this.ParentCell.row.grid.columns.getColumn(this.parentCellIndex+i).width;for(var l=0;l<this.columns.count;l++)this.gridColumns.getColumn(l).width>0&&this.gridColumns.getColumn(l).isCustomWidth&&(o-=this.gridColumns.getColumn(l).width,s--);if(null==this.ParentCell.row.grid.style.cellPadding&&void 0===this.ParentCell.row.grid.style.cellPadding||(void 0!==this.ParentCell.row.grid.style.cellPadding.top&&this.ParentCell.row.grid.style.cellPadding.hasTopPad&&(r+=this.ParentCell.row.grid.style.cellPadding.top),void 0!==this.ParentCell.row.grid.style.cellPadding.bottom&&this.ParentCell.row.grid.style.cellPadding.hasBottomPad&&(r+=this.ParentCell.row.grid.style.cellPadding.bottom)),0!=this.ParentCell.row.grid.style.cellSpacing&&(o-=2*this.ParentCell.row.grid.style.cellSpacing),o>r&&(a=(o-r)/s,this.tempWidth=a,null!=this.ParentCell))for(l=0;l<this.columns.count;l++)this.columns.getColumn(l).isCustomWidth||(this.columns.getColumn(l).columnWidth=a)}}else{e=[this.columns.count];for(var h=0;h<this.columns.count;h++)e[h]=0;var c=0;if((void 0===this.isChildGrid&&void 0!==this.gridLocation||null===this.isChildGrid&&void 0!==this.gridLocation)&&(this.initialWidth=this.gridLocation.width),this.headers.count>0){var d=this.headers.getHeader(0).cells.count,p=this.headers.count;for(i=0;i<d;i++){c=0;for(l=0;l<p;l++){var u=Math.min(this.initialWidth,this.headers.getHeader(l).cells.getCell(i).width);c=Math.max(c,u)}e[i]=c}}c=0;i=0;for(var f=this.columns.count;i<f;i++){for(l=0,p=this.rows.count;l<p;l++)if(1==this.rows.getRow(l).cells.getCell(i).columnSpan&&!this.rows.getRow(l).cells.getCell(i).isCellMergeContinue||null!=this.rows.getRow(l).cells.getCell(i).value){if(null!=this.rows.getRow(l).cells.getCell(i).value&&!this.rows.getRow(l).grid.style.allowHorizontalOverflow)this.rows.getRow(l).grid.style.cellPadding.right,this.rows.getRow(l).grid.style.cellPadding.left,this.rows.getRow(l).cells.getCell(i).style.borders.left.width;u=0;u=this.initialWidth>0?Math.min(this.initialWidth,this.rows.getRow(l).cells.getCell(i).width):this.rows.getRow(l).cells.getCell(i).width,c=Math.max(e[i],Math.max(c,u)),c=Math.max(this.columns.getColumn(i).width,c)}0!=this.rows.count&&(e[i]=c),c=0}i=0;for(var g=this.rows.count;i<g;i++){l=0;for(var m=this.columns.count;l<m;l++)if(this.rows.getRow(i).cells.getCell(l).columnSpan>1){e[l];for(var y=1;y<this.rows.getRow(i).cells.getCell(l).columnSpan;y++)e[l+y]}}for(i=0,n=this.columns.count;i<n;i++)this.columns.getColumn(i).width<=0?this.columns.getColumn(i).columnWidth=e[i]:this.columns.getColumn(i).width>0&&!this.columns.getColumn(i).isCustomWidth&&(this.columns.getColumn(i).columnWidth=e[i]);r=0;var v=0,b=this.columns.count,w=0;v=this.tempWidth;for(l=0;l<this.columns.count;l++)this.gridColumns.getColumn(l).width>0&&this.gridColumns.getColumn(l).isCustomWidth&&(v-=this.gridColumns.getColumn(l).width,b--);if(v>0&&0!=this.ParentCell.row.grid.style.cellSpacing&&(v-=2*this.ParentCell.row.grid.style.cellSpacing),v>r&&(w=v/b,null!=this.ParentCell))for(l=0;l<this.columns.count;l++)this.columns.getColumn(l).isCustomWidth||(this.columns.getColumn(l).columnWidth=w)}},e}(BE),kL=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ML=function(t){function e(e){var i=t.call(this,e)||this;return i.gridInitialWidth=0,i.gridSize=new sP(0,0),i.parentCellIndex=0,i.tempWidth=0,i.childheight=0,i.isChildGrid=!1,i.hasRowSpanSpan=!1,i.isRearranged=!1,i.pageBounds=new aP,i.listOfNavigatePages=[],i.flag=!0,i.columnRanges=[],i.currentLocation=new oP(0,0),i.breakRow=!0,i.isOverloadWithPosition=!1,i}return kL(e,t),Object.defineProperty(e.prototype,"Grid",{get:function(){return this.elements},enumerable:!0,configurable:!0}),e.prototype.getFormat=function(t){return t},e.prototype.layoutInternal=function(t){var e=this.getFormat(t.format);if(this.gridLayoutFormat=this.getFormat(t.format),this.currentPage=t.page,null===this.currentPage)throw Error("Can not set page as null");this.currentPage.getClientSize().height,this.currentPage.getClientSize().width;this.currentPageBounds=this.currentPage.getClientSize(),this.currentGraphics=this.currentPage.graphics;var i;if(i=this.currentGraphics.page.section.indexOf(this.currentGraphics.page),this.listOfNavigatePages.push(i),null!=e&&e.break===tO.FitColumnsToPage?this.currentBounds=new aP(new oP(t.bounds.x,t.bounds.y),new sP(this.Grid.columns.width,this.currentGraphics.clientSize.height)):this.currentBounds=new aP(new oP(t.bounds.x,t.bounds.y),this.currentGraphics.clientSize),0!==this.Grid.rows.count)this.currentBounds.width=t.bounds.width>0?t.bounds.width:this.currentBounds.width-this.Grid.rows.getRow(0).cells.getCell(0).style.borders.left.width/2;else{if(0===this.Grid.headers.count)throw Error("Please add row or header into grid");this.currentBounds.width=t.bounds.width}if(this.startLocation=new oP(t.bounds.x,t.bounds.y),t.bounds.height>0&&!this.Grid.isChildGrid&&(this.currentBounds.height=t.bounds.height),this.Grid.isChildGrid||(this.hType=this.Grid.style.horizontalOverflowType),this.Grid.style.allowHorizontalOverflow?(this.Grid.measureColumnsWidth(),this.determineColumnDrawRanges()):(this.columnRanges=[],this.Grid.measureColumnsWidth(this.currentBounds),this.columnRanges.push([0,this.Grid.columns.count-1])),this.Grid.hasRowSpanSpan)for(var n=0;n<this.Grid.rows.count;n++)-1===this.Grid.rows.getRow(n).height||this.Grid.rows.getRow(n).isRowHeightSet||(this.Grid.rows.getRow(n).isRowHeightSet=!0);return this.layoutOnPage(t)},e.prototype.determineColumnDrawRanges=function(){for(var t=0,e=0,i=0,n=this.currentGraphics.clientSize.width-this.currentBounds.x,r=0;r<this.Grid.columns.count;r++)if((i+=this.Grid.columns.getColumn(r).width)>=n){for(var o=0,s=t;s<=r&&!((o+=this.Grid.columns.getColumn(s).width)>n);s++)e=s;this.columnRanges.push([t,e]),i=(e=t=e+1)<=r?this.Grid.columns.getColumn(r).width:0}this.columnRanges.push([t,this.Grid.columns.count-1])},e.prototype.layoutOnPage=function(t){this.pageBounds.x=t.bounds.x,this.pageBounds.y=t.bounds.y,this.pageBounds.height=t.bounds.height;for(var i,n=this.getFormat(t.format),r=new UP,o=t.page,s=[],a=0;a<this.columnRanges.length;a++){var l=this.columnRanges[a];this.cellStartIndex=l[0],this.cellEndIndex=l[1];var h=this.raiseBeforePageLayout(this.currentPage,this.currentBounds,this.currentRowIndex);this.currentBounds=h.currentBounds,this.currentRowIndex=h.currentRowIndex;for(var c=0;c<this.Grid.headers.count;c++){var d=this.Grid.headers.getHeader(c);this.currentBounds.y,this.drawRow(d);!1}var p=0,u=(this.Grid.rows.count,void 0),f=!0;s=[];for(var g=0;g<this.Grid.rows.count;g++){d=this.Grid.rows.getRow(g);p++,this.currentRowIndex=p-1;var m=this.currentBounds.y;o=this.currentPage,e.repeatRowIndex=-1,f&&d.grid.isChildGrid&&(m,f=!1);var y=null;if(-1==this.Grid.splitChildRowIndex)y=this.drawRow(d),d.isrowFinish=!0;else{if(!(d.grid.ParentCell.row.grid.isGridSplit&&this.Grid.splitChildRowIndex<=d.rowIndex)){if(d.isrowFinish)continue;break}y=this.drawRow(d),d.isrowFinish=!0}for(s.push(y.bounds.width),m===this.currentBounds.y?(u=!0,e.repeatRowIndex=this.Grid.rows.rowCollection.indexOf(d)):(u=!1,e.repeatRowIndex=-1);!y.isFinish&&null!=o;){var v=this.getLayoutResult();if(this.raisePageLayouted(v).cancel||u)break;if(this.Grid.allowRowBreakAcrossPages){this.currentPage=this.getNextPageformat(n),m=this.currentBounds.y;var b=new oP(TE.default.right.width/2,TE.default.top.width/2);if(0===n.paginateBounds.x&&0===n.paginateBounds.y&&0===n.paginateBounds.width&&0===n.paginateBounds.height&&this.startLocation.x===b.x&&this.startLocation.y===b.y&&(this.currentBounds.x+=this.startLocation.x,this.currentBounds.y+=this.startLocation.y),this.Grid.isChildGrid&&null!=d.grid.ParentCell&&null!=this.Grid.ParentCell.row.grid.style.cellPadding&&d.rowBreakHeight+this.Grid.ParentCell.row.grid.style.cellPadding.top<this.currentBounds.height&&(this.currentBounds.y=this.Grid.ParentCell.row.grid.style.cellPadding.top),null!=d.grid.ParentCell){d.grid.ParentCell.row.isRowBreaksNextPage=!0,d.grid.ParentCell.row.rowBreakHeightValue=d.rowBreakHeight+this.Grid.ParentCell.row.grid.style.cellPadding.top+this.Grid.ParentCell.row.grid.style.cellPadding.bottom;for(var w=d.rowIndex+1;w<d.grid.rows.count;w++)d.grid.ParentCell.row.rowBreakHeightValue+=d.grid.rows.getRow(w).height}if(d.grid.isChildGrid){d.isrowFinish=!1,d.grid.splitChildRowIndex=d.rowIndex,d.grid.ParentCell.row.grid.splitChildRowIndex=d.grid.ParentCell.row.rowIndex,d.grid.ParentCell.row.grid.isGridSplit&&(d.grid.ParentCell.row.noOfPageCount+=1,d.grid.ParentCell.row.grid.isGridSplit=!1);break}if(d.noOfPageCount<1){if(-1!=d.grid.splitChildRowIndex&&(d.grid.isGridSplit=!0),null!=d.style.border&&(null!=d.style.border.left&&1!==d.style.border.left.width||null!=d.style.border.top&&1!==d.style.border.top.width)){var S=d.style.border.left.width/2,x=d.style.border.top.width/2;if(this.currentBounds.x===TE.default.right.width/2&&this.currentBounds.y===TE.default.right.width/2){var C=new aP(S,x,this.currentBounds.width,this.currentBounds.height);this.currentBounds=C}}if(this.Grid.repeatHeader)for(var P=0;P<this.Grid.headers.count;P++){var O=this.Grid.headers.getHeader(P);this.drawRow(O)}if(y=this.drawRow(d),d.noOfPageCount>=1){d.rowBreakHeightValue;for(var E=0;E<d.noOfPageCount;E++){var L=this.getLayoutResult();if(this.raisePageLayouted(L),this.currentPage=this.getNextPageformat(n),m=this.currentBounds.y,-1!=d.grid.splitChildRowIndex&&(d.grid.isGridSplit=!0),this.currentBounds.y=.5,this.Grid.repeatHeader)for(var I=0;I<this.Grid.headers.count;I++){var T=this.Grid.headers.getHeader(I);this.drawRow(T)}this.drawRow(d)}}d.grid.splitChildRowIndex=-1,d.grid.isGridSplit=!1,y.isFinish=!0;for(var A=0;A<d.cells.count;A++)d.cells.getCell(A).value instanceof BL&&(d.cells.getCell(A).value.splitChildRowIndex=-1)}}}if(!y.isFinish&&null!==o&&n.layout!==$P.OnePage&&u){this.startLocation.x=this.currentBounds.x;if(this.currentPage=this.getNextPageformat(n),null!==t.format&&!t.format.usePaginateBounds&&null!==t.bounds&&t.bounds.height>0&&!this.Grid.isChildGrid&&(this.currentBounds.height=t.bounds.height),null!==t.format&&!t.format.usePaginateBounds&&null!==t.bounds&&t.bounds.y>0&&!this.Grid.isChildGrid&&(this.currentBounds.y=t.bounds.y),this.startLocation.y=this.currentBounds.y,n.paginateBounds.x===n.paginateBounds.y&&n.paginateBounds.y===n.paginateBounds.height&&n.paginateBounds.height===n.paginateBounds.width&&0===n.paginateBounds.width&&(this.currentBounds.x+=this.startLocation.x),this.currentBounds.x===TE.default.left.width/2&&(this.currentBounds.y+=this.startLocation.x),this.Grid.repeatHeader)for(var B=0;B<this.Grid.headers.count;B++){T=this.Grid.headers.getHeader(B);this.drawRow(T)}this.drawRow(d),null===this.currentPage||r.containsKey(this.currentPage)||r.add(this.currentPage,l)}if(null!=d.NestedGridLayoutResult){this.currentPage=d.NestedGridLayoutResult.page,this.currentGraphics=this.currentPage.graphics,this.startLocation=new oP(d.NestedGridLayoutResult.bounds.x,d.NestedGridLayoutResult.bounds.y);var k=this.ReCalculateHeight(d,d.NestedGridLayoutResult.bounds.height);if(this.currentBounds.y=k,o!=this.currentPage){for(var M=this.currentPage.section,D=M.indexOf(o)+1,R=M.indexOf(this.currentPage),z=D;z<R+1;z++){var j=this.currentPage.graphics,N=new oP(n.paginateBounds.x,n.paginateBounds.y),H=z==R?d.NestedGridLayoutResult.bounds.height-t.bounds.y:this.currentBounds.height-N.y;H<=j.clientSize.height&&(H+=t.bounds.y),N.y=null==n?.5:n.paginateBounds.y;for(var _=0;_<d.cells.count;_++){var V,F=d.cells.getCell(_),W=0;if(F.value instanceof BL)for(var U=0;U<F.value.columns.count;U++)W+=F.value.columns.getColumn(U).columnWidth;else W=F.width;V=Math.max(W,d.grid.columns.getColumn(_).width),F.drawCellBorders(j,new aP(N,new sP(V,H))),N.x+=V,_+=F.columnSpan-1}}o=this.currentPage}}}var G=!1,q=0;s.length>0&&(q=s[0]);var X=[[1,2]];for(_=0;_<this.Grid.rows.count;_++)if(-1!=this.cellEndIndex&&this.Grid.rows.getRow(_).cells.getCell(this.cellEndIndex).value instanceof BL){var Y=this.Grid.rows.getRow(_).cells.getCell(this.cellEndIndex).value;this.rowLayoutBoundsWidth=Y.rowLayoutBoundsWidth,G=!0}if(!G&&s.length>0){for(_=0;_<p-1;_++)q<s[_]&&(q=s[_]);this.rowLayoutBoundsWidth=q}else this.rowLayoutBoundsWidth=X[0][1];if(this.columnRanges.indexOf(l)<this.columnRanges.length-1&&null!=o&&n.layout!=$P.OnePage)if(this.Grid.isChildGrid,0!=X[0][0]){this.currentPage.section.indexOf(this.currentPage);this.currentGraphics=this.currentPage.graphics,this.currentBounds=new aP(new oP(0,0),this.currentPage.getClientSize());this.currentGraphics.page.section.indexOf(this.currentGraphics.page)}else this.currentPage=this.getNextPageformat(n);this.columnRanges.length-1!==a&&this.columnRanges.length>1&&n.layout!==$P.OnePage&&(this.currentPage=this.getNextPageformat(n),n.paginateBounds.x===n.paginateBounds.y&&n.paginateBounds.y===n.paginateBounds.height&&n.paginateBounds.height===n.paginateBounds.width&&0===n.paginateBounds.width&&(this.currentBounds.x+=this.startLocation.x,this.currentBounds.y+=this.startLocation.y))}return i=this.getLayoutResult(),this.Grid.style.allowHorizontalOverflow&&this.Grid.style.horizontalOverflowType==yL.NextPage&&this.reArrangePages(r),this.raisePageLayouted(i),i},e.prototype.getNextPageformat=function(t){var e=this.currentPage.section,i=null,n=e.indexOf(this.currentPage);this.flag=!1,i=n===e.count-1?e.add():e.getPages()[n+1],this.currentGraphics=i.graphics;var r=this.currentGraphics.page.section.indexOf(this.currentGraphics.page);return-1===this.listOfNavigatePages.indexOf(r)&&this.listOfNavigatePages.push(r),this.currentBounds=new aP(new oP(0,0),i.getClientSize()),i},e.prototype.CheckIfDefaultFormat=function(t){var e=new uP;return t.alignment===e.alignment&&t.characterSpacing===e.characterSpacing&&t.clipPath===e.clipPath&&t.firstLineIndent===e.firstLineIndent&&t.horizontalScalingFactor===e.horizontalScalingFactor&&t.lineAlignment===e.lineAlignment&&t.lineLimit===e.lineLimit&&t.lineSpacing===e.lineSpacing&&t.measureTrailingSpaces===e.measureTrailingSpaces&&t.noClip===e.noClip&&t.paragraphIndent===e.paragraphIndent&&t.rightToLeft===e.rightToLeft&&t.subSuperScript===e.subSuperScript&&t.wordSpacing===e.wordSpacing&&t.wordWrap===e.wordWrap},e.prototype.RaiseBeforeCellDraw=function(t,e,i,n,r,o){var s=null;return this.Grid.raiseBeginCellDraw&&(s=new jL(t,e,i,n,r,o),this.Grid.onBeginCellDraw(s),o=s.style),o},e.prototype.raiseAfterCellDraw=function(t,e,i,n,r,o){var s=null;this.Grid.raiseEndCellDraw&&(s=new NL(t,e,i,n,r,o),this.Grid.onEndCellDraw(s))},e.prototype.reArrangePages=function(t){for(var e=this.currentPage.document,i=[],n=t.keys(),r=(t.values(),0);r<n.length;r++){(a=n[r]).section=null,i.push(a),e.pages.remove(a)}for(r=0;r<t.size();r++)for(var o=r,s=t.size()/this.columnRanges.length;o<t.size();o+=s){var a=i[o];-1===e.pages.indexOf(a)&&e.pages.add(a)}},e.prototype.getLayoutResult=function(){if(this.Grid.isChildGrid&&this.Grid.allowRowBreakAcrossPages)for(var t=0;t<this.Grid.rows.count;t++){var e=this.Grid.rows.getRow(t);e.rowBreakHeight>0&&e.repeatFlag&&(this.startLocation.y=this.currentPage.origin.y)}var i;return this.isChanged||(i=new aP(this.startLocation,new sP(this.currentBounds.width,this.currentBounds.y-this.startLocation.y))),new DL(this.currentPage,i)},e.prototype.ReCalculateHeight=function(t,e){for(var i=0,n=this.cellStartIndex;n<=this.cellEndIndex;n++)null!==t.cells.getCell(n).remainingString&&""!==t.cells.getCell(n).remainingString&&void 0!==t.cells.getCell(n).remainingString&&(i=Math.max(i,t.cells.getCell(n).measureHeight()));return Math.max(e,i)},e.prototype.raiseBeforePageLayout=function(t,e,i){var n=!1;if(this.Grid.raiseBeginPageLayout){var r=new FL(e,t,i);this.Grid.onBeginPageLayout(r),n=r.cancel,e=r.bounds,i=r.startRowIndex}return{returnValue:n,currentBounds:e,currentRowIndex:i}},e.prototype.raisePageLayouted=function(t){var e=new WL(t);return this.Grid.raiseEndPageLayout&&this.Grid.onEndPageLayout(e),e},e.prototype.drawRow=function(t,i,n){if(void 0===i){var r=new UL,o=0,s=(new oP(0,0),new sP(0,0)),a=!1;if(t.rowSpanExists){var l=0,h=this.Grid.rows.rowCollection.indexOf(t);-1===h&&-1!==(h=this.Grid.headers.indexOf(t))&&(a=!0);for(var c=0;c<t.cells.count;c++){var d=t.cells.getCell(c);l=Math.max(l,d.rowSpan)}for(c=h;c<h+l;c++)o+=a?this.Grid.headers.getHeader(c).height:this.Grid.rows.getRow(c).height}var p=t.rowBreakHeight>0?t.rowBreakHeight:t.height;return this.Grid.isChildGrid&&null!=this.Grid.ParentCell?this.currentBounds.y+this.Grid.ParentCell.row.grid.style.cellPadding.bottom+p>this.currentPageBounds.height||this.currentBounds.y+this.Grid.ParentCell.row.grid.style.cellPadding.bottom+p>this.currentBounds.height||this.currentBounds.y+this.Grid.ParentCell.row.grid.style.cellPadding.bottom+o>this.currentPageBounds.height?(this.Grid.ParentCell.row.grid.LayoutFormat.break===tO.FitPage&&(e.repeatRowIndex=this.Grid.rows.rowCollection.indexOf(t),this.Grid.splitChildRowIndex=this.Grid.rows.rowCollection.indexOf(t)),e.repeatRowIndex>-1&&e.repeatRowIndex===t.rowIndex&&this.Grid.allowRowBreakAcrossPages&&(r.isFinish=!0,r.bounds=this.currentBounds,this.drawRowWithBreak(r,t,p),t.repeatFlag=!0,t.repeatRowNumber=e.repeatRowIndex)):(r.isFinish=!0,t.grid.ParentCell.row.rowBreakHeightValue>0?t.repeatFlag=!0:(t.repeatFlag=!1,p=t.height),this.Grid.isChildGrid&&t.rowBreakHeight>0&&null!=this.Grid.ParentCell.row.grid.style.cellPadding&&(p+=this.Grid.ParentCell.row.grid.style.cellPadding.bottom),this.drawRow(t,r,p)):p>this.currentPageBounds.height?this.Grid.allowRowBreakAcrossPages&&(r.isFinish=!0,this.drawRowWithBreak(r,t,p),t.isrowFinish=!0,t.repeatFlag=!0,-1!==t.grid.splitChildRowIndex&&(r.isFinish=!1)):this.currentBounds.y+p>this.currentPageBounds.height||this.currentBounds.y+p>this.currentBounds.height+this.startLocation.y||this.currentBounds.y+o>this.currentPageBounds.height?(this.Grid.LayoutFormat.break===tO.FitPage&&(e.repeatRowIndex=this.Grid.rows.rowCollection.indexOf(t)),e.repeatRowIndex>-1&&e.repeatRowIndex===t.rowIndex?this.Grid.allowRowBreakAcrossPages&&(r.isFinish=!0,this.drawRowWithBreak(r,t,p),t.repeatFlag=!0,t.repeatRowNumber=e.repeatRowIndex,-1!==t.grid.splitChildRowIndex&&(r.isFinish=!1)):r.isFinish=!1):(r.isFinish=!0,this.drawRow(t,r,p),t.repeatFlag=!1),r}var u=new oP(this.currentBounds.x,this.currentBounds.y);i.bounds=new aP(u,new sP(0,0)),n=this.ReCalculateHeight(t,n);for(c=this.cellStartIndex;c<=this.cellEndIndex;c++){var f=c>this.cellEndIndex+1&&t.cells.getCell(c).columnSpan>1;if(!f)for(var g=1;g<t.cells.getCell(c).columnSpan;g++)t.cells.getCell(c+g).isCellMergeContinue=!0;s=new sP(this.Grid.columns.getColumn(c).width,n);!this.CheckIfDefaultFormat(this.Grid.columns.getColumn(c).format)&&this.CheckIfDefaultFormat(t.cells.getCell(c).stringFormat)&&(t.cells.getCell(c).stringFormat=this.Grid.columns.getColumn(c).format);var m=t.cells.getCell(c).style,y="string"==typeof t.cells.getCell(c).value&&null!==t.cells.getCell(c).value?t.cells.getCell(c).value:"";t.cells.getCell(c).style=this.RaiseBeforeCellDraw(this.currentGraphics,this.currentRowIndex,c,new aP(u,s),y,m),t.cells.getCell(c).value instanceof BL&&((b=t.cells.getCell(c).value).parentCellIndex=c);var v=t.cells.getCell(c).draw(this.currentGraphics,new aP(u,s),f);if(t.grid.style.allowHorizontalOverflow&&(t.cells.getCell(c).columnSpan>this.cellEndIndex||c+t.cells.getCell(c).columnSpan>this.cellEndIndex+1)&&this.cellEndIndex<t.cells.count-1&&(t.rowOverflowIndex=this.cellEndIndex),t.grid.style.allowHorizontalOverflow&&t.rowOverflowIndex>0&&(t.cells.getCell(c).columnSpan>this.cellEndIndex||c+t.cells.getCell(c).columnSpan>this.cellEndIndex+1)&&t.cells.getCell(c).columnSpan-this.cellEndIndex+c-1>0&&(t.cells.getCell(t.rowOverflowIndex+1).value=null!==v&&void 0!==v.remainder?v.remainder:"",t.cells.getCell(t.rowOverflowIndex+1).stringFormat=t.cells.getCell(c).stringFormat,t.cells.getCell(t.rowOverflowIndex+1).style=t.cells.getCell(c).style,t.cells.getCell(t.rowOverflowIndex+1).columnSpan=t.cells.getCell(c).columnSpan-this.cellEndIndex+c-1),y="string"==typeof t.cells.getCell(c).value&&null!==t.cells.getCell(c).value?t.cells.getCell(c).value:"",f||this.raiseAfterCellDraw(this.currentGraphics,this.currentRowIndex,c,new aP(u,s),y,t.cells.getCell(c).style),t.cells.getCell(c).value instanceof BL){var b=t.cells.getCell(c).value;this.Grid.columns.getColumn(c).width>=this.currentGraphics.clientSize.width?(u.x=b.rowLayoutBoundsWidth,u.x+=b.style.cellSpacing):u.x+=this.Grid.columns.getColumn(c).width}else u.x+=this.Grid.columns.getColumn(c).width}t.rowMergeComplete&&!t.isRowHeightSet||(this.currentBounds.y+=n),i.bounds=new aP(new oP(i.bounds.x,i.bounds.y),new sP(u.x,u.y))},e.prototype.drawRowWithBreak=function(t,e,i){var n=new oP(this.currentBounds.x,this.currentBounds.y);e.grid.isChildGrid&&e.grid.allowRowBreakAcrossPages&&this.startLocation.x!==this.currentBounds.x&&(n.x=this.startLocation.x),t.bounds=new aP(n,new sP(0,0)),this.gridHeight=e.rowBreakHeight>0?this.currentPageBounds.height:0,e.grid.style.cellPadding.top+this.currentBounds.y+e.grid.style.cellPadding.bottom<this.currentPageBounds.height&&(e.rowBreakHeight=this.currentBounds.y+i-this.currentPageBounds.height);for(var r=0;r<e.cells.count;r++){var o=e.cells.getCell(r);o.measureHeight()===i&&o.value instanceof BL&&(e.rowBreakHeight=0)}for(r=this.cellStartIndex;r<=this.cellEndIndex;r++){var s=e.cells.getCell(r).columnSpan+r>this.cellEndIndex+1&&e.cells.getCell(r).columnSpan>1,a=new sP(this.Grid.columns.getColumn(r).width,this.gridHeight>0?this.gridHeight:this.currentPageBounds.height),l=e.cells.getCell(r).style;e.cells.getCell(r).style=l;var h=null;if(h=e.cells.getCell(r).draw(this.currentGraphics,new aP(n,a),s),e.rowBreakHeight>0&&null!=h&&(e.cells.getCell(r).FinishedDrawingCell=!1,e.cells.getCell(r).remainingString=null==h.remainder?" ":h.remainder,e.grid.isChildGrid&&(e.rowBreakHeight=i-h.actualSize.height)),t.isFinish=t.isFinish?e.cells.getCell(r).FinishedDrawingCell:t.isFinish,e.cells.getCell(r).value instanceof BL){var c=e.cells.getCell(r).value;this.rowBreakPageHeightCellIndex=r,this.Grid.columns.getColumn(r).width>=this.currentGraphics.clientSize.width?(n.x=this.rowLayoutBoundsWidth,n.x+=c.style.cellSpacing):n.x+=this.Grid.columns.getColumn(r).width}else n.x+=this.Grid.columns.getColumn(r).width}this.currentBounds.y+=this.gridHeight>0?this.gridHeight:i,t.bounds=new aP(new oP(t.bounds.x,t.bounds.y),new sP(n.x,n.y))},e.repeatRowIndex=-1,e}(OE),DL=function(t){function e(e,i){return t.call(this,e,i)||this}return kL(e,t),e}(IE),RL=function(t){function e(e){return t.call(this,e)||this}return kL(e,t),e}(EE),zL=function(){function t(t,e,i,n,r){this.gridRowIndex=e,this.gridCellIndex=i,this.internalValue=r,this.gridBounds=n,this.pdfGraphics=t}return Object.defineProperty(t.prototype,"rowIndex",{get:function(){return this.gridRowIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellIndex",{get:function(){return this.gridCellIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.internalValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bounds",{get:function(){return this.gridBounds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"graphics",{get:function(){return this.pdfGraphics},enumerable:!0,configurable:!0}),t}(),jL=function(t){function e(e,i,n,r,o,s){var a=t.call(this,e,i,n,r,o)||this;return a.style=s,a}return kL(e,t),Object.defineProperty(e.prototype,"skip",{get:function(){return this.bSkip},set:function(t){this.bSkip=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this.cellStyle},set:function(t){this.cellStyle=t},enumerable:!0,configurable:!0}),e}(zL),NL=function(t){function e(e,i,n,r,o,s){var a=t.call(this,e,i,n,r,o)||this;return a.cellStyle=s,a}return kL(e,t),Object.defineProperty(e.prototype,"style",{get:function(){return this.cellStyle},enumerable:!0,configurable:!0}),e}(zL),HL=function(){function t(){}return Object.defineProperty(t.prototype,"cancel",{get:function(){return this.isCancel},set:function(t){this.isCancel=t},enumerable:!0,configurable:!0}),t}(),_L=function(t){function e(e,i){var n=t.call(this)||this;return n.bounds=e,n.pdfPage=i,n}return kL(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.cellBounds},set:function(t){this.cellBounds=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return this.pdfPage},enumerable:!0,configurable:!0}),e}(HL),VL=function(t){function e(e){var i=t.call(this)||this;return i.layoutResult=e,i}return kL(e,t),Object.defineProperty(e.prototype,"result",{get:function(){return this.layoutResult},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextPage",{get:function(){return this.nextPdfPage},set:function(t){this.nextPdfPage=t},enumerable:!0,configurable:!0}),e}(HL),FL=function(t){function e(e,i,n){var r=t.call(this,e,i)||this;return r.startRow=n,r}return kL(e,t),Object.defineProperty(e.prototype,"startRowIndex",{get:function(){return this.startRow},enumerable:!0,configurable:!0}),e}(_L),WL=function(t){function e(e){return t.call(this,e)||this}return kL(e,t),e}(VL),UL=function(){function t(){this.layoutedBounds=new aP(0,0,0,0)}return Object.defineProperty(t.prototype,"isFinish",{get:function(){return this.bIsFinished},set:function(t){this.bIsFinished=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bounds",{get:function(){return this.layoutedBounds},set:function(t){this.layoutedBounds=t},enumerable:!0,configurable:!0}),t}(),GL=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qL=function(t){function e(e){var i=t.call(this,e)||this;return i.olderPdfForm=0,i.shapeBounds=new aP,i.totalPageSize=0,i}return GL(e,t),Object.defineProperty(e.prototype,"element",{get:function(){return this.elements},enumerable:!0,configurable:!0}),e.prototype.layoutInternal=function(t){var e=t.page,i=t.bounds,n=this.element.getBounds();n.x=0,n.y=0;var r=this.shapeBounds.x===this.shapeBounds.y&&this.shapeBounds.y===this.shapeBounds.width&&this.shapeBounds.width===this.shapeBounds.height&&0===this.shapeBounds.height;this.isPdfGrid&&!r&&(n=this.shapeBounds);var o=null,s=new XL;for(s.page=e;;){var a=this.raiseBeforePageLayout(e,i);i=a.currentBounds;var l=null;if(a.cancel||(s=this.layoutOnPage(e,i,n,t),l=this.raiseEndPageLayout(s),a.cancel=null!==l&&l.cancel),s.end||a.cancel){o=this.getLayoutResult(s);break}if(i=this.getPaginateBounds(t),n=this.getNextShapeBounds(n,s),e=null===l||null===l.nextPage?this.getNextPage(e):l.nextPage,this.isPdfGrid){o=this.getLayoutResult(s);break}}return o},e.prototype.raiseBeforePageLayout=function(t,e){var i=!1;if(this.element.raiseBeginPageLayout){var n=new _L(e,t);this.element.onBeginPageLayout(n),i=n.cancel,e=n.bounds}return{currentBounds:e,cancel:i}},e.prototype.raiseEndPageLayout=function(t){var e=null;if(this.element.raiseEndPageLayout){var i=this.getLayoutResult(t);e=new VL(i),this.element.onEndPageLayout(e)}return e},e.prototype.getLayoutResult=function(t){return new IE(t.page,t.bounds)},e.prototype.getNextShapeBounds=function(t,e){var i=e.bounds;return t.y=t.y+i.height,t.height=t.height-i.height,t},e.prototype.layoutOnPage=function(t,e,i,n){var r=new XL;e=this.checkCorrectCurrentBounds(t,e,n);var o=this.fitsToBounds(e,i),s=!1;if(!(n.format.break===tO.FitElement&&!o&&t===n.page)){var a=this.getDrawBounds(e,i);this.drawShape(t.graphics,e,a),r.bounds=this.getPageResultBounds(e,i),s=e.height>=i.height}return r.end=s||n.format.layout===$P.OnePage,r.page=t,r},e.prototype.getDrawBounds=function(t,e){var i=t;return i.y=i.y-e.y,i.height=i.height+e.y,i},e.prototype.drawShape=function(t,e,i){var n=t.save();try{t.setClip(e),this.element.drawGraphicsHelper(t,new oP(i.x,i.y))}finally{t.restore(n)}},e.prototype.checkCorrectCurrentBounds=function(t,e,i){var n=t.graphics.clientSize;return e.width=e.width>0?e.width:n.width-e.x,e.height=e.height>0?e.height:n.height-e.y,this.isPdfGrid&&(e.height=e.height-this.bottomCellPadding),e},e.prototype.getPageResultBounds=function(t,e){var i=t;return i.height=Math.min(i.height,e.height),i},e.prototype.fitsToBounds=function(t,e){return e.height<=t.height},e.index=0,e.splitDiff=0,e.last=!1,e.borderWidth=0,e}(OE),XL=function(){return function(){}}(),YL=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ZL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return YL(e,t),e.prototype.getBounds=function(){return this.getBoundsInternal()},e.prototype.drawGraphicsHelper=function(t,e){if(null==t)throw new Error("ArgumentNullException :graphics");this.drawShapeHelper(t,e.x,e.y)},e.prototype.drawShapeHelper=function(t,e,i){var n=.5!==e||.5!==i,r=null;n&&(r=t.save(),t.translateTransform(e,i)),this.drawInternal(t),n&&t.restore(r)},e.prototype.layout=function(t){return new qL(this).layout(t)},e}(BE),KL=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),JL=function(t){function e(e){var i=t.call(this)||this;return void 0!==e&&(i.mpen=e),i}return KL(e,t),Object.defineProperty(e.prototype,"pen",{get:function(){return this.mpen},set:function(t){this.mpen=t},enumerable:!0,configurable:!0}),e}(ZL),QL=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$L=function(t){function e(e,i){var n=t.call(this)||this;return n.mbrush=null,void 0===e||(e instanceof _P?n=t.call(this,e)||this:n.mbrush=i),n}return QL(e,t),Object.defineProperty(e.prototype,"brush",{get:function(){return this.mbrush},set:function(t){this.mbrush=t},enumerable:!0,configurable:!0}),e.prototype.obtainPen=function(){return null==this.mbrush&&null==this.pen?new _P(new rP(0,0,0)):this.pen},e}(JL),tI=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),eI=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.mpoints=null,o.mpathTypes=null,o.mStartFigure=!0,o.mfillMode=MC.Alternate,o.isBeziers3=!1,o.isXps=!1,void 0===e||(e instanceof _P?(o=t.call(this,e)||this,i instanceof hP?(o=t.call(this,e,i)||this).fillMode=n:null!=i&&null!=n&&o.addPath(i,n)):e instanceof hP?(o=t.call(this,e)||this,null!=i&&(o.fillMode=i),null!=n&&null!=r&&o.addPath(n,r)):o.addPath(e,i)),o}return tI(e,t),Object.defineProperty(e.prototype,"fillMode",{get:function(){return this.mfillMode},set:function(t){this.mfillMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pathPoints",{get:function(){return this.points},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pathTypes",{get:function(){return this.types},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointCount",{get:function(){var t=0;return null!=this.mpoints&&(t=this.mpoints.length),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastPoint",{get:function(){return this.getLastPoint()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"points",{get:function(){return null==this.mpoints&&(this.mpoints=[]),this.mpoints},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"types",{get:function(){return null==this.mpathTypes&&(this.mpathTypes=[]),this.mpathTypes},enumerable:!0,configurable:!0}),e.prototype.draw=function(t,e,i,n){if(e instanceof oP&&void 0===e.width&&void 0===i)return this.drawHelper(t,e.x,e.y);if(e instanceof aP&&void 0!==e.width&&void 0===i)return this.drawHelper(t,e,null);if("number"==typeof e&&"number"==typeof i&&void 0===n)return this.drawHelper(t,e,i,null);if(e instanceof oP&&i instanceof EE)return this.drawHelper(t,e.x,e.y,i);if("number"==typeof e&&(n instanceof EE||null==n)&&"number"==typeof i){var r=t.graphics.clientSize.width-e,o=new aP(e,i,r,0);return this.drawHelper(t,o,n)}return this.drawHelper(t,e,i)},e.prototype.addArc=function(t,e,i,n,r,o){if(t instanceof aP)this.addArc(t.x,t.y,t.width,t.height,e,i);else for(var s=this.getBezierArcPoints(t,e,e+i,e+n,r,o),a=0;a<s.length;a+=8){var l=[s[a],s[a+1],s[a+2],s[a+3],s[a+4],s[a+5],s[a+6],s[a+7]];this.addPoints(l,eO.Bezier3)}},e.prototype.addBezier=function(t,e,i,n,r,o,s,a){if(t instanceof oP&&e instanceof oP&&i instanceof oP&&n instanceof oP)this.addBezier(t.x,t.y,e.x,e.y,i.x,i.y,n.x,n.y);else{var l=[];l.push(t),l.push(e),l.push(i),l.push(n),l.push(r),l.push(o),l.push(s),l.push(a),this.addPoints(l,eO.Bezier3)}},e.prototype.addEllipse=function(t,e,i,n){t instanceof aP?this.addEllipse(t.x,t.y,t.width,t.height):(this.startFigure(),this.addArc(t,e,i,n,0,360),this.closeFigure())},e.prototype.addLine=function(t,e,i,n){if(t instanceof oP&&e instanceof oP)this.addLine(t.x,t.y,e.x,e.y);else{var r=[];r.push(t),r.push(e),r.push(i),r.push(n),this.addPoints(r,eO.Line)}},e.prototype.addPath=function(t,i){if(t instanceof e)this.addPath(t.pathPoints,t.pathTypes);else{if(null==t)throw new Error("ArgumentNullException:pathPoints");if(null==i)throw new Error("ArgumentNullException:pathTypes");if(t.length!==i.length)throw new Error("The argument arrays should be of equal length.")}},e.prototype.addPie=function(t,e,i,n,r,o){t instanceof aP?this.addPie(t.x,t.y,t.width,t.height,e,i):(this.startFigure(),this.addArc(t,e,i,n,r,o),this.addPoint(new oP(t+i/2,e+n/2),eO.Line),this.closeFigure())},e.prototype.addPolygon=function(t){t.length;var e=[];this.startFigure();for(var i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y);this.addPoints(e,eO.Line),this.closeFigure()},e.prototype.addRectangle=function(t,e,i,n){if(t instanceof aP)this.addRectangle(t.x,t.y,t.width,t.height);else{var r=[];this.startFigure(),r.push(t),r.push(e),r.push(t+i),r.push(e),r.push(t+i),r.push(e+n),r.push(t),r.push(e+n),this.addPoints(r,eO.Line),this.closeFigure()}},e.prototype.startFigure=function(){this.mStartFigure=!0},e.prototype.closeAllFigures=function(){for(var t=this.pathPoints[0],e=0;e<this.mpathTypes.length;e++){var i=this.types[e],n=!1;0!==e&&i===eO.Start?(this.closeFigure(e-1),n=!0):e===this.mpathTypes.length-1&&!n&&this.isXps&&t.x===this.pathPoints[e].y&&this.closeFigure(e)}},e.prototype.getLastPoint=function(){var t=new oP(0,0),e=this.pointCount;return e>0&&null!=this.mpoints&&(t.x=this.mpoints[e-1].x,t.y=this.mpoints[e-1].y),t},e.prototype.getBezierArcPoints=function(t,e,i,n,r,o){if(t>i){var s=void 0;s=t,t=i,i=s}if(n>e){s=void 0;s=e,e=n,n=s}var a,l;Math.abs(o)<=90?(a=o,l=1):a=o/(l=Math.ceil(Math.abs(o)/90));for(var h=(t+i)/2,c=(e+n)/2,d=(i-t)/2,p=(n-e)/2,u=a*(Math.PI/360),f=Math.abs(4/3*(1-Math.cos(u))/Math.sin(u)),g=[],m=0;m<l;m++){var y=(r+m*a)*(Math.PI/180),v=(r+(m+1)*a)*(Math.PI/180),b=Math.cos(y),w=Math.cos(v),S=Math.sin(y),x=Math.sin(v);a>0?g.push(h+d*b,c-p*S,h+d*(b-f*S),c-p*(S+f*b),h+d*(w+f*x),c-p*(x-f*w),h+d*w,c-p*x):g.push(h+d*b,c-p*S,h+d*(b+f*S),c-p*(S-f*b),h+d*(w-f*x),c-p*(x+f*w),h+d*w,c-p*x)}return g},e.prototype.getBoundsInternal=function(){var t=this.pathPoints,e=new aP(0,0,0,0);if(t.length>0){for(var i=t[0].x,n=t[0].x,r=t[0].y,o=t[0].y,s=1;s<t.length;s++){var a=t[s];i=Math.min(a.x,i),n=Math.max(a.x,n),r=Math.min(a.y,r),o=Math.max(a.y,o)}e=new aP(i,r,n-i,o-r)}return e},e.prototype.drawInternal=function(t){if(null==t)throw new Error("ArgumentNullException :graphics");t.drawPath(this.obtainPen(),this.brush,this)},e.prototype.addPoints=function(t,e,i,n){if(void 0===i&&void 0===n)this.addPoints(t,e,0,t.length);else for(var r=i;r<n;r++){var o=new oP(t[r],t[r+1]);r===i?this.pointCount<=0||this.mStartFigure?(this.addPoint(o,eO.Start),this.mStartFigure=!1):o.x===this.lastPoint.x||o.y===this.lastPoint.y||this.isBeziers3?o.x!==this.lastPoint.x&&o.y!==this.lastPoint.y&&this.addPoint(o,eO.Bezier3):this.addPoint(o,eO.Line):this.addPoint(o,e),r++}},e.prototype.addPoint=function(t,e){this.points.push(t),this.types.push(e)},e.prototype.closeFigure=function(t){if(void 0===t)this.pointCount>0&&this.closeFigure(this.pointCount-1),this.startFigure();else{if(t<0)throw new Error("IndexOutOfRangeException()");var e=this.types[t];e|=eO.CloseSubpath,this.types[t]=e}},e}($L),iI=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),nI=function(t){function e(e,i,n,r,o,s){var a=t.call(this)||this;return a.bounds=new aP(0,0,0,0),void 0===e||(e instanceof _P?(a=t.call(this,e,i)||this).bounds=n instanceof aP?n:new aP(n,r,o,s):a.bounds=e instanceof aP?e:new aP(e,i,n,r)),a}return iI(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.bounds.x},set:function(t){this.bounds.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.bounds.y},set:function(t){this.bounds.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.bounds.width},set:function(t){this.bounds.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.bounds.height},set:function(t){this.bounds.height=t},enumerable:!0,configurable:!0}),e.prototype.getBoundsInternal=function(){return this.bounds},e}($L),rI=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),oI=function(t){function e(e,i,n,r,o,s,a,l){var h=t.call(this)||this;return h.startAngle=0,h.sweepAngle=0,void 0===e||(e instanceof aP&&void 0!==i&&void 0!==n?((h=t.call(this,e)||this).startAngle=i,h.sweepAngle=n):e instanceof _P?n instanceof aP?((h=t.call(this,e,i,n)||this).startAngle=r,h.sweepAngle=o):((h=t.call(this,e,i,n,r,o,s)||this).startAngle=a,h.sweepAngle=l):((h=t.call(this,e,i,n,r)||this).startAngle=o,h.sweepAngle=s)),h}return rI(e,t),e}(nI),sI=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),aI=function(t){function e(e,i,n,r,o,s,a){var l=this;return void 0===e?l=t.call(this)||this:e instanceof aP?l=t.call(this,e,i,n)||this:e instanceof _P?i instanceof aP?l=t.call(this,e,null,i,n,r)||this:void 0===s&&void 0===a?l=t.call(this,e,null,0,0,i,n,r,o)||this:void 0!==s&&void 0!==a&&(l=t.call(this,e,null,i,n,r,o,s,a)||this):void 0!==e&&void 0===o&&void 0===s?l=t.call(this,0,0,e,i,n,r)||this:void 0!==e&&void 0!==o&&void 0!==s&&(l=t.call(this,e,i,n,r,o,s)||this),l}return sI(e,t),e.prototype.draw=function(t,e,i,n){if(e instanceof oP&&void 0===e.width&&void 0===i)return this.drawHelper(t,e.x,e.y);if(e instanceof aP&&void 0!==e.width&&void 0===i)return this.drawHelper(t,e,null);if("number"==typeof e&&"number"==typeof i&&void 0===n)return this.drawHelper(t,e,i,null);if(e instanceof oP&&i instanceof EE)return this.drawHelper(t,e.x,e.y,i);if("number"==typeof e&&(n instanceof EE||null==n)&&"number"==typeof i){var r=t.graphics.clientSize.width-e,o=new aP(e,i,r,0);return this.drawHelper(t,o,n)}return this.drawHelper(t,e,i)},e.prototype.drawInternal=function(t){if(null==t)throw new Error("ArgumentNullException : graphics");t.drawArc(this.obtainPen(),this.bounds,this.startAngle,this.sweepAngle)},e}(oI),lI=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hI=function(t){function e(e,i,n){var r=t.call(this,i)||this;return r.isEmbedFont=!1,r.isUnicode=!0,void 0!==n?r.createFontInternal(e,n):r.createFontInternal(e,GC.Regular),r}return lI(e,t),e.prototype.equalsToFont=function(t){return!1},e.prototype.getLineWidth=function(t,e){var i=0;null!==e&&e.textDirection!==NC.None?i=this.getUnicodeLineWidth(t,i,e).width:i=this.fontInternal.getLineWidth(t);var n=this.metrics.getSize(e);return i*=bP.charSizeMultiplier*n,i=this.applyFormatSettings(t,e,i)},e.prototype.getCharWidth=function(t,e){var i=this.fontInternal.getCharWidth(t);return i*=.001*this.metrics.getSize(e)},e.prototype.createFontInternal=function(t,e){this.fontInternal=new AO(t,this.size),this.calculateStyle(e),this.initializeInternals()},e.prototype.calculateStyle=function(t){var e=this.fontInternal.ttfMetrics.macStyle;0!=(t&GC.Underline)&&(e|=GC.Underline),0!=(t&GC.Strikeout)&&(e|=GC.Strikeout),this.setStyle(e)},e.prototype.initializeInternals=function(){var t=null;fE.enableCache&&(t=fE.cache.search(this));var e=null;if(null!=t){e=t.getInternals();var i=t.metrics;(i=i.clone()).size=this.size,this.metrics=i,this.fontInternal=t.fontInternal}else null==t&&(this.fontInternal instanceof AO&&(this.fontInternal.isEmbed=this.isEmbedFont),this.fontInternal.createInternals(),e=this.fontInternal.getInternals(),this.metrics=this.fontInternal.metrics);this.metrics.isUnicodeFont=!0,this.setInternals(e)},e.prototype.setSymbols=function(t){var e=this.fontInternal;null!=e&&e.setSymbols(t)},Object.defineProperty(e.prototype,"Unicode",{get:function(){return this.isUnicode},enumerable:!0,configurable:!0}),e.prototype.getUnicodeLineWidth=function(t,e,i){e=0;var n=null,r=(new RO).getGlyphIndex(t,this,i.textDirection===NC.RightToLeft,n,!0),o=r.success;if(n=r.glyphs,o&&null!==n)for(var s=this.fontInternal.ttfReader,a=0,l=n.length;a<l;a++){var h=n[a],c=s.getGlyph(h);null!=c&&(e+=c.width)}return{success:o,width:e}},e}(bP),cI=function(){function t(t,e,i,n,r){t instanceof aP&&void 0===e?this.InitiateBounds(t.x,t.y,t.width,t.height,null):t instanceof aP&&e instanceof iE&&void 0===i?this.InitiateBounds(t.x,t.y,t.width,t.height,e):t instanceof oP&&e instanceof sP&&void 0===i?this.InitiateBounds(t.x,t.y,e.width,e.height,null):t instanceof oP&&e instanceof sP&&i instanceof iE&&void 0===n?this.InitiateBounds(t.x,t.y,e.width,e.height,i):t instanceof sP&&void 0===e?this.InitiateBounds(0,0,t.width,t.height,null):"number"==typeof t&&"number"==typeof e&&void 0===i?this.InitiateBounds(0,0,t,e,null):"number"==typeof t&&"number"==typeof e&&i instanceof iE&&void 0===n?this.InitiateBounds(0,0,t,e,i):this.InitiateBounds(t,e,i,n,null)}return Object.defineProperty(t.prototype,"dock",{get:function(){return this.dockStyle},set:function(t){this.dockStyle=t,this.resetAlignment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alignment",{get:function(){return this.alignmentStyle},set:function(t){this.setAlignment(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"foreground",{get:function(){return this.isForeground},set:function(t){this.isForeground=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"background",{get:function(){return!this.isForeground},set:function(t){this.isForeground=!t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"location",{get:function(){return this.currentLocation},set:function(t){this.type===AP.None&&(this.currentLocation=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return void 0!==this.currentLocation?this.currentLocation.x:0},set:function(t){this.type===AP.None&&(this.currentLocation.x=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return void 0!==this.currentLocation?this.currentLocation.y:0},set:function(t){this.type===AP.None&&(this.currentLocation.y=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.template.size},set:function(t){this.type===AP.None&&this.template.reset(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.template.width},set:function(t){if(this.template.width!==t&&this.type===AP.None){var e=this.template.size;e.width=t,this.template.reset(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.template.height},set:function(t){if(this.template.height!==t&&this.type===AP.None){var e=this.template.size;e.height=t,this.template.reset(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"graphics",{get:function(){return this.template.graphics},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return this.pdfTemplate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.templateType},set:function(t){this.updateDocking(t),this.templateType=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bounds",{get:function(){return new aP(new oP(this.x,this.y),this.size)},set:function(t){this.type===AP.None&&(this.location=new oP(t.x,t.y),this.size=new sP(t.width,t.height))},enumerable:!0,configurable:!0}),t.prototype.InitiateBounds=function(t,e,i,n,r){this.x=t,this.y=e,this.pdfTemplate=new HO(i,n)},t.prototype.updateDocking=function(t){if(t!==AP.None){switch(t){case AP.Top:this.dock=IP.Top;break;case AP.Bottom:this.dock=IP.Bottom;break;case AP.Left:this.dock=IP.Left;break;case AP.Right:this.dock=IP.Right}this.resetAlignment()}},t.prototype.resetAlignment=function(){this.alignment=TP.None},t.prototype.setAlignment=function(t){if(this.dock===IP.None)this.alignmentStyle=t;else{var e=!1;switch(this.dock){case IP.Left:e=t===TP.TopLeft||t===TP.MiddleLeft||t===TP.BottomLeft||t===TP.None;break;case IP.Top:e=t===TP.TopLeft||t===TP.TopCenter||t===TP.TopRight||t===TP.None;break;case IP.Right:e=t===TP.TopRight||t===TP.MiddleRight||t===TP.BottomRight||t===TP.None;break;case IP.Bottom:e=t===TP.BottomLeft||t===TP.BottomCenter||t===TP.BottomRight||t===TP.None;break;case IP.Fill:e=t===TP.MiddleCenter||t===TP.None}e&&(this.alignmentStyle=t)}},t.prototype.draw=function(t,e){var i=t.page,n=this.calculateBounds(i,e);-0===n.x&&(n.x=0),t.graphics.drawPdfTemplate(this.template,new oP(n.x,n.y),new sP(n.width,n.height))},t.prototype.calculateBounds=function(t,e){var i=this.bounds;return this.alignmentStyle!==TP.None?i=this.getAlignmentBounds(t,e):this.dockStyle!==IP.None&&(i=this.getDockBounds(t,e)),i},t.prototype.getAlignmentBounds=function(t,e){this.bounds;return this.type===AP.None?this.getSimpleAlignmentBounds(t,e):this.getTemplateAlignmentBounds(t,e)},t.prototype.getSimpleAlignmentBounds=function(t,e){var i=this.bounds,n=t.section.getActualBounds(e,t,!1),r=this.x,o=this.y;switch(this.alignmentStyle){case TP.TopLeft:r=0,o=0;break;case TP.TopCenter:r=(n.width-this.width)/2,o=0;break;case TP.TopRight:r=n.width-this.width,o=0;break;case TP.MiddleLeft:r=0,o=(n.height-this.height)/2;break;case TP.MiddleCenter:r=(n.width-this.width)/2,o=(n.height-this.height)/2;break;case TP.MiddleRight:r=n.width-this.width,o=(n.height-this.height)/2;break;case TP.BottomLeft:r=0,o=n.height-this.height;break;case TP.BottomCenter:r=(n.width-this.width)/2,o=n.height-this.height;break;case TP.BottomRight:r=n.width-this.width,o=n.height-this.height}return i.x=r,i.y=o,i},t.prototype.getTemplateAlignmentBounds=function(t,e){var i=this.bounds,n=t.section,r=n.getActualBounds(e,t,!1),o=this.x,s=this.y;switch(this.alignmentStyle){case TP.TopLeft:this.type===AP.Left?(o=-r.x,s=0):this.type===AP.Top&&(o=-r.x,s=-r.y);break;case TP.TopCenter:o=(r.width-this.width)/2,s=-r.y;break;case TP.TopRight:this.type===AP.Right?(o=r.width+n.getRightIndentWidth(e,t,!1)-this.width,s=0):this.type===AP.Top&&(o=r.width+n.getRightIndentWidth(e,t,!1)-this.width,s=-r.y);break;case TP.MiddleLeft:o=-r.x,s=(r.height-this.height)/2;break;case TP.MiddleCenter:o=(r.width-this.width)/2,s=(r.height-this.height)/2;break;case TP.MiddleRight:o=r.width+n.getRightIndentWidth(e,t,!1)-this.width,s=(r.height-this.height)/2;break;case TP.BottomLeft:this.type===AP.Left?(o=-r.x,s=r.height-this.height):this.type===AP.Bottom&&(o=-r.x,s=r.height+n.getBottomIndentHeight(e,t,!1)-this.height);break;case TP.BottomCenter:o=(r.width-this.width)/2,s=r.height+n.getBottomIndentHeight(e,t,!1)-this.height;break;case TP.BottomRight:this.type===AP.Right?(o=r.width+n.getRightIndentWidth(e,t,!1)-this.width,s=r.height-this.height):this.type===AP.Bottom&&(o=r.width+n.getRightIndentWidth(e,t,!1)-this.width,s=r.height+n.getBottomIndentHeight(e,t,!1)-this.height)}return i.x=o,i.y=s,i},t.prototype.getDockBounds=function(t,e){this.bounds;return this.type===AP.None?this.getSimpleDockBounds(t,e):this.getTemplateDockBounds(t,e)},t.prototype.getSimpleDockBounds=function(t,e){this.bounds;var i=t.section.getActualBounds(e,t,!1),n=this.x,r=this.y,o=this.width,s=this.height;switch(this.dockStyle){case IP.Left:n=0,r=0,o=this.width,s=i.height;break;case IP.Top:n=0,r=0,o=i.width,s=this.height;break;case IP.Right:n=i.width-this.width,r=0,o=this.width,s=i.height;break;case IP.Bottom:n=0,r=i.height-this.height,o=i.width,s=this.height;break;case IP.Fill:n=0,n=0,o=i.width,s=i.height}return new aP(n,r,o,s)},t.prototype.getTemplateDockBounds=function(t,e){this.bounds;var i=t.section,n=i.getActualBounds(e,t,!1),r=i.pageSettings.getActualSize(),o=this.x,s=this.y,a=this.width,l=this.height;switch(this.dockStyle){case IP.Left:o=-n.x,s=0,a=this.width,l=n.height;break;case IP.Top:o=-n.x,s=-n.y,a=r.width,l=this.height,n.height<0&&(s=-n.y+r.height);break;case IP.Right:o=n.width+i.getRightIndentWidth(e,t,!1)-this.width,s=0,a=this.width,l=n.height;break;case IP.Bottom:o=-n.x,s=n.height+i.getBottomIndentHeight(e,t,!1)-this.height,a=r.width,l=this.height,n.height<0&&(s-=r.height);break;case IP.Fill:o=0,o=0,a=n.width,l=n.height}return new aP(o,s,a,l)},t}();(function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}})(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}();(function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}})(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}();(function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}})(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}();var dI;(function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}})(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}();!function(t){t.axisLabelFont={size:"12px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},t.tooltipLabelFont={size:"12px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"}}(dI||(dI={}));var pI;(function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}})(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),(new Date).getDate(),(new Date).getMonth(),(new Date).getFullYear();!function(t){(pI||(pI={})).createListItems=function(t,e,i,n,r,o){var s,a;this.calendarMode;var l=6e4*o,h=[],c=[];for(s=+e.setMilliseconds(0),a=+i.setMilliseconds(0);a>=s;)c.push(s),h.push(n.formatDate(new Date(s),{format:r,type:"time"})),s+=l;return{collection:c,list:Gh.createList(t,h,null,!0)}}}();(function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}})(),(new Date).getDate(),(new Date).getMonth(),(new Date).getFullYear(),(new Date).getHours(),(new Date).getMinutes(),(new Date).getSeconds(),(new Date).getMilliseconds(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}();var uI;!function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}();!function(t){t.axisLabelFont={size:"12px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Roboto-Regular"},t.tooltipLabelFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},t.legendLabelFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},t.dataLabelFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},t.titleFont={size:"15px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Roboto-Regular"},t.subTitleFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Roboto-Regular"}}(uI||(uI={}));(function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}})(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}();var fI=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gI=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},mI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fI(e,t),gI([Hi("Segoe UI")],e.prototype,"fontFamily",void 0),gI([Hi("Normal")],e.prototype,"fontStyle",void 0),gI([Hi("Regular")],e.prototype,"fontWeight",void 0),gI([Hi("")],e.prototype,"color",void 0),gI([Hi("12px")],e.prototype,"size",void 0),gI([Hi(1)],e.prototype,"opacity",void 0),e}(ln),yI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fI(e,t),gI([Hi(10)],e.prototype,"top",void 0),gI([Hi(10)],e.prototype,"bottom",void 0),gI([Hi(10)],e.prototype,"right",void 0),gI([Hi(10)],e.prototype,"left",void 0),e}(ln),vI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fI(e,t),gI([Hi(0)],e.prototype,"width",void 0),gI([Hi(1)],e.prototype,"opacity",void 0),gI([Hi("transparent")],e.prototype,"color",void 0),e}(ln),bI=function(){return function(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}}(),wI=function(){return function(){}}(),SI=function(){return function(){}}(),xI=function(){return function(){}}(),CI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fI(e,t),e}(wI),PI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fI(e,t),e}(CI),OI=function(){return function(){}}(),EI=function(){return function(){}}(),LI=function(){return function(){}}(),II=function(){return function(){}}(),TI=function(){return function(t,e,i,n,r){this.id=t,this.fill=e,this.borderColor=i,this.borderWidth=n,this.opacity=r}}(),AI=function(){return function(){}}(),BI=function(){return function(){this.counterclockwise=0,this.clockwise=1}}(),kI=function(){return function(){}}(),MI=function(){return function(){}}(),DI=function(){return function(t,e){this.width=t,this.height=e}}(),RI=function(){return function(){}}(),zI=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function jI(t){t.renderer=new vx(t.element.id),function(t){var e=t.element.clientWidth,i=t.element.clientHeight;t.availableSize=new DI(UI(t.width,e)||e||600,UI(t.height,i)||i||450)}(t),t.svgObject=t.renderer.createSvg({id:t.element.id+"_svg",width:t.availableSize.width,height:t.availableSize.height})}function NI(t){return document.getElementById(t)}function HI(t,e,i){var n=e,r=YI(e,i).width;if(r>t)for(var o=e.length-1;o>=0;--o)if((r=YI(n=e.substring(0,o)+"...",i).width)<=t||n.length<4)return n.length<4&&(n=" "),n;return n}function _I(t){var e=null;try{document.querySelectorAll(t).length&&(e=Te(document.querySelector(t).innerHTML.trim()))}catch(i){e=Te(t)}return e}function VI(t,e,i,n,r){for(var o=t[0].outerHTML,s=Object.keys(i),a=0;a<s.length;a++)o=o.replace(new RegExp("{{:"+s[a]+"}}","g"),i[s[a].toString()]);return $e("div",{id:e,innerHTML:o,styles:"position: absolute"})}function FI(){for(var t=1;1+.5*t!=1;)t*=.5;return t}function WI(t,e,i,n,r){var o,s;new Ji({}).animate(e,{duration:n,delay:i,name:r,progress:function(t){o=(t.timeStamp-t.delay)/t.duration,s=0+1*o,t.element.style.opacity=s.toString()},end:function(e){e.element.style.opacity=1..toString(),t.trigger("animationComplete",event)}})}function UI(t,e){return null!=t?-1!==t.indexOf("%")?e/100*parseInt(t,10):parseInt(t,10):null}var GI=function(){return function(t,e,i,n,r,o,s){this.id=t,this.opacity=r,this.fill=e,this.stroke=n,this["stroke-width"]=i,this["stroke-dasharray"]=o,this.d=s}}(),qI=function(t){function e(e,i,n,r,o){var s=t.call(this,e,i,n.width,n.color,r)||this;return s.y=o.y,s.x=o.x,s.height=o.height,s.width=o.width,s}return zI(e,t),e}(GI),XI=function(t){function e(e,i,n,r,o,s,a,l){var h=t.call(this,e,i,n.width,n.color,r)||this;return h.cy=s,h.cx=o,h.r=a,h["stroke-dasharray"]=l,h}return zI(e,t),e}(GI);function YI(t,e){var i=document.getElementById("smithchartmeasuretext");return null===i&&(i=$e("text",{id:"smithchartmeasuretext"}),document.body.appendChild(i)),i.innerHTML=t,i.style.position="absolute",i.style.visibility="hidden",i.style.left="0",i.style.top="-100",i.style.whiteSpace="nowrap",i.style.fontSize=e.size,i.style.fontWeight=e.fontWeight,i.style.fontStyle=e.fontStyle,i.style.fontFamily=e.fontFamily,i.style.lineHeight="normal",new DI(i.clientWidth,i.clientHeight)}var ZI,KI=function(){return function(t,e,i,n,r){this.id=t,this.x=e,this.y=i,this.anchor=n,this.text=r}}();function JI(t){var e=document.getElementById(t);return e?li(e):null}function QI(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e}function $I(t,e,i,n){return-e*Math.sin(t/n*(Math.PI/2))+i+e}function tT(t){var e;switch(t){case"Linear":e=QI;break;case"Reverse":e=$I}return e}function eT(t,e,i,n){var r={id:t.id,x:t.x,y:t.y,fill:i,"font-size":e.size,"font-style":e.fontStyle,"font-family":e.fontFamily,"font-weight":e.fontWeight,"text-anchor":t.anchor,opacity:e.opacity},o=t.text,s=new vx("").createText(r,o);return n.appendChild(s),s}!function(t){t.axisLabelFont={size:"12px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Roboto, Segoe UI, Noto, Sans-serif"},t.smithchartTitleFont={size:"15px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Roboto, Segoe UI, Noto, Sans-serif"},t.smithchartSubtitleFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Roboto, Segoe UI, Noto, Sans-serif"},t.dataLabelFont={size:"12px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Roboto, Segoe UI, Noto, Sans-serif"},t.legendLabelFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Roboto, Segoe UI, Noto, Sans-serif"}}(ZI||(ZI={}));var iT=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),nT=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},rT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return iT(e,t),nT([Hi(!0)],e.prototype,"visible",void 0),nT([Hi("")],e.prototype,"text",void 0),nT([Hi("")],e.prototype,"description",void 0),nT([Hi("Center")],e.prototype,"textAlignment",void 0),nT([_i(ZI.legendLabelFont,mI)],e.prototype,"textStyle",void 0),e}(ln),oT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return iT(e,t),nT([Hi(0)],e.prototype,"x",void 0),nT([Hi(0)],e.prototype,"y",void 0),e}(ln),sT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return iT(e,t),nT([Hi(1)],e.prototype,"width",void 0),nT([Hi(null)],e.prototype,"color",void 0),e}(ln),aT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return iT(e,t),nT([Hi(10)],e.prototype,"width",void 0),nT([Hi(10)],e.prototype,"height",void 0),nT([_i({},sT)],e.prototype,"border",void 0),e}(ln),lT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return iT(e,t),nT([Hi(1)],e.prototype,"width",void 0),nT([Hi(null)],e.prototype,"color",void 0),e}(ln),hT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return iT(e,t),nT([Hi(!1)],e.prototype,"visible",void 0),nT([Hi("bottom")],e.prototype,"position",void 0),nT([Hi("Center")],e.prototype,"alignment",void 0),nT([Hi(null)],e.prototype,"width",void 0),nT([Hi(null)],e.prototype,"height",void 0),nT([Hi("circle")],e.prototype,"shape",void 0),nT([Hi(null)],e.prototype,"rowCount",void 0),nT([Hi(null)],e.prototype,"columnCount",void 0),nT([Hi(8)],e.prototype,"itemPadding",void 0),nT([Hi(5)],e.prototype,"shapePadding",void 0),nT([Hi("")],e.prototype,"description",void 0),nT([Hi(!0)],e.prototype,"toggleVisibility",void 0),nT([_i({},rT)],e.prototype,"title",void 0),nT([_i({},oT)],e.prototype,"location",void 0),nT([_i({},aT)],e.prototype,"itemStyle",void 0),nT([_i({},lT)],e.prototype,"border",void 0),nT([_i(ZI.legendLabelFont,mI)],e.prototype,"textStyle",void 0),e}(ln),cT=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dT=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},pT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cT(e,t),dT([Hi(1)],e.prototype,"width",void 0),dT([Hi("")],e.prototype,"dashArray",void 0),dT([Hi(!0)],e.prototype,"visible",void 0),dT([Hi(null)],e.prototype,"color",void 0),dT([Hi(1)],e.prototype,"opacity",void 0),e}(ln),uT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cT(e,t),dT([Hi(1)],e.prototype,"width",void 0),dT([Hi("")],e.prototype,"dashArray",void 0),dT([Hi(!1)],e.prototype,"visible",void 0),dT([Hi(null)],e.prototype,"color",void 0),dT([Hi(8)],e.prototype,"count",void 0),e}(ln),fT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cT(e,t),dT([Hi(!0)],e.prototype,"visible",void 0),dT([Hi(1)],e.prototype,"width",void 0),dT([Hi(null)],e.prototype,"color",void 0),dT([Hi("")],e.prototype,"dashArray",void 0),e}(ln),gT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cT(e,t),dT([Hi(!0)],e.prototype,"visible",void 0),dT([Hi("Outside")],e.prototype,"labelPosition",void 0),dT([Hi("Hide")],e.prototype,"labelIntersectAction",void 0),dT([_i({},pT)],e.prototype,"majorGridLines",void 0),dT([_i({},uT)],e.prototype,"minorGridLines",void 0),dT([_i({},fT)],e.prototype,"axisLine",void 0),dT([_i(ZI.axisLabelFont,mI)],e.prototype,"labelStyle",void 0),e}(ln),mT=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),yT=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},vT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mT(e,t),yT([Hi(!0)],e.prototype,"visible",void 0),yT([Hi("")],e.prototype,"text",void 0),yT([Hi("")],e.prototype,"description",void 0),yT([Hi("Far")],e.prototype,"textAlignment",void 0),yT([Hi(!0)],e.prototype,"enableTrim",void 0),yT([Hi(null)],e.prototype,"maximumWidth",void 0),yT([_i(ZI.smithchartSubtitleFont,mI)],e.prototype,"textStyle",void 0),e}(ln),bT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mT(e,t),yT([Hi(!0)],e.prototype,"visible",void 0),yT([Hi("")],e.prototype,"text",void 0),yT([Hi("")],e.prototype,"description",void 0),yT([Hi("Center")],e.prototype,"textAlignment",void 0),yT([Hi(!0)],e.prototype,"enableTrim",void 0),yT([Hi(null)],e.prototype,"maximumWidth",void 0),yT([_i({},vT)],e.prototype,"subtitle",void 0),yT([_i(ZI.smithchartTitleFont,mI)],e.prototype,"font",void 0),yT([_i(ZI.smithchartTitleFont,mI)],e.prototype,"textStyle",void 0),e}(ln),wT=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ST=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},xT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wT(e,t),ST([Hi(1)],e.prototype,"width",void 0),ST([Hi(null)],e.prototype,"color",void 0),e}(ln),CT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wT(e,t),ST([Hi(!1)],e.prototype,"visible",void 0),ST([Hi(null)],e.prototype,"fill",void 0),ST([Hi(.95)],e.prototype,"opacity",void 0),ST([Hi("")],e.prototype,"template",void 0),ST([_i({},xT)],e.prototype,"border",void 0),e}(ln),PT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wT(e,t),ST([Hi(3)],e.prototype,"width",void 0),ST([Hi("white")],e.prototype,"color",void 0),e}(ln),OT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wT(e,t),ST([Hi(.1)],e.prototype,"width",void 0),ST([Hi("white")],e.prototype,"color",void 0),e}(ln),ET=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wT(e,t),ST([Hi(1)],e.prototype,"width",void 0),ST([Hi(null)],e.prototype,"color",void 0),e}(ln),LT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wT(e,t),ST([Hi(!1)],e.prototype,"visible",void 0),ST([Hi("")],e.prototype,"template",void 0),ST([Hi(null)],e.prototype,"fill",void 0),ST([Hi(1)],e.prototype,"opacity",void 0),ST([_i({},OT)],e.prototype,"border",void 0),ST([_i({},ET)],e.prototype,"connectorLine",void 0),ST([_i(ZI.dataLabelFont,mI)],e.prototype,"textStyle",void 0),e}(ln),IT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wT(e,t),ST([Hi(!1)],e.prototype,"visible",void 0),ST([Hi("circle")],e.prototype,"shape",void 0),ST([Hi(6)],e.prototype,"width",void 0),ST([Hi(6)],e.prototype,"height",void 0),ST([Hi("")],e.prototype,"imageUrl",void 0),ST([Hi("")],e.prototype,"fill",void 0),ST([Hi(1)],e.prototype,"opacity",void 0),ST([_i({},PT)],e.prototype,"border",void 0),ST([_i({},LT)],e.prototype,"dataLabel",void 0),e}(ln),TT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wT(e,t),ST([Hi("visible")],e.prototype,"visibility",void 0),ST([Hi([])],e.prototype,"points",void 0),ST([Hi("")],e.prototype,"resistance",void 0),ST([Hi("")],e.prototype,"reactance",void 0),ST([Hi("")],e.prototype,"tooltipMappingName",void 0),ST([Hi(null)],e.prototype,"dataSource",void 0),ST([Hi("")],e.prototype,"name",void 0),ST([Hi(null)],e.prototype,"fill",void 0),ST([Hi(!1)],e.prototype,"enableAnimation",void 0),ST([Hi("2000ms")],e.prototype,"animationDuration",void 0),ST([Hi(!1)],e.prototype,"enableSmartLabels",void 0),ST([Hi(1)],e.prototype,"width",void 0),ST([Hi(1)],e.prototype,"opacity",void 0),ST([_i({},IT)],e.prototype,"marker",void 0),ST([_i({},CT)],e.prototype,"tooltip",void 0),e}(ln),AT=function(){function t(){}return t.prototype.calculateAreaBounds=function(t,e,i){var n,r,o,s=t.margin,a=t.border,l=this.getLegendSpace(t,i);return n=l.leftLegendWidth+s.left+a.width,o=l.rightLegendWidth+s.left+s.right+2*a.width,r=t.availableSize.width-(n+o),{x:n,y:s.top+2*t.elementSpacing+l.modelTitleHeight+l.modelsubTitleHeight+l.topLegendHeight+a.width,width:r,height:t.availableSize.height-(l.modelTitleHeight+2*t.elementSpacing+l.modelsubTitleHeight+s.top+l.topLegendHeight+l.bottomLegendHeight)}},t.prototype.getLegendSpace=function(t,e){var i,n,r=t.title,o=t.legendSettings,s=o.position.toLowerCase(),a=t.font,l=o.border.width,h=0,c=0,d=0,p=0,u=0;return o.visible&&(n=e.width+5+t.elementSpacing+2*l,h="left"===s?n:0,c="right"===s?n:0,u=o.title.visible?YI(o.title.text,a).height:0,d="top"===s?t.elementSpacing+e.height+u:0,p="bottom"===s?t.elementSpacing+e.height+u:0),i=YI(r.subtitle.text,a).height,""!==r.text&&r.visible,{leftLegendWidth:h,rightLegendWidth:c,topLegendHeight:d,bottomLegendHeight:p,modelTitleHeight:0,modelsubTitleHeight:""!==r.subtitle.text&&r.subtitle.visible?i:0}},t}(),BT=function(){function t(){this.radialLabels=[-50,-20,-10,-5,-4,-3,-2,-1.5,-1,-.8,-.6,-.4,-.2,0,.2,.4,.6,.8,1,1.5,2,3,4,5,10,20,50],this.radialLabelCollections=[],this.horizontalLabelCollections=[],this.labelCollections=[],this.direction=new BI}return t.prototype.renderArea=function(t,e){this.calculateChartArea(t,e),this.calculateCircleMargin(t,e),this.calculateXAxisRange(t),this.calculateRAxisRange(t),this.measureHorizontalAxis(t),this.measureRadialAxis(t),t.horizontalAxis.visible&&this.updateHAxis(t),t.radialAxis.visible&&this.updateRAxis(t),t.horizontalAxis.visible&&this.drawHAxisLabels(t),t.radialAxis.visible&&this.drawRAxisLabels(t)},t.prototype.updateHAxis=function(t){var e=t.horizontalAxis.majorGridLines,i=t.horizontalAxis.minorGridLines,n=t.horizontalAxis.axisLine;e.visible&&this.updateHMajorGridLines(t),i.visible&&this.updateHMinorGridLines(t),n.visible&&this.updateHAxisLine(t)},t.prototype.updateRAxis=function(t){var e=t.radialAxis.majorGridLines,i=t.radialAxis.minorGridLines,n=t.radialAxis.axisLine;e.visible&&this.updateRMajorGridLines(t),i.visible&&this.updateRMinorGridLines(t),n.visible&&this.updateRAxisLine(t)},t.prototype.measureHorizontalAxis=function(t){t.horizontalAxis.majorGridLines;var e=t.horizontalAxis.minorGridLines;this.measureHMajorGridLines(t),e.visible&&this.measureHMinorGridLines(t)},t.prototype.measureRadialAxis=function(t){t.radialAxis.majorGridLines;var e=t.radialAxis.minorGridLines;this.measureRMajorGridLines(t),e.visible&&this.measureRMinorGridLines(t)},t.prototype.calculateChartArea=function(t,e){var i,n,r,o,s=t.availableSize.width,a=t.availableSize.height;s=e.width,a=e.height,i=Math.min(s,a),n=Math.min(s,a),r=e.x+(e.width/2-i/2),o=e.y+((a-n)/2>0?(a-n)/2:0),t.chartArea={x:r,y:o,width:i,height:n}},t.prototype.calculateCircleMargin=function(t,e){var i,n=t.chartArea.width,r=t.radius;i=this.maximumLabelLength(t);var o="Outside"===t.radialAxis.labelPosition?i+10:10,s=(n-2*o>0?n-2*o:0)/2,a=r>1?1:r<.1?.1:r;this.areaRadius=s*a,this.circleLeftX=t.chartArea.x+o+s*(1-a),this.circleTopY=t.chartArea.y+o+s*(1-a),this.circleCenterX=this.circleLeftX+this.areaRadius,this.circleCenterY=e.y+e.height/2},t.prototype.maximumLabelLength=function(t){for(var e,i=0,n=t.horizontalAxis.labelStyle,r=0;r<this.radialLabels.length;r++)i<(e=YI(this.radialLabels[r].toString(),n)).width&&(i=e.width);return i},t.prototype.calculateAxisLabels=function(){for(var t=0,e=0,i=[],n=2*this.areaRadius,r=0;r<2;r+=.1){var o=!1,s=!1,a=n*(1/((r=Math.round(10*r)/10)+1))/2*2;0!==t&&1!==r?(r<1&&(o=this.isOverlap(1,n,a,30)),r>1&&(s=this.isOverlap(2,n,a,30)),o||s||t-a>=30&&(i[e]=r,e++,t=a)):(t=a,i[e]=r,e++)}for(var l=[2,3,4,5,10,20,50],h=0;h<l.length;h++)i[e]=l[h],e++;return i},t.prototype.isOverlap=function(t,e,i,n){return i-e*(1/(t+1))/2*2<n},t.prototype.calculateXAxisRange=function(t){for(var e,i,n,r=2*this.areaRadius,o=this.calculateAxisLabels(),s=this.circleCenterY,a=this.circleLeftX,l=this.circleLeftX,h=0;h<o.length;h++)i=r*(1/((e=o[h])+1))/2,"Impedance"===t.renderType&&(l=a+r-2*i),n=l+i,this.horizontalLabelCollections.push({centerX:n,centerY:s,radius:i,value:e,region:null})},t.prototype.calculateRAxisRange=function(t){var e,i,n,r=2*this.areaRadius,o=new LI;"Impedance"===t.renderType?(o.x=this.circleLeftX+r,o.y=this.circleTopY+this.areaRadius):(o.x=this.circleLeftX,o.y=this.circleTopY+this.areaRadius);for(var s=0;s<this.radialLabels.length;s++)n=this.radialLabels[s],i=Math.abs(1/n*r/2),e="Impedance"===t.renderType?n>0?o.y-i:o.y+i:n<0?o.y-i:o.y+i,this.radialLabelCollections.push({centerX:o.x,centerY:e,radius:i,value:n})},t.prototype.measureHMajorGridLines=function(t){var e,i,n,r,o,s=[];this.majorHGridArcPoints=[];for(var a=0;a<this.horizontalLabelCollections.length;a++){var l=new CI;l=this.horizontalLabelCollections[a],s=this.calculateHMajorArcStartEndPoints(l.value),"Impedance"===t.renderType?(n=s[0],r=s[1]):(n=s[1],r=s[0]),o={width:l.radius,height:l.radius},0!==l.value&&50!==l.value?(e=this.intersectingCirclePoints(n[0].centerX,n[0].centerY,n[0].radius,l.centerX,l.centerY,l.radius,t.renderType),i=this.intersectingCirclePoints(r[0].centerX,r[0].centerY,r[0].radius,l.centerX,l.centerY,l.radius,t.renderType),this.majorHGridArcPoints.push({startPoint:e,endPoint:i,rotationAngle:2*Math.PI,sweepDirection:"Impedance"===t.renderType?this.direction.counterclockwise:this.direction.clockwise,isLargeArc:!0,size:o})):(e={x:l.centerX+l.radius,y:l.centerY},i={x:l.centerX+l.radius,y:l.centerY-.05},this.majorHGridArcPoints.push({startPoint:e,endPoint:i,rotationAngle:2*Math.PI,sweepDirection:this.direction.clockwise,isLargeArc:!0,size:o}))}},t.prototype.measureRMajorGridLines=function(t){var e,i,n,r,o,s,a,l,h,c,d=[];this.majorRGridArcPoints=[],this.labelCollections=[],e=FI();for(var p=0;p<this.radialLabelCollections.length;p++)(i=this.radialLabelCollections[p]).radius<=e||(n=i.value,r=(d=this.calculateMajorArcStartEndPoints(i,Math.abs(n),t))[0],o=d[1],s=this.circleXYRadianValue(this.circleCenterX,this.circleCenterY,o.x,o.y)*(180/Math.PI),0!==n?(a={x:r.x,y:r.y},l={x:o.x,y:o.y},h={width:i.radius,height:i.radius},c=n>0?this.direction.clockwise:this.direction.counterclockwise,this.majorRGridArcPoints.push({startPoint:a,endPoint:l,size:h,rotationAngle:2*Math.PI,isLargeArc:!1,sweepDirection:c}),this.labelCollections.push({centerX:o.x,centerY:o.y,angle:s,value:n,radius:this.areaRadius,region:null})):(a={x:this.circleLeftX,y:this.circleCenterY},l={x:this.circleCenterX+this.areaRadius,y:this.circleCenterY},this.majorRGridArcPoints.push({startPoint:a,endPoint:l,size:null,rotationAngle:null,isLargeArc:null,sweepDirection:null}),this.labelCollections.push({centerX:"Impedance"===t.renderType?this.circleCenterX-this.areaRadius:this.circleCenterX+this.areaRadius,centerY:this.circleCenterY,angle:"Impedance"===t.renderType?180:360,value:n,radius:this.areaRadius,region:null})))},t.prototype.circleXYRadianValue=function(t,e,i,n){var r;return r=(r=Math.atan2(n-e,i-t))<0?r+360*Math.PI/180:r},t.prototype.calculateMajorArcStartEndPoints=function(t,e,i){var n,r,o=[],s=[];return n=this.circleCenterX,r=this.circleCenterY,e>=10?o[0]="Impedance"===i.renderType?{x:n+this.areaRadius,y:r}:{x:n-this.areaRadius,y:r}:s=e>=3?this.horizontalLabelCollections.filter(function(t){return 10===t.value}):e>=1?this.horizontalLabelCollections.filter(function(t){return 5===t.value}):this.horizontalLabelCollections.filter(function(t){return 3===t.value}),s.length>0&&(o[0]=this.intersectingCirclePoints(t.centerX,t.centerY,t.radius,s[0].centerX,s[0].centerY,s[0].radius,i.renderType)),o[1]=this.intersectingCirclePoints(t.centerX,t.centerY,t.radius,n,r,this.areaRadius,i.renderType),o},t.prototype.calculateHMajorArcStartEndPoints=function(t){var e,i,n=[];return t<=.3?(e=2,i=-2):t<=1?(e=3,i=-3):t<=2?(e=5,i=-5):t<=5?(e=10,i=-10):(e=50,i=-50),n[0]=this.radialLabelCollections.filter(function(t){return t.value===e}),n[1]=this.radialLabelCollections.filter(function(t){return t.value===i}),n},t.prototype.calculateMinorArcStartEndPoints=function(t){var e,i,n=[];return t<=.1?(e=1,i=-1):t<=.2?(e=.8,i=-.8):t<=.3?(e=.4,i=-.4):t<=.6?(e=1,i=-1):t<=1?(e=1.5,i=-1.5):t<=1.5?(e=2,i=-2):t<=2?(e=1,i=-1):t<=5?(e=3,i=-3):(e=10,i=-10),n[0]=this.radialLabelCollections.filter(function(t){return t.value===e}),n[1]=this.radialLabelCollections.filter(function(t){return t.value===i}),n},t.prototype.intersectingCirclePoints=function(t,e,i,n,r,o,s){var a,l,h,c,d,p,u,f,g,m,y,v,b,w,S,x={x:0,y:0};return a=t-n,l=e-r,p=i*i-o*o,m=(f=(t+n)/2+(d=(i*i-o*o)/(2*(c=(h=Math.sqrt(a*a+l*l))*h)))*(n-t))+(g=(u=Math.sqrt(2*(i*i+o*o)/c-p*p/(c*c)-1))*(r-e)/2),y=f-g,w=(v=(e+r)/2+d*(r-e))+(b=u*(t-n)/2),S=v-b,"Impedance"===s?y<m?(x.x=y,x.y=S):(x.x=m,x.y=w):m>y?(x.x=m,x.y=w):(x.x=y,x.y=S),{x:x.x,y:x.y}},t.prototype.updateHMajorGridLines=function(t){var e,i,n,r=t.horizontalAxis.majorGridLines;e=t.renderer.createGroup({id:t.element.id+"_svg_horizontalAxisMajorGridLines"}),n=this.calculateGridLinesPath(this.majorHGridArcPoints);var o=new GI(t.element.id+"_horizontalAxisMajorGridLines","none",r.width,r.color?r.color:t.themeStyle.majorGridLine,r.opacity,r.dashArray,n);i=t.renderer.drawPath(o),e.appendChild(i),t.svgObject.appendChild(e)},t.prototype.updateRMajorGridLines=function(t){var e,i,n,r=t.radialAxis.majorGridLines;e=t.renderer.createGroup({id:t.element.id+"_svg_radialAxisMajorGridLines"}),n=this.calculateGridLinesPath(this.majorRGridArcPoints);var o=new GI(t.element.id+"_radialAxisMajorGridLines","none",r.width,r.color?r.color:t.themeStyle.majorGridLine,r.opacity,r.dashArray,n);i=t.renderer.drawPath(o),e.appendChild(i),t.svgObject.appendChild(e)},t.prototype.updateHAxisLine=function(t){var e,i,n,r,o,s,a=this.areaRadius,l=t.horizontalAxis.axisLine,h=t.renderer.createGroup({id:t.element.id+"_svg_hAxisLine"});e={x:this.circleCenterX+a,y:this.circleCenterY},i={x:this.circleCenterX+a,y:this.circleCenterY-.05},n={width:a,height:a},r=this.direction.clockwise,o=2*Math.PI,s="M"+e.x+" "+e.y+" A "+n.width+" "+n.height+" "+o+" 1 "+r+" "+i.x+" "+i.y;var c=new GI(t.element.id+"_horizontalAxisLine","none",l.width,l.color?l.color:t.themeStyle.axisLine,1,l.dashArray,s),d=t.renderer.drawPath(c);h.appendChild(d),t.svgObject.appendChild(h)},t.prototype.updateRAxisLine=function(t){var e,i,n,r,o,s=this.areaRadius,a=t.radialAxis.axisLine;e={x:this.circleCenterX-s,y:this.circleCenterY},i={x:this.circleCenterX+s,y:this.circleCenterY},n={width:0,height:0},r=this.direction.counterclockwise,o="M "+e.x+" "+e.y+" A "+n.width+" "+n.height+" 0 0 "+r+" "+i.x+" "+i.y;var l=new GI(t.element.id+"_radialAxisLine","none",a.width,a.color?a.color:t.themeStyle.axisLine,1,a.dashArray,o),h=t.renderer.createGroup({id:t.element.id+"_svg_rAxisLine"}),c=t.renderer.drawPath(l);h.appendChild(c),t.svgObject.appendChild(h)},t.prototype.drawHAxisLabels=function(t){var e=t.horizontalAxis;t.radialAxis.labelStyle.fontFamily=t.themeStyle.fontFamily||t.radialAxis.labelStyle.fontFamily;for(var i,n,r,o,s,a,l,h,c,d,p,u,f,g=t.horizontalAxis.labelStyle,m=t.renderer.createGroup({id:t.element.id+"_HAxisLabels"}),y=function(y){if(i=v.horizontalLabelCollections[y],n=v.horizontalLabelCollections[y].value.toString(),0!==i.value){if(r="Impedance"===t.renderType?i.centerX-i.radius:i.centerX+i.radius,o=i.centerY,s=YI(n,g),r="Impedance"===t.renderType?r-s.width:r,"Outside"===e.labelPosition?o-=s.height/4:o+=s.height,v.horizontalLabelCollections[y].region=v.calculateRegion(n,s,r,o),"Hide"===e.labelIntersectAction){a=v.horizontalLabelCollections[y],l=a.region.bounds,h=l.width,c=l.x;for(var b=1;b<y;b++)d=v.horizontalLabelCollections[b],p=d.region.bounds,u=p.width,f=p.x,"Impedance"===t.renderType&&f+u>c&&(n=""),"Admittance"===t.renderType&&f<c+h&&(n="")}var w={text:n.toString(),x:r,y:o,name:"axisLabelRender",cancel:!1},S=function(e){if(!e.cancel){var i=new KI(t.element.id+"_HLabel_"+y,w.x,w.y,"none",w.text),n=g.color?g.color:t.themeStyle.axisLabel;g.fontFamily=g.fontFamily||t.themeStyle.labelFontFamily;var r=eT(i,g,n,m);m.appendChild(r)}};S.bind(v),t.trigger("axisLabelRender",w,S)}},v=this,b=0;b<this.horizontalLabelCollections.length;b++)y(b);t.svgObject.appendChild(m)},t.prototype.drawRAxisLabels=function(t){t.radialAxis.labelStyle.fontFamily=t.themeStyle.fontFamily||t.radialAxis.labelStyle.fontFamily;for(var e,i,n,r,o,s,a,l,h,c,d,p,u,f,g,m,y,v=t.radialAxis.labelStyle,b=new PI,w=t.radialAxis,S=t.renderer.createGroup({id:t.element.id+"_RAxisLabels"}),x=function(x){if(b=C.labelCollections[x],e=b.value.toString(),i=YI(e,v),n=Math.round(100*b.angle)/100,"Outside"===w.labelPosition?(r=C.circlePointPosition(C.circleCenterX,C.circleCenterY,b.angle,C.areaRadius+2),o=C.setLabelsOutsidePosition(n,r.x,r.y,i)):(r=C.circlePointPosition(C.circleCenterX,C.circleCenterY,b.angle,C.areaRadius-2),o=C.setLabelsInsidePosition(n,r.x,r.y,i)),C.labelCollections[x].region=C.calculateRegion(e,i,o.x,o.y),"Hide"===w.labelIntersectAction){c=C.labelCollections[x],d=c.region.bounds,l=d.width,h=d.height,s=d.x,a=d.y;for(var P=0;P<x;P++)m=C.labelCollections[P],y=m.region.bounds,f=y.width,g=y.height,p=y.x,u=y.y,p<=s+l&&s<=p+f&&u<=a+h&&a<=u+g&&(e=" ")}var O={text:e.toString(),x:o.x,y:o.y,name:"axisLabelRender",cancel:!1},E=function(e){if(!e.cancel){var i=new KI(t.element.id+"_RLabel_"+x,O.x,O.y,"none",O.text),n=v.color?v.color:t.themeStyle.axisLabel;v.fontFamily=t.themeStyle.labelFontFamily?t.themeStyle.labelFontFamily:v.fontFamily;var r=eT(i,v,n,S);S.appendChild(r)}};E.bind(C),t.trigger("axisLabelRender",O,E)},C=this,P=0;P<this.labelCollections.length;P++)x(P);t.svgObject.appendChild(S)},t.prototype.calculateRegion=function(t,e,i,n){new xI;return{bounds:{x:i,y:n,width:e.width,height:e.height},labelText:t}},t.prototype.updateHMinorGridLines=function(t){var e,i,n,r=t.horizontalAxis.minorGridLines;e=t.renderer.createGroup({id:t.element.id+"_svg_horizontalAxisMinorGridLines"}),n=this.calculateGridLinesPath(this.minorHGridArcPoints);var o=new GI(t.element.id+"_horizontalAxisMinorGridLines","none",r.width,r.color?r.color:t.themeStyle.minorGridLine,r.opacity,r.dashArray,n);i=t.renderer.drawPath(o),e.appendChild(i),t.svgObject.appendChild(e)},t.prototype.updateRMinorGridLines=function(t){var e,i,n,r=t.radialAxis.minorGridLines;e=t.renderer.createGroup({id:t.element.id+"_svg_radialAxisMinorGridLines"}),n=this.calculateGridLinesPath(this.minorGridArcPoints);var o=new GI(t.element.id+"_radialAxisMinorGridLines","none",r.width,r.color?r.color:t.themeStyle.minorGridLine,r.opacity,r.dashArray,n);i=t.renderer.drawPath(o),e.appendChild(i),t.svgObject.appendChild(e)},t.prototype.calculateGridLinesPath=function(t){for(var e,i,n,r,o=new RI,s="",a=0;a<t.length;a++)e=(o=t[a]).startPoint.x,i=o.startPoint.y,n=o.endPoint.x,r=o.endPoint.y,s=s+"M "+e+" "+i+" A "+(o.size?o.size.width:0)+" "+(o.size?o.size.height:0)+" "+(o.rotationAngle?o.rotationAngle:0)+" "+(o.isLargeArc?1:0)+" "+(o.sweepDirection?o.sweepDirection:0)+" "+n+" "+r+" ";return s.toString()},t.prototype.measureHMinorGridLines=function(t){var e,i,n,r,o,s,a,l,h,c,d,p,u,f,g=[],m=t.horizontalAxis.minorGridLines.count;this.minorHGridArcPoints=[],l=2*this.areaRadius;for(var y=0;y<this.horizontalLabelCollections.length-3;y++){h=this.horizontalLabelCollections[y],c=this.horizontalLabelCollections[y+1],u=(d=2*(h.radius-c.radius))/(p=Math.floor(m/100*d));for(var v=0;v<p;v++)f=c.radius+v*u/2,a=("Impedance"===t.renderType?this.circleLeftX+l-2*f:this.circleLeftX)+f,n=c.value>5,g=this.calculateMinorArcStartEndPoints(c.value),"Impedance"===t.renderType?(e=g[0],i=g[1]):(e=g[1],i=g[0]),r=this.intersectingCirclePoints(e[0].centerX,e[0].centerY,e[0].radius,a,h.centerY,f,t.renderType),o=this.intersectingCirclePoints(i[0].centerX,i[0].centerY,i[0].radius,a,h.centerY,f,t.renderType),s={width:f,height:f},this.minorHGridArcPoints.push({startPoint:r,endPoint:o,rotationAngle:2*Math.PI,sweepDirection:"Impedance"===t.renderType?this.direction.counterclockwise:this.direction.clockwise,isLargeArc:n,size:s}),0}},t.prototype.measureRMinorGridLines=function(t){var e,i,n,r,o,s,a,l,h,c,d,p,u,f,g,m=t.radialAxis.minorGridLines.count;o=Math.PI*(2*this.areaRadius),s=e="Impedance"===t.renderType?this.circleCenterX+this.areaRadius:this.circleCenterX-this.areaRadius,a=this.circleCenterY,this.minorGridArcPoints=[],l={x:s,y:a};for(var y=2;y<this.labelCollections.length-3;y++){h=this.labelCollections[y],c=this.labelCollections[y+1],"Impedance"===t.renderType?(i=360===c.angle?0:c.angle,n=Math.abs(i-h.angle)):(i=360===h.angle?0:h.angle,n=Math.abs(i-c.angle)),p=o/360*n,f=n/(u=Math.floor(m/100*p)),g=c.value>0?c.value:h.value,r=this.minorGridLineArcIntersectCircle(Math.abs(g));for(var v=1;v<u;v++){var b=f*v+(360===h.angle?i:h.angle),w=this.circlePointPosition(this.circleCenterX,this.circleCenterY,b,this.areaRadius),S=this.arcRadius(l,w,b),x=b>180?this.circleCenterY-S:this.circleCenterY+S,C=this.intersectingCirclePoints(e,x,S,r[0].centerX,r[0].centerY,r[0].radius,t.renderType),P={x:C.x,y:C.y},O={x:w.x,y:w.y};d={width:S,height:S};var E=h.value>=0?this.direction.clockwise:this.direction.counterclockwise;this.minorGridArcPoints.push({startPoint:P,endPoint:O,rotationAngle:2*Math.PI,sweepDirection:E,isLargeArc:!1,size:d}),0}}},t.prototype.minorGridLineArcIntersectCircle=function(t){var e;return e=t>=3?20:t>=1.5?10:t>=.6?3:2,this.horizontalLabelCollections.filter(function(t){return t.value===e})},t.prototype.circlePointPosition=function(t,e,i,n){var r;return r=i*(Math.PI/180),{x:t+n*Math.cos(r),y:e+n*Math.sin(r)}},t.prototype.setLabelsInsidePosition=function(t,e,i,n){var r=e,o=i;return 0===t||360===t?(r-=n.width,o-=n.height/2):90===t?(r-=n.width,o+=n.height/8):180===t?o+=n.height:270===t?o+=n.height/2:t>0&&t<=20?r-=n.width:t>20&&t<=60?(r-=n.width+n.width/2,o+=n.height/2):t>60&&t<90?(r-=n.width+n.width/4,o+=n.height/4):t>90&&t<=135?(r-=n.width/2,o+=n.height/16):t>135&&t<=150?(r+=n.width/2,o+=n.height/2):t>150&&t<180?(r+=n.width/2,o+=n.height):t>180&&t<=210?(r+=n.width/6,o+=n.height/6):t>210&&t<240?o+=n.height/4:t>225&&t<270?o+=n.height/3:t>270&&t<=300?(r-=n.width+n.width/4,o+=n.height/4):t>300&&t<=330?(r-=n.width+n.width/3,o+=n.height/4):t>330&&t<=340?(r-=n.width+n.width/2,o+=n.height/4):t>340&&(r-=n.width,o+=n.height/8),{x:r,y:o}},t.prototype.setLabelsOutsidePosition=function(t,e,i,n){var r=e,o=i;return 90===t?(r-=n.width/2,o+=n.height):180===t?(r-=n.width+5,o-=n.height/4):270===t?(r-=n.width/2,o-=n.height/4):360===t?(r+=5,o-=n.height/2):t>0&&t<=30?(r+=n.width/4,o+=n.height/8):t>30&&t<=60?(r+=n.width/2,o+=n.height/4):t>60&&t<=90?(r-=n.width/2,o+=n.height):t>90&&t<=135?(r-=n.width,o+=n.height):t>135&&t<=180?(r-=n.width+n.width/4,o+=n.height/4):t>180&&t<=210?(r-=n.width+n.width/4,o-=n.height/4):t>210&&t<=270?(r-=n.width,o-=n.height/4):t>270&&t<=340?o-=n.height/4:t>340&&(o+=n.height/4,r+=n.width/6),{x:r,y:o}},t.prototype.arcRadius=function(t,e,i){var n,r,o,s,a;return a=i>180?90*Math.PI/180:270*Math.PI/180,n=(e.x-t.x)/2,o=((r=(e.y-t.y)/2)-n*((Math.cos(a)*r-Math.sin(a)*n)/(Math.cos(a)*n+Math.sin(a)*r)))/Math.sin(a),s=t.y+Math.sin(a)*o,Math.abs(t.y-s)},t}(),kT=function(){function t(){}return t.prototype.drawMarker=function(t,e,i,n){if(t.series[e].marker.visible){var r=t.series[e].marker,o=t.series[e].points.length-1,s=r.width,a=r.height,l=r.shape,h=t.renderer.createGroup({id:t.element.id+"_svg_series"+e+"_Marker"});i.appendChild(h);for(var c=r.border.width,d=r.border.color,p=r.opacity,u=r.fill?r.fill:t.series[e].fill||t.seriesColors[e%t.seriesColors.length],f=0;f<o+1;f++){var g=n[f].point,m=f,y=new TI(t.element.id+"_Series"+e+"_Points"+m+"_Marker"+m,u,d,c,p);h.appendChild(this.drawSymbol(l,r.imageUrl,g,new DI(s,a),y,t))}}},t.prototype.drawSymbol=function(t,e,i,n,r,o){var s,a,l,h,c=t.toLowerCase(),d={color:r.borderColor,width:r.borderWidth},p=r.opacity,u=i.x,f=i.y,g=Math.sqrt(n.height*n.height+n.width*n.width)/2;switch(c){case"circle":a=new XI(r.id,r.fill,d,p,i.x,i.y,g,null),s=o.renderer.drawCircle(a);break;case"rectangle":h="M "+(u+-n.width/2)+" "+(f+-n.height/2)+" L "+(u+n.width/2)+" "+(f+-n.height/2)+" L "+(u+n.width/2)+" "+(f+n.height/2)+" L "+(u+-n.width/2)+" "+(f+n.height/2)+" L "+(u+-n.width/2)+" "+(f+-n.height/2)+"z",l=new GI(r.id,r.fill,d.width,d.color,p,"",h),s=o.renderer.drawPath(l);break;case"triangle":h="M "+(u+-n.width/2)+" "+(f+n.height/2)+" L "+u+" "+(f+-n.height/2)+" L "+(u+n.width/2)+" "+(f+n.height/2)+" L "+(u+-n.width/2)+" "+(f+n.height/2)+"z",l=new GI(r.id,r.fill,d.width,d.color,p,"",h),s=o.renderer.drawPath(l);break;case"diamond":h="M "+(u+-n.width/2)+" "+f+" L "+u+" "+(f+-n.height/2)+" L "+(u+n.width/2)+" "+f+" L "+u+" "+(f+n.height/2)+" L "+(u+-n.width/2)+" "+f+"z",l=new GI(r.id,r.fill,d.width,d.color,p,"",h),s=o.renderer.drawPath(l);break;case"pentagon":for(var m=0;m<=5;m++){var y=g*Math.cos(Math.PI/180*(72*m)),v=g*Math.sin(Math.PI/180*(72*m));h=0===m?"M "+(u+y)+" "+(f+v)+" ":h.concat("L "+(u+y)+" "+(f+v)+" ")}h=h.concat("Z"),l=new GI(r.id,r.fill,d.width,d.color,p,"",h),s=o.renderer.drawPath(l)}return s},t}(),MT=function(){function t(){this.textOptions=[],this.labelOptions=[],this.allPoints=[]}return t.prototype.drawDataLabel=function(t,e,i,n,r){this.textOptions=[],this.allPoints=[];for(var o,s,a,l,h,c=t.margin,d=t.series[e].marker,p=d.dataLabel,u=p.textStyle,f=n.length,g=0;g<f;g++){h=YI(l=t.series[e].points[g].reactance.toString(),u);var m=(s=n[g].point).x-h.width/2,y=s.y-(h.height+d.height+c.top),v=h.width+c.left/2+c.right/2,b=h.height+c.top/2+c.bottom/2;o=g,new AI,a={textX:m+c.left/2,textY:y+b/2+c.top/2,x:m,y:y},this.textOptions[g]={id:t.element.id+"_Series"+e+"_Points"+o+"_dataLabel_displayText"+g,x:a.textX,y:a.textY,fill:"black",text:l,font:u,xPosition:m,yPosition:y,width:v,height:b,location:s,labelOptions:a,visible:!0,connectorFlag:null}}var w=new MI;w.textOptions=this.textOptions,this.labelOptions.push(w),this.drawDatalabelSymbol(t,e,p,i,r,n)},t.prototype.calculateSmartLabels=function(t,e){for(var i=t.textOptions.length,n=0;n<i;n++)this.allPoints[this.allPoints.length]=t.textOptions[n],this.connectorFlag=!1,this.compareDataLabels(n,t,0,e),this.labelOptions[e].textOptions[n]=t.textOptions[n],this.labelOptions[e].textOptions[n].connectorFlag=this.connectorFlag},t.prototype.compareDataLabels=function(t,e,i,n){for(var r,o,s=this.allPoints.length,a=0;a<s;a++)if(o=this.allPoints[a],r=this.allPoints[s-1],this.isCollide(o,r))switch(this.connectorFlag=!0,i){case 0:this.resetValues(r),this.prevLabel=o,r.xPosition=this.prevLabel.xPosition+(this.prevLabel.width/2+r.width/2+10),r.x=r.xPosition+5,i+=1,this.compareDataLabels(t,e,i,n);break;case 1:this.resetValues(r),r.xPosition=this.prevLabel.xPosition+this.prevLabel.width/2+r.width/2+10,r.x=r.xPosition+5,r.yPosition=r.location.y+r.height/2+5,r.y=r.yPosition+r.height/2+5,i+=1,this.compareDataLabels(t,e,i,n);break;case 2:this.resetValues(r),r.yPosition=r.location.y+r.height/2+5,r.y=r.yPosition+r.height/2+5,i+=1,this.compareDataLabels(t,e,i,n);break;case 3:this.resetValues(r),r.xPosition=this.prevLabel.xPosition-this.prevLabel.width/2-r.width/2-10,r.x=r.xPosition+5,r.yPosition=r.height/2+r.location.y+5,r.y=r.yPosition+r.height/2+5,i+=1,this.compareDataLabels(t,e,i,n);break;case 4:this.resetValues(r),r.xPosition=this.prevLabel.xPosition-this.prevLabel.width/2-r.width/2-10,r.x=r.xPosition+5,i+=1,this.compareDataLabels(t,e,i,n);break;case 5:this.resetValues(r),r.xPosition=this.prevLabel.xPosition-this.prevLabel.width/2-r.width/2-10,r.x=r.xPosition+5,r.yPosition=this.prevLabel.yPosition-r.height-10,r.y=r.yPosition+r.height/2+5,i+=1,this.compareDataLabels(t,e,i,n);break;case 6:this.resetValues(r),r.yPosition=this.prevLabel.yPosition-(r.height+10),r.y=r.yPosition+r.height/2+5,i+=1,this.compareDataLabels(t,e,i,n);break;case 7:this.resetValues(r),r.xPosition=this.prevLabel.xPosition+this.prevLabel.width/2+r.width/2+10,r.x=r.xPosition+5,r.yPosition=this.prevLabel.yPosition-r.height-10,r.y=r.yPosition+r.height/2+5,i+=1,this.compareDataLabels(t,e,i,n);break;case 8:i=0,this.compareDataLabels(t,e,i,n)}},t.prototype.isCollide=function(t,e){var i=!1;return t!==e&&(i=!(t.y+t.height<e.y||t.y>e.y+e.height||t.x+t.width/2<e.x-e.width/2||t.x-t.width/2>e.x+e.width/2)),i},t.prototype.resetValues=function(t){t.xPosition=t.labelOptions.x,t.yPosition=t.labelOptions.y,t.x=t.labelOptions.textX,t.y=t.labelOptions.textY},t.prototype.drawConnectorLines=function(t,e,i,n,r){n.xPosition,n.yPosition;var o,s=n.location;o=s.y>n.y?n.y:n.y-n.height/2;var a="M "+s.x+" "+s.y+" L "+n.x+" "+o,l=t.series[e].marker.dataLabel.connectorLine,h=l.color?l.color:t.series[e].fill||t.seriesColors[e%t.seriesColors.length],c=new GI(t.element.id+"_dataLabelConnectorLine_series"+e+"_point"+i,"none",l.width,h,1,"none",a),d=t.renderer.drawPath(c);r.appendChild(d)},t.prototype.drawDatalabelSymbol=function(t,e,i,n,r,o){for(var s=0;s<t.series[e].points.length;s++)if(i.template){var a=$e("div",{id:t.element.id+"_seriesIndex_"+e+"_Label_Template_Group",className:"template",styles:"position: absolute;"});document.getElementById(t.element.id+"_Secondary_Element").appendChild(a);var l=void 0,h=i.template+"_seriesIndex"+e+"_pointIndex"+s+t.element.id,c={point:t.series[e].points[s].reactance};l=VI(_I(i.template)(t),h,c),a.appendChild(l),l.style.left=o[s].point.x-l.offsetWidth/2+"px",l.style.top=o[s].point.y-l.offsetHeight-t.series[e].marker.height/2+"px",Ae("_seriesIndex"+e+"_pointIndex"+s+t.element.id+"Template","Template");var d=parseInt(l.style.left,10),p=parseInt(l.style.top,10),u=l.offsetWidth,f=l.offsetHeight,g=o[s].point,m={textX:d,textY:p,x:d,y:p};this.labelOptions[e].textOptions[s]={id:h,x:d,y:p,fill:"black",text:"",font:i.textStyle,xPosition:d,yPosition:p,width:u,height:f,location:g,labelOptions:m,visible:!0,connectorFlag:null}}},t}(),DT=function(){function t(){this.xValues=[],this.yValues=[],this.pointsRegion=[],this.lineSegments=[],this.location=[],this.dataLabel=new MT}return t.prototype.processData=function(t){var e=t.dataSource,i=t.resistance,n=t.reactance,r=t.tooltipMappingName;t.points=[];for(var o=0;o<e.length;o++)t.points.push({resistance:e[o][i],reactance:e[o][n],tooltip:e[o][r]})},t.prototype.draw=function(t,e,i){for(var n,r,o,s,a=t.renderer.createGroup({id:t.element.id+"_svg_seriesCollections"}),l=t.series,h=l.length,c=e.areaRadius,d=0;d<h;d++){var p=d;l[d].dataSource&&l[d].resistance&&l[d].reactance&&this.processData(l[d]),this.pointsRegion[d]=[],this.location[d]=[];for(var u=0;u<l[d].points.length;u++)this.xValues[u]=l[d].points[u].resistance,this.yValues[u]=l[d].points[u].reactance;for(var f=e.circleCenterX,g=e.circleCenterY,m=2*e.areaRadius,y=g,v={x:f+("Impedance"===t.renderType?c:-c),y:g}.x,b=0;b<l[d].points.length;b++){var w=this.xValues[b],S=m*(1/(w+1))/2,x=this.yValues[b],C=Math.abs(1/x*m/2);"Impedance"===t.renderType?(r=x>0?g-C:g+C,n=e.circleLeftX+m-S):(r=x<0?g-C:g+C,n=e.circleLeftX+S),o=e.intersectingCirclePoints(v,r,C,n,y,S,t.renderType);var P=FI();Math.abs(x)<P&&(o.x="Impedance"===t.renderType?n-S:n+S,o.y=g),this.pointsRegion[d][b]=new EI,this.pointsRegion[d][b]={point:o,x:w,y:x},this.location[d][b]={x:o.x,y:o.y}}for(var O=0;O<l[d].points.length-1;O++)s=O+1,this.lineSegments[O]=new OI,this.lineSegments[O]={x1:this.xValues[O],y1:this.yValues[O],x2:this.xValues[s],y2:this.yValues[s]};t.svgObject.appendChild(a),this.drawSeries(t,p,a,i)}for(u=0;u<t.series.length;u++)if(t.series[u].enableSmartLabels&&t.series[u].marker.dataLabel.visible){var E=t.renderer.createGroup({id:t.element.id+"_svg_series"+u+"_Datalabel_connectorLines"});(A=document.getElementById(t.element.id+"_svg_seriesCollection"+u))&&A.appendChild(E),this.dataLabel.calculateSmartLabels(this.dataLabel.labelOptions[u],u);for(b=0;b<t.series[u].points.length;b++){var L=this.dataLabel.labelOptions[u].textOptions[b];(L.xPosition+L.width>t.chartArea.x+t.chartArea.width||L.xPosition<t.chartArea.x||L.yPosition<t.chartArea.y||L.yPosition+L.height>t.chartArea.y+t.chartArea.height)&&(this.dataLabel.labelOptions[u].textOptions[b].connectorFlag=!1,this.dataLabel.labelOptions[u].textOptions[b].visible=!1),L.connectorFlag&&this.dataLabel.drawConnectorLines(t,u,b,L,E)}}var I=function(e){var i=t.series[e].marker.dataLabel;if(t.series[e].marker.dataLabel.visible){var n=document.getElementById(t.element.id+"_svg_seriesCollection"+e),r=t.renderer.createGroup({id:t.element.id+"_svg_series"+e+"_Datalabel"});n&&n.appendChild(r);for(var o=function(n){var o=T.dataLabel.labelOptions[e].textOptions[n];if(!i.template&&o.visible){var s=new kI;s=T.dataLabel.labelOptions[e].textOptions[n];var a=i.textStyle,l=s.xPosition,h=s.yPosition,c=t.element.id+"_Series"+e+"_Points"+n+"_dataLabel_symbol"+n,d=i.fill?i.fill:t.series[e].fill||t.seriesColors[e%t.seriesColors.length],p=t.series[e].marker.dataLabel.border,u=new qI(c,d,p,s.opacity,new bI(l,h,s.width,s.height)),f=t.renderer.drawRectangle(u);r.appendChild(f);var g={text:s.text,x:s.x,y:s.y,seriesIndex:e,pointIndex:n,name:"textRender",cancel:!1},m=function(e){if(!e.cancel){var i=new KI(s.id,e.x,e.y,"start",e.text),n=a.color?a.color:t.themeStyle.dataLabel,o=eT(i,a,n,r);r.appendChild(o)}};m.bind(T),t.trigger("textRender",g,m)}else if(i.template){var y=document.getElementById(i.template+"_seriesIndex"+e+"_pointIndex"+n+t.element.id);y.style.left=T.dataLabel.labelOptions[e].textOptions[n].xPosition+"px",y.style.top=T.dataLabel.labelOptions[e].textOptions[n].yPosition+"px"}},s=0;s<t.series[e].points.length;s++)o(s)}},T=this;for(u=0;u<t.series.length;u++)I(u);for(O=0;O<t.series.length;O++)if(t.series[O].enableAnimation&&t.animateSeries){t.series[O].marker.dataLabel.template&&this.animateDataLabelTemplate(O,t);var A=document.getElementById(t.element.id+"_svg_seriesCollection"+O);this.performAnimation(t,A,O)}},t.prototype.drawSeries=function(t,e,i,n){var r=this,o=t.renderer.createGroup({id:t.element.id+"_svg_seriesCollection"+e,"clip-path":"url(#"+t.element.id+"_ChartSeriesClipRect_"+e+")"});o.setAttribute("visibility",t.series[e].visibility),i.appendChild(o);for(var s,a,l="",h=(t.series[e].marker,t.series[e].points.length-1),c=0;c<h;c++){var d=this.pointsRegion[e][c].point,p=this.pointsRegion[e][c+1].point;l=l+"M "+d.x+" "+d.y+" L "+p.x+" "+p.y+" "}s=l.toString();var u=t.series[e].fill||t.seriesColors[e%t.seriesColors.length],f={text:t.series[e].name,fill:u,name:"seriesRender",cancel:!1},g=function(i){if(!i.cancel){var l=new GI(t.element.id+"_series"+e+"_points","none",t.series[e].width,f.fill,t.series[e].opacity,"none",s);r.clipRectElement=t.renderer.drawClipPath(new qI(t.element.id+"_ChartSeriesClipRect_"+e,"transparent",{width:1,color:"Gray"},1,{x:n.x,y:n.y,width:t.availableSize.width,height:t.availableSize.height})),o.appendChild(r.clipRectElement);var h=t.renderer.createGroup({id:t.element.id+"_svg"+e});a=t.renderer.drawPath(l),h.appendChild(a),o.appendChild(h)}};g.bind(this),t.trigger("seriesRender",f,g),(new kT).drawMarker(t,e,o,this.pointsRegion[e]),this.dataLabel.drawDataLabel(t,e,o,this.pointsRegion[e],n)},t.prototype.animateDataLabelTemplate=function(t,e){for(var i=e.series[t].points.length,n=parseFloat(e.series[t].animationDuration),r=0;r<i;r++){var o=document.getElementById(e.series[t].marker.dataLabel.template+"_seriesIndex"+t+"_pointIndex"+r+e.element.id);o.style.visibility="hidden",WI(e,o,0,n,"FadeIn")}},t.prototype.performAnimation=function(t,e,i){var n,r=new Ji({}),o=(document.getElementById("container_svg_seriesCollections"),e.childNodes[0].childNodes[0].childNodes[0]),s=tT("Linear"),a=tT("Reverse"),l=+o.getAttribute("width"),h=+o.getAttribute("x");r.animate(o,{duration:parseFloat(t.series[i].animationDuration),progress:function(e){"Impedance"===t.renderType?(n=s(e.timeStamp-e.delay,0,l,e.duration),o.setAttribute("width",n.toString())):(n=a(e.timeStamp-e.delay,l,0,e.duration),o.setAttribute("x",n.toString()))},end:function(e){"Impedance"===t.renderType?o.setAttribute("width",l.toString()):o.setAttribute("x",h.toString());var i={cancel:!1,name:"animationComplete",smithchart:t.isBlazor?null:t};t.trigger("animationComplete",i)}})},t.prototype.getLocation=function(t,e){return{x:this.location[t][e].x,y:this.location[t][e].y}},t}(),RT=function(){function t(t){this.control=t}return t.prototype.print=function(t){this.smithchartPrint=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.smithchartPrint.moveTo(0,0),this.smithchartPrint.resizeTo(screen.availWidth,screen.availHeight);var e={cancel:!1,htmlContent:this.getHTMLContent(t),name:"beforePrint"};this.control.trigger("beforePrint",e),e.cancel||K(e.htmlContent,this.smithchartPrint)},t.prototype.getHTMLContent=function(t){var e=$e("div");return t?t instanceof Array?t.forEach(function(t){e.appendChild(NI(t).cloneNode(!0))}):t instanceof Element?e.appendChild(t.cloneNode(!0)):e.appendChild(NI(t).cloneNode(!0)):e.appendChild(this.control.element.cloneNode(!0)),e},t.prototype.export=function(t,e,i){var n=this,r=$e("canvas",{id:"ej2-canvas",attrs:{width:this.control.availableSize.width.toString(),height:this.control.availableSize.height.toString()}}),o=!(te.userAgent.toString().indexOf("HeadlessChrome")>-1);i=F(i)?OP.Landscape:i;var s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+this.control.svgObject.outerHTML+"</svg>",a=window.URL.createObjectURL(new Blob("SVG"===t?[s]:[(new XMLSerializer).serializeToString(this.control.svgObject)],{type:"image/svg+xml"}));if("SVG"===t)this.triggerDownload(e,t,a,o);else{var l=new Image,h=r.getContext("2d");l.onload=function(){if(h.drawImage(l,0,0),window.URL.revokeObjectURL(a),"PDF"===t){var s=new fE,c=r.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream");s.pageSettings.orientation=i,c=c.slice(c.indexOf(",")+1),s.pages.add().graphics.drawImage(new sO(c),0,0,n.control.availableSize.width-60,n.control.availableSize.height),o&&(s.save(e+".pdf"),s.destroy())}else n.triggerDownload(e,t,r.toDataURL("image/png").replace("image/png","image/octet-stream"),o)},l.src=a}},t.prototype.triggerDownload=function(t,e,i,n){$e("a",{attrs:{download:t+"."+e.toLocaleLowerCase(),href:i}}).dispatchEvent(new MouseEvent(n?"click":"move",{view:window,bubbles:!1,cancelable:!0}))},t}(),zT=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),jT=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},NT=function(t){function e(e,i){return t.call(this,e,i)||this}return zT(e,t),e.prototype.getModuleName=function(){return"smithchart"},e.prototype.getPersistData=function(){return""},e.prototype.createChartSvg=function(){this.removeSvg(),jI(this)},e.prototype.renderTitle=function(t,e,i){var n,r,o=this,s=t.font?t.font:t.textStyle,a=YI(t.text,s),l=t.textAlignment,h=t.text,c=F(t.maximumWidth)?Math.abs(this.margin.left+this.margin.right-this.availableSize.width):t.maximumWidth,d=a.width>c;n=a.width>this.availableSize.width?this.margin.left+this.border.width:"Center"===l?this.availableSize.width/2-a.width/2:"Near"===l?this.margin.left+this.elementSpacing+this.border.width:this.availableSize.width-a.width-(this.margin.right+this.elementSpacing+this.border.width),r=this.margin.top+a.height/2+this.elementSpacing,t.enableTrim&&d&&(h=HI(c,t.text,s),a=YI(h,s)),i=this.renderer.createGroup({id:this.element.id+"_Title_Group"});var p,u={text:h,x:n,y:r,name:"titleRender",cancel:!1},f=function(n){if(!n.cancel){p=new KI(o.element.id+"_Smithchart_"+e,n.x,n.y,"start",n.text),s.fontFamily=o.themeStyle.fontFamily||t.textStyle.fontFamily,s.size=o.themeStyle.fontSize||t.textStyle.size,eT(p,s,o.themeStyle.chartTitle,i).setAttribute("aria-label",t.description||n.text);var r={x:n.x,y:n.y,textSize:a};o.svgObject.appendChild(i),""!==t.subtitle.text&&t.subtitle.visible&&o.renderSubtitle(t,e,a,o.availableSize,r,i)}};f.bind(this),this.trigger("titleRender",u,f)},e.prototype.renderSubtitle=function(t,e,i,n,r,o){var s,a,l,h=this,c=t.subtitle.textStyle,d=t.subtitle,p=YI(d.text,c),u=d.text,f=F(d.maximumWidth)?.75*this.bounds.width:d.maximumWidth;d.enableTrim&&p.width>f&&(u=HI(f,d.text,c)),s="Far"===t.subtitle.textAlignment?r.x+r.textSize.width:"Near"===t.subtitle.textAlignment?r.x:r.x+r.textSize.width/2,a=r.y+2*this.elementSpacing,l="Far"===t.subtitle.textAlignment?"end":"Near"===t.subtitle.textAlignment?"start":"middle";var g={text:u,x:s,y:a,name:"subtitleRender",cancel:!1},m=function(t){if(!t.cancel){var i=eT(new KI(h.element.id+"_Smithchart_"+e,t.x,t.y,l,t.text),c,h.themeStyle.chartTitle,o);i.setAttribute("aria-label",d.description||t.text),o.appendChild(i)}};m.bind(this),this.trigger("subtitleRender",g,m)},e.prototype.renderBorder=function(){var t=this.border;this.theme.toLowerCase();this.background=this.background?this.background:this.themeStyle.background;var e=new qI(this.element.id+"_SmithchartBorder",this.background,t,1,new bI(t.width/2,t.width/2,this.availableSize.width-t.width,this.availableSize.height-t.width));this.svgObject.appendChild(this.renderer.drawRectangle(e))},e.prototype.onPropertyChanged=function(t,e){for(var i=!1,n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"background":case"border":case"series":case"legendSettings":case"radius":i=!0;break;case"size":this.createChartSvg(),i=!0;break;case"theme":case"renderType":this.animateSeries=!0,i=!0}}i&&this.render()},e.prototype.preRender=function(){this.isBlazor=$(),this.allowServerDataBinding=!1,this.trigger("load",{smithchart:this.isBlazor?null:this}),this.unWireEVents(),this.initPrivateVariable(),this.wireEVents()},e.prototype.initPrivateVariable=function(){this.animateSeries=!0},e.prototype.setTheme=function(){
/*! Set theme */
this.themeStyle=function(t){var e;switch(t.toLowerCase()){case"highcontrast":e={axisLabel:"#ffffff",axisLine:"#ffffff",majorGridLine:"#BFBFBF",minorGridLine:"#969696",chartTitle:"#ffffff",legendLabel:"#ffffff",background:"#000000",areaBorder:"#ffffff",tooltipFill:"#ffffff",dataLabel:"#ffffff",tooltipBoldLabel:"#000000",tooltipLightLabel:"#000000",tooltipHeaderLine:"#969696"};break;case"materialdark":case"bootstrapdark":case"fabricdark":e={axisLabel:"#DADADA",axisLine:" #6F6C6C",majorGridLine:"#414040",minorGridLine:"#514F4F",chartTitle:"#ffffff",legendLabel:"#DADADA",background:"#000000",areaBorder:" #9A9A9A",tooltipFill:"#F4F4F4",dataLabel:"#DADADA",tooltipBoldLabel:"#282727",tooltipLightLabel:"#333232",tooltipHeaderLine:"#9A9A9A"};break;case"bootstrap4":e={axisLabel:"#212529",axisLine:"#ADB5BD",majorGridLine:"#CED4DA",minorGridLine:"#DEE2E6",chartTitle:"#212529",legendLabel:"#212529",background:"#FFFFFF",areaBorder:"#DEE2E6",tooltipFill:"#000000",dataLabel:"#212529",tooltipBoldLabel:"#FFFFFF",tooltipLightLabel:"#FFFFFF",tooltipHeaderLine:"#FFFFFF",fontFamily:"HelveticaNeue-Medium",fontSize:"16px",labelFontFamily:"HelveticaNeue",tooltipFillOpacity:1,tooltipTextOpacity:.9};break;default:e={axisLabel:"#686868",axisLine:"#b5b5b5",majorGridLine:"#dbdbdb",minorGridLine:"#eaeaea",chartTitle:"#424242",legendLabel:"#353535",background:"#FFFFFF",areaBorder:"Gray",tooltipFill:"rgba(0, 8, 22, 0.75)",dataLabel:"#424242",tooltipBoldLabel:"#ffffff",tooltipLightLabel:"#dbdbdb",tooltipHeaderLine:"#ffffff"}}return e}(this.theme),this.seriesColors=function(t){var e;switch(t.toLowerCase()){case"highcontrastlight":e=["#79ECE4","#E98272","#DFE6B6","#C6E773","#BA98FF","#FA83C3","#00C27A","#43ACEF","#D681EF","#D8BC6E"];break;case"fabric":e=["#4472c4","#ed7d31","#ffc000","#70ad47","#5b9bd5","#c1c1c1","#6f6fe2","#e269ae","#9e480e","#997300"];break;case"bootstrap":e=["#a16ee5","#f7ce69","#55a5c2","#7ddf1e","#ff6ea6","#7953ac","#b99b4f","#407c92","#5ea716","#b91c52"];break;default:e=["#00bdae","#404041","#357cd2","#e56590","#f8b883","#70ad47","#dd8abd","#7f84e8","#7bb4eb","#ea7a57"]}return e}(this.theme)},e.prototype.render=function(){this.createChartSvg(),this.element.appendChild(this.svgObject),this.setTheme(),this.createSecondaryElement(),this.renderBorder(),this.smithchartLegendModule&&this.legendSettings.visible&&(this.legendBounds=this.smithchartLegendModule.renderLegend(this)),this.legendBounds=this.legendBounds?this.legendBounds:{x:0,y:0,width:0,height:0};var t=new AT;this.bounds=t.calculateAreaBounds(this,this.title,this.legendBounds),""!==this.title.text&&this.title.visible&&this.renderTitle(this.title,"title",null);var e=new BT;e.renderArea(this,this.bounds),this.seriesrender=new DT,this.seriesrender.draw(this,e,this.bounds),this.renderComplete(),this.allowServerDataBinding=!0,this.trigger("loaded",{smithchart:this.isBlazor?null:this})},e.prototype.createSecondaryElement=function(){if(F(document.getElementById(this.element.id+"_Secondary_Element"))){var t=$e("div",{id:this.element.id+"_Secondary_Element",styles:"position: absolute;z-index:1;"});this.element.appendChild(t);var e=this.element.getBoundingClientRect(),i=document.getElementById(this.element.id+"_svg");if(i){var n=i.getBoundingClientRect();t.style.left=Math.max(n.left-e.left,0)+"px",t.style.top=Math.max(n.top-e.top,0)+"px"}}else JI(this.element.id+"_Secondary_Element")},e.prototype.destroy=function(){this.unWireEVents(),t.prototype.destroy.call(this),this.element.classList.remove("e-smithchart")},e.prototype.wireEVents=function(){ee.add(this.element,"click",this.smithchartOnClick,this),ee.add(this.element,te.touchMoveEvent,this.mouseMove,this),ee.add(this.element,te.touchEndEvent,this.mouseEnd,this),window.addEventListener(te.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.smithchartOnResize.bind(this))},e.prototype.mouseMove=function(t){"touchmove"===t.type?this.isTouch=!0:this.isTouch="touch"===t.pointerType||"2"===t.pointerType||this.isTouch,this.tooltipRenderModule&&!this.isTouch&&this.tooltipRenderModule.smithchartMouseMove(this,t)},e.prototype.mouseEnd=function(t){if("touchend"===t.type?this.isTouch=!0:this.isTouch="touch"===t.pointerType||"2"===t.pointerType,this.tooltipRenderModule&&this.isTouch){var e=this.tooltipRenderModule.smithchartMouseMove(this,t);e&&(this.fadeoutTo=setTimeout(function(){e.fadeOut()},2e3))}},e.prototype.smithchartOnClick=function(t){var e=t.target.id,i=document.getElementById(e).parentElement;if("containerlegendItem_Group"===document.getElementById(i.id).parentElement.id&&this.legendSettings.toggleVisibility){for(var n=i.childNodes[1],r=i.childNodes[0],o=n.textContent,s=void 0,a=void 0,l=0;l<this.smithchartLegendModule.legendSeries.length;l++)o===this.smithchartLegendModule.legendSeries[l].text&&(s=this.smithchartLegendModule.legendSeries[l].seriesIndex,a=this.smithchartLegendModule.legendSeries[l].fill);var h=document.getElementById(this.element.id+"_svg_seriesCollection"+s);"visible"===h.getAttribute("visibility")?(r.setAttribute("fill","gray"),h.setAttribute("visibility","hidden"),this.series[s].visibility="hidden"):(r.setAttribute("fill",a),h.setAttribute("visibility","visible"),this.series[s].visibility="visible")}},e.prototype.unWireEVents=function(){ee.remove(this.element,"click",this.smithchartOnClick),ee.remove(this.element,te.touchMoveEvent,this.mouseMove),ee.remove(this.element,te.touchEndEvent,this.mouseEnd),window.removeEventListener(te.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.smithchartOnResize)},e.prototype.print=function(t){new RT(this).print(t)},e.prototype.export=function(t,e,i){new RT(this).export(t,e,i)},e.prototype.smithchartOnResize=function(t){var e=this;return this.animateSeries=!1,this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){e.render()},500),!1},e.prototype.requiredModules=function(){var t=[];this.legendSettings.visible&&t.push({member:"SmithchartLegend",args:[this]});for(var e=0;e<this.series.length;e++)if(this.series[e].tooltip.visible){t.push({member:"TooltipRender",args:[this]});break}return t},e.prototype.removeSvg=function(){JI(this.element.id+"_Secondary_Element");if(this.svgObject){for(;this.svgObject.childNodes.length>0;)this.svgObject.removeChild(this.svgObject.firstChild);!this.svgObject.hasChildNodes()&&this.svgObject.parentNode&&li(this.svgObject)}},jT([Hi("Impedance")],e.prototype,"renderType",void 0),jT([Hi("")],e.prototype,"width",void 0),jT([Hi("")],e.prototype,"height",void 0),jT([Hi("Material")],e.prototype,"theme",void 0),jT([_i({},yI)],e.prototype,"margin",void 0),jT([_i({},mI)],e.prototype,"font",void 0),jT([_i({},vI)],e.prototype,"border",void 0),jT([_i({},bT)],e.prototype,"title",void 0),jT([Fi([{}],TT)],e.prototype,"series",void 0),jT([_i({},hT)],e.prototype,"legendSettings",void 0),jT([_i({},gT)],e.prototype,"horizontalAxis",void 0),jT([_i({},gT)],e.prototype,"radialAxis",void 0),jT([Hi(null)],e.prototype,"background",void 0),jT([Hi(10)],e.prototype,"elementSpacing",void 0),jT([Hi(1)],e.prototype,"radius",void 0),jT([Ui()],e.prototype,"beforePrint",void 0),jT([Ui()],e.prototype,"animationComplete",void 0),jT([Ui()],e.prototype,"load",void 0),jT([Ui()],e.prototype,"loaded",void 0),jT([Ui()],e.prototype,"legendRender",void 0),jT([Ui()],e.prototype,"titleRender",void 0),jT([Ui()],e.prototype,"subtitleRender",void 0),jT([Ui()],e.prototype,"textRender",void 0),jT([Ui()],e.prototype,"axisLabelRender",void 0),jT([Ui()],e.prototype,"seriesRender",void 0),jT([Ui()],e.prototype,"tooltipRender",void 0),e=jT([Gi],e)}(un),HT=function(){function t(){}return t.prototype.smithchartMouseMove=function(t,e){var i,n,r;"touchend"===e.type||"touchmove"===e.type?(n=(i=e).changedTouches[0].clientX,r=i.changedTouches[0].clientY,this.tooltipElement=void 0):(r=e.clientY,n=e.clientX),this.setMouseXY(t,n,r);for(var o=0;o<t.series.length;o++){var s=t.series[o],a=o,l=new II;if((l=this.closestPointXY(t,this.mouseX,this.mouseY,s,a)).location&&s.tooltip.visible&&"visible"===s.visibility){this.createTooltip(t,e,l.index,a,s);break}this.tooltipElement&&(this.tooltipElement.enable&&!s.tooltip.template&&(this.tooltipElement.enable=!1),this.tooltipElement.fadeOut())}return this.tooltipElement},t.prototype.setMouseXY=function(t,e,i){var n=t.element.getBoundingClientRect(),r=document.getElementById(t.element.id+"_svg").getBoundingClientRect();this.mouseX=e-n.left-Math.max(r.left-n.left,0),this.mouseY=i-n.top-Math.max(r.top-n.top,0)},t.prototype.createTooltip=function(t,e,i,n,r){var o=this,s=r.points[i],a=s.resistance,l=s.reactance,h={cancel:!1,name:"tooltipRender",text:(s.tooltip?[s.tooltip]:null)||[a+" : <b>"+l+"</b>"],headerText:"<b>"+r.name+"</b>",template:r.tooltip.template,point:s},c=function(e){var i=t.series[n].marker.height/2,a=document.getElementById(t.element.id+"_smithchart_tooltip_div");F(a)&&(a=$e("div",{id:t.element.id+"_smithchart_tooltip_div",styles:"pointer-events: none; position: absolute;z-index:1;"}),document.getElementById(t.element.id+"_Secondary_Element").appendChild(a)),o.tooltipElement=new Fx({enable:!0,header:e.headerText,content:e.text,border:r.tooltip.border,fill:t.themeStyle.tooltipFill,data:s,template:e.template,location:{x:o.locationX+t.element.offsetLeft,y:o.locationY-i+t.element.offsetTop},shared:!1,areaBounds:new bI(t.bounds.x,t.bounds.y,t.bounds.width,t.bounds.height),palette:[r.fill||t.seriesColors[n%t.seriesColors.length]],shapes:["Circle"],availableSize:t.availableSize,theme:t.theme,blazorTemplate:{name:"TooltipTemplate",parent:t.series[n].tooltip}}),o.tooltipElement.opacity=t.themeStyle.tooltipFillOpacity||o.tooltipElement.opacity,o.tooltipElement.textStyle.fontFamily=t.themeStyle.fontFamily||"Roboto, Segoe UI, Noto, Sans-serif",o.tooltipElement.textStyle.opacity=t.themeStyle.tooltipTextOpacity||o.tooltipElement.textStyle.opacity,o.tooltipElement.appendTo(a)};c.bind(this,t),t.trigger("tooltipRender",h,c)},t.prototype.closestPointXY=function(t,e,i,n,r){for(var o,s,a,l=0;l<n.points.length;l++){s=t.seriesrender.getLocation(r,l),this.locationX=s.x,this.locationY=s.y,o=l;var h=e-s.x,c=i-s.y;if(Math.abs(Math.sqrt(h*h+c*c))<n.marker.width){a=s,o=l;break}}return{location:a,index:o}},t.prototype.getModuleName=function(){return"TooltipRender"},t.prototype.destroy=function(t){},t}(),_T=function(){function t(){this.legendSeries=[]}return t.prototype.renderLegend=function(t){return this.calculateLegendBounds(t),this._drawLegend(t),this.legendActualBounds},t.prototype.calculateLegendBounds=function(t){new SI;this.legendSeries=[];var e,i,n=t.legendSettings,r=n.height,o=n.width,s=n.itemPadding>0?n.itemPadding:0,a=n.position.toLowerCase(),l=n.title.textStyle,h=0,c=0,d=0,p=t.availableSize.width-(4*t.elementSpacing-2*n.border.width+2*t.border.width),u=(t.availableSize.height,t.elementSpacing,n.border.width,t.border.width,n.rowCount),f=n.columnCount,g=YI(t.legendSettings.title.text,l),m=0,y=0,v=0,b=0,w=0,S=t.series.length;if(t.legendSettings.visible&&0!==S){"bottom"===a||"top"===a||"custom"===a?(u&&f&&u<=f?u=S/f:null==u&&null!=f?u=S/f:null==u&&null==f&&(u=1),u&&(e=Math.ceil(S/u))):(u&&f&&u<=f?f=S/u:null!=u&&null==f?f=S/u:null==u&&null==f&&(f=1),f&&(e=f));for(var x=0;x<S;x++){this.legendSeries.push({text:t.series[x].name?t.series[x].name:"series"+x,seriesIndex:x,shape:t.legendSettings.shape,fill:t.series[x].fill||t.seriesColors[x%t.seriesColors.length],bounds:null});var C=this._getLegendSize(t,this.legendSeries[x]);h=Math.max(C.width,h),c=Math.max(C.height,c),this.legendSeries[x].bounds={width:h,height:c},w+=1,v=v+h+s,b=Math.max(c,b),"top"!==a&&"bottom"!==a&&"custom"!==a||v>p&&(v-=C.width+s,m=Math.max(m,v),v=C.width+s,y=y+b+s),w!==e&&x!==S-1||(m=Math.max(m,v),d=y=y+b+s,w=0,b=0,v=0)}i={x:0,y:0,width:g.width>m-s?g.width+20+s:m+20-2*t.border.width,height:d+t.elementSpacing}}this.legendActualBounds=i,null!=o&&(this.legendActualBounds.width=o),null!=r&&(this.legendActualBounds.height=r)},t.prototype._getLegendSize=function(t,e){var i=t.legendSettings,n=i.itemStyle.width,r=i.itemStyle.height,o=YI(e.text,i.textStyle);return{width:n+o.width+i.shapePadding,height:Math.max(r,o.height)}},t.prototype._drawLegend=function(t){var e,i,n=t.legendSettings,r=n.position.toLowerCase(),o=n.alignment,s=this.legendActualBounds,a=0,l=t.title.font?t.title.font:t.title.textStyle,h=YI(t.title.text,l).height,c=YI(t.title.subtitle.text,t.title.subtitle.textStyle).height,d=t.elementSpacing,p=h+c+d+t.margin.top,u=n.itemPadding>0?n.itemPadding:0,f=t.availableSize.width,g=t.availableSize.height,m=n.border.width,y=0,v=YI(n.title.text,n.title.textStyle).height,b=t.border.width,w=f-2*b,S=g-2*b;if(s.height+=v,"custom"!==r){switch(r){case"bottom":s.y=S-(s.height+m+d);break;case"top":s.y=b+p;break;case"right":s.x=w-s.width-2*d;break;case"left":s.x=b+2*d}if("left"===r||"right"===r)switch(o){case"Center":s.y=S/2-(s.height+2*m)/2+d/2;break;case"Near":s.y=b+2*d+p;break;case"Far":s.y=S-(s.height+m)-2*d}else switch(o){case"Center":s.x=w/2-(s.width+2*m)/2+d/2;break;case"Near":s.x=b+2*d;break;case"Far":s.x=w-(s.width+m)-2*d}}else s.y=n.location.y<S?n.location.y:0,s.x=n.location.x<w?n.location.x:0;if("bottom"===r||"top"===r)for(var x=0;x<this.legendSeries.length;x++)if((y+=this.legendSeries[x].bounds.width+u)>w){s.x=w/2-(s.width+2*m)/2+d/2;break}var C=t.renderer.createGroup({id:t.element.id+"_legend_group"});t.svgObject.appendChild(C),this.legendItemGroup=t.renderer.createGroup({id:t.element.id+"legendItem_Group"});var P=e=d,O=i=d;""!==n.title.text&&n.title.visible&&(C.appendChild(this.drawLegendTitle(t,n,s,C)),O=i=d+v);for(var E=0;E<this.legendSeries.length;E++)!(n.rowCount<n.columnCount||n.rowCount===n.columnCount)||"top"!==r&&"bottom"!==r&&"custom"!==r?(O+this.legendSeries[E].bounds.height+u+v+b>s.height+i&&(O=i,P+=a+u),this.legendGroup=this.drawLegendItem(t,n,this.legendSeries[E],E,P,O,s),C.appendChild(this.legendGroup),O+=this.legendSeries[E].bounds.height+u,a=Math.max(a,this.legendSeries[E].bounds.width)):(P+this.legendSeries[E].bounds.width>s.width+e&&(P=d,O+=this.legendSeries[E].bounds.height+u),this.legendGroup=this.drawLegendItem(t,n,this.legendSeries[E],E,P,O,s),C.appendChild(this.legendGroup),P+=this.legendSeries[E].bounds.width+u);C.setAttribute("transform","translate("+s.x.toString()+","+s.y.toString()+")"),this.drawLegendBorder(C,t,n,s)},t.prototype.drawLegendBorder=function(t,e,i,n){var r=new qI(e.element.id+"_svg_legendRect","none",i.border,1,new bI(0,0,n.width,n.height));t.appendChild(e.renderer.drawRectangle(r))},t.prototype.drawLegendTitle=function(t,e,i,n){var r=t.elementSpacing,o=YI(e.title.text,e.title.textStyle),s=o.width,a=o.height,l=e.title.textAlignment,h=0,c=i.width,d=r+a/2;switch(l){case"Far":h=c-s-h;break;case"Center":h=c/2-s/2}h<0&&(h=0,c=s),c<s+h&&(c=s+h);var p=eT(new KI(t.element.id+"_LegendTitleText",h,d,"start",e.title.text),e.title.textStyle,t.themeStyle.legendLabel,n);return p.setAttribute("aria-label",e.title.description||e.title.text),p},t.prototype.drawLegendItem=function(t,e,i,n,r,o,s){var a,l,h=this,c=e.itemStyle;e.itemPadding;Math.sqrt(c.width*c.width+c.height*c.height),l=YI(i.text,e.textStyle).height,a={x:r+c.width/2,y:o+(l>c.height?l:c.height)/2};var d=t.renderer.createGroup({id:t.element.id+"_svg_Legend"+n.toString()});d.style.cursor=e.toggleVisibility?"pointer":"default";var p={text:i.text,fill:i.fill,shape:i.shape,name:"legendRender",cancel:!1},u=function(r){if(!r.cancel){var o=h.drawLegendShape(t,i,a.x,a.y,n,e,r);d.appendChild(o);var s=new KI(t.element.id+"_LegendItemText"+n.toString(),a.x+c.width/2+e.shapePadding,a.y+l/4,"start",r.text);e.textStyle.fontFamily=t.themeStyle.fontFamily||e.textStyle.fontFamily,e.textStyle.size=t.themeStyle.fontSize||e.textStyle.size;var p=eT(s,e.textStyle,t.themeStyle.legendLabel,d);p.setAttribute("aria-label",e.description||"Click to show or hide the "+s.text+" series"),d.appendChild(p),h.legendItemGroup.appendChild(d)}};return u.bind(this),t.trigger("legendRender",p,u),this.legendItemGroup},t.prototype.drawLegendShape=function(t,e,i,n,r,o,s){var a,l,h,c,d=o.itemStyle,p=d.width,u=d.height,f=i+-p/2,g={color:d.border.color,width:d.border.width},m="visible"===t.series[r].visibility?s.fill:"grey",y=s.shape.toLowerCase(),v=Math.sqrt(u*u+p*p)/2;switch(y){case"circle":l=new XI(t.element.id+"_svg_LegendItemShape"+r.toString(),m,g,1,i,n,v,null),a=t.renderer.drawCircle(l);break;case"rectangle":c="M "+f+" "+(n+-u/2)+" L "+(p/2+i)+" "+(n+-u/2)+" L "+(i+p/2)+" "+(n+u/2)+" L "+f+" "+(n+u/2)+" L "+f+" "+(n+-u/2)+" z",h=new GI(t.element.id+"_svg_LegendItemShape"+r.toString(),m,g.width,g.color,1,"",c),a=t.renderer.drawPath(h);break;case"diamond":c="M "+f+" "+n+" L "+i+" "+(n+-u/2)+" L "+(p/2+i)+" "+n+" L "+i+" "+(n+u/2)+" L "+f+" "+n+" z",h=new GI(t.element.id+"_svg_LegendItemShape"+r.toString(),m,g.width,g.color,1,"",c),a=t.renderer.drawPath(h);break;case"pentagon":for(var b=0;b<=5;b++){var w=v*Math.cos(Math.PI/180*(72*b)),S=v*Math.sin(Math.PI/180*(72*b));c=0===b?"M "+(w+i)+" "+(n+S)+" ":c.concat("L "+(i+w)+" "+(n+S)+" ")}c=c.concat("Z"),h=new GI(t.element.id+"_svg_LegendItemShape"+r.toString(),m,g.width,g.color,1,"",c),a=t.renderer.drawPath(h);break;case"triangle":c="M "+f+" "+(u/2+n)+" L "+i+" "+(n+-u/2)+" L "+(i+p/2)+" "+(n+u/2)+" L "+f+" "+(n+u/2)+" Z",h=new GI(t.element.id+"_svg_LegendItemShape"+r.toString(),m,g.width,g.color,1,"",c),a=t.renderer.drawPath(h)}return a},t.prototype.getModuleName=function(){return"SmithchartLegend"},t.prototype.destroy=function(t){},t}();(function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}})(),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}();!function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)}}();var VT={},FT={},WT={},UT={},GT={},qT={},XT={};NT.Inject(_T,HT),Object(I.copy)(VT,{Smithchart:NT,SmithchartLegend:_T,TooltipRender:HT}),Object(I.copy)(FT,n),Object(I.copy)(WT,P),Object(I.copy)(UT,m),Object(I.copy)(GT,L),Object(I.copy)(qT,O),Object(I.copy)(XT,E);var YT={},ZT={},KT={},JT={};rx.Inject(PS),Object(I.copy)(YT,{SymbolPalette:rx,BpmnDiagrams:PS}),Object(I.copy)(ZT,n),Object(I.copy)(KT,m),Object(I.copy)(JT,r);var QT={},$T={},tA={},eA={},iA={},nA={},rA={},oA={},sA={},aA={},lA={},hA={},cA={},dA={},pA={},uA={},fA={},gA={},mA={},yA={},vA={};Object(I.copy)(QT,Xn),Object(I.copy)($T,Yn),Object(I.copy)(tA,Ql),Object(I.copy)($T,$l),Object(I.copy)(eA,th),Object(I.copy)(tA,Ql),Object(I.copy)(tA,Ql),Object(I.copy)(iA,eh),Object(I.copy)(nA,ih),Object(I.copy)(rA,ah),Object(I.copy)(rA,ah),Object(I.copy)($T,lh),Object(I.copy)(nA,hh),Object(I.copy)(oA,ph),Object(I.copy)($T,uh),Object(I.copy)(eA,fh),Object(I.copy)(nA,gh),Object(I.copy)(sA,vh),Object(I.copy)(sA,vh),Object(I.copy)($T,bh),Object(I.copy)(nA,wh),Object(I.copy)(aA,Hc),Object(I.copy)($T,_c),Object(I.copy)(lA,Vc),Object(I.copy)(hA,Fc),Object(I.copy)(tA,Wc),Object(I.copy)(eA,Uc),Object(I.copy)(nA,Gc),Object(I.copy)(QT,hd),Object(I.copy)($T,cd),Object(I.copy)(hA,dd),Object(I.copy)(nA,pd),Object(I.copy)(QT,hd),Object(I.copy)(cA,md),Object(I.copy)($T,yd),Object(I.copy)(tA,vd),Object(I.copy)($T,bd),Object(I.copy)(nA,wd),Object(I.copy)(nA,Sd),Object(I.copy)($T,xd),Object(I.copy)(sA,Cd),Object(I.copy)($T,Pd),Object(I.copy)(nA,Od),Object(I.copy)(dA,Bd),Object(I.copy)(dA,Bd),Object(I.copy)($T,kd),Object(I.copy)(nA,Md),Object(I.copy)(QT,Dd),Object(I.copy)(QT,Dd),Object(I.copy)(pA,Nd),Object(I.copy)($T,Hd),Object(I.copy)(nA,_d),Object(I.copy)(tA,Vd),Object(I.copy)($T,Fd),Object(I.copy)(uA,lx),Object(I.copy)(uA,lx),Object(I.copy)($T,hx),Object(I.copy)(lA,cx),Object(I.copy)(QT,dx),Object(I.copy)(nA,px),Object(I.copy)(hA,fx),Object(I.copy)($T,gx),Object(I.copy)(eA,mx),Object(I.copy)(lA,yx),Object(I.copy)(fA,VT),Object(I.copy)($T,FT),Object(I.copy)(gA,WT),Object(I.copy)(lA,UT),Object(I.copy)(mA,GT),Object(I.copy)(yA,qT),Object(I.copy)(vA,XT),Object(I.copy)(uA,YT),Object(I.copy)($T,ZT),Object(I.copy)(lA,KT),Object(I.copy)(QT,JT);var bA={navigations:QT,base:$T,inputs:tA,buttons:eA,splitbuttons:iA,popups:nA,dropdowns:aA,data:lA,lists:hA,diagrams:uA,charts:fA,svgbase:gA,pdfexport:mA,fileutils:yA,compression:vA};bA.sfBlazor={ContextMenu:rA,Dialog:oA,DropDownButton:sA,NumericTextBox:cA,Toolbar:dA,Tooltip:pA},window.sf=bA}]);